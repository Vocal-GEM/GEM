var w0=Object.defineProperty;var _0=(St,e,en)=>e in St?w0(St,e,{enumerable:!0,configurable:!0,writable:!0,value:en}):St[e]=en;var Mr=(St,e,en)=>_0(St,typeof e!="symbol"?e+"":e,en);function _mergeNamespaces(St,e){for(var en=0;en<e.length;en++){const tn=e[en];if(typeof tn!="string"&&!Array.isArray(tn)){for(const nn in tn)if(nn!=="default"&&!(nn in St)){const sn=Object.getOwnPropertyDescriptor(tn,nn);sn&&Object.defineProperty(St,nn,sn.get?sn:{enumerable:!0,get:()=>tn[nn]})}}}return Object.freeze(Object.defineProperty(St,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const nn of document.querySelectorAll('link[rel="modulepreload"]'))tn(nn);new MutationObserver(nn=>{for(const sn of nn)if(sn.type==="childList")for(const on of sn.addedNodes)on.tagName==="LINK"&&on.rel==="modulepreload"&&tn(on)}).observe(document,{childList:!0,subtree:!0});function en(nn){const sn={};return nn.integrity&&(sn.integrity=nn.integrity),nn.referrerPolicy&&(sn.referrerPolicy=nn.referrerPolicy),nn.crossOrigin==="use-credentials"?sn.credentials="include":nn.crossOrigin==="anonymous"?sn.credentials="omit":sn.credentials="same-origin",sn}function tn(nn){if(nn.ep)return;nn.ep=!0;const sn=en(nn);fetch(nn.href,sn)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(St){return St&&St.__esModule&&Object.prototype.hasOwnProperty.call(St,"default")?St.default:St}function getAugmentedNamespace(St){if(St.__esModule)return St;var e=St.default;if(typeof e=="function"){var en=function tn(){return this instanceof tn?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};en.prototype=e.prototype}else en={};return Object.defineProperty(en,"__esModule",{value:!0}),Object.keys(St).forEach(function(tn){var nn=Object.getOwnPropertyDescriptor(St,tn);Object.defineProperty(en,tn,nn.get?nn:{enumerable:!0,get:function(){return St[tn]}})}),en}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$2=Symbol.for("react.element"),n$1=Symbol.for("react.portal"),p$3=Symbol.for("react.fragment"),q$2=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u$1=Symbol.for("react.context"),v$2=Symbol.for("react.forward_ref"),w$1=Symbol.for("react.suspense"),x$2=Symbol.for("react.memo"),y$1=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$2(St){return St===null||typeof St!="object"?null:(St=z$2&&St[z$2]||St["@@iterator"],typeof St=="function"?St:null)}var B$2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$2=Object.assign,D$2={};function E$2(St,e,en){this.props=St,this.context=e,this.refs=D$2,this.updater=en||B$2}E$2.prototype.isReactComponent={};E$2.prototype.setState=function(St,e){if(typeof St!="object"&&typeof St!="function"&&St!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,St,e,"setState")};E$2.prototype.forceUpdate=function(St){this.updater.enqueueForceUpdate(this,St,"forceUpdate")};function F$1(){}F$1.prototype=E$2.prototype;function G$2(St,e,en){this.props=St,this.context=e,this.refs=D$2,this.updater=en||B$2}var H$2=G$2.prototype=new F$1;H$2.constructor=G$2;C$2(H$2,E$2.prototype);H$2.isPureReactComponent=!0;var I$2=Array.isArray,J$1=Object.prototype.hasOwnProperty,K$2={current:null},L$2={key:!0,ref:!0,__self:!0,__source:!0};function M$2(St,e,en){var tn,nn={},sn=null,on=null;if(e!=null)for(tn in e.ref!==void 0&&(on=e.ref),e.key!==void 0&&(sn=""+e.key),e)J$1.call(e,tn)&&!L$2.hasOwnProperty(tn)&&(nn[tn]=e[tn]);var un=arguments.length-2;if(un===1)nn.children=en;else if(1<un){for(var dn=Array(un),fn=0;fn<un;fn++)dn[fn]=arguments[fn+2];nn.children=dn}if(St&&St.defaultProps)for(tn in un=St.defaultProps,un)nn[tn]===void 0&&(nn[tn]=un[tn]);return{$$typeof:l$2,type:St,key:sn,ref:on,props:nn,_owner:K$2.current}}function N$2(St,e){return{$$typeof:l$2,type:St.type,key:e,ref:St.ref,props:St.props,_owner:St._owner}}function O$2(St){return typeof St=="object"&&St!==null&&St.$$typeof===l$2}function escape(St){var e={"=":"=0",":":"=2"};return"$"+St.replace(/[=:]/g,function(en){return e[en]})}var P$2=/\/+/g;function Q$2(St,e){return typeof St=="object"&&St!==null&&St.key!=null?escape(""+St.key):e.toString(36)}function R$2(St,e,en,tn,nn){var sn=typeof St;(sn==="undefined"||sn==="boolean")&&(St=null);var on=!1;if(St===null)on=!0;else switch(sn){case"string":case"number":on=!0;break;case"object":switch(St.$$typeof){case l$2:case n$1:on=!0}}if(on)return on=St,nn=nn(on),St=tn===""?"."+Q$2(on,0):tn,I$2(nn)?(en="",St!=null&&(en=St.replace(P$2,"$&/")+"/"),R$2(nn,e,en,"",function(fn){return fn})):nn!=null&&(O$2(nn)&&(nn=N$2(nn,en+(!nn.key||on&&on.key===nn.key?"":(""+nn.key).replace(P$2,"$&/")+"/")+St)),e.push(nn)),1;if(on=0,tn=tn===""?".":tn+":",I$2(St))for(var un=0;un<St.length;un++){sn=St[un];var dn=tn+Q$2(sn,un);on+=R$2(sn,e,en,dn,nn)}else if(dn=A$2(St),typeof dn=="function")for(St=dn.call(St),un=0;!(sn=St.next()).done;)sn=sn.value,dn=tn+Q$2(sn,un++),on+=R$2(sn,e,en,dn,nn);else if(sn==="object")throw e=String(St),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(St).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return on}function S$2(St,e,en){if(St==null)return St;var tn=[],nn=0;return R$2(St,tn,"","",function(sn){return e.call(en,sn,nn++)}),tn}function T$2(St){if(St._status===-1){var e=St._result;e=e(),e.then(function(en){(St._status===0||St._status===-1)&&(St._status=1,St._result=en)},function(en){(St._status===0||St._status===-1)&&(St._status=2,St._result=en)}),St._status===-1&&(St._status=0,St._result=e)}if(St._status===1)return St._result.default;throw St._result}var U$2={current:null},V$2={transition:null},W$2={ReactCurrentDispatcher:U$2,ReactCurrentBatchConfig:V$2,ReactCurrentOwner:K$2};function X$3(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$2,forEach:function(St,e,en){S$2(St,function(){e.apply(this,arguments)},en)},count:function(St){var e=0;return S$2(St,function(){e++}),e},toArray:function(St){return S$2(St,function(e){return e})||[]},only:function(St){if(!O$2(St))throw Error("React.Children.only expected to receive a single React element child.");return St}};react_production_min.Component=E$2;react_production_min.Fragment=p$3;react_production_min.Profiler=r;react_production_min.PureComponent=G$2;react_production_min.StrictMode=q$2;react_production_min.Suspense=w$1;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$2;react_production_min.act=X$3;react_production_min.cloneElement=function(St,e,en){if(St==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+St+".");var tn=C$2({},St.props),nn=St.key,sn=St.ref,on=St._owner;if(e!=null){if(e.ref!==void 0&&(sn=e.ref,on=K$2.current),e.key!==void 0&&(nn=""+e.key),St.type&&St.type.defaultProps)var un=St.type.defaultProps;for(dn in e)J$1.call(e,dn)&&!L$2.hasOwnProperty(dn)&&(tn[dn]=e[dn]===void 0&&un!==void 0?un[dn]:e[dn])}var dn=arguments.length-2;if(dn===1)tn.children=en;else if(1<dn){un=Array(dn);for(var fn=0;fn<dn;fn++)un[fn]=arguments[fn+2];tn.children=un}return{$$typeof:l$2,type:St.type,key:nn,ref:sn,props:tn,_owner:on}};react_production_min.createContext=function(St){return St={$$typeof:u$1,_currentValue:St,_currentValue2:St,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},St.Provider={$$typeof:t,_context:St},St.Consumer=St};react_production_min.createElement=M$2;react_production_min.createFactory=function(St){var e=M$2.bind(null,St);return e.type=St,e};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(St){return{$$typeof:v$2,render:St}};react_production_min.isValidElement=O$2;react_production_min.lazy=function(St){return{$$typeof:y$1,_payload:{_status:-1,_result:St},_init:T$2}};react_production_min.memo=function(St,e){return{$$typeof:x$2,type:St,compare:e===void 0?null:e}};react_production_min.startTransition=function(St){var e=V$2.transition;V$2.transition={};try{St()}finally{V$2.transition=e}};react_production_min.unstable_act=X$3;react_production_min.useCallback=function(St,e){return U$2.current.useCallback(St,e)};react_production_min.useContext=function(St){return U$2.current.useContext(St)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(St){return U$2.current.useDeferredValue(St)};react_production_min.useEffect=function(St,e){return U$2.current.useEffect(St,e)};react_production_min.useId=function(){return U$2.current.useId()};react_production_min.useImperativeHandle=function(St,e,en){return U$2.current.useImperativeHandle(St,e,en)};react_production_min.useInsertionEffect=function(St,e){return U$2.current.useInsertionEffect(St,e)};react_production_min.useLayoutEffect=function(St,e){return U$2.current.useLayoutEffect(St,e)};react_production_min.useMemo=function(St,e){return U$2.current.useMemo(St,e)};react_production_min.useReducer=function(St,e,en){return U$2.current.useReducer(St,e,en)};react_production_min.useRef=function(St){return U$2.current.useRef(St)};react_production_min.useState=function(St){return U$2.current.useState(St)};react_production_min.useSyncExternalStore=function(St,e,en){return U$2.current.useSyncExternalStore(St,e,en)};react_production_min.useTransition=function(){return U$2.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$1=reactExports,k$1=Symbol.for("react.element"),l$1=Symbol.for("react.fragment"),m$2=Object.prototype.hasOwnProperty,n=f$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$2={key:!0,ref:!0,__self:!0,__source:!0};function q$1(St,e,en){var tn,nn={},sn=null,on=null;en!==void 0&&(sn=""+en),e.key!==void 0&&(sn=""+e.key),e.ref!==void 0&&(on=e.ref);for(tn in e)m$2.call(e,tn)&&!p$2.hasOwnProperty(tn)&&(nn[tn]=e[tn]);if(St&&St.defaultProps)for(tn in e=St.defaultProps,e)nn[tn]===void 0&&(nn[tn]=e[tn]);return{$$typeof:k$1,type:St,key:sn,ref:on,props:nn,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l$1;reactJsxRuntime_production_min.jsx=q$1;reactJsxRuntime_production_min.jsxs=q$1;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(St){function e(Yn,Qn){var zn=Yn.length;Yn.push(Qn);e:for(;0<zn;){var lr=zn-1>>>1,$n=Yn[lr];if(0<nn($n,Qn))Yn[lr]=Qn,Yn[zn]=$n,zn=lr;else break e}}function en(Yn){return Yn.length===0?null:Yn[0]}function tn(Yn){if(Yn.length===0)return null;var Qn=Yn[0],zn=Yn.pop();if(zn!==Qn){Yn[0]=zn;e:for(var lr=0,$n=Yn.length,On=$n>>>1;lr<On;){var er=2*(lr+1)-1,sr=Yn[er],ar=er+1,cr=Yn[ar];if(0>nn(sr,zn))ar<$n&&0>nn(cr,sr)?(Yn[lr]=cr,Yn[ar]=zn,lr=ar):(Yn[lr]=sr,Yn[er]=zn,lr=er);else if(ar<$n&&0>nn(cr,zn))Yn[lr]=cr,Yn[ar]=zn,lr=ar;else break e}}return Qn}function nn(Yn,Qn){var zn=Yn.sortIndex-Qn.sortIndex;return zn!==0?zn:Yn.id-Qn.id}if(typeof performance=="object"&&typeof performance.now=="function"){var sn=performance;St.unstable_now=function(){return sn.now()}}else{var on=Date,un=on.now();St.unstable_now=function(){return on.now()-un}}var dn=[],fn=[],hn=1,an=null,rn=3,cn=!1,pn=!1,mn=!1,xn=typeof setTimeout=="function"?setTimeout:null,gn=typeof clearTimeout=="function"?clearTimeout:null,yn=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function bn(Yn){for(var Qn=en(fn);Qn!==null;){if(Qn.callback===null)tn(fn);else if(Qn.startTime<=Yn)tn(fn),Qn.sortIndex=Qn.expirationTime,e(dn,Qn);else break;Qn=en(fn)}}function wn(Yn){if(mn=!1,bn(Yn),!pn)if(en(dn)!==null)pn=!0,Ln(_n);else{var Qn=en(fn);Qn!==null&&qn(wn,Qn.startTime-Yn)}}function _n(Yn,Qn){pn=!1,mn&&(mn=!1,gn(Pn),Pn=-1),cn=!0;var zn=rn;try{for(bn(Qn),an=en(dn);an!==null&&(!(an.expirationTime>Qn)||Yn&&!Nn());){var lr=an.callback;if(typeof lr=="function"){an.callback=null,rn=an.priorityLevel;var $n=lr(an.expirationTime<=Qn);Qn=St.unstable_now(),typeof $n=="function"?an.callback=$n:an===en(dn)&&tn(dn),bn(Qn)}else tn(dn);an=en(dn)}if(an!==null)var On=!0;else{var er=en(fn);er!==null&&qn(wn,er.startTime-Qn),On=!1}return On}finally{an=null,rn=zn,cn=!1}}var Tn=!1,An=null,Pn=-1,Sn=5,Cn=-1;function Nn(){return!(St.unstable_now()-Cn<Sn)}function Mn(){if(An!==null){var Yn=St.unstable_now();Cn=Yn;var Qn=!0;try{Qn=An(!0,Yn)}finally{Qn?Fn():(Tn=!1,An=null)}}else Tn=!1}var Fn;if(typeof yn=="function")Fn=function(){yn(Mn)};else if(typeof MessageChannel<"u"){var In=new MessageChannel,Bn=In.port2;In.port1.onmessage=Mn,Fn=function(){Bn.postMessage(null)}}else Fn=function(){xn(Mn,0)};function Ln(Yn){An=Yn,Tn||(Tn=!0,Fn())}function qn(Yn,Qn){Pn=xn(function(){Yn(St.unstable_now())},Qn)}St.unstable_IdlePriority=5,St.unstable_ImmediatePriority=1,St.unstable_LowPriority=4,St.unstable_NormalPriority=3,St.unstable_Profiling=null,St.unstable_UserBlockingPriority=2,St.unstable_cancelCallback=function(Yn){Yn.callback=null},St.unstable_continueExecution=function(){pn||cn||(pn=!0,Ln(_n))},St.unstable_forceFrameRate=function(Yn){0>Yn||125<Yn?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Sn=0<Yn?Math.floor(1e3/Yn):5},St.unstable_getCurrentPriorityLevel=function(){return rn},St.unstable_getFirstCallbackNode=function(){return en(dn)},St.unstable_next=function(Yn){switch(rn){case 1:case 2:case 3:var Qn=3;break;default:Qn=rn}var zn=rn;rn=Qn;try{return Yn()}finally{rn=zn}},St.unstable_pauseExecution=function(){},St.unstable_requestPaint=function(){},St.unstable_runWithPriority=function(Yn,Qn){switch(Yn){case 1:case 2:case 3:case 4:case 5:break;default:Yn=3}var zn=rn;rn=Yn;try{return Qn()}finally{rn=zn}},St.unstable_scheduleCallback=function(Yn,Qn,zn){var lr=St.unstable_now();switch(typeof zn=="object"&&zn!==null?(zn=zn.delay,zn=typeof zn=="number"&&0<zn?lr+zn:lr):zn=lr,Yn){case 1:var $n=-1;break;case 2:$n=250;break;case 5:$n=1073741823;break;case 4:$n=1e4;break;default:$n=5e3}return $n=zn+$n,Yn={id:hn++,callback:Qn,priorityLevel:Yn,startTime:zn,expirationTime:$n,sortIndex:-1},zn>lr?(Yn.sortIndex=zn,e(fn,Yn),en(dn)===null&&Yn===en(fn)&&(mn?(gn(Pn),Pn=-1):mn=!0,qn(wn,zn-lr))):(Yn.sortIndex=$n,e(dn,Yn),pn||cn||(pn=!0,Ln(_n))),Yn},St.unstable_shouldYield=Nn,St.unstable_wrapCallback=function(Yn){var Qn=rn;return function(){var zn=rn;rn=Qn;try{return Yn.apply(this,arguments)}finally{rn=zn}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$1(St){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+St,en=1;en<arguments.length;en++)e+="&args[]="+encodeURIComponent(arguments[en]);return"Minified React error #"+St+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(St,e){ha(St,e),ha(St+"Capture",e)}function ha(St,e){for(ea[St]=e,St=0;St<e.length;St++)da.add(e[St])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(St){return ja.call(ma,St)?!0:ja.call(la,St)?!1:ka.test(St)?ma[St]=!0:(la[St]=!0,!1)}function pa(St,e,en,tn){if(en!==null&&en.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return tn?!1:en!==null?!en.acceptsBooleans:(St=St.toLowerCase().slice(0,5),St!=="data-"&&St!=="aria-");default:return!1}}function qa(St,e,en,tn){if(e===null||typeof e>"u"||pa(St,e,en,tn))return!0;if(tn)return!1;if(en!==null)switch(en.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function v$1(St,e,en,tn,nn,sn,on){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=tn,this.attributeNamespace=nn,this.mustUseProperty=en,this.propertyName=St,this.type=e,this.sanitizeURL=sn,this.removeEmptyString=on}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(St){z$1[St]=new v$1(St,0,!1,St,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(St){var e=St[0];z$1[e]=new v$1(e,1,!1,St[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(St){z$1[St]=new v$1(St,2,!1,St.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(St){z$1[St]=new v$1(St,2,!1,St,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(St){z$1[St]=new v$1(St,3,!1,St.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(St){z$1[St]=new v$1(St,3,!0,St,null,!1,!1)});["capture","download"].forEach(function(St){z$1[St]=new v$1(St,4,!1,St,null,!1,!1)});["cols","rows","size","span"].forEach(function(St){z$1[St]=new v$1(St,6,!1,St,null,!1,!1)});["rowSpan","start"].forEach(function(St){z$1[St]=new v$1(St,5,!1,St.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(St){return St[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(St){var e=St.replace(ra,sa);z$1[e]=new v$1(e,1,!1,St,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(St){var e=St.replace(ra,sa);z$1[e]=new v$1(e,1,!1,St,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(St){var e=St.replace(ra,sa);z$1[e]=new v$1(e,1,!1,St,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(St){z$1[St]=new v$1(St,1,!1,St.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new v$1("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(St){z$1[St]=new v$1(St,1,!1,St.toLowerCase(),null,!0,!0)});function ta(St,e,en,tn){var nn=z$1.hasOwnProperty(e)?z$1[e]:null;(nn!==null?nn.type!==0:tn||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qa(e,en,nn,tn)&&(en=null),tn||nn===null?oa(e)&&(en===null?St.removeAttribute(e):St.setAttribute(e,""+en)):nn.mustUseProperty?St[nn.propertyName]=en===null?nn.type===3?!1:"":en:(e=nn.attributeName,tn=nn.attributeNamespace,en===null?St.removeAttribute(e):(nn=nn.type,en=nn===3||nn===4&&en===!0?"":""+en,tn?St.setAttributeNS(tn,e,en):St.setAttribute(e,en))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(St){return St===null||typeof St!="object"?null:(St=Ja&&St[Ja]||St["@@iterator"],typeof St=="function"?St:null)}var A$1=Object.assign,La;function Ma(St){if(La===void 0)try{throw Error()}catch(en){var e=en.stack.trim().match(/\n( *(at )?)/);La=e&&e[1]||""}return`
`+La+St}var Na=!1;function Oa(St,e){if(!St||Na)return"";Na=!0;var en=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(fn){var tn=fn}Reflect.construct(St,[],e)}else{try{e.call()}catch(fn){tn=fn}St.call(e.prototype)}else{try{throw Error()}catch(fn){tn=fn}St()}}catch(fn){if(fn&&tn&&typeof fn.stack=="string"){for(var nn=fn.stack.split(`
`),sn=tn.stack.split(`
`),on=nn.length-1,un=sn.length-1;1<=on&&0<=un&&nn[on]!==sn[un];)un--;for(;1<=on&&0<=un;on--,un--)if(nn[on]!==sn[un]){if(on!==1||un!==1)do if(on--,un--,0>un||nn[on]!==sn[un]){var dn=`
`+nn[on].replace(" at new "," at ");return St.displayName&&dn.includes("<anonymous>")&&(dn=dn.replace("<anonymous>",St.displayName)),dn}while(1<=on&&0<=un);break}}}finally{Na=!1,Error.prepareStackTrace=en}return(St=St?St.displayName||St.name:"")?Ma(St):""}function Pa(St){switch(St.tag){case 5:return Ma(St.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return St=Oa(St.type,!1),St;case 11:return St=Oa(St.type.render,!1),St;case 1:return St=Oa(St.type,!0),St;default:return""}}function Qa(St){if(St==null)return null;if(typeof St=="function")return St.displayName||St.name||null;if(typeof St=="string")return St;switch(St){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof St=="object")switch(St.$$typeof){case Ca:return(St.displayName||"Context")+".Consumer";case Ba:return(St._context.displayName||"Context")+".Provider";case Da:var e=St.render;return St=St.displayName,St||(St=e.displayName||e.name||"",St=St!==""?"ForwardRef("+St+")":"ForwardRef"),St;case Ga:return e=St.displayName||null,e!==null?e:Qa(St.type)||"Memo";case Ha:e=St._payload,St=St._init;try{return Qa(St(e))}catch{}}return null}function Ra(St){var e=St.type;switch(St.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return St=e.render,St=St.displayName||St.name||"",e.displayName||(St!==""?"ForwardRef("+St+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(e);case 8:return e===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sa(St){switch(typeof St){case"boolean":case"number":case"string":case"undefined":return St;case"object":return St;default:return""}}function Ta(St){var e=St.type;return(St=St.nodeName)&&St.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ua(St){var e=Ta(St)?"checked":"value",en=Object.getOwnPropertyDescriptor(St.constructor.prototype,e),tn=""+St[e];if(!St.hasOwnProperty(e)&&typeof en<"u"&&typeof en.get=="function"&&typeof en.set=="function"){var nn=en.get,sn=en.set;return Object.defineProperty(St,e,{configurable:!0,get:function(){return nn.call(this)},set:function(on){tn=""+on,sn.call(this,on)}}),Object.defineProperty(St,e,{enumerable:en.enumerable}),{getValue:function(){return tn},setValue:function(on){tn=""+on},stopTracking:function(){St._valueTracker=null,delete St[e]}}}}function Va(St){St._valueTracker||(St._valueTracker=Ua(St))}function Wa(St){if(!St)return!1;var e=St._valueTracker;if(!e)return!0;var en=e.getValue(),tn="";return St&&(tn=Ta(St)?St.checked?"true":"false":St.value),St=tn,St!==en?(e.setValue(St),!0):!1}function Xa(St){if(St=St||(typeof document<"u"?document:void 0),typeof St>"u")return null;try{return St.activeElement||St.body}catch{return St.body}}function Ya(St,e){var en=e.checked;return A$1({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:en??St._wrapperState.initialChecked})}function Za(St,e){var en=e.defaultValue==null?"":e.defaultValue,tn=e.checked!=null?e.checked:e.defaultChecked;en=Sa(e.value!=null?e.value:en),St._wrapperState={initialChecked:tn,initialValue:en,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ab(St,e){e=e.checked,e!=null&&ta(St,"checked",e,!1)}function bb(St,e){ab(St,e);var en=Sa(e.value),tn=e.type;if(en!=null)tn==="number"?(en===0&&St.value===""||St.value!=en)&&(St.value=""+en):St.value!==""+en&&(St.value=""+en);else if(tn==="submit"||tn==="reset"){St.removeAttribute("value");return}e.hasOwnProperty("value")?cb(St,e.type,en):e.hasOwnProperty("defaultValue")&&cb(St,e.type,Sa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(St.defaultChecked=!!e.defaultChecked)}function db(St,e,en){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var tn=e.type;if(!(tn!=="submit"&&tn!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+St._wrapperState.initialValue,en||e===St.value||(St.value=e),St.defaultValue=e}en=St.name,en!==""&&(St.name=""),St.defaultChecked=!!St._wrapperState.initialChecked,en!==""&&(St.name=en)}function cb(St,e,en){(e!=="number"||Xa(St.ownerDocument)!==St)&&(en==null?St.defaultValue=""+St._wrapperState.initialValue:St.defaultValue!==""+en&&(St.defaultValue=""+en))}var eb=Array.isArray;function fb(St,e,en,tn){if(St=St.options,e){e={};for(var nn=0;nn<en.length;nn++)e["$"+en[nn]]=!0;for(en=0;en<St.length;en++)nn=e.hasOwnProperty("$"+St[en].value),St[en].selected!==nn&&(St[en].selected=nn),nn&&tn&&(St[en].defaultSelected=!0)}else{for(en=""+Sa(en),e=null,nn=0;nn<St.length;nn++){if(St[nn].value===en){St[nn].selected=!0,tn&&(St[nn].defaultSelected=!0);return}e!==null||St[nn].disabled||(e=St[nn])}e!==null&&(e.selected=!0)}}function gb(St,e){if(e.dangerouslySetInnerHTML!=null)throw Error(p$1(91));return A$1({},e,{value:void 0,defaultValue:void 0,children:""+St._wrapperState.initialValue})}function hb(St,e){var en=e.value;if(en==null){if(en=e.children,e=e.defaultValue,en!=null){if(e!=null)throw Error(p$1(92));if(eb(en)){if(1<en.length)throw Error(p$1(93));en=en[0]}e=en}e==null&&(e=""),en=e}St._wrapperState={initialValue:Sa(en)}}function ib(St,e){var en=Sa(e.value),tn=Sa(e.defaultValue);en!=null&&(en=""+en,en!==St.value&&(St.value=en),e.defaultValue==null&&St.defaultValue!==en&&(St.defaultValue=en)),tn!=null&&(St.defaultValue=""+tn)}function jb(St){var e=St.textContent;e===St._wrapperState.initialValue&&e!==""&&e!==null&&(St.value=e)}function kb(St){switch(St){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(St,e){return St==null||St==="http://www.w3.org/1999/xhtml"?kb(e):St==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":St}var mb,nb=function(St){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,en,tn,nn){MSApp.execUnsafeLocalFunction(function(){return St(e,en,tn,nn)})}:St}(function(St,e){if(St.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in St)St.innerHTML=e;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mb.firstChild;St.firstChild;)St.removeChild(St.firstChild);for(;e.firstChild;)St.appendChild(e.firstChild)}});function ob(St,e){if(e){var en=St.firstChild;if(en&&en===St.lastChild&&en.nodeType===3){en.nodeValue=e;return}}St.textContent=e}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(St){qb.forEach(function(e){e=e+St.charAt(0).toUpperCase()+St.substring(1),pb[e]=pb[St]})});function rb(St,e,en){return e==null||typeof e=="boolean"||e===""?"":en||typeof e!="number"||e===0||pb.hasOwnProperty(St)&&pb[St]?(""+e).trim():e+"px"}function sb(St,e){St=St.style;for(var en in e)if(e.hasOwnProperty(en)){var tn=en.indexOf("--")===0,nn=rb(en,e[en],tn);en==="float"&&(en="cssFloat"),tn?St.setProperty(en,nn):St[en]=nn}}var tb=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(St,e){if(e){if(tb[St]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(p$1(137,St));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(p$1(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(p$1(61))}if(e.style!=null&&typeof e.style!="object")throw Error(p$1(62))}}function vb(St,e){if(St.indexOf("-")===-1)return typeof e.is=="string";switch(St){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(St){return St=St.target||St.srcElement||window,St.correspondingUseElement&&(St=St.correspondingUseElement),St.nodeType===3?St.parentNode:St}var yb=null,zb=null,Ab=null;function Bb(St){if(St=Cb(St)){if(typeof yb!="function")throw Error(p$1(280));var e=St.stateNode;e&&(e=Db(e),yb(St.stateNode,St.type,e))}}function Eb(St){zb?Ab?Ab.push(St):Ab=[St]:zb=St}function Fb(){if(zb){var St=zb,e=Ab;if(Ab=zb=null,Bb(St),e)for(St=0;St<e.length;St++)Bb(e[St])}}function Gb(St,e){return St(e)}function Hb(){}var Ib=!1;function Jb(St,e,en){if(Ib)return St(e,en);Ib=!0;try{return Gb(St,e,en)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(St,e){var en=St.stateNode;if(en===null)return null;var tn=Db(en);if(tn===null)return null;en=tn[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(tn=!tn.disabled)||(St=St.type,tn=!(St==="button"||St==="input"||St==="select"||St==="textarea")),St=!tn;break e;default:St=!1}if(St)return null;if(en&&typeof en!="function")throw Error(p$1(231,e,typeof en));return en}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(St,e,en,tn,nn,sn,on,un,dn){var fn=Array.prototype.slice.call(arguments,3);try{e.apply(en,fn)}catch(hn){this.onError(hn)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(St){Ob=!0,Pb=St}};function Tb(St,e,en,tn,nn,sn,on,un,dn){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(St,e,en,tn,nn,sn,on,un,dn){if(Tb.apply(this,arguments),Ob){if(Ob){var fn=Pb;Ob=!1,Pb=null}else throw Error(p$1(198));Qb||(Qb=!0,Rb=fn)}}function Vb(St){var e=St,en=St;if(St.alternate)for(;e.return;)e=e.return;else{St=e;do e=St,e.flags&4098&&(en=e.return),St=e.return;while(St)}return e.tag===3?en:null}function Wb(St){if(St.tag===13){var e=St.memoizedState;if(e===null&&(St=St.alternate,St!==null&&(e=St.memoizedState)),e!==null)return e.dehydrated}return null}function Xb(St){if(Vb(St)!==St)throw Error(p$1(188))}function Yb(St){var e=St.alternate;if(!e){if(e=Vb(St),e===null)throw Error(p$1(188));return e!==St?null:St}for(var en=St,tn=e;;){var nn=en.return;if(nn===null)break;var sn=nn.alternate;if(sn===null){if(tn=nn.return,tn!==null){en=tn;continue}break}if(nn.child===sn.child){for(sn=nn.child;sn;){if(sn===en)return Xb(nn),St;if(sn===tn)return Xb(nn),e;sn=sn.sibling}throw Error(p$1(188))}if(en.return!==tn.return)en=nn,tn=sn;else{for(var on=!1,un=nn.child;un;){if(un===en){on=!0,en=nn,tn=sn;break}if(un===tn){on=!0,tn=nn,en=sn;break}un=un.sibling}if(!on){for(un=sn.child;un;){if(un===en){on=!0,en=sn,tn=nn;break}if(un===tn){on=!0,tn=sn,en=nn;break}un=un.sibling}if(!on)throw Error(p$1(189))}}if(en.alternate!==tn)throw Error(p$1(190))}if(en.tag!==3)throw Error(p$1(188));return en.stateNode.current===en?St:e}function Zb(St){return St=Yb(St),St!==null?$b(St):null}function $b(St){if(St.tag===5||St.tag===6)return St;for(St=St.child;St!==null;){var e=$b(St);if(e!==null)return e;St=St.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$1=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc$1=null;function mc(St){if(lc$1&&typeof lc$1.onCommitFiberRoot=="function")try{lc$1.onCommitFiberRoot(kc,St,void 0,(St.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(St){return St>>>=0,St===0?32:31-(pc(St)/qc|0)|0}var rc=64,sc=4194304;function tc(St){switch(St&-St){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return St&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return St&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return St}}function uc(St,e){var en=St.pendingLanes;if(en===0)return 0;var tn=0,nn=St.suspendedLanes,sn=St.pingedLanes,on=en&268435455;if(on!==0){var un=on&~nn;un!==0?tn=tc(un):(sn&=on,sn!==0&&(tn=tc(sn)))}else on=en&~nn,on!==0?tn=tc(on):sn!==0&&(tn=tc(sn));if(tn===0)return 0;if(e!==0&&e!==tn&&!(e&nn)&&(nn=tn&-tn,sn=e&-e,nn>=sn||nn===16&&(sn&4194240)!==0))return e;if(tn&4&&(tn|=en&16),e=St.entangledLanes,e!==0)for(St=St.entanglements,e&=tn;0<e;)en=31-oc(e),nn=1<<en,tn|=St[en],e&=~nn;return tn}function vc(St,e){switch(St){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(St,e){for(var en=St.suspendedLanes,tn=St.pingedLanes,nn=St.expirationTimes,sn=St.pendingLanes;0<sn;){var on=31-oc(sn),un=1<<on,dn=nn[on];dn===-1?(!(un&en)||un&tn)&&(nn[on]=vc(un,e)):dn<=e&&(St.expiredLanes|=un),sn&=~un}}function xc(St){return St=St.pendingLanes&-1073741825,St!==0?St:St&1073741824?1073741824:0}function yc(){var St=rc;return rc<<=1,!(rc&4194240)&&(rc=64),St}function zc(St){for(var e=[],en=0;31>en;en++)e.push(St);return e}function Ac(St,e,en){St.pendingLanes|=e,e!==536870912&&(St.suspendedLanes=0,St.pingedLanes=0),St=St.eventTimes,e=31-oc(e),St[e]=en}function Bc(St,e){var en=St.pendingLanes&~e;St.pendingLanes=e,St.suspendedLanes=0,St.pingedLanes=0,St.expiredLanes&=e,St.mutableReadLanes&=e,St.entangledLanes&=e,e=St.entanglements;var tn=St.eventTimes;for(St=St.expirationTimes;0<en;){var nn=31-oc(en),sn=1<<nn;e[nn]=0,tn[nn]=-1,St[nn]=-1,en&=~sn}}function Cc(St,e){var en=St.entangledLanes|=e;for(St=St.entanglements;en;){var tn=31-oc(en),nn=1<<tn;nn&e|St[tn]&e&&(St[tn]|=e),en&=~nn}}var C$1=0;function Dc(St){return St&=-St,1<St?4<St?St&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(St,e){switch(St){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(e.pointerId)}}function Tc(St,e,en,tn,nn,sn){return St===null||St.nativeEvent!==sn?(St={blockedOn:e,domEventName:en,eventSystemFlags:tn,nativeEvent:sn,targetContainers:[nn]},e!==null&&(e=Cb(e),e!==null&&Fc(e)),St):(St.eventSystemFlags|=tn,e=St.targetContainers,nn!==null&&e.indexOf(nn)===-1&&e.push(nn),St)}function Uc(St,e,en,tn,nn){switch(e){case"focusin":return Lc=Tc(Lc,St,e,en,tn,nn),!0;case"dragenter":return Mc=Tc(Mc,St,e,en,tn,nn),!0;case"mouseover":return Nc=Tc(Nc,St,e,en,tn,nn),!0;case"pointerover":var sn=nn.pointerId;return Oc.set(sn,Tc(Oc.get(sn)||null,St,e,en,tn,nn)),!0;case"gotpointercapture":return sn=nn.pointerId,Pc.set(sn,Tc(Pc.get(sn)||null,St,e,en,tn,nn)),!0}return!1}function Vc(St){var e=Wc(St.target);if(e!==null){var en=Vb(e);if(en!==null){if(e=en.tag,e===13){if(e=Wb(en),e!==null){St.blockedOn=e,Ic(St.priority,function(){Gc(en)});return}}else if(e===3&&en.stateNode.current.memoizedState.isDehydrated){St.blockedOn=en.tag===3?en.stateNode.containerInfo:null;return}}}St.blockedOn=null}function Xc(St){if(St.blockedOn!==null)return!1;for(var e=St.targetContainers;0<e.length;){var en=Yc(St.domEventName,St.eventSystemFlags,e[0],St.nativeEvent);if(en===null){en=St.nativeEvent;var tn=new en.constructor(en.type,en);wb=tn,en.target.dispatchEvent(tn),wb=null}else return e=Cb(en),e!==null&&Fc(e),St.blockedOn=en,!1;e.shift()}return!0}function Zc(St,e,en){Xc(St)&&en.delete(e)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(St,e){St.blockedOn===e&&(St.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(St){function e(nn){return ad(nn,St)}if(0<Kc.length){ad(Kc[0],St);for(var en=1;en<Kc.length;en++){var tn=Kc[en];tn.blockedOn===St&&(tn.blockedOn=null)}}for(Lc!==null&&ad(Lc,St),Mc!==null&&ad(Mc,St),Nc!==null&&ad(Nc,St),Oc.forEach(e),Pc.forEach(e),en=0;en<Qc.length;en++)tn=Qc[en],tn.blockedOn===St&&(tn.blockedOn=null);for(;0<Qc.length&&(en=Qc[0],en.blockedOn===null);)Vc(en),en.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(St,e,en,tn){var nn=C$1,sn=cd.transition;cd.transition=null;try{C$1=1,fd(St,e,en,tn)}finally{C$1=nn,cd.transition=sn}}function gd(St,e,en,tn){var nn=C$1,sn=cd.transition;cd.transition=null;try{C$1=4,fd(St,e,en,tn)}finally{C$1=nn,cd.transition=sn}}function fd(St,e,en,tn){if(dd){var nn=Yc(St,e,en,tn);if(nn===null)hd(St,e,tn,id,en),Sc(St,tn);else if(Uc(nn,St,e,en,tn))tn.stopPropagation();else if(Sc(St,tn),e&4&&-1<Rc.indexOf(St)){for(;nn!==null;){var sn=Cb(nn);if(sn!==null&&Ec(sn),sn=Yc(St,e,en,tn),sn===null&&hd(St,e,tn,id,en),sn===nn)break;nn=sn}nn!==null&&tn.stopPropagation()}else hd(St,e,tn,null,en)}}var id=null;function Yc(St,e,en,tn){if(id=null,St=xb(tn),St=Wc(St),St!==null)if(e=Vb(St),e===null)St=null;else if(en=e.tag,en===13){if(St=Wb(e),St!==null)return St;St=null}else if(en===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;St=null}else e!==St&&(St=null);return id=St,null}function jd(St){switch(St){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var St,e=ld,en=e.length,tn,nn="value"in kd?kd.value:kd.textContent,sn=nn.length;for(St=0;St<en&&e[St]===nn[St];St++);var on=en-St;for(tn=1;tn<=on&&e[en-tn]===nn[sn-tn];tn++);return md=nn.slice(St,1<tn?1-tn:void 0)}function od(St){var e=St.keyCode;return"charCode"in St?(St=St.charCode,St===0&&e===13&&(St=13)):St=e,St===10&&(St=13),32<=St||St===13?St:0}function pd(){return!0}function qd(){return!1}function rd(St){function e(en,tn,nn,sn,on){this._reactName=en,this._targetInst=nn,this.type=tn,this.nativeEvent=sn,this.target=on,this.currentTarget=null;for(var un in St)St.hasOwnProperty(un)&&(en=St[un],this[un]=en?en(sn):sn[un]);return this.isDefaultPrevented=(sn.defaultPrevented!=null?sn.defaultPrevented:sn.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$1(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var en=this.nativeEvent;en&&(en.preventDefault?en.preventDefault():typeof en.returnValue!="unknown"&&(en.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var en=this.nativeEvent;en&&(en.stopPropagation?en.stopPropagation():typeof en.cancelBubble!="unknown"&&(en.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),e}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(St){return St.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td$1=rd(sd),ud=A$1({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$1({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(St){return St.relatedTarget===void 0?St.fromElement===St.srcElement?St.toElement:St.fromElement:St.relatedTarget},movementX:function(St){return"movementX"in St?St.movementX:(St!==yd&&(yd&&St.type==="mousemove"?(wd=St.screenX-yd.screenX,xd=St.screenY-yd.screenY):xd=wd=0,yd=St),wd)},movementY:function(St){return"movementY"in St?St.movementY:xd}}),Bd=rd(Ad),Cd=A$1({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$1({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$1({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$1({},sd,{clipboardData:function(St){return"clipboardData"in St?St.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$1({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(St){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(St):(St=Od[St])?!!e[St]:!1}function zd(){return Pd}var Qd=A$1({},ud,{key:function(St){if(St.key){var e=Md[St.key]||St.key;if(e!=="Unidentified")return e}return St.type==="keypress"?(St=od(St),St===13?"Enter":String.fromCharCode(St)):St.type==="keydown"||St.type==="keyup"?Nd[St.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(St){return St.type==="keypress"?od(St):0},keyCode:function(St){return St.type==="keydown"||St.type==="keyup"?St.keyCode:0},which:function(St){return St.type==="keypress"?od(St):St.type==="keydown"||St.type==="keyup"?St.keyCode:0}}),Rd=rd(Qd),Sd=A$1({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$1({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$1({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$1({},Ad,{deltaX:function(St){return"deltaX"in St?St.deltaX:"wheelDeltaX"in St?-St.wheelDeltaX:0},deltaY:function(St){return"deltaY"in St?St.deltaY:"wheelDeltaY"in St?-St.wheelDeltaY:"wheelDelta"in St?-St.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$1=ia&&"CompositionEvent"in window,be$1=null;ia&&"documentMode"in document&&(be$1=document.documentMode);var ce$1=ia&&"TextEvent"in window&&!be$1,de$1=ia&&(!ae$1||be$1&&8<be$1&&11>=be$1),ee$1=" ",fe$1=!1;function ge$1(St,e){switch(St){case"keyup":return $d.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$1(St){return St=St.detail,typeof St=="object"&&"data"in St?St.data:null}var ie$1=!1;function je$1(St,e){switch(St){case"compositionend":return he$1(e);case"keypress":return e.which!==32?null:(fe$1=!0,ee$1);case"textInput":return St=e.data,St===ee$1&&fe$1?null:St;default:return null}}function ke$1(St,e){if(ie$1)return St==="compositionend"||!ae$1&&ge$1(St,e)?(St=nd(),md=ld=kd=null,ie$1=!1,St):null;switch(St){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return de$1&&e.locale!=="ko"?null:e.data;default:return null}}var le$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$1(St){var e=St&&St.nodeName&&St.nodeName.toLowerCase();return e==="input"?!!le$1[St.type]:e==="textarea"}function ne$1(St,e,en,tn){Eb(tn),e=oe$1(e,"onChange"),0<e.length&&(en=new td$1("onChange","change",null,en,tn),St.push({event:en,listeners:e}))}var pe$1=null,qe=null;function re$2(St){se$1(St,0)}function te$1(St){var e=ue$1(St);if(Wa(e))return St}function ve$1(St,e){if(St==="change")return e}var we$1=!1;if(ia){var xe$1;if(ia){var ye$1="oninput"in document;if(!ye$1){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye$1=typeof ze.oninput=="function"}xe$1=ye$1}else xe$1=!1;we$1=xe$1&&(!document.documentMode||9<document.documentMode)}function Ae$1(){pe$1&&(pe$1.detachEvent("onpropertychange",Be),qe=pe$1=null)}function Be(St){if(St.propertyName==="value"&&te$1(qe)){var e=[];ne$1(e,qe,St,xb(St)),Jb(re$2,e)}}function Ce(St,e,en){St==="focusin"?(Ae$1(),pe$1=e,qe=en,pe$1.attachEvent("onpropertychange",Be)):St==="focusout"&&Ae$1()}function De(St){if(St==="selectionchange"||St==="keyup"||St==="keydown")return te$1(qe)}function Ee(St,e){if(St==="click")return te$1(e)}function Fe$1(St,e){if(St==="input"||St==="change")return te$1(e)}function Ge(St,e){return St===e&&(St!==0||1/St===1/e)||St!==St&&e!==e}var He=typeof Object.is=="function"?Object.is:Ge;function Ie$1(St,e){if(He(St,e))return!0;if(typeof St!="object"||St===null||typeof e!="object"||e===null)return!1;var en=Object.keys(St),tn=Object.keys(e);if(en.length!==tn.length)return!1;for(tn=0;tn<en.length;tn++){var nn=en[tn];if(!ja.call(e,nn)||!He(St[nn],e[nn]))return!1}return!0}function Je(St){for(;St&&St.firstChild;)St=St.firstChild;return St}function Ke(St,e){var en=Je(St);St=0;for(var tn;en;){if(en.nodeType===3){if(tn=St+en.textContent.length,St<=e&&tn>=e)return{node:en,offset:e-St};St=tn}e:{for(;en;){if(en.nextSibling){en=en.nextSibling;break e}en=en.parentNode}en=void 0}en=Je(en)}}function Le$1(St,e){return St&&e?St===e?!0:St&&St.nodeType===3?!1:e&&e.nodeType===3?Le$1(St,e.parentNode):"contains"in St?St.contains(e):St.compareDocumentPosition?!!(St.compareDocumentPosition(e)&16):!1:!1}function Me(){for(var St=window,e=Xa();e instanceof St.HTMLIFrameElement;){try{var en=typeof e.contentWindow.location.href=="string"}catch{en=!1}if(en)St=e.contentWindow;else break;e=Xa(St.document)}return e}function Ne$1(St){var e=St&&St.nodeName&&St.nodeName.toLowerCase();return e&&(e==="input"&&(St.type==="text"||St.type==="search"||St.type==="tel"||St.type==="url"||St.type==="password")||e==="textarea"||St.contentEditable==="true")}function Oe(St){var e=Me(),en=St.focusedElem,tn=St.selectionRange;if(e!==en&&en&&en.ownerDocument&&Le$1(en.ownerDocument.documentElement,en)){if(tn!==null&&Ne$1(en)){if(e=tn.start,St=tn.end,St===void 0&&(St=e),"selectionStart"in en)en.selectionStart=e,en.selectionEnd=Math.min(St,en.value.length);else if(St=(e=en.ownerDocument||document)&&e.defaultView||window,St.getSelection){St=St.getSelection();var nn=en.textContent.length,sn=Math.min(tn.start,nn);tn=tn.end===void 0?sn:Math.min(tn.end,nn),!St.extend&&sn>tn&&(nn=tn,tn=sn,sn=nn),nn=Ke(en,sn);var on=Ke(en,tn);nn&&on&&(St.rangeCount!==1||St.anchorNode!==nn.node||St.anchorOffset!==nn.offset||St.focusNode!==on.node||St.focusOffset!==on.offset)&&(e=e.createRange(),e.setStart(nn.node,nn.offset),St.removeAllRanges(),sn>tn?(St.addRange(e),St.extend(on.node,on.offset)):(e.setEnd(on.node,on.offset),St.addRange(e)))}}for(e=[],St=en;St=St.parentNode;)St.nodeType===1&&e.push({element:St,left:St.scrollLeft,top:St.scrollTop});for(typeof en.focus=="function"&&en.focus(),en=0;en<e.length;en++)St=e[en],St.element.scrollLeft=St.left,St.element.scrollTop=St.top}}var Pe$1=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se$1=null,Te=!1;function Ue(St,e,en){var tn=en.window===en?en.document:en.nodeType===9?en:en.ownerDocument;Te||Qe==null||Qe!==Xa(tn)||(tn=Qe,"selectionStart"in tn&&Ne$1(tn)?tn={start:tn.selectionStart,end:tn.selectionEnd}:(tn=(tn.ownerDocument&&tn.ownerDocument.defaultView||window).getSelection(),tn={anchorNode:tn.anchorNode,anchorOffset:tn.anchorOffset,focusNode:tn.focusNode,focusOffset:tn.focusOffset}),Se$1&&Ie$1(Se$1,tn)||(Se$1=tn,tn=oe$1(Re,"onSelect"),0<tn.length&&(e=new td$1("onSelect","select",null,e,en),St.push({event:e,listeners:tn}),e.target=Qe)))}function Ve(St,e){var en={};return en[St.toLowerCase()]=e.toLowerCase(),en["Webkit"+St]="webkit"+e,en["Moz"+St]="moz"+e,en}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(St){if(Xe[St])return Xe[St];if(!We[St])return St;var e=We[St],en;for(en in e)if(e.hasOwnProperty(en)&&en in Ye)return Xe[St]=e[en];return St}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(St,e){df.set(St,e),fa(e,[St])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(St,e,en){var tn=St.type||"unknown-event";St.currentTarget=en,Ub(tn,e,void 0,St),St.currentTarget=null}function se$1(St,e){e=(e&4)!==0;for(var en=0;en<St.length;en++){var tn=St[en],nn=tn.event;tn=tn.listeners;e:{var sn=void 0;if(e)for(var on=tn.length-1;0<=on;on--){var un=tn[on],dn=un.instance,fn=un.currentTarget;if(un=un.listener,dn!==sn&&nn.isPropagationStopped())break e;nf(nn,un,fn),sn=dn}else for(on=0;on<tn.length;on++){if(un=tn[on],dn=un.instance,fn=un.currentTarget,un=un.listener,dn!==sn&&nn.isPropagationStopped())break e;nf(nn,un,fn),sn=dn}}}if(Qb)throw St=Rb,Qb=!1,Rb=null,St}function D$1(St,e){var en=e[of];en===void 0&&(en=e[of]=new Set);var tn=St+"__bubble";en.has(tn)||(pf(e,St,2,!1),en.add(tn))}function qf(St,e,en){var tn=0;e&&(tn|=4),pf(en,St,tn,e)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(St){if(!St[rf]){St[rf]=!0,da.forEach(function(en){en!=="selectionchange"&&(mf.has(en)||qf(en,!1,St),qf(en,!0,St))});var e=St.nodeType===9?St:St.ownerDocument;e===null||e[rf]||(e[rf]=!0,qf("selectionchange",!1,e))}}function pf(St,e,en,tn){switch(jd(e)){case 1:var nn=ed;break;case 4:nn=gd;break;default:nn=fd}en=nn.bind(null,e,en,St),nn=void 0,!Lb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(nn=!0),tn?nn!==void 0?St.addEventListener(e,en,{capture:!0,passive:nn}):St.addEventListener(e,en,!0):nn!==void 0?St.addEventListener(e,en,{passive:nn}):St.addEventListener(e,en,!1)}function hd(St,e,en,tn,nn){var sn=tn;if(!(e&1)&&!(e&2)&&tn!==null)e:for(;;){if(tn===null)return;var on=tn.tag;if(on===3||on===4){var un=tn.stateNode.containerInfo;if(un===nn||un.nodeType===8&&un.parentNode===nn)break;if(on===4)for(on=tn.return;on!==null;){var dn=on.tag;if((dn===3||dn===4)&&(dn=on.stateNode.containerInfo,dn===nn||dn.nodeType===8&&dn.parentNode===nn))return;on=on.return}for(;un!==null;){if(on=Wc(un),on===null)return;if(dn=on.tag,dn===5||dn===6){tn=sn=on;continue e}un=un.parentNode}}tn=tn.return}Jb(function(){var fn=sn,hn=xb(en),an=[];e:{var rn=df.get(St);if(rn!==void 0){var cn=td$1,pn=St;switch(St){case"keypress":if(od(en)===0)break e;case"keydown":case"keyup":cn=Rd;break;case"focusin":pn="focus",cn=Fd;break;case"focusout":pn="blur",cn=Fd;break;case"beforeblur":case"afterblur":cn=Fd;break;case"click":if(en.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":cn=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":cn=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":cn=Vd;break;case $e:case af:case bf:cn=Hd;break;case cf:cn=Xd;break;case"scroll":cn=vd;break;case"wheel":cn=Zd;break;case"copy":case"cut":case"paste":cn=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":cn=Td}var mn=(e&4)!==0,xn=!mn&&St==="scroll",gn=mn?rn!==null?rn+"Capture":null:rn;mn=[];for(var yn=fn,bn;yn!==null;){bn=yn;var wn=bn.stateNode;if(bn.tag===5&&wn!==null&&(bn=wn,gn!==null&&(wn=Kb(yn,gn),wn!=null&&mn.push(tf(yn,wn,bn)))),xn)break;yn=yn.return}0<mn.length&&(rn=new cn(rn,pn,null,en,hn),an.push({event:rn,listeners:mn}))}}if(!(e&7)){e:{if(rn=St==="mouseover"||St==="pointerover",cn=St==="mouseout"||St==="pointerout",rn&&en!==wb&&(pn=en.relatedTarget||en.fromElement)&&(Wc(pn)||pn[uf]))break e;if((cn||rn)&&(rn=hn.window===hn?hn:(rn=hn.ownerDocument)?rn.defaultView||rn.parentWindow:window,cn?(pn=en.relatedTarget||en.toElement,cn=fn,pn=pn?Wc(pn):null,pn!==null&&(xn=Vb(pn),pn!==xn||pn.tag!==5&&pn.tag!==6)&&(pn=null)):(cn=null,pn=fn),cn!==pn)){if(mn=Bd,wn="onMouseLeave",gn="onMouseEnter",yn="mouse",(St==="pointerout"||St==="pointerover")&&(mn=Td,wn="onPointerLeave",gn="onPointerEnter",yn="pointer"),xn=cn==null?rn:ue$1(cn),bn=pn==null?rn:ue$1(pn),rn=new mn(wn,yn+"leave",cn,en,hn),rn.target=xn,rn.relatedTarget=bn,wn=null,Wc(hn)===fn&&(mn=new mn(gn,yn+"enter",pn,en,hn),mn.target=bn,mn.relatedTarget=xn,wn=mn),xn=wn,cn&&pn)t:{for(mn=cn,gn=pn,yn=0,bn=mn;bn;bn=vf(bn))yn++;for(bn=0,wn=gn;wn;wn=vf(wn))bn++;for(;0<yn-bn;)mn=vf(mn),yn--;for(;0<bn-yn;)gn=vf(gn),bn--;for(;yn--;){if(mn===gn||gn!==null&&mn===gn.alternate)break t;mn=vf(mn),gn=vf(gn)}mn=null}else mn=null;cn!==null&&wf(an,rn,cn,mn,!1),pn!==null&&xn!==null&&wf(an,xn,pn,mn,!0)}}e:{if(rn=fn?ue$1(fn):window,cn=rn.nodeName&&rn.nodeName.toLowerCase(),cn==="select"||cn==="input"&&rn.type==="file")var _n=ve$1;else if(me$1(rn))if(we$1)_n=Fe$1;else{_n=De;var Tn=Ce}else(cn=rn.nodeName)&&cn.toLowerCase()==="input"&&(rn.type==="checkbox"||rn.type==="radio")&&(_n=Ee);if(_n&&(_n=_n(St,fn))){ne$1(an,_n,en,hn);break e}Tn&&Tn(St,rn,fn),St==="focusout"&&(Tn=rn._wrapperState)&&Tn.controlled&&rn.type==="number"&&cb(rn,"number",rn.value)}switch(Tn=fn?ue$1(fn):window,St){case"focusin":(me$1(Tn)||Tn.contentEditable==="true")&&(Qe=Tn,Re=fn,Se$1=null);break;case"focusout":Se$1=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(an,en,hn);break;case"selectionchange":if(Pe$1)break;case"keydown":case"keyup":Ue(an,en,hn)}var An;if(ae$1)e:{switch(St){case"compositionstart":var Pn="onCompositionStart";break e;case"compositionend":Pn="onCompositionEnd";break e;case"compositionupdate":Pn="onCompositionUpdate";break e}Pn=void 0}else ie$1?ge$1(St,en)&&(Pn="onCompositionEnd"):St==="keydown"&&en.keyCode===229&&(Pn="onCompositionStart");Pn&&(de$1&&en.locale!=="ko"&&(ie$1||Pn!=="onCompositionStart"?Pn==="onCompositionEnd"&&ie$1&&(An=nd()):(kd=hn,ld="value"in kd?kd.value:kd.textContent,ie$1=!0)),Tn=oe$1(fn,Pn),0<Tn.length&&(Pn=new Ld(Pn,St,null,en,hn),an.push({event:Pn,listeners:Tn}),An?Pn.data=An:(An=he$1(en),An!==null&&(Pn.data=An)))),(An=ce$1?je$1(St,en):ke$1(St,en))&&(fn=oe$1(fn,"onBeforeInput"),0<fn.length&&(hn=new Ld("onBeforeInput","beforeinput",null,en,hn),an.push({event:hn,listeners:fn}),hn.data=An))}se$1(an,e)})}function tf(St,e,en){return{instance:St,listener:e,currentTarget:en}}function oe$1(St,e){for(var en=e+"Capture",tn=[];St!==null;){var nn=St,sn=nn.stateNode;nn.tag===5&&sn!==null&&(nn=sn,sn=Kb(St,en),sn!=null&&tn.unshift(tf(St,sn,nn)),sn=Kb(St,e),sn!=null&&tn.push(tf(St,sn,nn))),St=St.return}return tn}function vf(St){if(St===null)return null;do St=St.return;while(St&&St.tag!==5);return St||null}function wf(St,e,en,tn,nn){for(var sn=e._reactName,on=[];en!==null&&en!==tn;){var un=en,dn=un.alternate,fn=un.stateNode;if(dn!==null&&dn===tn)break;un.tag===5&&fn!==null&&(un=fn,nn?(dn=Kb(en,sn),dn!=null&&on.unshift(tf(en,dn,un))):nn||(dn=Kb(en,sn),dn!=null&&on.push(tf(en,dn,un)))),en=en.return}on.length!==0&&St.push({event:e,listeners:on})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(St){return(typeof St=="string"?St:""+St).replace(xf,`
`).replace(yf,"")}function Af(St,e,en){if(e=zf(e),zf(St)!==e&&en)throw Error(p$1(425))}function Bf(){}var Cf=null,Df=null;function Ef(St,e){return St==="textarea"||St==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(St){return Hf.resolve(null).then(St).catch(If$1)}:Ff;function If$1(St){setTimeout(function(){throw St})}function Kf(St,e){var en=e,tn=0;do{var nn=en.nextSibling;if(St.removeChild(en),nn&&nn.nodeType===8)if(en=nn.data,en==="/$"){if(tn===0){St.removeChild(nn),bd(e);return}tn--}else en!=="$"&&en!=="$?"&&en!=="$!"||tn++;en=nn}while(en);bd(e)}function Lf(St){for(;St!=null;St=St.nextSibling){var e=St.nodeType;if(e===1||e===3)break;if(e===8){if(e=St.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return St}function Mf(St){St=St.previousSibling;for(var e=0;St;){if(St.nodeType===8){var en=St.data;if(en==="$"||en==="$!"||en==="$?"){if(e===0)return St;e--}else en==="/$"&&e++}St=St.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(St){var e=St[Of];if(e)return e;for(var en=St.parentNode;en;){if(e=en[uf]||en[Of]){if(en=e.alternate,e.child!==null||en!==null&&en.child!==null)for(St=Mf(St);St!==null;){if(en=St[Of])return en;St=Mf(St)}return e}St=en,en=St.parentNode}return null}function Cb(St){return St=St[Of]||St[uf],!St||St.tag!==5&&St.tag!==6&&St.tag!==13&&St.tag!==3?null:St}function ue$1(St){if(St.tag===5||St.tag===6)return St.stateNode;throw Error(p$1(33))}function Db(St){return St[Pf]||null}var Sf=[],Tf=-1;function Uf(St){return{current:St}}function E$1(St){0>Tf||(St.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$1(St,e){Tf++,Sf[Tf]=St.current,St.current=e}var Vf={},H$1=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(St,e){var en=St.type.contextTypes;if(!en)return Vf;var tn=St.stateNode;if(tn&&tn.__reactInternalMemoizedUnmaskedChildContext===e)return tn.__reactInternalMemoizedMaskedChildContext;var nn={},sn;for(sn in en)nn[sn]=e[sn];return tn&&(St=St.stateNode,St.__reactInternalMemoizedUnmaskedChildContext=e,St.__reactInternalMemoizedMaskedChildContext=nn),nn}function Zf(St){return St=St.childContextTypes,St!=null}function $f(){E$1(Wf),E$1(H$1)}function ag(St,e,en){if(H$1.current!==Vf)throw Error(p$1(168));G$1(H$1,e),G$1(Wf,en)}function bg(St,e,en){var tn=St.stateNode;if(e=e.childContextTypes,typeof tn.getChildContext!="function")return en;tn=tn.getChildContext();for(var nn in tn)if(!(nn in e))throw Error(p$1(108,Ra(St)||"Unknown",nn));return A$1({},en,tn)}function cg(St){return St=(St=St.stateNode)&&St.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$1.current,G$1(H$1,St),G$1(Wf,Wf.current),!0}function dg(St,e,en){var tn=St.stateNode;if(!tn)throw Error(p$1(169));en?(St=bg(St,e,Xf),tn.__reactInternalMemoizedMergedChildContext=St,E$1(Wf),E$1(H$1),G$1(H$1,St)):E$1(Wf),G$1(Wf,en)}var eg=null,fg=!1,gg=!1;function hg(St){eg===null?eg=[St]:eg.push(St)}function ig(St){fg=!0,hg(St)}function jg(){if(!gg&&eg!==null){gg=!0;var St=0,e=C$1;try{var en=eg;for(C$1=1;St<en.length;St++){var tn=en[St];do tn=tn(!0);while(tn!==null)}eg=null,fg=!1}catch(nn){throw eg!==null&&(eg=eg.slice(St+1)),ac(fc,jg),nn}finally{C$1=e,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(St,e){kg[lg++]=ng,kg[lg++]=mg,mg=St,ng=e}function ug(St,e,en){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=St;var tn=rg;St=sg;var nn=32-oc(tn)-1;tn&=~(1<<nn),en+=1;var sn=32-oc(e)+nn;if(30<sn){var on=nn-nn%5;sn=(tn&(1<<on)-1).toString(32),tn>>=on,nn-=on,rg=1<<32-oc(e)+nn|en<<nn|tn,sg=sn+St}else rg=1<<sn|en<<nn|tn,sg=St}function vg(St){St.return!==null&&(tg(St,1),ug(St,1,0))}function wg(St){for(;St===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;St===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$1=!1,zg=null;function Ag(St,e){var en=Bg(5,null,null,0);en.elementType="DELETED",en.stateNode=e,en.return=St,e=St.deletions,e===null?(St.deletions=[en],St.flags|=16):e.push(en)}function Cg(St,e){switch(St.tag){case 5:var en=St.type;return e=e.nodeType!==1||en.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(St.stateNode=e,xg=St,yg=Lf(e.firstChild),!0):!1;case 6:return e=St.pendingProps===""||e.nodeType!==3?null:e,e!==null?(St.stateNode=e,xg=St,yg=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(en=qg!==null?{id:rg,overflow:sg}:null,St.memoizedState={dehydrated:e,treeContext:en,retryLane:1073741824},en=Bg(18,null,null,0),en.stateNode=e,en.return=St,St.child=en,xg=St,yg=null,!0):!1;default:return!1}}function Dg(St){return(St.mode&1)!==0&&(St.flags&128)===0}function Eg(St){if(I$1){var e=yg;if(e){var en=e;if(!Cg(St,e)){if(Dg(St))throw Error(p$1(418));e=Lf(en.nextSibling);var tn=xg;e&&Cg(St,e)?Ag(tn,en):(St.flags=St.flags&-4097|2,I$1=!1,xg=St)}}else{if(Dg(St))throw Error(p$1(418));St.flags=St.flags&-4097|2,I$1=!1,xg=St}}}function Fg(St){for(St=St.return;St!==null&&St.tag!==5&&St.tag!==3&&St.tag!==13;)St=St.return;xg=St}function Gg(St){if(St!==xg)return!1;if(!I$1)return Fg(St),I$1=!0,!1;var e;if((e=St.tag!==3)&&!(e=St.tag!==5)&&(e=St.type,e=e!=="head"&&e!=="body"&&!Ef(St.type,St.memoizedProps)),e&&(e=yg)){if(Dg(St))throw Hg(),Error(p$1(418));for(;e;)Ag(St,e),e=Lf(e.nextSibling)}if(Fg(St),St.tag===13){if(St=St.memoizedState,St=St!==null?St.dehydrated:null,!St)throw Error(p$1(317));e:{for(St=St.nextSibling,e=0;St;){if(St.nodeType===8){var en=St.data;if(en==="/$"){if(e===0){yg=Lf(St.nextSibling);break e}e--}else en!=="$"&&en!=="$!"&&en!=="$?"||e++}St=St.nextSibling}yg=null}}else yg=xg?Lf(St.stateNode.nextSibling):null;return!0}function Hg(){for(var St=yg;St;)St=Lf(St.nextSibling)}function Ig(){yg=xg=null,I$1=!1}function Jg(St){zg===null?zg=[St]:zg.push(St)}var Kg=ua.ReactCurrentBatchConfig;function Lg(St,e,en){if(St=en.ref,St!==null&&typeof St!="function"&&typeof St!="object"){if(en._owner){if(en=en._owner,en){if(en.tag!==1)throw Error(p$1(309));var tn=en.stateNode}if(!tn)throw Error(p$1(147,St));var nn=tn,sn=""+St;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===sn?e.ref:(e=function(on){var un=nn.refs;on===null?delete un[sn]:un[sn]=on},e._stringRef=sn,e)}if(typeof St!="string")throw Error(p$1(284));if(!en._owner)throw Error(p$1(290,St))}return St}function Mg(St,e){throw St=Object.prototype.toString.call(e),Error(p$1(31,St==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":St))}function Ng(St){var e=St._init;return e(St._payload)}function Og(St){function e(gn,yn){if(St){var bn=gn.deletions;bn===null?(gn.deletions=[yn],gn.flags|=16):bn.push(yn)}}function en(gn,yn){if(!St)return null;for(;yn!==null;)e(gn,yn),yn=yn.sibling;return null}function tn(gn,yn){for(gn=new Map;yn!==null;)yn.key!==null?gn.set(yn.key,yn):gn.set(yn.index,yn),yn=yn.sibling;return gn}function nn(gn,yn){return gn=Pg(gn,yn),gn.index=0,gn.sibling=null,gn}function sn(gn,yn,bn){return gn.index=bn,St?(bn=gn.alternate,bn!==null?(bn=bn.index,bn<yn?(gn.flags|=2,yn):bn):(gn.flags|=2,yn)):(gn.flags|=1048576,yn)}function on(gn){return St&&gn.alternate===null&&(gn.flags|=2),gn}function un(gn,yn,bn,wn){return yn===null||yn.tag!==6?(yn=Qg(bn,gn.mode,wn),yn.return=gn,yn):(yn=nn(yn,bn),yn.return=gn,yn)}function dn(gn,yn,bn,wn){var _n=bn.type;return _n===ya?hn(gn,yn,bn.props.children,wn,bn.key):yn!==null&&(yn.elementType===_n||typeof _n=="object"&&_n!==null&&_n.$$typeof===Ha&&Ng(_n)===yn.type)?(wn=nn(yn,bn.props),wn.ref=Lg(gn,yn,bn),wn.return=gn,wn):(wn=Rg(bn.type,bn.key,bn.props,null,gn.mode,wn),wn.ref=Lg(gn,yn,bn),wn.return=gn,wn)}function fn(gn,yn,bn,wn){return yn===null||yn.tag!==4||yn.stateNode.containerInfo!==bn.containerInfo||yn.stateNode.implementation!==bn.implementation?(yn=Sg(bn,gn.mode,wn),yn.return=gn,yn):(yn=nn(yn,bn.children||[]),yn.return=gn,yn)}function hn(gn,yn,bn,wn,_n){return yn===null||yn.tag!==7?(yn=Tg(bn,gn.mode,wn,_n),yn.return=gn,yn):(yn=nn(yn,bn),yn.return=gn,yn)}function an(gn,yn,bn){if(typeof yn=="string"&&yn!==""||typeof yn=="number")return yn=Qg(""+yn,gn.mode,bn),yn.return=gn,yn;if(typeof yn=="object"&&yn!==null){switch(yn.$$typeof){case va:return bn=Rg(yn.type,yn.key,yn.props,null,gn.mode,bn),bn.ref=Lg(gn,null,yn),bn.return=gn,bn;case wa:return yn=Sg(yn,gn.mode,bn),yn.return=gn,yn;case Ha:var wn=yn._init;return an(gn,wn(yn._payload),bn)}if(eb(yn)||Ka(yn))return yn=Tg(yn,gn.mode,bn,null),yn.return=gn,yn;Mg(gn,yn)}return null}function rn(gn,yn,bn,wn){var _n=yn!==null?yn.key:null;if(typeof bn=="string"&&bn!==""||typeof bn=="number")return _n!==null?null:un(gn,yn,""+bn,wn);if(typeof bn=="object"&&bn!==null){switch(bn.$$typeof){case va:return bn.key===_n?dn(gn,yn,bn,wn):null;case wa:return bn.key===_n?fn(gn,yn,bn,wn):null;case Ha:return _n=bn._init,rn(gn,yn,_n(bn._payload),wn)}if(eb(bn)||Ka(bn))return _n!==null?null:hn(gn,yn,bn,wn,null);Mg(gn,bn)}return null}function cn(gn,yn,bn,wn,_n){if(typeof wn=="string"&&wn!==""||typeof wn=="number")return gn=gn.get(bn)||null,un(yn,gn,""+wn,_n);if(typeof wn=="object"&&wn!==null){switch(wn.$$typeof){case va:return gn=gn.get(wn.key===null?bn:wn.key)||null,dn(yn,gn,wn,_n);case wa:return gn=gn.get(wn.key===null?bn:wn.key)||null,fn(yn,gn,wn,_n);case Ha:var Tn=wn._init;return cn(gn,yn,bn,Tn(wn._payload),_n)}if(eb(wn)||Ka(wn))return gn=gn.get(bn)||null,hn(yn,gn,wn,_n,null);Mg(yn,wn)}return null}function pn(gn,yn,bn,wn){for(var _n=null,Tn=null,An=yn,Pn=yn=0,Sn=null;An!==null&&Pn<bn.length;Pn++){An.index>Pn?(Sn=An,An=null):Sn=An.sibling;var Cn=rn(gn,An,bn[Pn],wn);if(Cn===null){An===null&&(An=Sn);break}St&&An&&Cn.alternate===null&&e(gn,An),yn=sn(Cn,yn,Pn),Tn===null?_n=Cn:Tn.sibling=Cn,Tn=Cn,An=Sn}if(Pn===bn.length)return en(gn,An),I$1&&tg(gn,Pn),_n;if(An===null){for(;Pn<bn.length;Pn++)An=an(gn,bn[Pn],wn),An!==null&&(yn=sn(An,yn,Pn),Tn===null?_n=An:Tn.sibling=An,Tn=An);return I$1&&tg(gn,Pn),_n}for(An=tn(gn,An);Pn<bn.length;Pn++)Sn=cn(An,gn,Pn,bn[Pn],wn),Sn!==null&&(St&&Sn.alternate!==null&&An.delete(Sn.key===null?Pn:Sn.key),yn=sn(Sn,yn,Pn),Tn===null?_n=Sn:Tn.sibling=Sn,Tn=Sn);return St&&An.forEach(function(Nn){return e(gn,Nn)}),I$1&&tg(gn,Pn),_n}function mn(gn,yn,bn,wn){var _n=Ka(bn);if(typeof _n!="function")throw Error(p$1(150));if(bn=_n.call(bn),bn==null)throw Error(p$1(151));for(var Tn=_n=null,An=yn,Pn=yn=0,Sn=null,Cn=bn.next();An!==null&&!Cn.done;Pn++,Cn=bn.next()){An.index>Pn?(Sn=An,An=null):Sn=An.sibling;var Nn=rn(gn,An,Cn.value,wn);if(Nn===null){An===null&&(An=Sn);break}St&&An&&Nn.alternate===null&&e(gn,An),yn=sn(Nn,yn,Pn),Tn===null?_n=Nn:Tn.sibling=Nn,Tn=Nn,An=Sn}if(Cn.done)return en(gn,An),I$1&&tg(gn,Pn),_n;if(An===null){for(;!Cn.done;Pn++,Cn=bn.next())Cn=an(gn,Cn.value,wn),Cn!==null&&(yn=sn(Cn,yn,Pn),Tn===null?_n=Cn:Tn.sibling=Cn,Tn=Cn);return I$1&&tg(gn,Pn),_n}for(An=tn(gn,An);!Cn.done;Pn++,Cn=bn.next())Cn=cn(An,gn,Pn,Cn.value,wn),Cn!==null&&(St&&Cn.alternate!==null&&An.delete(Cn.key===null?Pn:Cn.key),yn=sn(Cn,yn,Pn),Tn===null?_n=Cn:Tn.sibling=Cn,Tn=Cn);return St&&An.forEach(function(Mn){return e(gn,Mn)}),I$1&&tg(gn,Pn),_n}function xn(gn,yn,bn,wn){if(typeof bn=="object"&&bn!==null&&bn.type===ya&&bn.key===null&&(bn=bn.props.children),typeof bn=="object"&&bn!==null){switch(bn.$$typeof){case va:e:{for(var _n=bn.key,Tn=yn;Tn!==null;){if(Tn.key===_n){if(_n=bn.type,_n===ya){if(Tn.tag===7){en(gn,Tn.sibling),yn=nn(Tn,bn.props.children),yn.return=gn,gn=yn;break e}}else if(Tn.elementType===_n||typeof _n=="object"&&_n!==null&&_n.$$typeof===Ha&&Ng(_n)===Tn.type){en(gn,Tn.sibling),yn=nn(Tn,bn.props),yn.ref=Lg(gn,Tn,bn),yn.return=gn,gn=yn;break e}en(gn,Tn);break}else e(gn,Tn);Tn=Tn.sibling}bn.type===ya?(yn=Tg(bn.props.children,gn.mode,wn,bn.key),yn.return=gn,gn=yn):(wn=Rg(bn.type,bn.key,bn.props,null,gn.mode,wn),wn.ref=Lg(gn,yn,bn),wn.return=gn,gn=wn)}return on(gn);case wa:e:{for(Tn=bn.key;yn!==null;){if(yn.key===Tn)if(yn.tag===4&&yn.stateNode.containerInfo===bn.containerInfo&&yn.stateNode.implementation===bn.implementation){en(gn,yn.sibling),yn=nn(yn,bn.children||[]),yn.return=gn,gn=yn;break e}else{en(gn,yn);break}else e(gn,yn);yn=yn.sibling}yn=Sg(bn,gn.mode,wn),yn.return=gn,gn=yn}return on(gn);case Ha:return Tn=bn._init,xn(gn,yn,Tn(bn._payload),wn)}if(eb(bn))return pn(gn,yn,bn,wn);if(Ka(bn))return mn(gn,yn,bn,wn);Mg(gn,bn)}return typeof bn=="string"&&bn!==""||typeof bn=="number"?(bn=""+bn,yn!==null&&yn.tag===6?(en(gn,yn.sibling),yn=nn(yn,bn),yn.return=gn,gn=yn):(en(gn,yn),yn=Qg(bn,gn.mode,wn),yn.return=gn,gn=yn),on(gn)):en(gn,yn)}return xn}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(St){var e=Wg.current;E$1(Wg),St._currentValue=e}function bh(St,e,en){for(;St!==null;){var tn=St.alternate;if((St.childLanes&e)!==e?(St.childLanes|=e,tn!==null&&(tn.childLanes|=e)):tn!==null&&(tn.childLanes&e)!==e&&(tn.childLanes|=e),St===en)break;St=St.return}}function ch(St,e){Xg=St,Zg=Yg=null,St=St.dependencies,St!==null&&St.firstContext!==null&&(St.lanes&e&&(dh=!0),St.firstContext=null)}function eh(St){var e=St._currentValue;if(Zg!==St)if(St={context:St,memoizedValue:e,next:null},Yg===null){if(Xg===null)throw Error(p$1(308));Yg=St,Xg.dependencies={lanes:0,firstContext:St}}else Yg=Yg.next=St;return e}var fh=null;function gh(St){fh===null?fh=[St]:fh.push(St)}function hh(St,e,en,tn){var nn=e.interleaved;return nn===null?(en.next=en,gh(e)):(en.next=nn.next,nn.next=en),e.interleaved=en,ih(St,tn)}function ih(St,e){St.lanes|=e;var en=St.alternate;for(en!==null&&(en.lanes|=e),en=St,St=St.return;St!==null;)St.childLanes|=e,en=St.alternate,en!==null&&(en.childLanes|=e),en=St,St=St.return;return en.tag===3?en.stateNode:null}var jh=!1;function kh(St){St.updateQueue={baseState:St.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(St,e){St=St.updateQueue,e.updateQueue===St&&(e.updateQueue={baseState:St.baseState,firstBaseUpdate:St.firstBaseUpdate,lastBaseUpdate:St.lastBaseUpdate,shared:St.shared,effects:St.effects})}function mh(St,e){return{eventTime:St,lane:e,tag:0,payload:null,callback:null,next:null}}function nh(St,e,en){var tn=St.updateQueue;if(tn===null)return null;if(tn=tn.shared,K$1&2){var nn=tn.pending;return nn===null?e.next=e:(e.next=nn.next,nn.next=e),tn.pending=e,ih(St,en)}return nn=tn.interleaved,nn===null?(e.next=e,gh(tn)):(e.next=nn.next,nn.next=e),tn.interleaved=e,ih(St,en)}function oh(St,e,en){if(e=e.updateQueue,e!==null&&(e=e.shared,(en&4194240)!==0)){var tn=e.lanes;tn&=St.pendingLanes,en|=tn,e.lanes=en,Cc(St,en)}}function ph(St,e){var en=St.updateQueue,tn=St.alternate;if(tn!==null&&(tn=tn.updateQueue,en===tn)){var nn=null,sn=null;if(en=en.firstBaseUpdate,en!==null){do{var on={eventTime:en.eventTime,lane:en.lane,tag:en.tag,payload:en.payload,callback:en.callback,next:null};sn===null?nn=sn=on:sn=sn.next=on,en=en.next}while(en!==null);sn===null?nn=sn=e:sn=sn.next=e}else nn=sn=e;en={baseState:tn.baseState,firstBaseUpdate:nn,lastBaseUpdate:sn,shared:tn.shared,effects:tn.effects},St.updateQueue=en;return}St=en.lastBaseUpdate,St===null?en.firstBaseUpdate=e:St.next=e,en.lastBaseUpdate=e}function qh(St,e,en,tn){var nn=St.updateQueue;jh=!1;var sn=nn.firstBaseUpdate,on=nn.lastBaseUpdate,un=nn.shared.pending;if(un!==null){nn.shared.pending=null;var dn=un,fn=dn.next;dn.next=null,on===null?sn=fn:on.next=fn,on=dn;var hn=St.alternate;hn!==null&&(hn=hn.updateQueue,un=hn.lastBaseUpdate,un!==on&&(un===null?hn.firstBaseUpdate=fn:un.next=fn,hn.lastBaseUpdate=dn))}if(sn!==null){var an=nn.baseState;on=0,hn=fn=dn=null,un=sn;do{var rn=un.lane,cn=un.eventTime;if((tn&rn)===rn){hn!==null&&(hn=hn.next={eventTime:cn,lane:0,tag:un.tag,payload:un.payload,callback:un.callback,next:null});e:{var pn=St,mn=un;switch(rn=e,cn=en,mn.tag){case 1:if(pn=mn.payload,typeof pn=="function"){an=pn.call(cn,an,rn);break e}an=pn;break e;case 3:pn.flags=pn.flags&-65537|128;case 0:if(pn=mn.payload,rn=typeof pn=="function"?pn.call(cn,an,rn):pn,rn==null)break e;an=A$1({},an,rn);break e;case 2:jh=!0}}un.callback!==null&&un.lane!==0&&(St.flags|=64,rn=nn.effects,rn===null?nn.effects=[un]:rn.push(un))}else cn={eventTime:cn,lane:rn,tag:un.tag,payload:un.payload,callback:un.callback,next:null},hn===null?(fn=hn=cn,dn=an):hn=hn.next=cn,on|=rn;if(un=un.next,un===null){if(un=nn.shared.pending,un===null)break;rn=un,un=rn.next,rn.next=null,nn.lastBaseUpdate=rn,nn.shared.pending=null}}while(!0);if(hn===null&&(dn=an),nn.baseState=dn,nn.firstBaseUpdate=fn,nn.lastBaseUpdate=hn,e=nn.shared.interleaved,e!==null){nn=e;do on|=nn.lane,nn=nn.next;while(nn!==e)}else sn===null&&(nn.shared.lanes=0);rh|=on,St.lanes=on,St.memoizedState=an}}function sh(St,e,en){if(St=e.effects,e.effects=null,St!==null)for(e=0;e<St.length;e++){var tn=St[e],nn=tn.callback;if(nn!==null){if(tn.callback=null,tn=en,typeof nn!="function")throw Error(p$1(191,nn));nn.call(tn)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(St){if(St===th)throw Error(p$1(174));return St}function yh(St,e){switch(G$1(wh,e),G$1(vh,St),G$1(uh,th),St=e.nodeType,St){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lb(null,"");break;default:St=St===8?e.parentNode:e,e=St.namespaceURI||null,St=St.tagName,e=lb(e,St)}E$1(uh),G$1(uh,e)}function zh(){E$1(uh),E$1(vh),E$1(wh)}function Ah(St){xh(wh.current);var e=xh(uh.current),en=lb(e,St.type);e!==en&&(G$1(vh,St),G$1(uh,en))}function Bh(St){vh.current===St&&(E$1(uh),E$1(vh))}var L$1=Uf(0);function Ch(St){for(var e=St;e!==null;){if(e.tag===13){var en=e.memoizedState;if(en!==null&&(en=en.dehydrated,en===null||en.data==="$?"||en.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===St)break;for(;e.sibling===null;){if(e.return===null||e.return===St)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Dh=[];function Eh(){for(var St=0;St<Dh.length;St++)Dh[St]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M$1=null,N$1=null,O$1=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P$1(){throw Error(p$1(321))}function Mh(St,e){if(e===null)return!1;for(var en=0;en<e.length&&en<St.length;en++)if(!He(St[en],e[en]))return!1;return!0}function Nh(St,e,en,tn,nn,sn){if(Hh=sn,M$1=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fh.current=St===null||St.memoizedState===null?Oh:Ph,St=en(tn,nn),Jh){sn=0;do{if(Jh=!1,Kh=0,25<=sn)throw Error(p$1(301));sn+=1,O$1=N$1=null,e.updateQueue=null,Fh.current=Qh,St=en(tn,nn)}while(Jh)}if(Fh.current=Rh,e=N$1!==null&&N$1.next!==null,Hh=0,O$1=N$1=M$1=null,Ih=!1,e)throw Error(p$1(300));return St}function Sh(){var St=Kh!==0;return Kh=0,St}function Th(){var St={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O$1===null?M$1.memoizedState=O$1=St:O$1=O$1.next=St,O$1}function Uh(){if(N$1===null){var St=M$1.alternate;St=St!==null?St.memoizedState:null}else St=N$1.next;var e=O$1===null?M$1.memoizedState:O$1.next;if(e!==null)O$1=e,N$1=St;else{if(St===null)throw Error(p$1(310));N$1=St,St={memoizedState:N$1.memoizedState,baseState:N$1.baseState,baseQueue:N$1.baseQueue,queue:N$1.queue,next:null},O$1===null?M$1.memoizedState=O$1=St:O$1=O$1.next=St}return O$1}function Vh(St,e){return typeof e=="function"?e(St):e}function Wh(St){var e=Uh(),en=e.queue;if(en===null)throw Error(p$1(311));en.lastRenderedReducer=St;var tn=N$1,nn=tn.baseQueue,sn=en.pending;if(sn!==null){if(nn!==null){var on=nn.next;nn.next=sn.next,sn.next=on}tn.baseQueue=nn=sn,en.pending=null}if(nn!==null){sn=nn.next,tn=tn.baseState;var un=on=null,dn=null,fn=sn;do{var hn=fn.lane;if((Hh&hn)===hn)dn!==null&&(dn=dn.next={lane:0,action:fn.action,hasEagerState:fn.hasEagerState,eagerState:fn.eagerState,next:null}),tn=fn.hasEagerState?fn.eagerState:St(tn,fn.action);else{var an={lane:hn,action:fn.action,hasEagerState:fn.hasEagerState,eagerState:fn.eagerState,next:null};dn===null?(un=dn=an,on=tn):dn=dn.next=an,M$1.lanes|=hn,rh|=hn}fn=fn.next}while(fn!==null&&fn!==sn);dn===null?on=tn:dn.next=un,He(tn,e.memoizedState)||(dh=!0),e.memoizedState=tn,e.baseState=on,e.baseQueue=dn,en.lastRenderedState=tn}if(St=en.interleaved,St!==null){nn=St;do sn=nn.lane,M$1.lanes|=sn,rh|=sn,nn=nn.next;while(nn!==St)}else nn===null&&(en.lanes=0);return[e.memoizedState,en.dispatch]}function Xh(St){var e=Uh(),en=e.queue;if(en===null)throw Error(p$1(311));en.lastRenderedReducer=St;var tn=en.dispatch,nn=en.pending,sn=e.memoizedState;if(nn!==null){en.pending=null;var on=nn=nn.next;do sn=St(sn,on.action),on=on.next;while(on!==nn);He(sn,e.memoizedState)||(dh=!0),e.memoizedState=sn,e.baseQueue===null&&(e.baseState=sn),en.lastRenderedState=sn}return[sn,tn]}function Yh(){}function Zh(St,e){var en=M$1,tn=Uh(),nn=e(),sn=!He(tn.memoizedState,nn);if(sn&&(tn.memoizedState=nn,dh=!0),tn=tn.queue,$h(ai.bind(null,en,tn,St),[St]),tn.getSnapshot!==e||sn||O$1!==null&&O$1.memoizedState.tag&1){if(en.flags|=2048,bi(9,ci.bind(null,en,tn,nn,e),void 0,null),Q$1===null)throw Error(p$1(349));Hh&30||di(en,e,nn)}return nn}function di(St,e,en){St.flags|=16384,St={getSnapshot:e,value:en},e=M$1.updateQueue,e===null?(e={lastEffect:null,stores:null},M$1.updateQueue=e,e.stores=[St]):(en=e.stores,en===null?e.stores=[St]:en.push(St))}function ci(St,e,en,tn){e.value=en,e.getSnapshot=tn,ei(e)&&fi(St)}function ai(St,e,en){return en(function(){ei(e)&&fi(St)})}function ei(St){var e=St.getSnapshot;St=St.value;try{var en=e();return!He(St,en)}catch{return!0}}function fi(St){var e=ih(St,1);e!==null&&gi(e,St,1,-1)}function hi(St){var e=Th();return typeof St=="function"&&(St=St()),e.memoizedState=e.baseState=St,St={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:St},e.queue=St,St=St.dispatch=ii.bind(null,M$1,St),[e.memoizedState,St]}function bi(St,e,en,tn){return St={tag:St,create:e,destroy:en,deps:tn,next:null},e=M$1.updateQueue,e===null?(e={lastEffect:null,stores:null},M$1.updateQueue=e,e.lastEffect=St.next=St):(en=e.lastEffect,en===null?e.lastEffect=St.next=St:(tn=en.next,en.next=St,St.next=tn,e.lastEffect=St)),St}function ji(){return Uh().memoizedState}function ki(St,e,en,tn){var nn=Th();M$1.flags|=St,nn.memoizedState=bi(1|e,en,void 0,tn===void 0?null:tn)}function li(St,e,en,tn){var nn=Uh();tn=tn===void 0?null:tn;var sn=void 0;if(N$1!==null){var on=N$1.memoizedState;if(sn=on.destroy,tn!==null&&Mh(tn,on.deps)){nn.memoizedState=bi(e,en,sn,tn);return}}M$1.flags|=St,nn.memoizedState=bi(1|e,en,sn,tn)}function mi(St,e){return ki(8390656,8,St,e)}function $h(St,e){return li(2048,8,St,e)}function ni(St,e){return li(4,2,St,e)}function oi(St,e){return li(4,4,St,e)}function pi(St,e){if(typeof e=="function")return St=St(),e(St),function(){e(null)};if(e!=null)return St=St(),e.current=St,function(){e.current=null}}function qi(St,e,en){return en=en!=null?en.concat([St]):null,li(4,4,pi.bind(null,e,St),en)}function ri(){}function si(St,e){var en=Uh();e=e===void 0?null:e;var tn=en.memoizedState;return tn!==null&&e!==null&&Mh(e,tn[1])?tn[0]:(en.memoizedState=[St,e],St)}function ti(St,e){var en=Uh();e=e===void 0?null:e;var tn=en.memoizedState;return tn!==null&&e!==null&&Mh(e,tn[1])?tn[0]:(St=St(),en.memoizedState=[St,e],St)}function ui(St,e,en){return Hh&21?(He(en,e)||(en=yc(),M$1.lanes|=en,rh|=en,St.baseState=!0),e):(St.baseState&&(St.baseState=!1,dh=!0),St.memoizedState=en)}function vi(St,e){var en=C$1;C$1=en!==0&&4>en?en:4,St(!0);var tn=Gh.transition;Gh.transition={};try{St(!1),e()}finally{C$1=en,Gh.transition=tn}}function wi(){return Uh().memoizedState}function xi(St,e,en){var tn=yi(St);if(en={lane:tn,action:en,hasEagerState:!1,eagerState:null,next:null},zi(St))Ai(e,en);else if(en=hh(St,e,en,tn),en!==null){var nn=R$1();gi(en,St,tn,nn),Bi(en,e,tn)}}function ii(St,e,en){var tn=yi(St),nn={lane:tn,action:en,hasEagerState:!1,eagerState:null,next:null};if(zi(St))Ai(e,nn);else{var sn=St.alternate;if(St.lanes===0&&(sn===null||sn.lanes===0)&&(sn=e.lastRenderedReducer,sn!==null))try{var on=e.lastRenderedState,un=sn(on,en);if(nn.hasEagerState=!0,nn.eagerState=un,He(un,on)){var dn=e.interleaved;dn===null?(nn.next=nn,gh(e)):(nn.next=dn.next,dn.next=nn),e.interleaved=nn;return}}catch{}finally{}en=hh(St,e,nn,tn),en!==null&&(nn=R$1(),gi(en,St,tn,nn),Bi(en,e,tn))}}function zi(St){var e=St.alternate;return St===M$1||e!==null&&e===M$1}function Ai(St,e){Jh=Ih=!0;var en=St.pending;en===null?e.next=e:(e.next=en.next,en.next=e),St.pending=e}function Bi(St,e,en){if(en&4194240){var tn=e.lanes;tn&=St.pendingLanes,en|=tn,e.lanes=en,Cc(St,en)}}var Rh={readContext:eh,useCallback:P$1,useContext:P$1,useEffect:P$1,useImperativeHandle:P$1,useInsertionEffect:P$1,useLayoutEffect:P$1,useMemo:P$1,useReducer:P$1,useRef:P$1,useState:P$1,useDebugValue:P$1,useDeferredValue:P$1,useTransition:P$1,useMutableSource:P$1,useSyncExternalStore:P$1,useId:P$1,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(St,e){return Th().memoizedState=[St,e===void 0?null:e],St},useContext:eh,useEffect:mi,useImperativeHandle:function(St,e,en){return en=en!=null?en.concat([St]):null,ki(4194308,4,pi.bind(null,e,St),en)},useLayoutEffect:function(St,e){return ki(4194308,4,St,e)},useInsertionEffect:function(St,e){return ki(4,2,St,e)},useMemo:function(St,e){var en=Th();return e=e===void 0?null:e,St=St(),en.memoizedState=[St,e],St},useReducer:function(St,e,en){var tn=Th();return e=en!==void 0?en(e):e,tn.memoizedState=tn.baseState=e,St={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:St,lastRenderedState:e},tn.queue=St,St=St.dispatch=xi.bind(null,M$1,St),[tn.memoizedState,St]},useRef:function(St){var e=Th();return St={current:St},e.memoizedState=St},useState:hi,useDebugValue:ri,useDeferredValue:function(St){return Th().memoizedState=St},useTransition:function(){var St=hi(!1),e=St[0];return St=vi.bind(null,St[1]),Th().memoizedState=St,[e,St]},useMutableSource:function(){},useSyncExternalStore:function(St,e,en){var tn=M$1,nn=Th();if(I$1){if(en===void 0)throw Error(p$1(407));en=en()}else{if(en=e(),Q$1===null)throw Error(p$1(349));Hh&30||di(tn,e,en)}nn.memoizedState=en;var sn={value:en,getSnapshot:e};return nn.queue=sn,mi(ai.bind(null,tn,sn,St),[St]),tn.flags|=2048,bi(9,ci.bind(null,tn,sn,en,e),void 0,null),en},useId:function(){var St=Th(),e=Q$1.identifierPrefix;if(I$1){var en=sg,tn=rg;en=(tn&~(1<<32-oc(tn)-1)).toString(32)+en,e=":"+e+"R"+en,en=Kh++,0<en&&(e+="H"+en.toString(32)),e+=":"}else en=Lh++,e=":"+e+"r"+en.toString(32)+":";return St.memoizedState=e},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(St){var e=Uh();return ui(e,N$1.memoizedState,St)},useTransition:function(){var St=Wh(Vh)[0],e=Uh().memoizedState;return[St,e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(St){var e=Uh();return N$1===null?e.memoizedState=St:ui(e,N$1.memoizedState,St)},useTransition:function(){var St=Xh(Vh)[0],e=Uh().memoizedState;return[St,e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(St,e){if(St&&St.defaultProps){e=A$1({},e),St=St.defaultProps;for(var en in St)e[en]===void 0&&(e[en]=St[en]);return e}return e}function Di(St,e,en,tn){e=St.memoizedState,en=en(tn,e),en=en==null?e:A$1({},e,en),St.memoizedState=en,St.lanes===0&&(St.updateQueue.baseState=en)}var Ei={isMounted:function(St){return(St=St._reactInternals)?Vb(St)===St:!1},enqueueSetState:function(St,e,en){St=St._reactInternals;var tn=R$1(),nn=yi(St),sn=mh(tn,nn);sn.payload=e,en!=null&&(sn.callback=en),e=nh(St,sn,nn),e!==null&&(gi(e,St,nn,tn),oh(e,St,nn))},enqueueReplaceState:function(St,e,en){St=St._reactInternals;var tn=R$1(),nn=yi(St),sn=mh(tn,nn);sn.tag=1,sn.payload=e,en!=null&&(sn.callback=en),e=nh(St,sn,nn),e!==null&&(gi(e,St,nn,tn),oh(e,St,nn))},enqueueForceUpdate:function(St,e){St=St._reactInternals;var en=R$1(),tn=yi(St),nn=mh(en,tn);nn.tag=2,e!=null&&(nn.callback=e),e=nh(St,nn,tn),e!==null&&(gi(e,St,tn,en),oh(e,St,tn))}};function Fi(St,e,en,tn,nn,sn,on){return St=St.stateNode,typeof St.shouldComponentUpdate=="function"?St.shouldComponentUpdate(tn,sn,on):e.prototype&&e.prototype.isPureReactComponent?!Ie$1(en,tn)||!Ie$1(nn,sn):!0}function Gi(St,e,en){var tn=!1,nn=Vf,sn=e.contextType;return typeof sn=="object"&&sn!==null?sn=eh(sn):(nn=Zf(e)?Xf:H$1.current,tn=e.contextTypes,sn=(tn=tn!=null)?Yf(St,nn):Vf),e=new e(en,sn),St.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ei,St.stateNode=e,e._reactInternals=St,tn&&(St=St.stateNode,St.__reactInternalMemoizedUnmaskedChildContext=nn,St.__reactInternalMemoizedMaskedChildContext=sn),e}function Hi(St,e,en,tn){St=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(en,tn),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(en,tn),e.state!==St&&Ei.enqueueReplaceState(e,e.state,null)}function Ii(St,e,en,tn){var nn=St.stateNode;nn.props=en,nn.state=St.memoizedState,nn.refs={},kh(St);var sn=e.contextType;typeof sn=="object"&&sn!==null?nn.context=eh(sn):(sn=Zf(e)?Xf:H$1.current,nn.context=Yf(St,sn)),nn.state=St.memoizedState,sn=e.getDerivedStateFromProps,typeof sn=="function"&&(Di(St,e,sn,en),nn.state=St.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof nn.getSnapshotBeforeUpdate=="function"||typeof nn.UNSAFE_componentWillMount!="function"&&typeof nn.componentWillMount!="function"||(e=nn.state,typeof nn.componentWillMount=="function"&&nn.componentWillMount(),typeof nn.UNSAFE_componentWillMount=="function"&&nn.UNSAFE_componentWillMount(),e!==nn.state&&Ei.enqueueReplaceState(nn,nn.state,null),qh(St,en,nn,tn),nn.state=St.memoizedState),typeof nn.componentDidMount=="function"&&(St.flags|=4194308)}function Ji(St,e){try{var en="",tn=e;do en+=Pa(tn),tn=tn.return;while(tn);var nn=en}catch(sn){nn=`
Error generating stack: `+sn.message+`
`+sn.stack}return{value:St,source:e,stack:nn,digest:null}}function Ki(St,e,en){return{value:St,source:null,stack:en??null,digest:e??null}}function Li(St,e){try{console.error(e.value)}catch(en){setTimeout(function(){throw en})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(St,e,en){en=mh(-1,en),en.tag=3,en.payload={element:null};var tn=e.value;return en.callback=function(){Oi||(Oi=!0,Pi=tn),Li(St,e)},en}function Qi(St,e,en){en=mh(-1,en),en.tag=3;var tn=St.type.getDerivedStateFromError;if(typeof tn=="function"){var nn=e.value;en.payload=function(){return tn(nn)},en.callback=function(){Li(St,e)}}var sn=St.stateNode;return sn!==null&&typeof sn.componentDidCatch=="function"&&(en.callback=function(){Li(St,e),typeof tn!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var on=e.stack;this.componentDidCatch(e.value,{componentStack:on!==null?on:""})}),en}function Si(St,e,en){var tn=St.pingCache;if(tn===null){tn=St.pingCache=new Mi;var nn=new Set;tn.set(e,nn)}else nn=tn.get(e),nn===void 0&&(nn=new Set,tn.set(e,nn));nn.has(en)||(nn.add(en),St=Ti.bind(null,St,e,en),e.then(St,St))}function Ui(St){do{var e;if((e=St.tag===13)&&(e=St.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return St;St=St.return}while(St!==null);return null}function Vi(St,e,en,tn,nn){return St.mode&1?(St.flags|=65536,St.lanes=nn,St):(St===e?St.flags|=65536:(St.flags|=128,en.flags|=131072,en.flags&=-52805,en.tag===1&&(en.alternate===null?en.tag=17:(e=mh(-1,1),e.tag=2,nh(en,e,1))),en.lanes|=1),St)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(St,e,en,tn){e.child=St===null?Vg(e,null,en,tn):Ug(e,St.child,en,tn)}function Yi(St,e,en,tn,nn){en=en.render;var sn=e.ref;return ch(e,nn),tn=Nh(St,e,en,tn,sn,nn),en=Sh(),St!==null&&!dh?(e.updateQueue=St.updateQueue,e.flags&=-2053,St.lanes&=~nn,Zi(St,e,nn)):(I$1&&en&&vg(e),e.flags|=1,Xi(St,e,tn,nn),e.child)}function $i(St,e,en,tn,nn){if(St===null){var sn=en.type;return typeof sn=="function"&&!aj(sn)&&sn.defaultProps===void 0&&en.compare===null&&en.defaultProps===void 0?(e.tag=15,e.type=sn,bj(St,e,sn,tn,nn)):(St=Rg(en.type,null,tn,e,e.mode,nn),St.ref=e.ref,St.return=e,e.child=St)}if(sn=St.child,!(St.lanes&nn)){var on=sn.memoizedProps;if(en=en.compare,en=en!==null?en:Ie$1,en(on,tn)&&St.ref===e.ref)return Zi(St,e,nn)}return e.flags|=1,St=Pg(sn,tn),St.ref=e.ref,St.return=e,e.child=St}function bj(St,e,en,tn,nn){if(St!==null){var sn=St.memoizedProps;if(Ie$1(sn,tn)&&St.ref===e.ref)if(dh=!1,e.pendingProps=tn=sn,(St.lanes&nn)!==0)St.flags&131072&&(dh=!0);else return e.lanes=St.lanes,Zi(St,e,nn)}return cj(St,e,en,tn,nn)}function dj(St,e,en){var tn=e.pendingProps,nn=tn.children,sn=St!==null?St.memoizedState:null;if(tn.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(ej,fj),fj|=en;else{if(!(en&1073741824))return St=sn!==null?sn.baseLanes|en:en,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:St,cachePool:null,transitions:null},e.updateQueue=null,G$1(ej,fj),fj|=St,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},tn=sn!==null?sn.baseLanes:en,G$1(ej,fj),fj|=tn}else sn!==null?(tn=sn.baseLanes|en,e.memoizedState=null):tn=en,G$1(ej,fj),fj|=tn;return Xi(St,e,nn,en),e.child}function gj(St,e){var en=e.ref;(St===null&&en!==null||St!==null&&St.ref!==en)&&(e.flags|=512,e.flags|=2097152)}function cj(St,e,en,tn,nn){var sn=Zf(en)?Xf:H$1.current;return sn=Yf(e,sn),ch(e,nn),en=Nh(St,e,en,tn,sn,nn),tn=Sh(),St!==null&&!dh?(e.updateQueue=St.updateQueue,e.flags&=-2053,St.lanes&=~nn,Zi(St,e,nn)):(I$1&&tn&&vg(e),e.flags|=1,Xi(St,e,en,nn),e.child)}function hj(St,e,en,tn,nn){if(Zf(en)){var sn=!0;cg(e)}else sn=!1;if(ch(e,nn),e.stateNode===null)ij(St,e),Gi(e,en,tn),Ii(e,en,tn,nn),tn=!0;else if(St===null){var on=e.stateNode,un=e.memoizedProps;on.props=un;var dn=on.context,fn=en.contextType;typeof fn=="object"&&fn!==null?fn=eh(fn):(fn=Zf(en)?Xf:H$1.current,fn=Yf(e,fn));var hn=en.getDerivedStateFromProps,an=typeof hn=="function"||typeof on.getSnapshotBeforeUpdate=="function";an||typeof on.UNSAFE_componentWillReceiveProps!="function"&&typeof on.componentWillReceiveProps!="function"||(un!==tn||dn!==fn)&&Hi(e,on,tn,fn),jh=!1;var rn=e.memoizedState;on.state=rn,qh(e,tn,on,nn),dn=e.memoizedState,un!==tn||rn!==dn||Wf.current||jh?(typeof hn=="function"&&(Di(e,en,hn,tn),dn=e.memoizedState),(un=jh||Fi(e,en,un,tn,rn,dn,fn))?(an||typeof on.UNSAFE_componentWillMount!="function"&&typeof on.componentWillMount!="function"||(typeof on.componentWillMount=="function"&&on.componentWillMount(),typeof on.UNSAFE_componentWillMount=="function"&&on.UNSAFE_componentWillMount()),typeof on.componentDidMount=="function"&&(e.flags|=4194308)):(typeof on.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=tn,e.memoizedState=dn),on.props=tn,on.state=dn,on.context=fn,tn=un):(typeof on.componentDidMount=="function"&&(e.flags|=4194308),tn=!1)}else{on=e.stateNode,lh(St,e),un=e.memoizedProps,fn=e.type===e.elementType?un:Ci(e.type,un),on.props=fn,an=e.pendingProps,rn=on.context,dn=en.contextType,typeof dn=="object"&&dn!==null?dn=eh(dn):(dn=Zf(en)?Xf:H$1.current,dn=Yf(e,dn));var cn=en.getDerivedStateFromProps;(hn=typeof cn=="function"||typeof on.getSnapshotBeforeUpdate=="function")||typeof on.UNSAFE_componentWillReceiveProps!="function"&&typeof on.componentWillReceiveProps!="function"||(un!==an||rn!==dn)&&Hi(e,on,tn,dn),jh=!1,rn=e.memoizedState,on.state=rn,qh(e,tn,on,nn);var pn=e.memoizedState;un!==an||rn!==pn||Wf.current||jh?(typeof cn=="function"&&(Di(e,en,cn,tn),pn=e.memoizedState),(fn=jh||Fi(e,en,fn,tn,rn,pn,dn)||!1)?(hn||typeof on.UNSAFE_componentWillUpdate!="function"&&typeof on.componentWillUpdate!="function"||(typeof on.componentWillUpdate=="function"&&on.componentWillUpdate(tn,pn,dn),typeof on.UNSAFE_componentWillUpdate=="function"&&on.UNSAFE_componentWillUpdate(tn,pn,dn)),typeof on.componentDidUpdate=="function"&&(e.flags|=4),typeof on.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof on.componentDidUpdate!="function"||un===St.memoizedProps&&rn===St.memoizedState||(e.flags|=4),typeof on.getSnapshotBeforeUpdate!="function"||un===St.memoizedProps&&rn===St.memoizedState||(e.flags|=1024),e.memoizedProps=tn,e.memoizedState=pn),on.props=tn,on.state=pn,on.context=dn,tn=fn):(typeof on.componentDidUpdate!="function"||un===St.memoizedProps&&rn===St.memoizedState||(e.flags|=4),typeof on.getSnapshotBeforeUpdate!="function"||un===St.memoizedProps&&rn===St.memoizedState||(e.flags|=1024),tn=!1)}return jj(St,e,en,tn,sn,nn)}function jj(St,e,en,tn,nn,sn){gj(St,e);var on=(e.flags&128)!==0;if(!tn&&!on)return nn&&dg(e,en,!1),Zi(St,e,sn);tn=e.stateNode,Wi.current=e;var un=on&&typeof en.getDerivedStateFromError!="function"?null:tn.render();return e.flags|=1,St!==null&&on?(e.child=Ug(e,St.child,null,sn),e.child=Ug(e,null,un,sn)):Xi(St,e,un,sn),e.memoizedState=tn.state,nn&&dg(e,en,!0),e.child}function kj(St){var e=St.stateNode;e.pendingContext?ag(St,e.pendingContext,e.pendingContext!==e.context):e.context&&ag(St,e.context,!1),yh(St,e.containerInfo)}function lj(St,e,en,tn,nn){return Ig(),Jg(nn),e.flags|=256,Xi(St,e,en,tn),e.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(St){return{baseLanes:St,cachePool:null,transitions:null}}function oj(St,e,en){var tn=e.pendingProps,nn=L$1.current,sn=!1,on=(e.flags&128)!==0,un;if((un=on)||(un=St!==null&&St.memoizedState===null?!1:(nn&2)!==0),un?(sn=!0,e.flags&=-129):(St===null||St.memoizedState!==null)&&(nn|=1),G$1(L$1,nn&1),St===null)return Eg(e),St=e.memoizedState,St!==null&&(St=St.dehydrated,St!==null)?(e.mode&1?St.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(on=tn.children,St=tn.fallback,sn?(tn=e.mode,sn=e.child,on={mode:"hidden",children:on},!(tn&1)&&sn!==null?(sn.childLanes=0,sn.pendingProps=on):sn=pj(on,tn,0,null),St=Tg(St,tn,en,null),sn.return=e,St.return=e,sn.sibling=St,e.child=sn,e.child.memoizedState=nj(en),e.memoizedState=mj,St):qj(e,on));if(nn=St.memoizedState,nn!==null&&(un=nn.dehydrated,un!==null))return rj(St,e,on,tn,un,nn,en);if(sn){sn=tn.fallback,on=e.mode,nn=St.child,un=nn.sibling;var dn={mode:"hidden",children:tn.children};return!(on&1)&&e.child!==nn?(tn=e.child,tn.childLanes=0,tn.pendingProps=dn,e.deletions=null):(tn=Pg(nn,dn),tn.subtreeFlags=nn.subtreeFlags&14680064),un!==null?sn=Pg(un,sn):(sn=Tg(sn,on,en,null),sn.flags|=2),sn.return=e,tn.return=e,tn.sibling=sn,e.child=tn,tn=sn,sn=e.child,on=St.child.memoizedState,on=on===null?nj(en):{baseLanes:on.baseLanes|en,cachePool:null,transitions:on.transitions},sn.memoizedState=on,sn.childLanes=St.childLanes&~en,e.memoizedState=mj,tn}return sn=St.child,St=sn.sibling,tn=Pg(sn,{mode:"visible",children:tn.children}),!(e.mode&1)&&(tn.lanes=en),tn.return=e,tn.sibling=null,St!==null&&(en=e.deletions,en===null?(e.deletions=[St],e.flags|=16):en.push(St)),e.child=tn,e.memoizedState=null,tn}function qj(St,e){return e=pj({mode:"visible",children:e},St.mode,0,null),e.return=St,St.child=e}function sj(St,e,en,tn){return tn!==null&&Jg(tn),Ug(e,St.child,null,en),St=qj(e,e.pendingProps.children),St.flags|=2,e.memoizedState=null,St}function rj(St,e,en,tn,nn,sn,on){if(en)return e.flags&256?(e.flags&=-257,tn=Ki(Error(p$1(422))),sj(St,e,on,tn)):e.memoizedState!==null?(e.child=St.child,e.flags|=128,null):(sn=tn.fallback,nn=e.mode,tn=pj({mode:"visible",children:tn.children},nn,0,null),sn=Tg(sn,nn,on,null),sn.flags|=2,tn.return=e,sn.return=e,tn.sibling=sn,e.child=tn,e.mode&1&&Ug(e,St.child,null,on),e.child.memoizedState=nj(on),e.memoizedState=mj,sn);if(!(e.mode&1))return sj(St,e,on,null);if(nn.data==="$!"){if(tn=nn.nextSibling&&nn.nextSibling.dataset,tn)var un=tn.dgst;return tn=un,sn=Error(p$1(419)),tn=Ki(sn,tn,void 0),sj(St,e,on,tn)}if(un=(on&St.childLanes)!==0,dh||un){if(tn=Q$1,tn!==null){switch(on&-on){case 4:nn=2;break;case 16:nn=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:nn=32;break;case 536870912:nn=268435456;break;default:nn=0}nn=nn&(tn.suspendedLanes|on)?0:nn,nn!==0&&nn!==sn.retryLane&&(sn.retryLane=nn,ih(St,nn),gi(tn,St,nn,-1))}return tj(),tn=Ki(Error(p$1(421))),sj(St,e,on,tn)}return nn.data==="$?"?(e.flags|=128,e.child=St.child,e=uj.bind(null,St),nn._reactRetry=e,null):(St=sn.treeContext,yg=Lf(nn.nextSibling),xg=e,I$1=!0,zg=null,St!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=St.id,sg=St.overflow,qg=e),e=qj(e,tn.children),e.flags|=4096,e)}function vj(St,e,en){St.lanes|=e;var tn=St.alternate;tn!==null&&(tn.lanes|=e),bh(St.return,e,en)}function wj(St,e,en,tn,nn){var sn=St.memoizedState;sn===null?St.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:tn,tail:en,tailMode:nn}:(sn.isBackwards=e,sn.rendering=null,sn.renderingStartTime=0,sn.last=tn,sn.tail=en,sn.tailMode=nn)}function xj(St,e,en){var tn=e.pendingProps,nn=tn.revealOrder,sn=tn.tail;if(Xi(St,e,tn.children,en),tn=L$1.current,tn&2)tn=tn&1|2,e.flags|=128;else{if(St!==null&&St.flags&128)e:for(St=e.child;St!==null;){if(St.tag===13)St.memoizedState!==null&&vj(St,en,e);else if(St.tag===19)vj(St,en,e);else if(St.child!==null){St.child.return=St,St=St.child;continue}if(St===e)break e;for(;St.sibling===null;){if(St.return===null||St.return===e)break e;St=St.return}St.sibling.return=St.return,St=St.sibling}tn&=1}if(G$1(L$1,tn),!(e.mode&1))e.memoizedState=null;else switch(nn){case"forwards":for(en=e.child,nn=null;en!==null;)St=en.alternate,St!==null&&Ch(St)===null&&(nn=en),en=en.sibling;en=nn,en===null?(nn=e.child,e.child=null):(nn=en.sibling,en.sibling=null),wj(e,!1,nn,en,sn);break;case"backwards":for(en=null,nn=e.child,e.child=null;nn!==null;){if(St=nn.alternate,St!==null&&Ch(St)===null){e.child=nn;break}St=nn.sibling,nn.sibling=en,en=nn,nn=St}wj(e,!0,en,null,sn);break;case"together":wj(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ij(St,e){!(e.mode&1)&&St!==null&&(St.alternate=null,e.alternate=null,e.flags|=2)}function Zi(St,e,en){if(St!==null&&(e.dependencies=St.dependencies),rh|=e.lanes,!(en&e.childLanes))return null;if(St!==null&&e.child!==St.child)throw Error(p$1(153));if(e.child!==null){for(St=e.child,en=Pg(St,St.pendingProps),e.child=en,en.return=e;St.sibling!==null;)St=St.sibling,en=en.sibling=Pg(St,St.pendingProps),en.return=e;en.sibling=null}return e.child}function yj(St,e,en){switch(e.tag){case 3:kj(e),Ig();break;case 5:Ah(e);break;case 1:Zf(e.type)&&cg(e);break;case 4:yh(e,e.stateNode.containerInfo);break;case 10:var tn=e.type._context,nn=e.memoizedProps.value;G$1(Wg,tn._currentValue),tn._currentValue=nn;break;case 13:if(tn=e.memoizedState,tn!==null)return tn.dehydrated!==null?(G$1(L$1,L$1.current&1),e.flags|=128,null):en&e.child.childLanes?oj(St,e,en):(G$1(L$1,L$1.current&1),St=Zi(St,e,en),St!==null?St.sibling:null);G$1(L$1,L$1.current&1);break;case 19:if(tn=(en&e.childLanes)!==0,St.flags&128){if(tn)return xj(St,e,en);e.flags|=128}if(nn=e.memoizedState,nn!==null&&(nn.rendering=null,nn.tail=null,nn.lastEffect=null),G$1(L$1,L$1.current),tn)break;return null;case 22:case 23:return e.lanes=0,dj(St,e,en)}return Zi(St,e,en)}var zj,Aj,Bj,Cj;zj=function(St,e){for(var en=e.child;en!==null;){if(en.tag===5||en.tag===6)St.appendChild(en.stateNode);else if(en.tag!==4&&en.child!==null){en.child.return=en,en=en.child;continue}if(en===e)break;for(;en.sibling===null;){if(en.return===null||en.return===e)return;en=en.return}en.sibling.return=en.return,en=en.sibling}};Aj=function(){};Bj=function(St,e,en,tn){var nn=St.memoizedProps;if(nn!==tn){St=e.stateNode,xh(uh.current);var sn=null;switch(en){case"input":nn=Ya(St,nn),tn=Ya(St,tn),sn=[];break;case"select":nn=A$1({},nn,{value:void 0}),tn=A$1({},tn,{value:void 0}),sn=[];break;case"textarea":nn=gb(St,nn),tn=gb(St,tn),sn=[];break;default:typeof nn.onClick!="function"&&typeof tn.onClick=="function"&&(St.onclick=Bf)}ub(en,tn);var on;en=null;for(fn in nn)if(!tn.hasOwnProperty(fn)&&nn.hasOwnProperty(fn)&&nn[fn]!=null)if(fn==="style"){var un=nn[fn];for(on in un)un.hasOwnProperty(on)&&(en||(en={}),en[on]="")}else fn!=="dangerouslySetInnerHTML"&&fn!=="children"&&fn!=="suppressContentEditableWarning"&&fn!=="suppressHydrationWarning"&&fn!=="autoFocus"&&(ea.hasOwnProperty(fn)?sn||(sn=[]):(sn=sn||[]).push(fn,null));for(fn in tn){var dn=tn[fn];if(un=nn!=null?nn[fn]:void 0,tn.hasOwnProperty(fn)&&dn!==un&&(dn!=null||un!=null))if(fn==="style")if(un){for(on in un)!un.hasOwnProperty(on)||dn&&dn.hasOwnProperty(on)||(en||(en={}),en[on]="");for(on in dn)dn.hasOwnProperty(on)&&un[on]!==dn[on]&&(en||(en={}),en[on]=dn[on])}else en||(sn||(sn=[]),sn.push(fn,en)),en=dn;else fn==="dangerouslySetInnerHTML"?(dn=dn?dn.__html:void 0,un=un?un.__html:void 0,dn!=null&&un!==dn&&(sn=sn||[]).push(fn,dn)):fn==="children"?typeof dn!="string"&&typeof dn!="number"||(sn=sn||[]).push(fn,""+dn):fn!=="suppressContentEditableWarning"&&fn!=="suppressHydrationWarning"&&(ea.hasOwnProperty(fn)?(dn!=null&&fn==="onScroll"&&D$1("scroll",St),sn||un===dn||(sn=[])):(sn=sn||[]).push(fn,dn))}en&&(sn=sn||[]).push("style",en);var fn=sn;(e.updateQueue=fn)&&(e.flags|=4)}};Cj=function(St,e,en,tn){en!==tn&&(e.flags|=4)};function Dj(St,e){if(!I$1)switch(St.tailMode){case"hidden":e=St.tail;for(var en=null;e!==null;)e.alternate!==null&&(en=e),e=e.sibling;en===null?St.tail=null:en.sibling=null;break;case"collapsed":en=St.tail;for(var tn=null;en!==null;)en.alternate!==null&&(tn=en),en=en.sibling;tn===null?e||St.tail===null?St.tail=null:St.tail.sibling=null:tn.sibling=null}}function S$1(St){var e=St.alternate!==null&&St.alternate.child===St.child,en=0,tn=0;if(e)for(var nn=St.child;nn!==null;)en|=nn.lanes|nn.childLanes,tn|=nn.subtreeFlags&14680064,tn|=nn.flags&14680064,nn.return=St,nn=nn.sibling;else for(nn=St.child;nn!==null;)en|=nn.lanes|nn.childLanes,tn|=nn.subtreeFlags,tn|=nn.flags,nn.return=St,nn=nn.sibling;return St.subtreeFlags|=tn,St.childLanes=en,e}function Ej(St,e,en){var tn=e.pendingProps;switch(wg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$1(e),null;case 1:return Zf(e.type)&&$f(),S$1(e),null;case 3:return tn=e.stateNode,zh(),E$1(Wf),E$1(H$1),Eh(),tn.pendingContext&&(tn.context=tn.pendingContext,tn.pendingContext=null),(St===null||St.child===null)&&(Gg(e)?e.flags|=4:St===null||St.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(St,e),S$1(e),null;case 5:Bh(e);var nn=xh(wh.current);if(en=e.type,St!==null&&e.stateNode!=null)Bj(St,e,en,tn,nn),St.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!tn){if(e.stateNode===null)throw Error(p$1(166));return S$1(e),null}if(St=xh(uh.current),Gg(e)){tn=e.stateNode,en=e.type;var sn=e.memoizedProps;switch(tn[Of]=e,tn[Pf]=sn,St=(e.mode&1)!==0,en){case"dialog":D$1("cancel",tn),D$1("close",tn);break;case"iframe":case"object":case"embed":D$1("load",tn);break;case"video":case"audio":for(nn=0;nn<lf.length;nn++)D$1(lf[nn],tn);break;case"source":D$1("error",tn);break;case"img":case"image":case"link":D$1("error",tn),D$1("load",tn);break;case"details":D$1("toggle",tn);break;case"input":Za(tn,sn),D$1("invalid",tn);break;case"select":tn._wrapperState={wasMultiple:!!sn.multiple},D$1("invalid",tn);break;case"textarea":hb(tn,sn),D$1("invalid",tn)}ub(en,sn),nn=null;for(var on in sn)if(sn.hasOwnProperty(on)){var un=sn[on];on==="children"?typeof un=="string"?tn.textContent!==un&&(sn.suppressHydrationWarning!==!0&&Af(tn.textContent,un,St),nn=["children",un]):typeof un=="number"&&tn.textContent!==""+un&&(sn.suppressHydrationWarning!==!0&&Af(tn.textContent,un,St),nn=["children",""+un]):ea.hasOwnProperty(on)&&un!=null&&on==="onScroll"&&D$1("scroll",tn)}switch(en){case"input":Va(tn),db(tn,sn,!0);break;case"textarea":Va(tn),jb(tn);break;case"select":case"option":break;default:typeof sn.onClick=="function"&&(tn.onclick=Bf)}tn=nn,e.updateQueue=tn,tn!==null&&(e.flags|=4)}else{on=nn.nodeType===9?nn:nn.ownerDocument,St==="http://www.w3.org/1999/xhtml"&&(St=kb(en)),St==="http://www.w3.org/1999/xhtml"?en==="script"?(St=on.createElement("div"),St.innerHTML="<script><\/script>",St=St.removeChild(St.firstChild)):typeof tn.is=="string"?St=on.createElement(en,{is:tn.is}):(St=on.createElement(en),en==="select"&&(on=St,tn.multiple?on.multiple=!0:tn.size&&(on.size=tn.size))):St=on.createElementNS(St,en),St[Of]=e,St[Pf]=tn,zj(St,e,!1,!1),e.stateNode=St;e:{switch(on=vb(en,tn),en){case"dialog":D$1("cancel",St),D$1("close",St),nn=tn;break;case"iframe":case"object":case"embed":D$1("load",St),nn=tn;break;case"video":case"audio":for(nn=0;nn<lf.length;nn++)D$1(lf[nn],St);nn=tn;break;case"source":D$1("error",St),nn=tn;break;case"img":case"image":case"link":D$1("error",St),D$1("load",St),nn=tn;break;case"details":D$1("toggle",St),nn=tn;break;case"input":Za(St,tn),nn=Ya(St,tn),D$1("invalid",St);break;case"option":nn=tn;break;case"select":St._wrapperState={wasMultiple:!!tn.multiple},nn=A$1({},tn,{value:void 0}),D$1("invalid",St);break;case"textarea":hb(St,tn),nn=gb(St,tn),D$1("invalid",St);break;default:nn=tn}ub(en,nn),un=nn;for(sn in un)if(un.hasOwnProperty(sn)){var dn=un[sn];sn==="style"?sb(St,dn):sn==="dangerouslySetInnerHTML"?(dn=dn?dn.__html:void 0,dn!=null&&nb(St,dn)):sn==="children"?typeof dn=="string"?(en!=="textarea"||dn!=="")&&ob(St,dn):typeof dn=="number"&&ob(St,""+dn):sn!=="suppressContentEditableWarning"&&sn!=="suppressHydrationWarning"&&sn!=="autoFocus"&&(ea.hasOwnProperty(sn)?dn!=null&&sn==="onScroll"&&D$1("scroll",St):dn!=null&&ta(St,sn,dn,on))}switch(en){case"input":Va(St),db(St,tn,!1);break;case"textarea":Va(St),jb(St);break;case"option":tn.value!=null&&St.setAttribute("value",""+Sa(tn.value));break;case"select":St.multiple=!!tn.multiple,sn=tn.value,sn!=null?fb(St,!!tn.multiple,sn,!1):tn.defaultValue!=null&&fb(St,!!tn.multiple,tn.defaultValue,!0);break;default:typeof nn.onClick=="function"&&(St.onclick=Bf)}switch(en){case"button":case"input":case"select":case"textarea":tn=!!tn.autoFocus;break e;case"img":tn=!0;break e;default:tn=!1}}tn&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return S$1(e),null;case 6:if(St&&e.stateNode!=null)Cj(St,e,St.memoizedProps,tn);else{if(typeof tn!="string"&&e.stateNode===null)throw Error(p$1(166));if(en=xh(wh.current),xh(uh.current),Gg(e)){if(tn=e.stateNode,en=e.memoizedProps,tn[Of]=e,(sn=tn.nodeValue!==en)&&(St=xg,St!==null))switch(St.tag){case 3:Af(tn.nodeValue,en,(St.mode&1)!==0);break;case 5:St.memoizedProps.suppressHydrationWarning!==!0&&Af(tn.nodeValue,en,(St.mode&1)!==0)}sn&&(e.flags|=4)}else tn=(en.nodeType===9?en:en.ownerDocument).createTextNode(tn),tn[Of]=e,e.stateNode=tn}return S$1(e),null;case 13:if(E$1(L$1),tn=e.memoizedState,St===null||St.memoizedState!==null&&St.memoizedState.dehydrated!==null){if(I$1&&yg!==null&&e.mode&1&&!(e.flags&128))Hg(),Ig(),e.flags|=98560,sn=!1;else if(sn=Gg(e),tn!==null&&tn.dehydrated!==null){if(St===null){if(!sn)throw Error(p$1(318));if(sn=e.memoizedState,sn=sn!==null?sn.dehydrated:null,!sn)throw Error(p$1(317));sn[Of]=e}else Ig(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;S$1(e),sn=!1}else zg!==null&&(Fj(zg),zg=null),sn=!0;if(!sn)return e.flags&65536?e:null}return e.flags&128?(e.lanes=en,e):(tn=tn!==null,tn!==(St!==null&&St.memoizedState!==null)&&tn&&(e.child.flags|=8192,e.mode&1&&(St===null||L$1.current&1?T$1===0&&(T$1=3):tj())),e.updateQueue!==null&&(e.flags|=4),S$1(e),null);case 4:return zh(),Aj(St,e),St===null&&sf(e.stateNode.containerInfo),S$1(e),null;case 10:return ah(e.type._context),S$1(e),null;case 17:return Zf(e.type)&&$f(),S$1(e),null;case 19:if(E$1(L$1),sn=e.memoizedState,sn===null)return S$1(e),null;if(tn=(e.flags&128)!==0,on=sn.rendering,on===null)if(tn)Dj(sn,!1);else{if(T$1!==0||St!==null&&St.flags&128)for(St=e.child;St!==null;){if(on=Ch(St),on!==null){for(e.flags|=128,Dj(sn,!1),tn=on.updateQueue,tn!==null&&(e.updateQueue=tn,e.flags|=4),e.subtreeFlags=0,tn=en,en=e.child;en!==null;)sn=en,St=tn,sn.flags&=14680066,on=sn.alternate,on===null?(sn.childLanes=0,sn.lanes=St,sn.child=null,sn.subtreeFlags=0,sn.memoizedProps=null,sn.memoizedState=null,sn.updateQueue=null,sn.dependencies=null,sn.stateNode=null):(sn.childLanes=on.childLanes,sn.lanes=on.lanes,sn.child=on.child,sn.subtreeFlags=0,sn.deletions=null,sn.memoizedProps=on.memoizedProps,sn.memoizedState=on.memoizedState,sn.updateQueue=on.updateQueue,sn.type=on.type,St=on.dependencies,sn.dependencies=St===null?null:{lanes:St.lanes,firstContext:St.firstContext}),en=en.sibling;return G$1(L$1,L$1.current&1|2),e.child}St=St.sibling}sn.tail!==null&&B$1()>Gj&&(e.flags|=128,tn=!0,Dj(sn,!1),e.lanes=4194304)}else{if(!tn)if(St=Ch(on),St!==null){if(e.flags|=128,tn=!0,en=St.updateQueue,en!==null&&(e.updateQueue=en,e.flags|=4),Dj(sn,!0),sn.tail===null&&sn.tailMode==="hidden"&&!on.alternate&&!I$1)return S$1(e),null}else 2*B$1()-sn.renderingStartTime>Gj&&en!==1073741824&&(e.flags|=128,tn=!0,Dj(sn,!1),e.lanes=4194304);sn.isBackwards?(on.sibling=e.child,e.child=on):(en=sn.last,en!==null?en.sibling=on:e.child=on,sn.last=on)}return sn.tail!==null?(e=sn.tail,sn.rendering=e,sn.tail=e.sibling,sn.renderingStartTime=B$1(),e.sibling=null,en=L$1.current,G$1(L$1,tn?en&1|2:en&1),e):(S$1(e),null);case 22:case 23:return Hj(),tn=e.memoizedState!==null,St!==null&&St.memoizedState!==null!==tn&&(e.flags|=8192),tn&&e.mode&1?fj&1073741824&&(S$1(e),e.subtreeFlags&6&&(e.flags|=8192)):S$1(e),null;case 24:return null;case 25:return null}throw Error(p$1(156,e.tag))}function Ij(St,e){switch(wg(e),e.tag){case 1:return Zf(e.type)&&$f(),St=e.flags,St&65536?(e.flags=St&-65537|128,e):null;case 3:return zh(),E$1(Wf),E$1(H$1),Eh(),St=e.flags,St&65536&&!(St&128)?(e.flags=St&-65537|128,e):null;case 5:return Bh(e),null;case 13:if(E$1(L$1),St=e.memoizedState,St!==null&&St.dehydrated!==null){if(e.alternate===null)throw Error(p$1(340));Ig()}return St=e.flags,St&65536?(e.flags=St&-65537|128,e):null;case 19:return E$1(L$1),null;case 4:return zh(),null;case 10:return ah(e.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U$1=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V$1=null;function Lj(St,e){var en=St.ref;if(en!==null)if(typeof en=="function")try{en(null)}catch(tn){W$1(St,e,tn)}else en.current=null}function Mj(St,e,en){try{en()}catch(tn){W$1(St,e,tn)}}var Nj=!1;function Oj(St,e){if(Cf=dd,St=Me(),Ne$1(St)){if("selectionStart"in St)var en={start:St.selectionStart,end:St.selectionEnd};else e:{en=(en=St.ownerDocument)&&en.defaultView||window;var tn=en.getSelection&&en.getSelection();if(tn&&tn.rangeCount!==0){en=tn.anchorNode;var nn=tn.anchorOffset,sn=tn.focusNode;tn=tn.focusOffset;try{en.nodeType,sn.nodeType}catch{en=null;break e}var on=0,un=-1,dn=-1,fn=0,hn=0,an=St,rn=null;t:for(;;){for(var cn;an!==en||nn!==0&&an.nodeType!==3||(un=on+nn),an!==sn||tn!==0&&an.nodeType!==3||(dn=on+tn),an.nodeType===3&&(on+=an.nodeValue.length),(cn=an.firstChild)!==null;)rn=an,an=cn;for(;;){if(an===St)break t;if(rn===en&&++fn===nn&&(un=on),rn===sn&&++hn===tn&&(dn=on),(cn=an.nextSibling)!==null)break;an=rn,rn=an.parentNode}an=cn}en=un===-1||dn===-1?null:{start:un,end:dn}}else en=null}en=en||{start:0,end:0}}else en=null;for(Df={focusedElem:St,selectionRange:en},dd=!1,V$1=e;V$1!==null;)if(e=V$1,St=e.child,(e.subtreeFlags&1028)!==0&&St!==null)St.return=e,V$1=St;else for(;V$1!==null;){e=V$1;try{var pn=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(pn!==null){var mn=pn.memoizedProps,xn=pn.memoizedState,gn=e.stateNode,yn=gn.getSnapshotBeforeUpdate(e.elementType===e.type?mn:Ci(e.type,mn),xn);gn.__reactInternalSnapshotBeforeUpdate=yn}break;case 3:var bn=e.stateNode.containerInfo;bn.nodeType===1?bn.textContent="":bn.nodeType===9&&bn.documentElement&&bn.removeChild(bn.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$1(163))}}catch(wn){W$1(e,e.return,wn)}if(St=e.sibling,St!==null){St.return=e.return,V$1=St;break}V$1=e.return}return pn=Nj,Nj=!1,pn}function Pj(St,e,en){var tn=e.updateQueue;if(tn=tn!==null?tn.lastEffect:null,tn!==null){var nn=tn=tn.next;do{if((nn.tag&St)===St){var sn=nn.destroy;nn.destroy=void 0,sn!==void 0&&Mj(e,en,sn)}nn=nn.next}while(nn!==tn)}}function Qj(St,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var en=e=e.next;do{if((en.tag&St)===St){var tn=en.create;en.destroy=tn()}en=en.next}while(en!==e)}}function Rj(St){var e=St.ref;if(e!==null){var en=St.stateNode;switch(St.tag){case 5:St=en;break;default:St=en}typeof e=="function"?e(St):e.current=St}}function Sj(St){var e=St.alternate;e!==null&&(St.alternate=null,Sj(e)),St.child=null,St.deletions=null,St.sibling=null,St.tag===5&&(e=St.stateNode,e!==null&&(delete e[Of],delete e[Pf],delete e[of],delete e[Qf],delete e[Rf])),St.stateNode=null,St.return=null,St.dependencies=null,St.memoizedProps=null,St.memoizedState=null,St.pendingProps=null,St.stateNode=null,St.updateQueue=null}function Tj(St){return St.tag===5||St.tag===3||St.tag===4}function Uj(St){e:for(;;){for(;St.sibling===null;){if(St.return===null||Tj(St.return))return null;St=St.return}for(St.sibling.return=St.return,St=St.sibling;St.tag!==5&&St.tag!==6&&St.tag!==18;){if(St.flags&2||St.child===null||St.tag===4)continue e;St.child.return=St,St=St.child}if(!(St.flags&2))return St.stateNode}}function Vj(St,e,en){var tn=St.tag;if(tn===5||tn===6)St=St.stateNode,e?en.nodeType===8?en.parentNode.insertBefore(St,e):en.insertBefore(St,e):(en.nodeType===8?(e=en.parentNode,e.insertBefore(St,en)):(e=en,e.appendChild(St)),en=en._reactRootContainer,en!=null||e.onclick!==null||(e.onclick=Bf));else if(tn!==4&&(St=St.child,St!==null))for(Vj(St,e,en),St=St.sibling;St!==null;)Vj(St,e,en),St=St.sibling}function Wj(St,e,en){var tn=St.tag;if(tn===5||tn===6)St=St.stateNode,e?en.insertBefore(St,e):en.appendChild(St);else if(tn!==4&&(St=St.child,St!==null))for(Wj(St,e,en),St=St.sibling;St!==null;)Wj(St,e,en),St=St.sibling}var X$2=null,Xj=!1;function Yj(St,e,en){for(en=en.child;en!==null;)Zj(St,e,en),en=en.sibling}function Zj(St,e,en){if(lc$1&&typeof lc$1.onCommitFiberUnmount=="function")try{lc$1.onCommitFiberUnmount(kc,en)}catch{}switch(en.tag){case 5:U$1||Lj(en,e);case 6:var tn=X$2,nn=Xj;X$2=null,Yj(St,e,en),X$2=tn,Xj=nn,X$2!==null&&(Xj?(St=X$2,en=en.stateNode,St.nodeType===8?St.parentNode.removeChild(en):St.removeChild(en)):X$2.removeChild(en.stateNode));break;case 18:X$2!==null&&(Xj?(St=X$2,en=en.stateNode,St.nodeType===8?Kf(St.parentNode,en):St.nodeType===1&&Kf(St,en),bd(St)):Kf(X$2,en.stateNode));break;case 4:tn=X$2,nn=Xj,X$2=en.stateNode.containerInfo,Xj=!0,Yj(St,e,en),X$2=tn,Xj=nn;break;case 0:case 11:case 14:case 15:if(!U$1&&(tn=en.updateQueue,tn!==null&&(tn=tn.lastEffect,tn!==null))){nn=tn=tn.next;do{var sn=nn,on=sn.destroy;sn=sn.tag,on!==void 0&&(sn&2||sn&4)&&Mj(en,e,on),nn=nn.next}while(nn!==tn)}Yj(St,e,en);break;case 1:if(!U$1&&(Lj(en,e),tn=en.stateNode,typeof tn.componentWillUnmount=="function"))try{tn.props=en.memoizedProps,tn.state=en.memoizedState,tn.componentWillUnmount()}catch(un){W$1(en,e,un)}Yj(St,e,en);break;case 21:Yj(St,e,en);break;case 22:en.mode&1?(U$1=(tn=U$1)||en.memoizedState!==null,Yj(St,e,en),U$1=tn):Yj(St,e,en);break;default:Yj(St,e,en)}}function ak(St){var e=St.updateQueue;if(e!==null){St.updateQueue=null;var en=St.stateNode;en===null&&(en=St.stateNode=new Kj),e.forEach(function(tn){var nn=bk.bind(null,St,tn);en.has(tn)||(en.add(tn),tn.then(nn,nn))})}}function ck(St,e){var en=e.deletions;if(en!==null)for(var tn=0;tn<en.length;tn++){var nn=en[tn];try{var sn=St,on=e,un=on;e:for(;un!==null;){switch(un.tag){case 5:X$2=un.stateNode,Xj=!1;break e;case 3:X$2=un.stateNode.containerInfo,Xj=!0;break e;case 4:X$2=un.stateNode.containerInfo,Xj=!0;break e}un=un.return}if(X$2===null)throw Error(p$1(160));Zj(sn,on,nn),X$2=null,Xj=!1;var dn=nn.alternate;dn!==null&&(dn.return=null),nn.return=null}catch(fn){W$1(nn,e,fn)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)dk(e,St),e=e.sibling}function dk(St,e){var en=St.alternate,tn=St.flags;switch(St.tag){case 0:case 11:case 14:case 15:if(ck(e,St),ek(St),tn&4){try{Pj(3,St,St.return),Qj(3,St)}catch(mn){W$1(St,St.return,mn)}try{Pj(5,St,St.return)}catch(mn){W$1(St,St.return,mn)}}break;case 1:ck(e,St),ek(St),tn&512&&en!==null&&Lj(en,en.return);break;case 5:if(ck(e,St),ek(St),tn&512&&en!==null&&Lj(en,en.return),St.flags&32){var nn=St.stateNode;try{ob(nn,"")}catch(mn){W$1(St,St.return,mn)}}if(tn&4&&(nn=St.stateNode,nn!=null)){var sn=St.memoizedProps,on=en!==null?en.memoizedProps:sn,un=St.type,dn=St.updateQueue;if(St.updateQueue=null,dn!==null)try{un==="input"&&sn.type==="radio"&&sn.name!=null&&ab(nn,sn),vb(un,on);var fn=vb(un,sn);for(on=0;on<dn.length;on+=2){var hn=dn[on],an=dn[on+1];hn==="style"?sb(nn,an):hn==="dangerouslySetInnerHTML"?nb(nn,an):hn==="children"?ob(nn,an):ta(nn,hn,an,fn)}switch(un){case"input":bb(nn,sn);break;case"textarea":ib(nn,sn);break;case"select":var rn=nn._wrapperState.wasMultiple;nn._wrapperState.wasMultiple=!!sn.multiple;var cn=sn.value;cn!=null?fb(nn,!!sn.multiple,cn,!1):rn!==!!sn.multiple&&(sn.defaultValue!=null?fb(nn,!!sn.multiple,sn.defaultValue,!0):fb(nn,!!sn.multiple,sn.multiple?[]:"",!1))}nn[Pf]=sn}catch(mn){W$1(St,St.return,mn)}}break;case 6:if(ck(e,St),ek(St),tn&4){if(St.stateNode===null)throw Error(p$1(162));nn=St.stateNode,sn=St.memoizedProps;try{nn.nodeValue=sn}catch(mn){W$1(St,St.return,mn)}}break;case 3:if(ck(e,St),ek(St),tn&4&&en!==null&&en.memoizedState.isDehydrated)try{bd(e.containerInfo)}catch(mn){W$1(St,St.return,mn)}break;case 4:ck(e,St),ek(St);break;case 13:ck(e,St),ek(St),nn=St.child,nn.flags&8192&&(sn=nn.memoizedState!==null,nn.stateNode.isHidden=sn,!sn||nn.alternate!==null&&nn.alternate.memoizedState!==null||(fk=B$1())),tn&4&&ak(St);break;case 22:if(hn=en!==null&&en.memoizedState!==null,St.mode&1?(U$1=(fn=U$1)||hn,ck(e,St),U$1=fn):ck(e,St),ek(St),tn&8192){if(fn=St.memoizedState!==null,(St.stateNode.isHidden=fn)&&!hn&&St.mode&1)for(V$1=St,hn=St.child;hn!==null;){for(an=V$1=hn;V$1!==null;){switch(rn=V$1,cn=rn.child,rn.tag){case 0:case 11:case 14:case 15:Pj(4,rn,rn.return);break;case 1:Lj(rn,rn.return);var pn=rn.stateNode;if(typeof pn.componentWillUnmount=="function"){tn=rn,en=rn.return;try{e=tn,pn.props=e.memoizedProps,pn.state=e.memoizedState,pn.componentWillUnmount()}catch(mn){W$1(tn,en,mn)}}break;case 5:Lj(rn,rn.return);break;case 22:if(rn.memoizedState!==null){gk(an);continue}}cn!==null?(cn.return=rn,V$1=cn):gk(an)}hn=hn.sibling}e:for(hn=null,an=St;;){if(an.tag===5){if(hn===null){hn=an;try{nn=an.stateNode,fn?(sn=nn.style,typeof sn.setProperty=="function"?sn.setProperty("display","none","important"):sn.display="none"):(un=an.stateNode,dn=an.memoizedProps.style,on=dn!=null&&dn.hasOwnProperty("display")?dn.display:null,un.style.display=rb("display",on))}catch(mn){W$1(St,St.return,mn)}}}else if(an.tag===6){if(hn===null)try{an.stateNode.nodeValue=fn?"":an.memoizedProps}catch(mn){W$1(St,St.return,mn)}}else if((an.tag!==22&&an.tag!==23||an.memoizedState===null||an===St)&&an.child!==null){an.child.return=an,an=an.child;continue}if(an===St)break e;for(;an.sibling===null;){if(an.return===null||an.return===St)break e;hn===an&&(hn=null),an=an.return}hn===an&&(hn=null),an.sibling.return=an.return,an=an.sibling}}break;case 19:ck(e,St),ek(St),tn&4&&ak(St);break;case 21:break;default:ck(e,St),ek(St)}}function ek(St){var e=St.flags;if(e&2){try{e:{for(var en=St.return;en!==null;){if(Tj(en)){var tn=en;break e}en=en.return}throw Error(p$1(160))}switch(tn.tag){case 5:var nn=tn.stateNode;tn.flags&32&&(ob(nn,""),tn.flags&=-33);var sn=Uj(St);Wj(St,sn,nn);break;case 3:case 4:var on=tn.stateNode.containerInfo,un=Uj(St);Vj(St,un,on);break;default:throw Error(p$1(161))}}catch(dn){W$1(St,St.return,dn)}St.flags&=-3}e&4096&&(St.flags&=-4097)}function hk(St,e,en){V$1=St,ik(St)}function ik(St,e,en){for(var tn=(St.mode&1)!==0;V$1!==null;){var nn=V$1,sn=nn.child;if(nn.tag===22&&tn){var on=nn.memoizedState!==null||Jj;if(!on){var un=nn.alternate,dn=un!==null&&un.memoizedState!==null||U$1;un=Jj;var fn=U$1;if(Jj=on,(U$1=dn)&&!fn)for(V$1=nn;V$1!==null;)on=V$1,dn=on.child,on.tag===22&&on.memoizedState!==null?jk(nn):dn!==null?(dn.return=on,V$1=dn):jk(nn);for(;sn!==null;)V$1=sn,ik(sn),sn=sn.sibling;V$1=nn,Jj=un,U$1=fn}kk(St)}else nn.subtreeFlags&8772&&sn!==null?(sn.return=nn,V$1=sn):kk(St)}}function kk(St){for(;V$1!==null;){var e=V$1;if(e.flags&8772){var en=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:U$1||Qj(5,e);break;case 1:var tn=e.stateNode;if(e.flags&4&&!U$1)if(en===null)tn.componentDidMount();else{var nn=e.elementType===e.type?en.memoizedProps:Ci(e.type,en.memoizedProps);tn.componentDidUpdate(nn,en.memoizedState,tn.__reactInternalSnapshotBeforeUpdate)}var sn=e.updateQueue;sn!==null&&sh(e,sn,tn);break;case 3:var on=e.updateQueue;if(on!==null){if(en=null,e.child!==null)switch(e.child.tag){case 5:en=e.child.stateNode;break;case 1:en=e.child.stateNode}sh(e,on,en)}break;case 5:var un=e.stateNode;if(en===null&&e.flags&4){en=un;var dn=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":dn.autoFocus&&en.focus();break;case"img":dn.src&&(en.src=dn.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var fn=e.alternate;if(fn!==null){var hn=fn.memoizedState;if(hn!==null){var an=hn.dehydrated;an!==null&&bd(an)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$1(163))}U$1||e.flags&512&&Rj(e)}catch(rn){W$1(e,e.return,rn)}}if(e===St){V$1=null;break}if(en=e.sibling,en!==null){en.return=e.return,V$1=en;break}V$1=e.return}}function gk(St){for(;V$1!==null;){var e=V$1;if(e===St){V$1=null;break}var en=e.sibling;if(en!==null){en.return=e.return,V$1=en;break}V$1=e.return}}function jk(St){for(;V$1!==null;){var e=V$1;try{switch(e.tag){case 0:case 11:case 15:var en=e.return;try{Qj(4,e)}catch(dn){W$1(e,en,dn)}break;case 1:var tn=e.stateNode;if(typeof tn.componentDidMount=="function"){var nn=e.return;try{tn.componentDidMount()}catch(dn){W$1(e,nn,dn)}}var sn=e.return;try{Rj(e)}catch(dn){W$1(e,sn,dn)}break;case 5:var on=e.return;try{Rj(e)}catch(dn){W$1(e,on,dn)}}}catch(dn){W$1(e,e.return,dn)}if(e===St){V$1=null;break}var un=e.sibling;if(un!==null){un.return=e.return,V$1=un;break}V$1=e.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok$2=ua.ReactCurrentBatchConfig,K$1=0,Q$1=null,Y$1=null,Z$1=0,fj=0,ej=Uf(0),T$1=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R$1(){return K$1&6?B$1():Ak!==-1?Ak:Ak=B$1()}function yi(St){return St.mode&1?K$1&2&&Z$1!==0?Z$1&-Z$1:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(St=C$1,St!==0||(St=window.event,St=St===void 0?16:jd(St.type)),St):1}function gi(St,e,en,tn){if(50<yk)throw yk=0,zk=null,Error(p$1(185));Ac(St,en,tn),(!(K$1&2)||St!==Q$1)&&(St===Q$1&&(!(K$1&2)&&(qk|=en),T$1===4&&Ck(St,Z$1)),Dk(St,tn),en===1&&K$1===0&&!(e.mode&1)&&(Gj=B$1()+500,fg&&jg()))}function Dk(St,e){var en=St.callbackNode;wc(St,e);var tn=uc(St,St===Q$1?Z$1:0);if(tn===0)en!==null&&bc(en),St.callbackNode=null,St.callbackPriority=0;else if(e=tn&-tn,St.callbackPriority!==e){if(en!=null&&bc(en),e===1)St.tag===0?ig(Ek.bind(null,St)):hg(Ek.bind(null,St)),Jf(function(){!(K$1&6)&&jg()}),en=null;else{switch(Dc(tn)){case 1:en=fc;break;case 4:en=gc;break;case 16:en=hc;break;case 536870912:en=jc;break;default:en=hc}en=Fk(en,Gk.bind(null,St))}St.callbackPriority=e,St.callbackNode=en}}function Gk(St,e){if(Ak=-1,Bk=0,K$1&6)throw Error(p$1(327));var en=St.callbackNode;if(Hk()&&St.callbackNode!==en)return null;var tn=uc(St,St===Q$1?Z$1:0);if(tn===0)return null;if(tn&30||tn&St.expiredLanes||e)e=Ik(St,tn);else{e=tn;var nn=K$1;K$1|=2;var sn=Jk();(Q$1!==St||Z$1!==e)&&(uk=null,Gj=B$1()+500,Kk(St,e));do try{Lk();break}catch(un){Mk(St,un)}while(!0);$g(),mk.current=sn,K$1=nn,Y$1!==null?e=0:(Q$1=null,Z$1=0,e=T$1)}if(e!==0){if(e===2&&(nn=xc(St),nn!==0&&(tn=nn,e=Nk(St,nn))),e===1)throw en=pk,Kk(St,0),Ck(St,tn),Dk(St,B$1()),en;if(e===6)Ck(St,tn);else{if(nn=St.current.alternate,!(tn&30)&&!Ok(nn)&&(e=Ik(St,tn),e===2&&(sn=xc(St),sn!==0&&(tn=sn,e=Nk(St,sn))),e===1))throw en=pk,Kk(St,0),Ck(St,tn),Dk(St,B$1()),en;switch(St.finishedWork=nn,St.finishedLanes=tn,e){case 0:case 1:throw Error(p$1(345));case 2:Pk(St,tk,uk);break;case 3:if(Ck(St,tn),(tn&130023424)===tn&&(e=fk+500-B$1(),10<e)){if(uc(St,0)!==0)break;if(nn=St.suspendedLanes,(nn&tn)!==tn){R$1(),St.pingedLanes|=St.suspendedLanes&nn;break}St.timeoutHandle=Ff(Pk.bind(null,St,tk,uk),e);break}Pk(St,tk,uk);break;case 4:if(Ck(St,tn),(tn&4194240)===tn)break;for(e=St.eventTimes,nn=-1;0<tn;){var on=31-oc(tn);sn=1<<on,on=e[on],on>nn&&(nn=on),tn&=~sn}if(tn=nn,tn=B$1()-tn,tn=(120>tn?120:480>tn?480:1080>tn?1080:1920>tn?1920:3e3>tn?3e3:4320>tn?4320:1960*lk(tn/1960))-tn,10<tn){St.timeoutHandle=Ff(Pk.bind(null,St,tk,uk),tn);break}Pk(St,tk,uk);break;case 5:Pk(St,tk,uk);break;default:throw Error(p$1(329))}}}return Dk(St,B$1()),St.callbackNode===en?Gk.bind(null,St):null}function Nk(St,e){var en=sk;return St.current.memoizedState.isDehydrated&&(Kk(St,e).flags|=256),St=Ik(St,e),St!==2&&(e=tk,tk=en,e!==null&&Fj(e)),St}function Fj(St){tk===null?tk=St:tk.push.apply(tk,St)}function Ok(St){for(var e=St;;){if(e.flags&16384){var en=e.updateQueue;if(en!==null&&(en=en.stores,en!==null))for(var tn=0;tn<en.length;tn++){var nn=en[tn],sn=nn.getSnapshot;nn=nn.value;try{if(!He(sn(),nn))return!1}catch{return!1}}}if(en=e.child,e.subtreeFlags&16384&&en!==null)en.return=e,e=en;else{if(e===St)break;for(;e.sibling===null;){if(e.return===null||e.return===St)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ck(St,e){for(e&=~rk,e&=~qk,St.suspendedLanes|=e,St.pingedLanes&=~e,St=St.expirationTimes;0<e;){var en=31-oc(e),tn=1<<en;St[en]=-1,e&=~tn}}function Ek(St){if(K$1&6)throw Error(p$1(327));Hk();var e=uc(St,0);if(!(e&1))return Dk(St,B$1()),null;var en=Ik(St,e);if(St.tag!==0&&en===2){var tn=xc(St);tn!==0&&(e=tn,en=Nk(St,tn))}if(en===1)throw en=pk,Kk(St,0),Ck(St,e),Dk(St,B$1()),en;if(en===6)throw Error(p$1(345));return St.finishedWork=St.current.alternate,St.finishedLanes=e,Pk(St,tk,uk),Dk(St,B$1()),null}function Qk(St,e){var en=K$1;K$1|=1;try{return St(e)}finally{K$1=en,K$1===0&&(Gj=B$1()+500,fg&&jg())}}function Rk(St){wk!==null&&wk.tag===0&&!(K$1&6)&&Hk();var e=K$1;K$1|=1;var en=ok$2.transition,tn=C$1;try{if(ok$2.transition=null,C$1=1,St)return St()}finally{C$1=tn,ok$2.transition=en,K$1=e,!(K$1&6)&&jg()}}function Hj(){fj=ej.current,E$1(ej)}function Kk(St,e){St.finishedWork=null,St.finishedLanes=0;var en=St.timeoutHandle;if(en!==-1&&(St.timeoutHandle=-1,Gf(en)),Y$1!==null)for(en=Y$1.return;en!==null;){var tn=en;switch(wg(tn),tn.tag){case 1:tn=tn.type.childContextTypes,tn!=null&&$f();break;case 3:zh(),E$1(Wf),E$1(H$1),Eh();break;case 5:Bh(tn);break;case 4:zh();break;case 13:E$1(L$1);break;case 19:E$1(L$1);break;case 10:ah(tn.type._context);break;case 22:case 23:Hj()}en=en.return}if(Q$1=St,Y$1=St=Pg(St.current,null),Z$1=fj=e,T$1=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(e=0;e<fh.length;e++)if(en=fh[e],tn=en.interleaved,tn!==null){en.interleaved=null;var nn=tn.next,sn=en.pending;if(sn!==null){var on=sn.next;sn.next=nn,tn.next=on}en.pending=tn}fh=null}return St}function Mk(St,e){do{var en=Y$1;try{if($g(),Fh.current=Rh,Ih){for(var tn=M$1.memoizedState;tn!==null;){var nn=tn.queue;nn!==null&&(nn.pending=null),tn=tn.next}Ih=!1}if(Hh=0,O$1=N$1=M$1=null,Jh=!1,Kh=0,nk.current=null,en===null||en.return===null){T$1=1,pk=e,Y$1=null;break}e:{var sn=St,on=en.return,un=en,dn=e;if(e=Z$1,un.flags|=32768,dn!==null&&typeof dn=="object"&&typeof dn.then=="function"){var fn=dn,hn=un,an=hn.tag;if(!(hn.mode&1)&&(an===0||an===11||an===15)){var rn=hn.alternate;rn?(hn.updateQueue=rn.updateQueue,hn.memoizedState=rn.memoizedState,hn.lanes=rn.lanes):(hn.updateQueue=null,hn.memoizedState=null)}var cn=Ui(on);if(cn!==null){cn.flags&=-257,Vi(cn,on,un,sn,e),cn.mode&1&&Si(sn,fn,e),e=cn,dn=fn;var pn=e.updateQueue;if(pn===null){var mn=new Set;mn.add(dn),e.updateQueue=mn}else pn.add(dn);break e}else{if(!(e&1)){Si(sn,fn,e),tj();break e}dn=Error(p$1(426))}}else if(I$1&&un.mode&1){var xn=Ui(on);if(xn!==null){!(xn.flags&65536)&&(xn.flags|=256),Vi(xn,on,un,sn,e),Jg(Ji(dn,un));break e}}sn=dn=Ji(dn,un),T$1!==4&&(T$1=2),sk===null?sk=[sn]:sk.push(sn),sn=on;do{switch(sn.tag){case 3:sn.flags|=65536,e&=-e,sn.lanes|=e;var gn=Ni(sn,dn,e);ph(sn,gn);break e;case 1:un=dn;var yn=sn.type,bn=sn.stateNode;if(!(sn.flags&128)&&(typeof yn.getDerivedStateFromError=="function"||bn!==null&&typeof bn.componentDidCatch=="function"&&(Ri===null||!Ri.has(bn)))){sn.flags|=65536,e&=-e,sn.lanes|=e;var wn=Qi(sn,un,e);ph(sn,wn);break e}}sn=sn.return}while(sn!==null)}Sk(en)}catch(_n){e=_n,Y$1===en&&en!==null&&(Y$1=en=en.return);continue}break}while(!0)}function Jk(){var St=mk.current;return mk.current=Rh,St===null?Rh:St}function tj(){(T$1===0||T$1===3||T$1===2)&&(T$1=4),Q$1===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q$1,Z$1)}function Ik(St,e){var en=K$1;K$1|=2;var tn=Jk();(Q$1!==St||Z$1!==e)&&(uk=null,Kk(St,e));do try{Tk();break}catch(nn){Mk(St,nn)}while(!0);if($g(),K$1=en,mk.current=tn,Y$1!==null)throw Error(p$1(261));return Q$1=null,Z$1=0,T$1}function Tk(){for(;Y$1!==null;)Uk(Y$1)}function Lk(){for(;Y$1!==null&&!cc();)Uk(Y$1)}function Uk(St){var e=Vk(St.alternate,St,fj);St.memoizedProps=St.pendingProps,e===null?Sk(St):Y$1=e,nk.current=null}function Sk(St){var e=St;do{var en=e.alternate;if(St=e.return,e.flags&32768){if(en=Ij(en,e),en!==null){en.flags&=32767,Y$1=en;return}if(St!==null)St.flags|=32768,St.subtreeFlags=0,St.deletions=null;else{T$1=6,Y$1=null;return}}else if(en=Ej(en,e,fj),en!==null){Y$1=en;return}if(e=e.sibling,e!==null){Y$1=e;return}Y$1=e=St}while(e!==null);T$1===0&&(T$1=5)}function Pk(St,e,en){var tn=C$1,nn=ok$2.transition;try{ok$2.transition=null,C$1=1,Wk(St,e,en,tn)}finally{ok$2.transition=nn,C$1=tn}return null}function Wk(St,e,en,tn){do Hk();while(wk!==null);if(K$1&6)throw Error(p$1(327));en=St.finishedWork;var nn=St.finishedLanes;if(en===null)return null;if(St.finishedWork=null,St.finishedLanes=0,en===St.current)throw Error(p$1(177));St.callbackNode=null,St.callbackPriority=0;var sn=en.lanes|en.childLanes;if(Bc(St,sn),St===Q$1&&(Y$1=Q$1=null,Z$1=0),!(en.subtreeFlags&2064)&&!(en.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),sn=(en.flags&15990)!==0,en.subtreeFlags&15990||sn){sn=ok$2.transition,ok$2.transition=null;var on=C$1;C$1=1;var un=K$1;K$1|=4,nk.current=null,Oj(St,en),dk(en,St),Oe(Df),dd=!!Cf,Df=Cf=null,St.current=en,hk(en),dc(),K$1=un,C$1=on,ok$2.transition=sn}else St.current=en;if(vk&&(vk=!1,wk=St,xk=nn),sn=St.pendingLanes,sn===0&&(Ri=null),mc(en.stateNode),Dk(St,B$1()),e!==null)for(tn=St.onRecoverableError,en=0;en<e.length;en++)nn=e[en],tn(nn.value,{componentStack:nn.stack,digest:nn.digest});if(Oi)throw Oi=!1,St=Pi,Pi=null,St;return xk&1&&St.tag!==0&&Hk(),sn=St.pendingLanes,sn&1?St===zk?yk++:(yk=0,zk=St):yk=0,jg(),null}function Hk(){if(wk!==null){var St=Dc(xk),e=ok$2.transition,en=C$1;try{if(ok$2.transition=null,C$1=16>St?16:St,wk===null)var tn=!1;else{if(St=wk,wk=null,xk=0,K$1&6)throw Error(p$1(331));var nn=K$1;for(K$1|=4,V$1=St.current;V$1!==null;){var sn=V$1,on=sn.child;if(V$1.flags&16){var un=sn.deletions;if(un!==null){for(var dn=0;dn<un.length;dn++){var fn=un[dn];for(V$1=fn;V$1!==null;){var hn=V$1;switch(hn.tag){case 0:case 11:case 15:Pj(8,hn,sn)}var an=hn.child;if(an!==null)an.return=hn,V$1=an;else for(;V$1!==null;){hn=V$1;var rn=hn.sibling,cn=hn.return;if(Sj(hn),hn===fn){V$1=null;break}if(rn!==null){rn.return=cn,V$1=rn;break}V$1=cn}}}var pn=sn.alternate;if(pn!==null){var mn=pn.child;if(mn!==null){pn.child=null;do{var xn=mn.sibling;mn.sibling=null,mn=xn}while(mn!==null)}}V$1=sn}}if(sn.subtreeFlags&2064&&on!==null)on.return=sn,V$1=on;else e:for(;V$1!==null;){if(sn=V$1,sn.flags&2048)switch(sn.tag){case 0:case 11:case 15:Pj(9,sn,sn.return)}var gn=sn.sibling;if(gn!==null){gn.return=sn.return,V$1=gn;break e}V$1=sn.return}}var yn=St.current;for(V$1=yn;V$1!==null;){on=V$1;var bn=on.child;if(on.subtreeFlags&2064&&bn!==null)bn.return=on,V$1=bn;else e:for(on=yn;V$1!==null;){if(un=V$1,un.flags&2048)try{switch(un.tag){case 0:case 11:case 15:Qj(9,un)}}catch(_n){W$1(un,un.return,_n)}if(un===on){V$1=null;break e}var wn=un.sibling;if(wn!==null){wn.return=un.return,V$1=wn;break e}V$1=un.return}}if(K$1=nn,jg(),lc$1&&typeof lc$1.onPostCommitFiberRoot=="function")try{lc$1.onPostCommitFiberRoot(kc,St)}catch{}tn=!0}return tn}finally{C$1=en,ok$2.transition=e}}return!1}function Xk(St,e,en){e=Ji(en,e),e=Ni(St,e,1),St=nh(St,e,1),e=R$1(),St!==null&&(Ac(St,1,e),Dk(St,e))}function W$1(St,e,en){if(St.tag===3)Xk(St,St,en);else for(;e!==null;){if(e.tag===3){Xk(e,St,en);break}else if(e.tag===1){var tn=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof tn.componentDidCatch=="function"&&(Ri===null||!Ri.has(tn))){St=Ji(en,St),St=Qi(e,St,1),e=nh(e,St,1),St=R$1(),e!==null&&(Ac(e,1,St),Dk(e,St));break}}e=e.return}}function Ti(St,e,en){var tn=St.pingCache;tn!==null&&tn.delete(e),e=R$1(),St.pingedLanes|=St.suspendedLanes&en,Q$1===St&&(Z$1&en)===en&&(T$1===4||T$1===3&&(Z$1&130023424)===Z$1&&500>B$1()-fk?Kk(St,0):rk|=en),Dk(St,e)}function Yk(St,e){e===0&&(St.mode&1?(e=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):e=1);var en=R$1();St=ih(St,e),St!==null&&(Ac(St,e,en),Dk(St,en))}function uj(St){var e=St.memoizedState,en=0;e!==null&&(en=e.retryLane),Yk(St,en)}function bk(St,e){var en=0;switch(St.tag){case 13:var tn=St.stateNode,nn=St.memoizedState;nn!==null&&(en=nn.retryLane);break;case 19:tn=St.stateNode;break;default:throw Error(p$1(314))}tn!==null&&tn.delete(e),Yk(St,en)}var Vk;Vk=function(St,e,en){if(St!==null)if(St.memoizedProps!==e.pendingProps||Wf.current)dh=!0;else{if(!(St.lanes&en)&&!(e.flags&128))return dh=!1,yj(St,e,en);dh=!!(St.flags&131072)}else dh=!1,I$1&&e.flags&1048576&&ug(e,ng,e.index);switch(e.lanes=0,e.tag){case 2:var tn=e.type;ij(St,e),St=e.pendingProps;var nn=Yf(e,H$1.current);ch(e,en),nn=Nh(null,e,tn,St,nn,en);var sn=Sh();return e.flags|=1,typeof nn=="object"&&nn!==null&&typeof nn.render=="function"&&nn.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zf(tn)?(sn=!0,cg(e)):sn=!1,e.memoizedState=nn.state!==null&&nn.state!==void 0?nn.state:null,kh(e),nn.updater=Ei,e.stateNode=nn,nn._reactInternals=e,Ii(e,tn,St,en),e=jj(null,e,tn,!0,sn,en)):(e.tag=0,I$1&&sn&&vg(e),Xi(null,e,nn,en),e=e.child),e;case 16:tn=e.elementType;e:{switch(ij(St,e),St=e.pendingProps,nn=tn._init,tn=nn(tn._payload),e.type=tn,nn=e.tag=Zk(tn),St=Ci(tn,St),nn){case 0:e=cj(null,e,tn,St,en);break e;case 1:e=hj(null,e,tn,St,en);break e;case 11:e=Yi(null,e,tn,St,en);break e;case 14:e=$i(null,e,tn,Ci(tn.type,St),en);break e}throw Error(p$1(306,tn,""))}return e;case 0:return tn=e.type,nn=e.pendingProps,nn=e.elementType===tn?nn:Ci(tn,nn),cj(St,e,tn,nn,en);case 1:return tn=e.type,nn=e.pendingProps,nn=e.elementType===tn?nn:Ci(tn,nn),hj(St,e,tn,nn,en);case 3:e:{if(kj(e),St===null)throw Error(p$1(387));tn=e.pendingProps,sn=e.memoizedState,nn=sn.element,lh(St,e),qh(e,tn,null,en);var on=e.memoizedState;if(tn=on.element,sn.isDehydrated)if(sn={element:tn,isDehydrated:!1,cache:on.cache,pendingSuspenseBoundaries:on.pendingSuspenseBoundaries,transitions:on.transitions},e.updateQueue.baseState=sn,e.memoizedState=sn,e.flags&256){nn=Ji(Error(p$1(423)),e),e=lj(St,e,tn,en,nn);break e}else if(tn!==nn){nn=Ji(Error(p$1(424)),e),e=lj(St,e,tn,en,nn);break e}else for(yg=Lf(e.stateNode.containerInfo.firstChild),xg=e,I$1=!0,zg=null,en=Vg(e,null,tn,en),e.child=en;en;)en.flags=en.flags&-3|4096,en=en.sibling;else{if(Ig(),tn===nn){e=Zi(St,e,en);break e}Xi(St,e,tn,en)}e=e.child}return e;case 5:return Ah(e),St===null&&Eg(e),tn=e.type,nn=e.pendingProps,sn=St!==null?St.memoizedProps:null,on=nn.children,Ef(tn,nn)?on=null:sn!==null&&Ef(tn,sn)&&(e.flags|=32),gj(St,e),Xi(St,e,on,en),e.child;case 6:return St===null&&Eg(e),null;case 13:return oj(St,e,en);case 4:return yh(e,e.stateNode.containerInfo),tn=e.pendingProps,St===null?e.child=Ug(e,null,tn,en):Xi(St,e,tn,en),e.child;case 11:return tn=e.type,nn=e.pendingProps,nn=e.elementType===tn?nn:Ci(tn,nn),Yi(St,e,tn,nn,en);case 7:return Xi(St,e,e.pendingProps,en),e.child;case 8:return Xi(St,e,e.pendingProps.children,en),e.child;case 12:return Xi(St,e,e.pendingProps.children,en),e.child;case 10:e:{if(tn=e.type._context,nn=e.pendingProps,sn=e.memoizedProps,on=nn.value,G$1(Wg,tn._currentValue),tn._currentValue=on,sn!==null)if(He(sn.value,on)){if(sn.children===nn.children&&!Wf.current){e=Zi(St,e,en);break e}}else for(sn=e.child,sn!==null&&(sn.return=e);sn!==null;){var un=sn.dependencies;if(un!==null){on=sn.child;for(var dn=un.firstContext;dn!==null;){if(dn.context===tn){if(sn.tag===1){dn=mh(-1,en&-en),dn.tag=2;var fn=sn.updateQueue;if(fn!==null){fn=fn.shared;var hn=fn.pending;hn===null?dn.next=dn:(dn.next=hn.next,hn.next=dn),fn.pending=dn}}sn.lanes|=en,dn=sn.alternate,dn!==null&&(dn.lanes|=en),bh(sn.return,en,e),un.lanes|=en;break}dn=dn.next}}else if(sn.tag===10)on=sn.type===e.type?null:sn.child;else if(sn.tag===18){if(on=sn.return,on===null)throw Error(p$1(341));on.lanes|=en,un=on.alternate,un!==null&&(un.lanes|=en),bh(on,en,e),on=sn.sibling}else on=sn.child;if(on!==null)on.return=sn;else for(on=sn;on!==null;){if(on===e){on=null;break}if(sn=on.sibling,sn!==null){sn.return=on.return,on=sn;break}on=on.return}sn=on}Xi(St,e,nn.children,en),e=e.child}return e;case 9:return nn=e.type,tn=e.pendingProps.children,ch(e,en),nn=eh(nn),tn=tn(nn),e.flags|=1,Xi(St,e,tn,en),e.child;case 14:return tn=e.type,nn=Ci(tn,e.pendingProps),nn=Ci(tn.type,nn),$i(St,e,tn,nn,en);case 15:return bj(St,e,e.type,e.pendingProps,en);case 17:return tn=e.type,nn=e.pendingProps,nn=e.elementType===tn?nn:Ci(tn,nn),ij(St,e),e.tag=1,Zf(tn)?(St=!0,cg(e)):St=!1,ch(e,en),Gi(e,tn,nn),Ii(e,tn,nn,en),jj(null,e,tn,!0,St,en);case 19:return xj(St,e,en);case 22:return dj(St,e,en)}throw Error(p$1(156,e.tag))};function Fk(St,e){return ac(St,e)}function $k(St,e,en,tn){this.tag=St,this.key=en,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=tn,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(St,e,en,tn){return new $k(St,e,en,tn)}function aj(St){return St=St.prototype,!(!St||!St.isReactComponent)}function Zk(St){if(typeof St=="function")return aj(St)?1:0;if(St!=null){if(St=St.$$typeof,St===Da)return 11;if(St===Ga)return 14}return 2}function Pg(St,e){var en=St.alternate;return en===null?(en=Bg(St.tag,e,St.key,St.mode),en.elementType=St.elementType,en.type=St.type,en.stateNode=St.stateNode,en.alternate=St,St.alternate=en):(en.pendingProps=e,en.type=St.type,en.flags=0,en.subtreeFlags=0,en.deletions=null),en.flags=St.flags&14680064,en.childLanes=St.childLanes,en.lanes=St.lanes,en.child=St.child,en.memoizedProps=St.memoizedProps,en.memoizedState=St.memoizedState,en.updateQueue=St.updateQueue,e=St.dependencies,en.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},en.sibling=St.sibling,en.index=St.index,en.ref=St.ref,en}function Rg(St,e,en,tn,nn,sn){var on=2;if(tn=St,typeof St=="function")aj(St)&&(on=1);else if(typeof St=="string")on=5;else e:switch(St){case ya:return Tg(en.children,nn,sn,e);case za:on=8,nn|=8;break;case Aa:return St=Bg(12,en,e,nn|2),St.elementType=Aa,St.lanes=sn,St;case Ea:return St=Bg(13,en,e,nn),St.elementType=Ea,St.lanes=sn,St;case Fa:return St=Bg(19,en,e,nn),St.elementType=Fa,St.lanes=sn,St;case Ia:return pj(en,nn,sn,e);default:if(typeof St=="object"&&St!==null)switch(St.$$typeof){case Ba:on=10;break e;case Ca:on=9;break e;case Da:on=11;break e;case Ga:on=14;break e;case Ha:on=16,tn=null;break e}throw Error(p$1(130,St==null?St:typeof St,""))}return e=Bg(on,en,e,nn),e.elementType=St,e.type=tn,e.lanes=sn,e}function Tg(St,e,en,tn){return St=Bg(7,St,tn,e),St.lanes=en,St}function pj(St,e,en,tn){return St=Bg(22,St,tn,e),St.elementType=Ia,St.lanes=en,St.stateNode={isHidden:!1},St}function Qg(St,e,en){return St=Bg(6,St,null,e),St.lanes=en,St}function Sg(St,e,en){return e=Bg(4,St.children!==null?St.children:[],St.key,e),e.lanes=en,e.stateNode={containerInfo:St.containerInfo,pendingChildren:null,implementation:St.implementation},e}function al(St,e,en,tn,nn){this.tag=e,this.containerInfo=St,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=tn,this.onRecoverableError=nn,this.mutableSourceEagerHydrationData=null}function bl(St,e,en,tn,nn,sn,on,un,dn){return St=new al(St,e,en,un,dn),e===1?(e=1,sn===!0&&(e|=8)):e=0,sn=Bg(3,null,null,e),St.current=sn,sn.stateNode=St,sn.memoizedState={element:tn,isDehydrated:en,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(sn),St}function cl(St,e,en){var tn=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:tn==null?null:""+tn,children:St,containerInfo:e,implementation:en}}function dl(St){if(!St)return Vf;St=St._reactInternals;e:{if(Vb(St)!==St||St.tag!==1)throw Error(p$1(170));var e=St;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zf(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(p$1(171))}if(St.tag===1){var en=St.type;if(Zf(en))return bg(St,en,e)}return e}function el(St,e,en,tn,nn,sn,on,un,dn){return St=bl(en,tn,!0,St,nn,sn,on,un,dn),St.context=dl(null),en=St.current,tn=R$1(),nn=yi(en),sn=mh(tn,nn),sn.callback=e??null,nh(en,sn,nn),St.current.lanes=nn,Ac(St,nn,tn),Dk(St,tn),St}function fl$1(St,e,en,tn){var nn=e.current,sn=R$1(),on=yi(nn);return en=dl(en),e.context===null?e.context=en:e.pendingContext=en,e=mh(sn,on),e.payload={element:St},tn=tn===void 0?null:tn,tn!==null&&(e.callback=tn),St=nh(nn,e,on),St!==null&&(gi(St,nn,on,sn),oh(St,nn,on)),on}function gl(St){if(St=St.current,!St.child)return null;switch(St.child.tag){case 5:return St.child.stateNode;default:return St.child.stateNode}}function hl(St,e){if(St=St.memoizedState,St!==null&&St.dehydrated!==null){var en=St.retryLane;St.retryLane=en!==0&&en<e?en:e}}function il(St,e){hl(St,e),(St=St.alternate)&&hl(St,e)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(St){console.error(St)};function ll(St){this._internalRoot=St}ml.prototype.render=ll.prototype.render=function(St){var e=this._internalRoot;if(e===null)throw Error(p$1(409));fl$1(St,e,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var St=this._internalRoot;if(St!==null){this._internalRoot=null;var e=St.containerInfo;Rk(function(){fl$1(null,St,null,null)}),e[uf]=null}};function ml(St){this._internalRoot=St}ml.prototype.unstable_scheduleHydration=function(St){if(St){var e=Hc();St={blockedOn:null,target:St,priority:e};for(var en=0;en<Qc.length&&e!==0&&e<Qc[en].priority;en++);Qc.splice(en,0,St),en===0&&Vc(St)}};function nl(St){return!(!St||St.nodeType!==1&&St.nodeType!==9&&St.nodeType!==11)}function ol(St){return!(!St||St.nodeType!==1&&St.nodeType!==9&&St.nodeType!==11&&(St.nodeType!==8||St.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(St,e,en,tn,nn){if(nn){if(typeof tn=="function"){var sn=tn;tn=function(){var fn=gl(on);sn.call(fn)}}var on=el(e,tn,St,0,null,!1,!1,"",pl);return St._reactRootContainer=on,St[uf]=on.current,sf(St.nodeType===8?St.parentNode:St),Rk(),on}for(;nn=St.lastChild;)St.removeChild(nn);if(typeof tn=="function"){var un=tn;tn=function(){var fn=gl(dn);un.call(fn)}}var dn=bl(St,0,!1,null,null,!1,!1,"",pl);return St._reactRootContainer=dn,St[uf]=dn.current,sf(St.nodeType===8?St.parentNode:St),Rk(function(){fl$1(e,dn,en,tn)}),dn}function rl(St,e,en,tn,nn){var sn=en._reactRootContainer;if(sn){var on=sn;if(typeof nn=="function"){var un=nn;nn=function(){var dn=gl(on);un.call(dn)}}fl$1(e,on,St,nn)}else on=ql(en,e,St,nn,tn);return gl(on)}Ec=function(St){switch(St.tag){case 3:var e=St.stateNode;if(e.current.memoizedState.isDehydrated){var en=tc(e.pendingLanes);en!==0&&(Cc(e,en|1),Dk(e,B$1()),!(K$1&6)&&(Gj=B$1()+500,jg()))}break;case 13:Rk(function(){var tn=ih(St,1);if(tn!==null){var nn=R$1();gi(tn,St,1,nn)}}),il(St,1)}};Fc=function(St){if(St.tag===13){var e=ih(St,134217728);if(e!==null){var en=R$1();gi(e,St,134217728,en)}il(St,134217728)}};Gc=function(St){if(St.tag===13){var e=yi(St),en=ih(St,e);if(en!==null){var tn=R$1();gi(en,St,e,tn)}il(St,e)}};Hc=function(){return C$1};Ic=function(St,e){var en=C$1;try{return C$1=St,e()}finally{C$1=en}};yb=function(St,e,en){switch(e){case"input":if(bb(St,en),e=en.name,en.type==="radio"&&e!=null){for(en=St;en.parentNode;)en=en.parentNode;for(en=en.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<en.length;e++){var tn=en[e];if(tn!==St&&tn.form===St.form){var nn=Db(tn);if(!nn)throw Error(p$1(90));Wa(tn),bb(tn,nn)}}}break;case"textarea":ib(St,en);break;case"select":e=en.value,e!=null&&fb(St,!!en.multiple,e,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue$1,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(St){return St=Zb(St),St===null?null:St.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc$1=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(St,e){var en=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(e))throw Error(p$1(200));return cl(St,e,null,en)};reactDom_production_min.createRoot=function(St,e){if(!nl(St))throw Error(p$1(299));var en=!1,tn="",nn=kl;return e!=null&&(e.unstable_strictMode===!0&&(en=!0),e.identifierPrefix!==void 0&&(tn=e.identifierPrefix),e.onRecoverableError!==void 0&&(nn=e.onRecoverableError)),e=bl(St,1,!1,null,null,en,!1,tn,nn),St[uf]=e.current,sf(St.nodeType===8?St.parentNode:St),new ll(e)};reactDom_production_min.findDOMNode=function(St){if(St==null)return null;if(St.nodeType===1)return St;var e=St._reactInternals;if(e===void 0)throw typeof St.render=="function"?Error(p$1(188)):(St=Object.keys(St).join(","),Error(p$1(268,St)));return St=Zb(e),St=St===null?null:St.stateNode,St};reactDom_production_min.flushSync=function(St){return Rk(St)};reactDom_production_min.hydrate=function(St,e,en){if(!ol(e))throw Error(p$1(200));return rl(null,St,e,!0,en)};reactDom_production_min.hydrateRoot=function(St,e,en){if(!nl(St))throw Error(p$1(405));var tn=en!=null&&en.hydratedSources||null,nn=!1,sn="",on=kl;if(en!=null&&(en.unstable_strictMode===!0&&(nn=!0),en.identifierPrefix!==void 0&&(sn=en.identifierPrefix),en.onRecoverableError!==void 0&&(on=en.onRecoverableError)),e=el(e,null,St,1,en??null,nn,!1,sn,on),St[uf]=e.current,sf(St),tn)for(St=0;St<tn.length;St++)en=tn[St],nn=en._getVersion,nn=nn(en._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[en,nn]:e.mutableSourceEagerHydrationData.push(en,nn);return new ml(e)};reactDom_production_min.render=function(St,e,en){if(!ol(e))throw Error(p$1(200));return rl(null,St,e,!1,en)};reactDom_production_min.unmountComponentAtNode=function(St){if(!ol(St))throw Error(p$1(40));return St._reactRootContainer?(Rk(function(){rl(null,null,St,!1,function(){St._reactRootContainer=null,St[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(St,e,en,tn){if(!ol(en))throw Error(p$1(200));if(St==null||St._reactInternals===void 0)throw Error(p$1(38));return rl(St,e,en,!1,tn)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(St){console.error(St)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,m$1=reactDomExports;client.createRoot=m$1.createRoot,client.hydrateRoot=m$1.hydrateRoot;/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var PopStateEventType="popstate";function createHashHistory(St={}){function e(nn,sn){let{pathname:on="/",search:un="",hash:dn=""}=parsePath(nn.location.hash.substring(1));return!on.startsWith("/")&&!on.startsWith(".")&&(on="/"+on),createLocation("",{pathname:on,search:un,hash:dn},sn.state&&sn.state.usr||null,sn.state&&sn.state.key||"default")}function en(nn,sn){let on=nn.document.querySelector("base"),un="";if(on&&on.getAttribute("href")){let dn=nn.location.href,fn=dn.indexOf("#");un=fn===-1?dn:dn.slice(0,fn)}return un+"#"+(typeof sn=="string"?sn:createPath(sn))}function tn(nn,sn){warning(nn.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(sn)})`)}return getUrlBasedHistory(e,en,tn,St)}function invariant(St,e){if(St===!1||St===null||typeof St>"u")throw new Error(e)}function warning(St,e){if(!St){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(St,e){return{usr:St.state,key:St.key,idx:e}}function createLocation(St,e,en=null,tn){return{pathname:typeof St=="string"?St:St.pathname,search:"",hash:"",...typeof e=="string"?parsePath(e):e,state:en,key:e&&e.key||tn||createKey()}}function createPath({pathname:St="/",search:e="",hash:en=""}){return e&&e!=="?"&&(St+=e.charAt(0)==="?"?e:"?"+e),en&&en!=="#"&&(St+=en.charAt(0)==="#"?en:"#"+en),St}function parsePath(St){let e={};if(St){let en=St.indexOf("#");en>=0&&(e.hash=St.substring(en),St=St.substring(0,en));let tn=St.indexOf("?");tn>=0&&(e.search=St.substring(tn),St=St.substring(0,tn)),St&&(e.pathname=St)}return e}function getUrlBasedHistory(St,e,en,tn={}){let{window:nn=document.defaultView,v5Compat:sn=!1}=tn,on=nn.history,un="POP",dn=null,fn=hn();fn==null&&(fn=0,on.replaceState({...on.state,idx:fn},""));function hn(){return(on.state||{idx:null}).idx}function an(){un="POP";let xn=hn(),gn=xn==null?null:xn-fn;fn=xn,dn&&dn({action:un,location:mn.location,delta:gn})}function rn(xn,gn){un="PUSH";let yn=createLocation(mn.location,xn,gn);en&&en(yn,xn),fn=hn()+1;let bn=getHistoryState(yn,fn),wn=mn.createHref(yn);try{on.pushState(bn,"",wn)}catch(_n){if(_n instanceof DOMException&&_n.name==="DataCloneError")throw _n;nn.location.assign(wn)}sn&&dn&&dn({action:un,location:mn.location,delta:1})}function cn(xn,gn){un="REPLACE";let yn=createLocation(mn.location,xn,gn);en&&en(yn,xn),fn=hn();let bn=getHistoryState(yn,fn),wn=mn.createHref(yn);on.replaceState(bn,"",wn),sn&&dn&&dn({action:un,location:mn.location,delta:0})}function pn(xn){return createBrowserURLImpl(xn)}let mn={get action(){return un},get location(){return St(nn,on)},listen(xn){if(dn)throw new Error("A history only accepts one active listener");return nn.addEventListener(PopStateEventType,an),dn=xn,()=>{nn.removeEventListener(PopStateEventType,an),dn=null}},createHref(xn){return e(nn,xn)},createURL:pn,encodeLocation(xn){let gn=pn(xn);return{pathname:gn.pathname,search:gn.search,hash:gn.hash}},push:rn,replace:cn,go(xn){return on.go(xn)}};return mn}function createBrowserURLImpl(St,e=!1){let en="http://localhost";typeof window<"u"&&(en=window.location.origin!=="null"?window.location.origin:window.location.href),invariant(en,"No window.location.(origin|href) available to create URL");let tn=typeof St=="string"?St:createPath(St);return tn=tn.replace(/ $/,"%20"),!e&&tn.startsWith("//")&&(tn=en+tn),new URL(tn,en)}function matchRoutes(St,e,en="/"){return matchRoutesImpl(St,e,en,!1)}function matchRoutesImpl(St,e,en,tn){let nn=typeof e=="string"?parsePath(e):e,sn=stripBasename(nn.pathname||"/",en);if(sn==null)return null;let on=flattenRoutes(St);rankRouteBranches(on);let un=null;for(let dn=0;un==null&&dn<on.length;++dn){let fn=decodePath(sn);un=matchRouteBranch(on[dn],fn,tn)}return un}function flattenRoutes(St,e=[],en=[],tn="",nn=!1){let sn=(on,un,dn=nn,fn)=>{let hn={relativePath:fn===void 0?on.path||"":fn,caseSensitive:on.caseSensitive===!0,childrenIndex:un,route:on};if(hn.relativePath.startsWith("/")){if(!hn.relativePath.startsWith(tn)&&dn)return;invariant(hn.relativePath.startsWith(tn),`Absolute route path "${hn.relativePath}" nested under path "${tn}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),hn.relativePath=hn.relativePath.slice(tn.length)}let an=joinPaths([tn,hn.relativePath]),rn=en.concat(hn);on.children&&on.children.length>0&&(invariant(on.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${an}".`),flattenRoutes(on.children,e,rn,an,dn)),!(on.path==null&&!on.index)&&e.push({path:an,score:computeScore(an,on.index),routesMeta:rn})};return St.forEach((on,un)=>{var dn;if(on.path===""||!((dn=on.path)!=null&&dn.includes("?")))sn(on,un);else for(let fn of explodeOptionalSegments(on.path))sn(on,un,!0,fn)}),e}function explodeOptionalSegments(St){let e=St.split("/");if(e.length===0)return[];let[en,...tn]=e,nn=en.endsWith("?"),sn=en.replace(/\?$/,"");if(tn.length===0)return nn?[sn,""]:[sn];let on=explodeOptionalSegments(tn.join("/")),un=[];return un.push(...on.map(dn=>dn===""?sn:[sn,dn].join("/"))),nn&&un.push(...on),un.map(dn=>St.startsWith("/")&&dn===""?"/":dn)}function rankRouteBranches(St){St.sort((e,en)=>e.score!==en.score?en.score-e.score:compareIndexes(e.routesMeta.map(tn=>tn.childrenIndex),en.routesMeta.map(tn=>tn.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=St=>St==="*";function computeScore(St,e){let en=St.split("/"),tn=en.length;return en.some(isSplat)&&(tn+=splatPenalty),e&&(tn+=indexRouteValue),en.filter(nn=>!isSplat(nn)).reduce((nn,sn)=>nn+(paramRe.test(sn)?dynamicSegmentValue:sn===""?emptySegmentValue:staticSegmentValue),tn)}function compareIndexes(St,e){return St.length===e.length&&St.slice(0,-1).every((tn,nn)=>tn===e[nn])?St[St.length-1]-e[e.length-1]:0}function matchRouteBranch(St,e,en=!1){let{routesMeta:tn}=St,nn={},sn="/",on=[];for(let un=0;un<tn.length;++un){let dn=tn[un],fn=un===tn.length-1,hn=sn==="/"?e:e.slice(sn.length)||"/",an=matchPath({path:dn.relativePath,caseSensitive:dn.caseSensitive,end:fn},hn),rn=dn.route;if(!an&&fn&&en&&!tn[tn.length-1].route.index&&(an=matchPath({path:dn.relativePath,caseSensitive:dn.caseSensitive,end:!1},hn)),!an)return null;Object.assign(nn,an.params),on.push({params:nn,pathname:joinPaths([sn,an.pathname]),pathnameBase:normalizePathname(joinPaths([sn,an.pathnameBase])),route:rn}),an.pathnameBase!=="/"&&(sn=joinPaths([sn,an.pathnameBase]))}return on}function matchPath(St,e){typeof St=="string"&&(St={path:St,caseSensitive:!1,end:!0});let[en,tn]=compilePath(St.path,St.caseSensitive,St.end),nn=e.match(en);if(!nn)return null;let sn=nn[0],on=sn.replace(/(.)\/+$/,"$1"),un=nn.slice(1);return{params:tn.reduce((fn,{paramName:hn,isOptional:an},rn)=>{if(hn==="*"){let pn=un[rn]||"";on=sn.slice(0,sn.length-pn.length).replace(/(.)\/+$/,"$1")}const cn=un[rn];return an&&!cn?fn[hn]=void 0:fn[hn]=(cn||"").replace(/%2F/g,"/"),fn},{}),pathname:sn,pathnameBase:on,pattern:St}}function compilePath(St,e=!1,en=!0){warning(St==="*"||!St.endsWith("*")||St.endsWith("/*"),`Route path "${St}" will be treated as if it were "${St.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${St.replace(/\*$/,"/*")}".`);let tn=[],nn="^"+St.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(on,un,dn)=>(tn.push({paramName:un,isOptional:dn!=null}),dn?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return St.endsWith("*")?(tn.push({paramName:"*"}),nn+=St==="*"||St==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):en?nn+="\\/*$":St!==""&&St!=="/"&&(nn+="(?:(?=\\/|$))"),[new RegExp(nn,e?void 0:"i"),tn]}function decodePath(St){try{return St.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return warning(!1,`The URL path "${St}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),St}}function stripBasename(St,e){if(e==="/")return St;if(!St.toLowerCase().startsWith(e.toLowerCase()))return null;let en=e.endsWith("/")?e.length-1:e.length,tn=St.charAt(en);return tn&&tn!=="/"?null:St.slice(en)||"/"}var ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,isAbsoluteUrl=St=>ABSOLUTE_URL_REGEX.test(St);function resolvePath(St,e="/"){let{pathname:en,search:tn="",hash:nn=""}=typeof St=="string"?parsePath(St):St,sn;if(en)if(isAbsoluteUrl(en))sn=en;else{if(en.includes("//")){let on=en;en=en.replace(/\/\/+/g,"/"),warning(!1,`Pathnames cannot have embedded double slashes - normalizing ${on} -> ${en}`)}en.startsWith("/")?sn=resolvePathname(en.substring(1),"/"):sn=resolvePathname(en,e)}else sn=e;return{pathname:sn,search:normalizeSearch(tn),hash:normalizeHash(nn)}}function resolvePathname(St,e){let en=e.replace(/\/+$/,"").split("/");return St.split("/").forEach(nn=>{nn===".."?en.length>1&&en.pop():nn!=="."&&en.push(nn)}),en.length>1?en.join("/"):"/"}function getInvalidPathError(St,e,en,tn){return`Cannot include a '${St}' character in a manually specified \`to.${e}\` field [${JSON.stringify(tn)}].  Please separate it out to the \`to.${en}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(St){return St.filter((e,en)=>en===0||e.route.path&&e.route.path.length>0)}function getResolveToMatches(St){let e=getPathContributingMatches(St);return e.map((en,tn)=>tn===e.length-1?en.pathname:en.pathnameBase)}function resolveTo(St,e,en,tn=!1){let nn;typeof St=="string"?nn=parsePath(St):(nn={...St},invariant(!nn.pathname||!nn.pathname.includes("?"),getInvalidPathError("?","pathname","search",nn)),invariant(!nn.pathname||!nn.pathname.includes("#"),getInvalidPathError("#","pathname","hash",nn)),invariant(!nn.search||!nn.search.includes("#"),getInvalidPathError("#","search","hash",nn)));let sn=St===""||nn.pathname==="",on=sn?"/":nn.pathname,un;if(on==null)un=en;else{let an=e.length-1;if(!tn&&on.startsWith("..")){let rn=on.split("/");for(;rn[0]==="..";)rn.shift(),an-=1;nn.pathname=rn.join("/")}un=an>=0?e[an]:"/"}let dn=resolvePath(nn,un),fn=on&&on!=="/"&&on.endsWith("/"),hn=(sn||on===".")&&en.endsWith("/");return!dn.pathname.endsWith("/")&&(fn||hn)&&(dn.pathname+="/"),dn}var joinPaths=St=>St.join("/").replace(/\/\/+/g,"/"),normalizePathname=St=>St.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=St=>!St||St==="?"?"":St.startsWith("?")?St:"?"+St,normalizeHash=St=>!St||St==="#"?"":St.startsWith("#")?St:"#"+St;function isRouteErrorResponse(St){return St!=null&&typeof St.status=="number"&&typeof St.statusText=="string"&&typeof St.internal=="boolean"&&"data"in St}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"];new Set(validMutationMethodsArr);var validRequestMethodsArr=["GET",...validMutationMethodsArr];new Set(validRequestMethodsArr);var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";reactExports.createContext(!1);var ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";function useHref(St,{relative:e}={}){invariant(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:en,navigator:tn}=reactExports.useContext(NavigationContext),{hash:nn,pathname:sn,search:on}=useResolvedPath(St,{relative:e}),un=sn;return en!=="/"&&(un=sn==="/"?en:joinPaths([en,sn])),tn.createHref({pathname:un,search:on,hash:nn})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect(St){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(St)}function useNavigate(){let{isDataRoute:St}=reactExports.useContext(RouteContext);return St?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let St=reactExports.useContext(DataRouterContext),{basename:e,navigator:en}=reactExports.useContext(NavigationContext),{matches:tn}=reactExports.useContext(RouteContext),{pathname:nn}=useLocation(),sn=JSON.stringify(getResolveToMatches(tn)),on=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{on.current=!0}),reactExports.useCallback((dn,fn={})=>{if(warning(on.current,navigateEffectWarning),!on.current)return;if(typeof dn=="number"){en.go(dn);return}let hn=resolveTo(dn,JSON.parse(sn),nn,fn.relative==="path");St==null&&e!=="/"&&(hn.pathname=hn.pathname==="/"?e:joinPaths([e,hn.pathname])),(fn.replace?en.replace:en.push)(hn,fn.state,fn)},[e,en,sn,nn,St])}reactExports.createContext(null);function useResolvedPath(St,{relative:e}={}){let{matches:en}=reactExports.useContext(RouteContext),{pathname:tn}=useLocation(),nn=JSON.stringify(getResolveToMatches(en));return reactExports.useMemo(()=>resolveTo(St,JSON.parse(nn),tn,e==="path"),[St,nn,tn,e])}function useRoutesImpl(St,e,en,tn,nn){invariant(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:sn}=reactExports.useContext(NavigationContext),{matches:on}=reactExports.useContext(RouteContext),un=on[on.length-1],dn=un?un.params:{},fn=un?un.pathname:"/",hn=un?un.pathnameBase:"/",an=un&&un.route;{let yn=an&&an.path||"";warningOnce(fn,!an||yn.endsWith("*")||yn.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${fn}" (under <Route path="${yn}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${yn}"> to <Route path="${yn==="/"?"*":`${yn}/*`}">.`)}let rn=useLocation(),cn;cn=rn;let pn=cn.pathname||"/",mn=pn;if(hn!=="/"){let yn=hn.replace(/^\//,"").split("/");mn="/"+pn.replace(/^\//,"").split("/").slice(yn.length).join("/")}let xn=matchRoutes(St,{pathname:mn});return warning(an||xn!=null,`No routes matched location "${cn.pathname}${cn.search}${cn.hash}" `),warning(xn==null||xn[xn.length-1].route.element!==void 0||xn[xn.length-1].route.Component!==void 0||xn[xn.length-1].route.lazy!==void 0,`Matched leaf route at location "${cn.pathname}${cn.search}${cn.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),_renderMatches(xn&&xn.map(yn=>Object.assign({},yn,{params:Object.assign({},dn,yn.params),pathname:joinPaths([hn,sn.encodeLocation?sn.encodeLocation(yn.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:yn.pathname]),pathnameBase:yn.pathnameBase==="/"?hn:joinPaths([hn,sn.encodeLocation?sn.encodeLocation(yn.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:yn.pathnameBase])})),on,en,tn,nn)}function DefaultErrorComponent(){let St=useRouteError(),e=isRouteErrorResponse(St)?`${St.status} ${St.statusText}`:St instanceof Error?St.message:JSON.stringify(St),en=St instanceof Error?St.stack:null,tn="rgba(200,200,200, 0.5)",nn={padding:"0.5rem",backgroundColor:tn},sn={padding:"2px 4px",backgroundColor:tn},on=null;return console.error("Error handled by React Router default ErrorBoundary:",St),on=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null," Hey developer "),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:sn},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:sn},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},e),en?reactExports.createElement("pre",{style:nn},en):null,on)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(St){super(St),this.state={location:St.location,revalidation:St.revalidation,error:St.error}}static getDerivedStateFromError(St){return{error:St}}static getDerivedStateFromProps(St,e){return e.location!==St.location||e.revalidation!=="idle"&&St.revalidation==="idle"?{error:St.error,location:St.location,revalidation:St.revalidation}:{error:St.error!==void 0?St.error:e.error,location:e.location,revalidation:St.revalidation||e.revalidation}}componentDidCatch(St,e){this.props.onError?this.props.onError(St,e):console.error("React Router caught the following error during render",St)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RenderedRoute({routeContext:St,match:e,children:en}){let tn=reactExports.useContext(DataRouterContext);return tn&&tn.static&&tn.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(tn.staticContext._deepestRenderedBoundaryId=e.route.id),reactExports.createElement(RouteContext.Provider,{value:St},en)}function _renderMatches(St,e=[],en=null,tn=null,nn=null){if(St==null){if(!en)return null;if(en.errors)St=en.matches;else if(e.length===0&&!en.initialized&&en.matches.length>0)St=en.matches;else return null}let sn=St,on=en==null?void 0:en.errors;if(on!=null){let hn=sn.findIndex(an=>an.route.id&&(on==null?void 0:on[an.route.id])!==void 0);invariant(hn>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(on).join(",")}`),sn=sn.slice(0,Math.min(sn.length,hn+1))}let un=!1,dn=-1;if(en)for(let hn=0;hn<sn.length;hn++){let an=sn[hn];if((an.route.HydrateFallback||an.route.hydrateFallbackElement)&&(dn=hn),an.route.id){let{loaderData:rn,errors:cn}=en,pn=an.route.loader&&!rn.hasOwnProperty(an.route.id)&&(!cn||cn[an.route.id]===void 0);if(an.route.lazy||pn){un=!0,dn>=0?sn=sn.slice(0,dn+1):sn=[sn[0]];break}}}let fn=en&&tn?(hn,an)=>{var rn,cn;tn(hn,{location:en.location,params:((cn=(rn=en.matches)==null?void 0:rn[0])==null?void 0:cn.params)??{},errorInfo:an})}:void 0;return sn.reduceRight((hn,an,rn)=>{let cn,pn=!1,mn=null,xn=null;en&&(cn=on&&an.route.id?on[an.route.id]:void 0,mn=an.route.errorElement||defaultErrorElement,un&&(dn<0&&rn===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),pn=!0,xn=null):dn===rn&&(pn=!0,xn=an.route.hydrateFallbackElement||null)));let gn=e.concat(sn.slice(0,rn+1)),yn=()=>{let bn;return cn?bn=mn:pn?bn=xn:an.route.Component?bn=reactExports.createElement(an.route.Component,null):an.route.element?bn=an.route.element:bn=hn,reactExports.createElement(RenderedRoute,{match:an,routeContext:{outlet:hn,matches:gn,isDataRoute:en!=null},children:bn})};return en&&(an.route.ErrorBoundary||an.route.errorElement||rn===0)?reactExports.createElement(RenderErrorBoundary,{location:en.location,revalidation:en.revalidation,component:mn,error:cn,children:yn(),routeContext:{outlet:null,matches:gn,isDataRoute:!0},onError:fn}):yn()},null)}function getDataRouterConsoleError(St){return`${St} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(St){let e=reactExports.useContext(DataRouterContext);return invariant(e,getDataRouterConsoleError(St)),e}function useDataRouterState(St){let e=reactExports.useContext(DataRouterStateContext);return invariant(e,getDataRouterConsoleError(St)),e}function useRouteContext(St){let e=reactExports.useContext(RouteContext);return invariant(e,getDataRouterConsoleError(St)),e}function useCurrentRouteId(St){let e=useRouteContext(St),en=e.matches[e.matches.length-1];return invariant(en.route.id,`${St} can only be used on routes that contain a unique "id"`),en.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){var tn;let St=reactExports.useContext(RouteErrorContext),e=useDataRouterState("useRouteError"),en=useCurrentRouteId("useRouteError");return St!==void 0?St:(tn=e.errors)==null?void 0:tn[en]}function useNavigateStable(){let{router:St}=useDataRouterContext("useNavigate"),e=useCurrentRouteId("useNavigate"),en=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{en.current=!0}),reactExports.useCallback(async(nn,sn={})=>{warning(en.current,navigateEffectWarning),en.current&&(typeof nn=="number"?St.navigate(nn):await St.navigate(nn,{fromRouteId:e,...sn}))},[St,e])}var alreadyWarned={};function warningOnce(St,e,en){!e&&!alreadyWarned[St]&&(alreadyWarned[St]=!0,warning(!1,en))}reactExports.memo(DataRoutes);function DataRoutes({routes:St,future:e,state:en,unstable_onError:tn}){return useRoutesImpl(St,void 0,en,tn,e)}function Router({basename:St="/",children:e=null,location:en,navigationType:tn="POP",navigator:nn,static:sn=!1}){invariant(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let on=St.replace(/^\/*/,"/"),un=reactExports.useMemo(()=>({basename:on,navigator:nn,static:sn,future:{}}),[on,nn,sn]);typeof en=="string"&&(en=parsePath(en));let{pathname:dn="/",search:fn="",hash:hn="",state:an=null,key:rn="default"}=en,cn=reactExports.useMemo(()=>{let pn=stripBasename(dn,on);return pn==null?null:{location:{pathname:pn,search:fn,hash:hn,state:an,key:rn},navigationType:tn}},[on,dn,fn,hn,an,rn,tn]);return warning(cn!=null,`<Router basename="${on}"> is not able to match the URL "${dn}${fn}${hn}" because it does not start with the basename, so the <Router> won't render anything.`),cn==null?null:reactExports.createElement(NavigationContext.Provider,{value:un},reactExports.createElement(LocationContext.Provider,{children:e,value:cn}))}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(St){return St!=null&&typeof St.tagName=="string"}function isButtonElement(St){return isHtmlElement(St)&&St.tagName.toLowerCase()==="button"}function isFormElement(St){return isHtmlElement(St)&&St.tagName.toLowerCase()==="form"}function isInputElement(St){return isHtmlElement(St)&&St.tagName.toLowerCase()==="input"}function isModifiedEvent(St){return!!(St.metaKey||St.altKey||St.ctrlKey||St.shiftKey)}function shouldProcessLinkClick(St,e){return St.button===0&&(!e||e==="_self")&&!isModifiedEvent(St)}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(St){return St!=null&&!supportedFormEncTypes.has(St)?(warning(!1,`"${St}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):St}function getFormSubmissionInfo(St,e){let en,tn,nn,sn,on;if(isFormElement(St)){let un=St.getAttribute("action");tn=un?stripBasename(un,e):null,en=St.getAttribute("method")||defaultMethod,nn=getFormEncType(St.getAttribute("enctype"))||defaultEncType,sn=new FormData(St)}else if(isButtonElement(St)||isInputElement(St)&&(St.type==="submit"||St.type==="image")){let un=St.form;if(un==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let dn=St.getAttribute("formaction")||un.getAttribute("action");if(tn=dn?stripBasename(dn,e):null,en=St.getAttribute("formmethod")||un.getAttribute("method")||defaultMethod,nn=getFormEncType(St.getAttribute("formenctype"))||getFormEncType(un.getAttribute("enctype"))||defaultEncType,sn=new FormData(un,St),!isFormDataSubmitterSupported()){let{name:fn,type:hn,value:an}=St;if(hn==="image"){let rn=fn?`${fn}.`:"";sn.append(`${rn}x`,"0"),sn.append(`${rn}y`,"0")}else fn&&sn.append(fn,an)}}else{if(isHtmlElement(St))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');en=defaultMethod,tn=null,nn=defaultEncType,on=St}return sn&&nn==="text/plain"&&(on=sn,sn=void 0),{action:tn,method:en.toLowerCase(),encType:nn,formData:sn,body:on}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function invariant2(St,e){if(St===!1||St===null||typeof St>"u")throw new Error(e)}function singleFetchUrl(St,e,en){let tn=typeof St=="string"?new URL(St,typeof window>"u"?"server://singlefetch/":window.location.origin):St;return tn.pathname==="/"?tn.pathname=`_root.${en}`:e&&stripBasename(tn.pathname,e)==="/"?tn.pathname=`${e.replace(/\/$/,"")}/_root.${en}`:tn.pathname=`${tn.pathname.replace(/\/$/,"")}.${en}`,tn}async function loadRouteModule(St,e){if(St.id in e)return e[St.id];try{let en=await import(St.module);return e[St.id]=en,en}catch(en){return console.error(`Error loading route module \`${St.module}\`, reloading page...`),console.error(en),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(St){return St==null?!1:St.href==null?St.rel==="preload"&&typeof St.imageSrcSet=="string"&&typeof St.imageSizes=="string":typeof St.rel=="string"&&typeof St.href=="string"}async function getKeyedPrefetchLinks(St,e,en){let tn=await Promise.all(St.map(async nn=>{let sn=e.routes[nn.route.id];if(sn){let on=await loadRouteModule(sn,en);return on.links?on.links():[]}return[]}));return dedupeLinkDescriptors(tn.flat(1).filter(isHtmlLinkDescriptor).filter(nn=>nn.rel==="stylesheet"||nn.rel==="preload").map(nn=>nn.rel==="stylesheet"?{...nn,rel:"prefetch",as:"style"}:{...nn,rel:"prefetch"}))}function getNewMatchesForLinks(St,e,en,tn,nn,sn){let on=(dn,fn)=>en[fn]?dn.route.id!==en[fn].route.id:!0,un=(dn,fn)=>{var hn;return en[fn].pathname!==dn.pathname||((hn=en[fn].route.path)==null?void 0:hn.endsWith("*"))&&en[fn].params["*"]!==dn.params["*"]};return sn==="assets"?e.filter((dn,fn)=>on(dn,fn)||un(dn,fn)):sn==="data"?e.filter((dn,fn)=>{var an;let hn=tn.routes[dn.route.id];if(!hn||!hn.hasLoader)return!1;if(on(dn,fn)||un(dn,fn))return!0;if(dn.route.shouldRevalidate){let rn=dn.route.shouldRevalidate({currentUrl:new URL(nn.pathname+nn.search+nn.hash,window.origin),currentParams:((an=en[0])==null?void 0:an.params)||{},nextUrl:new URL(St,window.origin),nextParams:dn.params,defaultShouldRevalidate:!0});if(typeof rn=="boolean")return rn}return!0}):[]}function getModuleLinkHrefs(St,e,{includeHydrateFallback:en}={}){return dedupeHrefs(St.map(tn=>{let nn=e.routes[tn.route.id];if(!nn)return[];let sn=[nn.module];return nn.clientActionModule&&(sn=sn.concat(nn.clientActionModule)),nn.clientLoaderModule&&(sn=sn.concat(nn.clientLoaderModule)),en&&nn.hydrateFallbackModule&&(sn=sn.concat(nn.hydrateFallbackModule)),nn.imports&&(sn=sn.concat(nn.imports)),sn}).flat(1))}function dedupeHrefs(St){return[...new Set(St)]}function sortKeys(St){let e={},en=Object.keys(St).sort();for(let tn of en)e[tn]=St[tn];return e}function dedupeLinkDescriptors(St,e){let en=new Set;return new Set(e),St.reduce((tn,nn)=>{let sn=JSON.stringify(sortKeys(nn));return en.has(sn)||(en.add(sn),tn.push({key:sn,link:nn})),tn},[])}function useDataRouterContext2(){let St=reactExports.useContext(DataRouterContext);return invariant2(St,"You must render this element inside a <DataRouterContext.Provider> element"),St}function useDataRouterStateContext(){let St=reactExports.useContext(DataRouterStateContext);return invariant2(St,"You must render this element inside a <DataRouterStateContext.Provider> element"),St}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let St=reactExports.useContext(FrameworkContext);return invariant2(St,"You must render this element inside a <HydratedRouter> element"),St}function usePrefetchBehavior(St,e){let en=reactExports.useContext(FrameworkContext),[tn,nn]=reactExports.useState(!1),[sn,on]=reactExports.useState(!1),{onFocus:un,onBlur:dn,onMouseEnter:fn,onMouseLeave:hn,onTouchStart:an}=e,rn=reactExports.useRef(null);reactExports.useEffect(()=>{if(St==="render"&&on(!0),St==="viewport"){let mn=gn=>{gn.forEach(yn=>{on(yn.isIntersecting)})},xn=new IntersectionObserver(mn,{threshold:.5});return rn.current&&xn.observe(rn.current),()=>{xn.disconnect()}}},[St]),reactExports.useEffect(()=>{if(tn){let mn=setTimeout(()=>{on(!0)},100);return()=>{clearTimeout(mn)}}},[tn]);let cn=()=>{nn(!0)},pn=()=>{nn(!1),on(!1)};return en?St!=="intent"?[sn,rn,{}]:[sn,rn,{onFocus:composeEventHandlers(un,cn),onBlur:composeEventHandlers(dn,pn),onMouseEnter:composeEventHandlers(fn,cn),onMouseLeave:composeEventHandlers(hn,pn),onTouchStart:composeEventHandlers(an,cn)}]:[!1,rn,{}]}function composeEventHandlers(St,e){return en=>{St&&St(en),en.defaultPrevented||e(en)}}function PrefetchPageLinks({page:St,...e}){let{router:en}=useDataRouterContext2(),tn=reactExports.useMemo(()=>matchRoutes(en.routes,St,en.basename),[en.routes,St,en.basename]);return tn?reactExports.createElement(PrefetchPageLinksImpl,{page:St,matches:tn,...e}):null}function useKeyedPrefetchLinks(St){let{manifest:e,routeModules:en}=useFrameworkContext(),[tn,nn]=reactExports.useState([]);return reactExports.useEffect(()=>{let sn=!1;return getKeyedPrefetchLinks(St,e,en).then(on=>{sn||nn(on)}),()=>{sn=!0}},[St,e,en]),tn}function PrefetchPageLinksImpl({page:St,matches:e,...en}){let tn=useLocation(),{manifest:nn,routeModules:sn}=useFrameworkContext(),{basename:on}=useDataRouterContext2(),{loaderData:un,matches:dn}=useDataRouterStateContext(),fn=reactExports.useMemo(()=>getNewMatchesForLinks(St,e,dn,nn,tn,"data"),[St,e,dn,nn,tn]),hn=reactExports.useMemo(()=>getNewMatchesForLinks(St,e,dn,nn,tn,"assets"),[St,e,dn,nn,tn]),an=reactExports.useMemo(()=>{if(St===tn.pathname+tn.search+tn.hash)return[];let pn=new Set,mn=!1;if(e.forEach(gn=>{var bn;let yn=nn.routes[gn.route.id];!yn||!yn.hasLoader||(!fn.some(wn=>wn.route.id===gn.route.id)&&gn.route.id in un&&((bn=sn[gn.route.id])!=null&&bn.shouldRevalidate)||yn.hasClientLoader?mn=!0:pn.add(gn.route.id))}),pn.size===0)return[];let xn=singleFetchUrl(St,on,"data");return mn&&pn.size>0&&xn.searchParams.set("_routes",e.filter(gn=>pn.has(gn.route.id)).map(gn=>gn.route.id).join(",")),[xn.pathname+xn.search]},[on,un,tn,nn,fn,e,St,sn]),rn=reactExports.useMemo(()=>getModuleLinkHrefs(hn,nn),[hn,nn]),cn=useKeyedPrefetchLinks(hn);return reactExports.createElement(reactExports.Fragment,null,an.map(pn=>reactExports.createElement("link",{key:pn,rel:"prefetch",as:"fetch",href:pn,...en})),rn.map(pn=>reactExports.createElement("link",{key:pn,rel:"modulepreload",href:pn,...en})),cn.map(({key:pn,link:mn})=>reactExports.createElement("link",{key:pn,nonce:en.nonce,...mn})))}function mergeRefs(...St){return e=>{St.forEach(en=>{typeof en=="function"?en(e):en!=null&&(en.current=e)})}}var isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser&&(window.__reactRouterVersion="7.9.6")}catch{}function HashRouter({basename:St,children:e,window:en}){let tn=reactExports.useRef();tn.current==null&&(tn.current=createHashHistory({window:en,v5Compat:!0}));let nn=tn.current,[sn,on]=reactExports.useState({action:nn.action,location:nn.location}),un=reactExports.useCallback(dn=>{reactExports.startTransition(()=>on(dn))},[on]);return reactExports.useLayoutEffect(()=>nn.listen(un),[nn,un]),reactExports.createElement(Router,{basename:St,children:e,location:sn.location,navigationType:sn.action,navigator:nn})}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function({onClick:e,discover:en="render",prefetch:tn="none",relative:nn,reloadDocument:sn,replace:on,state:un,target:dn,to:fn,preventScrollReset:hn,viewTransition:an,...rn},cn){let{basename:pn}=reactExports.useContext(NavigationContext),mn=typeof fn=="string"&&ABSOLUTE_URL_REGEX2.test(fn),xn,gn=!1;if(typeof fn=="string"&&mn&&(xn=fn,isBrowser))try{let Sn=new URL(window.location.href),Cn=fn.startsWith("//")?new URL(Sn.protocol+fn):new URL(fn),Nn=stripBasename(Cn.pathname,pn);Cn.origin===Sn.origin&&Nn!=null?fn=Nn+Cn.search+Cn.hash:gn=!0}catch{warning(!1,`<Link to="${fn}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let yn=useHref(fn,{relative:nn}),[bn,wn,_n]=usePrefetchBehavior(tn,rn),Tn=useLinkClickHandler(fn,{replace:on,state:un,target:dn,preventScrollReset:hn,relative:nn,viewTransition:an});function An(Sn){e&&e(Sn),Sn.defaultPrevented||Tn(Sn)}let Pn=reactExports.createElement("a",{...rn,..._n,href:xn||yn,onClick:gn||sn?e:An,ref:mergeRefs(cn,wn),target:dn,"data-discover":!mn&&en==="render"?"true":void 0});return bn&&!mn?reactExports.createElement(reactExports.Fragment,null,Pn,reactExports.createElement(PrefetchPageLinks,{page:yn})):Pn});Link.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":e="page",caseSensitive:en=!1,className:tn="",end:nn=!1,style:sn,to:on,viewTransition:un,children:dn,...fn},hn){let an=useResolvedPath(on,{relative:fn.relative}),rn=useLocation(),cn=reactExports.useContext(DataRouterStateContext),{navigator:pn,basename:mn}=reactExports.useContext(NavigationContext),xn=cn!=null&&useViewTransitionState(an)&&un===!0,gn=pn.encodeLocation?pn.encodeLocation(an).pathname:an.pathname,yn=rn.pathname,bn=cn&&cn.navigation&&cn.navigation.location?cn.navigation.location.pathname:null;en||(yn=yn.toLowerCase(),bn=bn?bn.toLowerCase():null,gn=gn.toLowerCase()),bn&&mn&&(bn=stripBasename(bn,mn)||bn);const wn=gn!=="/"&&gn.endsWith("/")?gn.length-1:gn.length;let _n=yn===gn||!nn&&yn.startsWith(gn)&&yn.charAt(wn)==="/",Tn=bn!=null&&(bn===gn||!nn&&bn.startsWith(gn)&&bn.charAt(gn.length)==="/"),An={isActive:_n,isPending:Tn,isTransitioning:xn},Pn=_n?e:void 0,Sn;typeof tn=="function"?Sn=tn(An):Sn=[tn,_n?"active":null,Tn?"pending":null,xn?"transitioning":null].filter(Boolean).join(" ");let Cn=typeof sn=="function"?sn(An):sn;return reactExports.createElement(Link,{...fn,"aria-current":Pn,className:Sn,ref:hn,style:Cn,to:on,viewTransition:un},typeof dn=="function"?dn(An):dn)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:St="render",fetcherKey:e,navigate:en,reloadDocument:tn,replace:nn,state:sn,method:on=defaultMethod,action:un,onSubmit:dn,relative:fn,preventScrollReset:hn,viewTransition:an,...rn},cn)=>{let pn=useSubmit(),mn=useFormAction(un,{relative:fn}),xn=on.toLowerCase()==="get"?"get":"post",gn=typeof un=="string"&&ABSOLUTE_URL_REGEX2.test(un),yn=bn=>{if(dn&&dn(bn),bn.defaultPrevented)return;bn.preventDefault();let wn=bn.nativeEvent.submitter,_n=(wn==null?void 0:wn.getAttribute("formmethod"))||on;pn(wn||bn.currentTarget,{fetcherKey:e,method:_n,navigate:en,replace:nn,state:sn,relative:fn,preventScrollReset:hn,viewTransition:an})};return reactExports.createElement("form",{ref:cn,method:xn,action:mn,onSubmit:tn?dn:yn,...rn,"data-discover":!gn&&St==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(St){return`${St} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(St){let e=reactExports.useContext(DataRouterContext);return invariant(e,getDataRouterConsoleError2(St)),e}function useLinkClickHandler(St,{target:e,replace:en,state:tn,preventScrollReset:nn,relative:sn,viewTransition:on}={}){let un=useNavigate(),dn=useLocation(),fn=useResolvedPath(St,{relative:sn});return reactExports.useCallback(hn=>{if(shouldProcessLinkClick(hn,e)){hn.preventDefault();let an=en!==void 0?en:createPath(dn)===createPath(fn);un(St,{replace:an,state:tn,preventScrollReset:nn,relative:sn,viewTransition:on})}},[dn,un,fn,en,tn,e,St,nn,sn,on])}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:St}=useDataRouterContext3("useSubmit"),{basename:e}=reactExports.useContext(NavigationContext),en=useRouteId();return reactExports.useCallback(async(tn,nn={})=>{let{action:sn,method:on,encType:un,formData:dn,body:fn}=getFormSubmissionInfo(tn,e);if(nn.navigate===!1){let hn=nn.fetcherKey||getUniqueFetcherId();await St.fetch(hn,en,nn.action||sn,{preventScrollReset:nn.preventScrollReset,formData:dn,body:fn,formMethod:nn.method||on,formEncType:nn.encType||un,flushSync:nn.flushSync})}else await St.navigate(nn.action||sn,{preventScrollReset:nn.preventScrollReset,formData:dn,body:fn,formMethod:nn.method||on,formEncType:nn.encType||un,replace:nn.replace,state:nn.state,fromRouteId:en,flushSync:nn.flushSync,viewTransition:nn.viewTransition})},[St,e,en])}function useFormAction(St,{relative:e}={}){let{basename:en}=reactExports.useContext(NavigationContext),tn=reactExports.useContext(RouteContext);invariant(tn,"useFormAction must be used inside a RouteContext");let[nn]=tn.matches.slice(-1),sn={...useResolvedPath(St||".",{relative:e})},on=useLocation();if(St==null){sn.search=on.search;let un=new URLSearchParams(sn.search),dn=un.getAll("index");if(dn.some(hn=>hn==="")){un.delete("index"),dn.filter(an=>an).forEach(an=>un.append("index",an));let hn=un.toString();sn.search=hn?`?${hn}`:""}}return(!St||St===".")&&nn.route.index&&(sn.search=sn.search?sn.search.replace(/^\?/,"?index&"):"?index"),en!=="/"&&(sn.pathname=sn.pathname==="/"?en:joinPaths([en,sn.pathname])),createPath(sn)}function useViewTransitionState(St,{relative:e}={}){let en=reactExports.useContext(ViewTransitionContext);invariant(en!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:tn}=useDataRouterContext3("useViewTransitionState"),nn=useResolvedPath(St,{relative:e});if(!en.isTransitioning)return!1;let sn=stripBasename(en.currentLocation.pathname,tn)||en.currentLocation.pathname,on=stripBasename(en.nextLocation.pathname,tn)||en.nextLocation.pathname;return matchPath(nn.pathname,on)!=null||matchPath(nn.pathname,sn)!=null}const MainDSP={hzToSemitones:St=>12*Math.log2(St/440)+69,median:St=>{if(St.length===0)return 0;const e=[...St].sort((tn,nn)=>tn-nn),en=Math.floor(e.length/2);return e.length%2?e[en]:(e[en-1]+e[en])/2}};class ToneEngine{constructor(e){this.ctx=e,this.lastTrigger=0}play(e,en=.1,tn="sine"){if(!this.ctx||this.ctx.state!=="running")return;const nn=Date.now();if(nn-this.lastTrigger<200)return;this.lastTrigger=nn;const sn=this.ctx.createOscillator(),on=this.ctx.createGain();sn.type=tn,sn.frequency.setValueAtTime(e,this.ctx.currentTime),on.gain.setValueAtTime(.1,this.ctx.currentTime),on.gain.exponentialRampToValueAtTime(.001,this.ctx.currentTime+en),sn.connect(on),on.connect(this.ctx.destination),sn.start(),sn.stop(this.ctx.currentTime+en)}}class AudioEngine{constructor(e){this.audioContext=null,this.workletNode=null,this.microphone=null,this.onAudioUpdate=e,this.isActive=!1,this.mediaRecorder=null,this.analysisRecorder=null,this.chunks=[],this.analysisChunks=[],this.toneEngine=null,this.pitchBuffer=[],this.smoothPitchBuffer=[],this.isRecordingForAnalysis=!1}async start(){if(!this.isActive)try{const e=window.AudioContext||window.webkitAudioContext;this.audioContext=new e({latencyHint:"interactive"}),this.audioContext.state==="suspended"&&await this.audioContext.resume(),this.toneEngine=new ToneEngine(this.audioContext);try{await this.audioContext.audioWorklet.addModule("/resonance-processor.js")}catch(tn){console.error("Failed to load worklet from /resonance-processor.js, trying relative path...",tn),await this.audioContext.audioWorklet.addModule("resonance-processor.js")}const en=await navigator.mediaDevices.getUserMedia({audio:!0});this.microphone=this.audioContext.createMediaStreamSource(en),this.workletNode=new AudioWorkletNode(this.audioContext,"resonance-processor"),this.workletNode.port.onmessage=tn=>{if(tn.data.type==="update"){const{pitch:nn,resonance:sn,f1:on,f2:un,weight:dn,spectrum:fn,jitter:hn,vowel:an,volume:rn}=tn.data.data;let cn=nn;nn>0?(this.smoothPitchBuffer.push(nn),this.smoothPitchBuffer.length>3&&this.smoothPitchBuffer.shift(),cn=MainDSP.median(this.smoothPitchBuffer)):(this.smoothPitchBuffer=[],cn=-1);const pn=this.analyzeProsody(cn);this.onAudioUpdate({pitch:cn,resonance:sn,formants:{f1:on,f2:un},weight:dn,volume:rn,jitter:hn,vowel:an,prosody:pn,spectrum:fn})}},this.highpass=this.audioContext.createBiquadFilter(),this.highpass.type="highpass",this.highpass.frequency.value=80,this.lowpass=this.audioContext.createBiquadFilter(),this.lowpass.type="lowpass",this.lowpass.frequency.value=5e3,this.microphone.connect(this.highpass),this.highpass.connect(this.lowpass),this.lowpass.connect(this.workletNode),this.workletNode.connect(this.audioContext.destination),this.mediaRecorder=new MediaRecorder(en),this.mediaRecorder.ondataavailable=tn=>this.chunks.push(tn.data),this.isActive=!0}catch(e){console.error("Audio init error:",e),alert("Mic access denied or Worklet error: "+e.message)}}analyzeProsody(e){e>0?this.pitchBuffer.push(e):this.pitchBuffer.length>0&&this.pitchBuffer.push(0),this.pitchBuffer.length>100&&this.pitchBuffer.shift();const en=this.pitchBuffer.filter(an=>an>50&&an<600);if(en.length<10)return{semitoneRange:0,slopeDirection:"flat"};let tn=Math.min(...en),nn=Math.max(...en);const sn=MainDSP.hzToSemitones(nn)-MainDSP.hzToSemitones(tn),on=en.slice(-20);if(on.length<5)return{semitoneRange:sn,slopeDirection:"flat"};const un=on[0],fn=on[on.length-1]-un;let hn="flat";return fn>5&&(hn="rising"),fn<-5&&(hn="falling"),{semitoneRange:sn,slopeDirection:hn}}playFeedbackTone(e){this.toneEngine&&this.toneEngine.play(e,.15,"sine")}startRecording(){this.mediaRecorder&&this.mediaRecorder.state==="inactive"&&(this.chunks=[],this.mediaRecorder.start())}async stopRecording(){return new Promise(e=>{this.mediaRecorder&&this.mediaRecorder.state==="recording"?(this.mediaRecorder.onstop=()=>{const en=new Blob(this.chunks,{type:"audio/ogg; codecs=opus"});e(window.URL.createObjectURL(en))},this.mediaRecorder.stop()):e(null)})}async startAnalysisRecording(){if(!this.isActive||!this.microphone)return console.error("Audio engine not active"),!1;try{const e=this.audioContext.createMediaStreamDestination();this.lowpass.connect(e);const en=MediaRecorder.isTypeSupported("audio/wav")?"audio/wav":MediaRecorder.isTypeSupported("audio/webm;codecs=pcm")?"audio/webm;codecs=pcm":"audio/webm";return this.analysisRecorder=new MediaRecorder(e.stream,{mimeType:en}),this.analysisChunks=[],this.analysisRecorder.ondataavailable=tn=>{tn.data.size>0&&this.analysisChunks.push(tn.data)},this.analysisRecorder.start(),this.isRecordingForAnalysis=!0,!0}catch(e){return console.error("Failed to start analysis recording:",e),!1}}async stopAnalysisRecording(){return new Promise(e=>{this.analysisRecorder&&this.analysisRecorder.state==="recording"?(this.analysisRecorder.onstop=()=>{const en=new Blob(this.analysisChunks,{type:this.analysisRecorder.mimeType});this.isRecordingForAnalysis=!1;try{this.lowpass.disconnect(this.analysisRecorder.stream)}catch{}e({blob:en,url:window.URL.createObjectURL(en),mimeType:this.analysisRecorder.mimeType})},this.analysisRecorder.stop()):(this.isRecordingForAnalysis=!1,e(null))})}async blobToAudioBuffer(e){const en=await e.arrayBuffer();return await this.audioContext.decodeAudioData(en)}stop(){this.isActive&&(this.workletNode.disconnect(),this.microphone.disconnect(),this.audioContext.close(),this.isActive=!1)}setNoiseGate(e){this.workletNode&&this.workletNode.port.postMessage({type:"config",config:{threshold:e}})}}const DB_NAME$1="VocalGEM",DB_VERSION$1=1,STORES={JOURNALS:"journals",STATS:"stats",GOALS:"goals",SETTINGS:"settings",PROFILES:"profiles",SYNC_QUEUE:"sync_queue",SYNC_METADATA:"sync_metadata"};class IndexedDBManager{constructor(){this.db=null,this.initPromise=this.init()}async init(){return new Promise((e,en)=>{const tn=indexedDB$1.open(DB_NAME$1,DB_VERSION$1);tn.onerror=()=>en(tn.error),tn.onsuccess=()=>{this.db=tn.result,e(this.db)},tn.onupgradeneeded=nn=>{const sn=nn.target.result;if(!sn.objectStoreNames.contains(STORES.JOURNALS)){const on=sn.createObjectStore(STORES.JOURNALS,{keyPath:"id",autoIncrement:!0});on.createIndex("timestamp","timestamp",{unique:!1}),on.createIndex("date","date",{unique:!1})}sn.objectStoreNames.contains(STORES.STATS)||sn.createObjectStore(STORES.STATS,{keyPath:"id"}),sn.objectStoreNames.contains(STORES.GOALS)||sn.createObjectStore(STORES.GOALS,{keyPath:"id",autoIncrement:!0}).createIndex("date","date",{unique:!1}),sn.objectStoreNames.contains(STORES.SETTINGS)||sn.createObjectStore(STORES.SETTINGS,{keyPath:"key"}),sn.objectStoreNames.contains(STORES.PROFILES)||sn.createObjectStore(STORES.PROFILES,{keyPath:"id"}),sn.objectStoreNames.contains(STORES.SYNC_QUEUE)||sn.createObjectStore(STORES.SYNC_QUEUE,{keyPath:"id"}).createIndex("timestamp","timestamp",{unique:!1}),sn.objectStoreNames.contains(STORES.SYNC_METADATA)||sn.createObjectStore(STORES.SYNC_METADATA,{keyPath:"key"})}})}async ensureReady(){this.db||await this.initPromise}async get(e,en){return await this.ensureReady(),new Promise((tn,nn)=>{const un=this.db.transaction([e],"readonly").objectStore(e).get(en);un.onsuccess=()=>tn(un.result),un.onerror=()=>nn(un.error)})}async getAll(e){return await this.ensureReady(),new Promise((en,tn)=>{const on=this.db.transaction([e],"readonly").objectStore(e).getAll();on.onsuccess=()=>en(on.result||[]),on.onerror=()=>tn(on.error)})}async put(e,en){return await this.ensureReady(),new Promise((tn,nn)=>{const un=this.db.transaction([e],"readwrite").objectStore(e).put(en);un.onsuccess=()=>tn(un.result),un.onerror=()=>nn(un.error)})}async add(e,en){return await this.ensureReady(),new Promise((tn,nn)=>{const un=this.db.transaction([e],"readwrite").objectStore(e).add(en);un.onsuccess=()=>tn(un.result),un.onerror=()=>nn(un.error)})}async delete(e,en){return await this.ensureReady(),new Promise((tn,nn)=>{const un=this.db.transaction([e],"readwrite").objectStore(e).delete(en);un.onsuccess=()=>tn(),un.onerror=()=>nn(un.error)})}async clear(e){return await this.ensureReady(),new Promise((en,tn)=>{const on=this.db.transaction([e],"readwrite").objectStore(e).clear();on.onsuccess=()=>en(),on.onerror=()=>tn(on.error)})}async saveJournal(e){return e.timestamp||(e.timestamp=Date.now()),e.date||(e.date=new Date().toISOString().split("T")[0]),await this.add(STORES.JOURNALS,e)}async getJournals(){return(await this.getAll(STORES.JOURNALS)).sort((en,tn)=>tn.timestamp-en.timestamp)}async saveStats(e){return await this.put(STORES.STATS,{id:"current",...e})}async getStats(){return await this.get(STORES.STATS,"current")||{streak:0,totalSeconds:0}}async saveGoals(e){await this.clear(STORES.GOALS);for(const en of e)await this.add(STORES.GOALS,en)}async getGoals(){return await this.getAll(STORES.GOALS)}async saveSetting(e,en){return await this.put(STORES.SETTINGS,{key:e,value:en})}async getSetting(e,en){const tn=await this.get(STORES.SETTINGS,e);return tn?tn.value:en}async saveProfile(e){return await this.put(STORES.PROFILES,e)}async getProfiles(){return await this.getAll(STORES.PROFILES)}async migrateFromLocalStorage(){try{const e=JSON.parse(localStorage.getItem("journals")||"[]");for(const on of e)await this.saveJournal(on);const en=JSON.parse(localStorage.getItem("stats")||"{}");Object.keys(en).length>0&&await this.saveStats(en);const tn=JSON.parse(localStorage.getItem("goals")||"[]");tn.length>0&&await this.saveGoals(tn);const nn=JSON.parse(localStorage.getItem("settings")||"{}");for(const[on,un]of Object.entries(nn))await this.saveSetting(on,un);const sn=JSON.parse(localStorage.getItem("voiceProfiles")||"[]");for(const on of sn)await this.saveProfile(on);return localStorage.setItem("indexeddb_migrated","true"),console.log(" Migration from localStorage to IndexedDB complete"),!0}catch(e){return console.error(" Migration failed:",e),!1}}async needsMigration(){return localStorage.getItem("indexeddb_migrated")==="true"?!1:!!(localStorage.getItem("journals")||localStorage.getItem("stats")||localStorage.getItem("goals"))}}const indexedDB$1=new IndexedDBManager;class SyncManager{constructor(){this.queue=[],this.metadata={lastSyncTime:null,totalSynced:0,failedCount:0},this.isSyncing=!1,this.retryAttempts=new Map,this.listeners=new Set,this.isReady=!1,this.init(),typeof window<"u"&&(window.addEventListener("online",()=>{this.notifyListeners(),this.sync()}),window.addEventListener("offline",()=>this.notifyListeners()))}async init(){try{await indexedDB$1.ensureReady();const e=await indexedDB$1.getAll(STORES.SYNC_QUEUE);this.queue=e.sort((tn,nn)=>tn.timestamp-nn.timestamp);const en=await indexedDB$1.get(STORES.SYNC_METADATA,"main");en&&(this.metadata=en),this.isReady=!0,this.notifyListeners(),navigator.onLine&&this.sync()}catch(e){console.error("SyncManager init failed:",e)}}async saveQueue(){}async saveMetadata(){await indexedDB$1.put(STORES.SYNC_METADATA,{key:"main",...this.metadata})}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}notifyListeners(){const e=this.getStatus();this.listeners.forEach(en=>en(e))}getStatus(){return{isOnline:navigator.onLine,isSyncing:this.isSyncing,pendingCount:this.queue.length,lastSyncTime:this.metadata.lastSyncTime,totalSynced:this.metadata.totalSynced,failedCount:this.metadata.failedCount,isReady:this.isReady}}async push(e,en){this.isReady||await this.init();const tn={id:Date.now()+Math.random(),type:e,payload:en,timestamp:Date.now(),version:1};this.queue.push(tn),await indexedDB$1.add(STORES.SYNC_QUEUE,tn),this.notifyListeners(),this.sync()}async forceSyncNow(){return navigator.onLine?await this.sync():(console.warn("Cannot sync: offline"),!1)}async clearQueue(){this.queue=[],this.retryAttempts.clear(),await indexedDB$1.clear(STORES.SYNC_QUEUE),this.notifyListeners()}async sync(){if(this.isSyncing||this.queue.length===0||!navigator.onLine)return!1;this.isSyncing=!0,this.notifyListeners();const e=[...this.queue],en=[];let tn=0,nn=0;for(const sn of e)try{if(await this.sendRequest(sn))tn++,this.retryAttempts.delete(sn.id),await indexedDB$1.delete(STORES.SYNC_QUEUE,sn.id);else{nn++;const un=(this.retryAttempts.get(sn.id)||0)+1;this.retryAttempts.set(sn.id,un),un<10?en.push(sn):(console.error("Max retries exceeded for item:",sn.id),await indexedDB$1.delete(STORES.SYNC_QUEUE,sn.id))}}catch(on){console.error("Sync error:",on),nn++,en.push(sn)}if(this.queue=en,tn>0&&(this.metadata.lastSyncTime=Date.now(),this.metadata.totalSynced+=tn),this.metadata.failedCount=nn,await this.saveMetadata(),this.isSyncing=!1,this.notifyListeners(),this.queue.length>0){const sn=Math.max(...Array.from(this.retryAttempts.values())),on=Math.min(3e4*Math.pow(2,sn-1),3e5);setTimeout(()=>this.sync(),on)}return tn>0}async sendRequest(e){const en="https://vocalgem.onrender.com";try{return(await fetch(`${en}/api/sync`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({queue:[e]})})).ok}catch{return!1}}}const syncManager=new SyncManager,QUEST_TYPES=[{id:"time_5",label:"Practice for 5 minutes",target:5,type:"time",xp:50},{id:"time_15",label:"Practice for 15 minutes",target:15,type:"time",xp:150},{id:"score_100",label:"Score 100 points in any game",target:100,type:"score",xp:50},{id:"score_500",label:"Score 500 points in any game",target:500,type:"score",xp:200},{id:"journal_1",label:"Log a Journal Entry",target:1,type:"journal",xp:100},{id:"coach_1",label:"Chat with Coach GEM",target:1,type:"coach",xp:50},{id:"carryover_call",label:"Use your voice on a phone call",target:1,type:"carryover",xp:200},{id:"carryover_order",label:"Order something using your voice",target:1,type:"carryover",xp:200},{id:"carryover_intro",label:"Introduce yourself to someone new",target:1,type:"carryover",xp:250},{id:"hydrate",label:"Drink 8 glasses of water today",target:8,type:"hydration",xp:50}],QuestManager={generateDailyQuests:()=>[...QUEST_TYPES].sort(()=>.5-Math.random()).slice(0,3).map(e=>({...e,current:0,completed:!1})),checkReset:(St,e)=>{const en=new Date,tn=new Date(e||0);return en.getDate()!==tn.getDate()||en.getMonth()!==tn.getMonth()?QuestManager.generateDailyQuests():St}},GemContext=reactExports.createContext(),useGem=()=>reactExports.useContext(GemContext),GemProvider=({children:St})=>{const[e,en]=reactExports.useState("practice"),[tn,nn]=reactExports.useState("user"),[sn,on]=reactExports.useState(!1),[un,dn]=reactExports.useState(!1),[fn,hn]=reactExports.useState(!1),[an,rn]=reactExports.useState(!1),[cn,pn]=reactExports.useState(!1),[mn,xn]=reactExports.useState(!1),[gn,yn]=reactExports.useState(!1),[bn,wn]=reactExports.useState(!1),[_n,Tn]=reactExports.useState(!1),[An,Pn]=reactExports.useState(!1),[Sn,Cn]=reactExports.useState([{id:"fem",name:"Feminine",targetRange:{min:170,max:220},calibration:{dark:500,bright:2500}},{id:"masc",name:"Masculine",targetRange:{min:85,max:145},calibration:{dark:400,bright:1800}},{id:"neutral",name:"Neutral",targetRange:{min:145,max:175},calibration:{dark:450,bright:2200}}]),[Nn,Mn]=reactExports.useState("fem"),[Fn,In]=reactExports.useState({min:170,max:220}),[Bn,Ln]=reactExports.useState({dark:500,bright:2500}),[qn,Yn]=reactExports.useState([]),[Qn,zn]=reactExports.useState([]),[lr,$n]=reactExports.useState({streak:0,totalSeconds:0,totalPoints:0,level:1}),[On,er]=reactExports.useState({vibration:!0,tone:!1,noiseGate:.02,triggerLowPitch:!0,triggerDarkRes:!0,notation:"hz",homeNote:190}),[sr,ar]=reactExports.useState({flappy:0,river:0,hopper:0,stairs:0}),[cr,gr]=reactExports.useState(null),[vr,Er]=reactExports.useState(!0),[Rr,Kr]=reactExports.useState(!1),Cr=reactExports.useRef(null),Gr=reactExports.useRef({pitch:0,resonance:0,f1:0,f2:0,weight:0,history:new Array(100).fill(0),spectrum:new Float32Array(512)}),[Zn,Xr]=reactExports.useState(!1),hs=reactExports.useRef(null),us=reactExports.useRef({stats:null,settings:null});reactExports.useEffect(()=>{(async()=>{try{await indexedDB$1.ensureReady();const qr=await indexedDB$1.getSetting("app_settings");qr&&er(qr);const ts=await indexedDB$1.getProfiles();ts.length>0&&Cn(ts);const Dr=await indexedDB$1.getSetting("active_profile");if(Dr){Mn(Dr);const ho=ts.length>0?ts.find(Co=>Co.id===Dr):null;ho&&(In(ho.targetRange),Ln(ho.calibration))}const ns=await indexedDB$1.getStats();ns&&$n(ho=>({...ho,...ns}));const ks=await indexedDB$1.getJournals();ks&&zn(ks);const ms=await indexedDB$1.getSetting("high_scores");ms&&ar(ms);const Yr=await indexedDB$1.getSetting("user_mode");Yr&&nn(Yr);const is=await indexedDB$1.getGoals(),_s=await indexedDB$1.getSetting("last_login",0),so=QuestManager.checkReset(is.length?is:[],_s);await indexedDB$1.saveSetting("last_login",Date.now()),await indexedDB$1.saveGoals(so),Yn(so),Kr(!0)}catch(qr){console.error("Failed to load local data:",qr)}})()},[]),reactExports.useEffect(()=>{(async()=>{try{const qr="https://vocalgem.onrender.com",ts=await fetch(`${qr}/api/me`);if(ts.ok){const Dr=await ts.json();if(Dr.user){gr(Dr.user);const ns=await fetch(`${qr}/api/data`);if(ns.ok){const ks=await ns.json();ks.stats&&$n(ms=>{const Yr={...ms,...ks.stats};return indexedDB$1.saveStats(Yr),Yr}),ks.journals&&ks.journals.length>0}}}}catch{console.warn("Backend not reachable")}finally{Er(!1)}})()},[]);const zr=reactExports.useRef(On),ls=reactExports.useRef(Fn);reactExports.useEffect(()=>{zr.current=On},[On]),reactExports.useEffect(()=>{ls.current=Fn},[Fn]),reactExports.useEffect(()=>(!localStorage.getItem("hasVisited")&&(hn(!0),localStorage.setItem("hasVisited","true")),Cr.current=new AudioEngine(qr=>{const ts=Gr.current.history;let Dr=qr.pitch;if(Gr.current.silenceCounter||(Gr.current.silenceCounter=0),Gr.current.lastValidPitch||(Gr.current.lastValidPitch=0),qr.pitch>0?(Gr.current.silenceCounter=0,Gr.current.lastValidPitch=qr.pitch):(Gr.current.silenceCounter++,Gr.current.silenceCounter<15&&Gr.current.lastValidPitch>0?Dr=Gr.current.lastValidPitch:Dr=0),Gr.current={...qr,history:[...ts.slice(1),Dr]},qr.pitch>0){const ns=zr.current,ks=ls.current;ns.triggerLowPitch&&qr.pitch<ks.min-5&&(ns.vibration&&typeof navigator<"u"&&navigator.vibrate&&navigator.vibrate(50),ns.tone&&Cr.current.playFeedbackTone(220))}}),Cr.current.setNoiseGate(On.noiseGate),()=>{Cr.current&&Cr.current.stop()}),[]),reactExports.useEffect(()=>{Cr.current&&Cr.current.setNoiseGate(On.noiseGate)},[On.noiseGate]),reactExports.useEffect(()=>((e==="practice"||e==="games")&&(hs.current=setInterval(()=>{Cr.current&&Cr.current.isActive&&($n(es=>{const qr=(es.totalSeconds||0)+1,ts=fs({...es,totalSeconds:qr}),Dr={...es,totalSeconds:qr,level:ts};return indexedDB$1.saveStats(Dr),Dr}),Yn(es=>{let qr=!1;const ts=es.map(Dr=>{if(Dr.type==="time"&&!Dr.completed){const ns=Dr.current+.016666666666666666;return ns>=Dr.target?($n(ks=>{const ms=(ks.totalPoints||0)+Dr.xp,Yr=fs({...ks,totalPoints:ms}),is={...ks,totalPoints:ms,level:Yr};return indexedDB$1.saveStats(is),is}),qr=!0,{...Dr,current:ns,completed:!0}):(qr=!0,{...Dr,current:ns})}return Dr});return qr&&indexedDB$1.saveGoals(ts),ts}))},1e3)),()=>clearInterval(hs.current)),[e]);const wr=async()=>{Cr.current&&(Cr.current.isActive?(Cr.current.stop(),Xr(!1)):(await Cr.current.start(),Xr(!0)))};reactExports.useEffect(()=>{lr.totalPoints===void 0&&$n(es=>({...es,totalPoints:0}))},[]);const Fr=(es,qr)=>{cr&&syncManager.push(es,qr)};reactExports.useEffect(()=>{if(!(!cr||!Rr))return us.current.stats&&clearTimeout(us.current.stats),us.current.stats=setTimeout(()=>{Fr("STATS_UPDATE",{totalPoints:lr.totalPoints,totalSeconds:lr.totalSeconds,level:lr.level,highScores:sr})},2e3),()=>{us.current.stats&&clearTimeout(us.current.stats)}},[lr,sr,cr,Rr]),reactExports.useEffect(()=>{if(!(!cr||!Rr))return us.current.settings&&clearTimeout(us.current.settings),us.current.settings=setTimeout(()=>{Fr("SETTINGS_UPDATE",On)},1e3),()=>{us.current.settings&&clearTimeout(us.current.settings)}},[On,cr,Rr]);const Qr=es=>Math.floor(Math.sqrt(es/100))+1,fs=es=>{const qr=(es.totalPoints||0)+Math.floor((es.totalSeconds||0)/60*10),ts=Qr(qr);return ts>(es.level||1)?(console.log(`Level Up! ${es.level} -> ${ts}`),ts):es.level||1},Ss={activeTab:e,setActiveTab:en,userMode:tn,setUserMode:nn,incognito:sn,setIncognito:on,showSettings:un,setShowSettings:dn,showTutorial:fn,setShowTutorial:hn,showCompass:an,setShowCompass:rn,showCalibration:cn,setShowCalibration:pn,showJournalForm:mn,setShowJournalForm:xn,showVocalHealthTips:gn,setShowVocalHealthTips:yn,showAssessment:bn,setShowAssessment:wn,showWarmUp:_n,setShowWarmUp:Tn,showForwardFocus:An,setShowForwardFocus:Pn,targetRange:Fn,calibration:Bn,voiceProfiles:Sn,activeProfile:Nn,goals:qn,journals:Qn,stats:lr,highScores:sr,settings:On,isAudioActive:Zn,isDataLoaded:Rr,audioEngineRef:Cr,dataRef:Gr,toggleAudio:wr,submitGameResult:(es,qr)=>{ar(ts=>{const Dr={...ts,[es]:Math.max(ts[es]||0,qr)};return indexedDB$1.saveSetting("high_scores",Dr),Dr}),$n(ts=>{const Dr=(ts.totalPoints||0)+qr,ns=fs({...ts,totalPoints:Dr}),ks={...ts,totalPoints:Dr,level:ns};return indexedDB$1.saveStats(ks),Fr("stats",ks),ks}),Yn(ts=>{const Dr=ts.map(ns=>{if(ns.type==="score"&&!ns.completed){const ks=Math.max(ns.current,qr);return ks>=ns.target?($n(ms=>{const Yr=(ms.totalPoints||0)+ns.xp,is=fs({...ms,totalPoints:Yr}),_s={...ms,totalPoints:Yr,level:is};return indexedDB$1.saveStats(_s),_s}),{...ns,current:ks,completed:!0}):{...ns,current:ks}}return ns});return indexedDB$1.saveGoals(Dr),Dr})},addJournalEntry:async es=>{const qr={...es,date:new Date().toISOString(),id:Date.now()};await indexedDB$1.saveJournal(qr);const ts=await indexedDB$1.getJournals();zn(ts),xn(!1),Fr("JOURNAL_ADD",qr)},updateSettings:es=>{er(es),indexedDB$1.saveSetting("app_settings",es)},updateTargetRange:es=>{In(es),Nn&&Cn(qr=>{const ts=qr.map(ns=>ns.id===Nn?{...ns,targetRange:es}:ns),Dr=ts.find(ns=>ns.id===Nn);return Dr&&indexedDB$1.saveProfile(Dr),ts})},updateCalibration:(es,qr)=>{const ts={dark:es,bright:qr};Ln(ts),Nn&&Cn(Dr=>{const ns=Dr.map(ms=>ms.id===Nn?{...ms,calibration:ts}:ms),ks=ns.find(ms=>ms.id===Nn);return ks&&indexedDB$1.saveProfile(ks),ns})},updateUserMode:es=>{nn(es),indexedDB$1.saveSetting("user_mode",es)},switchProfile:es=>{const qr=Sn.find(ts=>ts.id===es);qr&&(Mn(es),In(qr.targetRange),Ln(qr.calibration),indexedDB$1.saveSetting("active_profile",es))},user:cr,login:async(es,qr)=>{try{const Dr=await fetch("https://vocalgem.onrender.com/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:es,password:qr})});if(Dr.ok){const ns=await Dr.json();return gr(ns.user),!0}}catch(ts){console.error(ts)}return!1},signup:async(es,qr)=>{try{const Dr=await fetch("https://vocalgem.onrender.com/api/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:es,password:qr})});if(Dr.ok){const ns=await Dr.json();return gr(ns.user),!0}}catch(ts){console.error(ts)}return!1},logout:async()=>{try{await fetch("https://vocalgem.onrender.com/api/logout",{method:"POST"}),gr(null)}catch(es){console.error(es)}}};return jsxRuntimeExports.jsx(GemContext.Provider,{value:Ss,children:St})},ResonanceOrb=({dataRef:St,calibration:e})=>{const en=reactExports.useRef(null),tn=reactExports.useRef(null),nn=e?e.dark:500,sn=e?e.bright:2500,on=reactExports.useRef(0);return reactExports.useEffect(()=>{const un=()=>{if(en.current){const{resonance:fn,weight:hn,pitch:an}=St.current;let rn=0;if(fn>0){const gn=nn+100,yn=sn-500;let bn=(fn-gn)/(yn-gn);bn=Math.max(0,Math.min(1,bn)),rn=Math.pow(bn,.8)}const cn=.05;on.current=on.current+(rn-on.current)*cn;const pn=on.current;let mn="rgb(59, 130, 246)";if(pn>.5){const gn=(pn-.5)*2;mn=`rgb(${59+191*gn}, ${130+74*gn}, ${246+-225*gn})`}else{const gn=pn*2;mn=`rgb(${30+29*gn}, ${58+72*gn}, ${138+108*gn})`}const xn=1+hn/200;en.current.style.background=`radial-gradient(circle at 30% 30%, rgba(255,255,255,0.8), ${mn})`,en.current.style.boxShadow=`0 0 ${20+hn}px ${mn}, inset 0 0 20px rgba(255,255,255,0.5)`,en.current.style.transform=`scale(${xn})`,en.current.style.opacity=an>0?1:.3,tn.current&&(an<=0?tn.current.innerText="Listening...":pn>.6?tn.current.innerText="Bright / Head":pn<.35?tn.current.innerText="Dark / Chest":tn.current.innerText="Balanced")}requestAnimationFrame(un)},dn=requestAnimationFrame(un);return()=>cancelAnimationFrame(dn)},[e]),jsxRuntimeExports.jsxs("div",{className:"relative h-48 w-full flex items-center justify-center mb-6 mt-2",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-blue-500/5 to-purple-500/5 rounded-full blur-3xl"}),jsxRuntimeExports.jsx("div",{ref:en,className:"w-32 h-32 rounded-full transition-colors duration-200 z-10 relative"}),jsxRuntimeExports.jsx("div",{ref:tn,className:"absolute bottom-0 translate-y-full text-xs font-bold tracking-widest text-slate-400 uppercase mt-4",children:"Listening..."})]})},LiveMetricsBar=({dataRef:St})=>{const[e,en]=reactExports.useState({f0:0,f1:0,f2:0,w:0});return reactExports.useEffect(()=>{const tn=()=>{St.current&&en({f0:Math.round(St.current.pitch),f1:Math.round(St.current.f1),f2:Math.round(St.current.f2),w:Math.round(St.current.weight)}),requestAnimationFrame(tn)},nn=requestAnimationFrame(tn);return()=>cancelAnimationFrame(nn)},[]),jsxRuntimeExports.jsxs("div",{className:"glass-panel rounded-xl p-2 mb-2 flex justify-between text-[10px] font-mono text-blue-300",children:[jsxRuntimeExports.jsxs("span",{children:["F0: ",e.f0>0?e.f0:"--","Hz"]}),jsxRuntimeExports.jsxs("span",{children:["F1: ",e.f1,"Hz"]}),jsxRuntimeExports.jsxs("span",{children:["F2: ",e.f2,"Hz"]}),jsxRuntimeExports.jsxs("span",{children:["W: ",e.w]})]})},PitchVisualizer=({dataRef:St,targetRange:e,userMode:en,exercise:tn,onScore:nn,settings:sn={}})=>{const on=reactExports.useRef(null),un=reactExports.useRef({score:0,lastUpdate:Date.now(),lastPitch:0}),dn=reactExports.useRef(new Image),fn=reactExports.useRef(new Image);reactExports.useEffect(()=>{dn.current.src="/assets/balloon.png",fn.current.src="/assets/bird.png"},[]),reactExports.useEffect(()=>{const an=on.current,rn=an.getContext("2d"),cn=window.devicePixelRatio||1;tn&&(un.current={score:0,lastUpdate:Date.now(),lastPitch:0});const pn=()=>{const xn=an.getBoundingClientRect();an.width=xn.width*cn,an.height=xn.height*cn,rn.scale(cn,cn);const gn=xn.width,yn=xn.height;rn.clearRect(0,0,gn,yn);const bn=50,wn=350,_n=Sn=>yn-(Sn-bn)/(wn-bn)*yn;if(e&&!tn){const Sn=_n(e.max),Cn=_n(e.min),Nn=Math.abs(Cn-Sn);if(rn.fillStyle="rgba(16, 185, 129, 0.05)",rn.fillRect(0,Sn,gn,Nn),rn.strokeStyle="rgba(16, 185, 129, 0.3)",rn.setLineDash([5,5]),rn.lineWidth=1,rn.beginPath(),rn.moveTo(0,Sn),rn.lineTo(gn,Sn),rn.moveTo(0,Cn),rn.lineTo(gn,Cn),rn.stroke(),rn.setLineDash([]),sn.homeNote&&sn.homeNote>bn&&sn.homeNote<wn){const Mn=_n(sn.homeNote);rn.strokeStyle="rgba(255, 215, 0, 0.6)",rn.lineWidth=2,rn.setLineDash([10,5]),rn.beginPath(),rn.moveTo(0,Mn),rn.lineTo(gn,Mn),rn.stroke(),rn.setLineDash([]),rn.fillStyle="rgba(255, 215, 0, 0.9)",rn.font="bold 10px sans-serif",rn.textAlign="left",rn.fillText(`Home: ${Math.round(sn.homeNote)} Hz`,10,Mn-5)}}if(tn){const Sn=Date.now();rn.strokeStyle="rgba(255, 255, 255, 0.2)",rn.lineWidth=6,rn.lineCap="round",rn.setLineDash([10,15]),rn.beginPath();let Cn=0;for(let Mn=0;Mn<gn;Mn+=5){const Fn=Mn/gn;let In=0;if(tn.gameId==="glide"){const Ln=tn.range,qn=(e.min+e.max)/2,Yn=Date.now()/2e3*Math.PI*2;In=qn+Ln/2*Math.sin(Fn*Math.PI*4+Yn)}else if(tn.gameId==="step"){const qn=tn.range/4,Yn=Date.now()/4e3%1,Qn=(Fn+Yn)%1,zn=Math.floor(Qn*4);In=e.min+zn*qn}const Bn=_n(In);if(Mn===0?rn.moveTo(Mn,Bn):rn.lineTo(Mn,Bn),Mn>=gn-50&&Mn<gn-40&&(Cn=In),Mn%150===0){const Ln=Bn+Math.sin(Mn+Sn/100)*20;fn.current.complete&&rn.drawImage(fn.current,Mn,Ln-15,30,30)}}rn.stroke(),rn.setLineDash([]);const Nn=St.current.history[St.current.history.length-1];if(Nn>0){const Mn=_n(Nn);dn.current.complete?rn.drawImage(dn.current,gn-60,Mn-25,50,50):(rn.fillStyle="#f43f5e",rn.beginPath(),rn.arc(gn-40,Mn,15,0,Math.PI*2),rn.fill()),Math.abs(Nn-Cn)<20?(un.current.score+=1,rn.shadowBlur=20,rn.shadowColor="#4ade80",un.current.score%50===0&&nn(un.current.score)):rn.shadowBlur=0}rn.fillStyle="rgba(255, 255, 255, 0.8)",rn.font="bold 14px sans-serif",rn.textAlign="left",rn.fillText(tn.name.toUpperCase(),10,25),rn.fillStyle="#4ade80",rn.font="bold 24px sans-serif",rn.fillText(`SCORE: ${un.current.score}`,10,55)}const Tn=St.current.history;rn.strokeStyle="#22c55e",rn.lineWidth=3,rn.lineCap="round",rn.lineJoin="round",rn.beginPath();let An=!1;Tn.forEach((Sn,Cn)=>{const Nn=Cn/(Tn.length-1)*gn;if(Sn>0){const Mn=_n(Sn);An?rn.lineTo(Nn,Mn):(rn.moveTo(Nn,Mn),An=!0)}}),rn.stroke(),rn.fillStyle="#22c55e",Tn.forEach((Sn,Cn)=>{if(Sn>0){const Nn=Cn/(Tn.length-1)*gn,Mn=_n(Sn);rn.beginPath(),rn.arc(Nn,Mn,3,0,Math.PI*2),rn.fill()}}),rn.shadowBlur=0;const Pn=Tn[Tn.length-1];Pn>0&&(rn.fillStyle="#60a5fa",rn.font="bold 20px monospace",rn.textAlign="right",rn.fillText(Math.round(Pn)+" Hz",gn-10,30)),requestAnimationFrame(pn)},mn=requestAnimationFrame(pn);return()=>cancelAnimationFrame(mn)},[e,tn]);const hn=en==="slp"?"Fundamental Frequency (F0)":"Pitch";return jsxRuntimeExports.jsxs("div",{className:"glass-panel-dark rounded-2xl h-48 w-full mb-4 relative overflow-hidden shadow-lg",children:[" ",jsxRuntimeExports.jsx("div",{className:"absolute top-3 left-4 text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:hn})," ",jsxRuntimeExports.jsx("canvas",{ref:on,className:"w-full h-full"})," "]})},PitchOrb=({dataRef:St,settings:e={}})=>{const en=reactExports.useRef(null),[tn,nn]=reactExports.useState(!1),sn={feminine:{min:165,max:300},androgynous:{min:145,max:175},masculine:{min:85,max:145}},on=e.genderRanges||sn,un=hn=>hn<=0?0:Math.round(12*Math.log2(hn/440)+69),dn=hn=>{const an=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],rn=Math.floor(hn/12)-1;return`${an[hn%12]}${rn}`},fn=hn=>hn>=on.feminine.min&&hn<=on.feminine.max?{primary:"#ec4899",glow:"rgba(236, 72, 153, 0.6)",label:"Feminine"}:hn>=on.androgynous.min&&hn<=on.androgynous.max?{primary:"#a855f7",glow:"rgba(168, 85, 247, 0.6)",label:"Androgynous"}:hn>=on.masculine.min&&hn<=on.masculine.max?{primary:"#3b82f6",glow:"rgba(59, 130, 246, 0.6)",label:"Masculine"}:{primary:"#64748b",glow:"rgba(100, 116, 139, 0.3)",label:"Out of Range"};return reactExports.useEffect(()=>{const hn=en.current,an=hn.getContext("2d"),rn=window.devicePixelRatio||1,cn=()=>{var Cn;const mn=hn.getBoundingClientRect();hn.width=mn.width*rn,hn.height=mn.height*rn,an.scale(rn,rn);const xn=mn.width,gn=mn.height,yn=xn/2,bn=gn/2;an.clearRect(0,0,xn,gn);const wn=((Cn=St.current)==null?void 0:Cn.pitch)||0,_n=fn(wn),Tn=Math.min(xn,gn)*.35,An=wn>0?Math.sin(Date.now()/300)*5:0,Pn=Tn+An;if(wn>0){const Nn=an.createRadialGradient(yn,bn,Pn*.5,yn,bn,Pn*1.5);Nn.addColorStop(0,_n.glow),Nn.addColorStop(1,"transparent"),an.fillStyle=Nn,an.beginPath(),an.arc(yn,bn,Pn*1.5,0,Math.PI*2),an.fill()}const Sn=an.createRadialGradient(yn-Pn*.3,bn-Pn*.3,Pn*.1,yn,bn,Pn);if(wn>0?(Sn.addColorStop(0,`${_n.primary}aa`),Sn.addColorStop(.7,_n.primary),Sn.addColorStop(1,`${_n.primary}66`)):(Sn.addColorStop(0,"#475569"),Sn.addColorStop(1,"#1e293b")),an.fillStyle=Sn,an.beginPath(),an.arc(yn,bn,Pn,0,Math.PI*2),an.fill(),an.strokeStyle=wn>0?_n.primary:"#334155",an.lineWidth=3,an.stroke(),wn>0){const Nn=tn?un(wn):Math.round(wn),Mn=tn?"":" Hz",Fn=tn?dn(un(wn)):"";an.fillStyle="#ffffff",an.font="bold 48px sans-serif",an.textAlign="center",an.textBaseline="middle",an.fillText(Nn+Mn,yn,bn-10),tn&&Fn&&(an.font="bold 24px sans-serif",an.fillStyle="#ffffff99",an.fillText(Fn,yn,bn+25)),an.font="bold 14px sans-serif",an.fillStyle=_n.primary,an.fillText(_n.label,yn,bn+(tn?50:35))}else an.fillStyle="#64748b",an.font="bold 20px sans-serif",an.textAlign="center",an.textBaseline="middle",an.fillText("--- Hz",yn,bn);requestAnimationFrame(cn)},pn=requestAnimationFrame(cn);return()=>cancelAnimationFrame(pn)},[St,tn,on]),jsxRuntimeExports.jsxs("div",{className:"glass-panel-dark rounded-2xl p-6 relative overflow-hidden shadow-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-4",children:[jsxRuntimeExports.jsx("div",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Pitch"}),jsxRuntimeExports.jsx("button",{onClick:()=>nn(!tn),className:"px-3 py-1 rounded-lg text-xs font-bold bg-slate-800/50 text-slate-400 hover:bg-slate-700 hover:text-white transition-all",children:tn?"Show Hz":"Show Notes"})]}),jsxRuntimeExports.jsx("canvas",{ref:en,className:"w-full h-64"})]})},Spectrogram=({dataRef:St})=>{const e=reactExports.useRef(null);return reactExports.useEffect(()=>{const en=e.current,tn=en.getContext("2d",{willReadFrequently:!0,alpha:!1}),nn=window.devicePixelRatio||1,sn=en.getBoundingClientRect();en.width=sn.width*nn,en.height=256;const on=new Uint32Array(256);for(let fn=0;fn<256;fn++){const hn=fn/255,an=Math.min(255,Math.max(0,hn*400-100)),rn=Math.min(255,Math.max(0,hn*400-200)),cn=Math.min(255,Math.max(0,hn*400-50));on[fn]=255<<24|cn<<16|rn<<8|an}const un=()=>{const fn=St.current.spectrum;if(!fn){requestAnimationFrame(un);return}const hn=en.width,an=en.height,rn=2;tn.drawImage(en,rn,0,hn-rn,an,0,0,hn-rn,an);const cn=tn.createImageData(rn,an),pn=new Uint32Array(cn.data.buffer);for(let mn=0;mn<an;mn++){const xn=Math.floor(mn*(350/an)),gn=fn[xn]||0;let yn=Math.log10(gn+1)*50;yn=Math.min(255,Math.max(0,yn));const bn=on[Math.floor(yn)];for(let wn=0;wn<rn;wn++)pn[(an-1-mn)*rn+wn]=bn}tn.putImageData(cn,hn-rn,0),requestAnimationFrame(un)},dn=requestAnimationFrame(un);return()=>cancelAnimationFrame(dn)},[]),jsxRuntimeExports.jsxs("div",{className:"h-32 w-full relative overflow-hidden rounded-xl bg-black",children:[" ",jsxRuntimeExports.jsx("canvas",{ref:e,className:"w-full h-full"})," ",jsxRuntimeExports.jsx("div",{className:"absolute bottom-1 right-2 text-[9px] text-white/50 font-mono",children:"0 - 4kHz"})," "]})};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=St=>St.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),createLucideIcon=(St,e)=>{const en=reactExports.forwardRef(({color:tn="currentColor",size:nn=24,strokeWidth:sn=2,absoluteStrokeWidth:on,className:un="",children:dn,...fn},hn)=>reactExports.createElement("svg",{ref:hn,...defaultAttributes,width:nn,height:nn,stroke:tn,strokeWidth:on?Number(sn)*24/Number(nn):sn,className:["lucide",`lucide-${toKebabCase(St)}`,un].join(" "),...fn},[...e.map(([an,rn])=>reactExports.createElement(an,rn)),...Array.isArray(dn)?dn:[dn]]));return en.displayName=`${St}`,en};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Activity=createLucideIcon("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AlertCircle=createLucideIcon("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AlertTriangle=createLucideIcon("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ArrowLeftRight=createLucideIcon("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ArrowLeft=createLucideIcon("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ArrowRight=createLucideIcon("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BarChart2=createLucideIcon("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BarChart3=createLucideIcon("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BookOpen=createLucideIcon("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Book=createLucideIcon("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bot=createLucideIcon("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Calendar=createLucideIcon("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Camera=createLucideIcon("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CheckCircle=createLucideIcon("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Check=createLucideIcon("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronLeft=createLucideIcon("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ClipboardCheck=createLucideIcon("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Clock=createLucideIcon("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Database=createLucideIcon("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Download=createLucideIcon("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FileText=createLucideIcon("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Flame=createLucideIcon("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gamepad2=createLucideIcon("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HeartPulse=createLucideIcon("HeartPulse",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HelpCircle=createLucideIcon("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const History=createLucideIcon("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Info$1=createLucideIcon("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Loader=createLucideIcon("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Maximize2=createLucideIcon("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mic2=createLucideIcon("Mic2",[["path",{d:"m12 8-9.04 9.06a2.82 2.82 0 1 0 3.98 3.98L16 12",key:"zoua8r"}],["circle",{cx:"17",cy:"7",r:"5",key:"1fomce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mic=createLucideIcon("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Minus=createLucideIcon("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Music=createLucideIcon("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pause=createLucideIcon("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Play=createLucideIcon("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Plus=createLucideIcon("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RefreshCw=createLucideIcon("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Save=createLucideIcon("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Send=createLucideIcon("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sparkles=createLucideIcon("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Square=createLucideIcon("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Stethoscope=createLucideIcon("Stethoscope",[["path",{d:"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3",key:"1jd90r"}],["path",{d:"M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4",key:"126ukv"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Target=createLucideIcon("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Trash2=createLucideIcon("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TrendingUp=createLucideIcon("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vibrate=createLucideIcon("Vibrate",[["path",{d:"m2 8 2 2-2 2 2 2-2 2",key:"sv1b1"}],["path",{d:"m22 8-2 2 2 2-2 2 2 2",key:"101i4y"}],["rect",{width:"8",height:"14",x:"8",y:"5",rx:"1",key:"1oyrl4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Volume2=createLucideIcon("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WifiOff=createLucideIcon("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wifi=createLucideIcon("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wrench=createLucideIcon("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XCircle=createLucideIcon("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X$1=createLucideIcon("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zap=createLucideIcon("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),VoiceQualityMeter=({dataRef:St,userMode:e})=>{var sn;const en=reactExports.useRef(null);reactExports.useEffect(()=>{const on=()=>{if(en.current){const dn=St.current.resonance||0,fn=St.current.weight||0,hn=parseFloat(en.current.style.left)||0;let an=(dn-500)/2e3*100;an=Math.max(0,Math.min(100,an));const rn=hn+(an-hn)*.1;en.current.style.left=`${rn}%`,en.current.style.opacity=fn>10?1:.3,rn>70?en.current.className="absolute top-0 bottom-0 w-1.5 rounded-full shadow-[0_0_10px_rgba(255,255,255,0.8)] transition-colors duration-75 bg-red-500":rn<30?en.current.className="absolute top-0 bottom-0 w-1.5 rounded-full shadow-[0_0_10px_rgba(255,255,255,0.8)] transition-colors duration-75 bg-blue-400":en.current.className="absolute top-0 bottom-0 w-1.5 rounded-full shadow-[0_0_10px_rgba(255,255,255,0.8)] transition-colors duration-75 bg-emerald-500"}requestAnimationFrame(on)},un=requestAnimationFrame(on);return()=>cancelAnimationFrame(un)},[]);const tn=e==="slp"?["Low Energy","Vocal Weight","High Energy"]:["Light / Airy","Vocal Weight","Heavy / Pressed"],nn=((sn=St.current)==null?void 0:sn.weight)>80;return jsxRuntimeExports.jsxs("div",{className:"glass-panel rounded-xl p-4 mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-[10px] uppercase font-bold text-slate-500 tracking-wider mb-3",children:[jsxRuntimeExports.jsx("span",{children:tn[0]}),jsxRuntimeExports.jsx("span",{children:tn[1]}),jsxRuntimeExports.jsx("span",{children:tn[2]})]}),jsxRuntimeExports.jsxs("div",{className:"relative h-3 bg-slate-800 rounded-full overflow-hidden shadow-inner",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-20 weight-gradient"}),jsxRuntimeExports.jsx("div",{ref:en,className:"absolute top-0 bottom-0 w-1.5 rounded-full shadow-[0_0_10px_rgba(255,255,255,0.8)] transition-all duration-75 bg-emerald-500",style:{left:"0%"}})]}),nn&&jsxRuntimeExports.jsxs("div",{className:"mt-2 text-[10px] text-red-400 flex items-center gap-1 animate-pulse",children:[jsxRuntimeExports.jsx(AlertTriangle,{className:"w-3 h-3"})," High Vocal Weight detected. Relax!"]})]})},VowelSpacePlot=({f1:St,f2:e})=>{const en=[{label:"/i/",f1:300,f2:2500,color:"rgba(236, 72, 153, 0.2)"},{label:"/a/",f1:850,f2:1700,color:"rgba(59, 130, 246, 0.2)"},{label:"/u/",f1:300,f2:800,color:"rgba(16, 185, 129, 0.2)"}],tn=200,nn=1e3,sn=500,on=3e3,un=fn=>100-(fn-sn)/(on-sn)*100,dn=fn=>(fn-tn)/(nn-tn)*100;return jsxRuntimeExports.jsx("div",{className:"h-64 bg-slate-900 rounded-xl border border-slate-800 relative overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"absolute inset-0 p-4",children:jsxRuntimeExports.jsxs("div",{className:"w-full h-full border-l border-b border-slate-700 relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute -bottom-6 left-1/2 -translate-x-1/2 text-xs text-slate-500",children:"F2 (Resonance/Backness)"}),jsxRuntimeExports.jsx("div",{className:"absolute -left-8 top-1/2 -translate-y-1/2 -rotate-90 text-xs text-slate-500",children:"F1 (Openness)"}),en.map(fn=>jsxRuntimeExports.jsx("div",{className:"absolute rounded-full flex items-center justify-center text-xs font-bold text-white/50",style:{left:`${un(fn.f2)}%`,top:`${dn(fn.f1)}%`,width:"40px",height:"40px",transform:"translate(-50%, -50%)",backgroundColor:fn.color},children:fn.label},fn.label)),St&&e&&jsxRuntimeExports.jsx("div",{className:"absolute w-4 h-4 bg-white rounded-full shadow-[0_0_10px_white] transition-all duration-500",style:{left:`${un(e)}%`,top:`${dn(St)}%`,transform:"translate(-50%, -50%)"},children:jsxRuntimeExports.jsxs("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 whitespace-nowrap text-xs bg-slate-800 px-2 py-1 rounded border border-slate-700",children:[St.toFixed(0)," / ",e.toFixed(0)," Hz"]})})]})})})},GameHub=({onSelectGame:St})=>{const{stats:e,highScores:en}=useGem(),tn=e.totalPoints||0,nn=Math.floor(Math.sqrt(tn/100))+1,sn=Math.pow(nn,2)*100,on=Math.pow(nn-1,2)*100,un=(tn-on)/(sn-on)*100,dn=[{id:"pitchmatch",name:"Pitch Match",icon:"",desc:"Match the scrolling notes!",color:"bg-amber-500"},{id:"flappy",name:"Balloon Adventure",icon:"",desc:"Control altitude with pitch",color:"bg-blue-500"},{id:"river",name:"Resonance River",icon:"",desc:"Steer with vocal resonance",color:"bg-emerald-500"},{id:"hopper",name:"Cloud Hopper",icon:"",desc:"Jump with volume bursts",color:"bg-purple-500"},{id:"stairs",name:"Pitch Staircase",icon:"",desc:"Hold steady notes to climb",color:"bg-orange-500"}];return jsxRuntimeExports.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500 pb-20",children:[jsxRuntimeExports.jsxs("div",{className:"glass-panel p-6 rounded-3xl mb-8 relative overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-blue-500/20 rounded-full blur-3xl -mr-10 -mt-10 animate-pulse"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-end mb-2 relative z-10",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-slate-400 text-xs font-bold uppercase tracking-wider",children:"Current Level"}),jsxRuntimeExports.jsxs("div",{className:"text-4xl font-black text-white drop-shadow-lg",children:["Lvl ",nn]})]}),jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsx("div",{className:"text-slate-400 text-xs font-bold uppercase tracking-wider",children:"Total Points"}),jsxRuntimeExports.jsx("div",{className:"text-xl font-mono text-blue-400",children:tn.toLocaleString()})]})]}),jsxRuntimeExports.jsx("div",{className:"w-full h-3 bg-slate-900/50 rounded-full overflow-hidden border border-white/5 relative z-10",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-1000 ease-out shadow-[0_0_10px_rgba(59,130,246,0.5)]",style:{width:`${Math.max(5,Math.min(100,un))}%`}})}),jsxRuntimeExports.jsxs("div",{className:"text-right text-[10px] text-slate-500 mt-1 relative z-10",children:[Math.floor(sn-tn)," pts to next level"]})]}),jsxRuntimeExports.jsxs("h3",{className:"text-lg font-bold mb-4 px-1 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Gamepad2,{className:"text-purple-400"})," Arcade"]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 gap-4",children:dn.map(fn=>jsxRuntimeExports.jsxs("button",{onClick:()=>St(fn.id),className:"group relative overflow-hidden glass-panel hover:bg-white/5 p-4 rounded-2xl transition-all text-left flex items-center gap-4 hover:border-blue-500/30 hover:shadow-lg hover:shadow-blue-500/10 active:scale-[0.98]",children:[jsxRuntimeExports.jsx("div",{className:`w-14 h-14 rounded-2xl ${fn.color} bg-opacity-20 flex items-center justify-center text-3xl shadow-inner group-hover:scale-110 transition-transform duration-300`,children:fn.icon}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("div",{className:"font-bold text-white text-lg group-hover:text-blue-300 transition-colors",children:fn.name}),jsxRuntimeExports.jsx("div",{className:"text-xs text-slate-400",children:fn.desc})]}),jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsx("div",{className:"text-[10px] text-slate-500 uppercase font-bold",children:"High Score"}),jsxRuntimeExports.jsx("div",{className:"text-xl font-mono text-white",children:en[fn.id]||0})]})]},fn.id))})]})};function ok$1(){}function unreachable(){}function stringify$1(St,e){const en={};return(St[St.length-1]===""?[...St,""]:St).join((en.padRight?" ":"")+","+(en.padLeft===!1?"":" ")).trim()}const nameRe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,nameReJsx=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,emptyOptions$2={};function name$1(St,e){return(emptyOptions$2.jsx?nameReJsx:nameRe).test(St)}const re$1=/[ \t\n\f\r]/g;function whitespace(St){return typeof St=="object"?St.type==="text"?empty$2(St.value):!1:empty$2(St)}function empty$2(St){return St.replace(re$1,"")===""}class Schema{constructor(e,en,tn){this.normal=en,this.property=e,tn&&(this.space=tn)}}Schema.prototype.normal={};Schema.prototype.property={};Schema.prototype.space=void 0;function merge(St,e){const en={},tn={};for(const nn of St)Object.assign(en,nn.property),Object.assign(tn,nn.normal);return new Schema(en,tn,e)}function normalize$1(St){return St.toLowerCase()}class Info{constructor(e,en){this.attribute=en,this.property=e}}Info.prototype.attribute="";Info.prototype.booleanish=!1;Info.prototype.boolean=!1;Info.prototype.commaOrSpaceSeparated=!1;Info.prototype.commaSeparated=!1;Info.prototype.defined=!1;Info.prototype.mustUseProperty=!1;Info.prototype.number=!1;Info.prototype.overloadedBoolean=!1;Info.prototype.property="";Info.prototype.spaceSeparated=!1;Info.prototype.space=void 0;let powers=0;const boolean=increment(),booleanish=increment(),overloadedBoolean=increment(),number=increment(),spaceSeparated=increment(),commaSeparated=increment(),commaOrSpaceSeparated=increment();function increment(){return 2**++powers}const types=Object.freeze(Object.defineProperty({__proto__:null,boolean,booleanish,commaOrSpaceSeparated,commaSeparated,number,overloadedBoolean,spaceSeparated},Symbol.toStringTag,{value:"Module"})),checks=Object.keys(types);class DefinedInfo extends Info{constructor(e,en,tn,nn){let sn=-1;if(super(e,en),mark(this,"space",nn),typeof tn=="number")for(;++sn<checks.length;){const on=checks[sn];mark(this,checks[sn],(tn&types[on])===types[on])}}}DefinedInfo.prototype.defined=!0;function mark(St,e,en){en&&(St[e]=en)}function create(St){const e={},en={};for(const[tn,nn]of Object.entries(St.properties)){const sn=new DefinedInfo(tn,St.transform(St.attributes||{},tn),nn,St.space);St.mustUseProperty&&St.mustUseProperty.includes(tn)&&(sn.mustUseProperty=!0),e[tn]=sn,en[normalize$1(tn)]=tn,en[normalize$1(sn.attribute)]=tn}return new Schema(e,en,St.space)}const aria=create({properties:{ariaActiveDescendant:null,ariaAtomic:booleanish,ariaAutoComplete:null,ariaBusy:booleanish,ariaChecked:booleanish,ariaColCount:number,ariaColIndex:number,ariaColSpan:number,ariaControls:spaceSeparated,ariaCurrent:null,ariaDescribedBy:spaceSeparated,ariaDetails:null,ariaDisabled:booleanish,ariaDropEffect:spaceSeparated,ariaErrorMessage:null,ariaExpanded:booleanish,ariaFlowTo:spaceSeparated,ariaGrabbed:booleanish,ariaHasPopup:null,ariaHidden:booleanish,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:spaceSeparated,ariaLevel:number,ariaLive:null,ariaModal:booleanish,ariaMultiLine:booleanish,ariaMultiSelectable:booleanish,ariaOrientation:null,ariaOwns:spaceSeparated,ariaPlaceholder:null,ariaPosInSet:number,ariaPressed:booleanish,ariaReadOnly:booleanish,ariaRelevant:null,ariaRequired:booleanish,ariaRoleDescription:spaceSeparated,ariaRowCount:number,ariaRowIndex:number,ariaRowSpan:number,ariaSelected:booleanish,ariaSetSize:number,ariaSort:null,ariaValueMax:number,ariaValueMin:number,ariaValueNow:number,ariaValueText:null,role:null},transform(St,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function caseSensitiveTransform(St,e){return e in St?St[e]:e}function caseInsensitiveTransform(St,e){return caseSensitiveTransform(St,e.toLowerCase())}const html$2=create({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:commaSeparated,acceptCharset:spaceSeparated,accessKey:spaceSeparated,action:null,allow:null,allowFullScreen:boolean,allowPaymentRequest:boolean,allowUserMedia:boolean,alt:null,as:null,async:boolean,autoCapitalize:null,autoComplete:spaceSeparated,autoFocus:boolean,autoPlay:boolean,blocking:spaceSeparated,capture:null,charSet:null,checked:boolean,cite:null,className:spaceSeparated,cols:number,colSpan:null,content:null,contentEditable:booleanish,controls:boolean,controlsList:spaceSeparated,coords:number|commaSeparated,crossOrigin:null,data:null,dateTime:null,decoding:null,default:boolean,defer:boolean,dir:null,dirName:null,disabled:boolean,download:overloadedBoolean,draggable:booleanish,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:boolean,formTarget:null,headers:spaceSeparated,height:number,hidden:overloadedBoolean,high:number,href:null,hrefLang:null,htmlFor:spaceSeparated,httpEquiv:spaceSeparated,id:null,imageSizes:null,imageSrcSet:null,inert:boolean,inputMode:null,integrity:null,is:null,isMap:boolean,itemId:null,itemProp:spaceSeparated,itemRef:spaceSeparated,itemScope:boolean,itemType:spaceSeparated,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:boolean,low:number,manifest:null,max:null,maxLength:number,media:null,method:null,min:null,minLength:number,multiple:boolean,muted:boolean,name:null,nonce:null,noModule:boolean,noValidate:boolean,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:boolean,optimum:number,pattern:null,ping:spaceSeparated,placeholder:null,playsInline:boolean,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:boolean,referrerPolicy:null,rel:spaceSeparated,required:boolean,reversed:boolean,rows:number,rowSpan:number,sandbox:spaceSeparated,scope:null,scoped:boolean,seamless:boolean,selected:boolean,shadowRootClonable:boolean,shadowRootDelegatesFocus:boolean,shadowRootMode:null,shape:null,size:number,sizes:null,slot:null,span:number,spellCheck:booleanish,src:null,srcDoc:null,srcLang:null,srcSet:null,start:number,step:null,style:null,tabIndex:number,target:null,title:null,translate:null,type:null,typeMustMatch:boolean,useMap:null,value:booleanish,width:number,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:spaceSeparated,axis:null,background:null,bgColor:null,border:number,borderColor:null,bottomMargin:number,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:boolean,declare:boolean,event:null,face:null,frame:null,frameBorder:null,hSpace:number,leftMargin:number,link:null,longDesc:null,lowSrc:null,marginHeight:number,marginWidth:number,noResize:boolean,noHref:boolean,noShade:boolean,noWrap:boolean,object:null,profile:null,prompt:null,rev:null,rightMargin:number,rules:null,scheme:null,scrolling:booleanish,standby:null,summary:null,text:null,topMargin:number,valueType:null,version:null,vAlign:null,vLink:null,vSpace:number,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:boolean,disableRemotePlayback:boolean,prefix:null,property:null,results:number,security:null,unselectable:null},space:"html",transform:caseInsensitiveTransform}),svg$1=create({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:commaOrSpaceSeparated,accentHeight:number,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:number,amplitude:number,arabicForm:null,ascent:number,attributeName:null,attributeType:null,azimuth:number,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:number,by:null,calcMode:null,capHeight:number,className:spaceSeparated,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:number,diffuseConstant:number,direction:null,display:null,dur:null,divisor:number,dominantBaseline:null,download:boolean,dx:null,dy:null,edgeMode:null,editable:null,elevation:number,enableBackground:null,end:null,event:null,exponent:number,externalResourcesRequired:null,fill:null,fillOpacity:number,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:commaSeparated,g2:commaSeparated,glyphName:commaSeparated,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:number,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:number,horizOriginX:number,horizOriginY:number,id:null,ideographic:number,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:number,k:number,k1:number,k2:number,k3:number,k4:number,kernelMatrix:commaOrSpaceSeparated,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:number,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:number,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:number,overlineThickness:number,paintOrder:null,panose1:null,path:null,pathLength:number,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:spaceSeparated,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:number,pointsAtY:number,pointsAtZ:number,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:commaOrSpaceSeparated,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:commaOrSpaceSeparated,rev:commaOrSpaceSeparated,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:commaOrSpaceSeparated,requiredFeatures:commaOrSpaceSeparated,requiredFonts:commaOrSpaceSeparated,requiredFormats:commaOrSpaceSeparated,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:number,specularExponent:number,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:number,strikethroughThickness:number,string:null,stroke:null,strokeDashArray:commaOrSpaceSeparated,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:number,strokeOpacity:number,strokeWidth:null,style:null,surfaceScale:number,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:commaOrSpaceSeparated,tabIndex:number,tableValues:null,target:null,targetX:number,targetY:number,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:commaOrSpaceSeparated,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:number,underlineThickness:number,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:number,values:null,vAlphabetic:number,vMathematical:number,vectorEffect:null,vHanging:number,vIdeographic:number,version:null,vertAdvY:number,vertOriginX:number,vertOriginY:number,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:number,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:caseSensitiveTransform}),xlink=create({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(St,e){return"xlink:"+e.slice(5).toLowerCase()}}),xmlns=create({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:caseInsensitiveTransform}),xml=create({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(St,e){return"xml:"+e.slice(3).toLowerCase()}}),hastToReact={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},cap$1=/[A-Z]/g,dash=/-[a-z]/g,valid=/^data[-\w.:]+$/i;function find(St,e){const en=normalize$1(e);let tn=e,nn=Info;if(en in St.normal)return St.property[St.normal[en]];if(en.length>4&&en.slice(0,4)==="data"&&valid.test(e)){if(e.charAt(4)==="-"){const sn=e.slice(5).replace(dash,camelcase);tn="data"+sn.charAt(0).toUpperCase()+sn.slice(1)}else{const sn=e.slice(4);if(!dash.test(sn)){let on=sn.replace(cap$1,kebab);on.charAt(0)!=="-"&&(on="-"+on),e="data"+on}}nn=DefinedInfo}return new nn(tn,e)}function kebab(St){return"-"+St.toLowerCase()}function camelcase(St){return St.charAt(1).toUpperCase()}const html$1=merge([aria,html$2,xlink,xmlns,xml],"html"),svg=merge([aria,svg$1,xlink,xmlns,xml],"svg");function stringify(St){return St.join(" ").trim()}var cjs$2={},COMMENT_REGEX=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,NEWLINE_REGEX=/\n/g,WHITESPACE_REGEX=/^\s*/,PROPERTY_REGEX=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,COLON_REGEX=/^:\s*/,VALUE_REGEX=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,SEMICOLON_REGEX=/^[;\s]*/,TRIM_REGEX=/^\s+|\s+$/g,NEWLINE=`
`,FORWARD_SLASH="/",ASTERISK="*",EMPTY_STRING="",TYPE_COMMENT="comment",TYPE_DECLARATION="declaration";function index$1(St,e){if(typeof St!="string")throw new TypeError("First argument must be a string");if(!St)return[];e=e||{};var en=1,tn=1;function nn(pn){var mn=pn.match(NEWLINE_REGEX);mn&&(en+=mn.length);var xn=pn.lastIndexOf(NEWLINE);tn=~xn?pn.length-xn:tn+pn.length}function sn(){var pn={line:en,column:tn};return function(mn){return mn.position=new on(pn),fn(),mn}}function on(pn){this.start=pn,this.end={line:en,column:tn},this.source=e.source}on.prototype.content=St;function un(pn){var mn=new Error(e.source+":"+en+":"+tn+": "+pn);if(mn.reason=pn,mn.filename=e.source,mn.line=en,mn.column=tn,mn.source=St,!e.silent)throw mn}function dn(pn){var mn=pn.exec(St);if(mn){var xn=mn[0];return nn(xn),St=St.slice(xn.length),mn}}function fn(){dn(WHITESPACE_REGEX)}function hn(pn){var mn;for(pn=pn||[];mn=an();)mn!==!1&&pn.push(mn);return pn}function an(){var pn=sn();if(!(FORWARD_SLASH!=St.charAt(0)||ASTERISK!=St.charAt(1))){for(var mn=2;EMPTY_STRING!=St.charAt(mn)&&(ASTERISK!=St.charAt(mn)||FORWARD_SLASH!=St.charAt(mn+1));)++mn;if(mn+=2,EMPTY_STRING===St.charAt(mn-1))return un("End of comment missing");var xn=St.slice(2,mn-2);return tn+=2,nn(xn),St=St.slice(mn),tn+=2,pn({type:TYPE_COMMENT,comment:xn})}}function rn(){var pn=sn(),mn=dn(PROPERTY_REGEX);if(mn){if(an(),!dn(COLON_REGEX))return un("property missing ':'");var xn=dn(VALUE_REGEX),gn=pn({type:TYPE_DECLARATION,property:trim(mn[0].replace(COMMENT_REGEX,EMPTY_STRING)),value:xn?trim(xn[0].replace(COMMENT_REGEX,EMPTY_STRING)):EMPTY_STRING});return dn(SEMICOLON_REGEX),gn}}function cn(){var pn=[];hn(pn);for(var mn;mn=rn();)mn!==!1&&(pn.push(mn),hn(pn));return pn}return fn(),cn()}function trim(St){return St?St.replace(TRIM_REGEX,EMPTY_STRING):EMPTY_STRING}var cjs$1=index$1,__importDefault$1=commonjsGlobal&&commonjsGlobal.__importDefault||function(St){return St&&St.__esModule?St:{default:St}};Object.defineProperty(cjs$2,"__esModule",{value:!0});cjs$2.default=StyleToObject;const inline_style_parser_1=__importDefault$1(cjs$1);function StyleToObject(St,e){let en=null;if(!St||typeof St!="string")return en;const tn=(0,inline_style_parser_1.default)(St),nn=typeof e=="function";return tn.forEach(sn=>{if(sn.type!=="declaration")return;const{property:on,value:un}=sn;nn?e(on,un,sn):un&&(en=en||{},en[on]=un)}),en}var utilities={};Object.defineProperty(utilities,"__esModule",{value:!0});utilities.camelCase=void 0;var CUSTOM_PROPERTY_REGEX=/^--[a-zA-Z0-9_-]+$/,HYPHEN_REGEX=/-([a-z])/g,NO_HYPHEN_REGEX=/^[^-]+$/,VENDOR_PREFIX_REGEX=/^-(webkit|moz|ms|o|khtml)-/,MS_VENDOR_PREFIX_REGEX=/^-(ms)-/,skipCamelCase=function(St){return!St||NO_HYPHEN_REGEX.test(St)||CUSTOM_PROPERTY_REGEX.test(St)},capitalize=function(St,e){return e.toUpperCase()},trimHyphen=function(St,e){return"".concat(e,"-")},camelCase=function(St,e){return e===void 0&&(e={}),skipCamelCase(St)?St:(St=St.toLowerCase(),e.reactCompat?St=St.replace(MS_VENDOR_PREFIX_REGEX,trimHyphen):St=St.replace(VENDOR_PREFIX_REGEX,trimHyphen),St.replace(HYPHEN_REGEX,capitalize))};utilities.camelCase=camelCase;var __importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(St){return St&&St.__esModule?St:{default:St}},style_to_object_1=__importDefault(cjs$2),utilities_1=utilities;function StyleToJS(St,e){var en={};return!St||typeof St!="string"||(0,style_to_object_1.default)(St,function(tn,nn){tn&&nn&&(en[(0,utilities_1.camelCase)(tn,e)]=nn)}),en}StyleToJS.default=StyleToJS;var cjs=StyleToJS;const styleToJs=getDefaultExportFromCjs(cjs),pointEnd=point$2("end"),pointStart=point$2("start");function point$2(St){return e;function e(en){const tn=en&&en.position&&en.position[St]||{};if(typeof tn.line=="number"&&tn.line>0&&typeof tn.column=="number"&&tn.column>0)return{line:tn.line,column:tn.column,offset:typeof tn.offset=="number"&&tn.offset>-1?tn.offset:void 0}}}function position$1(St){const e=pointStart(St),en=pointEnd(St);if(e&&en)return{start:e,end:en}}function stringifyPosition(St){return!St||typeof St!="object"?"":"position"in St||"type"in St?position(St.position):"start"in St||"end"in St?position(St):"line"in St||"column"in St?point$1(St):""}function point$1(St){return index(St&&St.line)+":"+index(St&&St.column)}function position(St){return point$1(St&&St.start)+"-"+point$1(St&&St.end)}function index(St){return St&&typeof St=="number"?St:1}class VFileMessage extends Error{constructor(e,en,tn){super(),typeof en=="string"&&(tn=en,en=void 0);let nn="",sn={},on=!1;if(en&&("line"in en&&"column"in en?sn={place:en}:"start"in en&&"end"in en?sn={place:en}:"type"in en?sn={ancestors:[en],place:en.position}:sn={...en}),typeof e=="string"?nn=e:!sn.cause&&e&&(on=!0,nn=e.message,sn.cause=e),!sn.ruleId&&!sn.source&&typeof tn=="string"){const dn=tn.indexOf(":");dn===-1?sn.ruleId=tn:(sn.source=tn.slice(0,dn),sn.ruleId=tn.slice(dn+1))}if(!sn.place&&sn.ancestors&&sn.ancestors){const dn=sn.ancestors[sn.ancestors.length-1];dn&&(sn.place=dn.position)}const un=sn.place&&"start"in sn.place?sn.place.start:sn.place;this.ancestors=sn.ancestors||void 0,this.cause=sn.cause||void 0,this.column=un?un.column:void 0,this.fatal=void 0,this.file="",this.message=nn,this.line=un?un.line:void 0,this.name=stringifyPosition(sn.place)||"1:1",this.place=sn.place||void 0,this.reason=this.message,this.ruleId=sn.ruleId||void 0,this.source=sn.source||void 0,this.stack=on&&sn.cause&&typeof sn.cause.stack=="string"?sn.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}VFileMessage.prototype.file="";VFileMessage.prototype.name="";VFileMessage.prototype.reason="";VFileMessage.prototype.message="";VFileMessage.prototype.stack="";VFileMessage.prototype.column=void 0;VFileMessage.prototype.line=void 0;VFileMessage.prototype.ancestors=void 0;VFileMessage.prototype.cause=void 0;VFileMessage.prototype.fatal=void 0;VFileMessage.prototype.place=void 0;VFileMessage.prototype.ruleId=void 0;VFileMessage.prototype.source=void 0;const own$3={}.hasOwnProperty,emptyMap=new Map,cap=/[A-Z]/g,tableElements=new Set(["table","tbody","thead","tfoot","tr"]),tableCellElement=new Set(["td","th"]),docs="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function toJsxRuntime(St,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const en=e.filePath||void 0;let tn;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");tn=developmentCreate(en,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");tn=productionCreate(en,e.jsx,e.jsxs)}const nn={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:tn,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:en,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?svg:html$1,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},sn=one$1(nn,St,void 0);return sn&&typeof sn!="string"?sn:nn.create(St,nn.Fragment,{children:sn||void 0},void 0)}function one$1(St,e,en){if(e.type==="element")return element$1(St,e,en);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return mdxExpression(St,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return mdxJsxElement(St,e,en);if(e.type==="mdxjsEsm")return mdxEsm(St,e);if(e.type==="root")return root$1(St,e,en);if(e.type==="text")return text$3(St,e)}function element$1(St,e,en){const tn=St.schema;let nn=tn;e.tagName.toLowerCase()==="svg"&&tn.space==="html"&&(nn=svg,St.schema=nn),St.ancestors.push(e);const sn=findComponentFromName(St,e.tagName,!1),on=createElementProps(St,e);let un=createChildren(St,e);return tableElements.has(e.tagName)&&(un=un.filter(function(dn){return typeof dn=="string"?!whitespace(dn):!0})),addNode(St,on,sn,e),addChildren(on,un),St.ancestors.pop(),St.schema=tn,St.create(e,sn,on,en)}function mdxExpression(St,e){if(e.data&&e.data.estree&&St.evaluater){const tn=e.data.estree.body[0];return tn.type,St.evaluater.evaluateExpression(tn.expression)}crashEstree(St,e.position)}function mdxEsm(St,e){if(e.data&&e.data.estree&&St.evaluater)return St.evaluater.evaluateProgram(e.data.estree);crashEstree(St,e.position)}function mdxJsxElement(St,e,en){const tn=St.schema;let nn=tn;e.name==="svg"&&tn.space==="html"&&(nn=svg,St.schema=nn),St.ancestors.push(e);const sn=e.name===null?St.Fragment:findComponentFromName(St,e.name,!0),on=createJsxElementProps(St,e),un=createChildren(St,e);return addNode(St,on,sn,e),addChildren(on,un),St.ancestors.pop(),St.schema=tn,St.create(e,sn,on,en)}function root$1(St,e,en){const tn={};return addChildren(tn,createChildren(St,e)),St.create(e,St.Fragment,tn,en)}function text$3(St,e){return e.value}function addNode(St,e,en,tn){typeof en!="string"&&en!==St.Fragment&&St.passNode&&(e.node=tn)}function addChildren(St,e){if(e.length>0){const en=e.length>1?e:e[0];en&&(St.children=en)}}function productionCreate(St,e,en){return tn;function tn(nn,sn,on,un){const fn=Array.isArray(on.children)?en:e;return un?fn(sn,on,un):fn(sn,on)}}function developmentCreate(St,e){return en;function en(tn,nn,sn,on){const un=Array.isArray(sn.children),dn=pointStart(tn);return e(nn,sn,on,un,{columnNumber:dn?dn.column-1:void 0,fileName:St,lineNumber:dn?dn.line:void 0},void 0)}}function createElementProps(St,e){const en={};let tn,nn;for(nn in e.properties)if(nn!=="children"&&own$3.call(e.properties,nn)){const sn=createProperty(St,nn,e.properties[nn]);if(sn){const[on,un]=sn;St.tableCellAlignToStyle&&on==="align"&&typeof un=="string"&&tableCellElement.has(e.tagName)?tn=un:en[on]=un}}if(tn){const sn=en.style||(en.style={});sn[St.stylePropertyNameCase==="css"?"text-align":"textAlign"]=tn}return en}function createJsxElementProps(St,e){const en={};for(const tn of e.attributes)if(tn.type==="mdxJsxExpressionAttribute")if(tn.data&&tn.data.estree&&St.evaluater){const sn=tn.data.estree.body[0];sn.type;const on=sn.expression;on.type;const un=on.properties[0];un.type,Object.assign(en,St.evaluater.evaluateExpression(un.argument))}else crashEstree(St,e.position);else{const nn=tn.name;let sn;if(tn.value&&typeof tn.value=="object")if(tn.value.data&&tn.value.data.estree&&St.evaluater){const un=tn.value.data.estree.body[0];un.type,sn=St.evaluater.evaluateExpression(un.expression)}else crashEstree(St,e.position);else sn=tn.value===null?!0:tn.value;en[nn]=sn}return en}function createChildren(St,e){const en=[];let tn=-1;const nn=St.passKeys?new Map:emptyMap;for(;++tn<e.children.length;){const sn=e.children[tn];let on;if(St.passKeys){const dn=sn.type==="element"?sn.tagName:sn.type==="mdxJsxFlowElement"||sn.type==="mdxJsxTextElement"?sn.name:void 0;if(dn){const fn=nn.get(dn)||0;on=dn+"-"+fn,nn.set(dn,fn+1)}}const un=one$1(St,sn,on);un!==void 0&&en.push(un)}return en}function createProperty(St,e,en){const tn=find(St.schema,e);if(!(en==null||typeof en=="number"&&Number.isNaN(en))){if(Array.isArray(en)&&(en=tn.commaSeparated?stringify$1(en):stringify(en)),tn.property==="style"){let nn=typeof en=="object"?en:parseStyle(St,String(en));return St.stylePropertyNameCase==="css"&&(nn=transformStylesToCssCasing(nn)),["style",nn]}return[St.elementAttributeNameCase==="react"&&tn.space?hastToReact[tn.property]||tn.property:tn.attribute,en]}}function parseStyle(St,e){try{return styleToJs(e,{reactCompat:!0})}catch(en){if(St.ignoreInvalidStyle)return{};const tn=en,nn=new VFileMessage("Cannot parse `style` attribute",{ancestors:St.ancestors,cause:tn,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw nn.file=St.filePath||void 0,nn.url=docs+"#cannot-parse-style-attribute",nn}}function findComponentFromName(St,e,en){let tn;if(!en)tn={type:"Literal",value:e};else if(e.includes(".")){const nn=e.split(".");let sn=-1,on;for(;++sn<nn.length;){const un=name$1(nn[sn])?{type:"Identifier",name:nn[sn]}:{type:"Literal",value:nn[sn]};on=on?{type:"MemberExpression",object:on,property:un,computed:!!(sn&&un.type==="Literal"),optional:!1}:un}tn=on}else tn=name$1(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(tn.type==="Literal"){const nn=tn.value;return own$3.call(St.components,nn)?St.components[nn]:nn}if(St.evaluater)return St.evaluater.evaluateExpression(tn);crashEstree(St)}function crashEstree(St,e){const en=new VFileMessage("Cannot handle MDX estrees without `createEvaluater`",{ancestors:St.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw en.file=St.filePath||void 0,en.url=docs+"#cannot-handle-mdx-estrees-without-createevaluater",en}function transformStylesToCssCasing(St){const e={};let en;for(en in St)own$3.call(St,en)&&(e[transformStyleToCssCasing(en)]=St[en]);return e}function transformStyleToCssCasing(St){let e=St.replace(cap,toDash);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function toDash(St){return"-"+St.toLowerCase()}const urlAttributes={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},emptyOptions$1={};function toString$2(St,e){const en=emptyOptions$1,tn=typeof en.includeImageAlt=="boolean"?en.includeImageAlt:!0,nn=typeof en.includeHtml=="boolean"?en.includeHtml:!0;return one(St,tn,nn)}function one(St,e,en){if(node(St)){if("value"in St)return St.type==="html"&&!en?"":St.value;if(e&&"alt"in St&&St.alt)return St.alt;if("children"in St)return all(St.children,e,en)}return Array.isArray(St)?all(St,e,en):""}function all(St,e,en){const tn=[];let nn=-1;for(;++nn<St.length;)tn[nn]=one(St[nn],e,en);return tn.join("")}function node(St){return!!(St&&typeof St=="object")}const element=document.createElement("i");function decodeNamedCharacterReference(St){const e="&"+St+";";element.innerHTML=e;const en=element.textContent;return en.charCodeAt(en.length-1)===59&&St!=="semi"||en===e?!1:en}function splice(St,e,en,tn){const nn=St.length;let sn=0,on;if(e<0?e=-e>nn?0:nn+e:e=e>nn?nn:e,en=en>0?en:0,tn.length<1e4)on=Array.from(tn),on.unshift(e,en),St.splice(...on);else for(en&&St.splice(e,en);sn<tn.length;)on=tn.slice(sn,sn+1e4),on.unshift(e,0),St.splice(...on),sn+=1e4,e+=1e4}function push(St,e){return St.length>0?(splice(St,St.length,0,e),St):e}const hasOwnProperty={}.hasOwnProperty;function combineExtensions(St){const e={};let en=-1;for(;++en<St.length;)syntaxExtension(e,St[en]);return e}function syntaxExtension(St,e){let en;for(en in e){const nn=(hasOwnProperty.call(St,en)?St[en]:void 0)||(St[en]={}),sn=e[en];let on;if(sn)for(on in sn){hasOwnProperty.call(nn,on)||(nn[on]=[]);const un=sn[on];constructs(nn[on],Array.isArray(un)?un:un?[un]:[])}}}function constructs(St,e){let en=-1;const tn=[];for(;++en<e.length;)(e[en].add==="after"?St:tn).push(e[en]);splice(St,0,0,tn)}function decodeNumericCharacterReference(St,e){const en=Number.parseInt(St,e);return en<9||en===11||en>13&&en<32||en>126&&en<160||en>55295&&en<57344||en>64975&&en<65008||(en&65535)===65535||(en&65535)===65534||en>1114111?"":String.fromCodePoint(en)}function normalizeIdentifier(St){return St.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const asciiAlpha=regexCheck(/[A-Za-z]/),asciiAlphanumeric=regexCheck(/[\dA-Za-z]/),asciiAtext=regexCheck(/[#-'*+\--9=?A-Z^-~]/);function asciiControl(St){return St!==null&&(St<32||St===127)}const asciiDigit=regexCheck(/\d/),asciiHexDigit=regexCheck(/[\dA-Fa-f]/),asciiPunctuation=regexCheck(/[!-/:-@[-`{-~]/);function markdownLineEnding(St){return St!==null&&St<-2}function markdownLineEndingOrSpace(St){return St!==null&&(St<0||St===32)}function markdownSpace(St){return St===-2||St===-1||St===32}const unicodePunctuation=regexCheck(new RegExp("\\p{P}|\\p{S}","u")),unicodeWhitespace=regexCheck(/\s/);function regexCheck(St){return e;function e(en){return en!==null&&en>-1&&St.test(String.fromCharCode(en))}}function normalizeUri(St){const e=[];let en=-1,tn=0,nn=0;for(;++en<St.length;){const sn=St.charCodeAt(en);let on="";if(sn===37&&asciiAlphanumeric(St.charCodeAt(en+1))&&asciiAlphanumeric(St.charCodeAt(en+2)))nn=2;else if(sn<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(sn))||(on=String.fromCharCode(sn));else if(sn>55295&&sn<57344){const un=St.charCodeAt(en+1);sn<56320&&un>56319&&un<57344?(on=String.fromCharCode(sn,un),nn=1):on=""}else on=String.fromCharCode(sn);on&&(e.push(St.slice(tn,en),encodeURIComponent(on)),tn=en+nn+1,on=""),nn&&(en+=nn,nn=0)}return e.join("")+St.slice(tn)}function factorySpace(St,e,en,tn){const nn=tn?tn-1:Number.POSITIVE_INFINITY;let sn=0;return on;function on(dn){return markdownSpace(dn)?(St.enter(en),un(dn)):e(dn)}function un(dn){return markdownSpace(dn)&&sn++<nn?(St.consume(dn),un):(St.exit(en),e(dn))}}const content$1={tokenize:initializeContent};function initializeContent(St){const e=St.attempt(this.parser.constructs.contentInitial,tn,nn);let en;return e;function tn(un){if(un===null){St.consume(un);return}return St.enter("lineEnding"),St.consume(un),St.exit("lineEnding"),factorySpace(St,e,"linePrefix")}function nn(un){return St.enter("paragraph"),sn(un)}function sn(un){const dn=St.enter("chunkText",{contentType:"text",previous:en});return en&&(en.next=dn),en=dn,on(un)}function on(un){if(un===null){St.exit("chunkText"),St.exit("paragraph"),St.consume(un);return}return markdownLineEnding(un)?(St.consume(un),St.exit("chunkText"),sn):(St.consume(un),on)}}const document$2={tokenize:initializeDocument},containerConstruct={tokenize:tokenizeContainer};function initializeDocument(St){const e=this,en=[];let tn=0,nn,sn,on;return un;function un(bn){if(tn<en.length){const wn=en[tn];return e.containerState=wn[1],St.attempt(wn[0].continuation,dn,fn)(bn)}return fn(bn)}function dn(bn){if(tn++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,nn&&yn();const wn=e.events.length;let _n=wn,Tn;for(;_n--;)if(e.events[_n][0]==="exit"&&e.events[_n][1].type==="chunkFlow"){Tn=e.events[_n][1].end;break}gn(tn);let An=wn;for(;An<e.events.length;)e.events[An][1].end={...Tn},An++;return splice(e.events,_n+1,0,e.events.slice(wn)),e.events.length=An,fn(bn)}return un(bn)}function fn(bn){if(tn===en.length){if(!nn)return rn(bn);if(nn.currentConstruct&&nn.currentConstruct.concrete)return pn(bn);e.interrupt=!!(nn.currentConstruct&&!nn._gfmTableDynamicInterruptHack)}return e.containerState={},St.check(containerConstruct,hn,an)(bn)}function hn(bn){return nn&&yn(),gn(tn),rn(bn)}function an(bn){return e.parser.lazy[e.now().line]=tn!==en.length,on=e.now().offset,pn(bn)}function rn(bn){return e.containerState={},St.attempt(containerConstruct,cn,pn)(bn)}function cn(bn){return tn++,en.push([e.currentConstruct,e.containerState]),rn(bn)}function pn(bn){if(bn===null){nn&&yn(),gn(0),St.consume(bn);return}return nn=nn||e.parser.flow(e.now()),St.enter("chunkFlow",{_tokenizer:nn,contentType:"flow",previous:sn}),mn(bn)}function mn(bn){if(bn===null){xn(St.exit("chunkFlow"),!0),gn(0),St.consume(bn);return}return markdownLineEnding(bn)?(St.consume(bn),xn(St.exit("chunkFlow")),tn=0,e.interrupt=void 0,un):(St.consume(bn),mn)}function xn(bn,wn){const _n=e.sliceStream(bn);if(wn&&_n.push(null),bn.previous=sn,sn&&(sn.next=bn),sn=bn,nn.defineSkip(bn.start),nn.write(_n),e.parser.lazy[bn.start.line]){let Tn=nn.events.length;for(;Tn--;)if(nn.events[Tn][1].start.offset<on&&(!nn.events[Tn][1].end||nn.events[Tn][1].end.offset>on))return;const An=e.events.length;let Pn=An,Sn,Cn;for(;Pn--;)if(e.events[Pn][0]==="exit"&&e.events[Pn][1].type==="chunkFlow"){if(Sn){Cn=e.events[Pn][1].end;break}Sn=!0}for(gn(tn),Tn=An;Tn<e.events.length;)e.events[Tn][1].end={...Cn},Tn++;splice(e.events,Pn+1,0,e.events.slice(An)),e.events.length=Tn}}function gn(bn){let wn=en.length;for(;wn-- >bn;){const _n=en[wn];e.containerState=_n[1],_n[0].exit.call(e,St)}en.length=bn}function yn(){nn.write([null]),sn=void 0,nn=void 0,e.containerState._closeFlow=void 0}}function tokenizeContainer(St,e,en){return factorySpace(St,St.attempt(this.parser.constructs.document,e,en),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function classifyCharacter(St){if(St===null||markdownLineEndingOrSpace(St)||unicodeWhitespace(St))return 1;if(unicodePunctuation(St))return 2}function resolveAll(St,e,en){const tn=[];let nn=-1;for(;++nn<St.length;){const sn=St[nn].resolveAll;sn&&!tn.includes(sn)&&(e=sn(e,en),tn.push(sn))}return e}const attention={name:"attention",resolveAll:resolveAllAttention,tokenize:tokenizeAttention};function resolveAllAttention(St,e){let en=-1,tn,nn,sn,on,un,dn,fn,hn;for(;++en<St.length;)if(St[en][0]==="enter"&&St[en][1].type==="attentionSequence"&&St[en][1]._close){for(tn=en;tn--;)if(St[tn][0]==="exit"&&St[tn][1].type==="attentionSequence"&&St[tn][1]._open&&e.sliceSerialize(St[tn][1]).charCodeAt(0)===e.sliceSerialize(St[en][1]).charCodeAt(0)){if((St[tn][1]._close||St[en][1]._open)&&(St[en][1].end.offset-St[en][1].start.offset)%3&&!((St[tn][1].end.offset-St[tn][1].start.offset+St[en][1].end.offset-St[en][1].start.offset)%3))continue;dn=St[tn][1].end.offset-St[tn][1].start.offset>1&&St[en][1].end.offset-St[en][1].start.offset>1?2:1;const an={...St[tn][1].end},rn={...St[en][1].start};movePoint(an,-dn),movePoint(rn,dn),on={type:dn>1?"strongSequence":"emphasisSequence",start:an,end:{...St[tn][1].end}},un={type:dn>1?"strongSequence":"emphasisSequence",start:{...St[en][1].start},end:rn},sn={type:dn>1?"strongText":"emphasisText",start:{...St[tn][1].end},end:{...St[en][1].start}},nn={type:dn>1?"strong":"emphasis",start:{...on.start},end:{...un.end}},St[tn][1].end={...on.start},St[en][1].start={...un.end},fn=[],St[tn][1].end.offset-St[tn][1].start.offset&&(fn=push(fn,[["enter",St[tn][1],e],["exit",St[tn][1],e]])),fn=push(fn,[["enter",nn,e],["enter",on,e],["exit",on,e],["enter",sn,e]]),fn=push(fn,resolveAll(e.parser.constructs.insideSpan.null,St.slice(tn+1,en),e)),fn=push(fn,[["exit",sn,e],["enter",un,e],["exit",un,e],["exit",nn,e]]),St[en][1].end.offset-St[en][1].start.offset?(hn=2,fn=push(fn,[["enter",St[en][1],e],["exit",St[en][1],e]])):hn=0,splice(St,tn-1,en-tn+3,fn),en=tn+fn.length-hn-2;break}}for(en=-1;++en<St.length;)St[en][1].type==="attentionSequence"&&(St[en][1].type="data");return St}function tokenizeAttention(St,e){const en=this.parser.constructs.attentionMarkers.null,tn=this.previous,nn=classifyCharacter(tn);let sn;return on;function on(dn){return sn=dn,St.enter("attentionSequence"),un(dn)}function un(dn){if(dn===sn)return St.consume(dn),un;const fn=St.exit("attentionSequence"),hn=classifyCharacter(dn),an=!hn||hn===2&&nn||en.includes(dn),rn=!nn||nn===2&&hn||en.includes(tn);return fn._open=!!(sn===42?an:an&&(nn||!rn)),fn._close=!!(sn===42?rn:rn&&(hn||!an)),e(dn)}}function movePoint(St,e){St.column+=e,St.offset+=e,St._bufferIndex+=e}const autolink={name:"autolink",tokenize:tokenizeAutolink};function tokenizeAutolink(St,e,en){let tn=0;return nn;function nn(cn){return St.enter("autolink"),St.enter("autolinkMarker"),St.consume(cn),St.exit("autolinkMarker"),St.enter("autolinkProtocol"),sn}function sn(cn){return asciiAlpha(cn)?(St.consume(cn),on):cn===64?en(cn):fn(cn)}function on(cn){return cn===43||cn===45||cn===46||asciiAlphanumeric(cn)?(tn=1,un(cn)):fn(cn)}function un(cn){return cn===58?(St.consume(cn),tn=0,dn):(cn===43||cn===45||cn===46||asciiAlphanumeric(cn))&&tn++<32?(St.consume(cn),un):(tn=0,fn(cn))}function dn(cn){return cn===62?(St.exit("autolinkProtocol"),St.enter("autolinkMarker"),St.consume(cn),St.exit("autolinkMarker"),St.exit("autolink"),e):cn===null||cn===32||cn===60||asciiControl(cn)?en(cn):(St.consume(cn),dn)}function fn(cn){return cn===64?(St.consume(cn),hn):asciiAtext(cn)?(St.consume(cn),fn):en(cn)}function hn(cn){return asciiAlphanumeric(cn)?an(cn):en(cn)}function an(cn){return cn===46?(St.consume(cn),tn=0,hn):cn===62?(St.exit("autolinkProtocol").type="autolinkEmail",St.enter("autolinkMarker"),St.consume(cn),St.exit("autolinkMarker"),St.exit("autolink"),e):rn(cn)}function rn(cn){if((cn===45||asciiAlphanumeric(cn))&&tn++<63){const pn=cn===45?rn:an;return St.consume(cn),pn}return en(cn)}}const blankLine={partial:!0,tokenize:tokenizeBlankLine};function tokenizeBlankLine(St,e,en){return tn;function tn(sn){return markdownSpace(sn)?factorySpace(St,nn,"linePrefix")(sn):nn(sn)}function nn(sn){return sn===null||markdownLineEnding(sn)?e(sn):en(sn)}}const blockQuote={continuation:{tokenize:tokenizeBlockQuoteContinuation},exit,name:"blockQuote",tokenize:tokenizeBlockQuoteStart};function tokenizeBlockQuoteStart(St,e,en){const tn=this;return nn;function nn(on){if(on===62){const un=tn.containerState;return un.open||(St.enter("blockQuote",{_container:!0}),un.open=!0),St.enter("blockQuotePrefix"),St.enter("blockQuoteMarker"),St.consume(on),St.exit("blockQuoteMarker"),sn}return en(on)}function sn(on){return markdownSpace(on)?(St.enter("blockQuotePrefixWhitespace"),St.consume(on),St.exit("blockQuotePrefixWhitespace"),St.exit("blockQuotePrefix"),e):(St.exit("blockQuotePrefix"),e(on))}}function tokenizeBlockQuoteContinuation(St,e,en){const tn=this;return nn;function nn(on){return markdownSpace(on)?factorySpace(St,sn,"linePrefix",tn.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(on):sn(on)}function sn(on){return St.attempt(blockQuote,e,en)(on)}}function exit(St){St.exit("blockQuote")}const characterEscape={name:"characterEscape",tokenize:tokenizeCharacterEscape};function tokenizeCharacterEscape(St,e,en){return tn;function tn(sn){return St.enter("characterEscape"),St.enter("escapeMarker"),St.consume(sn),St.exit("escapeMarker"),nn}function nn(sn){return asciiPunctuation(sn)?(St.enter("characterEscapeValue"),St.consume(sn),St.exit("characterEscapeValue"),St.exit("characterEscape"),e):en(sn)}}const characterReference={name:"characterReference",tokenize:tokenizeCharacterReference};function tokenizeCharacterReference(St,e,en){const tn=this;let nn=0,sn,on;return un;function un(an){return St.enter("characterReference"),St.enter("characterReferenceMarker"),St.consume(an),St.exit("characterReferenceMarker"),dn}function dn(an){return an===35?(St.enter("characterReferenceMarkerNumeric"),St.consume(an),St.exit("characterReferenceMarkerNumeric"),fn):(St.enter("characterReferenceValue"),sn=31,on=asciiAlphanumeric,hn(an))}function fn(an){return an===88||an===120?(St.enter("characterReferenceMarkerHexadecimal"),St.consume(an),St.exit("characterReferenceMarkerHexadecimal"),St.enter("characterReferenceValue"),sn=6,on=asciiHexDigit,hn):(St.enter("characterReferenceValue"),sn=7,on=asciiDigit,hn(an))}function hn(an){if(an===59&&nn){const rn=St.exit("characterReferenceValue");return on===asciiAlphanumeric&&!decodeNamedCharacterReference(tn.sliceSerialize(rn))?en(an):(St.enter("characterReferenceMarker"),St.consume(an),St.exit("characterReferenceMarker"),St.exit("characterReference"),e)}return on(an)&&nn++<sn?(St.consume(an),hn):en(an)}}const nonLazyContinuation={partial:!0,tokenize:tokenizeNonLazyContinuation},codeFenced={concrete:!0,name:"codeFenced",tokenize:tokenizeCodeFenced};function tokenizeCodeFenced(St,e,en){const tn=this,nn={partial:!0,tokenize:_n};let sn=0,on=0,un;return dn;function dn(Tn){return fn(Tn)}function fn(Tn){const An=tn.events[tn.events.length-1];return sn=An&&An[1].type==="linePrefix"?An[2].sliceSerialize(An[1],!0).length:0,un=Tn,St.enter("codeFenced"),St.enter("codeFencedFence"),St.enter("codeFencedFenceSequence"),hn(Tn)}function hn(Tn){return Tn===un?(on++,St.consume(Tn),hn):on<3?en(Tn):(St.exit("codeFencedFenceSequence"),markdownSpace(Tn)?factorySpace(St,an,"whitespace")(Tn):an(Tn))}function an(Tn){return Tn===null||markdownLineEnding(Tn)?(St.exit("codeFencedFence"),tn.interrupt?e(Tn):St.check(nonLazyContinuation,mn,wn)(Tn)):(St.enter("codeFencedFenceInfo"),St.enter("chunkString",{contentType:"string"}),rn(Tn))}function rn(Tn){return Tn===null||markdownLineEnding(Tn)?(St.exit("chunkString"),St.exit("codeFencedFenceInfo"),an(Tn)):markdownSpace(Tn)?(St.exit("chunkString"),St.exit("codeFencedFenceInfo"),factorySpace(St,cn,"whitespace")(Tn)):Tn===96&&Tn===un?en(Tn):(St.consume(Tn),rn)}function cn(Tn){return Tn===null||markdownLineEnding(Tn)?an(Tn):(St.enter("codeFencedFenceMeta"),St.enter("chunkString",{contentType:"string"}),pn(Tn))}function pn(Tn){return Tn===null||markdownLineEnding(Tn)?(St.exit("chunkString"),St.exit("codeFencedFenceMeta"),an(Tn)):Tn===96&&Tn===un?en(Tn):(St.consume(Tn),pn)}function mn(Tn){return St.attempt(nn,wn,xn)(Tn)}function xn(Tn){return St.enter("lineEnding"),St.consume(Tn),St.exit("lineEnding"),gn}function gn(Tn){return sn>0&&markdownSpace(Tn)?factorySpace(St,yn,"linePrefix",sn+1)(Tn):yn(Tn)}function yn(Tn){return Tn===null||markdownLineEnding(Tn)?St.check(nonLazyContinuation,mn,wn)(Tn):(St.enter("codeFlowValue"),bn(Tn))}function bn(Tn){return Tn===null||markdownLineEnding(Tn)?(St.exit("codeFlowValue"),yn(Tn)):(St.consume(Tn),bn)}function wn(Tn){return St.exit("codeFenced"),e(Tn)}function _n(Tn,An,Pn){let Sn=0;return Cn;function Cn(Bn){return Tn.enter("lineEnding"),Tn.consume(Bn),Tn.exit("lineEnding"),Nn}function Nn(Bn){return Tn.enter("codeFencedFence"),markdownSpace(Bn)?factorySpace(Tn,Mn,"linePrefix",tn.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Bn):Mn(Bn)}function Mn(Bn){return Bn===un?(Tn.enter("codeFencedFenceSequence"),Fn(Bn)):Pn(Bn)}function Fn(Bn){return Bn===un?(Sn++,Tn.consume(Bn),Fn):Sn>=on?(Tn.exit("codeFencedFenceSequence"),markdownSpace(Bn)?factorySpace(Tn,In,"whitespace")(Bn):In(Bn)):Pn(Bn)}function In(Bn){return Bn===null||markdownLineEnding(Bn)?(Tn.exit("codeFencedFence"),An(Bn)):Pn(Bn)}}}function tokenizeNonLazyContinuation(St,e,en){const tn=this;return nn;function nn(on){return on===null?en(on):(St.enter("lineEnding"),St.consume(on),St.exit("lineEnding"),sn)}function sn(on){return tn.parser.lazy[tn.now().line]?en(on):e(on)}}const codeIndented={name:"codeIndented",tokenize:tokenizeCodeIndented},furtherStart={partial:!0,tokenize:tokenizeFurtherStart};function tokenizeCodeIndented(St,e,en){const tn=this;return nn;function nn(fn){return St.enter("codeIndented"),factorySpace(St,sn,"linePrefix",5)(fn)}function sn(fn){const hn=tn.events[tn.events.length-1];return hn&&hn[1].type==="linePrefix"&&hn[2].sliceSerialize(hn[1],!0).length>=4?on(fn):en(fn)}function on(fn){return fn===null?dn(fn):markdownLineEnding(fn)?St.attempt(furtherStart,on,dn)(fn):(St.enter("codeFlowValue"),un(fn))}function un(fn){return fn===null||markdownLineEnding(fn)?(St.exit("codeFlowValue"),on(fn)):(St.consume(fn),un)}function dn(fn){return St.exit("codeIndented"),e(fn)}}function tokenizeFurtherStart(St,e,en){const tn=this;return nn;function nn(on){return tn.parser.lazy[tn.now().line]?en(on):markdownLineEnding(on)?(St.enter("lineEnding"),St.consume(on),St.exit("lineEnding"),nn):factorySpace(St,sn,"linePrefix",5)(on)}function sn(on){const un=tn.events[tn.events.length-1];return un&&un[1].type==="linePrefix"&&un[2].sliceSerialize(un[1],!0).length>=4?e(on):markdownLineEnding(on)?nn(on):en(on)}}const codeText={name:"codeText",previous,resolve:resolveCodeText,tokenize:tokenizeCodeText};function resolveCodeText(St){let e=St.length-4,en=3,tn,nn;if((St[en][1].type==="lineEnding"||St[en][1].type==="space")&&(St[e][1].type==="lineEnding"||St[e][1].type==="space")){for(tn=en;++tn<e;)if(St[tn][1].type==="codeTextData"){St[en][1].type="codeTextPadding",St[e][1].type="codeTextPadding",en+=2,e-=2;break}}for(tn=en-1,e++;++tn<=e;)nn===void 0?tn!==e&&St[tn][1].type!=="lineEnding"&&(nn=tn):(tn===e||St[tn][1].type==="lineEnding")&&(St[nn][1].type="codeTextData",tn!==nn+2&&(St[nn][1].end=St[tn-1][1].end,St.splice(nn+2,tn-nn-2),e-=tn-nn-2,tn=nn+2),nn=void 0);return St}function previous(St){return St!==96||this.events[this.events.length-1][1].type==="characterEscape"}function tokenizeCodeText(St,e,en){let tn=0,nn,sn;return on;function on(an){return St.enter("codeText"),St.enter("codeTextSequence"),un(an)}function un(an){return an===96?(St.consume(an),tn++,un):(St.exit("codeTextSequence"),dn(an))}function dn(an){return an===null?en(an):an===32?(St.enter("space"),St.consume(an),St.exit("space"),dn):an===96?(sn=St.enter("codeTextSequence"),nn=0,hn(an)):markdownLineEnding(an)?(St.enter("lineEnding"),St.consume(an),St.exit("lineEnding"),dn):(St.enter("codeTextData"),fn(an))}function fn(an){return an===null||an===32||an===96||markdownLineEnding(an)?(St.exit("codeTextData"),dn(an)):(St.consume(an),fn)}function hn(an){return an===96?(St.consume(an),nn++,hn):nn===tn?(St.exit("codeTextSequence"),St.exit("codeText"),e(an)):(sn.type="codeTextData",fn(an))}}class SpliceBuffer{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,en){const tn=en??Number.POSITIVE_INFINITY;return tn<this.left.length?this.left.slice(e,tn):e>this.left.length?this.right.slice(this.right.length-tn+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-tn+this.left.length).reverse())}splice(e,en,tn){const nn=en||0;this.setCursor(Math.trunc(e));const sn=this.right.splice(this.right.length-nn,Number.POSITIVE_INFINITY);return tn&&chunkedPush(this.left,tn),sn.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),chunkedPush(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),chunkedPush(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const en=this.left.splice(e,Number.POSITIVE_INFINITY);chunkedPush(this.right,en.reverse())}else{const en=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);chunkedPush(this.left,en.reverse())}}}function chunkedPush(St,e){let en=0;if(e.length<1e4)St.push(...e);else for(;en<e.length;)St.push(...e.slice(en,en+1e4)),en+=1e4}function subtokenize(St){const e={};let en=-1,tn,nn,sn,on,un,dn,fn;const hn=new SpliceBuffer(St);for(;++en<hn.length;){for(;en in e;)en=e[en];if(tn=hn.get(en),en&&tn[1].type==="chunkFlow"&&hn.get(en-1)[1].type==="listItemPrefix"&&(dn=tn[1]._tokenizer.events,sn=0,sn<dn.length&&dn[sn][1].type==="lineEndingBlank"&&(sn+=2),sn<dn.length&&dn[sn][1].type==="content"))for(;++sn<dn.length&&dn[sn][1].type!=="content";)dn[sn][1].type==="chunkText"&&(dn[sn][1]._isInFirstContentOfListItem=!0,sn++);if(tn[0]==="enter")tn[1].contentType&&(Object.assign(e,subcontent(hn,en)),en=e[en],fn=!0);else if(tn[1]._container){for(sn=en,nn=void 0;sn--;)if(on=hn.get(sn),on[1].type==="lineEnding"||on[1].type==="lineEndingBlank")on[0]==="enter"&&(nn&&(hn.get(nn)[1].type="lineEndingBlank"),on[1].type="lineEnding",nn=sn);else if(!(on[1].type==="linePrefix"||on[1].type==="listItemIndent"))break;nn&&(tn[1].end={...hn.get(nn)[1].start},un=hn.slice(nn,en),un.unshift(tn),hn.splice(nn,en-nn+1,un))}}return splice(St,0,Number.POSITIVE_INFINITY,hn.slice(0)),!fn}function subcontent(St,e){const en=St.get(e)[1],tn=St.get(e)[2];let nn=e-1;const sn=[];let on=en._tokenizer;on||(on=tn.parser[en.contentType](en.start),en._contentTypeTextTrailing&&(on._contentTypeTextTrailing=!0));const un=on.events,dn=[],fn={};let hn,an,rn=-1,cn=en,pn=0,mn=0;const xn=[mn];for(;cn;){for(;St.get(++nn)[1]!==cn;);sn.push(nn),cn._tokenizer||(hn=tn.sliceStream(cn),cn.next||hn.push(null),an&&on.defineSkip(cn.start),cn._isInFirstContentOfListItem&&(on._gfmTasklistFirstContentOfListItem=!0),on.write(hn),cn._isInFirstContentOfListItem&&(on._gfmTasklistFirstContentOfListItem=void 0)),an=cn,cn=cn.next}for(cn=en;++rn<un.length;)un[rn][0]==="exit"&&un[rn-1][0]==="enter"&&un[rn][1].type===un[rn-1][1].type&&un[rn][1].start.line!==un[rn][1].end.line&&(mn=rn+1,xn.push(mn),cn._tokenizer=void 0,cn.previous=void 0,cn=cn.next);for(on.events=[],cn?(cn._tokenizer=void 0,cn.previous=void 0):xn.pop(),rn=xn.length;rn--;){const gn=un.slice(xn[rn],xn[rn+1]),yn=sn.pop();dn.push([yn,yn+gn.length-1]),St.splice(yn,2,gn)}for(dn.reverse(),rn=-1;++rn<dn.length;)fn[pn+dn[rn][0]]=pn+dn[rn][1],pn+=dn[rn][1]-dn[rn][0]-1;return fn}const content={resolve:resolveContent,tokenize:tokenizeContent},continuationConstruct={partial:!0,tokenize:tokenizeContinuation};function resolveContent(St){return subtokenize(St),St}function tokenizeContent(St,e){let en;return tn;function tn(un){return St.enter("content"),en=St.enter("chunkContent",{contentType:"content"}),nn(un)}function nn(un){return un===null?sn(un):markdownLineEnding(un)?St.check(continuationConstruct,on,sn)(un):(St.consume(un),nn)}function sn(un){return St.exit("chunkContent"),St.exit("content"),e(un)}function on(un){return St.consume(un),St.exit("chunkContent"),en.next=St.enter("chunkContent",{contentType:"content",previous:en}),en=en.next,nn}}function tokenizeContinuation(St,e,en){const tn=this;return nn;function nn(on){return St.exit("chunkContent"),St.enter("lineEnding"),St.consume(on),St.exit("lineEnding"),factorySpace(St,sn,"linePrefix")}function sn(on){if(on===null||markdownLineEnding(on))return en(on);const un=tn.events[tn.events.length-1];return!tn.parser.constructs.disable.null.includes("codeIndented")&&un&&un[1].type==="linePrefix"&&un[2].sliceSerialize(un[1],!0).length>=4?e(on):St.interrupt(tn.parser.constructs.flow,en,e)(on)}}function factoryDestination(St,e,en,tn,nn,sn,on,un,dn){const fn=dn||Number.POSITIVE_INFINITY;let hn=0;return an;function an(gn){return gn===60?(St.enter(tn),St.enter(nn),St.enter(sn),St.consume(gn),St.exit(sn),rn):gn===null||gn===32||gn===41||asciiControl(gn)?en(gn):(St.enter(tn),St.enter(on),St.enter(un),St.enter("chunkString",{contentType:"string"}),mn(gn))}function rn(gn){return gn===62?(St.enter(sn),St.consume(gn),St.exit(sn),St.exit(nn),St.exit(tn),e):(St.enter(un),St.enter("chunkString",{contentType:"string"}),cn(gn))}function cn(gn){return gn===62?(St.exit("chunkString"),St.exit(un),rn(gn)):gn===null||gn===60||markdownLineEnding(gn)?en(gn):(St.consume(gn),gn===92?pn:cn)}function pn(gn){return gn===60||gn===62||gn===92?(St.consume(gn),cn):cn(gn)}function mn(gn){return!hn&&(gn===null||gn===41||markdownLineEndingOrSpace(gn))?(St.exit("chunkString"),St.exit(un),St.exit(on),St.exit(tn),e(gn)):hn<fn&&gn===40?(St.consume(gn),hn++,mn):gn===41?(St.consume(gn),hn--,mn):gn===null||gn===32||gn===40||asciiControl(gn)?en(gn):(St.consume(gn),gn===92?xn:mn)}function xn(gn){return gn===40||gn===41||gn===92?(St.consume(gn),mn):mn(gn)}}function factoryLabel(St,e,en,tn,nn,sn){const on=this;let un=0,dn;return fn;function fn(cn){return St.enter(tn),St.enter(nn),St.consume(cn),St.exit(nn),St.enter(sn),hn}function hn(cn){return un>999||cn===null||cn===91||cn===93&&!dn||cn===94&&!un&&"_hiddenFootnoteSupport"in on.parser.constructs?en(cn):cn===93?(St.exit(sn),St.enter(nn),St.consume(cn),St.exit(nn),St.exit(tn),e):markdownLineEnding(cn)?(St.enter("lineEnding"),St.consume(cn),St.exit("lineEnding"),hn):(St.enter("chunkString",{contentType:"string"}),an(cn))}function an(cn){return cn===null||cn===91||cn===93||markdownLineEnding(cn)||un++>999?(St.exit("chunkString"),hn(cn)):(St.consume(cn),dn||(dn=!markdownSpace(cn)),cn===92?rn:an)}function rn(cn){return cn===91||cn===92||cn===93?(St.consume(cn),un++,an):an(cn)}}function factoryTitle(St,e,en,tn,nn,sn){let on;return un;function un(rn){return rn===34||rn===39||rn===40?(St.enter(tn),St.enter(nn),St.consume(rn),St.exit(nn),on=rn===40?41:rn,dn):en(rn)}function dn(rn){return rn===on?(St.enter(nn),St.consume(rn),St.exit(nn),St.exit(tn),e):(St.enter(sn),fn(rn))}function fn(rn){return rn===on?(St.exit(sn),dn(on)):rn===null?en(rn):markdownLineEnding(rn)?(St.enter("lineEnding"),St.consume(rn),St.exit("lineEnding"),factorySpace(St,fn,"linePrefix")):(St.enter("chunkString",{contentType:"string"}),hn(rn))}function hn(rn){return rn===on||rn===null||markdownLineEnding(rn)?(St.exit("chunkString"),fn(rn)):(St.consume(rn),rn===92?an:hn)}function an(rn){return rn===on||rn===92?(St.consume(rn),hn):hn(rn)}}function factoryWhitespace(St,e){let en;return tn;function tn(nn){return markdownLineEnding(nn)?(St.enter("lineEnding"),St.consume(nn),St.exit("lineEnding"),en=!0,tn):markdownSpace(nn)?factorySpace(St,tn,en?"linePrefix":"lineSuffix")(nn):e(nn)}}const definition={name:"definition",tokenize:tokenizeDefinition},titleBefore={partial:!0,tokenize:tokenizeTitleBefore};function tokenizeDefinition(St,e,en){const tn=this;let nn;return sn;function sn(cn){return St.enter("definition"),on(cn)}function on(cn){return factoryLabel.call(tn,St,un,en,"definitionLabel","definitionLabelMarker","definitionLabelString")(cn)}function un(cn){return nn=normalizeIdentifier(tn.sliceSerialize(tn.events[tn.events.length-1][1]).slice(1,-1)),cn===58?(St.enter("definitionMarker"),St.consume(cn),St.exit("definitionMarker"),dn):en(cn)}function dn(cn){return markdownLineEndingOrSpace(cn)?factoryWhitespace(St,fn)(cn):fn(cn)}function fn(cn){return factoryDestination(St,hn,en,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(cn)}function hn(cn){return St.attempt(titleBefore,an,an)(cn)}function an(cn){return markdownSpace(cn)?factorySpace(St,rn,"whitespace")(cn):rn(cn)}function rn(cn){return cn===null||markdownLineEnding(cn)?(St.exit("definition"),tn.parser.defined.push(nn),e(cn)):en(cn)}}function tokenizeTitleBefore(St,e,en){return tn;function tn(un){return markdownLineEndingOrSpace(un)?factoryWhitespace(St,nn)(un):en(un)}function nn(un){return factoryTitle(St,sn,en,"definitionTitle","definitionTitleMarker","definitionTitleString")(un)}function sn(un){return markdownSpace(un)?factorySpace(St,on,"whitespace")(un):on(un)}function on(un){return un===null||markdownLineEnding(un)?e(un):en(un)}}const hardBreakEscape={name:"hardBreakEscape",tokenize:tokenizeHardBreakEscape};function tokenizeHardBreakEscape(St,e,en){return tn;function tn(sn){return St.enter("hardBreakEscape"),St.consume(sn),nn}function nn(sn){return markdownLineEnding(sn)?(St.exit("hardBreakEscape"),e(sn)):en(sn)}}const headingAtx={name:"headingAtx",resolve:resolveHeadingAtx,tokenize:tokenizeHeadingAtx};function resolveHeadingAtx(St,e){let en=St.length-2,tn=3,nn,sn;return St[tn][1].type==="whitespace"&&(tn+=2),en-2>tn&&St[en][1].type==="whitespace"&&(en-=2),St[en][1].type==="atxHeadingSequence"&&(tn===en-1||en-4>tn&&St[en-2][1].type==="whitespace")&&(en-=tn+1===en?2:4),en>tn&&(nn={type:"atxHeadingText",start:St[tn][1].start,end:St[en][1].end},sn={type:"chunkText",start:St[tn][1].start,end:St[en][1].end,contentType:"text"},splice(St,tn,en-tn+1,[["enter",nn,e],["enter",sn,e],["exit",sn,e],["exit",nn,e]])),St}function tokenizeHeadingAtx(St,e,en){let tn=0;return nn;function nn(hn){return St.enter("atxHeading"),sn(hn)}function sn(hn){return St.enter("atxHeadingSequence"),on(hn)}function on(hn){return hn===35&&tn++<6?(St.consume(hn),on):hn===null||markdownLineEndingOrSpace(hn)?(St.exit("atxHeadingSequence"),un(hn)):en(hn)}function un(hn){return hn===35?(St.enter("atxHeadingSequence"),dn(hn)):hn===null||markdownLineEnding(hn)?(St.exit("atxHeading"),e(hn)):markdownSpace(hn)?factorySpace(St,un,"whitespace")(hn):(St.enter("atxHeadingText"),fn(hn))}function dn(hn){return hn===35?(St.consume(hn),dn):(St.exit("atxHeadingSequence"),un(hn))}function fn(hn){return hn===null||hn===35||markdownLineEndingOrSpace(hn)?(St.exit("atxHeadingText"),un(hn)):(St.consume(hn),fn)}}const htmlBlockNames=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],htmlRawNames=["pre","script","style","textarea"],htmlFlow={concrete:!0,name:"htmlFlow",resolveTo:resolveToHtmlFlow,tokenize:tokenizeHtmlFlow},blankLineBefore={partial:!0,tokenize:tokenizeBlankLineBefore},nonLazyContinuationStart={partial:!0,tokenize:tokenizeNonLazyContinuationStart};function resolveToHtmlFlow(St){let e=St.length;for(;e--&&!(St[e][0]==="enter"&&St[e][1].type==="htmlFlow"););return e>1&&St[e-2][1].type==="linePrefix"&&(St[e][1].start=St[e-2][1].start,St[e+1][1].start=St[e-2][1].start,St.splice(e-2,2)),St}function tokenizeHtmlFlow(St,e,en){const tn=this;let nn,sn,on,un,dn;return fn;function fn(On){return hn(On)}function hn(On){return St.enter("htmlFlow"),St.enter("htmlFlowData"),St.consume(On),an}function an(On){return On===33?(St.consume(On),rn):On===47?(St.consume(On),sn=!0,mn):On===63?(St.consume(On),nn=3,tn.interrupt?e:zn):asciiAlpha(On)?(St.consume(On),on=String.fromCharCode(On),xn):en(On)}function rn(On){return On===45?(St.consume(On),nn=2,cn):On===91?(St.consume(On),nn=5,un=0,pn):asciiAlpha(On)?(St.consume(On),nn=4,tn.interrupt?e:zn):en(On)}function cn(On){return On===45?(St.consume(On),tn.interrupt?e:zn):en(On)}function pn(On){const er="CDATA[";return On===er.charCodeAt(un++)?(St.consume(On),un===er.length?tn.interrupt?e:Mn:pn):en(On)}function mn(On){return asciiAlpha(On)?(St.consume(On),on=String.fromCharCode(On),xn):en(On)}function xn(On){if(On===null||On===47||On===62||markdownLineEndingOrSpace(On)){const er=On===47,sr=on.toLowerCase();return!er&&!sn&&htmlRawNames.includes(sr)?(nn=1,tn.interrupt?e(On):Mn(On)):htmlBlockNames.includes(on.toLowerCase())?(nn=6,er?(St.consume(On),gn):tn.interrupt?e(On):Mn(On)):(nn=7,tn.interrupt&&!tn.parser.lazy[tn.now().line]?en(On):sn?yn(On):bn(On))}return On===45||asciiAlphanumeric(On)?(St.consume(On),on+=String.fromCharCode(On),xn):en(On)}function gn(On){return On===62?(St.consume(On),tn.interrupt?e:Mn):en(On)}function yn(On){return markdownSpace(On)?(St.consume(On),yn):Cn(On)}function bn(On){return On===47?(St.consume(On),Cn):On===58||On===95||asciiAlpha(On)?(St.consume(On),wn):markdownSpace(On)?(St.consume(On),bn):Cn(On)}function wn(On){return On===45||On===46||On===58||On===95||asciiAlphanumeric(On)?(St.consume(On),wn):_n(On)}function _n(On){return On===61?(St.consume(On),Tn):markdownSpace(On)?(St.consume(On),_n):bn(On)}function Tn(On){return On===null||On===60||On===61||On===62||On===96?en(On):On===34||On===39?(St.consume(On),dn=On,An):markdownSpace(On)?(St.consume(On),Tn):Pn(On)}function An(On){return On===dn?(St.consume(On),dn=null,Sn):On===null||markdownLineEnding(On)?en(On):(St.consume(On),An)}function Pn(On){return On===null||On===34||On===39||On===47||On===60||On===61||On===62||On===96||markdownLineEndingOrSpace(On)?_n(On):(St.consume(On),Pn)}function Sn(On){return On===47||On===62||markdownSpace(On)?bn(On):en(On)}function Cn(On){return On===62?(St.consume(On),Nn):en(On)}function Nn(On){return On===null||markdownLineEnding(On)?Mn(On):markdownSpace(On)?(St.consume(On),Nn):en(On)}function Mn(On){return On===45&&nn===2?(St.consume(On),Ln):On===60&&nn===1?(St.consume(On),qn):On===62&&nn===4?(St.consume(On),lr):On===63&&nn===3?(St.consume(On),zn):On===93&&nn===5?(St.consume(On),Qn):markdownLineEnding(On)&&(nn===6||nn===7)?(St.exit("htmlFlowData"),St.check(blankLineBefore,$n,Fn)(On)):On===null||markdownLineEnding(On)?(St.exit("htmlFlowData"),Fn(On)):(St.consume(On),Mn)}function Fn(On){return St.check(nonLazyContinuationStart,In,$n)(On)}function In(On){return St.enter("lineEnding"),St.consume(On),St.exit("lineEnding"),Bn}function Bn(On){return On===null||markdownLineEnding(On)?Fn(On):(St.enter("htmlFlowData"),Mn(On))}function Ln(On){return On===45?(St.consume(On),zn):Mn(On)}function qn(On){return On===47?(St.consume(On),on="",Yn):Mn(On)}function Yn(On){if(On===62){const er=on.toLowerCase();return htmlRawNames.includes(er)?(St.consume(On),lr):Mn(On)}return asciiAlpha(On)&&on.length<8?(St.consume(On),on+=String.fromCharCode(On),Yn):Mn(On)}function Qn(On){return On===93?(St.consume(On),zn):Mn(On)}function zn(On){return On===62?(St.consume(On),lr):On===45&&nn===2?(St.consume(On),zn):Mn(On)}function lr(On){return On===null||markdownLineEnding(On)?(St.exit("htmlFlowData"),$n(On)):(St.consume(On),lr)}function $n(On){return St.exit("htmlFlow"),e(On)}}function tokenizeNonLazyContinuationStart(St,e,en){const tn=this;return nn;function nn(on){return markdownLineEnding(on)?(St.enter("lineEnding"),St.consume(on),St.exit("lineEnding"),sn):en(on)}function sn(on){return tn.parser.lazy[tn.now().line]?en(on):e(on)}}function tokenizeBlankLineBefore(St,e,en){return tn;function tn(nn){return St.enter("lineEnding"),St.consume(nn),St.exit("lineEnding"),St.attempt(blankLine,e,en)}}const htmlText={name:"htmlText",tokenize:tokenizeHtmlText};function tokenizeHtmlText(St,e,en){const tn=this;let nn,sn,on;return un;function un(zn){return St.enter("htmlText"),St.enter("htmlTextData"),St.consume(zn),dn}function dn(zn){return zn===33?(St.consume(zn),fn):zn===47?(St.consume(zn),_n):zn===63?(St.consume(zn),bn):asciiAlpha(zn)?(St.consume(zn),Pn):en(zn)}function fn(zn){return zn===45?(St.consume(zn),hn):zn===91?(St.consume(zn),sn=0,pn):asciiAlpha(zn)?(St.consume(zn),yn):en(zn)}function hn(zn){return zn===45?(St.consume(zn),cn):en(zn)}function an(zn){return zn===null?en(zn):zn===45?(St.consume(zn),rn):markdownLineEnding(zn)?(on=an,qn(zn)):(St.consume(zn),an)}function rn(zn){return zn===45?(St.consume(zn),cn):an(zn)}function cn(zn){return zn===62?Ln(zn):zn===45?rn(zn):an(zn)}function pn(zn){const lr="CDATA[";return zn===lr.charCodeAt(sn++)?(St.consume(zn),sn===lr.length?mn:pn):en(zn)}function mn(zn){return zn===null?en(zn):zn===93?(St.consume(zn),xn):markdownLineEnding(zn)?(on=mn,qn(zn)):(St.consume(zn),mn)}function xn(zn){return zn===93?(St.consume(zn),gn):mn(zn)}function gn(zn){return zn===62?Ln(zn):zn===93?(St.consume(zn),gn):mn(zn)}function yn(zn){return zn===null||zn===62?Ln(zn):markdownLineEnding(zn)?(on=yn,qn(zn)):(St.consume(zn),yn)}function bn(zn){return zn===null?en(zn):zn===63?(St.consume(zn),wn):markdownLineEnding(zn)?(on=bn,qn(zn)):(St.consume(zn),bn)}function wn(zn){return zn===62?Ln(zn):bn(zn)}function _n(zn){return asciiAlpha(zn)?(St.consume(zn),Tn):en(zn)}function Tn(zn){return zn===45||asciiAlphanumeric(zn)?(St.consume(zn),Tn):An(zn)}function An(zn){return markdownLineEnding(zn)?(on=An,qn(zn)):markdownSpace(zn)?(St.consume(zn),An):Ln(zn)}function Pn(zn){return zn===45||asciiAlphanumeric(zn)?(St.consume(zn),Pn):zn===47||zn===62||markdownLineEndingOrSpace(zn)?Sn(zn):en(zn)}function Sn(zn){return zn===47?(St.consume(zn),Ln):zn===58||zn===95||asciiAlpha(zn)?(St.consume(zn),Cn):markdownLineEnding(zn)?(on=Sn,qn(zn)):markdownSpace(zn)?(St.consume(zn),Sn):Ln(zn)}function Cn(zn){return zn===45||zn===46||zn===58||zn===95||asciiAlphanumeric(zn)?(St.consume(zn),Cn):Nn(zn)}function Nn(zn){return zn===61?(St.consume(zn),Mn):markdownLineEnding(zn)?(on=Nn,qn(zn)):markdownSpace(zn)?(St.consume(zn),Nn):Sn(zn)}function Mn(zn){return zn===null||zn===60||zn===61||zn===62||zn===96?en(zn):zn===34||zn===39?(St.consume(zn),nn=zn,Fn):markdownLineEnding(zn)?(on=Mn,qn(zn)):markdownSpace(zn)?(St.consume(zn),Mn):(St.consume(zn),In)}function Fn(zn){return zn===nn?(St.consume(zn),nn=void 0,Bn):zn===null?en(zn):markdownLineEnding(zn)?(on=Fn,qn(zn)):(St.consume(zn),Fn)}function In(zn){return zn===null||zn===34||zn===39||zn===60||zn===61||zn===96?en(zn):zn===47||zn===62||markdownLineEndingOrSpace(zn)?Sn(zn):(St.consume(zn),In)}function Bn(zn){return zn===47||zn===62||markdownLineEndingOrSpace(zn)?Sn(zn):en(zn)}function Ln(zn){return zn===62?(St.consume(zn),St.exit("htmlTextData"),St.exit("htmlText"),e):en(zn)}function qn(zn){return St.exit("htmlTextData"),St.enter("lineEnding"),St.consume(zn),St.exit("lineEnding"),Yn}function Yn(zn){return markdownSpace(zn)?factorySpace(St,Qn,"linePrefix",tn.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(zn):Qn(zn)}function Qn(zn){return St.enter("htmlTextData"),on(zn)}}const labelEnd={name:"labelEnd",resolveAll:resolveAllLabelEnd,resolveTo:resolveToLabelEnd,tokenize:tokenizeLabelEnd},resourceConstruct={tokenize:tokenizeResource},referenceFullConstruct={tokenize:tokenizeReferenceFull},referenceCollapsedConstruct={tokenize:tokenizeReferenceCollapsed};function resolveAllLabelEnd(St){let e=-1;const en=[];for(;++e<St.length;){const tn=St[e][1];if(en.push(St[e]),tn.type==="labelImage"||tn.type==="labelLink"||tn.type==="labelEnd"){const nn=tn.type==="labelImage"?4:2;tn.type="data",e+=nn}}return St.length!==en.length&&splice(St,0,St.length,en),St}function resolveToLabelEnd(St,e){let en=St.length,tn=0,nn,sn,on,un;for(;en--;)if(nn=St[en][1],sn){if(nn.type==="link"||nn.type==="labelLink"&&nn._inactive)break;St[en][0]==="enter"&&nn.type==="labelLink"&&(nn._inactive=!0)}else if(on){if(St[en][0]==="enter"&&(nn.type==="labelImage"||nn.type==="labelLink")&&!nn._balanced&&(sn=en,nn.type!=="labelLink")){tn=2;break}}else nn.type==="labelEnd"&&(on=en);const dn={type:St[sn][1].type==="labelLink"?"link":"image",start:{...St[sn][1].start},end:{...St[St.length-1][1].end}},fn={type:"label",start:{...St[sn][1].start},end:{...St[on][1].end}},hn={type:"labelText",start:{...St[sn+tn+2][1].end},end:{...St[on-2][1].start}};return un=[["enter",dn,e],["enter",fn,e]],un=push(un,St.slice(sn+1,sn+tn+3)),un=push(un,[["enter",hn,e]]),un=push(un,resolveAll(e.parser.constructs.insideSpan.null,St.slice(sn+tn+4,on-3),e)),un=push(un,[["exit",hn,e],St[on-2],St[on-1],["exit",fn,e]]),un=push(un,St.slice(on+1)),un=push(un,[["exit",dn,e]]),splice(St,sn,St.length,un),St}function tokenizeLabelEnd(St,e,en){const tn=this;let nn=tn.events.length,sn,on;for(;nn--;)if((tn.events[nn][1].type==="labelImage"||tn.events[nn][1].type==="labelLink")&&!tn.events[nn][1]._balanced){sn=tn.events[nn][1];break}return un;function un(rn){return sn?sn._inactive?an(rn):(on=tn.parser.defined.includes(normalizeIdentifier(tn.sliceSerialize({start:sn.end,end:tn.now()}))),St.enter("labelEnd"),St.enter("labelMarker"),St.consume(rn),St.exit("labelMarker"),St.exit("labelEnd"),dn):en(rn)}function dn(rn){return rn===40?St.attempt(resourceConstruct,hn,on?hn:an)(rn):rn===91?St.attempt(referenceFullConstruct,hn,on?fn:an)(rn):on?hn(rn):an(rn)}function fn(rn){return St.attempt(referenceCollapsedConstruct,hn,an)(rn)}function hn(rn){return e(rn)}function an(rn){return sn._balanced=!0,en(rn)}}function tokenizeResource(St,e,en){return tn;function tn(an){return St.enter("resource"),St.enter("resourceMarker"),St.consume(an),St.exit("resourceMarker"),nn}function nn(an){return markdownLineEndingOrSpace(an)?factoryWhitespace(St,sn)(an):sn(an)}function sn(an){return an===41?hn(an):factoryDestination(St,on,un,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(an)}function on(an){return markdownLineEndingOrSpace(an)?factoryWhitespace(St,dn)(an):hn(an)}function un(an){return en(an)}function dn(an){return an===34||an===39||an===40?factoryTitle(St,fn,en,"resourceTitle","resourceTitleMarker","resourceTitleString")(an):hn(an)}function fn(an){return markdownLineEndingOrSpace(an)?factoryWhitespace(St,hn)(an):hn(an)}function hn(an){return an===41?(St.enter("resourceMarker"),St.consume(an),St.exit("resourceMarker"),St.exit("resource"),e):en(an)}}function tokenizeReferenceFull(St,e,en){const tn=this;return nn;function nn(un){return factoryLabel.call(tn,St,sn,on,"reference","referenceMarker","referenceString")(un)}function sn(un){return tn.parser.defined.includes(normalizeIdentifier(tn.sliceSerialize(tn.events[tn.events.length-1][1]).slice(1,-1)))?e(un):en(un)}function on(un){return en(un)}}function tokenizeReferenceCollapsed(St,e,en){return tn;function tn(sn){return St.enter("reference"),St.enter("referenceMarker"),St.consume(sn),St.exit("referenceMarker"),nn}function nn(sn){return sn===93?(St.enter("referenceMarker"),St.consume(sn),St.exit("referenceMarker"),St.exit("reference"),e):en(sn)}}const labelStartImage={name:"labelStartImage",resolveAll:labelEnd.resolveAll,tokenize:tokenizeLabelStartImage};function tokenizeLabelStartImage(St,e,en){const tn=this;return nn;function nn(un){return St.enter("labelImage"),St.enter("labelImageMarker"),St.consume(un),St.exit("labelImageMarker"),sn}function sn(un){return un===91?(St.enter("labelMarker"),St.consume(un),St.exit("labelMarker"),St.exit("labelImage"),on):en(un)}function on(un){return un===94&&"_hiddenFootnoteSupport"in tn.parser.constructs?en(un):e(un)}}const labelStartLink={name:"labelStartLink",resolveAll:labelEnd.resolveAll,tokenize:tokenizeLabelStartLink};function tokenizeLabelStartLink(St,e,en){const tn=this;return nn;function nn(on){return St.enter("labelLink"),St.enter("labelMarker"),St.consume(on),St.exit("labelMarker"),St.exit("labelLink"),sn}function sn(on){return on===94&&"_hiddenFootnoteSupport"in tn.parser.constructs?en(on):e(on)}}const lineEnding={name:"lineEnding",tokenize:tokenizeLineEnding};function tokenizeLineEnding(St,e){return en;function en(tn){return St.enter("lineEnding"),St.consume(tn),St.exit("lineEnding"),factorySpace(St,e,"linePrefix")}}const thematicBreak$1={name:"thematicBreak",tokenize:tokenizeThematicBreak};function tokenizeThematicBreak(St,e,en){let tn=0,nn;return sn;function sn(fn){return St.enter("thematicBreak"),on(fn)}function on(fn){return nn=fn,un(fn)}function un(fn){return fn===nn?(St.enter("thematicBreakSequence"),dn(fn)):tn>=3&&(fn===null||markdownLineEnding(fn))?(St.exit("thematicBreak"),e(fn)):en(fn)}function dn(fn){return fn===nn?(St.consume(fn),tn++,dn):(St.exit("thematicBreakSequence"),markdownSpace(fn)?factorySpace(St,un,"whitespace")(fn):un(fn))}}const list$1={continuation:{tokenize:tokenizeListContinuation},exit:tokenizeListEnd,name:"list",tokenize:tokenizeListStart},listItemPrefixWhitespaceConstruct={partial:!0,tokenize:tokenizeListItemPrefixWhitespace},indentConstruct={partial:!0,tokenize:tokenizeIndent};function tokenizeListStart(St,e,en){const tn=this,nn=tn.events[tn.events.length-1];let sn=nn&&nn[1].type==="linePrefix"?nn[2].sliceSerialize(nn[1],!0).length:0,on=0;return un;function un(cn){const pn=tn.containerState.type||(cn===42||cn===43||cn===45?"listUnordered":"listOrdered");if(pn==="listUnordered"?!tn.containerState.marker||cn===tn.containerState.marker:asciiDigit(cn)){if(tn.containerState.type||(tn.containerState.type=pn,St.enter(pn,{_container:!0})),pn==="listUnordered")return St.enter("listItemPrefix"),cn===42||cn===45?St.check(thematicBreak$1,en,fn)(cn):fn(cn);if(!tn.interrupt||cn===49)return St.enter("listItemPrefix"),St.enter("listItemValue"),dn(cn)}return en(cn)}function dn(cn){return asciiDigit(cn)&&++on<10?(St.consume(cn),dn):(!tn.interrupt||on<2)&&(tn.containerState.marker?cn===tn.containerState.marker:cn===41||cn===46)?(St.exit("listItemValue"),fn(cn)):en(cn)}function fn(cn){return St.enter("listItemMarker"),St.consume(cn),St.exit("listItemMarker"),tn.containerState.marker=tn.containerState.marker||cn,St.check(blankLine,tn.interrupt?en:hn,St.attempt(listItemPrefixWhitespaceConstruct,rn,an))}function hn(cn){return tn.containerState.initialBlankLine=!0,sn++,rn(cn)}function an(cn){return markdownSpace(cn)?(St.enter("listItemPrefixWhitespace"),St.consume(cn),St.exit("listItemPrefixWhitespace"),rn):en(cn)}function rn(cn){return tn.containerState.size=sn+tn.sliceSerialize(St.exit("listItemPrefix"),!0).length,e(cn)}}function tokenizeListContinuation(St,e,en){const tn=this;return tn.containerState._closeFlow=void 0,St.check(blankLine,nn,sn);function nn(un){return tn.containerState.furtherBlankLines=tn.containerState.furtherBlankLines||tn.containerState.initialBlankLine,factorySpace(St,e,"listItemIndent",tn.containerState.size+1)(un)}function sn(un){return tn.containerState.furtherBlankLines||!markdownSpace(un)?(tn.containerState.furtherBlankLines=void 0,tn.containerState.initialBlankLine=void 0,on(un)):(tn.containerState.furtherBlankLines=void 0,tn.containerState.initialBlankLine=void 0,St.attempt(indentConstruct,e,on)(un))}function on(un){return tn.containerState._closeFlow=!0,tn.interrupt=void 0,factorySpace(St,St.attempt(list$1,e,en),"linePrefix",tn.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(un)}}function tokenizeIndent(St,e,en){const tn=this;return factorySpace(St,nn,"listItemIndent",tn.containerState.size+1);function nn(sn){const on=tn.events[tn.events.length-1];return on&&on[1].type==="listItemIndent"&&on[2].sliceSerialize(on[1],!0).length===tn.containerState.size?e(sn):en(sn)}}function tokenizeListEnd(St){St.exit(this.containerState.type)}function tokenizeListItemPrefixWhitespace(St,e,en){const tn=this;return factorySpace(St,nn,"listItemPrefixWhitespace",tn.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function nn(sn){const on=tn.events[tn.events.length-1];return!markdownSpace(sn)&&on&&on[1].type==="listItemPrefixWhitespace"?e(sn):en(sn)}}const setextUnderline={name:"setextUnderline",resolveTo:resolveToSetextUnderline,tokenize:tokenizeSetextUnderline};function resolveToSetextUnderline(St,e){let en=St.length,tn,nn,sn;for(;en--;)if(St[en][0]==="enter"){if(St[en][1].type==="content"){tn=en;break}St[en][1].type==="paragraph"&&(nn=en)}else St[en][1].type==="content"&&St.splice(en,1),!sn&&St[en][1].type==="definition"&&(sn=en);const on={type:"setextHeading",start:{...St[tn][1].start},end:{...St[St.length-1][1].end}};return St[nn][1].type="setextHeadingText",sn?(St.splice(nn,0,["enter",on,e]),St.splice(sn+1,0,["exit",St[tn][1],e]),St[tn][1].end={...St[sn][1].end}):St[tn][1]=on,St.push(["exit",on,e]),St}function tokenizeSetextUnderline(St,e,en){const tn=this;let nn;return sn;function sn(fn){let hn=tn.events.length,an;for(;hn--;)if(tn.events[hn][1].type!=="lineEnding"&&tn.events[hn][1].type!=="linePrefix"&&tn.events[hn][1].type!=="content"){an=tn.events[hn][1].type==="paragraph";break}return!tn.parser.lazy[tn.now().line]&&(tn.interrupt||an)?(St.enter("setextHeadingLine"),nn=fn,on(fn)):en(fn)}function on(fn){return St.enter("setextHeadingLineSequence"),un(fn)}function un(fn){return fn===nn?(St.consume(fn),un):(St.exit("setextHeadingLineSequence"),markdownSpace(fn)?factorySpace(St,dn,"lineSuffix")(fn):dn(fn))}function dn(fn){return fn===null||markdownLineEnding(fn)?(St.exit("setextHeadingLine"),e(fn)):en(fn)}}const flow$1={tokenize:initializeFlow};function initializeFlow(St){const e=this,en=St.attempt(blankLine,tn,St.attempt(this.parser.constructs.flowInitial,nn,factorySpace(St,St.attempt(this.parser.constructs.flow,nn,St.attempt(content,nn)),"linePrefix")));return en;function tn(sn){if(sn===null){St.consume(sn);return}return St.enter("lineEndingBlank"),St.consume(sn),St.exit("lineEndingBlank"),e.currentConstruct=void 0,en}function nn(sn){if(sn===null){St.consume(sn);return}return St.enter("lineEnding"),St.consume(sn),St.exit("lineEnding"),e.currentConstruct=void 0,en}}const resolver={resolveAll:createResolver()},string$1=initializeFactory("string"),text$2=initializeFactory("text");function initializeFactory(St){return{resolveAll:createResolver(St==="text"?resolveAllLineSuffixes:void 0),tokenize:e};function e(en){const tn=this,nn=this.parser.constructs[St],sn=en.attempt(nn,on,un);return on;function on(hn){return fn(hn)?sn(hn):un(hn)}function un(hn){if(hn===null){en.consume(hn);return}return en.enter("data"),en.consume(hn),dn}function dn(hn){return fn(hn)?(en.exit("data"),sn(hn)):(en.consume(hn),dn)}function fn(hn){if(hn===null)return!0;const an=nn[hn];let rn=-1;if(an)for(;++rn<an.length;){const cn=an[rn];if(!cn.previous||cn.previous.call(tn,tn.previous))return!0}return!1}}}function createResolver(St){return e;function e(en,tn){let nn=-1,sn;for(;++nn<=en.length;)sn===void 0?en[nn]&&en[nn][1].type==="data"&&(sn=nn,nn++):(!en[nn]||en[nn][1].type!=="data")&&(nn!==sn+2&&(en[sn][1].end=en[nn-1][1].end,en.splice(sn+2,nn-sn-2),nn=sn+2),sn=void 0);return St?St(en,tn):en}}function resolveAllLineSuffixes(St,e){let en=0;for(;++en<=St.length;)if((en===St.length||St[en][1].type==="lineEnding")&&St[en-1][1].type==="data"){const tn=St[en-1][1],nn=e.sliceStream(tn);let sn=nn.length,on=-1,un=0,dn;for(;sn--;){const fn=nn[sn];if(typeof fn=="string"){for(on=fn.length;fn.charCodeAt(on-1)===32;)un++,on--;if(on)break;on=-1}else if(fn===-2)dn=!0,un++;else if(fn!==-1){sn++;break}}if(e._contentTypeTextTrailing&&en===St.length&&(un=0),un){const fn={type:en===St.length||dn||un<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:sn?on:tn.start._bufferIndex+on,_index:tn.start._index+sn,line:tn.end.line,column:tn.end.column-un,offset:tn.end.offset-un},end:{...tn.end}};tn.end={...fn.start},tn.start.offset===tn.end.offset?Object.assign(tn,fn):(St.splice(en,0,["enter",fn,e],["exit",fn,e]),en+=2)}en++}return St}const document$1={42:list$1,43:list$1,45:list$1,48:list$1,49:list$1,50:list$1,51:list$1,52:list$1,53:list$1,54:list$1,55:list$1,56:list$1,57:list$1,62:blockQuote},contentInitial={91:definition},flowInitial={[-2]:codeIndented,[-1]:codeIndented,32:codeIndented},flow={35:headingAtx,42:thematicBreak$1,45:[setextUnderline,thematicBreak$1],60:htmlFlow,61:setextUnderline,95:thematicBreak$1,96:codeFenced,126:codeFenced},string={38:characterReference,92:characterEscape},text$1={[-5]:lineEnding,[-4]:lineEnding,[-3]:lineEnding,33:labelStartImage,38:characterReference,42:attention,60:[autolink,htmlText],91:labelStartLink,92:[hardBreakEscape,characterEscape],93:labelEnd,95:attention,96:codeText},insideSpan={null:[attention,resolver]},attentionMarkers={null:[42,95]},disable={null:[]},defaultConstructs=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers,contentInitial,disable,document:document$1,flow,flowInitial,insideSpan,string,text:text$1},Symbol.toStringTag,{value:"Module"}));function createTokenizer(St,e,en){let tn={_bufferIndex:-1,_index:0,line:en&&en.line||1,column:en&&en.column||1,offset:en&&en.offset||0};const nn={},sn=[];let on=[],un=[];const dn={attempt:An(_n),check:An(Tn),consume:yn,enter:bn,exit:wn,interrupt:An(Tn,{interrupt:!0})},fn={code:null,containerState:{},defineSkip:mn,events:[],now:pn,parser:St,previous:null,sliceSerialize:rn,sliceStream:cn,write:an};let hn=e.tokenize.call(fn,dn);return e.resolveAll&&sn.push(e),fn;function an(Nn){return on=push(on,Nn),xn(),on[on.length-1]!==null?[]:(Pn(e,0),fn.events=resolveAll(sn,fn.events,fn),fn.events)}function rn(Nn,Mn){return serializeChunks(cn(Nn),Mn)}function cn(Nn){return sliceChunks(on,Nn)}function pn(){const{_bufferIndex:Nn,_index:Mn,line:Fn,column:In,offset:Bn}=tn;return{_bufferIndex:Nn,_index:Mn,line:Fn,column:In,offset:Bn}}function mn(Nn){nn[Nn.line]=Nn.column,Cn()}function xn(){let Nn;for(;tn._index<on.length;){const Mn=on[tn._index];if(typeof Mn=="string")for(Nn=tn._index,tn._bufferIndex<0&&(tn._bufferIndex=0);tn._index===Nn&&tn._bufferIndex<Mn.length;)gn(Mn.charCodeAt(tn._bufferIndex));else gn(Mn)}}function gn(Nn){hn=hn(Nn)}function yn(Nn){markdownLineEnding(Nn)?(tn.line++,tn.column=1,tn.offset+=Nn===-3?2:1,Cn()):Nn!==-1&&(tn.column++,tn.offset++),tn._bufferIndex<0?tn._index++:(tn._bufferIndex++,tn._bufferIndex===on[tn._index].length&&(tn._bufferIndex=-1,tn._index++)),fn.previous=Nn}function bn(Nn,Mn){const Fn=Mn||{};return Fn.type=Nn,Fn.start=pn(),fn.events.push(["enter",Fn,fn]),un.push(Fn),Fn}function wn(Nn){const Mn=un.pop();return Mn.end=pn(),fn.events.push(["exit",Mn,fn]),Mn}function _n(Nn,Mn){Pn(Nn,Mn.from)}function Tn(Nn,Mn){Mn.restore()}function An(Nn,Mn){return Fn;function Fn(In,Bn,Ln){let qn,Yn,Qn,zn;return Array.isArray(In)?$n(In):"tokenize"in In?$n([In]):lr(In);function lr(ar){return cr;function cr(gr){const vr=gr!==null&&ar[gr],Er=gr!==null&&ar.null,Rr=[...Array.isArray(vr)?vr:vr?[vr]:[],...Array.isArray(Er)?Er:Er?[Er]:[]];return $n(Rr)(gr)}}function $n(ar){return qn=ar,Yn=0,ar.length===0?Ln:On(ar[Yn])}function On(ar){return cr;function cr(gr){return zn=Sn(),Qn=ar,ar.partial||(fn.currentConstruct=ar),ar.name&&fn.parser.constructs.disable.null.includes(ar.name)?sr():ar.tokenize.call(Mn?Object.assign(Object.create(fn),Mn):fn,dn,er,sr)(gr)}}function er(ar){return Nn(Qn,zn),Bn}function sr(ar){return zn.restore(),++Yn<qn.length?On(qn[Yn]):Ln}}}function Pn(Nn,Mn){Nn.resolveAll&&!sn.includes(Nn)&&sn.push(Nn),Nn.resolve&&splice(fn.events,Mn,fn.events.length-Mn,Nn.resolve(fn.events.slice(Mn),fn)),Nn.resolveTo&&(fn.events=Nn.resolveTo(fn.events,fn))}function Sn(){const Nn=pn(),Mn=fn.previous,Fn=fn.currentConstruct,In=fn.events.length,Bn=Array.from(un);return{from:In,restore:Ln};function Ln(){tn=Nn,fn.previous=Mn,fn.currentConstruct=Fn,fn.events.length=In,un=Bn,Cn()}}function Cn(){tn.line in nn&&tn.column<2&&(tn.column=nn[tn.line],tn.offset+=nn[tn.line]-1)}}function sliceChunks(St,e){const en=e.start._index,tn=e.start._bufferIndex,nn=e.end._index,sn=e.end._bufferIndex;let on;if(en===nn)on=[St[en].slice(tn,sn)];else{if(on=St.slice(en,nn),tn>-1){const un=on[0];typeof un=="string"?on[0]=un.slice(tn):on.shift()}sn>0&&on.push(St[nn].slice(0,sn))}return on}function serializeChunks(St,e){let en=-1;const tn=[];let nn;for(;++en<St.length;){const sn=St[en];let on;if(typeof sn=="string")on=sn;else switch(sn){case-5:{on="\r";break}case-4:{on=`
`;break}case-3:{on=`\r
`;break}case-2:{on=e?" ":"	";break}case-1:{if(!e&&nn)continue;on=" ";break}default:on=String.fromCharCode(sn)}nn=sn===-2,tn.push(on)}return tn.join("")}function parse$1(St){const tn={constructs:combineExtensions([defaultConstructs,...(St||{}).extensions||[]]),content:nn(content$1),defined:[],document:nn(document$2),flow:nn(flow$1),lazy:{},string:nn(string$1),text:nn(text$2)};return tn;function nn(sn){return on;function on(un){return createTokenizer(tn,sn,un)}}}function postprocess(St){for(;!subtokenize(St););return St}const search=/[\0\t\n\r]/g;function preprocess$1(){let St=1,e="",en=!0,tn;return nn;function nn(sn,on,un){const dn=[];let fn,hn,an,rn,cn;for(sn=e+(typeof sn=="string"?sn.toString():new TextDecoder(on||void 0).decode(sn)),an=0,e="",en&&(sn.charCodeAt(0)===65279&&an++,en=void 0);an<sn.length;){if(search.lastIndex=an,fn=search.exec(sn),rn=fn&&fn.index!==void 0?fn.index:sn.length,cn=sn.charCodeAt(rn),!fn){e=sn.slice(an);break}if(cn===10&&an===rn&&tn)dn.push(-3),tn=void 0;else switch(tn&&(dn.push(-5),tn=void 0),an<rn&&(dn.push(sn.slice(an,rn)),St+=rn-an),cn){case 0:{dn.push(65533),St++;break}case 9:{for(hn=Math.ceil(St/4)*4,dn.push(-2);St++<hn;)dn.push(-1);break}case 10:{dn.push(-4),St=1;break}default:tn=!0,St=1}an=rn+1}return un&&(tn&&dn.push(-5),e&&dn.push(e),dn.push(null)),dn}}const characterEscapeOrReference=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function decodeString(St){return St.replace(characterEscapeOrReference,decode$1)}function decode$1(St,e,en){if(e)return e;if(en.charCodeAt(0)===35){const nn=en.charCodeAt(1),sn=nn===120||nn===88;return decodeNumericCharacterReference(en.slice(sn?2:1),sn?16:10)}return decodeNamedCharacterReference(en)||St}const own$2={}.hasOwnProperty;function fromMarkdown(St,e,en){return typeof e!="string"&&(en=e,e=void 0),compiler(en)(postprocess(parse$1(en).document().write(preprocess$1()(St,e,!0))))}function compiler(St){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:sn(zr),autolinkProtocol:Sn,autolinkEmail:Sn,atxHeading:sn(Zn),blockQuote:sn(Er),characterEscape:Sn,characterReference:Sn,codeFenced:sn(Rr),codeFencedFenceInfo:on,codeFencedFenceMeta:on,codeIndented:sn(Rr,on),codeText:sn(Kr,on),codeTextData:Sn,data:Sn,codeFlowValue:Sn,definition:sn(Cr),definitionDestinationString:on,definitionLabelString:on,definitionTitleString:on,emphasis:sn(Gr),hardBreakEscape:sn(Xr),hardBreakTrailing:sn(Xr),htmlFlow:sn(hs,on),htmlFlowData:Sn,htmlText:sn(hs,on),htmlTextData:Sn,image:sn(us),label:on,link:sn(zr),listItem:sn(wr),listItemValue:rn,listOrdered:sn(ls,an),listUnordered:sn(ls),paragraph:sn(Fr),reference:On,referenceString:on,resourceDestinationString:on,resourceTitleString:on,setextHeading:sn(Zn),strong:sn(Qr),thematicBreak:sn(os)},exit:{atxHeading:dn(),atxHeadingSequence:_n,autolink:dn(),autolinkEmail:vr,autolinkProtocol:gr,blockQuote:dn(),characterEscapeValue:Cn,characterReferenceMarkerHexadecimal:sr,characterReferenceMarkerNumeric:sr,characterReferenceValue:ar,characterReference:cr,codeFenced:dn(xn),codeFencedFence:mn,codeFencedFenceInfo:cn,codeFencedFenceMeta:pn,codeFlowValue:Cn,codeIndented:dn(gn),codeText:dn(Bn),codeTextData:Cn,data:Cn,definition:dn(),definitionDestinationString:wn,definitionLabelString:yn,definitionTitleString:bn,emphasis:dn(),hardBreakEscape:dn(Mn),hardBreakTrailing:dn(Mn),htmlFlow:dn(Fn),htmlFlowData:Cn,htmlText:dn(In),htmlTextData:Cn,image:dn(qn),label:Qn,labelText:Yn,lineEnding:Nn,link:dn(Ln),listItem:dn(),listOrdered:dn(),listUnordered:dn(),paragraph:dn(),referenceString:er,resourceDestinationString:zn,resourceTitleString:lr,resource:$n,setextHeading:dn(Pn),setextHeadingLineSequence:An,setextHeadingText:Tn,strong:dn(),thematicBreak:dn()}};configure(e,(St||{}).mdastExtensions||[]);const en={};return tn;function tn(xr){let Or={type:"root",children:[]};const Ir={stack:[Or],tokenStack:[],config:e,enter:un,exit:fn,buffer:on,resume:hn,data:en},$r=[];let ss=-1;for(;++ss<xr.length;)if(xr[ss][1].type==="listOrdered"||xr[ss][1].type==="listUnordered")if(xr[ss][0]==="enter")$r.push(ss);else{const as=$r.pop();ss=nn(xr,as,ss)}for(ss=-1;++ss<xr.length;){const as=e[xr[ss][0]];own$2.call(as,xr[ss][1].type)&&as[xr[ss][1].type].call(Object.assign({sliceSerialize:xr[ss][2].sliceSerialize},Ir),xr[ss][1])}if(Ir.tokenStack.length>0){const as=Ir.tokenStack[Ir.tokenStack.length-1];(as[1]||defaultOnError).call(Ir,void 0,as[0])}for(Or.position={start:point(xr.length>0?xr[0][1].start:{line:1,column:1,offset:0}),end:point(xr.length>0?xr[xr.length-2][1].end:{line:1,column:1,offset:0})},ss=-1;++ss<e.transforms.length;)Or=e.transforms[ss](Or)||Or;return Or}function nn(xr,Or,Ir){let $r=Or-1,ss=-1,as=!1,Ns,As,Jr,Ss;for(;++$r<=Ir;){const es=xr[$r];switch(es[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{es[0]==="enter"?ss++:ss--,Ss=void 0;break}case"lineEndingBlank":{es[0]==="enter"&&(Ns&&!Ss&&!ss&&!Jr&&(Jr=$r),Ss=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Ss=void 0}if(!ss&&es[0]==="enter"&&es[1].type==="listItemPrefix"||ss===-1&&es[0]==="exit"&&(es[1].type==="listUnordered"||es[1].type==="listOrdered")){if(Ns){let qr=$r;for(As=void 0;qr--;){const ts=xr[qr];if(ts[1].type==="lineEnding"||ts[1].type==="lineEndingBlank"){if(ts[0]==="exit")continue;As&&(xr[As][1].type="lineEndingBlank",as=!0),ts[1].type="lineEnding",As=qr}else if(!(ts[1].type==="linePrefix"||ts[1].type==="blockQuotePrefix"||ts[1].type==="blockQuotePrefixWhitespace"||ts[1].type==="blockQuoteMarker"||ts[1].type==="listItemIndent"))break}Jr&&(!As||Jr<As)&&(Ns._spread=!0),Ns.end=Object.assign({},As?xr[As][1].start:es[1].end),xr.splice(As||$r,0,["exit",Ns,es[2]]),$r++,Ir++}if(es[1].type==="listItemPrefix"){const qr={type:"listItem",_spread:!1,start:Object.assign({},es[1].start),end:void 0};Ns=qr,xr.splice($r,0,["enter",qr,es[2]]),$r++,Ir++,Jr=void 0,Ss=!0}}}return xr[Or][1]._spread=as,Ir}function sn(xr,Or){return Ir;function Ir($r){un.call(this,xr($r),$r),Or&&Or.call(this,$r)}}function on(){this.stack.push({type:"fragment",children:[]})}function un(xr,Or,Ir){this.stack[this.stack.length-1].children.push(xr),this.stack.push(xr),this.tokenStack.push([Or,Ir||void 0]),xr.position={start:point(Or.start),end:void 0}}function dn(xr){return Or;function Or(Ir){xr&&xr.call(this,Ir),fn.call(this,Ir)}}function fn(xr,Or){const Ir=this.stack.pop(),$r=this.tokenStack.pop();if($r)$r[0].type!==xr.type&&(Or?Or.call(this,xr,$r[0]):($r[1]||defaultOnError).call(this,xr,$r[0]));else throw new Error("Cannot close `"+xr.type+"` ("+stringifyPosition({start:xr.start,end:xr.end})+"): its not open");Ir.position.end=point(xr.end)}function hn(){return toString$2(this.stack.pop())}function an(){this.data.expectingFirstListItemValue=!0}function rn(xr){if(this.data.expectingFirstListItemValue){const Or=this.stack[this.stack.length-2];Or.start=Number.parseInt(this.sliceSerialize(xr),10),this.data.expectingFirstListItemValue=void 0}}function cn(){const xr=this.resume(),Or=this.stack[this.stack.length-1];Or.lang=xr}function pn(){const xr=this.resume(),Or=this.stack[this.stack.length-1];Or.meta=xr}function mn(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function xn(){const xr=this.resume(),Or=this.stack[this.stack.length-1];Or.value=xr.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function gn(){const xr=this.resume(),Or=this.stack[this.stack.length-1];Or.value=xr.replace(/(\r?\n|\r)$/g,"")}function yn(xr){const Or=this.resume(),Ir=this.stack[this.stack.length-1];Ir.label=Or,Ir.identifier=normalizeIdentifier(this.sliceSerialize(xr)).toLowerCase()}function bn(){const xr=this.resume(),Or=this.stack[this.stack.length-1];Or.title=xr}function wn(){const xr=this.resume(),Or=this.stack[this.stack.length-1];Or.url=xr}function _n(xr){const Or=this.stack[this.stack.length-1];if(!Or.depth){const Ir=this.sliceSerialize(xr).length;Or.depth=Ir}}function Tn(){this.data.setextHeadingSlurpLineEnding=!0}function An(xr){const Or=this.stack[this.stack.length-1];Or.depth=this.sliceSerialize(xr).codePointAt(0)===61?1:2}function Pn(){this.data.setextHeadingSlurpLineEnding=void 0}function Sn(xr){const Ir=this.stack[this.stack.length-1].children;let $r=Ir[Ir.length-1];(!$r||$r.type!=="text")&&($r=fs(),$r.position={start:point(xr.start),end:void 0},Ir.push($r)),this.stack.push($r)}function Cn(xr){const Or=this.stack.pop();Or.value+=this.sliceSerialize(xr),Or.position.end=point(xr.end)}function Nn(xr){const Or=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Ir=Or.children[Or.children.length-1];Ir.position.end=point(xr.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(Or.type)&&(Sn.call(this,xr),Cn.call(this,xr))}function Mn(){this.data.atHardBreak=!0}function Fn(){const xr=this.resume(),Or=this.stack[this.stack.length-1];Or.value=xr}function In(){const xr=this.resume(),Or=this.stack[this.stack.length-1];Or.value=xr}function Bn(){const xr=this.resume(),Or=this.stack[this.stack.length-1];Or.value=xr}function Ln(){const xr=this.stack[this.stack.length-1];if(this.data.inReference){const Or=this.data.referenceType||"shortcut";xr.type+="Reference",xr.referenceType=Or,delete xr.url,delete xr.title}else delete xr.identifier,delete xr.label;this.data.referenceType=void 0}function qn(){const xr=this.stack[this.stack.length-1];if(this.data.inReference){const Or=this.data.referenceType||"shortcut";xr.type+="Reference",xr.referenceType=Or,delete xr.url,delete xr.title}else delete xr.identifier,delete xr.label;this.data.referenceType=void 0}function Yn(xr){const Or=this.sliceSerialize(xr),Ir=this.stack[this.stack.length-2];Ir.label=decodeString(Or),Ir.identifier=normalizeIdentifier(Or).toLowerCase()}function Qn(){const xr=this.stack[this.stack.length-1],Or=this.resume(),Ir=this.stack[this.stack.length-1];if(this.data.inReference=!0,Ir.type==="link"){const $r=xr.children;Ir.children=$r}else Ir.alt=Or}function zn(){const xr=this.resume(),Or=this.stack[this.stack.length-1];Or.url=xr}function lr(){const xr=this.resume(),Or=this.stack[this.stack.length-1];Or.title=xr}function $n(){this.data.inReference=void 0}function On(){this.data.referenceType="collapsed"}function er(xr){const Or=this.resume(),Ir=this.stack[this.stack.length-1];Ir.label=Or,Ir.identifier=normalizeIdentifier(this.sliceSerialize(xr)).toLowerCase(),this.data.referenceType="full"}function sr(xr){this.data.characterReferenceType=xr.type}function ar(xr){const Or=this.sliceSerialize(xr),Ir=this.data.characterReferenceType;let $r;Ir?($r=decodeNumericCharacterReference(Or,Ir==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):$r=decodeNamedCharacterReference(Or);const ss=this.stack[this.stack.length-1];ss.value+=$r}function cr(xr){const Or=this.stack.pop();Or.position.end=point(xr.end)}function gr(xr){Cn.call(this,xr);const Or=this.stack[this.stack.length-1];Or.url=this.sliceSerialize(xr)}function vr(xr){Cn.call(this,xr);const Or=this.stack[this.stack.length-1];Or.url="mailto:"+this.sliceSerialize(xr)}function Er(){return{type:"blockquote",children:[]}}function Rr(){return{type:"code",lang:null,meta:null,value:""}}function Kr(){return{type:"inlineCode",value:""}}function Cr(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Gr(){return{type:"emphasis",children:[]}}function Zn(){return{type:"heading",depth:0,children:[]}}function Xr(){return{type:"break"}}function hs(){return{type:"html",value:""}}function us(){return{type:"image",title:null,url:"",alt:null}}function zr(){return{type:"link",title:null,url:"",children:[]}}function ls(xr){return{type:"list",ordered:xr.type==="listOrdered",start:null,spread:xr._spread,children:[]}}function wr(xr){return{type:"listItem",spread:xr._spread,checked:null,children:[]}}function Fr(){return{type:"paragraph",children:[]}}function Qr(){return{type:"strong",children:[]}}function fs(){return{type:"text",value:""}}function os(){return{type:"thematicBreak"}}}function point(St){return{line:St.line,column:St.column,offset:St.offset}}function configure(St,e){let en=-1;for(;++en<e.length;){const tn=e[en];Array.isArray(tn)?configure(St,tn):extension(St,tn)}}function extension(St,e){let en;for(en in e)if(own$2.call(e,en))switch(en){case"canContainEols":{const tn=e[en];tn&&St[en].push(...tn);break}case"transforms":{const tn=e[en];tn&&St[en].push(...tn);break}case"enter":case"exit":{const tn=e[en];tn&&Object.assign(St[en],tn);break}}}function defaultOnError(St,e){throw St?new Error("Cannot close `"+St.type+"` ("+stringifyPosition({start:St.start,end:St.end})+"): a different token (`"+e.type+"`, "+stringifyPosition({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+stringifyPosition({start:e.start,end:e.end})+") is still open")}function remarkParse(St){const e=this;e.parser=en;function en(tn){return fromMarkdown(tn,{...e.data("settings"),...St,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function blockquote(St,e){const en={type:"element",tagName:"blockquote",properties:{},children:St.wrap(St.all(e),!0)};return St.patch(e,en),St.applyData(e,en)}function hardBreak(St,e){const en={type:"element",tagName:"br",properties:{},children:[]};return St.patch(e,en),[St.applyData(e,en),{type:"text",value:`
`}]}function code(St,e){const en=e.value?e.value+`
`:"",tn={};e.lang&&(tn.className=["language-"+e.lang]);let nn={type:"element",tagName:"code",properties:tn,children:[{type:"text",value:en}]};return e.meta&&(nn.data={meta:e.meta}),St.patch(e,nn),nn=St.applyData(e,nn),nn={type:"element",tagName:"pre",properties:{},children:[nn]},St.patch(e,nn),nn}function strikethrough(St,e){const en={type:"element",tagName:"del",properties:{},children:St.all(e)};return St.patch(e,en),St.applyData(e,en)}function emphasis(St,e){const en={type:"element",tagName:"em",properties:{},children:St.all(e)};return St.patch(e,en),St.applyData(e,en)}function footnoteReference(St,e){const en=typeof St.options.clobberPrefix=="string"?St.options.clobberPrefix:"user-content-",tn=String(e.identifier).toUpperCase(),nn=normalizeUri(tn.toLowerCase()),sn=St.footnoteOrder.indexOf(tn);let on,un=St.footnoteCounts.get(tn);un===void 0?(un=0,St.footnoteOrder.push(tn),on=St.footnoteOrder.length):on=sn+1,un+=1,St.footnoteCounts.set(tn,un);const dn={type:"element",tagName:"a",properties:{href:"#"+en+"fn-"+nn,id:en+"fnref-"+nn+(un>1?"-"+un:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(on)}]};St.patch(e,dn);const fn={type:"element",tagName:"sup",properties:{},children:[dn]};return St.patch(e,fn),St.applyData(e,fn)}function heading(St,e){const en={type:"element",tagName:"h"+e.depth,properties:{},children:St.all(e)};return St.patch(e,en),St.applyData(e,en)}function html(St,e){if(St.options.allowDangerousHtml){const en={type:"raw",value:e.value};return St.patch(e,en),St.applyData(e,en)}}function revert(St,e){const en=e.referenceType;let tn="]";if(en==="collapsed"?tn+="[]":en==="full"&&(tn+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+tn}];const nn=St.all(e),sn=nn[0];sn&&sn.type==="text"?sn.value="["+sn.value:nn.unshift({type:"text",value:"["});const on=nn[nn.length-1];return on&&on.type==="text"?on.value+=tn:nn.push({type:"text",value:tn}),nn}function imageReference(St,e){const en=String(e.identifier).toUpperCase(),tn=St.definitionById.get(en);if(!tn)return revert(St,e);const nn={src:normalizeUri(tn.url||""),alt:e.alt};tn.title!==null&&tn.title!==void 0&&(nn.title=tn.title);const sn={type:"element",tagName:"img",properties:nn,children:[]};return St.patch(e,sn),St.applyData(e,sn)}function image(St,e){const en={src:normalizeUri(e.url)};e.alt!==null&&e.alt!==void 0&&(en.alt=e.alt),e.title!==null&&e.title!==void 0&&(en.title=e.title);const tn={type:"element",tagName:"img",properties:en,children:[]};return St.patch(e,tn),St.applyData(e,tn)}function inlineCode(St,e){const en={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};St.patch(e,en);const tn={type:"element",tagName:"code",properties:{},children:[en]};return St.patch(e,tn),St.applyData(e,tn)}function linkReference(St,e){const en=String(e.identifier).toUpperCase(),tn=St.definitionById.get(en);if(!tn)return revert(St,e);const nn={href:normalizeUri(tn.url||"")};tn.title!==null&&tn.title!==void 0&&(nn.title=tn.title);const sn={type:"element",tagName:"a",properties:nn,children:St.all(e)};return St.patch(e,sn),St.applyData(e,sn)}function link(St,e){const en={href:normalizeUri(e.url)};e.title!==null&&e.title!==void 0&&(en.title=e.title);const tn={type:"element",tagName:"a",properties:en,children:St.all(e)};return St.patch(e,tn),St.applyData(e,tn)}function listItem(St,e,en){const tn=St.all(e),nn=en?listLoose(en):listItemLoose(e),sn={},on=[];if(typeof e.checked=="boolean"){const hn=tn[0];let an;hn&&hn.type==="element"&&hn.tagName==="p"?an=hn:(an={type:"element",tagName:"p",properties:{},children:[]},tn.unshift(an)),an.children.length>0&&an.children.unshift({type:"text",value:" "}),an.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),sn.className=["task-list-item"]}let un=-1;for(;++un<tn.length;){const hn=tn[un];(nn||un!==0||hn.type!=="element"||hn.tagName!=="p")&&on.push({type:"text",value:`
`}),hn.type==="element"&&hn.tagName==="p"&&!nn?on.push(...hn.children):on.push(hn)}const dn=tn[tn.length-1];dn&&(nn||dn.type!=="element"||dn.tagName!=="p")&&on.push({type:"text",value:`
`});const fn={type:"element",tagName:"li",properties:sn,children:on};return St.patch(e,fn),St.applyData(e,fn)}function listLoose(St){let e=!1;if(St.type==="list"){e=St.spread||!1;const en=St.children;let tn=-1;for(;!e&&++tn<en.length;)e=listItemLoose(en[tn])}return e}function listItemLoose(St){const e=St.spread;return e??St.children.length>1}function list(St,e){const en={},tn=St.all(e);let nn=-1;for(typeof e.start=="number"&&e.start!==1&&(en.start=e.start);++nn<tn.length;){const on=tn[nn];if(on.type==="element"&&on.tagName==="li"&&on.properties&&Array.isArray(on.properties.className)&&on.properties.className.includes("task-list-item")){en.className=["contains-task-list"];break}}const sn={type:"element",tagName:e.ordered?"ol":"ul",properties:en,children:St.wrap(tn,!0)};return St.patch(e,sn),St.applyData(e,sn)}function paragraph(St,e){const en={type:"element",tagName:"p",properties:{},children:St.all(e)};return St.patch(e,en),St.applyData(e,en)}function root(St,e){const en={type:"root",children:St.wrap(St.all(e))};return St.patch(e,en),St.applyData(e,en)}function strong(St,e){const en={type:"element",tagName:"strong",properties:{},children:St.all(e)};return St.patch(e,en),St.applyData(e,en)}function table(St,e){const en=St.all(e),tn=en.shift(),nn=[];if(tn){const on={type:"element",tagName:"thead",properties:{},children:St.wrap([tn],!0)};St.patch(e.children[0],on),nn.push(on)}if(en.length>0){const on={type:"element",tagName:"tbody",properties:{},children:St.wrap(en,!0)},un=pointStart(e.children[1]),dn=pointEnd(e.children[e.children.length-1]);un&&dn&&(on.position={start:un,end:dn}),nn.push(on)}const sn={type:"element",tagName:"table",properties:{},children:St.wrap(nn,!0)};return St.patch(e,sn),St.applyData(e,sn)}function tableRow(St,e,en){const tn=en?en.children:void 0,sn=(tn?tn.indexOf(e):1)===0?"th":"td",on=en&&en.type==="table"?en.align:void 0,un=on?on.length:e.children.length;let dn=-1;const fn=[];for(;++dn<un;){const an=e.children[dn],rn={},cn=on?on[dn]:void 0;cn&&(rn.align=cn);let pn={type:"element",tagName:sn,properties:rn,children:[]};an&&(pn.children=St.all(an),St.patch(an,pn),pn=St.applyData(an,pn)),fn.push(pn)}const hn={type:"element",tagName:"tr",properties:{},children:St.wrap(fn,!0)};return St.patch(e,hn),St.applyData(e,hn)}function tableCell(St,e){const en={type:"element",tagName:"td",properties:{},children:St.all(e)};return St.patch(e,en),St.applyData(e,en)}const tab=9,space=32;function trimLines(St){const e=String(St),en=/\r?\n|\r/g;let tn=en.exec(e),nn=0;const sn=[];for(;tn;)sn.push(trimLine(e.slice(nn,tn.index),nn>0,!0),tn[0]),nn=tn.index+tn[0].length,tn=en.exec(e);return sn.push(trimLine(e.slice(nn),nn>0,!1)),sn.join("")}function trimLine(St,e,en){let tn=0,nn=St.length;if(e){let sn=St.codePointAt(tn);for(;sn===tab||sn===space;)tn++,sn=St.codePointAt(tn)}if(en){let sn=St.codePointAt(nn-1);for(;sn===tab||sn===space;)nn--,sn=St.codePointAt(nn-1)}return nn>tn?St.slice(tn,nn):""}function text(St,e){const en={type:"text",value:trimLines(String(e.value))};return St.patch(e,en),St.applyData(e,en)}function thematicBreak(St,e){const en={type:"element",tagName:"hr",properties:{},children:[]};return St.patch(e,en),St.applyData(e,en)}const handlers={blockquote,break:hardBreak,code,delete:strikethrough,emphasis,footnoteReference,heading,html,imageReference,image,inlineCode,linkReference,link,listItem,list,paragraph,root,strong,table,tableCell,tableRow,text,thematicBreak,toml:ignore,yaml:ignore,definition:ignore,footnoteDefinition:ignore};function ignore(){}const VOID=-1,PRIMITIVE=0,ARRAY=1,OBJECT=2,DATE=3,REGEXP=4,MAP=5,SET=6,ERROR=7,BIGINT=8,env$3=typeof self=="object"?self:globalThis,deserializer=(St,e)=>{const en=(nn,sn)=>(St.set(sn,nn),nn),tn=nn=>{if(St.has(nn))return St.get(nn);const[sn,on]=e[nn];switch(sn){case PRIMITIVE:case VOID:return en(on,nn);case ARRAY:{const un=en([],nn);for(const dn of on)un.push(tn(dn));return un}case OBJECT:{const un=en({},nn);for(const[dn,fn]of on)un[tn(dn)]=tn(fn);return un}case DATE:return en(new Date(on),nn);case REGEXP:{const{source:un,flags:dn}=on;return en(new RegExp(un,dn),nn)}case MAP:{const un=en(new Map,nn);for(const[dn,fn]of on)un.set(tn(dn),tn(fn));return un}case SET:{const un=en(new Set,nn);for(const dn of on)un.add(tn(dn));return un}case ERROR:{const{name:un,message:dn}=on;return en(new env$3[un](dn),nn)}case BIGINT:return en(BigInt(on),nn);case"BigInt":return en(Object(BigInt(on)),nn);case"ArrayBuffer":return en(new Uint8Array(on).buffer,on);case"DataView":{const{buffer:un}=new Uint8Array(on);return en(new DataView(un),on)}}return en(new env$3[sn](on),nn)};return tn},deserialize=St=>deserializer(new Map,St)(0),EMPTY="",{toString:toString$1}={},{keys}=Object,typeOf=St=>{const e=typeof St;if(e!=="object"||!St)return[PRIMITIVE,e];const en=toString$1.call(St).slice(8,-1);switch(en){case"Array":return[ARRAY,EMPTY];case"Object":return[OBJECT,EMPTY];case"Date":return[DATE,EMPTY];case"RegExp":return[REGEXP,EMPTY];case"Map":return[MAP,EMPTY];case"Set":return[SET,EMPTY];case"DataView":return[ARRAY,en]}return en.includes("Array")?[ARRAY,en]:en.includes("Error")?[ERROR,en]:[OBJECT,en]},shouldSkip=([St,e])=>St===PRIMITIVE&&(e==="function"||e==="symbol"),serializer=(St,e,en,tn)=>{const nn=(on,un)=>{const dn=tn.push(on)-1;return en.set(un,dn),dn},sn=on=>{if(en.has(on))return en.get(on);let[un,dn]=typeOf(on);switch(un){case PRIMITIVE:{let hn=on;switch(dn){case"bigint":un=BIGINT,hn=on.toString();break;case"function":case"symbol":if(St)throw new TypeError("unable to serialize "+dn);hn=null;break;case"undefined":return nn([VOID],on)}return nn([un,hn],on)}case ARRAY:{if(dn){let rn=on;return dn==="DataView"?rn=new Uint8Array(on.buffer):dn==="ArrayBuffer"&&(rn=new Uint8Array(on)),nn([dn,[...rn]],on)}const hn=[],an=nn([un,hn],on);for(const rn of on)hn.push(sn(rn));return an}case OBJECT:{if(dn)switch(dn){case"BigInt":return nn([dn,on.toString()],on);case"Boolean":case"Number":case"String":return nn([dn,on.valueOf()],on)}if(e&&"toJSON"in on)return sn(on.toJSON());const hn=[],an=nn([un,hn],on);for(const rn of keys(on))(St||!shouldSkip(typeOf(on[rn])))&&hn.push([sn(rn),sn(on[rn])]);return an}case DATE:return nn([un,on.toISOString()],on);case REGEXP:{const{source:hn,flags:an}=on;return nn([un,{source:hn,flags:an}],on)}case MAP:{const hn=[],an=nn([un,hn],on);for(const[rn,cn]of on)(St||!(shouldSkip(typeOf(rn))||shouldSkip(typeOf(cn))))&&hn.push([sn(rn),sn(cn)]);return an}case SET:{const hn=[],an=nn([un,hn],on);for(const rn of on)(St||!shouldSkip(typeOf(rn)))&&hn.push(sn(rn));return an}}const{message:fn}=on;return nn([un,{name:dn,message:fn}],on)};return sn},serialize=(St,{json:e,lossy:en}={})=>{const tn=[];return serializer(!(e||en),!!e,new Map,tn)(St),tn},structuredClone$1=typeof structuredClone=="function"?(St,e)=>e&&("json"in e||"lossy"in e)?deserialize(serialize(St,e)):structuredClone(St):(St,e)=>deserialize(serialize(St,e));function defaultFootnoteBackContent(St,e){const en=[{type:"text",value:""}];return e>1&&en.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),en}function defaultFootnoteBackLabel(St,e){return"Back to reference "+(St+1)+(e>1?"-"+e:"")}function footer(St){const e=typeof St.options.clobberPrefix=="string"?St.options.clobberPrefix:"user-content-",en=St.options.footnoteBackContent||defaultFootnoteBackContent,tn=St.options.footnoteBackLabel||defaultFootnoteBackLabel,nn=St.options.footnoteLabel||"Footnotes",sn=St.options.footnoteLabelTagName||"h2",on=St.options.footnoteLabelProperties||{className:["sr-only"]},un=[];let dn=-1;for(;++dn<St.footnoteOrder.length;){const fn=St.footnoteById.get(St.footnoteOrder[dn]);if(!fn)continue;const hn=St.all(fn),an=String(fn.identifier).toUpperCase(),rn=normalizeUri(an.toLowerCase());let cn=0;const pn=[],mn=St.footnoteCounts.get(an);for(;mn!==void 0&&++cn<=mn;){pn.length>0&&pn.push({type:"text",value:" "});let yn=typeof en=="string"?en:en(dn,cn);typeof yn=="string"&&(yn={type:"text",value:yn}),pn.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+rn+(cn>1?"-"+cn:""),dataFootnoteBackref:"",ariaLabel:typeof tn=="string"?tn:tn(dn,cn),className:["data-footnote-backref"]},children:Array.isArray(yn)?yn:[yn]})}const xn=hn[hn.length-1];if(xn&&xn.type==="element"&&xn.tagName==="p"){const yn=xn.children[xn.children.length-1];yn&&yn.type==="text"?yn.value+=" ":xn.children.push({type:"text",value:" "}),xn.children.push(...pn)}else hn.push(...pn);const gn={type:"element",tagName:"li",properties:{id:e+"fn-"+rn},children:St.wrap(hn,!0)};St.patch(fn,gn),un.push(gn)}if(un.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:sn,properties:{...structuredClone$1(on),id:"footnote-label"},children:[{type:"text",value:nn}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:St.wrap(un,!0)},{type:"text",value:`
`}]}}const convert=function(St){if(St==null)return ok;if(typeof St=="function")return castFactory(St);if(typeof St=="object")return Array.isArray(St)?anyFactory(St):propertiesFactory(St);if(typeof St=="string")return typeFactory(St);throw new Error("Expected function, string, or object as test")};function anyFactory(St){const e=[];let en=-1;for(;++en<St.length;)e[en]=convert(St[en]);return castFactory(tn);function tn(...nn){let sn=-1;for(;++sn<e.length;)if(e[sn].apply(this,nn))return!0;return!1}}function propertiesFactory(St){const e=St;return castFactory(en);function en(tn){const nn=tn;let sn;for(sn in St)if(nn[sn]!==e[sn])return!1;return!0}}function typeFactory(St){return castFactory(e);function e(en){return en&&en.type===St}}function castFactory(St){return e;function e(en,tn,nn){return!!(looksLikeANode(en)&&St.call(this,en,typeof tn=="number"?tn:void 0,nn||void 0))}}function ok(){return!0}function looksLikeANode(St){return St!==null&&typeof St=="object"&&"type"in St}function color(St){return St}const empty$1=[],CONTINUE=!0,EXIT=!1,SKIP="skip";function visitParents(St,e,en,tn){let nn;typeof e=="function"&&typeof en!="function"?(tn=en,en=e):nn=e;const sn=convert(nn),on=tn?-1:1;un(St,void 0,[])();function un(dn,fn,hn){const an=dn&&typeof dn=="object"?dn:{};if(typeof an.type=="string"){const cn=typeof an.tagName=="string"?an.tagName:typeof an.name=="string"?an.name:void 0;Object.defineProperty(rn,"name",{value:"node ("+(dn.type+(cn?"<"+cn+">":""))+")"})}return rn;function rn(){let cn=empty$1,pn,mn,xn;if((!e||sn(dn,fn,hn[hn.length-1]||void 0))&&(cn=toResult(en(dn,hn)),cn[0]===EXIT))return cn;if("children"in dn&&dn.children){const gn=dn;if(gn.children&&cn[0]!==SKIP)for(mn=(tn?gn.children.length:-1)+on,xn=hn.concat(gn);mn>-1&&mn<gn.children.length;){const yn=gn.children[mn];if(pn=un(yn,mn,xn)(),pn[0]===EXIT)return pn;mn=typeof pn[1]=="number"?pn[1]:mn+on}}return cn}}}function toResult(St){return Array.isArray(St)?St:typeof St=="number"?[CONTINUE,St]:St==null?empty$1:[St]}function visit(St,e,en,tn){let nn,sn,on;typeof e=="function"&&typeof en!="function"?(sn=void 0,on=e,nn=en):(sn=e,on=en,nn=tn),visitParents(St,sn,un,nn);function un(dn,fn){const hn=fn[fn.length-1],an=hn?hn.children.indexOf(dn):void 0;return on(dn,an,hn)}}const own$1={}.hasOwnProperty,emptyOptions={};function createState(St,e){const en=e||emptyOptions,tn=new Map,nn=new Map,sn=new Map,on={...handlers,...en.handlers},un={all:fn,applyData,definitionById:tn,footnoteById:nn,footnoteCounts:sn,footnoteOrder:[],handlers:on,one:dn,options:en,patch,wrap:wrap$1};return visit(St,function(hn){if(hn.type==="definition"||hn.type==="footnoteDefinition"){const an=hn.type==="definition"?tn:nn,rn=String(hn.identifier).toUpperCase();an.has(rn)||an.set(rn,hn)}}),un;function dn(hn,an){const rn=hn.type,cn=un.handlers[rn];if(own$1.call(un.handlers,rn)&&cn)return cn(un,hn,an);if(un.options.passThrough&&un.options.passThrough.includes(rn)){if("children"in hn){const{children:mn,...xn}=hn,gn=structuredClone$1(xn);return gn.children=un.all(hn),gn}return structuredClone$1(hn)}return(un.options.unknownHandler||defaultUnknownHandler)(un,hn,an)}function fn(hn){const an=[];if("children"in hn){const rn=hn.children;let cn=-1;for(;++cn<rn.length;){const pn=un.one(rn[cn],hn);if(pn){if(cn&&rn[cn-1].type==="break"&&(!Array.isArray(pn)&&pn.type==="text"&&(pn.value=trimMarkdownSpaceStart(pn.value)),!Array.isArray(pn)&&pn.type==="element")){const mn=pn.children[0];mn&&mn.type==="text"&&(mn.value=trimMarkdownSpaceStart(mn.value))}Array.isArray(pn)?an.push(...pn):an.push(pn)}}}return an}}function patch(St,e){St.position&&(e.position=position$1(St))}function applyData(St,e){let en=e;if(St&&St.data){const tn=St.data.hName,nn=St.data.hChildren,sn=St.data.hProperties;if(typeof tn=="string")if(en.type==="element")en.tagName=tn;else{const on="children"in en?en.children:[en];en={type:"element",tagName:tn,properties:{},children:on}}en.type==="element"&&sn&&Object.assign(en.properties,structuredClone$1(sn)),"children"in en&&en.children&&nn!==null&&nn!==void 0&&(en.children=nn)}return en}function defaultUnknownHandler(St,e){const en=e.data||{},tn="value"in e&&!(own$1.call(en,"hProperties")||own$1.call(en,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:St.all(e)};return St.patch(e,tn),St.applyData(e,tn)}function wrap$1(St,e){const en=[];let tn=-1;for(e&&en.push({type:"text",value:`
`});++tn<St.length;)tn&&en.push({type:"text",value:`
`}),en.push(St[tn]);return e&&St.length>0&&en.push({type:"text",value:`
`}),en}function trimMarkdownSpaceStart(St){let e=0,en=St.charCodeAt(e);for(;en===9||en===32;)e++,en=St.charCodeAt(e);return St.slice(e)}function toHast(St,e){const en=createState(St,e),tn=en.one(St,void 0),nn=footer(en),sn=Array.isArray(tn)?{type:"root",children:tn}:tn||{type:"root",children:[]};return nn&&sn.children.push({type:"text",value:`
`},nn),sn}function remarkRehype(St,e){return St&&"run"in St?async function(en,tn){const nn=toHast(en,{file:tn,...e});await St.run(nn,tn)}:function(en,tn){return toHast(en,{file:tn,...St||e})}}function bail(St){if(St)throw St}var hasOwn=Object.prototype.hasOwnProperty,toStr=Object.prototype.toString,defineProperty=Object.defineProperty,gOPD=Object.getOwnPropertyDescriptor,isArray=function(e){return typeof Array.isArray=="function"?Array.isArray(e):toStr.call(e)==="[object Array]"},isPlainObject$1=function(e){if(!e||toStr.call(e)!=="[object Object]")return!1;var en=hasOwn.call(e,"constructor"),tn=e.constructor&&e.constructor.prototype&&hasOwn.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!en&&!tn)return!1;var nn;for(nn in e);return typeof nn>"u"||hasOwn.call(e,nn)},setProperty=function(e,en){defineProperty&&en.name==="__proto__"?defineProperty(e,en.name,{enumerable:!0,configurable:!0,value:en.newValue,writable:!0}):e[en.name]=en.newValue},getProperty=function(e,en){if(en==="__proto__")if(hasOwn.call(e,en)){if(gOPD)return gOPD(e,en).value}else return;return e[en]},extend=function St(){var e,en,tn,nn,sn,on,un=arguments[0],dn=1,fn=arguments.length,hn=!1;for(typeof un=="boolean"&&(hn=un,un=arguments[1]||{},dn=2),(un==null||typeof un!="object"&&typeof un!="function")&&(un={});dn<fn;++dn)if(e=arguments[dn],e!=null)for(en in e)tn=getProperty(un,en),nn=getProperty(e,en),un!==nn&&(hn&&nn&&(isPlainObject$1(nn)||(sn=isArray(nn)))?(sn?(sn=!1,on=tn&&isArray(tn)?tn:[]):on=tn&&isPlainObject$1(tn)?tn:{},setProperty(un,{name:en,newValue:St(hn,on,nn)})):typeof nn<"u"&&setProperty(un,{name:en,newValue:nn}));return un};const extend$1=getDefaultExportFromCjs(extend);function isPlainObject(St){if(typeof St!="object"||St===null)return!1;const e=Object.getPrototypeOf(St);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in St)&&!(Symbol.iterator in St)}function trough(){const St=[],e={run:en,use:tn};return e;function en(...nn){let sn=-1;const on=nn.pop();if(typeof on!="function")throw new TypeError("Expected function as last argument, not "+on);un(null,...nn);function un(dn,...fn){const hn=St[++sn];let an=-1;if(dn){on(dn);return}for(;++an<nn.length;)(fn[an]===null||fn[an]===void 0)&&(fn[an]=nn[an]);nn=fn,hn?wrap(hn,un)(...fn):on(null,...fn)}}function tn(nn){if(typeof nn!="function")throw new TypeError("Expected `middelware` to be a function, not "+nn);return St.push(nn),e}}function wrap(St,e){let en;return tn;function tn(...on){const un=St.length>on.length;let dn;un&&on.push(nn);try{dn=St.apply(this,on)}catch(fn){const hn=fn;if(un&&en)throw hn;return nn(hn)}un||(dn&&dn.then&&typeof dn.then=="function"?dn.then(sn,nn):dn instanceof Error?nn(dn):sn(dn))}function nn(on,...un){en||(en=!0,e(on,...un))}function sn(on){nn(null,on)}}const minpath={basename,dirname,extname,join,sep:"/"};function basename(St,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');assertPath$1(St);let en=0,tn=-1,nn=St.length,sn;if(e===void 0||e.length===0||e.length>St.length){for(;nn--;)if(St.codePointAt(nn)===47){if(sn){en=nn+1;break}}else tn<0&&(sn=!0,tn=nn+1);return tn<0?"":St.slice(en,tn)}if(e===St)return"";let on=-1,un=e.length-1;for(;nn--;)if(St.codePointAt(nn)===47){if(sn){en=nn+1;break}}else on<0&&(sn=!0,on=nn+1),un>-1&&(St.codePointAt(nn)===e.codePointAt(un--)?un<0&&(tn=nn):(un=-1,tn=on));return en===tn?tn=on:tn<0&&(tn=St.length),St.slice(en,tn)}function dirname(St){if(assertPath$1(St),St.length===0)return".";let e=-1,en=St.length,tn;for(;--en;)if(St.codePointAt(en)===47){if(tn){e=en;break}}else tn||(tn=!0);return e<0?St.codePointAt(0)===47?"/":".":e===1&&St.codePointAt(0)===47?"//":St.slice(0,e)}function extname(St){assertPath$1(St);let e=St.length,en=-1,tn=0,nn=-1,sn=0,on;for(;e--;){const un=St.codePointAt(e);if(un===47){if(on){tn=e+1;break}continue}en<0&&(on=!0,en=e+1),un===46?nn<0?nn=e:sn!==1&&(sn=1):nn>-1&&(sn=-1)}return nn<0||en<0||sn===0||sn===1&&nn===en-1&&nn===tn+1?"":St.slice(nn,en)}function join(...St){let e=-1,en;for(;++e<St.length;)assertPath$1(St[e]),St[e]&&(en=en===void 0?St[e]:en+"/"+St[e]);return en===void 0?".":normalize(en)}function normalize(St){assertPath$1(St);const e=St.codePointAt(0)===47;let en=normalizeString(St,!e);return en.length===0&&!e&&(en="."),en.length>0&&St.codePointAt(St.length-1)===47&&(en+="/"),e?"/"+en:en}function normalizeString(St,e){let en="",tn=0,nn=-1,sn=0,on=-1,un,dn;for(;++on<=St.length;){if(on<St.length)un=St.codePointAt(on);else{if(un===47)break;un=47}if(un===47){if(!(nn===on-1||sn===1))if(nn!==on-1&&sn===2){if(en.length<2||tn!==2||en.codePointAt(en.length-1)!==46||en.codePointAt(en.length-2)!==46){if(en.length>2){if(dn=en.lastIndexOf("/"),dn!==en.length-1){dn<0?(en="",tn=0):(en=en.slice(0,dn),tn=en.length-1-en.lastIndexOf("/")),nn=on,sn=0;continue}}else if(en.length>0){en="",tn=0,nn=on,sn=0;continue}}e&&(en=en.length>0?en+"/..":"..",tn=2)}else en.length>0?en+="/"+St.slice(nn+1,on):en=St.slice(nn+1,on),tn=on-nn-1;nn=on,sn=0}else un===46&&sn>-1?sn++:sn=-1}return en}function assertPath$1(St){if(typeof St!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(St))}const minproc={cwd};function cwd(){return"/"}function isUrl(St){return!!(St!==null&&typeof St=="object"&&"href"in St&&St.href&&"protocol"in St&&St.protocol&&St.auth===void 0)}function urlToPath(St){if(typeof St=="string")St=new URL(St);else if(!isUrl(St)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+St+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(St.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return getPathFromURLPosix(St)}function getPathFromURLPosix(St){if(St.hostname!==""){const tn=new TypeError('File URL host must be "localhost" or empty on darwin');throw tn.code="ERR_INVALID_FILE_URL_HOST",tn}const e=St.pathname;let en=-1;for(;++en<e.length;)if(e.codePointAt(en)===37&&e.codePointAt(en+1)===50){const tn=e.codePointAt(en+2);if(tn===70||tn===102){const nn=new TypeError("File URL path must not include encoded / characters");throw nn.code="ERR_INVALID_FILE_URL_PATH",nn}}return decodeURIComponent(e)}const order=["history","path","basename","stem","extname","dirname"];class VFile{constructor(e){let en;e?isUrl(e)?en={path:e}:typeof e=="string"||isUint8Array$1(e)?en={value:e}:en=e:en={},this.cwd="cwd"in en?"":minproc.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let tn=-1;for(;++tn<order.length;){const sn=order[tn];sn in en&&en[sn]!==void 0&&en[sn]!==null&&(this[sn]=sn==="history"?[...en[sn]]:en[sn])}let nn;for(nn in en)order.includes(nn)||(this[nn]=en[nn])}get basename(){return typeof this.path=="string"?minpath.basename(this.path):void 0}set basename(e){assertNonEmpty(e,"basename"),assertPart(e,"basename"),this.path=minpath.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?minpath.dirname(this.path):void 0}set dirname(e){assertPath(this.basename,"dirname"),this.path=minpath.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?minpath.extname(this.path):void 0}set extname(e){if(assertPart(e,"extname"),assertPath(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=minpath.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){isUrl(e)&&(e=urlToPath(e)),assertNonEmpty(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?minpath.basename(this.path,this.extname):void 0}set stem(e){assertNonEmpty(e,"stem"),assertPart(e,"stem"),this.path=minpath.join(this.dirname||"",e+(this.extname||""))}fail(e,en,tn){const nn=this.message(e,en,tn);throw nn.fatal=!0,nn}info(e,en,tn){const nn=this.message(e,en,tn);return nn.fatal=void 0,nn}message(e,en,tn){const nn=new VFileMessage(e,en,tn);return this.path&&(nn.name=this.path+":"+nn.name,nn.file=this.path),nn.fatal=!1,this.messages.push(nn),nn}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function assertPart(St,e){if(St&&St.includes(minpath.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+minpath.sep+"`")}function assertNonEmpty(St,e){if(!St)throw new Error("`"+e+"` cannot be empty")}function assertPath(St,e){if(!St)throw new Error("Setting `"+e+"` requires `path` to be set too")}function isUint8Array$1(St){return!!(St&&typeof St=="object"&&"byteLength"in St&&"byteOffset"in St)}const CallableInstance=function(St){const tn=this.constructor.prototype,nn=tn[St],sn=function(){return nn.apply(sn,arguments)};return Object.setPrototypeOf(sn,tn),sn},own={}.hasOwnProperty;let Processor$1=class Dm extends CallableInstance{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=trough()}copy(){const e=new Dm;let en=-1;for(;++en<this.attachers.length;){const tn=this.attachers[en];e.use(...tn)}return e.data(extend$1(!0,{},this.namespace)),e}data(e,en){return typeof e=="string"?arguments.length===2?(assertUnfrozen("data",this.frozen),this.namespace[e]=en,this):own.call(this.namespace,e)&&this.namespace[e]||void 0:e?(assertUnfrozen("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[en,...tn]=this.attachers[this.freezeIndex];if(tn[0]===!1)continue;tn[0]===!0&&(tn[0]=void 0);const nn=en.call(e,...tn);typeof nn=="function"&&this.transformers.use(nn)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const en=vfile(e),tn=this.parser||this.Parser;return assertParser("parse",tn),tn(String(en),en)}process(e,en){const tn=this;return this.freeze(),assertParser("process",this.parser||this.Parser),assertCompiler("process",this.compiler||this.Compiler),en?nn(void 0,en):new Promise(nn);function nn(sn,on){const un=vfile(e),dn=tn.parse(un);tn.run(dn,un,function(hn,an,rn){if(hn||!an||!rn)return fn(hn);const cn=an,pn=tn.stringify(cn,rn);looksLikeAValue(pn)?rn.value=pn:rn.result=pn,fn(hn,rn)});function fn(hn,an){hn||!an?on(hn):sn?sn(an):en(void 0,an)}}}processSync(e){let en=!1,tn;return this.freeze(),assertParser("processSync",this.parser||this.Parser),assertCompiler("processSync",this.compiler||this.Compiler),this.process(e,nn),assertDone("processSync","process",en),tn;function nn(sn,on){en=!0,bail(sn),tn=on}}run(e,en,tn){assertNode(e),this.freeze();const nn=this.transformers;return!tn&&typeof en=="function"&&(tn=en,en=void 0),tn?sn(void 0,tn):new Promise(sn);function sn(on,un){const dn=vfile(en);nn.run(e,dn,fn);function fn(hn,an,rn){const cn=an||e;hn?un(hn):on?on(cn):tn(void 0,cn,rn)}}}runSync(e,en){let tn=!1,nn;return this.run(e,en,sn),assertDone("runSync","run",tn),nn;function sn(on,un){bail(on),nn=un,tn=!0}}stringify(e,en){this.freeze();const tn=vfile(en),nn=this.compiler||this.Compiler;return assertCompiler("stringify",nn),assertNode(e),nn(e,tn)}use(e,...en){const tn=this.attachers,nn=this.namespace;if(assertUnfrozen("use",this.frozen),e!=null)if(typeof e=="function")dn(e,en);else if(typeof e=="object")Array.isArray(e)?un(e):on(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function sn(fn){if(typeof fn=="function")dn(fn,[]);else if(typeof fn=="object")if(Array.isArray(fn)){const[hn,...an]=fn;dn(hn,an)}else on(fn);else throw new TypeError("Expected usable value, not `"+fn+"`")}function on(fn){if(!("plugins"in fn)&&!("settings"in fn))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");un(fn.plugins),fn.settings&&(nn.settings=extend$1(!0,nn.settings,fn.settings))}function un(fn){let hn=-1;if(fn!=null)if(Array.isArray(fn))for(;++hn<fn.length;){const an=fn[hn];sn(an)}else throw new TypeError("Expected a list of plugins, not `"+fn+"`")}function dn(fn,hn){let an=-1,rn=-1;for(;++an<tn.length;)if(tn[an][0]===fn){rn=an;break}if(rn===-1)tn.push([fn,...hn]);else if(hn.length>0){let[cn,...pn]=hn;const mn=tn[rn][1];isPlainObject(mn)&&isPlainObject(cn)&&(cn=extend$1(!0,mn,cn)),tn[rn]=[fn,cn,...pn]}}}};const unified=new Processor$1().freeze();function assertParser(St,e){if(typeof e!="function")throw new TypeError("Cannot `"+St+"` without `parser`")}function assertCompiler(St,e){if(typeof e!="function")throw new TypeError("Cannot `"+St+"` without `compiler`")}function assertUnfrozen(St,e){if(e)throw new Error("Cannot call `"+St+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function assertNode(St){if(!isPlainObject(St)||typeof St.type!="string")throw new TypeError("Expected node, got `"+St+"`")}function assertDone(St,e,en){if(!en)throw new Error("`"+St+"` finished async. Use `"+e+"` instead")}function vfile(St){return looksLikeAVFile(St)?St:new VFile(St)}function looksLikeAVFile(St){return!!(St&&typeof St=="object"&&"message"in St&&"messages"in St)}function looksLikeAValue(St){return typeof St=="string"||isUint8Array(St)}function isUint8Array(St){return!!(St&&typeof St=="object"&&"byteLength"in St&&"byteOffset"in St)}const changelog="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",emptyPlugins=[],emptyRemarkRehypeOptions={allowDangerousHtml:!0},safeProtocol=/^(https?|ircs?|mailto|xmpp)$/i,deprecations=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Markdown(St){const e=createProcessor(St),en=createFile(St);return post(e.runSync(e.parse(en),en),St)}function createProcessor(St){const e=St.rehypePlugins||emptyPlugins,en=St.remarkPlugins||emptyPlugins,tn=St.remarkRehypeOptions?{...St.remarkRehypeOptions,...emptyRemarkRehypeOptions}:emptyRemarkRehypeOptions;return unified().use(remarkParse).use(en).use(remarkRehype,tn).use(e)}function createFile(St){const e=St.children||"",en=new VFile;return typeof e=="string"&&(en.value=e),en}function post(St,e){const en=e.allowedElements,tn=e.allowElement,nn=e.components,sn=e.disallowedElements,on=e.skipHtml,un=e.unwrapDisallowed,dn=e.urlTransform||defaultUrlTransform;for(const hn of deprecations)Object.hasOwn(e,hn.from)&&(""+hn.from+(hn.to?"use `"+hn.to+"` instead":"remove it")+changelog+hn.id,void 0);return visit(St,fn),toJsxRuntime(St,{Fragment:jsxRuntimeExports.Fragment,components:nn,ignoreInvalidStyle:!0,jsx:jsxRuntimeExports.jsx,jsxs:jsxRuntimeExports.jsxs,passKeys:!0,passNode:!0});function fn(hn,an,rn){if(hn.type==="raw"&&rn&&typeof an=="number")return on?rn.children.splice(an,1):rn.children[an]={type:"text",value:hn.value},an;if(hn.type==="element"){let cn;for(cn in urlAttributes)if(Object.hasOwn(urlAttributes,cn)&&Object.hasOwn(hn.properties,cn)){const pn=hn.properties[cn],mn=urlAttributes[cn];(mn===null||mn.includes(hn.tagName))&&(hn.properties[cn]=dn(String(pn||""),cn,hn))}}if(hn.type==="element"){let cn=en?!en.includes(hn.tagName):sn?sn.includes(hn.tagName):!1;if(!cn&&tn&&typeof an=="number"&&(cn=!tn(hn,an,rn)),cn&&rn&&typeof an=="number")return un&&hn.children?rn.children.splice(an,1,...hn.children):rn.children.splice(an,1),an}}}function defaultUrlTransform(St){const e=St.indexOf(":"),en=St.indexOf("?"),tn=St.indexOf("#"),nn=St.indexOf("/");return e===-1||nn!==-1&&e>nn||en!==-1&&e>en||tn!==-1&&e>tn||safeProtocol.test(St.slice(0,e))?St:""}const ChatMessage=({role:St,content:e})=>{const en=St==="user";return jsxRuntimeExports.jsx("div",{className:`flex ${en?"justify-end":"justify-start"} mb-4`,children:jsxRuntimeExports.jsx("div",{className:`max-w-[85%] p-3 rounded-2xl ${en?"bg-blue-600 text-white rounded-tr-none":"bg-slate-800 text-slate-200 rounded-tl-none"}`,children:jsxRuntimeExports.jsx("div",{className:`text-sm leading-relaxed markdown-content ${en?"text-white":"text-slate-200"}`,children:jsxRuntimeExports.jsx(Markdown,{components:{ul:({node:tn,...nn})=>jsxRuntimeExports.jsx("ul",{className:"list-disc pl-4 my-2 space-y-1",...nn}),ol:({node:tn,...nn})=>jsxRuntimeExports.jsx("ol",{className:"list-decimal pl-4 my-2 space-y-1",...nn}),li:({node:tn,...nn})=>jsxRuntimeExports.jsx("li",{className:"",...nn}),p:({node:tn,...nn})=>jsxRuntimeExports.jsx("p",{className:"mb-2 last:mb-0",...nn}),strong:({node:tn,...nn})=>jsxRuntimeExports.jsx("strong",{className:"font-bold text-blue-300",...nn}),a:({node:tn,...nn})=>jsxRuntimeExports.jsx("a",{className:"text-blue-400 underline hover:text-blue-300",...nn}),code:({node:tn,...nn})=>jsxRuntimeExports.jsx("code",{className:"bg-black/30 px-1 py-0.5 rounded text-xs font-mono text-amber-300",...nn})},children:e})})})})},CoachView=()=>{const[St,e]=reactExports.useState(""),[en,tn]=reactExports.useState(!1),[nn,sn]=reactExports.useState([{role:"assistant",content:"Hi! I'm Coach GEM. Ask me anything about your voice journey!"}]),on=reactExports.useRef(null),un=()=>{var yn;(yn=on.current)==null||yn.scrollIntoView({behavior:"smooth"})};reactExports.useEffect(()=>{un()},[nn]);const{stats:dn,goals:fn,journals:hn}=useGem(),an=()=>{sn([{role:"assistant",content:"Chat cleared. What's on your mind?"}])},[rn,cn]=reactExports.useState(!1),[pn,mn]=reactExports.useState({name:"",pronouns:"",goals:""}),xn=async yn=>{if(yn.preventDefault(),!St.trim())return;const bn={role:"user",content:St};sn(wn=>[...wn,bn]),e(""),tn(!0);try{const wn=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:bn.content,history:nn,context:{stats:dn,goals:fn,journals:hn.slice(0,3),userProfile:pn}})});if(wn.ok){const _n=await wn.json();sn(Tn=>[...Tn,_n])}else if(wn.status===503){const _n=await wn.json();sn(Tn=>[...Tn,{role:"assistant",content:` ${_n.content}`}])}else throw new Error("Server error")}catch{let _n="I'm having trouble connecting to the server, but I can still help! Try asking about pitch, resonance, or vocal weight.";const Tn=bn.content.toLowerCase(),An=pn.name?`${pn.name}, `:"";Tn.includes("pitch")?_n=`${An}Pitch is the perceived frequency of your voice. For a feminine voice, target 170-220Hz. For masculine, 85-145Hz. Try the 'Pitch Staircase' game to practice control!`:Tn.includes("resonance")||Tn.includes("bright")||Tn.includes("dark")?_n=`${An}Resonance is the 'color' of your voice. Bright resonance (head voice) sounds more feminine, while dark resonance (chest voice) sounds more masculine. Use the Resonance Orb to visualize this!`:Tn.includes("weight")||Tn.includes("heavy")||Tn.includes("light")?_n=`${An}Vocal weight is how 'heavy' or 'buzzy' your voice sounds. A lighter weight is often perceived as more feminine. Try to speak softly and avoid 'pushing' the sound.`:Tn.includes("warmup")||Tn.includes("exercise")?_n=`${An}Try a simple siren exercise! Glide from your lowest note to your highest and back down. Keep it smooth and light.`:Tn.includes("game")&&(_n=`${An}Games are a great way to practice! Go to the Arcade tab to try 'Balloon Adventure' or 'Resonance River'.`),setTimeout(()=>{sn(Pn=>[...Pn,{role:"assistant",content:_n}])},1e3)}finally{tn(!1)}},gn=["How do I raise my pitch?","What is vocal weight?","Explain resonance","Give me a warmup"];return jsxRuntimeExports.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500 h-[calc(100vh-180px)] flex flex-col relative",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center px-2 mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"AI Coach"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>cn(!0),className:"text-xs text-blue-400 hover:text-blue-300 transition-colors font-bold",children:"Personalize"}),jsxRuntimeExports.jsx("button",{onClick:an,className:"text-xs text-slate-500 hover:text-white transition-colors",children:"Clear Chat"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4 mb-4 pr-2 scrollbar-thin scrollbar-thumb-slate-700 scrollbar-track-transparent",children:[nn.map((yn,bn)=>jsxRuntimeExports.jsx(ChatMessage,{role:yn.role,content:yn.content},bn)),en&&jsxRuntimeExports.jsx("div",{className:"flex justify-start",children:jsxRuntimeExports.jsxs("div",{className:"bg-slate-800 rounded-2xl rounded-tl-none p-4 text-slate-300 text-sm animate-pulse flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})}),jsxRuntimeExports.jsx("div",{ref:on})]}),nn.length===1&&jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2 mb-4 px-2",children:gn.map((yn,bn)=>jsxRuntimeExports.jsx("button",{onClick:()=>e(yn),className:"text-xs glass-panel hover:bg-white/10 text-blue-300 px-3 py-1.5 rounded-full transition-colors",children:yn},bn))}),jsxRuntimeExports.jsxs("form",{onSubmit:xn,className:"glass-panel p-2 rounded-full flex items-center gap-2 shadow-xl shrink-0 mx-2 mb-2",children:[jsxRuntimeExports.jsx("input",{type:"text",value:St,onChange:yn=>e(yn.target.value),placeholder:"Ask about your voice...",className:"flex-1 bg-transparent border-none outline-none px-4 text-white placeholder-slate-500",disabled:en}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:en,className:"p-3 bg-blue-600 rounded-full text-white hover:bg-blue-500 disabled:opacity-50 transition-colors shadow-lg shadow-blue-500/20",children:en?jsxRuntimeExports.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):jsxRuntimeExports.jsx(Send,{className:"w-4 h-4"})})]}),jsxRuntimeExports.jsx("div",{className:"text-[10px] text-slate-600 text-center pb-2",children:"Curriculum based on WPATH & SES-VMTW guidelines. Not medical advice."}),rn&&jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 z-50 bg-slate-950/95 backdrop-blur-sm p-4 flex flex-col animate-in fade-in duration-200",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Train Your Coach"}),jsxRuntimeExports.jsxs("div",{className:"space-y-4 flex-1",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider block mb-2",children:"What should I call you?"}),jsxRuntimeExports.jsx("input",{type:"text",value:pn.name,onChange:yn=>mn({...pn,name:yn.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-xl p-3 text-white focus:outline-none focus:border-blue-500",placeholder:"Name"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider block mb-2",children:"Pronouns"}),jsxRuntimeExports.jsx("input",{type:"text",value:pn.pronouns,onChange:yn=>mn({...pn,pronouns:yn.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-xl p-3 text-white focus:outline-none focus:border-blue-500",placeholder:"e.g. she/her, they/them"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider block mb-2",children:"Main Goal"}),jsxRuntimeExports.jsx("textarea",{value:pn.goals,onChange:yn=>mn({...pn,goals:yn.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-xl p-3 text-white focus:outline-none focus:border-blue-500 min-h-[100px]",placeholder:"What do you want to achieve with your voice?"})]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>cn(!1),className:"w-full py-3 bg-blue-600 rounded-xl font-bold text-white hover:bg-blue-500 transition-colors mt-4",children:"Save & Close"})]})]})},DailyGoalsWidget=({goals:St,compact:e=!1})=>{const en=St.every(tn=>tn.current>=tn.target);return e?jsxRuntimeExports.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:St.map(tn=>{const nn=Math.min(100,tn.current/tn.target*100),sn=tn.completed;return jsxRuntimeExports.jsxs("div",{className:`shrink-0 flex items-center gap-2 px-3 py-2 rounded-xl border ${sn?"bg-emerald-900/20 border-emerald-500/30":"bg-slate-800/50 border-white/5"}`,children:[jsxRuntimeExports.jsxs("div",{className:"relative w-8 h-8 flex items-center justify-center",children:[jsxRuntimeExports.jsxs("svg",{className:"w-full h-full -rotate-90",viewBox:"0 0 36 36",children:[jsxRuntimeExports.jsx("path",{className:"text-slate-700",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:sn?"text-emerald-500":"text-blue-500",strokeDasharray:`${nn}, 100`,d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"4"})]}),sn&&jsxRuntimeExports.jsx(Check,{className:"absolute w-4 h-4 text-emerald-500"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("span",{className:"text-[10px] text-slate-400 uppercase font-bold",children:tn.type}),jsxRuntimeExports.jsx("span",{className:"text-xs font-bold text-white",children:sn?"Complete!":`${Math.floor(tn.current)}/${tn.target}`})]})]},tn.id)})}):jsxRuntimeExports.jsxs("div",{className:`glass-panel p-4 rounded-2xl mb-4 border transition-all duration-500 ${en?"border-emerald-500/50 bg-emerald-900/10":"border-white/5"}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-3",children:[jsxRuntimeExports.jsxs("h3",{className:"text-sm font-bold text-white uppercase tracking-wider flex items-center gap-2",children:[jsxRuntimeExports.jsx(Target,{className:en?"text-emerald-400":"text-blue-400"})," Daily Goals"]}),en&&jsxRuntimeExports.jsx("span",{className:"text-[10px] bg-emerald-500 text-black font-bold px-2 py-1 rounded-full",children:"COMPLETE!"})]}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:St.map(tn=>{const nn=Math.min(100,tn.current/tn.target*100),sn=tn.completed;return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-xs text-slate-300 mb-1",children:[jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-2",children:[tn.label,jsxRuntimeExports.jsxs("span",{className:"text-[10px] text-yellow-500 bg-yellow-500/10 px-1.5 rounded border border-yellow-500/20",children:["+",tn.xp," XP"]})]}),jsxRuntimeExports.jsx("span",{className:sn?"text-emerald-400 font-bold":"text-slate-500",children:sn?jsxRuntimeExports.jsx(Check,{className:"w-3 h-3"}):`${Math.floor(tn.current)}/${tn.target}`})]}),jsxRuntimeExports.jsx("div",{className:"h-2 bg-slate-800 rounded-full overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:`h-full transition-all duration-500 ${sn?"bg-emerald-500":"bg-blue-500"}`,style:{width:`${nn}%`}})})]},tn.id)})})]})},MixingBoardView=({dataRef:St,audioEngine:e})=>{const[en,tn]=reactExports.useState(!1),[nn,sn]=reactExports.useState({pitch:200,resonance:1500,weight:0,contour:.5,volume:50});reactExports.useRef({});const on=reactExports.useRef({}),un=reactExports.useRef({}),dn=reactExports.useRef({}),fn=reactExports.useRef(null),hn=reactExports.useRef(null),an=reactExports.useRef(null);reactExports.useEffect(()=>{if(en&&(e!=null&&e.audioContext)){const pn=e.audioContext;an.current=pn;const mn=pn.createOscillator(),xn=pn.createGain();mn.type="sine",mn.frequency.setValueAtTime(nn.pitch,pn.currentTime),xn.gain.setValueAtTime(nn.volume/100*.3,pn.currentTime),mn.connect(xn),xn.connect(pn.destination),mn.start(),fn.current=mn,hn.current=xn}else fn.current&&(fn.current.stop(),fn.current=null,hn.current=null);return()=>{fn.current&&fn.current.stop()}},[en]),reactExports.useEffect(()=>{if(en&&fn.current&&hn.current&&an.current){const pn=an.current;fn.current.frequency.setValueAtTime(nn.pitch,pn.currentTime),hn.current.gain.setValueAtTime(nn.volume/100*.3,pn.currentTime)}},[nn,en]),reactExports.useEffect(()=>{if(en)return;const pn=()=>{var yn;if(!St.current)return;const xn=St.current,gn={pitch:{val:xn.pitch,min:50,max:350},resonance:{val:xn.resonance,min:500,max:2500},weight:{val:xn.weight,min:-2,max:2},contour:{val:((yn=xn.prosody)==null?void 0:yn.variation)||0,min:0,max:1},volume:{val:xn.volume,min:0,max:100}};Object.keys(gn).forEach(bn=>{const{val:wn,min:_n,max:Tn}=gn[bn],An=Math.max(0,Math.min(100,(wn-_n)/(Tn-_n)*100));un.current[bn]&&(un.current[bn].style.height=`${An}%`),dn.current[bn]&&(dn.current[bn].style.bottom=`calc(${An}% - 24px)`),on.current[bn]&&(on.current[bn].innerText=wn>0?Math.round(wn*10)/10:"---")}),requestAnimationFrame(pn)},mn=requestAnimationFrame(pn);return()=>cancelAnimationFrame(mn)},[en]);const rn=(pn,mn)=>{if(en){sn(gn=>({...gn,[pn]:parseFloat(mn)}));const xn=cn.find(gn=>gn.id===pn);if(xn){const gn=(mn-xn.min)/(xn.max-xn.min)*100;un.current[pn]&&(un.current[pn].style.height=`${gn}%`),dn.current[pn]&&(dn.current[pn].style.bottom=`calc(${gn}% - 24px)`),on.current[pn]&&(on.current[pn].innerText=Math.round(mn*10)/10)}}},cn=[{id:"pitch",label:"Pitch",min:50,max:350,top:"HIGH",bottom:"LOW",unit:"Hz"},{id:"resonance",label:"Resonance",min:500,max:2500,top:"BRIGHT",bottom:"DARK",unit:""},{id:"weight",label:"Weight",min:-2,max:2,top:"HEAVY",bottom:"LIGHT",unit:""},{id:"contour",label:"Contour",min:0,max:1,top:"WIDE",bottom:"FLAT",unit:""},{id:"volume",label:"Volume",min:0,max:100,top:"LOUD",bottom:"QUIET",unit:""}];return jsxRuntimeExports.jsxs("div",{className:"space-y-6 pb-20",children:[jsxRuntimeExports.jsx("div",{className:"glass-panel-dark p-6 rounded-2xl",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Mixing Board"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400 text-sm",children:en?"Interactive Mode - Adjust sliders to hear a generated tone":"Voice Mode - Sliders respond to your voice in real-time"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>tn(!en),className:`px-6 py-3 rounded-xl font-semibold transition-all flex items-center gap-2 ${en?"bg-purple-500 hover:bg-purple-600 text-white":"glass-panel hover:bg-white/10 text-white"}`,children:[en?jsxRuntimeExports.jsx(Volume2,{size:20}):jsxRuntimeExports.jsx(Mic,{size:20}),en?"Tone Mode":"Voice Mode"]})]})}),jsxRuntimeExports.jsx("div",{className:"glass-panel-dark p-8 rounded-2xl",children:jsxRuntimeExports.jsx("div",{className:"flex justify-around items-end gap-4 h-[500px]",children:cn.map(pn=>{const mn=en?nn[pn.id]:0,xn=(mn-pn.min)/(pn.max-pn.min)*100;return jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-4 flex-1 h-full",children:[jsxRuntimeExports.jsx("div",{className:"text-xs font-bold text-slate-400 tracking-widest",children:pn.top}),jsxRuntimeExports.jsxs("div",{className:"relative flex-1 w-20 flex flex-col items-center bg-slate-900/50 rounded-full border border-slate-700/50 p-1",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-x-0 top-2 bottom-2 w-1 mx-auto bg-slate-800 rounded-full"}),[0,25,50,75,100].map(gn=>jsxRuntimeExports.jsx("div",{className:"absolute left-2 right-2 h-px bg-slate-600/30",style:{bottom:`${gn}%`}},gn)),jsxRuntimeExports.jsx("div",{ref:gn=>un.current[pn.id]=gn,className:"absolute bottom-2 left-0 right-0 w-full rounded-full transition-all duration-75 ease-out opacity-50",style:{height:`${xn}%`,background:"linear-gradient(to top, #10b981, #3b82f6)"}}),jsxRuntimeExports.jsx("input",{type:"range",min:pn.min,max:pn.max,step:(pn.max-pn.min)/100,value:en?nn[pn.id]:(pn.min+pn.max)/2,onChange:gn=>rn(pn.id,gn.target.value),disabled:!en,className:"absolute inset-0 w-full h-full opacity-0 z-20",style:{writingMode:"bt-lr",WebkitAppearance:"slider-vertical",cursor:en?"pointer":"default"}}),jsxRuntimeExports.jsx("div",{ref:gn=>dn.current[pn.id]=gn,className:"absolute w-16 h-12 left-2 flex items-center justify-center transition-all duration-75 ease-out pointer-events-none z-10",style:{bottom:`calc(${xn}% - 24px)`},children:jsxRuntimeExports.jsx("div",{className:"w-16 h-10 rounded-lg bg-gradient-to-b from-slate-700 to-slate-800 border border-slate-600 shadow-xl flex items-center justify-center",children:jsxRuntimeExports.jsx("div",{className:"w-10 h-1 bg-slate-900/50 rounded-full"})})})]}),jsxRuntimeExports.jsx("div",{className:"text-sm font-bold text-white/90 tracking-wide mt-2",children:pn.label}),jsxRuntimeExports.jsx("div",{ref:gn=>on.current[pn.id]=gn,className:"text-xs font-mono text-emerald-400 font-bold",children:mn>0?Math.round(mn*10)/10:"---"}),jsxRuntimeExports.jsx("div",{className:"text-xs font-bold text-slate-400 tracking-widest",children:pn.bottom})]},pn.id)})})})]})},scriptRel="modulepreload",assetsURL=function(St,e){return new URL(St,e).href},seen={},__vitePreload=function(e,en,tn){let nn=Promise.resolve();if(en&&en.length>0){const on=document.getElementsByTagName("link"),un=document.querySelector("meta[property=csp-nonce]"),dn=(un==null?void 0:un.nonce)||(un==null?void 0:un.getAttribute("nonce"));nn=Promise.allSettled(en.map(fn=>{if(fn=assetsURL(fn,tn),fn in seen)return;seen[fn]=!0;const hn=fn.endsWith(".css"),an=hn?'[rel="stylesheet"]':"";if(!!tn)for(let pn=on.length-1;pn>=0;pn--){const mn=on[pn];if(mn.href===fn&&(!hn||mn.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${fn}"]${an}`))return;const cn=document.createElement("link");if(cn.rel=hn?"stylesheet":scriptRel,hn||(cn.as="script"),cn.crossOrigin="",cn.href=fn,dn&&cn.setAttribute("nonce",dn),document.head.appendChild(cn),hn)return new Promise((pn,mn)=>{cn.addEventListener("load",pn),cn.addEventListener("error",()=>mn(new Error(`Unable to preload CSS for ${fn}`)))})}))}function sn(on){const un=new Event("vite:preloadError",{cancelable:!0});if(un.payload=on,window.dispatchEvent(un),!un.defaultPrevented)throw on}return nn.then(on=>{for(const un of on||[])un.status==="rejected"&&sn(un.reason);return e().catch(sn)})};function _typeof(St){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(St)}var u8=Uint8Array,u16=Uint16Array,i32=Int32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(St,e){for(var en=new u16(31),tn=0;tn<31;++tn)en[tn]=e+=1<<St[tn-1];for(var nn=new i32(en[30]),tn=1;tn<30;++tn)for(var sn=en[tn];sn<en[tn+1];++sn)nn[sn]=sn-en[tn]<<5|tn;return{b:en,r:nn}},_a$1=freb(fleb,2),fl=_a$1.b,revfl=_a$1.r;fl[28]=258,revfl[258]=28;var _b=freb(fdeb,0),revfd=_b.r,rev=new u16(32768);for(var i$1=0;i$1<32768;++i$1){var x$1=(i$1&43690)>>1|(i$1&21845)<<1;x$1=(x$1&52428)>>2|(x$1&13107)<<2,x$1=(x$1&61680)>>4|(x$1&3855)<<4,rev[i$1]=((x$1&65280)>>8|(x$1&255)<<8)>>1}var hMap=function(St,e,en){for(var tn=St.length,nn=0,sn=new u16(e);nn<tn;++nn)St[nn]&&++sn[St[nn]-1];var on=new u16(e);for(nn=1;nn<e;++nn)on[nn]=on[nn-1]+sn[nn-1]<<1;var un;if(en){un=new u16(1<<e);var dn=15-e;for(nn=0;nn<tn;++nn)if(St[nn])for(var fn=nn<<4|St[nn],hn=e-St[nn],an=on[St[nn]-1]++<<hn,rn=an|(1<<hn)-1;an<=rn;++an)un[rev[an]>>dn]=fn}else for(un=new u16(tn),nn=0;nn<tn;++nn)St[nn]&&(un[nn]=rev[on[St[nn]-1]++]>>15-St[nn]);return un},flt=new u8(288);for(var i$1=0;i$1<144;++i$1)flt[i$1]=8;for(var i$1=144;i$1<256;++i$1)flt[i$1]=9;for(var i$1=256;i$1<280;++i$1)flt[i$1]=7;for(var i$1=280;i$1<288;++i$1)flt[i$1]=8;var fdt=new u8(32);for(var i$1=0;i$1<32;++i$1)fdt[i$1]=5;var flm=hMap(flt,9,0),fdm=hMap(fdt,5,0),shft=function(St){return(St+7)/8|0},slc=function(St,e,en){return(en==null||en>St.length)&&(en=St.length),new u8(St.subarray(e,en))},wbits=function(St,e,en){en<<=e&7;var tn=e/8|0;St[tn]|=en,St[tn+1]|=en>>8},wbits16=function(St,e,en){en<<=e&7;var tn=e/8|0;St[tn]|=en,St[tn+1]|=en>>8,St[tn+2]|=en>>16},hTree=function(St,e){for(var en=[],tn=0;tn<St.length;++tn)St[tn]&&en.push({s:tn,f:St[tn]});var nn=en.length,sn=en.slice();if(!nn)return{t:et$1,l:0};if(nn==1){var on=new u8(en[0].s+1);return on[en[0].s]=1,{t:on,l:1}}en.sort(function(_n,Tn){return _n.f-Tn.f}),en.push({s:-1,f:25001});var un=en[0],dn=en[1],fn=0,hn=1,an=2;for(en[0]={s:-1,f:un.f+dn.f,l:un,r:dn};hn!=nn-1;)un=en[en[fn].f<en[an].f?fn++:an++],dn=en[fn!=hn&&en[fn].f<en[an].f?fn++:an++],en[hn++]={s:-1,f:un.f+dn.f,l:un,r:dn};for(var rn=sn[0].s,tn=1;tn<nn;++tn)sn[tn].s>rn&&(rn=sn[tn].s);var cn=new u16(rn+1),pn=ln(en[hn-1],cn,0);if(pn>e){var tn=0,mn=0,xn=pn-e,gn=1<<xn;for(sn.sort(function(Tn,An){return cn[An.s]-cn[Tn.s]||Tn.f-An.f});tn<nn;++tn){var yn=sn[tn].s;if(cn[yn]>e)mn+=gn-(1<<pn-cn[yn]),cn[yn]=e;else break}for(mn>>=xn;mn>0;){var bn=sn[tn].s;cn[bn]<e?mn-=1<<e-cn[bn]++-1:++tn}for(;tn>=0&&mn;--tn){var wn=sn[tn].s;cn[wn]==e&&(--cn[wn],++mn)}pn=e}return{t:new u8(cn),l:pn}},ln=function(St,e,en){return St.s==-1?Math.max(ln(St.l,e,en+1),ln(St.r,e,en+1)):e[St.s]=en},lc=function(St){for(var e=St.length;e&&!St[--e];);for(var en=new u16(++e),tn=0,nn=St[0],sn=1,on=function(dn){en[tn++]=dn},un=1;un<=e;++un)if(St[un]==nn&&un!=e)++sn;else{if(!nn&&sn>2){for(;sn>138;sn-=138)on(32754);sn>2&&(on(sn>10?sn-11<<5|28690:sn-3<<5|12305),sn=0)}else if(sn>3){for(on(nn),--sn;sn>6;sn-=6)on(8304);sn>2&&(on(sn-3<<5|8208),sn=0)}for(;sn--;)on(nn);sn=1,nn=St[un]}return{c:en.subarray(0,tn),n:e}},clen=function(St,e){for(var en=0,tn=0;tn<e.length;++tn)en+=St[tn]*e[tn];return en},wfblk=function(St,e,en){var tn=en.length,nn=shft(e+2);St[nn]=tn&255,St[nn+1]=tn>>8,St[nn+2]=St[nn]^255,St[nn+3]=St[nn+1]^255;for(var sn=0;sn<tn;++sn)St[nn+sn+4]=en[sn];return(nn+4+tn)*8},wblk=function(St,e,en,tn,nn,sn,on,un,dn,fn,hn){wbits(e,hn++,en),++nn[256];for(var an=hTree(nn,15),rn=an.t,cn=an.l,pn=hTree(sn,15),mn=pn.t,xn=pn.l,gn=lc(rn),yn=gn.c,bn=gn.n,wn=lc(mn),_n=wn.c,Tn=wn.n,An=new u16(19),Pn=0;Pn<yn.length;++Pn)++An[yn[Pn]&31];for(var Pn=0;Pn<_n.length;++Pn)++An[_n[Pn]&31];for(var Sn=hTree(An,7),Cn=Sn.t,Nn=Sn.l,Mn=19;Mn>4&&!Cn[clim[Mn-1]];--Mn);var Fn=fn+5<<3,In=clen(nn,flt)+clen(sn,fdt)+on,Bn=clen(nn,rn)+clen(sn,mn)+on+14+3*Mn+clen(An,Cn)+2*An[16]+3*An[17]+7*An[18];if(dn>=0&&Fn<=In&&Fn<=Bn)return wfblk(e,hn,St.subarray(dn,dn+fn));var Ln,qn,Yn,Qn;if(wbits(e,hn,1+(Bn<In)),hn+=2,Bn<In){Ln=hMap(rn,cn,0),qn=rn,Yn=hMap(mn,xn,0),Qn=mn;var zn=hMap(Cn,Nn,0);wbits(e,hn,bn-257),wbits(e,hn+5,Tn-1),wbits(e,hn+10,Mn-4),hn+=14;for(var Pn=0;Pn<Mn;++Pn)wbits(e,hn+3*Pn,Cn[clim[Pn]]);hn+=3*Mn;for(var lr=[yn,_n],$n=0;$n<2;++$n)for(var On=lr[$n],Pn=0;Pn<On.length;++Pn){var er=On[Pn]&31;wbits(e,hn,zn[er]),hn+=Cn[er],er>15&&(wbits(e,hn,On[Pn]>>5&127),hn+=On[Pn]>>12)}}else Ln=flm,qn=flt,Yn=fdm,Qn=fdt;for(var Pn=0;Pn<un;++Pn){var sr=tn[Pn];if(sr>255){var er=sr>>18&31;wbits16(e,hn,Ln[er+257]),hn+=qn[er+257],er>7&&(wbits(e,hn,sr>>23&31),hn+=fleb[er]);var ar=sr&31;wbits16(e,hn,Yn[ar]),hn+=Qn[ar],ar>3&&(wbits16(e,hn,sr>>5&8191),hn+=fdeb[ar])}else wbits16(e,hn,Ln[sr]),hn+=qn[sr]}return wbits16(e,hn,Ln[256]),hn+qn[256]},deo=new i32([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),et$1=new u8(0),dflt=function(St,e,en,tn,nn,sn){var on=sn.z||St.length,un=new u8(tn+on+5*(1+Math.ceil(on/7e3))+nn),dn=un.subarray(tn,un.length-nn),fn=sn.l,hn=(sn.r||0)&7;if(e){hn&&(dn[0]=sn.r>>3);for(var an=deo[e-1],rn=an>>13,cn=an&8191,pn=(1<<en)-1,mn=sn.p||new u16(32768),xn=sn.h||new u16(pn+1),gn=Math.ceil(en/3),yn=2*gn,bn=function(Gr){return(St[Gr]^St[Gr+1]<<gn^St[Gr+2]<<yn)&pn},wn=new i32(25e3),_n=new u16(288),Tn=new u16(32),An=0,Pn=0,Sn=sn.i||0,Cn=0,Nn=sn.w||0,Mn=0;Sn+2<on;++Sn){var Fn=bn(Sn),In=Sn&32767,Bn=xn[Fn];if(mn[In]=Bn,xn[Fn]=In,Nn<=Sn){var Ln=on-Sn;if((An>7e3||Cn>24576)&&(Ln>423||!fn)){hn=wblk(St,dn,0,wn,_n,Tn,Pn,Cn,Mn,Sn-Mn,hn),Cn=An=Pn=0,Mn=Sn;for(var qn=0;qn<286;++qn)_n[qn]=0;for(var qn=0;qn<30;++qn)Tn[qn]=0}var Yn=2,Qn=0,zn=cn,lr=In-Bn&32767;if(Ln>2&&Fn==bn(Sn-lr))for(var $n=Math.min(rn,Ln)-1,On=Math.min(32767,Sn),er=Math.min(258,Ln);lr<=On&&--zn&&In!=Bn;){if(St[Sn+Yn]==St[Sn+Yn-lr]){for(var sr=0;sr<er&&St[Sn+sr]==St[Sn+sr-lr];++sr);if(sr>Yn){if(Yn=sr,Qn=lr,sr>$n)break;for(var ar=Math.min(lr,sr-2),cr=0,qn=0;qn<ar;++qn){var gr=Sn-lr+qn&32767,vr=mn[gr],Er=gr-vr&32767;Er>cr&&(cr=Er,Bn=gr)}}}In=Bn,Bn=mn[In],lr+=In-Bn&32767}if(Qn){wn[Cn++]=268435456|revfl[Yn]<<18|revfd[Qn];var Rr=revfl[Yn]&31,Kr=revfd[Qn]&31;Pn+=fleb[Rr]+fdeb[Kr],++_n[257+Rr],++Tn[Kr],Nn=Sn+Yn,++An}else wn[Cn++]=St[Sn],++_n[St[Sn]]}}for(Sn=Math.max(Sn,Nn);Sn<on;++Sn)wn[Cn++]=St[Sn],++_n[St[Sn]];hn=wblk(St,dn,fn,wn,_n,Tn,Pn,Cn,Mn,Sn-Mn,hn),fn||(sn.r=hn&7|dn[hn/8|0]<<3,hn-=7,sn.h=xn,sn.p=mn,sn.i=Sn,sn.w=Nn)}else{for(var Sn=sn.w||0;Sn<on+fn;Sn+=65535){var Cr=Sn+65535;Cr>=on&&(dn[hn/8|0]=fn,Cr=on),hn=wfblk(dn,hn+1,St.subarray(Sn,Cr))}sn.i=on}return slc(un,0,tn+shft(hn)+nn)},adler=function(){var St=1,e=0;return{p:function(en){for(var tn=St,nn=e,sn=en.length|0,on=0;on!=sn;){for(var un=Math.min(on+2655,sn);on<un;++on)nn+=tn+=en[on];tn=(tn&65535)+15*(tn>>16),nn=(nn&65535)+15*(nn>>16)}St=tn,e=nn},d:function(){return St%=65521,e%=65521,(St&255)<<24|(St&65280)<<8|(e&255)<<8|e>>8}}},dopt=function(St,e,en,tn,nn){if(!nn&&(nn={l:1},e.dictionary)){var sn=e.dictionary.subarray(-32768),on=new u8(sn.length+St.length);on.set(sn),on.set(St,sn.length),St=on,nn.w=sn.length}return dflt(St,e.level==null?6:e.level,e.mem==null?nn.l?Math.ceil(Math.max(8,Math.min(13,Math.log(St.length)))*1.5):20:12+e.mem,en,tn,nn)},wbytes=function(St,e,en){for(;en;++e)St[e]=en,en>>>=8},zlh=function(St,e){var en=e.level,tn=en==0?0:en<6?1:en==9?3:2;if(St[0]=120,St[1]=tn<<6|(e.dictionary&&32),St[1]|=31-(St[0]<<8|St[1])%31,e.dictionary){var nn=adler();nn.p(e.dictionary),wbytes(St,2,nn.d())}};function zlibSync(St,e){e||(e={});var en=adler();en.p(St);var tn=dopt(St,e,e.dictionary?6:2,4);return zlh(tn,e),wbytes(tn,tn.length-4,en.d()),tn}var td=typeof TextDecoder<"u"&&new TextDecoder,tds=0;try{td.decode(et$1,{stream:!0}),tds=1}catch{}function _arrayWithHoles(St){if(Array.isArray(St))return St}function _iterableToArrayLimit(St,e){var en=St==null?null:typeof Symbol<"u"&&St[Symbol.iterator]||St["@@iterator"];if(en!=null){var tn,nn,sn,on,un=[],dn=!0,fn=!1;try{if(sn=(en=en.call(St)).next,e!==0)for(;!(dn=(tn=sn.call(en)).done)&&(un.push(tn.value),un.length!==e);dn=!0);}catch(hn){fn=!0,nn=hn}finally{try{if(!dn&&en.return!=null&&(on=en.return(),Object(on)!==on))return}finally{if(fn)throw nn}}return un}}function _arrayLikeToArray(St,e){(e==null||e>St.length)&&(e=St.length);for(var en=0,tn=Array(e);en<e;en++)tn[en]=St[en];return tn}function _unsupportedIterableToArray(St,e){if(St){if(typeof St=="string")return _arrayLikeToArray(St,e);var en={}.toString.call(St).slice(8,-1);return en==="Object"&&St.constructor&&(en=St.constructor.name),en==="Map"||en==="Set"?Array.from(St):en==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(en)?_arrayLikeToArray(St,e):void 0}}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _slicedToArray(St,e){return _arrayWithHoles(St)||_iterableToArrayLimit(St,e)||_unsupportedIterableToArray(St,e)||_nonIterableRest()}function decode(St,e="utf8"){return new TextDecoder(e).decode(St)}const encoder=new TextEncoder;function encode(St){return encoder.encode(St)}const defaultByteLength=1024*8,hostBigEndian=(()=>{const St=new Uint8Array(4),e=new Uint32Array(St.buffer);return!((e[0]=1)&St[0])})(),typedArrays={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class IOBuffer{constructor(e=defaultByteLength,en={}){Mr(this,"buffer");Mr(this,"byteLength");Mr(this,"byteOffset");Mr(this,"length");Mr(this,"offset");Mr(this,"lastWrittenByte");Mr(this,"littleEndian");Mr(this,"_data");Mr(this,"_mark");Mr(this,"_marks");let tn=!1;typeof e=="number"?e=new ArrayBuffer(e):(tn=!0,this.lastWrittenByte=e.byteLength);const nn=en.offset?en.offset>>>0:0,sn=e.byteLength-nn;let on=nn;(ArrayBuffer.isView(e)||e instanceof IOBuffer)&&(e.byteLength!==e.buffer.byteLength&&(on=e.byteOffset+nn),e=e.buffer),tn?this.lastWrittenByte=sn:this.lastWrittenByte=0,this.buffer=e,this.length=sn,this.byteLength=sn,this.byteOffset=on,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,on,sn),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const tn=(this.offset+e)*2,nn=new Uint8Array(tn);nn.set(new Uint8Array(this.buffer)),this.buffer=nn.buffer,this.length=tn,this.byteLength=tn,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,en){const tn=typedArrays[en].BYTES_PER_ELEMENT*e,nn=this.byteOffset+this.offset,sn=this.buffer.slice(nn,nn+tn);if(this.littleEndian===hostBigEndian&&en!=="uint8"&&en!=="int8"){const un=new Uint8Array(this.buffer.slice(nn,nn+tn));un.reverse();const dn=new typedArrays[en](un.buffer);return this.offset+=tn,dn.reverse(),dn}const on=new typedArrays[en](sn);return this.offset+=tn,on}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let en="";for(let tn=0;tn<e;tn++)en+=this.readChar();return en}readUtf8(e=1){return decode(this.readBytes(e))}decodeText(e=1,en="utf8"){return decode(this.readBytes(e),en)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let en=0;en<e.length;en++)this._data.setUint8(this.offset++,e[en]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let en=0;en<e.length;en++)this.writeUint8(e.charCodeAt(en));return this}writeUtf8(e){return this.writeBytes(encode(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function zero$1(St){let e=St.length;for(;--e>=0;)St[e]=0}const MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,DIST_CODE_LEN=512,static_ltree=new Array((L_CODES$1+2)*2);zero$1(static_ltree);const static_dtree=new Array(D_CODES$1*2);zero$1(static_dtree);const _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);const _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);const base_length=new Array(LENGTH_CODES$1);zero$1(base_length);const base_dist=new Array(D_CODES$1);zero$1(base_dist);const adler32=(St,e,en,tn)=>{let nn=St&65535|0,sn=St>>>16&65535|0,on=0;for(;en!==0;){on=en>2e3?2e3:en,en-=on;do nn=nn+e[tn++]|0,sn=sn+nn|0;while(--on);nn%=65521,sn%=65521}return nn|sn<<16|0};var adler32_1=adler32;const makeTable=()=>{let St,e=[];for(var en=0;en<256;en++){St=en;for(var tn=0;tn<8;tn++)St=St&1?3988292384^St>>>1:St>>>1;e[en]=St}return e},crcTable$1=new Uint32Array(makeTable()),crc32=(St,e,en,tn)=>{const nn=crcTable$1,sn=tn+en;St^=-1;for(let on=tn;on<sn;on++)St=St>>>8^nn[(St^e[on])&255];return St^-1};var crc32_1=crc32,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},constants$2={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const _has=(St,e)=>Object.prototype.hasOwnProperty.call(St,e);var assign$1=function(St){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const en=e.shift();if(en){if(typeof en!="object")throw new TypeError(en+"must be non-object");for(const tn in en)_has(en,tn)&&(St[tn]=en[tn])}}return St},flattenChunks=St=>{let e=0;for(let tn=0,nn=St.length;tn<nn;tn++)e+=St[tn].length;const en=new Uint8Array(e);for(let tn=0,nn=0,sn=St.length;tn<sn;tn++){let on=St[tn];en.set(on,nn),nn+=on.length}return en},common={assign:assign$1,flattenChunks};let STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{STR_APPLY_UIA_OK=!1}const _utf8len=new Uint8Array(256);for(let St=0;St<256;St++)_utf8len[St]=St>=252?6:St>=248?5:St>=240?4:St>=224?3:St>=192?2:1;_utf8len[254]=_utf8len[254]=1;var string2buf=St=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(St);let e,en,tn,nn,sn,on=St.length,un=0;for(nn=0;nn<on;nn++)en=St.charCodeAt(nn),(en&64512)===55296&&nn+1<on&&(tn=St.charCodeAt(nn+1),(tn&64512)===56320&&(en=65536+(en-55296<<10)+(tn-56320),nn++)),un+=en<128?1:en<2048?2:en<65536?3:4;for(e=new Uint8Array(un),sn=0,nn=0;sn<un;nn++)en=St.charCodeAt(nn),(en&64512)===55296&&nn+1<on&&(tn=St.charCodeAt(nn+1),(tn&64512)===56320&&(en=65536+(en-55296<<10)+(tn-56320),nn++)),en<128?e[sn++]=en:en<2048?(e[sn++]=192|en>>>6,e[sn++]=128|en&63):en<65536?(e[sn++]=224|en>>>12,e[sn++]=128|en>>>6&63,e[sn++]=128|en&63):(e[sn++]=240|en>>>18,e[sn++]=128|en>>>12&63,e[sn++]=128|en>>>6&63,e[sn++]=128|en&63);return e};const buf2binstring=(St,e)=>{if(e<65534&&St.subarray&&STR_APPLY_UIA_OK)return String.fromCharCode.apply(null,St.length===e?St:St.subarray(0,e));let en="";for(let tn=0;tn<e;tn++)en+=String.fromCharCode(St[tn]);return en};var buf2string=(St,e)=>{const en=e||St.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(St.subarray(0,e));let tn,nn;const sn=new Array(en*2);for(nn=0,tn=0;tn<en;){let on=St[tn++];if(on<128){sn[nn++]=on;continue}let un=_utf8len[on];if(un>4){sn[nn++]=65533,tn+=un-1;continue}for(on&=un===2?31:un===3?15:7;un>1&&tn<en;)on=on<<6|St[tn++]&63,un--;if(un>1){sn[nn++]=65533;continue}on<65536?sn[nn++]=on:(on-=65536,sn[nn++]=55296|on>>10&1023,sn[nn++]=56320|on&1023)}return buf2binstring(sn,nn)},utf8border=(St,e)=>{e=e||St.length,e>St.length&&(e=St.length);let en=e-1;for(;en>=0&&(St[en]&192)===128;)en--;return en<0||en===0?e:en+_utf8len[St[en]]>e?en:e},strings={string2buf,buf2string,utf8border};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zstream=ZStream;const BAD$1=16209,TYPE$1=16191;var inffast=function(e,en){let tn,nn,sn,on,un,dn,fn,hn,an,rn,cn,pn,mn,xn,gn,yn,bn,wn,_n,Tn,An,Pn,Sn,Cn;const Nn=e.state;tn=e.next_in,Sn=e.input,nn=tn+(e.avail_in-5),sn=e.next_out,Cn=e.output,on=sn-(en-e.avail_out),un=sn+(e.avail_out-257),dn=Nn.dmax,fn=Nn.wsize,hn=Nn.whave,an=Nn.wnext,rn=Nn.window,cn=Nn.hold,pn=Nn.bits,mn=Nn.lencode,xn=Nn.distcode,gn=(1<<Nn.lenbits)-1,yn=(1<<Nn.distbits)-1;e:do{pn<15&&(cn+=Sn[tn++]<<pn,pn+=8,cn+=Sn[tn++]<<pn,pn+=8),bn=mn[cn&gn];t:for(;;){if(wn=bn>>>24,cn>>>=wn,pn-=wn,wn=bn>>>16&255,wn===0)Cn[sn++]=bn&65535;else if(wn&16){_n=bn&65535,wn&=15,wn&&(pn<wn&&(cn+=Sn[tn++]<<pn,pn+=8),_n+=cn&(1<<wn)-1,cn>>>=wn,pn-=wn),pn<15&&(cn+=Sn[tn++]<<pn,pn+=8,cn+=Sn[tn++]<<pn,pn+=8),bn=xn[cn&yn];n:for(;;){if(wn=bn>>>24,cn>>>=wn,pn-=wn,wn=bn>>>16&255,wn&16){if(Tn=bn&65535,wn&=15,pn<wn&&(cn+=Sn[tn++]<<pn,pn+=8,pn<wn&&(cn+=Sn[tn++]<<pn,pn+=8)),Tn+=cn&(1<<wn)-1,Tn>dn){e.msg="invalid distance too far back",Nn.mode=BAD$1;break e}if(cn>>>=wn,pn-=wn,wn=sn-on,Tn>wn){if(wn=Tn-wn,wn>hn&&Nn.sane){e.msg="invalid distance too far back",Nn.mode=BAD$1;break e}if(An=0,Pn=rn,an===0){if(An+=fn-wn,wn<_n){_n-=wn;do Cn[sn++]=rn[An++];while(--wn);An=sn-Tn,Pn=Cn}}else if(an<wn){if(An+=fn+an-wn,wn-=an,wn<_n){_n-=wn;do Cn[sn++]=rn[An++];while(--wn);if(An=0,an<_n){wn=an,_n-=wn;do Cn[sn++]=rn[An++];while(--wn);An=sn-Tn,Pn=Cn}}}else if(An+=an-wn,wn<_n){_n-=wn;do Cn[sn++]=rn[An++];while(--wn);An=sn-Tn,Pn=Cn}for(;_n>2;)Cn[sn++]=Pn[An++],Cn[sn++]=Pn[An++],Cn[sn++]=Pn[An++],_n-=3;_n&&(Cn[sn++]=Pn[An++],_n>1&&(Cn[sn++]=Pn[An++]))}else{An=sn-Tn;do Cn[sn++]=Cn[An++],Cn[sn++]=Cn[An++],Cn[sn++]=Cn[An++],_n-=3;while(_n>2);_n&&(Cn[sn++]=Cn[An++],_n>1&&(Cn[sn++]=Cn[An++]))}}else if(wn&64){e.msg="invalid distance code",Nn.mode=BAD$1;break e}else{bn=xn[(bn&65535)+(cn&(1<<wn)-1)];continue n}break}}else if(wn&64)if(wn&32){Nn.mode=TYPE$1;break e}else{e.msg="invalid literal/length code",Nn.mode=BAD$1;break e}else{bn=mn[(bn&65535)+(cn&(1<<wn)-1)];continue t}break}}while(tn<nn&&sn<un);_n=pn>>3,tn-=_n,pn-=_n<<3,cn&=(1<<pn)-1,e.next_in=tn,e.next_out=sn,e.avail_in=tn<nn?5+(nn-tn):5-(tn-nn),e.avail_out=sn<un?257+(un-sn):257-(sn-un),Nn.hold=cn,Nn.bits=pn};const MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lext=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dbase=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dext=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),inflate_table=(St,e,en,tn,nn,sn,on,un)=>{const dn=un.bits;let fn=0,hn=0,an=0,rn=0,cn=0,pn=0,mn=0,xn=0,gn=0,yn=0,bn,wn,_n,Tn,An,Pn=null,Sn;const Cn=new Uint16Array(MAXBITS+1),Nn=new Uint16Array(MAXBITS+1);let Mn=null,Fn,In,Bn;for(fn=0;fn<=MAXBITS;fn++)Cn[fn]=0;for(hn=0;hn<tn;hn++)Cn[e[en+hn]]++;for(cn=dn,rn=MAXBITS;rn>=1&&Cn[rn]===0;rn--);if(cn>rn&&(cn=rn),rn===0)return nn[sn++]=1<<24|64<<16|0,nn[sn++]=1<<24|64<<16|0,un.bits=1,0;for(an=1;an<rn&&Cn[an]===0;an++);for(cn<an&&(cn=an),xn=1,fn=1;fn<=MAXBITS;fn++)if(xn<<=1,xn-=Cn[fn],xn<0)return-1;if(xn>0&&(St===CODES$1||rn!==1))return-1;for(Nn[1]=0,fn=1;fn<MAXBITS;fn++)Nn[fn+1]=Nn[fn]+Cn[fn];for(hn=0;hn<tn;hn++)e[en+hn]!==0&&(on[Nn[e[en+hn]]++]=hn);if(St===CODES$1?(Pn=Mn=on,Sn=20):St===LENS$1?(Pn=lbase,Mn=lext,Sn=257):(Pn=dbase,Mn=dext,Sn=0),yn=0,hn=0,fn=an,An=sn,pn=cn,mn=0,_n=-1,gn=1<<cn,Tn=gn-1,St===LENS$1&&gn>ENOUGH_LENS$1||St===DISTS$1&&gn>ENOUGH_DISTS$1)return 1;for(;;){Fn=fn-mn,on[hn]+1<Sn?(In=0,Bn=on[hn]):on[hn]>=Sn?(In=Mn[on[hn]-Sn],Bn=Pn[on[hn]-Sn]):(In=96,Bn=0),bn=1<<fn-mn,wn=1<<pn,an=wn;do wn-=bn,nn[An+(yn>>mn)+wn]=Fn<<24|In<<16|Bn|0;while(wn!==0);for(bn=1<<fn-1;yn&bn;)bn>>=1;if(bn!==0?(yn&=bn-1,yn+=bn):yn=0,hn++,--Cn[fn]===0){if(fn===rn)break;fn=e[en+on[hn]]}if(fn>cn&&(yn&Tn)!==_n){for(mn===0&&(mn=cn),An+=an,pn=fn-mn,xn=1<<pn;pn+mn<rn&&(xn-=Cn[pn+mn],!(xn<=0));)pn++,xn<<=1;if(gn+=1<<pn,St===LENS$1&&gn>ENOUGH_LENS$1||St===DISTS$1&&gn>ENOUGH_DISTS$1)return 1;_n=yn&Tn,nn[_n]=cn<<24|pn<<16|An-sn|0}}return yn!==0&&(nn[An+yn]=fn-mn<<24|64<<16|0),un.bits=cn,0};var inftrees=inflate_table;const CODES=0,LENS=1,DISTS=2,{Z_FINISH:Z_FINISH$1,Z_BLOCK,Z_TREES,Z_OK:Z_OK$1,Z_STREAM_END:Z_STREAM_END$1,Z_NEED_DICT:Z_NEED_DICT$1,Z_STREAM_ERROR:Z_STREAM_ERROR$1,Z_DATA_ERROR:Z_DATA_ERROR$1,Z_MEM_ERROR:Z_MEM_ERROR$1,Z_BUF_ERROR,Z_DEFLATED}=constants$2,HEAD=16180,FLAGS=16181,TIME=16182,OS=16183,EXLEN=16184,EXTRA=16185,NAME=16186,COMMENT=16187,HCRC=16188,DICTID=16189,DICT=16190,TYPE=16191,TYPEDO=16192,STORED=16193,COPY_=16194,COPY=16195,TABLE=16196,LENLENS=16197,CODELENS=16198,LEN_=16199,LEN=16200,LENEXT=16201,DIST=16202,DISTEXT=16203,MATCH=16204,LIT=16205,CHECK=16206,LENGTH=16207,DONE=16208,BAD=16209,MEM=16210,SYNC=16211,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS,zswap32=St=>(St>>>24&255)+(St>>>8&65280)+((St&65280)<<8)+((St&255)<<24);function InflateState(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const inflateStateCheck=St=>{if(!St)return 1;const e=St.state;return!e||e.strm!==St||e.mode<HEAD||e.mode>SYNC?1:0},inflateResetKeep=St=>{if(inflateStateCheck(St))return Z_STREAM_ERROR$1;const e=St.state;return St.total_in=St.total_out=e.total=0,St.msg="",e.wrap&&(St.adler=e.wrap&1),e.mode=HEAD,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(ENOUGH_LENS),e.distcode=e.distdyn=new Int32Array(ENOUGH_DISTS),e.sane=1,e.back=-1,Z_OK$1},inflateReset=St=>{if(inflateStateCheck(St))return Z_STREAM_ERROR$1;const e=St.state;return e.wsize=0,e.whave=0,e.wnext=0,inflateResetKeep(St)},inflateReset2=(St,e)=>{let en;if(inflateStateCheck(St))return Z_STREAM_ERROR$1;const tn=St.state;return e<0?(en=0,e=-e):(en=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Z_STREAM_ERROR$1:(tn.window!==null&&tn.wbits!==e&&(tn.window=null),tn.wrap=en,tn.wbits=e,inflateReset(St))},inflateInit2=(St,e)=>{if(!St)return Z_STREAM_ERROR$1;const en=new InflateState;St.state=en,en.strm=St,en.window=null,en.mode=HEAD;const tn=inflateReset2(St,e);return tn!==Z_OK$1&&(St.state=null),tn},inflateInit=St=>inflateInit2(St,DEF_WBITS);let virgin=!0,lenfix,distfix;const fixedtables=St=>{if(virgin){lenfix=new Int32Array(512),distfix=new Int32Array(32);let e=0;for(;e<144;)St.lens[e++]=8;for(;e<256;)St.lens[e++]=9;for(;e<280;)St.lens[e++]=7;for(;e<288;)St.lens[e++]=8;for(inftrees(LENS,St.lens,0,288,lenfix,0,St.work,{bits:9}),e=0;e<32;)St.lens[e++]=5;inftrees(DISTS,St.lens,0,32,distfix,0,St.work,{bits:5}),virgin=!1}St.lencode=lenfix,St.lenbits=9,St.distcode=distfix,St.distbits=5},updatewindow=(St,e,en,tn)=>{let nn;const sn=St.state;return sn.window===null&&(sn.wsize=1<<sn.wbits,sn.wnext=0,sn.whave=0,sn.window=new Uint8Array(sn.wsize)),tn>=sn.wsize?(sn.window.set(e.subarray(en-sn.wsize,en),0),sn.wnext=0,sn.whave=sn.wsize):(nn=sn.wsize-sn.wnext,nn>tn&&(nn=tn),sn.window.set(e.subarray(en-tn,en-tn+nn),sn.wnext),tn-=nn,tn?(sn.window.set(e.subarray(en-tn,en),0),sn.wnext=tn,sn.whave=sn.wsize):(sn.wnext+=nn,sn.wnext===sn.wsize&&(sn.wnext=0),sn.whave<sn.wsize&&(sn.whave+=nn))),0},inflate$2=(St,e)=>{let en,tn,nn,sn,on,un,dn,fn,hn,an,rn,cn,pn,mn,xn=0,gn,yn,bn,wn,_n,Tn,An,Pn;const Sn=new Uint8Array(4);let Cn,Nn;const Mn=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(inflateStateCheck(St)||!St.output||!St.input&&St.avail_in!==0)return Z_STREAM_ERROR$1;en=St.state,en.mode===TYPE&&(en.mode=TYPEDO),on=St.next_out,nn=St.output,dn=St.avail_out,sn=St.next_in,tn=St.input,un=St.avail_in,fn=en.hold,hn=en.bits,an=un,rn=dn,Pn=Z_OK$1;e:for(;;)switch(en.mode){case HEAD:if(en.wrap===0){en.mode=TYPEDO;break}for(;hn<16;){if(un===0)break e;un--,fn+=tn[sn++]<<hn,hn+=8}if(en.wrap&2&&fn===35615){en.wbits===0&&(en.wbits=15),en.check=0,Sn[0]=fn&255,Sn[1]=fn>>>8&255,en.check=crc32_1(en.check,Sn,2,0),fn=0,hn=0,en.mode=FLAGS;break}if(en.head&&(en.head.done=!1),!(en.wrap&1)||(((fn&255)<<8)+(fn>>8))%31){St.msg="incorrect header check",en.mode=BAD;break}if((fn&15)!==Z_DEFLATED){St.msg="unknown compression method",en.mode=BAD;break}if(fn>>>=4,hn-=4,An=(fn&15)+8,en.wbits===0&&(en.wbits=An),An>15||An>en.wbits){St.msg="invalid window size",en.mode=BAD;break}en.dmax=1<<en.wbits,en.flags=0,St.adler=en.check=1,en.mode=fn&512?DICTID:TYPE,fn=0,hn=0;break;case FLAGS:for(;hn<16;){if(un===0)break e;un--,fn+=tn[sn++]<<hn,hn+=8}if(en.flags=fn,(en.flags&255)!==Z_DEFLATED){St.msg="unknown compression method",en.mode=BAD;break}if(en.flags&57344){St.msg="unknown header flags set",en.mode=BAD;break}en.head&&(en.head.text=fn>>8&1),en.flags&512&&en.wrap&4&&(Sn[0]=fn&255,Sn[1]=fn>>>8&255,en.check=crc32_1(en.check,Sn,2,0)),fn=0,hn=0,en.mode=TIME;case TIME:for(;hn<32;){if(un===0)break e;un--,fn+=tn[sn++]<<hn,hn+=8}en.head&&(en.head.time=fn),en.flags&512&&en.wrap&4&&(Sn[0]=fn&255,Sn[1]=fn>>>8&255,Sn[2]=fn>>>16&255,Sn[3]=fn>>>24&255,en.check=crc32_1(en.check,Sn,4,0)),fn=0,hn=0,en.mode=OS;case OS:for(;hn<16;){if(un===0)break e;un--,fn+=tn[sn++]<<hn,hn+=8}en.head&&(en.head.xflags=fn&255,en.head.os=fn>>8),en.flags&512&&en.wrap&4&&(Sn[0]=fn&255,Sn[1]=fn>>>8&255,en.check=crc32_1(en.check,Sn,2,0)),fn=0,hn=0,en.mode=EXLEN;case EXLEN:if(en.flags&1024){for(;hn<16;){if(un===0)break e;un--,fn+=tn[sn++]<<hn,hn+=8}en.length=fn,en.head&&(en.head.extra_len=fn),en.flags&512&&en.wrap&4&&(Sn[0]=fn&255,Sn[1]=fn>>>8&255,en.check=crc32_1(en.check,Sn,2,0)),fn=0,hn=0}else en.head&&(en.head.extra=null);en.mode=EXTRA;case EXTRA:if(en.flags&1024&&(cn=en.length,cn>un&&(cn=un),cn&&(en.head&&(An=en.head.extra_len-en.length,en.head.extra||(en.head.extra=new Uint8Array(en.head.extra_len)),en.head.extra.set(tn.subarray(sn,sn+cn),An)),en.flags&512&&en.wrap&4&&(en.check=crc32_1(en.check,tn,cn,sn)),un-=cn,sn+=cn,en.length-=cn),en.length))break e;en.length=0,en.mode=NAME;case NAME:if(en.flags&2048){if(un===0)break e;cn=0;do An=tn[sn+cn++],en.head&&An&&en.length<65536&&(en.head.name+=String.fromCharCode(An));while(An&&cn<un);if(en.flags&512&&en.wrap&4&&(en.check=crc32_1(en.check,tn,cn,sn)),un-=cn,sn+=cn,An)break e}else en.head&&(en.head.name=null);en.length=0,en.mode=COMMENT;case COMMENT:if(en.flags&4096){if(un===0)break e;cn=0;do An=tn[sn+cn++],en.head&&An&&en.length<65536&&(en.head.comment+=String.fromCharCode(An));while(An&&cn<un);if(en.flags&512&&en.wrap&4&&(en.check=crc32_1(en.check,tn,cn,sn)),un-=cn,sn+=cn,An)break e}else en.head&&(en.head.comment=null);en.mode=HCRC;case HCRC:if(en.flags&512){for(;hn<16;){if(un===0)break e;un--,fn+=tn[sn++]<<hn,hn+=8}if(en.wrap&4&&fn!==(en.check&65535)){St.msg="header crc mismatch",en.mode=BAD;break}fn=0,hn=0}en.head&&(en.head.hcrc=en.flags>>9&1,en.head.done=!0),St.adler=en.check=0,en.mode=TYPE;break;case DICTID:for(;hn<32;){if(un===0)break e;un--,fn+=tn[sn++]<<hn,hn+=8}St.adler=en.check=zswap32(fn),fn=0,hn=0,en.mode=DICT;case DICT:if(en.havedict===0)return St.next_out=on,St.avail_out=dn,St.next_in=sn,St.avail_in=un,en.hold=fn,en.bits=hn,Z_NEED_DICT$1;St.adler=en.check=1,en.mode=TYPE;case TYPE:if(e===Z_BLOCK||e===Z_TREES)break e;case TYPEDO:if(en.last){fn>>>=hn&7,hn-=hn&7,en.mode=CHECK;break}for(;hn<3;){if(un===0)break e;un--,fn+=tn[sn++]<<hn,hn+=8}switch(en.last=fn&1,fn>>>=1,hn-=1,fn&3){case 0:en.mode=STORED;break;case 1:if(fixedtables(en),en.mode=LEN_,e===Z_TREES){fn>>>=2,hn-=2;break e}break;case 2:en.mode=TABLE;break;case 3:St.msg="invalid block type",en.mode=BAD}fn>>>=2,hn-=2;break;case STORED:for(fn>>>=hn&7,hn-=hn&7;hn<32;){if(un===0)break e;un--,fn+=tn[sn++]<<hn,hn+=8}if((fn&65535)!==(fn>>>16^65535)){St.msg="invalid stored block lengths",en.mode=BAD;break}if(en.length=fn&65535,fn=0,hn=0,en.mode=COPY_,e===Z_TREES)break e;case COPY_:en.mode=COPY;case COPY:if(cn=en.length,cn){if(cn>un&&(cn=un),cn>dn&&(cn=dn),cn===0)break e;nn.set(tn.subarray(sn,sn+cn),on),un-=cn,sn+=cn,dn-=cn,on+=cn,en.length-=cn;break}en.mode=TYPE;break;case TABLE:for(;hn<14;){if(un===0)break e;un--,fn+=tn[sn++]<<hn,hn+=8}if(en.nlen=(fn&31)+257,fn>>>=5,hn-=5,en.ndist=(fn&31)+1,fn>>>=5,hn-=5,en.ncode=(fn&15)+4,fn>>>=4,hn-=4,en.nlen>286||en.ndist>30){St.msg="too many length or distance symbols",en.mode=BAD;break}en.have=0,en.mode=LENLENS;case LENLENS:for(;en.have<en.ncode;){for(;hn<3;){if(un===0)break e;un--,fn+=tn[sn++]<<hn,hn+=8}en.lens[Mn[en.have++]]=fn&7,fn>>>=3,hn-=3}for(;en.have<19;)en.lens[Mn[en.have++]]=0;if(en.lencode=en.lendyn,en.lenbits=7,Cn={bits:en.lenbits},Pn=inftrees(CODES,en.lens,0,19,en.lencode,0,en.work,Cn),en.lenbits=Cn.bits,Pn){St.msg="invalid code lengths set",en.mode=BAD;break}en.have=0,en.mode=CODELENS;case CODELENS:for(;en.have<en.nlen+en.ndist;){for(;xn=en.lencode[fn&(1<<en.lenbits)-1],gn=xn>>>24,yn=xn>>>16&255,bn=xn&65535,!(gn<=hn);){if(un===0)break e;un--,fn+=tn[sn++]<<hn,hn+=8}if(bn<16)fn>>>=gn,hn-=gn,en.lens[en.have++]=bn;else{if(bn===16){for(Nn=gn+2;hn<Nn;){if(un===0)break e;un--,fn+=tn[sn++]<<hn,hn+=8}if(fn>>>=gn,hn-=gn,en.have===0){St.msg="invalid bit length repeat",en.mode=BAD;break}An=en.lens[en.have-1],cn=3+(fn&3),fn>>>=2,hn-=2}else if(bn===17){for(Nn=gn+3;hn<Nn;){if(un===0)break e;un--,fn+=tn[sn++]<<hn,hn+=8}fn>>>=gn,hn-=gn,An=0,cn=3+(fn&7),fn>>>=3,hn-=3}else{for(Nn=gn+7;hn<Nn;){if(un===0)break e;un--,fn+=tn[sn++]<<hn,hn+=8}fn>>>=gn,hn-=gn,An=0,cn=11+(fn&127),fn>>>=7,hn-=7}if(en.have+cn>en.nlen+en.ndist){St.msg="invalid bit length repeat",en.mode=BAD;break}for(;cn--;)en.lens[en.have++]=An}}if(en.mode===BAD)break;if(en.lens[256]===0){St.msg="invalid code -- missing end-of-block",en.mode=BAD;break}if(en.lenbits=9,Cn={bits:en.lenbits},Pn=inftrees(LENS,en.lens,0,en.nlen,en.lencode,0,en.work,Cn),en.lenbits=Cn.bits,Pn){St.msg="invalid literal/lengths set",en.mode=BAD;break}if(en.distbits=6,en.distcode=en.distdyn,Cn={bits:en.distbits},Pn=inftrees(DISTS,en.lens,en.nlen,en.ndist,en.distcode,0,en.work,Cn),en.distbits=Cn.bits,Pn){St.msg="invalid distances set",en.mode=BAD;break}if(en.mode=LEN_,e===Z_TREES)break e;case LEN_:en.mode=LEN;case LEN:if(un>=6&&dn>=258){St.next_out=on,St.avail_out=dn,St.next_in=sn,St.avail_in=un,en.hold=fn,en.bits=hn,inffast(St,rn),on=St.next_out,nn=St.output,dn=St.avail_out,sn=St.next_in,tn=St.input,un=St.avail_in,fn=en.hold,hn=en.bits,en.mode===TYPE&&(en.back=-1);break}for(en.back=0;xn=en.lencode[fn&(1<<en.lenbits)-1],gn=xn>>>24,yn=xn>>>16&255,bn=xn&65535,!(gn<=hn);){if(un===0)break e;un--,fn+=tn[sn++]<<hn,hn+=8}if(yn&&!(yn&240)){for(wn=gn,_n=yn,Tn=bn;xn=en.lencode[Tn+((fn&(1<<wn+_n)-1)>>wn)],gn=xn>>>24,yn=xn>>>16&255,bn=xn&65535,!(wn+gn<=hn);){if(un===0)break e;un--,fn+=tn[sn++]<<hn,hn+=8}fn>>>=wn,hn-=wn,en.back+=wn}if(fn>>>=gn,hn-=gn,en.back+=gn,en.length=bn,yn===0){en.mode=LIT;break}if(yn&32){en.back=-1,en.mode=TYPE;break}if(yn&64){St.msg="invalid literal/length code",en.mode=BAD;break}en.extra=yn&15,en.mode=LENEXT;case LENEXT:if(en.extra){for(Nn=en.extra;hn<Nn;){if(un===0)break e;un--,fn+=tn[sn++]<<hn,hn+=8}en.length+=fn&(1<<en.extra)-1,fn>>>=en.extra,hn-=en.extra,en.back+=en.extra}en.was=en.length,en.mode=DIST;case DIST:for(;xn=en.distcode[fn&(1<<en.distbits)-1],gn=xn>>>24,yn=xn>>>16&255,bn=xn&65535,!(gn<=hn);){if(un===0)break e;un--,fn+=tn[sn++]<<hn,hn+=8}if(!(yn&240)){for(wn=gn,_n=yn,Tn=bn;xn=en.distcode[Tn+((fn&(1<<wn+_n)-1)>>wn)],gn=xn>>>24,yn=xn>>>16&255,bn=xn&65535,!(wn+gn<=hn);){if(un===0)break e;un--,fn+=tn[sn++]<<hn,hn+=8}fn>>>=wn,hn-=wn,en.back+=wn}if(fn>>>=gn,hn-=gn,en.back+=gn,yn&64){St.msg="invalid distance code",en.mode=BAD;break}en.offset=bn,en.extra=yn&15,en.mode=DISTEXT;case DISTEXT:if(en.extra){for(Nn=en.extra;hn<Nn;){if(un===0)break e;un--,fn+=tn[sn++]<<hn,hn+=8}en.offset+=fn&(1<<en.extra)-1,fn>>>=en.extra,hn-=en.extra,en.back+=en.extra}if(en.offset>en.dmax){St.msg="invalid distance too far back",en.mode=BAD;break}en.mode=MATCH;case MATCH:if(dn===0)break e;if(cn=rn-dn,en.offset>cn){if(cn=en.offset-cn,cn>en.whave&&en.sane){St.msg="invalid distance too far back",en.mode=BAD;break}cn>en.wnext?(cn-=en.wnext,pn=en.wsize-cn):pn=en.wnext-cn,cn>en.length&&(cn=en.length),mn=en.window}else mn=nn,pn=on-en.offset,cn=en.length;cn>dn&&(cn=dn),dn-=cn,en.length-=cn;do nn[on++]=mn[pn++];while(--cn);en.length===0&&(en.mode=LEN);break;case LIT:if(dn===0)break e;nn[on++]=en.length,dn--,en.mode=LEN;break;case CHECK:if(en.wrap){for(;hn<32;){if(un===0)break e;un--,fn|=tn[sn++]<<hn,hn+=8}if(rn-=dn,St.total_out+=rn,en.total+=rn,en.wrap&4&&rn&&(St.adler=en.check=en.flags?crc32_1(en.check,nn,rn,on-rn):adler32_1(en.check,nn,rn,on-rn)),rn=dn,en.wrap&4&&(en.flags?fn:zswap32(fn))!==en.check){St.msg="incorrect data check",en.mode=BAD;break}fn=0,hn=0}en.mode=LENGTH;case LENGTH:if(en.wrap&&en.flags){for(;hn<32;){if(un===0)break e;un--,fn+=tn[sn++]<<hn,hn+=8}if(en.wrap&4&&fn!==(en.total&4294967295)){St.msg="incorrect length check",en.mode=BAD;break}fn=0,hn=0}en.mode=DONE;case DONE:Pn=Z_STREAM_END$1;break e;case BAD:Pn=Z_DATA_ERROR$1;break e;case MEM:return Z_MEM_ERROR$1;case SYNC:default:return Z_STREAM_ERROR$1}return St.next_out=on,St.avail_out=dn,St.next_in=sn,St.avail_in=un,en.hold=fn,en.bits=hn,(en.wsize||rn!==St.avail_out&&en.mode<BAD&&(en.mode<CHECK||e!==Z_FINISH$1))&&updatewindow(St,St.output,St.next_out,rn-St.avail_out),an-=St.avail_in,rn-=St.avail_out,St.total_in+=an,St.total_out+=rn,en.total+=rn,en.wrap&4&&rn&&(St.adler=en.check=en.flags?crc32_1(en.check,nn,rn,St.next_out-rn):adler32_1(en.check,nn,rn,St.next_out-rn)),St.data_type=en.bits+(en.last?64:0)+(en.mode===TYPE?128:0)+(en.mode===LEN_||en.mode===COPY_?256:0),(an===0&&rn===0||e===Z_FINISH$1)&&Pn===Z_OK$1&&(Pn=Z_BUF_ERROR),Pn},inflateEnd=St=>{if(inflateStateCheck(St))return Z_STREAM_ERROR$1;let e=St.state;return e.window&&(e.window=null),St.state=null,Z_OK$1},inflateGetHeader=(St,e)=>{if(inflateStateCheck(St))return Z_STREAM_ERROR$1;const en=St.state;return en.wrap&2?(en.head=e,e.done=!1,Z_OK$1):Z_STREAM_ERROR$1},inflateSetDictionary=(St,e)=>{const en=e.length;let tn,nn,sn;return inflateStateCheck(St)||(tn=St.state,tn.wrap!==0&&tn.mode!==DICT)?Z_STREAM_ERROR$1:tn.mode===DICT&&(nn=1,nn=adler32_1(nn,e,en,0),nn!==tn.check)?Z_DATA_ERROR$1:(sn=updatewindow(St,e,en,en),sn?(tn.mode=MEM,Z_MEM_ERROR$1):(tn.havedict=1,Z_OK$1))};var inflateReset_1=inflateReset,inflateReset2_1=inflateReset2,inflateResetKeep_1=inflateResetKeep,inflateInit_1=inflateInit,inflateInit2_1=inflateInit2,inflate_2$1=inflate$2,inflateEnd_1=inflateEnd,inflateGetHeader_1=inflateGetHeader,inflateSetDictionary_1=inflateSetDictionary,inflateInfo="pako inflate (from Nodeca project)",inflate_1$2={inflateReset:inflateReset_1,inflateReset2:inflateReset2_1,inflateResetKeep:inflateResetKeep_1,inflateInit:inflateInit_1,inflateInit2:inflateInit2_1,inflate:inflate_2$1,inflateEnd:inflateEnd_1,inflateGetHeader:inflateGetHeader_1,inflateSetDictionary:inflateSetDictionary_1,inflateInfo};function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gzheader=GZheader;const toString=Object.prototype.toString,{Z_NO_FLUSH,Z_FINISH,Z_OK,Z_STREAM_END,Z_NEED_DICT,Z_STREAM_ERROR,Z_DATA_ERROR,Z_MEM_ERROR}=constants$2;function Inflate$1(St){this.options=common.assign({chunkSize:1024*64,windowBits:15,to:""},St||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(St&&St.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let en=inflate_1$2.inflateInit2(this.strm,e.windowBits);if(en!==Z_OK)throw new Error(messages[en]);if(this.header=new gzheader,inflate_1$2.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=strings.string2buf(e.dictionary):toString.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(en=inflate_1$2.inflateSetDictionary(this.strm,e.dictionary),en!==Z_OK)))throw new Error(messages[en])}Inflate$1.prototype.push=function(St,e){const en=this.strm,tn=this.options.chunkSize,nn=this.options.dictionary;let sn,on,un;if(this.ended)return!1;for(e===~~e?on=e:on=e===!0?Z_FINISH:Z_NO_FLUSH,toString.call(St)==="[object ArrayBuffer]"?en.input=new Uint8Array(St):en.input=St,en.next_in=0,en.avail_in=en.input.length;;){for(en.avail_out===0&&(en.output=new Uint8Array(tn),en.next_out=0,en.avail_out=tn),sn=inflate_1$2.inflate(en,on),sn===Z_NEED_DICT&&nn&&(sn=inflate_1$2.inflateSetDictionary(en,nn),sn===Z_OK?sn=inflate_1$2.inflate(en,on):sn===Z_DATA_ERROR&&(sn=Z_NEED_DICT));en.avail_in>0&&sn===Z_STREAM_END&&en.state.wrap>0&&St[en.next_in]!==0;)inflate_1$2.inflateReset(en),sn=inflate_1$2.inflate(en,on);switch(sn){case Z_STREAM_ERROR:case Z_DATA_ERROR:case Z_NEED_DICT:case Z_MEM_ERROR:return this.onEnd(sn),this.ended=!0,!1}if(un=en.avail_out,en.next_out&&(en.avail_out===0||sn===Z_STREAM_END))if(this.options.to==="string"){let dn=strings.utf8border(en.output,en.next_out),fn=en.next_out-dn,hn=strings.buf2string(en.output,dn);en.next_out=fn,en.avail_out=tn-fn,fn&&en.output.set(en.output.subarray(dn,dn+fn),0),this.onData(hn)}else this.onData(en.output.length===en.next_out?en.output:en.output.subarray(0,en.next_out));if(!(sn===Z_OK&&un===0)){if(sn===Z_STREAM_END)return sn=inflate_1$2.inflateEnd(this.strm),this.onEnd(sn),this.ended=!0,!0;if(en.avail_in===0)break}}return!0};Inflate$1.prototype.onData=function(St){this.chunks.push(St)};Inflate$1.prototype.onEnd=function(St){St===Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=St,this.msg=this.strm.msg};function inflate$1(St,e){const en=new Inflate$1(e);if(en.push(St),en.err)throw en.msg||messages[en.err];return en.result}var Inflate_1$1=Inflate$1,inflate_2=inflate$1,inflate_1$1={Inflate:Inflate_1$1,inflate:inflate_2};const{Inflate,inflate}=inflate_1$1;var Inflate_1=Inflate,inflate_1=inflate;const crcTable=[];for(let St=0;St<256;St++){let e=St;for(let en=0;en<8;en++)e&1?e=3988292384^e>>>1:e=e>>>1;crcTable[St]=e}const initialCrc=4294967295;function updateCrc(St,e,en){let tn=St;for(let nn=0;nn<en;nn++)tn=crcTable[(tn^e[nn])&255]^tn>>>8;return tn}function crc(St,e){return(updateCrc(initialCrc,St,e)^initialCrc)>>>0}function checkCrc(St,e,en){const tn=St.readUint32(),nn=crc(new Uint8Array(St.buffer,St.byteOffset+St.offset-e-4,e),e);if(nn!==tn)throw new Error(`CRC mismatch for chunk ${en}. Expected ${tn}, found ${nn}`)}function unfilterNone(St,e,en){for(let tn=0;tn<en;tn++)e[tn]=St[tn]}function unfilterSub(St,e,en,tn){let nn=0;for(;nn<tn;nn++)e[nn]=St[nn];for(;nn<en;nn++)e[nn]=St[nn]+e[nn-tn]&255}function unfilterUp(St,e,en,tn){let nn=0;if(en.length===0)for(;nn<tn;nn++)e[nn]=St[nn];else for(;nn<tn;nn++)e[nn]=St[nn]+en[nn]&255}function unfilterAverage(St,e,en,tn,nn){let sn=0;if(en.length===0){for(;sn<nn;sn++)e[sn]=St[sn];for(;sn<tn;sn++)e[sn]=St[sn]+(e[sn-nn]>>1)&255}else{for(;sn<nn;sn++)e[sn]=St[sn]+(en[sn]>>1)&255;for(;sn<tn;sn++)e[sn]=St[sn]+(e[sn-nn]+en[sn]>>1)&255}}function unfilterPaeth(St,e,en,tn,nn){let sn=0;if(en.length===0){for(;sn<nn;sn++)e[sn]=St[sn];for(;sn<tn;sn++)e[sn]=St[sn]+e[sn-nn]&255}else{for(;sn<nn;sn++)e[sn]=St[sn]+en[sn]&255;for(;sn<tn;sn++)e[sn]=St[sn]+paethPredictor(e[sn-nn],en[sn],en[sn-nn])&255}}function paethPredictor(St,e,en){const tn=St+e-en,nn=Math.abs(tn-St),sn=Math.abs(tn-e),on=Math.abs(tn-en);return nn<=sn&&nn<=on?St:sn<=on?e:en}function applyUnfilter(St,e,en,tn,nn,sn){switch(St){case 0:unfilterNone(e,en,nn);break;case 1:unfilterSub(e,en,nn,sn);break;case 2:unfilterUp(e,en,tn,nn);break;case 3:unfilterAverage(e,en,tn,nn,sn);break;case 4:unfilterPaeth(e,en,tn,nn,sn);break;default:throw new Error(`Unsupported filter: ${St}`)}}const uint16$1=new Uint16Array([255]),uint8$1=new Uint8Array(uint16$1.buffer),osIsLittleEndian$1=uint8$1[0]===255;function decodeInterlaceAdam7(St){const{data:e,width:en,height:tn,channels:nn,depth:sn}=St,on=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],un=Math.ceil(sn/8)*nn,dn=new Uint8Array(tn*en*un);let fn=0;for(let hn=0;hn<7;hn++){const an=on[hn],rn=Math.ceil((en-an.x)/an.xStep),cn=Math.ceil((tn-an.y)/an.yStep);if(rn<=0||cn<=0)continue;const pn=rn*un,mn=new Uint8Array(pn);for(let xn=0;xn<cn;xn++){const gn=e[fn++],yn=e.subarray(fn,fn+pn);fn+=pn;const bn=new Uint8Array(pn);applyUnfilter(gn,yn,bn,mn,pn,un),mn.set(bn);for(let wn=0;wn<rn;wn++){const _n=an.x+wn*an.xStep,Tn=an.y+xn*an.yStep;if(!(_n>=en||Tn>=tn))for(let An=0;An<un;An++)dn[(Tn*en+_n)*un+An]=bn[wn*un+An]}}}if(sn===16){const hn=new Uint16Array(dn.buffer);if(osIsLittleEndian$1)for(let an=0;an<hn.length;an++)hn[an]=swap16$1(hn[an]);return hn}else return dn}function swap16$1(St){return(St&255)<<8|St>>8&255}const uint16=new Uint16Array([255]),uint8=new Uint8Array(uint16.buffer),osIsLittleEndian=uint8[0]===255,empty=new Uint8Array(0);function decodeInterlaceNull(St){const{data:e,width:en,height:tn,channels:nn,depth:sn}=St,on=Math.ceil(sn/8)*nn,un=Math.ceil(sn/8*nn*en),dn=new Uint8Array(tn*un);let fn=empty,hn=0,an,rn;for(let cn=0;cn<tn;cn++){switch(an=e.subarray(hn+1,hn+1+un),rn=dn.subarray(cn*un,(cn+1)*un),e[hn]){case 0:unfilterNone(an,rn,un);break;case 1:unfilterSub(an,rn,un,on);break;case 2:unfilterUp(an,rn,fn,un);break;case 3:unfilterAverage(an,rn,fn,un,on);break;case 4:unfilterPaeth(an,rn,fn,un,on);break;default:throw new Error(`Unsupported filter: ${e[hn]}`)}fn=rn,hn+=un+1}if(sn===16){const cn=new Uint16Array(dn.buffer);if(osIsLittleEndian)for(let pn=0;pn<cn.length;pn++)cn[pn]=swap16(cn[pn]);return cn}else return dn}function swap16(St){return(St&255)<<8|St>>8&255}const pngSignature=Uint8Array.of(137,80,78,71,13,10,26,10);function checkSignature(St){if(!hasPngSignature(St.readBytes(pngSignature.length)))throw new Error("wrong PNG signature")}function hasPngSignature(St){if(St.length<pngSignature.length)return!1;for(let e=0;e<pngSignature.length;e++)if(St[e]!==pngSignature[e])return!1;return!0}const textChunkName="tEXt",NULL=0,latin1Decoder=new TextDecoder("latin1");function validateKeyword(St){if(validateLatin1(St),St.length===0||St.length>79)throw new Error("keyword length must be between 1 and 79")}const latin1Regex=/^[\u0000-\u00FF]*$/;function validateLatin1(St){if(!latin1Regex.test(St))throw new Error("invalid latin1 text")}function decodetEXt(St,e,en){const tn=readKeyword(e);St[tn]=readLatin1(e,en-tn.length-1)}function readKeyword(St){for(St.mark();St.readByte()!==NULL;);const e=St.offset;St.reset();const en=latin1Decoder.decode(St.readBytes(e-St.offset-1));return St.skip(1),validateKeyword(en),en}function readLatin1(St,e){return latin1Decoder.decode(St.readBytes(e))}const ColorType={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},CompressionMethod={UNKNOWN:-1,DEFLATE:0},FilterMethod={UNKNOWN:-1,ADAPTIVE:0},InterlaceMethod={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},DisposeOpType={NONE:0,BACKGROUND:1,PREVIOUS:2},BlendOpType={SOURCE:0,OVER:1};class PngDecoder extends IOBuffer{constructor(en,tn={}){super(en);Mr(this,"_checkCrc");Mr(this,"_inflator");Mr(this,"_png");Mr(this,"_apng");Mr(this,"_end");Mr(this,"_hasPalette");Mr(this,"_palette");Mr(this,"_hasTransparency");Mr(this,"_transparency");Mr(this,"_compressionMethod");Mr(this,"_filterMethod");Mr(this,"_interlaceMethod");Mr(this,"_colorType");Mr(this,"_isAnimated");Mr(this,"_numberOfFrames");Mr(this,"_numberOfPlays");Mr(this,"_frames");Mr(this,"_writingDataChunks");const{checkCrc:nn=!1}=tn;this._checkCrc=nn,this._inflator=new Inflate_1,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=CompressionMethod.UNKNOWN,this._filterMethod=FilterMethod.UNKNOWN,this._interlaceMethod=InterlaceMethod.UNKNOWN,this._colorType=ColorType.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(checkSignature(this);!this._end;){const en=this.readUint32(),tn=this.readChars(4);this.decodeChunk(en,tn)}return this.decodeImage(),this._png}decodeApng(){for(checkSignature(this);!this._end;){const en=this.readUint32(),tn=this.readChars(4);this.decodeApngChunk(en,tn)}return this.decodeApngImage(),this._apng}decodeChunk(en,tn){const nn=this.offset;switch(tn){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(en);break;case"IDAT":this.decodeIDAT(en);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(en);break;case"iCCP":this.decodeiCCP(en);break;case textChunkName:decodetEXt(this._png.text,this,en);break;case"pHYs":this.decodepHYs();break;default:this.skip(en);break}if(this.offset-nn!==en)throw new Error(`Length mismatch while decoding chunk ${tn}`);this._checkCrc?checkCrc(this,en+4,tn):this.skip(4)}decodeApngChunk(en,tn){const nn=this.offset;switch(tn!=="fdAT"&&tn!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),tn){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(en);break;default:this.decodeChunk(en,tn),this.offset=nn+en;break}if(this.offset-nn!==en)throw new Error(`Length mismatch while decoding chunk ${tn}`);this._checkCrc?checkCrc(this,en+4,tn):this.skip(4)}decodeIHDR(){const en=this._png;en.width=this.readUint32(),en.height=this.readUint32(),en.depth=checkBitDepth(this.readUint8());const tn=this.readUint8();this._colorType=tn;let nn;switch(tn){case ColorType.GREYSCALE:nn=1;break;case ColorType.TRUECOLOUR:nn=3;break;case ColorType.INDEXED_COLOUR:nn=1;break;case ColorType.GREYSCALE_ALPHA:nn=2;break;case ColorType.TRUECOLOUR_ALPHA:nn=4;break;case ColorType.UNKNOWN:default:throw new Error(`Unknown color type: ${tn}`)}if(this._png.channels=nn,this._compressionMethod=this.readUint8(),this._compressionMethod!==CompressionMethod.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const en={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(en)}decodePLTE(en){if(en%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${en}`);const tn=en/3;this._hasPalette=!0;const nn=[];this._palette=nn;for(let sn=0;sn<tn;sn++)nn.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(en){this._writingDataChunks=!0;const tn=en,nn=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,nn,tn)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(en)}decodeFDAT(en){this._writingDataChunks=!0;let tn=en,nn=this.offset+this.byteOffset;if(nn+=4,tn-=4,this._inflator.push(new Uint8Array(this.buffer,nn,tn)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(en)}decodetRNS(en){switch(this._colorType){case ColorType.GREYSCALE:case ColorType.TRUECOLOUR:{if(en%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${en}`);if(en/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${en/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(en/2);for(let tn=0;tn<en/2;tn++)this._transparency[tn]=this.readUint16();break}case ColorType.INDEXED_COLOUR:{if(en>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${en} vs ${this._palette.length})`);let tn=0;for(;tn<en;tn++){const nn=this.readByte();this._palette[tn].push(nn)}for(;tn<this._palette.length;tn++)this._palette[tn].push(255);break}case ColorType.UNKNOWN:case ColorType.GREYSCALE_ALPHA:case ColorType.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(en){const tn=readKeyword(this),nn=this.readUint8();if(nn!==CompressionMethod.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${nn}`);const sn=this.readBytes(en-tn.length-2);this._png.iccEmbeddedProfile={name:tn,profile:inflate_1(sn)}}decodepHYs(){const en=this.readUint32(),tn=this.readUint32(),nn=this.readByte();this._png.resolution={x:en,y:tn,unit:nn}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let en=0;en<this._numberOfFrames;en++){const tn={sequenceNumber:this._frames[en].sequenceNumber,delayNumber:this._frames[en].delayNumber,delayDenominator:this._frames[en].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},nn=this._frames.at(en);if(nn){if(nn.data=decodeInterlaceNull({data:nn.data,width:nn.width,height:nn.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),en===0||nn.xOffset===0&&nn.yOffset===0&&nn.width===this._png.width&&nn.height===this._png.height)tn.data=nn.data;else{const sn=this._apng.frames.at(en-1);this.disposeFrame(nn,sn,tn),this.addFrameDataToCanvas(tn,nn)}this._apng.frames.push(tn)}}return this._apng}disposeFrame(en,tn,nn){switch(en.disposeOp){case DisposeOpType.NONE:break;case DisposeOpType.BACKGROUND:for(let sn=0;sn<this._png.height;sn++)for(let on=0;on<this._png.width;on++){const un=(sn*en.width+on)*this._png.channels;for(let dn=0;dn<this._png.channels;dn++)nn.data[un+dn]=0}break;case DisposeOpType.PREVIOUS:nn.data.set(tn.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(en,tn){const nn=1<<this._png.depth,sn=(on,un)=>{const dn=((on+tn.yOffset)*this._png.width+tn.xOffset+un)*this._png.channels,fn=(on*tn.width+un)*this._png.channels;return{index:dn,frameIndex:fn}};switch(tn.blendOp){case BlendOpType.SOURCE:for(let on=0;on<tn.height;on++)for(let un=0;un<tn.width;un++){const{index:dn,frameIndex:fn}=sn(on,un);for(let hn=0;hn<this._png.channels;hn++)en.data[dn+hn]=tn.data[fn+hn]}break;case BlendOpType.OVER:for(let on=0;on<tn.height;on++)for(let un=0;un<tn.width;un++){const{index:dn,frameIndex:fn}=sn(on,un);for(let hn=0;hn<this._png.channels;hn++){const an=tn.data[fn+this._png.channels-1]/nn,rn=hn%(this._png.channels-1)===0?1:tn.data[fn+hn],cn=Math.floor(an*rn+(1-an)*en.data[dn+hn]);en.data[dn+hn]+=cn}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var tn;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const en=this._isAnimated?((tn=this._frames)==null?void 0:tn.at(0)).data:this._inflator.result;if(this._filterMethod!==FilterMethod.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===InterlaceMethod.NO_INTERLACE)this._png.data=decodeInterlaceNull({data:en,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===InterlaceMethod.ADAM7)this._png.data=decodeInterlaceAdam7({data:en,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const en=this._inflator.result,tn=this._frames.at(-1);tn?tn.data=en:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:DisposeOpType.NONE,blendOp:BlendOpType.SOURCE,data:en}),this._inflator=new Inflate_1,this._writingDataChunks=!1}}function checkBitDepth(St){if(St!==1&&St!==2&&St!==4&&St!==8&&St!==16)throw new Error(`invalid bit depth: ${St}`);return St}var ResolutionUnitSpecifier;(function(St){St[St.UNKNOWN=0]="UNKNOWN",St[St.METRE=1]="METRE"})(ResolutionUnitSpecifier||(ResolutionUnitSpecifier={}));function decodePng(St,e){return new PngDecoder(St,e).decode()}var i=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function a(){i.console&&typeof i.console.log=="function"&&i.console.log.apply(i.console,arguments)}var o={log:a,warn:function(St){i.console&&(typeof i.console.warn=="function"?i.console.warn.apply(i.console,arguments):a.call(null,arguments))},error:function(St){i.console&&(typeof i.console.error=="function"?i.console.error.apply(i.console,arguments):a(St))}};function s(St,e,en){var tn=new XMLHttpRequest;tn.open("GET",St),tn.responseType="blob",tn.onload=function(){l(tn.response,e,en)},tn.onerror=function(){o.error("could not download file")},tn.send()}function u(St){var e=new XMLHttpRequest;e.open("HEAD",St,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function c(St){try{St.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),St.dispatchEvent(e)}}var l=i.saveAs||((typeof window>"u"?"undefined":_typeof(window))!=="object"||window!==i?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(St,e,en){var tn=i.URL||i.webkitURL,nn=document.createElement("a");e=e||St.name||"download",nn.download=e,nn.rel="noopener",typeof St=="string"?(nn.href=St,nn.origin!==location.origin?u(nn.href)?s(St,e,en):c(nn,nn.target="_blank"):c(nn)):(nn.href=tn.createObjectURL(St),setTimeout(function(){tn.revokeObjectURL(nn.href)},4e4),setTimeout(function(){c(nn)},0))}:"msSaveOrOpenBlob"in navigator?function(St,e,en){if(e=e||St.name||"download",typeof St=="string")if(u(St))s(St,e,en);else{var tn=document.createElement("a");tn.href=St,tn.target="_blank",setTimeout(function(){c(tn)})}else navigator.msSaveOrOpenBlob(function(nn,sn){return sn===void 0?sn={autoBom:!1}:_typeof(sn)!=="object"&&(o.warn("Deprecated: Expected third argument to be a object"),sn={autoBom:!sn}),sn.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(nn.type)?new Blob(["\uFEFF",nn],{type:nn.type}):nn}(St,en),e)}:function(St,e,en,tn){if((tn=tn||open("","_blank"))&&(tn.document.title=tn.document.body.innerText="downloading..."),typeof St=="string")return s(St,e,en);var nn=St.type==="application/octet-stream",sn=/constructor/i.test(i.HTMLElement)||i.safari,on=/CriOS\/[\d]+/.test(navigator.userAgent);if((on||nn&&sn)&&(typeof FileReader>"u"?"undefined":_typeof(FileReader))==="object"){var un=new FileReader;un.onloadend=function(){var hn=un.result;hn=on?hn:hn.replace(/^data:[^;]*;/,"data:attachment/file;"),tn?tn.location.href=hn:location=hn,tn=null},un.readAsDataURL(St)}else{var dn=i.URL||i.webkitURL,fn=dn.createObjectURL(St);tn?tn.location=fn:location.href=fn,tn=null,setTimeout(function(){dn.revokeObjectURL(fn)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function h(St){var e;St=St||"",this.ok=!1,St.charAt(0)=="#"&&(St=St.substr(1,6)),St={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[St=(St=St.replace(/ /g,"")).toLowerCase()]||St;for(var en=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(un){return[parseInt(un[1]),parseInt(un[2]),parseInt(un[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(un){return[parseInt(un[1],16),parseInt(un[2],16),parseInt(un[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(un){return[parseInt(un[1]+un[1],16),parseInt(un[2]+un[2],16),parseInt(un[3]+un[3],16)]}}],tn=0;tn<en.length;tn++){var nn=en[tn].re,sn=en[tn].process,on=nn.exec(St);on&&(e=sn(on),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var un=this.r.toString(16),dn=this.g.toString(16),fn=this.b.toString(16);return un.length==1&&(un="0"+un),dn.length==1&&(dn="0"+dn),fn.length==1&&(fn="0"+fn),"#"+un+dn+fn}}var f=i.atob.bind(i),d=i.btoa.bind(i);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function p(St,e){var en=St[0],tn=St[1],nn=St[2],sn=St[3];en=m(en,tn,nn,sn,e[0],7,-680876936),sn=m(sn,en,tn,nn,e[1],12,-389564586),nn=m(nn,sn,en,tn,e[2],17,606105819),tn=m(tn,nn,sn,en,e[3],22,-1044525330),en=m(en,tn,nn,sn,e[4],7,-176418897),sn=m(sn,en,tn,nn,e[5],12,1200080426),nn=m(nn,sn,en,tn,e[6],17,-1473231341),tn=m(tn,nn,sn,en,e[7],22,-45705983),en=m(en,tn,nn,sn,e[8],7,1770035416),sn=m(sn,en,tn,nn,e[9],12,-1958414417),nn=m(nn,sn,en,tn,e[10],17,-42063),tn=m(tn,nn,sn,en,e[11],22,-1990404162),en=m(en,tn,nn,sn,e[12],7,1804603682),sn=m(sn,en,tn,nn,e[13],12,-40341101),nn=m(nn,sn,en,tn,e[14],17,-1502002290),en=v(en,tn=m(tn,nn,sn,en,e[15],22,1236535329),nn,sn,e[1],5,-165796510),sn=v(sn,en,tn,nn,e[6],9,-1069501632),nn=v(nn,sn,en,tn,e[11],14,643717713),tn=v(tn,nn,sn,en,e[0],20,-373897302),en=v(en,tn,nn,sn,e[5],5,-701558691),sn=v(sn,en,tn,nn,e[10],9,38016083),nn=v(nn,sn,en,tn,e[15],14,-660478335),tn=v(tn,nn,sn,en,e[4],20,-405537848),en=v(en,tn,nn,sn,e[9],5,568446438),sn=v(sn,en,tn,nn,e[14],9,-1019803690),nn=v(nn,sn,en,tn,e[3],14,-187363961),tn=v(tn,nn,sn,en,e[8],20,1163531501),en=v(en,tn,nn,sn,e[13],5,-1444681467),sn=v(sn,en,tn,nn,e[2],9,-51403784),nn=v(nn,sn,en,tn,e[7],14,1735328473),en=b(en,tn=v(tn,nn,sn,en,e[12],20,-1926607734),nn,sn,e[5],4,-378558),sn=b(sn,en,tn,nn,e[8],11,-2022574463),nn=b(nn,sn,en,tn,e[11],16,1839030562),tn=b(tn,nn,sn,en,e[14],23,-35309556),en=b(en,tn,nn,sn,e[1],4,-1530992060),sn=b(sn,en,tn,nn,e[4],11,1272893353),nn=b(nn,sn,en,tn,e[7],16,-155497632),tn=b(tn,nn,sn,en,e[10],23,-1094730640),en=b(en,tn,nn,sn,e[13],4,681279174),sn=b(sn,en,tn,nn,e[0],11,-358537222),nn=b(nn,sn,en,tn,e[3],16,-722521979),tn=b(tn,nn,sn,en,e[6],23,76029189),en=b(en,tn,nn,sn,e[9],4,-640364487),sn=b(sn,en,tn,nn,e[12],11,-421815835),nn=b(nn,sn,en,tn,e[15],16,530742520),en=y(en,tn=b(tn,nn,sn,en,e[2],23,-995338651),nn,sn,e[0],6,-198630844),sn=y(sn,en,tn,nn,e[7],10,1126891415),nn=y(nn,sn,en,tn,e[14],15,-1416354905),tn=y(tn,nn,sn,en,e[5],21,-57434055),en=y(en,tn,nn,sn,e[12],6,1700485571),sn=y(sn,en,tn,nn,e[3],10,-1894986606),nn=y(nn,sn,en,tn,e[10],15,-1051523),tn=y(tn,nn,sn,en,e[1],21,-2054922799),en=y(en,tn,nn,sn,e[8],6,1873313359),sn=y(sn,en,tn,nn,e[15],10,-30611744),nn=y(nn,sn,en,tn,e[6],15,-1560198380),tn=y(tn,nn,sn,en,e[13],21,1309151649),en=y(en,tn,nn,sn,e[4],6,-145523070),sn=y(sn,en,tn,nn,e[11],10,-1120210379),nn=y(nn,sn,en,tn,e[2],15,718787259),tn=y(tn,nn,sn,en,e[9],21,-343485551),St[0]=P(en,St[0]),St[1]=P(tn,St[1]),St[2]=P(nn,St[2]),St[3]=P(sn,St[3])}function g(St,e,en,tn,nn,sn){return e=P(P(e,St),P(tn,sn)),P(e<<nn|e>>>32-nn,en)}function m(St,e,en,tn,nn,sn,on){return g(e&en|~e&tn,St,e,nn,sn,on)}function v(St,e,en,tn,nn,sn,on){return g(e&tn|en&~tn,St,e,nn,sn,on)}function b(St,e,en,tn,nn,sn,on){return g(e^en^tn,St,e,nn,sn,on)}function y(St,e,en,tn,nn,sn,on){return g(en^(e|~tn),St,e,nn,sn,on)}function w(St){var e,en=St.length,tn=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=St.length;e+=64)p(tn,N(St.substring(e-64,e)));St=St.substring(e-64);var nn=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<St.length;e++)nn[e>>2]|=St.charCodeAt(e)<<(e%4<<3);if(nn[e>>2]|=128<<(e%4<<3),e>55)for(p(tn,nn),e=0;e<16;e++)nn[e]=0;return nn[14]=8*en,p(tn,nn),tn}function N(St){var e,en=[];for(e=0;e<64;e+=4)en[e>>2]=St.charCodeAt(e)+(St.charCodeAt(e+1)<<8)+(St.charCodeAt(e+2)<<16)+(St.charCodeAt(e+3)<<24);return en}var L="0123456789abcdef".split("");function x(St){for(var e="",en=0;en<4;en++)e+=L[St>>8*en+4&15]+L[St>>8*en&15];return e}function A(St){return String.fromCharCode(255&St,(65280&St)>>8,(16711680&St)>>16,(4278190080&St)>>24)}function S(St){return w(St).map(A).join("")}var _=function(St){for(var e=0;e<St.length;e++)St[e]=x(St[e]);return St.join("")}(w("hello"))!="5d41402abc4b2a76b9719d911017c592";function P(St,e){if(_){var en=(65535&St)+(65535&e);return(St>>16)+(e>>16)+(en>>16)<<16|65535&en}return St+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function k(St,e){var en,tn,nn,sn;if(St!==en){for(var on=(nn=St,sn=1+(256/St.length|0),new Array(sn+1).join(nn)),un=[],dn=0;dn<256;dn++)un[dn]=dn;var fn=0;for(dn=0;dn<256;dn++){var hn=un[dn];fn=(fn+hn+on.charCodeAt(dn))%256,un[dn]=un[fn],un[fn]=hn}en=St,tn=un}else un=tn;var an=e.length,rn=0,cn=0,pn="";for(dn=0;dn<an;dn++)cn=(cn+(hn=un[rn=(rn+1)%256]))%256,un[rn]=un[cn],un[cn]=hn,on=un[(un[rn]+un[cn])%256],pn+=String.fromCharCode(e.charCodeAt(dn)^on);return pn}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var F={print:4,modify:8,copy:16,"annot-forms":32};function I(St,e,en,tn){this.v=1,this.r=2;var nn=192;St.forEach(function(un){if(F.perm!==void 0)throw new Error("Invalid permission: "+un);nn+=F[un]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var sn=(e+this.padding).substr(0,32),on=(en+this.padding).substr(0,32);this.O=this.processOwnerPassword(sn,on),this.P=-(1+(255^nn)),this.encryptionKey=S(sn+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(tn)).substr(0,5),this.U=k(this.encryptionKey,this.padding)}function j(St){if(/[^\u0000-\u00ff]/.test(St))throw new Error("Invalid PDF Name Object: "+St+", Only accept ASCII characters.");for(var e="",en=St.length,tn=0;tn<en;tn++){var nn=St.charCodeAt(tn);e+=nn<33||nn===35||nn===37||nn===40||nn===41||nn===47||nn===60||nn===62||nn===91||nn===93||nn===123||nn===125||nn>126?"#"+("0"+nn.toString(16)).slice(-2):St[tn]}return e}function C(St){if(_typeof(St)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(en,tn,nn){if(nn=nn||!1,typeof en!="string"||typeof tn!="function"||typeof nn!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(en)||(e[en]={});var sn=Math.random().toString(35);return e[en][sn]=[tn,!!nn],sn},this.unsubscribe=function(en){for(var tn in e)if(e[tn][en])return delete e[tn][en],Object.keys(e[tn]).length===0&&delete e[tn],!0;return!1},this.publish=function(en){if(e.hasOwnProperty(en)){var tn=Array.prototype.slice.call(arguments,1),nn=[];for(var sn in e[en]){var on=e[en][sn];try{on[0].apply(St,tn)}catch(un){i.console&&o.error("jsPDF PubSub Error",un.message,un)}on[1]&&nn.push(sn)}nn.length&&nn.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function O(St){if(!(this instanceof O))return new O(St);var e="opacity,stroke-opacity".split(",");for(var en in St)St.hasOwnProperty(en)&&e.indexOf(en)>=0&&(this[en]=St[en]);this.id="",this.objectNumber=-1}function B(St,e){this.gState=St,this.matrix=e,this.id="",this.objectNumber=-1}function M(St,e,en,tn,nn){if(!(this instanceof M))return new M(St,e,en,tn,nn);this.type=St==="axial"?2:3,this.coords=e,this.colors=en,B.call(this,tn,nn)}function q(St,e,en,tn,nn){if(!(this instanceof q))return new q(St,e,en,tn,nn);this.boundingBox=St,this.xStep=e,this.yStep=en,this.stream="",this.cloneIndex=0,B.call(this,tn,nn)}function E(St){var e,en=typeof arguments[0]=="string"?arguments[0]:"p",tn=arguments[1],nn=arguments[2],sn=arguments[3],on=[],un=1,dn=16,fn="S",hn=null;_typeof(St=St||{})==="object"&&(en=St.orientation,tn=St.unit||tn,nn=St.format||nn,sn=St.compress||St.compressPdf||sn,(hn=St.encryption||null)!==null&&(hn.userPassword=hn.userPassword||"",hn.ownerPassword=hn.ownerPassword||"",hn.userPermissions=hn.userPermissions||[]),un=typeof St.userUnit=="number"?Math.abs(St.userUnit):1,St.precision!==void 0&&(e=St.precision),St.floatPrecision!==void 0&&(dn=St.floatPrecision),fn=St.defaultPathOperation||"S"),on=St.filters||(sn===!0?["FlateEncode"]:on),tn=tn||"mm",en=(""+(en||"P")).toLowerCase();var an=St.putOnlyUsedFonts||!1,rn={},cn={internal:{},__private__:{}};cn.__private__.PubSub=C;var pn="1.3",mn=cn.__private__.getPdfVersion=function(){return pn};cn.__private__.setPdfVersion=function(kn){pn=kn};var xn={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};cn.__private__.getPageFormats=function(){return xn};var gn=cn.__private__.getPageFormat=function(kn){return xn[kn]};nn=nn||"a4";var yn="compat",bn="advanced",wn=yn;function _n(){this.saveGraphicsState(),Zn(new Ts(ss,0,0,-ss,0,Mu()*ss).toString()+" cm"),this.setFontSize(this.getFontSize()/ss),fn="n",wn=bn}function Tn(){this.restoreGraphicsState(),fn="S",wn=yn}var An=cn.__private__.combineFontStyleAndFontWeight=function(kn,Un){if(kn=="bold"&&Un=="normal"||kn=="bold"&&Un==400||kn=="normal"&&Un=="italic"||kn=="bold"&&Un=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Un&&(kn=Un==400||Un==="normal"?kn==="italic"?"italic":"normal":Un!=700&&Un!=="bold"||kn!=="normal"?(Un==700?"bold":Un)+""+kn:"bold"),kn};cn.advancedAPI=function(kn){var Un=wn===yn;return Un&&_n.call(this),typeof kn!="function"||(kn(this),Un&&Tn.call(this)),this},cn.compatAPI=function(kn){var Un=wn===bn;return Un&&Tn.call(this),typeof kn!="function"||(kn(this),Un&&_n.call(this)),this},cn.isAdvancedAPI=function(){return wn===bn};var Pn,Sn=function(kn){if(wn!==bn)throw new Error(kn+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Cn=cn.roundToPrecision=cn.__private__.roundToPrecision=function(kn,Un){var ir=e||Un;if(isNaN(kn)||isNaN(ir))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return kn.toFixed(ir).replace(/0+$/,"")};Pn=cn.hpf=cn.__private__.hpf=typeof dn=="number"?function(kn){if(isNaN(kn))throw new Error("Invalid argument passed to jsPDF.hpf");return Cn(kn,dn)}:dn==="smart"?function(kn){if(isNaN(kn))throw new Error("Invalid argument passed to jsPDF.hpf");return Cn(kn,kn>-1&&kn<1?16:5)}:function(kn){if(isNaN(kn))throw new Error("Invalid argument passed to jsPDF.hpf");return Cn(kn,16)};var Nn=cn.f2=cn.__private__.f2=function(kn){if(isNaN(kn))throw new Error("Invalid argument passed to jsPDF.f2");return Cn(kn,2)},Mn=cn.__private__.f3=function(kn){if(isNaN(kn))throw new Error("Invalid argument passed to jsPDF.f3");return Cn(kn,3)},Fn=cn.scale=cn.__private__.scale=function(kn){if(isNaN(kn))throw new Error("Invalid argument passed to jsPDF.scale");return wn===yn?kn*ss:wn===bn?kn:void 0},In=function(kn){return Fn(function(Un){return wn===yn?Mu()-Un:wn===bn?Un:void 0}(kn))};cn.__private__.setPrecision=cn.setPrecision=function(kn){typeof parseInt(kn,10)=="number"&&(e=parseInt(kn,10))};var Bn,Ln="00000000000000000000000000000000",qn=cn.__private__.getFileId=function(){return Ln},Yn=cn.__private__.setFileId=function(kn){return Ln=kn!==void 0&&/^[a-fA-F0-9]{32}$/.test(kn)?kn.toUpperCase():Ln.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),hn!==null&&(go=new I(hn.userPermissions,hn.userPassword,hn.ownerPassword,Ln)),Ln};cn.setFileId=function(kn){return Yn(kn),this},cn.getFileId=function(){return qn()};var Qn=cn.__private__.convertDateToPDFDate=function(kn){var Un=kn.getTimezoneOffset(),ir=Un<0?"+":"-",dr=Math.floor(Math.abs(Un/60)),yr=Math.abs(Un%60),Ur=[ir,er(dr),"'",er(yr),"'"].join("");return["D:",kn.getFullYear(),er(kn.getMonth()+1),er(kn.getDate()),er(kn.getHours()),er(kn.getMinutes()),er(kn.getSeconds()),Ur].join("")},zn=cn.__private__.convertPDFDateToDate=function(kn){var Un=parseInt(kn.substr(2,4),10),ir=parseInt(kn.substr(6,2),10)-1,dr=parseInt(kn.substr(8,2),10),yr=parseInt(kn.substr(10,2),10),Ur=parseInt(kn.substr(12,2),10),Hr=parseInt(kn.substr(14,2),10);return new Date(Un,ir,dr,yr,Ur,Hr,0)},lr=cn.__private__.setCreationDate=function(kn){var Un;if(kn===void 0&&(kn=new Date),kn instanceof Date)Un=Qn(kn);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(kn))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Un=kn}return Bn=Un},$n=cn.__private__.getCreationDate=function(kn){var Un=Bn;return kn==="jsDate"&&(Un=zn(Bn)),Un};cn.setCreationDate=function(kn){return lr(kn),this},cn.getCreationDate=function(kn){return $n(kn)};var On,er=cn.__private__.padd2=function(kn){return("0"+parseInt(kn)).slice(-2)},sr=cn.__private__.padd2Hex=function(kn){return("00"+(kn=kn.toString())).substr(kn.length)},ar=0,cr=[],gr=[],vr=0,Er=[],Rr=[],Kr=!1,Cr=gr;cn.__private__.setCustomOutputDestination=function(kn){Kr=!0,Cr=kn};var Gr=function(kn){Kr||(Cr=kn)};cn.__private__.resetCustomOutputDestination=function(){Kr=!1,Cr=gr};var Zn=cn.__private__.out=function(kn){return kn=kn.toString(),vr+=kn.length+1,Cr.push(kn),Cr},Xr=cn.__private__.write=function(kn){return Zn(arguments.length===1?kn.toString():Array.prototype.join.call(arguments," "))},hs=cn.__private__.getArrayBuffer=function(kn){for(var Un=kn.length,ir=new ArrayBuffer(Un),dr=new Uint8Array(ir);Un--;)dr[Un]=kn.charCodeAt(Un);return ir},us=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];cn.__private__.getStandardFonts=function(){return us};var zr=St.fontSize||16;cn.__private__.setFontSize=cn.setFontSize=function(kn){return zr=wn===bn?kn/ss:kn,this};var ls,wr=cn.__private__.getFontSize=cn.getFontSize=function(){return wn===yn?zr:zr*ss},Fr=St.R2L||!1;cn.__private__.setR2L=cn.setR2L=function(kn){return Fr=kn,this},cn.__private__.getR2L=cn.getR2L=function(){return Fr};var Qr,fs=cn.__private__.setZoomMode=function(kn){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(kn))ls=kn;else if(isNaN(kn)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(kn)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+kn+'" is not recognized.');ls=kn}else ls=parseInt(kn,10)};cn.__private__.getZoomMode=function(){return ls};var os,xr=cn.__private__.setPageMode=function(kn){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(kn)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+kn+'" is not recognized.');Qr=kn};cn.__private__.getPageMode=function(){return Qr};var Or=cn.__private__.setLayoutMode=function(kn){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(kn)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+kn+'" is not recognized.');os=kn};cn.__private__.getLayoutMode=function(){return os},cn.__private__.setDisplayMode=cn.setDisplayMode=function(kn,Un,ir){return fs(kn),Or(Un),xr(ir),this};var Ir={title:"",subject:"",author:"",keywords:"",creator:""};cn.__private__.getDocumentProperty=function(kn){if(Object.keys(Ir).indexOf(kn)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ir[kn]},cn.__private__.getDocumentProperties=function(){return Ir},cn.__private__.setDocumentProperties=cn.setProperties=cn.setDocumentProperties=function(kn){for(var Un in Ir)Ir.hasOwnProperty(Un)&&kn[Un]&&(Ir[Un]=kn[Un]);return this},cn.__private__.setDocumentProperty=function(kn,Un){if(Object.keys(Ir).indexOf(kn)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ir[kn]=Un};var $r,ss,as,Ns,As,Jr={},Ss={},es=[],qr={},ts={},Dr={},ns={},ks=null,ms=0,Yr=[],is=new C(cn),_s=St.hotfixes||[],so={},ho={},Co=[],Ts=function kn(Un,ir,dr,yr,Ur,Hr){if(!(this instanceof kn))return new kn(Un,ir,dr,yr,Ur,Hr);isNaN(Un)&&(Un=1),isNaN(ir)&&(ir=0),isNaN(dr)&&(dr=0),isNaN(yr)&&(yr=1),isNaN(Ur)&&(Ur=0),isNaN(Hr)&&(Hr=0),this._matrix=[Un,ir,dr,yr,Ur,Hr]};Object.defineProperty(Ts.prototype,"sx",{get:function(){return this._matrix[0]},set:function(kn){this._matrix[0]=kn}}),Object.defineProperty(Ts.prototype,"shy",{get:function(){return this._matrix[1]},set:function(kn){this._matrix[1]=kn}}),Object.defineProperty(Ts.prototype,"shx",{get:function(){return this._matrix[2]},set:function(kn){this._matrix[2]=kn}}),Object.defineProperty(Ts.prototype,"sy",{get:function(){return this._matrix[3]},set:function(kn){this._matrix[3]=kn}}),Object.defineProperty(Ts.prototype,"tx",{get:function(){return this._matrix[4]},set:function(kn){this._matrix[4]=kn}}),Object.defineProperty(Ts.prototype,"ty",{get:function(){return this._matrix[5]},set:function(kn){this._matrix[5]=kn}}),Object.defineProperty(Ts.prototype,"a",{get:function(){return this._matrix[0]},set:function(kn){this._matrix[0]=kn}}),Object.defineProperty(Ts.prototype,"b",{get:function(){return this._matrix[1]},set:function(kn){this._matrix[1]=kn}}),Object.defineProperty(Ts.prototype,"c",{get:function(){return this._matrix[2]},set:function(kn){this._matrix[2]=kn}}),Object.defineProperty(Ts.prototype,"d",{get:function(){return this._matrix[3]},set:function(kn){this._matrix[3]=kn}}),Object.defineProperty(Ts.prototype,"e",{get:function(){return this._matrix[4]},set:function(kn){this._matrix[4]=kn}}),Object.defineProperty(Ts.prototype,"f",{get:function(){return this._matrix[5]},set:function(kn){this._matrix[5]=kn}}),Object.defineProperty(Ts.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ts.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ts.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ts.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ts.prototype.join=function(kn){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Pn).join(kn)},Ts.prototype.multiply=function(kn){var Un=kn.sx*this.sx+kn.shy*this.shx,ir=kn.sx*this.shy+kn.shy*this.sy,dr=kn.shx*this.sx+kn.sy*this.shx,yr=kn.shx*this.shy+kn.sy*this.sy,Ur=kn.tx*this.sx+kn.ty*this.shx+this.tx,Hr=kn.tx*this.shy+kn.ty*this.sy+this.ty;return new Ts(Un,ir,dr,yr,Ur,Hr)},Ts.prototype.decompose=function(){var kn=this.sx,Un=this.shy,ir=this.shx,dr=this.sy,yr=this.tx,Ur=this.ty,Hr=Math.sqrt(kn*kn+Un*Un),ys=(kn/=Hr)*ir+(Un/=Hr)*dr;ir-=kn*ys,dr-=Un*ys;var ws=Math.sqrt(ir*ir+dr*dr);return ys/=ws,kn*(dr/=ws)<Un*(ir/=ws)&&(kn=-kn,Un=-Un,ys=-ys,Hr=-Hr),{scale:new Ts(Hr,0,0,ws,0,0),translate:new Ts(1,0,0,1,yr,Ur),rotate:new Ts(kn,Un,-Un,kn,0,0),skew:new Ts(1,0,ys,1,0,0)}},Ts.prototype.toString=function(kn){return this.join(" ")},Ts.prototype.inversed=function(){var kn=this.sx,Un=this.shy,ir=this.shx,dr=this.sy,yr=this.tx,Ur=this.ty,Hr=1/(kn*dr-Un*ir),ys=dr*Hr,ws=-Un*Hr,Rs=-ir*Hr,Bs=kn*Hr;return new Ts(ys,ws,Rs,Bs,-ys*yr-Rs*Ur,-ws*yr-Bs*Ur)},Ts.prototype.applyToPoint=function(kn){var Un=kn.x*this.sx+kn.y*this.shx+this.tx,ir=kn.x*this.shy+kn.y*this.sy+this.ty;return new Ks(Un,ir)},Ts.prototype.applyToRectangle=function(kn){var Un=this.applyToPoint(kn),ir=this.applyToPoint(new Ks(kn.x+kn.w,kn.y+kn.h));return new Uo(Un.x,Un.y,ir.x-Un.x,ir.y-Un.y)},Ts.prototype.clone=function(){var kn=this.sx,Un=this.shy,ir=this.shx,dr=this.sy,yr=this.tx,Ur=this.ty;return new Ts(kn,Un,ir,dr,yr,Ur)},cn.Matrix=Ts;var qo=cn.matrixMult=function(kn,Un){return Un.multiply(kn)},Go=new Ts(1,0,0,1,0,0);cn.unitMatrix=cn.identityMatrix=Go;var Mo=function(kn,Un){if(!ts[kn]){var ir=(Un instanceof M?"Sh":"P")+(Object.keys(qr).length+1).toString(10);Un.id=ir,ts[kn]=ir,qr[ir]=Un,is.publish("addPattern",Un)}};cn.ShadingPattern=M,cn.TilingPattern=q,cn.addShadingPattern=function(kn,Un){return Sn("addShadingPattern()"),Mo(kn,Un),this},cn.beginTilingPattern=function(kn){Sn("beginTilingPattern()"),jr(kn.boundingBox[0],kn.boundingBox[1],kn.boundingBox[2]-kn.boundingBox[0],kn.boundingBox[3]-kn.boundingBox[1],kn.matrix)},cn.endTilingPattern=function(kn,Un){Sn("endTilingPattern()"),Un.stream=Rr[On].join(`
`),Mo(kn,Un),is.publish("endTilingPattern",Un),Co.pop().restore()};var Ro,eo=cn.__private__.newObject=function(){var kn=lo();return fo(kn,!0),kn},lo=cn.__private__.newObjectDeferred=function(){return ar++,cr[ar]=function(){return vr},ar},fo=function(kn,Un){return Un=typeof Un=="boolean"&&Un,cr[kn]=vr,Un&&Zn(kn+" 0 obj"),kn},xa=cn.__private__.newAdditionalObject=function(){var kn={objId:lo(),content:""};return Er.push(kn),kn},Qo=lo(),Oo=lo(),Kn=cn.__private__.decodeColorString=function(kn){var Un=kn.split(" ");if(Un.length!==2||Un[1]!=="g"&&Un[1]!=="G")Un.length!==5||Un[4]!=="k"&&Un[4]!=="K"||(Un=[(1-Un[0])*(1-Un[3]),(1-Un[1])*(1-Un[3]),(1-Un[2])*(1-Un[3]),"r"]);else{var ir=parseFloat(Un[0]);Un=[ir,ir,ir,"r"]}for(var dr="#",yr=0;yr<3;yr++)dr+=("0"+Math.floor(255*parseFloat(Un[yr])).toString(16)).slice(-2);return dr},or=cn.__private__.encodeColorString=function(kn){var Un;typeof kn=="string"&&(kn={ch1:kn});var ir=kn.ch1,dr=kn.ch2,yr=kn.ch3,Ur=kn.ch4,Hr=kn.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ir=="string"&&ir.charAt(0)!=="#"){var ys=new h(ir);if(ys.ok)ir=ys.toHex();else if(!/^\d*\.?\d*$/.test(ir))throw new Error('Invalid color "'+ir+'" passed to jsPDF.encodeColorString.')}if(typeof ir=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ir)&&(ir="#"+ir[1]+ir[1]+ir[2]+ir[2]+ir[3]+ir[3]),typeof ir=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ir)){var ws=parseInt(ir.substr(1),16);ir=ws>>16&255,dr=ws>>8&255,yr=255&ws}if(dr===void 0||Ur===void 0&&ir===dr&&dr===yr)Un=typeof ir=="string"?ir+" "+Hr[0]:kn.precision===2?Nn(ir/255)+" "+Hr[0]:Mn(ir/255)+" "+Hr[0];else if(Ur===void 0||_typeof(Ur)==="object"){if(Ur&&!isNaN(Ur.a)&&Ur.a===0)return["1.","1.","1.",Hr[1]].join(" ");Un=typeof ir=="string"?[ir,dr,yr,Hr[1]].join(" "):kn.precision===2?[Nn(ir/255),Nn(dr/255),Nn(yr/255),Hr[1]].join(" "):[Mn(ir/255),Mn(dr/255),Mn(yr/255),Hr[1]].join(" ")}else Un=typeof ir=="string"?[ir,dr,yr,Ur,Hr[2]].join(" "):kn.precision===2?[Nn(ir),Nn(dr),Nn(yr),Nn(Ur),Hr[2]].join(" "):[Mn(ir),Mn(dr),Mn(yr),Mn(Ur),Hr[2]].join(" ");return Un},hr=cn.__private__.getFilters=function(){return on},mr=cn.__private__.putStream=function(kn){var Un=(kn=kn||{}).data||"",ir=kn.filters||hr(),dr=kn.alreadyAppliedFilters||[],yr=kn.addLength1||!1,Ur=Un.length,Hr=kn.objectId,ys=function(ko){return ko};if(hn!==null&&Hr===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");hn!==null&&(ys=go.encryptor(Hr,0));var ws={};ir===!0&&(ir=["FlateEncode"]);var Rs=kn.additionalKeyValues||[],Bs=(ws=E.API.processDataByFilters!==void 0?E.API.processDataByFilters(Un,ir):{data:Un,reverseChain:[]}).reverseChain+(Array.isArray(dr)?dr.join(" "):dr.toString());if(ws.data.length!==0&&(Rs.push({key:"Length",value:ws.data.length}),yr===!0&&Rs.push({key:"Length1",value:Ur})),Bs.length!=0)if(Bs.split("/").length-1==1)Rs.push({key:"Filter",value:Bs});else{Rs.push({key:"Filter",value:"["+Bs+"]"});for(var Hs=0;Hs<Rs.length;Hs+=1)if(Rs[Hs].key==="DecodeParms"){for(var mo=[],Eo=0;Eo<ws.reverseChain.split("/").length-1;Eo+=1)mo.push("null");mo.push(Rs[Hs].value),Rs[Hs].value="["+mo.join(" ")+"]"}}Zn("<<");for(var ro=0;ro<Rs.length;ro++)Zn("/"+Rs[ro].key+" "+Rs[ro].value);Zn(">>"),ws.data.length!==0&&(Zn("stream"),Zn(ys(ws.data)),Zn("endstream"))},kr=cn.__private__.putPage=function(kn){var Un=kn.number,ir=kn.data,dr=kn.objId,yr=kn.contentsObjId;fo(dr,!0),Zn("<</Type /Page"),Zn("/Parent "+kn.rootDictionaryObjId+" 0 R"),Zn("/Resources "+kn.resourceDictionaryObjId+" 0 R"),Zn("/MediaBox ["+parseFloat(Pn(kn.mediaBox.bottomLeftX))+" "+parseFloat(Pn(kn.mediaBox.bottomLeftY))+" "+Pn(kn.mediaBox.topRightX)+" "+Pn(kn.mediaBox.topRightY)+"]"),kn.cropBox!==null&&Zn("/CropBox ["+Pn(kn.cropBox.bottomLeftX)+" "+Pn(kn.cropBox.bottomLeftY)+" "+Pn(kn.cropBox.topRightX)+" "+Pn(kn.cropBox.topRightY)+"]"),kn.bleedBox!==null&&Zn("/BleedBox ["+Pn(kn.bleedBox.bottomLeftX)+" "+Pn(kn.bleedBox.bottomLeftY)+" "+Pn(kn.bleedBox.topRightX)+" "+Pn(kn.bleedBox.topRightY)+"]"),kn.trimBox!==null&&Zn("/TrimBox ["+Pn(kn.trimBox.bottomLeftX)+" "+Pn(kn.trimBox.bottomLeftY)+" "+Pn(kn.trimBox.topRightX)+" "+Pn(kn.trimBox.topRightY)+"]"),kn.artBox!==null&&Zn("/ArtBox ["+Pn(kn.artBox.bottomLeftX)+" "+Pn(kn.artBox.bottomLeftY)+" "+Pn(kn.artBox.topRightX)+" "+Pn(kn.artBox.topRightY)+"]"),typeof kn.userUnit=="number"&&kn.userUnit!==1&&Zn("/UserUnit "+kn.userUnit),is.publish("putPage",{objId:dr,pageContext:Yr[Un],pageNumber:Un,page:ir}),Zn("/Contents "+yr+" 0 R"),Zn(">>"),Zn("endobj");var Ur=ir.join(`
`);return wn===bn&&(Ur+=`
Q`),fo(yr,!0),mr({data:Ur,filters:hr(),objectId:yr}),Zn("endobj"),dr},Pr=cn.__private__.putPages=function(){var kn,Un,ir=[];for(kn=1;kn<=ms;kn++)Yr[kn].objId=lo(),Yr[kn].contentsObjId=lo();for(kn=1;kn<=ms;kn++)ir.push(kr({number:kn,data:Rr[kn],objId:Yr[kn].objId,contentsObjId:Yr[kn].contentsObjId,mediaBox:Yr[kn].mediaBox,cropBox:Yr[kn].cropBox,bleedBox:Yr[kn].bleedBox,trimBox:Yr[kn].trimBox,artBox:Yr[kn].artBox,userUnit:Yr[kn].userUnit,rootDictionaryObjId:Qo,resourceDictionaryObjId:Oo}));fo(Qo,!0),Zn("<</Type /Pages");var dr="/Kids [";for(Un=0;Un<ms;Un++)dr+=ir[Un]+" 0 R ";Zn(dr+"]"),Zn("/Count "+ms),Zn(">>"),Zn("endobj"),is.publish("postPutPages")},_i=function(kn){is.publish("putFont",{font:kn,out:Zn,newObject:eo,putStream:mr}),kn.isAlreadyPutted!==!0&&(kn.objectNumber=eo(),Zn("<<"),Zn("/Type /Font"),Zn("/BaseFont /"+j(kn.postScriptName)),Zn("/Subtype /Type1"),typeof kn.encoding=="string"&&Zn("/Encoding /"+kn.encoding),Zn("/FirstChar 32"),Zn("/LastChar 255"),Zn(">>"),Zn("endobj"))},gs=function(kn){kn.objectNumber=eo();var Un=[];Un.push({key:"Type",value:"/XObject"}),Un.push({key:"Subtype",value:"/Form"}),Un.push({key:"BBox",value:"["+[Pn(kn.x),Pn(kn.y),Pn(kn.x+kn.width),Pn(kn.y+kn.height)].join(" ")+"]"}),Un.push({key:"Matrix",value:"["+kn.matrix.toString()+"]"});var ir=kn.pages[1].join(`
`);mr({data:ir,additionalKeyValues:Un,objectId:kn.objectNumber}),Zn("endobj")},ds=function(kn,Un){Un||(Un=21);var ir=eo(),dr=function(Hr,ys){var ws,Rs=[],Bs=1/(ys-1);for(ws=0;ws<1;ws+=Bs)Rs.push(ws);if(Rs.push(1),Hr[0].offset!=0){var Hs={offset:0,color:Hr[0].color};Hr.unshift(Hs)}if(Hr[Hr.length-1].offset!=1){var mo={offset:1,color:Hr[Hr.length-1].color};Hr.push(mo)}for(var Eo="",ro=0,ko=0;ko<Rs.length;ko++){for(ws=Rs[ko];ws>Hr[ro+1].offset;)ro++;var So=Hr[ro].offset,Lo=(ws-So)/(Hr[ro+1].offset-So),Jl=Hr[ro].color,Fl=Hr[ro+1].color;Eo+=sr(Math.round((1-Lo)*Jl[0]+Lo*Fl[0]).toString(16))+sr(Math.round((1-Lo)*Jl[1]+Lo*Fl[1]).toString(16))+sr(Math.round((1-Lo)*Jl[2]+Lo*Fl[2]).toString(16))}return Eo.trim()}(kn.colors,Un),yr=[];yr.push({key:"FunctionType",value:"0"}),yr.push({key:"Domain",value:"[0.0 1.0]"}),yr.push({key:"Size",value:"["+Un+"]"}),yr.push({key:"BitsPerSample",value:"8"}),yr.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),yr.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),mr({data:dr,additionalKeyValues:yr,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ir}),Zn("endobj"),kn.objectNumber=eo(),Zn("<< /ShadingType "+kn.type),Zn("/ColorSpace /DeviceRGB");var Ur="/Coords ["+Pn(parseFloat(kn.coords[0]))+" "+Pn(parseFloat(kn.coords[1]))+" ";kn.type===2?Ur+=Pn(parseFloat(kn.coords[2]))+" "+Pn(parseFloat(kn.coords[3])):Ur+=Pn(parseFloat(kn.coords[2]))+" "+Pn(parseFloat(kn.coords[3]))+" "+Pn(parseFloat(kn.coords[4]))+" "+Pn(parseFloat(kn.coords[5])),Zn(Ur+="]"),kn.matrix&&Zn("/Matrix ["+kn.matrix.toString()+"]"),Zn("/Function "+ir+" 0 R"),Zn("/Extend [true true]"),Zn(">>"),Zn("endobj")},Cs=function(kn,Un){var ir=lo(),dr=eo();Un.push({resourcesOid:ir,objectOid:dr}),kn.objectNumber=dr;var yr=[];yr.push({key:"Type",value:"/Pattern"}),yr.push({key:"PatternType",value:"1"}),yr.push({key:"PaintType",value:"1"}),yr.push({key:"TilingType",value:"1"}),yr.push({key:"BBox",value:"["+kn.boundingBox.map(Pn).join(" ")+"]"}),yr.push({key:"XStep",value:Pn(kn.xStep)}),yr.push({key:"YStep",value:Pn(kn.yStep)}),yr.push({key:"Resources",value:ir+" 0 R"}),kn.matrix&&yr.push({key:"Matrix",value:"["+kn.matrix.toString()+"]"}),mr({data:kn.stream,additionalKeyValues:yr,objectId:kn.objectNumber}),Zn("endobj")},Gs=function(kn){for(var Un in kn.objectNumber=eo(),Zn("<<"),kn)switch(Un){case"opacity":Zn("/ca "+Nn(kn[Un]));break;case"stroke-opacity":Zn("/CA "+Nn(kn[Un]))}Zn(">>"),Zn("endobj")},uo=function(kn){fo(kn.resourcesOid,!0),Zn("<<"),Zn("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var Un in Zn("/Font <<"),Jr)Jr.hasOwnProperty(Un)&&(an===!1||an===!0&&rn.hasOwnProperty(Un))&&Zn("/"+Un+" "+Jr[Un].objectNumber+" 0 R");Zn(">>")}(),function(){if(Object.keys(qr).length>0){for(var Un in Zn("/Shading <<"),qr)qr.hasOwnProperty(Un)&&qr[Un]instanceof M&&qr[Un].objectNumber>=0&&Zn("/"+Un+" "+qr[Un].objectNumber+" 0 R");is.publish("putShadingPatternDict"),Zn(">>")}}(),function(Un){if(Object.keys(qr).length>0){for(var ir in Zn("/Pattern <<"),qr)qr.hasOwnProperty(ir)&&qr[ir]instanceof cn.TilingPattern&&qr[ir].objectNumber>=0&&qr[ir].objectNumber<Un&&Zn("/"+ir+" "+qr[ir].objectNumber+" 0 R");is.publish("putTilingPatternDict"),Zn(">>")}}(kn.objectOid),function(){if(Object.keys(Dr).length>0){var Un;for(Un in Zn("/ExtGState <<"),Dr)Dr.hasOwnProperty(Un)&&Dr[Un].objectNumber>=0&&Zn("/"+Un+" "+Dr[Un].objectNumber+" 0 R");is.publish("putGStateDict"),Zn(">>")}}(),function(){for(var Un in Zn("/XObject <<"),so)so.hasOwnProperty(Un)&&so[Un].objectNumber>=0&&Zn("/"+Un+" "+so[Un].objectNumber+" 0 R");is.publish("putXobjectDict"),Zn(">>")}(),Zn(">>"),Zn("endobj")},co=function(kn){Ss[kn.fontName]=Ss[kn.fontName]||{},Ss[kn.fontName][kn.fontStyle]=kn.id},Nr=function(kn,Un,ir,dr,yr){var Ur={id:"F"+(Object.keys(Jr).length+1).toString(10),postScriptName:kn,fontName:Un,fontStyle:ir,encoding:dr,isStandardFont:yr||!1,metadata:{}};return is.publish("addFont",{font:Ur,instance:this}),Jr[Ur.id]=Ur,co(Ur),Ur.id},Ps=cn.__private__.pdfEscape=cn.pdfEscape=function(kn,Un){return function(ir,dr){var yr,Ur,Hr,ys,ws,Rs,Bs,Hs,mo;if(Hr=(dr=dr||{}).sourceEncoding||"Unicode",ws=dr.outputEncoding,(dr.autoencode||ws)&&Jr[$r].metadata&&Jr[$r].metadata[Hr]&&Jr[$r].metadata[Hr].encoding&&(ys=Jr[$r].metadata[Hr].encoding,!ws&&Jr[$r].encoding&&(ws=Jr[$r].encoding),!ws&&ys.codePages&&(ws=ys.codePages[0]),typeof ws=="string"&&(ws=ys[ws]),ws)){for(Bs=!1,Rs=[],yr=0,Ur=ir.length;yr<Ur;yr++)(Hs=ws[ir.charCodeAt(yr)])?Rs.push(String.fromCharCode(Hs)):Rs.push(ir[yr]),Rs[yr].charCodeAt(0)>>8&&(Bs=!0);ir=Rs.join("")}for(yr=ir.length;Bs===void 0&&yr!==0;)ir.charCodeAt(yr-1)>>8&&(Bs=!0),yr--;if(!Bs)return ir;for(Rs=dr.noBOM?[]:[254,255],yr=0,Ur=ir.length;yr<Ur;yr++){if((mo=(Hs=ir.charCodeAt(yr))>>8)>>8)throw new Error("Character at position "+yr+" of string '"+ir+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Rs.push(mo),Rs.push(Hs-(mo<<8))}return String.fromCharCode.apply(void 0,Rs)}(kn,Un).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ys=cn.__private__.beginPage=function(kn){Rr[++ms]=[],Yr[ms]={objId:0,contentsObjId:0,userUnit:Number(un),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(kn[0]),topRightY:Number(kn[1])}},au(ms),Gr(Rr[On])},Io=function(kn,Un){var ir,dr,yr;switch(en=Un||en,typeof kn=="string"&&(ir=gn(kn.toLowerCase()),Array.isArray(ir)&&(dr=ir[0],yr=ir[1])),Array.isArray(kn)&&(dr=kn[0]*ss,yr=kn[1]*ss),isNaN(dr)&&(dr=nn[0],yr=nn[1]),(dr>14400||yr>14400)&&(o.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),dr=Math.min(14400,dr),yr=Math.min(14400,yr)),nn=[dr,yr],en.substr(0,1)){case"l":yr>dr&&(nn=[yr,dr]);break;case"p":dr>yr&&(nn=[yr,dr])}Ys(nn),js(hu),Zn(Wn),xs!==0&&Zn(xs+" J"),Is!==0&&Zn(Is+" j"),is.publish("addPage",{pageNumber:ms})},Ho=function(kn){kn>0&&kn<=ms&&(Rr.splice(kn,1),Yr.splice(kn,1),ms--,On>ms&&(On=ms),this.setPage(On))},au=function(kn){kn>0&&kn<=ms&&(On=kn)},lu=cn.__private__.getNumberOfPages=cn.getNumberOfPages=function(){return Rr.length-1},Pu=function(kn,Un,ir){var dr,yr=void 0;return ir=ir||{},kn=kn!==void 0?kn:Jr[$r].fontName,Un=Un!==void 0?Un:Jr[$r].fontStyle,dr=kn.toLowerCase(),Ss[dr]!==void 0&&Ss[dr][Un]!==void 0?yr=Ss[dr][Un]:Ss[kn]!==void 0&&Ss[kn][Un]!==void 0?yr=Ss[kn][Un]:ir.disableWarning===!1&&o.warn("Unable to look up font label for font '"+kn+"', '"+Un+"'. Refer to getFontList() for available fonts."),yr||ir.noFallback||(yr=Ss.times[Un])==null&&(yr=Ss.times.normal),yr},oo=cn.__private__.putInfo=function(){var kn=eo(),Un=function(dr){return dr};for(var ir in hn!==null&&(Un=go.encryptor(kn,0)),Zn("<<"),Zn("/Producer ("+Ps(Un("jsPDF "+E.version))+")"),Ir)Ir.hasOwnProperty(ir)&&Ir[ir]&&Zn("/"+ir.substr(0,1).toUpperCase()+ir.substr(1)+" ("+Ps(Un(Ir[ir]))+")");Zn("/CreationDate ("+Ps(Un(Bn))+")"),Zn(">>"),Zn("endobj")},Ll=cn.__private__.putCatalog=function(kn){var Un=(kn=kn||{}).rootDictionaryObjId||Qo;switch(eo(),Zn("<<"),Zn("/Type /Catalog"),Zn("/Pages "+Un+" 0 R"),ls||(ls="fullwidth"),ls){case"fullwidth":Zn("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Zn("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Zn("/OpenAction [3 0 R /Fit]");break;case"original":Zn("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ir=""+ls;ir.substr(ir.length-1)==="%"&&(ls=parseInt(ls)/100),typeof ls=="number"&&Zn("/OpenAction [3 0 R /XYZ null null "+Nn(ls)+"]")}switch(os||(os="continuous"),os){case"continuous":Zn("/PageLayout /OneColumn");break;case"single":Zn("/PageLayout /SinglePage");break;case"two":case"twoleft":Zn("/PageLayout /TwoColumnLeft");break;case"tworight":Zn("/PageLayout /TwoColumnRight")}Qr&&Zn("/PageMode /"+Qr),is.publish("putCatalog"),Zn(">>"),Zn("endobj")},Vu=cn.__private__.putTrailer=function(){Zn("trailer"),Zn("<<"),Zn("/Size "+(ar+1)),Zn("/Root "+ar+" 0 R"),Zn("/Info "+(ar-1)+" 0 R"),hn!==null&&Zn("/Encrypt "+go.oid+" 0 R"),Zn("/ID [ <"+Ln+"> <"+Ln+"> ]"),Zn(">>")},po=cn.__private__.putHeader=function(){Zn("%PDF-"+pn),Zn("%")},Nu=cn.__private__.putXRef=function(){var kn="0000000000";Zn("xref"),Zn("0 "+(ar+1)),Zn("0000000000 65535 f ");for(var Un=1;Un<=ar;Un++)typeof cr[Un]=="function"?Zn((kn+cr[Un]()).slice(-10)+" 00000 n "):cr[Un]!==void 0?Zn((kn+cr[Un]).slice(-10)+" 00000 n "):Zn("0000000000 00000 n ")},Al=cn.__private__.buildDocument=function(){var kn;ar=0,vr=0,gr=[],cr=[],Er=[],Qo=lo(),Oo=lo(),Gr(gr),is.publish("buildDocument"),po(),Pr(),function(){is.publish("putAdditionalObjects");for(var ir=0;ir<Er.length;ir++){var dr=Er[ir];fo(dr.objId,!0),Zn(dr.content),Zn("endobj")}is.publish("postPutAdditionalObjects")}(),kn=[],function(){for(var ir in Jr)Jr.hasOwnProperty(ir)&&(an===!1||an===!0&&rn.hasOwnProperty(ir))&&_i(Jr[ir])}(),function(){var ir;for(ir in Dr)Dr.hasOwnProperty(ir)&&Gs(Dr[ir])}(),function(){for(var ir in so)so.hasOwnProperty(ir)&&gs(so[ir])}(),function(ir){var dr;for(dr in qr)qr.hasOwnProperty(dr)&&(qr[dr]instanceof M?ds(qr[dr]):qr[dr]instanceof q&&Cs(qr[dr],ir))}(kn),is.publish("putResources"),kn.forEach(uo),uo({resourcesOid:Oo,objectOid:Number.MAX_SAFE_INTEGER}),is.publish("postPutResources"),hn!==null&&(go.oid=eo(),Zn("<<"),Zn("/Filter /Standard"),Zn("/V "+go.v),Zn("/R "+go.r),Zn("/U <"+go.toHexString(go.U)+">"),Zn("/O <"+go.toHexString(go.O)+">"),Zn("/P "+go.P),Zn(">>"),Zn("endobj")),oo(),Ll();var Un=vr;return Nu(),Vu(),Zn("startxref"),Zn(""+Un),Zn("%%EOF"),Gr(Rr[On]),gr.join(`
`)},uu=cn.__private__.getBlob=function(kn){return new Blob([hs(kn)],{type:"application/pdf"})},Wl=cn.output=cn.__private__.output=(Ro=function(kn,Un){switch(typeof(Un=Un||{})=="string"?Un={filename:Un}:Un.filename=Un.filename||"generated.pdf",kn){case void 0:return Al();case"save":cn.save(Un.filename);break;case"arraybuffer":return hs(Al());case"blob":return uu(Al());case"bloburi":case"bloburl":if(i.URL!==void 0&&typeof i.URL.createObjectURL=="function")return i.URL&&i.URL.createObjectURL(uu(Al()))||void 0;o.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ir="",dr=Al();try{ir=d(dr)}catch{ir=d(unescape(encodeURIComponent(dr)))}return"data:application/pdf;filename="+Un.filename+";base64,"+ir;case"pdfobjectnewwindow":if(Object.prototype.toString.call(i)==="[object Window]"){var yr="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ur=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Un.pdfObjectUrl&&(yr=Un.pdfObjectUrl,Ur="");var Hr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+yr+'"'+Ur+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Un)+");<\/script></body></html>",ys=i.open();return ys!==null&&ys.document.write(Hr),ys}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(i)==="[object Window]"){var ws='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Un.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Un.filename+'" width="500px" height="400px" /></body></html>',Rs=i.open();if(Rs!==null){Rs.document.write(ws);var Bs=this;Rs.document.documentElement.querySelector("#pdfViewer").onload=function(){Rs.document.title=Un.filename,Rs.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Bs.output("bloburl"))}}return Rs}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(i)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Hs='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Un)+'"></iframe></body></html>',mo=i.open();if(mo!==null&&(mo.document.write(Hs),mo.document.title=Un.filename),mo||typeof safari>"u")return mo;break;case"datauri":case"dataurl":return i.document.location.href=this.output("datauristring",Un);default:return null}},Ro.foo=function(){try{return Ro.apply(this,arguments)}catch(ir){var kn=ir.stack||"";~kn.indexOf(" at ")&&(kn=kn.split(" at ")[1]);var Un="Error in function "+kn.split(`
`)[0].split("<")[0]+": "+ir.message;if(!i.console)throw new Error(Un);i.console.error(Un,ir),i.alert&&alert(Un)}},Ro.foo.bar=Ro,Ro.foo),zo=function(kn){return Array.isArray(_s)===!0&&_s.indexOf(kn)>-1};switch(tn){case"pt":ss=1;break;case"mm":ss=72/25.4;break;case"cm":ss=72/2.54;break;case"in":ss=72;break;case"px":ss=zo("px_scaling")==1?.75:96/72;break;case"pc":case"em":ss=12;break;case"ex":ss=6;break;default:if(typeof tn!="number")throw new Error("Invalid unit: "+tn);ss=tn}var go=null;lr(),Yn();var Pl=cn.__private__.getPageInfo=cn.getPageInfo=function(kn){if(isNaN(kn)||kn%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Yr[kn].objId,pageNumber:kn,pageContext:Yr[kn]}},ju=cn.__private__.getPageInfoByObjId=function(kn){if(isNaN(kn)||kn%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Un in Yr)if(Yr[Un].objId===kn)break;return Pl(Un)},qu=cn.__private__.getCurrentPageInfo=cn.getCurrentPageInfo=function(){return{objId:Yr[On].objId,pageNumber:On,pageContext:Yr[On]}};cn.addPage=function(){return Io.apply(this,arguments),this},cn.setPage=function(){return au.apply(this,arguments),Gr.call(this,Rr[On]),this},cn.insertPage=function(kn){return this.addPage(),this.movePage(On,kn),this},cn.movePage=function(kn,Un){var ir,dr;if(kn>Un){ir=Rr[kn],dr=Yr[kn];for(var yr=kn;yr>Un;yr--)Rr[yr]=Rr[yr-1],Yr[yr]=Yr[yr-1];Rr[Un]=ir,Yr[Un]=dr,this.setPage(Un)}else if(kn<Un){ir=Rr[kn],dr=Yr[kn];for(var Ur=kn;Ur<Un;Ur++)Rr[Ur]=Rr[Ur+1],Yr[Ur]=Yr[Ur+1];Rr[Un]=ir,Yr[Un]=dr,this.setPage(Un)}return this},cn.deletePage=function(){return Ho.apply(this,arguments),this},cn.__private__.text=cn.text=function(kn,Un,ir,dr,yr){var Ur,Hr,ys,ws,Rs,Bs,Hs,mo,Eo,ro=(dr=dr||{}).scope||this;if(typeof kn=="number"&&typeof Un=="number"&&(typeof ir=="string"||Array.isArray(ir))){var ko=ir;ir=Un,Un=kn,kn=ko}if(arguments[3]instanceof Ts==0?(ys=arguments[4],ws=arguments[5],_typeof(Hs=arguments[3])==="object"&&Hs!==null||(typeof ys=="string"&&(ws=ys,ys=null),typeof Hs=="string"&&(ws=Hs,Hs=null),typeof Hs=="number"&&(ys=Hs,Hs=null),dr={flags:Hs,angle:ys,align:ws})):(Sn("The transform parameter of text() with a Matrix value"),Eo=yr),isNaN(Un)||isNaN(ir)||kn==null)throw new Error("Invalid arguments passed to jsPDF.text");if(kn.length===0)return ro;var So,Lo="",Jl=typeof dr.lineHeightFactor=="number"?dr.lineHeightFactor:Ul,Fl=ro.internal.scaleFactor;function eu(Xs){return Xs=Xs.split("	").join(Array(dr.TabLen||9).join(" ")),Ps(Xs,Hs)}function _f(Xs){for(var to,vo=Xs.concat(),Ao=[],ru=vo.length;ru--;)typeof(to=vo.shift())=="string"?Ao.push(to):Array.isArray(Xs)&&(to.length===1||to[1]===void 0&&to[2]===void 0)?Ao.push(to[0]):Ao.push([to[0],to[1],to[2]]);return Ao}function Zu(Xs,to){var vo;if(typeof Xs=="string")vo=to(Xs)[0];else if(Array.isArray(Xs)){for(var Ao,ru,up=Xs.concat(),_d=[],vp=up.length;vp--;)typeof(Ao=up.shift())=="string"?_d.push(to(Ao)[0]):Array.isArray(Ao)&&typeof Ao[0]=="string"&&(ru=to(Ao[0],Ao[1],Ao[2]),_d.push([ru[0],ru[1],ru[2]]));vo=_d}return vo}var fu=!1,Ru=!0;if(typeof kn=="string")fu=!0;else if(Array.isArray(kn)){var Ou=kn.concat();Hr=[];for(var pu,Do=Ou.length;Do--;)(typeof(pu=Ou.shift())!="string"||Array.isArray(pu)&&typeof pu[0]!="string")&&(Ru=!1);fu=Ru}if(fu===!1)throw new Error('Type of text must be string or Array. "'+kn+'" is not recognized.');typeof kn=="string"&&(kn=kn.match(/[\r?\n]/)?kn.split(/\r\n|\r|\n/g):[kn]);var Iu=zr/ro.internal.scaleFactor,Lu=Iu*(Jl-1);switch(dr.baseline){case"bottom":ir-=Lu;break;case"top":ir+=Iu-Lu;break;case"hanging":ir+=Iu-2*Lu;break;case"middle":ir+=Iu/2-Lu}if((Bs=dr.maxWidth||0)>0&&(typeof kn=="string"?kn=ro.splitTextToSize(kn,Bs):Object.prototype.toString.call(kn)==="[object Array]"&&(kn=kn.reduce(function(Xs,to){return Xs.concat(ro.splitTextToSize(to,Bs))},[]))),Ur={text:kn,x:Un,y:ir,options:dr,mutex:{pdfEscape:Ps,activeFontKey:$r,fonts:Jr,activeFontSize:zr}},is.publish("preProcessText",Ur),kn=Ur.text,ys=(dr=Ur.options).angle,Eo instanceof Ts==0&&ys&&typeof ys=="number"){ys*=Math.PI/180,dr.rotationDirection===0&&(ys=-ys),wn===bn&&(ys=-ys);var ep=Math.cos(ys),tp=Math.sin(ys);Eo=new Ts(ep,tp,-tp,ep,0,0)}else ys&&ys instanceof Ts&&(Eo=ys);wn!==bn||Eo||(Eo=Go),(Rs=dr.charSpace||Ar)!==void 0&&(Lo+=Pn(Fn(Rs))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(mo=dr.horizontalScale)!==void 0&&(Lo+=Pn(100*mo)+` Tz
`),dr.lang;var Wo=-1,tu=dr.renderingMode!==void 0?dr.renderingMode:dr.stroke,Ju=ro.internal.getCurrentPageInfo().pageContext;switch(tu){case 0:case!1:case"fill":Wo=0;break;case 1:case!0:case"stroke":Wo=1;break;case 2:case"fillThenStroke":Wo=2;break;case 3:case"invisible":Wo=3;break;case 4:case"fillAndAddForClipping":Wo=4;break;case 5:case"strokeAndAddPathForClipping":Wo=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Wo=6;break;case 7:case"addToPathForClipping":Wo=7}var yp=Ju.usedRenderingMode!==void 0?Ju.usedRenderingMode:-1;Wo!==-1?Lo+=Wo+` Tr
`:yp!==-1&&(Lo+=`0 Tr
`),Wo!==-1&&(Ju.usedRenderingMode=Wo),ws=dr.align||"left";var Ml,Du=zr*Jl,np=ro.internal.pageSize.getWidth(),rp=Jr[$r];Rs=dr.charSpace||Ar,Bs=dr.maxWidth||0,Hs=Object.assign({autoencode:!0,noBOM:!0},dr.flags);var mu=[],Fu=function(Xs){return ro.getStringUnitWidth(Xs,{font:rp,charSpace:Rs,fontSize:zr,doKerning:!1})*zr/Fl};if(Object.prototype.toString.call(kn)==="[object Array]"){var $a;Hr=_f(kn),ws!=="left"&&(Ml=Hr.map(Fu));var xl,gu=0;if(ws==="right"){Un-=Ml[0],kn=[],Do=Hr.length;for(var nu=0;nu<Do;nu++)nu===0?(xl=Nl(Un),$a=Cl(ir)):(xl=Fn(gu-Ml[nu]),$a=-Du),kn.push([Hr[nu],xl,$a]),gu=Ml[nu]}else if(ws==="center"){Un-=Ml[0]/2,kn=[],Do=Hr.length;for(var xu=0;xu<Do;xu++)xu===0?(xl=Nl(Un),$a=Cl(ir)):(xl=Fn((gu-Ml[xu])/2),$a=-Du),kn.push([Hr[xu],xl,$a]),gu=Ml[xu]}else if(ws==="left"){kn=[],Do=Hr.length;for(var ip=0;ip<Do;ip++)kn.push(Hr[ip])}else if(ws==="justify"&&rp.encoding==="Identity-H"){kn=[],Do=Hr.length,Bs=Bs!==0?Bs:np;for(var _c=0,bo=0;bo<Do;bo++)if($a=bo===0?Cl(ir):-Du,xl=bo===0?Nl(Un):_c,bo<Do-1){var bp=Fn((Bs-Ml[bo])/(Hr[bo].split(" ").length-1)),Vl=Hr[bo].split(" ");kn.push([Vl[0]+" ",xl,$a]),_c=0;for(var Gl=1;Gl<Vl.length;Gl++){var sp=(Fu(Vl[Gl-1]+" "+Vl[Gl])-Fu(Vl[Gl]))*Fl+bp;Gl==Vl.length-1?kn.push([Vl[Gl],sp,0]):kn.push([Vl[Gl]+" ",sp,0]),_c-=sp}}else kn.push([Hr[bo],xl,$a]);kn.push(["",_c,0])}else{if(ws!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(kn=[],Do=Hr.length,Bs=Bs!==0?Bs:np,bo=0;bo<Do;bo++){$a=bo===0?Cl(ir):-Du,xl=bo===0?Nl(Un):0;var op=Hr[bo].split(" ").length-1,ap=op>0?(Bs-Ml[bo])/op:0;bo<Do-1?mu.push(Pn(Fn(ap))):mu.push(0),kn.push([Hr[bo],xl,$a])}}}(typeof dr.R2L=="boolean"?dr.R2L:Fr)===!0&&(kn=Zu(kn,function(Xs,to,vo){return[Xs.split("").reverse().join(""),to,vo]})),Ur={text:kn,x:Un,y:ir,options:dr,mutex:{pdfEscape:Ps,activeFontKey:$r,fonts:Jr,activeFontSize:zr}},is.publish("postProcessText",Ur),kn=Ur.text,So=Ur.mutex.isHex||!1;var lp=Jr[$r].encoding;lp!=="WinAnsiEncoding"&&lp!=="StandardEncoding"||(kn=Zu(kn,function(Xs,to,vo){return[eu(Xs),to,vo]})),Hr=_f(kn),kn=[];for(var yu,bu,vu,$u=Array.isArray(Hr[0])?1:0,wu="",Bu=function(Xs,to,vo){var Ao="";return vo instanceof Ts?(vo=typeof dr.angle=="number"?qo(vo,new Ts(1,0,0,1,Xs,to)):qo(new Ts(1,0,0,1,Xs,to),vo),wn===bn&&(vo=qo(new Ts(1,0,0,-1,0,0),vo)),Ao=vo.join(" ")+` Tm
`):Ao=Pn(Xs)+" "+Pn(to)+` Td
`,Ao},Rl=0;Rl<Hr.length;Rl++){switch(wu="",$u){case 1:vu=(So?"<":"(")+Hr[Rl][0]+(So?">":")"),yu=parseFloat(Hr[Rl][1]),bu=parseFloat(Hr[Rl][2]);break;case 0:vu=(So?"<":"(")+Hr[Rl]+(So?">":")"),yu=Nl(Un),bu=Cl(ir)}mu!==void 0&&mu[Rl]!==void 0&&(wu=mu[Rl]+` Tw
`),Rl===0?kn.push(wu+Bu(yu,bu,Eo)+vu):$u===0?kn.push(wu+vu):$u===1&&kn.push(wu+Bu(yu,bu,Eo)+vu)}kn=$u===0?kn.join(` Tj
T* `):kn.join(` Tj
`),kn+=` Tj
`;var Hl=`BT
/`;return Hl+=$r+" "+zr+` Tf
`,Hl+=Pn(zr*Jl)+` TL
`,Hl+=ur+`
`,Hl+=Lo,Hl+=kn,Zn(Hl+="ET"),rn[$r]=!0,ro};var cu=cn.__private__.clip=cn.clip=function(kn){return Zn(kn==="evenodd"?"W*":"W"),this};cn.clipEvenOdd=function(){return cu("evenodd")},cn.__private__.discardPath=cn.discardPath=function(){return Zn("n"),this};var ba=cn.__private__.isValidStyle=function(kn){var Un=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(kn)!==-1&&(Un=!0),Un};cn.__private__.setDefaultPathOperation=cn.setDefaultPathOperation=function(kn){return ba(kn)&&(fn=kn),this};var Cu=cn.__private__.getStyle=cn.getStyle=function(kn){var Un=fn;switch(kn){case"D":case"S":Un="S";break;case"F":Un="f";break;case"FD":case"DF":Un="B";break;case"f":case"f*":case"B":case"B*":Un=kn}return Un},du=cn.close=function(){return Zn("h"),this};cn.stroke=function(){return Zn("S"),this},cn.fill=function(kn){return Yl("f",kn),this},cn.fillEvenOdd=function(kn){return Yl("f*",kn),this},cn.fillStroke=function(kn){return Yl("B",kn),this},cn.fillStrokeEvenOdd=function(kn){return Yl("B*",kn),this};var Yl=function(kn,Un){_typeof(Un)==="object"?Ls(Un,kn):Zn(kn)},Ms=function(kn){kn===null||wn===bn&&kn===void 0||(kn=Cu(kn),Zn(kn))};function Gu(kn,Un,ir,dr,yr){var Ur=new q(Un||this.boundingBox,ir||this.xStep,dr||this.yStep,this.gState,yr||this.matrix);Ur.stream=this.stream;var Hr=kn+"$$"+this.cloneIndex+++"$$";return Mo(Hr,Ur),Ur}var Ls=function(kn,Un){var ir=ts[kn.key],dr=qr[ir];if(dr instanceof M)Zn("q"),Zn(Os(Un)),dr.gState&&cn.setGState(dr.gState),Zn(kn.matrix.toString()+" cm"),Zn("/"+ir+" sh"),Zn("Q");else if(dr instanceof q){var yr=new Ts(1,0,0,-1,0,Mu());kn.matrix&&(yr=yr.multiply(kn.matrix||Go),ir=Gu.call(dr,kn.key,kn.boundingBox,kn.xStep,kn.yStep,yr).id),Zn("q"),Zn("/Pattern cs"),Zn("/"+ir+" scn"),dr.gState&&cn.setGState(dr.gState),Zn(Un),Zn("Q")}},Os=function(kn){switch(kn){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Kl=cn.moveTo=function(kn,Un){return Zn(Pn(Fn(kn))+" "+Pn(In(Un))+" m"),this},Xl=cn.lineTo=function(kn,Un){return Zn(Pn(Fn(kn))+" "+Pn(In(Un))+" l"),this},Zo=cn.curveTo=function(kn,Un,ir,dr,yr,Ur){return Zn([Pn(Fn(kn)),Pn(In(Un)),Pn(Fn(ir)),Pn(In(dr)),Pn(Fn(yr)),Pn(In(Ur)),"c"].join(" ")),this};cn.__private__.line=cn.line=function(kn,Un,ir,dr,yr){if(isNaN(kn)||isNaN(Un)||isNaN(ir)||isNaN(dr)||!ba(yr))throw new Error("Invalid arguments passed to jsPDF.line");return wn===yn?this.lines([[ir-kn,dr-Un]],kn,Un,[1,1],yr||"S"):this.lines([[ir-kn,dr-Un]],kn,Un,[1,1]).stroke()},cn.__private__.lines=cn.lines=function(kn,Un,ir,dr,yr,Ur){var Hr,ys,ws,Rs,Bs,Hs,mo,Eo,ro,ko,So,Lo;if(typeof kn=="number"&&(Lo=ir,ir=Un,Un=kn,kn=Lo),dr=dr||[1,1],Ur=Ur||!1,isNaN(Un)||isNaN(ir)||!Array.isArray(kn)||!Array.isArray(dr)||!ba(yr)||typeof Ur!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Kl(Un,ir),Hr=dr[0],ys=dr[1],Rs=kn.length,ko=Un,So=ir,ws=0;ws<Rs;ws++)(Bs=kn[ws]).length===2?(ko=Bs[0]*Hr+ko,So=Bs[1]*ys+So,Xl(ko,So)):(Hs=Bs[0]*Hr+ko,mo=Bs[1]*ys+So,Eo=Bs[2]*Hr+ko,ro=Bs[3]*ys+So,ko=Bs[4]*Hr+ko,So=Bs[5]*ys+So,Zo(Hs,mo,Eo,ro,ko,So));return Ur&&du(),Ms(yr),this},cn.path=function(kn){for(var Un=0;Un<kn.length;Un++){var ir=kn[Un],dr=ir.c;switch(ir.op){case"m":Kl(dr[0],dr[1]);break;case"l":Xl(dr[0],dr[1]);break;case"c":Zo.apply(this,dr);break;case"h":du()}}return this},cn.__private__.rect=cn.rect=function(kn,Un,ir,dr,yr){if(isNaN(kn)||isNaN(Un)||isNaN(ir)||isNaN(dr)||!ba(yr))throw new Error("Invalid arguments passed to jsPDF.rect");return wn===yn&&(dr=-dr),Zn([Pn(Fn(kn)),Pn(In(Un)),Pn(Fn(ir)),Pn(Fn(dr)),"re"].join(" ")),Ms(yr),this},cn.__private__.triangle=cn.triangle=function(kn,Un,ir,dr,yr,Ur,Hr){if(isNaN(kn)||isNaN(Un)||isNaN(ir)||isNaN(dr)||isNaN(yr)||isNaN(Ur)||!ba(Hr))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ir-kn,dr-Un],[yr-ir,Ur-dr],[kn-yr,Un-Ur]],kn,Un,[1,1],Hr,!0),this},cn.__private__.roundedRect=cn.roundedRect=function(kn,Un,ir,dr,yr,Ur,Hr){if(isNaN(kn)||isNaN(Un)||isNaN(ir)||isNaN(dr)||isNaN(yr)||isNaN(Ur)||!ba(Hr))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ys=4/3*(Math.SQRT2-1);return yr=Math.min(yr,.5*ir),Ur=Math.min(Ur,.5*dr),this.lines([[ir-2*yr,0],[yr*ys,0,yr,Ur-Ur*ys,yr,Ur],[0,dr-2*Ur],[0,Ur*ys,-yr*ys,Ur,-yr,Ur],[2*yr-ir,0],[-yr*ys,0,-yr,-Ur*ys,-yr,-Ur],[0,2*Ur-dr],[0,-Ur*ys,yr*ys,-Ur,yr,-Ur]],kn+yr,Un,[1,1],Hr,!0),this},cn.__private__.ellipse=cn.ellipse=function(kn,Un,ir,dr,yr){if(isNaN(kn)||isNaN(Un)||isNaN(ir)||isNaN(dr)||!ba(yr))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ur=4/3*(Math.SQRT2-1)*ir,Hr=4/3*(Math.SQRT2-1)*dr;return Kl(kn+ir,Un),Zo(kn+ir,Un-Hr,kn+Ur,Un-dr,kn,Un-dr),Zo(kn-Ur,Un-dr,kn-ir,Un-Hr,kn-ir,Un),Zo(kn-ir,Un+Hr,kn-Ur,Un+dr,kn,Un+dr),Zo(kn+Ur,Un+dr,kn+ir,Un+Hr,kn+ir,Un),Ms(yr),this},cn.__private__.circle=cn.circle=function(kn,Un,ir,dr){if(isNaN(kn)||isNaN(Un)||isNaN(ir)||!ba(dr))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(kn,Un,ir,ir,dr)},cn.setFont=function(kn,Un,ir){return ir&&(Un=An(Un,ir)),$r=Pu(kn,Un,{disableWarning:!1}),this};var Hu=cn.__private__.getFont=cn.getFont=function(){return Jr[Pu.apply(cn,arguments)]};cn.__private__.getFontList=cn.getFontList=function(){var kn,Un,ir={};for(kn in Ss)if(Ss.hasOwnProperty(kn))for(Un in ir[kn]=[],Ss[kn])Ss[kn].hasOwnProperty(Un)&&ir[kn].push(Un);return ir},cn.addFont=function(kn,Un,ir,dr,yr){var Ur=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ur.indexOf(arguments[3])!==-1?yr=arguments[3]:arguments[3]&&Ur.indexOf(arguments[3])==-1&&(ir=An(ir,dr)),Nr.call(this,kn,Un,ir,yr=yr||"Identity-H")};var Ul,hu=St.lineWidth||.200025,Wu=cn.__private__.getLineWidth=cn.getLineWidth=function(){return hu},js=cn.__private__.setLineWidth=cn.setLineWidth=function(kn){return hu=kn,Zn(Pn(Fn(kn))+" w"),this};cn.__private__.setLineDash=E.API.setLineDash=E.API.setLineDashPattern=function(kn,Un){if(kn=kn||[],Un=Un||0,isNaN(Un)||!Array.isArray(kn))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return kn=kn.map(function(ir){return Pn(Fn(ir))}).join(" "),Un=Pn(Fn(Un)),Zn("["+kn+"] "+Un+" d"),this};var Yu=cn.__private__.getLineHeight=cn.getLineHeight=function(){return zr*Ul};cn.__private__.getLineHeight=cn.getLineHeight=function(){return zr*Ul};var Ku=cn.__private__.setLineHeightFactor=cn.setLineHeightFactor=function(kn){return typeof(kn=kn||1.15)=="number"&&(Ul=kn),this},Xu=cn.__private__.getLineHeightFactor=cn.getLineHeightFactor=function(){return Ul};Ku(St.lineHeight);var Nl=cn.__private__.getHorizontalCoordinate=function(kn){return Fn(kn)},Cl=cn.__private__.getVerticalCoordinate=function(kn){return wn===bn?kn:Yr[On].mediaBox.topRightY-Yr[On].mediaBox.bottomLeftY-Fn(kn)},Qu=cn.__private__.getHorizontalCoordinateString=cn.getHorizontalCoordinateString=function(kn){return Pn(Nl(kn))},Dn=cn.__private__.getVerticalCoordinateString=cn.getVerticalCoordinateString=function(kn){return Pn(Cl(kn))},Wn=St.strokeColor||"0 G";cn.__private__.getStrokeColor=cn.getDrawColor=function(){return Kn(Wn)},cn.__private__.setStrokeColor=cn.setDrawColor=function(kn,Un,ir,dr){return Wn=or({ch1:kn,ch2:Un,ch3:ir,ch4:dr,pdfColorType:"draw",precision:2}),Zn(Wn),this};var tr=St.fillColor||"0 g";cn.__private__.getFillColor=cn.getFillColor=function(){return Kn(tr)},cn.__private__.setFillColor=cn.setFillColor=function(kn,Un,ir,dr){return tr=or({ch1:kn,ch2:Un,ch3:ir,ch4:dr,pdfColorType:"fill",precision:2}),Zn(tr),this};var ur=St.textColor||"0 g",_r=cn.__private__.getTextColor=cn.getTextColor=function(){return Kn(ur)};cn.__private__.setTextColor=cn.setTextColor=function(kn,Un,ir,dr){return ur=or({ch1:kn,ch2:Un,ch3:ir,ch4:dr,pdfColorType:"text",precision:3}),this};var Ar=St.charSpace,rs=cn.__private__.getCharSpace=cn.getCharSpace=function(){return parseFloat(Ar||0)};cn.__private__.setCharSpace=cn.setCharSpace=function(kn){if(isNaN(kn))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ar=kn,this};var xs=0;cn.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},cn.__private__.setLineCap=cn.setLineCap=function(kn){var Un=cn.CapJoinStyles[kn];if(Un===void 0)throw new Error("Line cap style of '"+kn+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return xs=Un,Zn(Un+" J"),this};var Is=0;cn.__private__.setLineJoin=cn.setLineJoin=function(kn){var Un=cn.CapJoinStyles[kn];if(Un===void 0)throw new Error("Line join style of '"+kn+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Is=Un,Zn(Un+" j"),this},cn.__private__.setLineMiterLimit=cn.__private__.setMiterLimit=cn.setLineMiterLimit=cn.setMiterLimit=function(kn){if(kn=kn||0,isNaN(kn))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Zn(Pn(Fn(kn))+" M"),this},cn.GState=O,cn.setGState=function(kn){(kn=typeof kn=="string"?Dr[ns[kn]]:$s(null,kn)).equals(ks)||(Zn("/"+kn.id+" gs"),ks=kn)};var $s=function(kn,Un){if(!kn||!ns[kn]){var ir=!1;for(var dr in Dr)if(Dr.hasOwnProperty(dr)&&Dr[dr].equals(Un)){ir=!0;break}if(ir)Un=Dr[dr];else{var yr="GS"+(Object.keys(Dr).length+1).toString(10);Dr[yr]=Un,Un.id=yr}return kn&&(ns[kn]=Un.id),is.publish("addGState",Un),Un}};cn.addGState=function(kn,Un){return $s(kn,Un),this},cn.saveGraphicsState=function(){return Zn("q"),es.push({key:$r,size:zr,color:ur}),this},cn.restoreGraphicsState=function(){Zn("Q");var kn=es.pop();return $r=kn.key,zr=kn.size,ur=kn.color,ks=null,this},cn.setCurrentTransformationMatrix=function(kn){return Zn(kn.toString()+" cm"),this},cn.comment=function(kn){return Zn("#"+kn),this};var Ks=function(kn,Un){var ir=kn||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ir},set:function(Ur){isNaN(Ur)||(ir=parseFloat(Ur))}});var dr=Un||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return dr},set:function(Ur){isNaN(Ur)||(dr=parseFloat(Ur))}});var yr="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return yr},set:function(Ur){yr=Ur.toString()}}),this},Uo=function(kn,Un,ir,dr){Ks.call(this,kn,Un),this.type="rect";var yr=ir||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return yr},set:function(Hr){isNaN(Hr)||(yr=parseFloat(Hr))}});var Ur=dr||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ur},set:function(Hr){isNaN(Hr)||(Ur=parseFloat(Hr))}}),this},To=function(){this.page=ms,this.currentPage=On,this.pages=Rr.slice(0),this.pagesContext=Yr.slice(0),this.x=as,this.y=Ns,this.matrix=As,this.width=Qs(On),this.height=Dl(On),this.outputDestination=Cr,this.id="",this.objectNumber=-1};To.prototype.restore=function(){ms=this.page,On=this.currentPage,Yr=this.pagesContext,Rr=this.pages,as=this.x,Ns=this.y,As=this.matrix,Jo(On,this.width),Ql(On,this.height),Cr=this.outputDestination};var jr=function(kn,Un,ir,dr,yr){Co.push(new To),ms=On=0,Rr=[],as=kn,Ns=Un,As=yr,Ys([ir,dr])};for(var Ds in cn.beginFormObject=function(kn,Un,ir,dr,yr){return jr(kn,Un,ir,dr,yr),this},cn.endFormObject=function(kn){return function(Un){if(ho[Un])Co.pop().restore();else{var ir=new To,dr="Xo"+(Object.keys(so).length+1).toString(10);ir.id=dr,ho[Un]=dr,so[dr]=ir,is.publish("addFormObject",ir),Co.pop().restore()}}(kn),this},cn.doFormObject=function(kn,Un){var ir=so[ho[kn]];return Zn("q"),Zn(Un.toString()+" cm"),Zn("/"+ir.id+" Do"),Zn("Q"),this},cn.getFormObject=function(kn){var Un=so[ho[kn]];return{x:Un.x,y:Un.y,width:Un.width,height:Un.height,matrix:Un.matrix}},cn.save=function(kn,Un){return kn=kn||"generated.pdf",(Un=Un||{}).returnPromise=Un.returnPromise||!1,Un.returnPromise===!1?(l(uu(Al()),kn),typeof l.unload=="function"&&i.setTimeout&&setTimeout(l.unload,911),this):new Promise(function(ir,dr){try{var yr=l(uu(Al()),kn);typeof l.unload=="function"&&i.setTimeout&&setTimeout(l.unload,911),ir(yr)}catch(Ur){dr(Ur.message)}})},E.API)E.API.hasOwnProperty(Ds)&&(Ds==="events"&&E.API.events.length?function(kn,Un){var ir,dr,yr;for(yr=Un.length-1;yr!==-1;yr--)ir=Un[yr][0],dr=Un[yr][1],kn.subscribe.apply(kn,[ir].concat(typeof dr=="function"?[dr]:dr))}(is,E.API.events):cn[Ds]=E.API[Ds]);function Qs(kn){return Yr[kn].mediaBox.topRightX-Yr[kn].mediaBox.bottomLeftX}function Jo(kn,Un){Yr[kn].mediaBox.topRightX=Un+Yr[kn].mediaBox.bottomLeftX}function Dl(kn){return Yr[kn].mediaBox.topRightY-Yr[kn].mediaBox.bottomLeftY}function Ql(kn,Un){Yr[kn].mediaBox.topRightY=Un+Yr[kn].mediaBox.bottomLeftY}var Zl=cn.getPageWidth=function(kn){return Qs(kn=kn||On)/ss},gp=cn.setPageWidth=function(kn,Un){Jo(kn,Un*ss)},Mu=cn.getPageHeight=function(kn){return Dl(kn=kn||On)/ss},xp=cn.setPageHeight=function(kn,Un){Ql(kn,Un*ss)};return cn.internal={pdfEscape:Ps,getStyle:Cu,getFont:Hu,getFontSize:wr,getCharSpace:rs,getTextColor:_r,getLineHeight:Yu,getLineHeightFactor:Xu,getLineWidth:Wu,write:Xr,getHorizontalCoordinate:Nl,getVerticalCoordinate:Cl,getCoordinateString:Qu,getVerticalCoordinateString:Dn,collections:{},newObject:eo,newAdditionalObject:xa,newObjectDeferred:lo,newObjectDeferredBegin:fo,getFilters:hr,putStream:mr,events:is,scaleFactor:ss,pageSize:{getWidth:function(){return Zl(On)},setWidth:function(kn){gp(On,kn)},getHeight:function(){return Mu(On)},setHeight:function(kn){xp(On,kn)}},encryptionOptions:hn,encryption:go,getEncryptor:function(kn){return hn!==null?go.encryptor(kn,0):function(Un){return Un}},output:Wl,getNumberOfPages:lu,get pages(){return Rr},out:Zn,f2:Nn,f3:Mn,getPageInfo:Pl,getPageInfoByObjId:ju,getCurrentPageInfo:qu,getPDFVersion:mn,Point:Ks,Rectangle:Uo,Matrix:Ts,hasHotfix:zo},Object.defineProperty(cn.internal.pageSize,"width",{get:function(){return Zl(On)},set:function(kn){gp(On,kn)},enumerable:!0,configurable:!0}),Object.defineProperty(cn.internal.pageSize,"height",{get:function(){return Mu(On)},set:function(kn){xp(On,kn)},enumerable:!0,configurable:!0}),(function(kn){for(var Un=0,ir=us.length;Un<ir;Un++){var dr=Nr.call(this,kn[Un][0],kn[Un][1],kn[Un][2],us[Un][3],!0);an===!1&&(rn[dr]=!0);var yr=kn[Un][0].split("-");co({id:dr,fontName:yr[0],fontStyle:yr[1]||""})}is.publish("addFonts",{fonts:Jr,dictionary:Ss})}).call(cn,us),$r="F1",Io(nn,en),is.publish("initialized"),cn}I.prototype.lsbFirstWord=function(St){return String.fromCharCode(255&St,St>>8&255,St>>16&255,St>>24&255)},I.prototype.toHexString=function(St){return St.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},I.prototype.hexToBytes=function(St){for(var e=[],en=0;en<St.length;en+=2)e.push(String.fromCharCode(parseInt(St.substr(en,2),16)));return e.join("")},I.prototype.processOwnerPassword=function(St,e){return k(S(e).substr(0,5),St)},I.prototype.encryptor=function(St,e){var en=S(this.encryptionKey+String.fromCharCode(255&St,St>>8&255,St>>16&255,255&e,e>>8&255)).substr(0,10);return function(tn){return k(en,tn)}},O.prototype.equals=function(St){var e,en="id,objectNumber,equals";if(!St||_typeof(St)!==_typeof(this))return!1;var tn=0;for(e in this)if(!(en.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!St.hasOwnProperty(e)||this[e]!==St[e])return!1;tn++}for(e in St)St.hasOwnProperty(e)&&en.indexOf(e)<0&&tn--;return tn===0},E.API={events:[]},E.version="3.0.4";var R=E.API,D=1,T=function(St){return St.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},z=function(St){return St.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},U=function(St){return St.toFixed(2)},H=function(St){return St.toFixed(5)};R.__acroform__={};var W=function(St,e){St.prototype=Object.create(e.prototype),St.prototype.constructor=St},V=function(St){return St*D},G=function(St){var e=new ct,en=xt.internal.getHeight(St)||0,tn=xt.internal.getWidth(St)||0;return e.BBox=[0,0,Number(U(tn)),Number(U(en))],e},Y=R.__acroform__.setBit=function(St,e){if(St=St||0,e=e||0,isNaN(St)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return St|1<<e},J=R.__acroform__.clearBit=function(St,e){if(St=St||0,e=e||0,isNaN(St)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return St&~(1<<e)},X=R.__acroform__.getBit=function(St,e){if(isNaN(St)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return St&1<<e?1:0},K=R.__acroform__.getBitForPdf=function(St,e){if(isNaN(St)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return X(St,e-1)},Z=R.__acroform__.setBitForPdf=function(St,e){if(isNaN(St)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Y(St,e-1)},$=R.__acroform__.clearBitForPdf=function(St,e){if(isNaN(St)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return J(St,e-1)},Q=R.__acroform__.calculateCoordinates=function(St,e){var en=e.internal.getHorizontalCoordinate,tn=e.internal.getVerticalCoordinate,nn=St[0],sn=St[1],on=St[2],un=St[3],dn={};return dn.lowerLeft_X=en(nn)||0,dn.lowerLeft_Y=tn(sn+un)||0,dn.upperRight_X=en(nn+on)||0,dn.upperRight_Y=tn(sn)||0,[Number(U(dn.lowerLeft_X)),Number(U(dn.lowerLeft_Y)),Number(U(dn.upperRight_X)),Number(U(dn.upperRight_Y))]},tt=function(St){if(St.appearanceStreamContent)return St.appearanceStreamContent;if(St.V||St.DV){var e=[],en=St._V||St.DV,tn=et(St,en),nn=St.scope.internal.getFont(St.fontName,St.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(St.scope.__private__.encodeColorString(St.color)),e.push("/"+nn+" "+U(tn.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(tn.text),e.push("ET"),e.push("Q"),e.push("EMC");var sn=G(St);return sn.scope=St.scope,sn.stream=e.join(`
`),sn}},et=function(St,e){var en=St.fontSize===0?St.maxFontSize:St.fontSize,tn={text:"",fontSize:""},nn=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");nn=St.multiline?nn.map(function(Nn){return Nn.split(`
`)}):nn.map(function(Nn){return[Nn]});var sn=en,on=xt.internal.getHeight(St)||0;on=on<0?-on:on;var un=xt.internal.getWidth(St)||0;un=un<0?-un:un;var dn=function(Nn,Mn,Fn){if(Nn+1<nn.length){var In=Mn+" "+nn[Nn+1][0];return nt(In,St,Fn).width<=un-4}return!1};sn++;e:for(;sn>0;){e="",sn--;var fn,hn,an=nt("3",St,sn).height,rn=St.multiline?on-sn:(on-an)/2,cn=rn+=2,pn=0,mn=0,xn=0;if(sn<=0){e=`(...) Tj
`,e+="% Width of Text: "+nt(e,St,sn=12).width+", FieldWidth:"+un+`
`;break}for(var gn="",yn=0,bn=0;bn<nn.length;bn++)if(nn.hasOwnProperty(bn)){var wn=!1;if(nn[bn].length!==1&&xn!==nn[bn].length-1){if((an+2)*(yn+2)+2>on)continue e;gn+=nn[bn][xn],wn=!0,mn=bn,bn--}else{gn=(gn+=nn[bn][xn]+" ").substr(gn.length-1)==" "?gn.substr(0,gn.length-1):gn;var _n=parseInt(bn),Tn=dn(_n,gn,sn),An=bn>=nn.length-1;if(Tn&&!An){gn+=" ",xn=0;continue}if(Tn||An){if(An)mn=_n;else if(St.multiline&&(an+2)*(yn+2)+2>on)continue e}else{if(!St.multiline||(an+2)*(yn+2)+2>on)continue e;mn=_n}}for(var Pn="",Sn=pn;Sn<=mn;Sn++){var Cn=nn[Sn];if(St.multiline){if(Sn===mn){Pn+=Cn[xn]+" ",xn=(xn+1)%Cn.length;continue}if(Sn===pn){Pn+=Cn[Cn.length-1]+" ";continue}}Pn+=Cn[0]+" "}switch(Pn=Pn.substr(Pn.length-1)==" "?Pn.substr(0,Pn.length-1):Pn,hn=nt(Pn,St,sn).width,St.textAlign){case"right":fn=un-hn-2;break;case"center":fn=(un-hn)/2;break;default:fn=2}e+=U(fn)+" "+U(cn)+` Td
`,e+="("+T(Pn)+`) Tj
`,e+=-U(fn)+` 0 Td
`,cn=-(sn+2),hn=0,pn=wn?mn:mn+1,yn++,gn=""}break}return tn.text=e,tn.fontSize=sn,tn},nt=function(St,e,en){var tn=e.scope.internal.getFont(e.fontName,e.fontStyle),nn=e.scope.getStringUnitWidth(St,{font:tn,fontSize:parseFloat(en),charSpace:0})*parseFloat(en);return{height:e.scope.getStringUnitWidth("3",{font:tn,fontSize:parseFloat(en),charSpace:0})*parseFloat(en)*1.5,width:nn}},rt={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},it=function(St,e){var en={type:"reference",object:St};e.internal.getPageInfo(St.page).pageContext.annotations.find(function(tn){return tn.type===en.type&&tn.object===en.object})===void 0&&e.internal.getPageInfo(St.page).pageContext.annotations.push(en)},at=function(St,e){if(e.scope=St,St.internal!==void 0&&(St.internal.acroformPlugin===void 0||St.internal.acroformPlugin.isInitialized===!1)){if(ht.FieldNum=0,St.internal.acroformPlugin=JSON.parse(JSON.stringify(rt)),St.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");D=St.internal.scaleFactor,St.internal.acroformPlugin.acroFormDictionaryRoot=new lt,St.internal.acroformPlugin.acroFormDictionaryRoot.scope=St,St.internal.acroformPlugin.acroFormDictionaryRoot._eventID=St.internal.events.subscribe("postPutResources",function(){(function(en){en.internal.events.unsubscribe(en.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete en.internal.acroformPlugin.acroFormDictionaryRoot._eventID,en.internal.acroformPlugin.printedOut=!0})(St)}),St.internal.events.subscribe("buildDocument",function(){(function(en){en.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var tn=en.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var nn in tn)if(tn.hasOwnProperty(nn)){var sn=tn[nn];sn.objId=void 0,sn.hasAnnotation&&it(sn,en)}})(St)}),St.internal.events.subscribe("putCatalog",function(){(function(en){if(en.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");en.internal.write("/AcroForm "+en.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(St)}),St.internal.events.subscribe("postPutPages",function(en){(function(tn,nn){var sn=!tn;for(var on in tn||(nn.internal.newObjectDeferredBegin(nn.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),nn.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),tn=tn||nn.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(tn.hasOwnProperty(on)){var un=tn[on],dn=[],fn=un.Rect;if(un.Rect&&(un.Rect=Q(un.Rect,nn)),nn.internal.newObjectDeferredBegin(un.objId,!0),un.DA=xt.createDefaultAppearanceStream(un),_typeof(un)==="object"&&typeof un.getKeyValueListForStream=="function"&&(dn=un.getKeyValueListForStream()),un.Rect=fn,un.hasAppearanceStream&&!un.appearanceStreamContent){var hn=tt(un);dn.push({key:"AP",value:"<</N "+hn+">>"}),nn.internal.acroformPlugin.xForms.push(hn)}if(un.appearanceStreamContent){var an="";for(var rn in un.appearanceStreamContent)if(un.appearanceStreamContent.hasOwnProperty(rn)){var cn=un.appearanceStreamContent[rn];if(an+="/"+rn+" ",an+="<<",Object.keys(cn).length>=1||Array.isArray(cn)){for(var on in cn)if(cn.hasOwnProperty(on)){var pn=cn[on];typeof pn=="function"&&(pn=pn.call(nn,un)),an+="/"+on+" "+pn+" ",nn.internal.acroformPlugin.xForms.indexOf(pn)>=0||nn.internal.acroformPlugin.xForms.push(pn)}}else typeof(pn=cn)=="function"&&(pn=pn.call(nn,un)),an+="/"+on+" "+pn,nn.internal.acroformPlugin.xForms.indexOf(pn)>=0||nn.internal.acroformPlugin.xForms.push(pn);an+=">>"}dn.push({key:"AP",value:`<<
`+an+">>"})}nn.internal.putStream({additionalKeyValues:dn,objectId:un.objId}),nn.internal.out("endobj")}sn&&function(mn,xn){for(var gn in mn)if(mn.hasOwnProperty(gn)){var yn=gn,bn=mn[gn];xn.internal.newObjectDeferredBegin(bn.objId,!0),_typeof(bn)==="object"&&typeof bn.putStream=="function"&&bn.putStream(),delete mn[yn]}}(nn.internal.acroformPlugin.xForms,nn)})(en,St)}),St.internal.acroformPlugin.isInitialized=!0}},ot=R.__acroform__.arrayToPdfArray=function(St,e,en){var tn=function(on){return on};if(Array.isArray(St)){for(var nn="[",sn=0;sn<St.length;sn++)switch(sn!==0&&(nn+=" "),_typeof(St[sn])){case"boolean":case"number":case"object":nn+=St[sn].toString();break;case"string":St[sn].substr(0,1)!=="/"?(e!==void 0&&en&&(tn=en.internal.getEncryptor(e)),nn+="("+T(tn(St[sn].toString()))+")"):nn+=St[sn].toString()}return nn+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},st=function(St,e,en){var tn=function(nn){return nn};return e!==void 0&&en&&(tn=en.internal.getEncryptor(e)),(St=St||"").toString(),"("+T(tn(St))+")"},ut=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(St){this._objId=St}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ut.prototype.toString=function(){return this.objId+" 0 R"},ut.prototype.putStream=function(){var St=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:St,objectId:this.objId}),this.scope.internal.out("endobj")},ut.prototype.getKeyValueListForStream=function(){var St=[],e=Object.getOwnPropertyNames(this).filter(function(sn){return sn!="content"&&sn!="appearanceStreamContent"&&sn!="scope"&&sn!="objId"&&sn.substring(0,1)!="_"});for(var en in e)if(Object.getOwnPropertyDescriptor(this,e[en]).configurable===!1){var tn=e[en],nn=this[tn];nn&&(Array.isArray(nn)?St.push({key:tn,value:ot(nn,this.objId,this.scope)}):nn instanceof ut?(nn.scope=this.scope,St.push({key:tn,value:nn.objId+" 0 R"})):typeof nn!="function"&&St.push({key:tn,value:nn}))}return St};var ct=function(){ut.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var St,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(en){e=en}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(en){St=en.trim()},get:function(){return St||null}})};W(ct,ut);var lt=function(){ut.call(this);var St,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(St){var en=function(tn){return tn};return this.scope&&(en=this.scope.internal.getEncryptor(this.objId)),"("+T(en(St))+")"}},set:function(en){St=en}})};W(lt,ut);var ht=function St(){ut.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(gn){if(isNaN(gn))throw new Error('Invalid value "'+gn+'" for attribute F supplied.');e=gn}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!K(e,3)},set:function(gn){gn?this.F=Z(e,3):this.F=$(e,3)}});var en=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return en},set:function(gn){if(isNaN(gn))throw new Error('Invalid value "'+gn+'" for attribute Ff supplied.');en=gn}});var tn=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(tn.length!==0)return tn},set:function(gn){tn=gn!==void 0?gn:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!tn||isNaN(tn[0])?0:tn[0]},set:function(gn){tn[0]=gn}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!tn||isNaN(tn[1])?0:tn[1]},set:function(gn){tn[1]=gn}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!tn||isNaN(tn[2])?0:tn[2]},set:function(gn){tn[2]=gn}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!tn||isNaN(tn[3])?0:tn[3]},set:function(gn){tn[3]=gn}});var nn="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return nn},set:function(gn){switch(gn){case"/Btn":case"/Tx":case"/Ch":case"/Sig":nn=gn;break;default:throw new Error('Invalid value "'+gn+'" for attribute FT supplied.')}}});var sn=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!sn||sn.length<1){if(this instanceof yt)return;sn="FieldObject"+St.FieldNum++}var gn=function(yn){return yn};return this.scope&&(gn=this.scope.internal.getEncryptor(this.objId)),"("+T(gn(sn))+")"},set:function(gn){sn=gn.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return sn},set:function(gn){sn=gn}});var on="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return on},set:function(gn){on=gn}});var un="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return un},set:function(gn){un=gn}});var dn=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return dn},set:function(gn){dn=gn}});var fn=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return fn===void 0?50/D:fn},set:function(gn){fn=gn}});var hn="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return hn},set:function(gn){hn=gn}});var an="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!an||this instanceof yt||this instanceof Nt))return st(an,this.objId,this.scope)},set:function(gn){gn=gn.toString(),an=gn}});var rn=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(rn)return this instanceof mt==0?st(rn,this.objId,this.scope):rn},set:function(gn){gn=gn.toString(),rn=this instanceof mt==0?gn.substr(0,1)==="("?z(gn.substr(1,gn.length-2)):z(gn):gn}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt==1?z(rn.substr(1,rn.length-1)):rn},set:function(gn){gn=gn.toString(),rn=this instanceof mt==1?"/"+gn:gn}});var cn=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(cn)return cn},set:function(gn){this.V=gn}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(cn)return this instanceof mt==0?st(cn,this.objId,this.scope):cn},set:function(gn){gn=gn.toString(),cn=this instanceof mt==0?gn.substr(0,1)==="("?z(gn.substr(1,gn.length-2)):z(gn):gn}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt==1?z(cn.substr(1,cn.length-1)):cn},set:function(gn){gn=gn.toString(),cn=this instanceof mt==1?"/"+gn:gn}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var pn,mn=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return mn},set:function(gn){gn=!!gn,mn=gn}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(pn)return pn},set:function(gn){pn=gn}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,1)},set:function(gn){gn?this.Ff=Z(this.Ff,1):this.Ff=$(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,2)},set:function(gn){gn?this.Ff=Z(this.Ff,2):this.Ff=$(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,3)},set:function(gn){gn?this.Ff=Z(this.Ff,3):this.Ff=$(this.Ff,3)}});var xn=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(xn!==null)return xn},set:function(gn){if([0,1,2].indexOf(gn)===-1)throw new Error('Invalid value "'+gn+'" for attribute Q supplied.');xn=gn}}),Object.defineProperty(this,"textAlign",{get:function(){var gn;switch(xn){case 0:default:gn="left";break;case 1:gn="center";break;case 2:gn="right"}return gn},configurable:!0,enumerable:!0,set:function(gn){switch(gn){case"right":case 2:xn=2;break;case"center":case 1:xn=1;break;default:xn=0}}})};W(ht,ut);var ft=function(){ht.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var St=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return St},set:function(en){St=en}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return St},set:function(en){St=en}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ot(e,this.objId,this.scope)},set:function(en){var tn,nn;nn=[],typeof(tn=en)=="string"&&(nn=function(sn,on,un){un||(un=1);for(var dn,fn=[];dn=on.exec(sn);)fn.push(dn[un]);return fn}(tn,/\((.*?)\)/g)),e=nn}}),this.getOptions=function(){return e},this.setOptions=function(en){e=en,this.sort&&e.sort()},this.addOption=function(en){en=(en=en||"").toString(),e.push(en),this.sort&&e.sort()},this.removeOption=function(en,tn){for(tn=tn||!1,en=(en=en||"").toString();e.indexOf(en)!==-1&&(e.splice(e.indexOf(en),1),tn!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,18)},set:function(en){en?this.Ff=Z(this.Ff,18):this.Ff=$(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,19)},set:function(en){this.combo===!0&&(en?this.Ff=Z(this.Ff,19):this.Ff=$(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,20)},set:function(en){en?(this.Ff=Z(this.Ff,20),e.sort()):this.Ff=$(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,22)},set:function(en){en?this.Ff=Z(this.Ff,22):this.Ff=$(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,23)},set:function(en){en?this.Ff=Z(this.Ff,23):this.Ff=$(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,27)},set:function(en){en?this.Ff=Z(this.Ff,27):this.Ff=$(this.Ff,27)}}),this.hasAppearanceStream=!1};W(ft,ht);var dt=function(){ft.call(this),this.fontName="helvetica",this.combo=!1};W(dt,ft);var pt=function(){dt.call(this),this.combo=!0};W(pt,dt);var gt=function(){pt.call(this),this.edit=!0};W(gt,pt);var mt=function(){ht.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,15)},set:function(en){en?this.Ff=Z(this.Ff,15):this.Ff=$(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,16)},set:function(en){en?this.Ff=Z(this.Ff,16):this.Ff=$(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,17)},set:function(en){en?this.Ff=Z(this.Ff,17):this.Ff=$(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,26)},set:function(en){en?this.Ff=Z(this.Ff,26):this.Ff=$(this.Ff,26)}});var St,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var en=function(sn){return sn};if(this.scope&&(en=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var tn,nn=[];for(tn in nn.push("<<"),e)nn.push("/"+tn+" ("+T(en(e[tn]))+")");return nn.push(">>"),nn.join(`
`)}},set:function(en){_typeof(en)==="object"&&(e=en)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(en){typeof en=="string"&&(e.CA=en)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return St},set:function(en){St=en}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return St.substr(1,St.length-1)},set:function(en){St="/"+en}})};W(mt,ht);var vt=function(){mt.call(this),this.pushButton=!0};W(vt,mt);var bt=function(){mt.call(this),this.radio=!0,this.pushButton=!1;var St=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return St},set:function(e){St=e!==void 0?e:[]}})};W(bt,mt);var yt=function(){var St,e;ht.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return St},set:function(nn){St=nn}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(nn){e=nn}});var en,tn={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var nn=function(un){return un};this.scope&&(nn=this.scope.internal.getEncryptor(this.objId));var sn,on=[];for(sn in on.push("<<"),tn)on.push("/"+sn+" ("+T(nn(tn[sn]))+")");return on.push(">>"),on.join(`
`)},set:function(nn){_typeof(nn)==="object"&&(tn=nn)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return tn.CA||""},set:function(nn){typeof nn=="string"&&(tn.CA=nn)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return en},set:function(nn){en=nn}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return en.substr(1,en.length-1)},set:function(nn){en="/"+nn}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=xt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};W(yt,ht),bt.prototype.setAppearance=function(St){if(!("createAppearanceStream"in St)||!("getCA"in St))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var en=this.Kids[e];en.appearanceStreamContent=St.createAppearanceStream(en.optionName),en.caption=St.getCA()}},bt.prototype.createOption=function(St){var e=new yt;return e.Parent=this,e.optionName=St,this.Kids.push(e),At.call(this.scope,e),e};var wt=function(){mt.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=xt.CheckBox.createAppearanceStream()};W(wt,mt);var Nt=function(){ht.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,13)},set:function(e){e?this.Ff=Z(this.Ff,13):this.Ff=$(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,21)},set:function(e){e?this.Ff=Z(this.Ff,21):this.Ff=$(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,23)},set:function(e){e?this.Ff=Z(this.Ff,23):this.Ff=$(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,24)},set:function(e){e?this.Ff=Z(this.Ff,24):this.Ff=$(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,25)},set:function(e){e?this.Ff=Z(this.Ff,25):this.Ff=$(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,26)},set:function(e){e?this.Ff=Z(this.Ff,26):this.Ff=$(this.Ff,26)}});var St=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return St},set:function(e){St=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return St},set:function(e){Number.isInteger(e)&&(St=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};W(Nt,ht);var Lt=function(){Nt.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,14)},set:function(St){St?this.Ff=Z(this.Ff,14):this.Ff=$(this.Ff,14)}}),this.password=!0};W(Lt,Nt);var xt={CheckBox:{createAppearanceStream:function(){return{N:{On:xt.CheckBox.YesNormal},D:{On:xt.CheckBox.YesPushDown,Off:xt.CheckBox.OffPushDown}}},YesPushDown:function(St){var e=G(St);e.scope=St.scope;var en=[],tn=St.scope.internal.getFont(St.fontName,St.fontStyle).id,nn=St.scope.__private__.encodeColorString(St.color),sn=et(St,St.caption);return en.push("0.749023 g"),en.push("0 0 "+U(xt.internal.getWidth(St))+" "+U(xt.internal.getHeight(St))+" re"),en.push("f"),en.push("BMC"),en.push("q"),en.push("0 0 1 rg"),en.push("/"+tn+" "+U(sn.fontSize)+" Tf "+nn),en.push("BT"),en.push(sn.text),en.push("ET"),en.push("Q"),en.push("EMC"),e.stream=en.join(`
`),e},YesNormal:function(St){var e=G(St);e.scope=St.scope;var en=St.scope.internal.getFont(St.fontName,St.fontStyle).id,tn=St.scope.__private__.encodeColorString(St.color),nn=[],sn=xt.internal.getHeight(St),on=xt.internal.getWidth(St),un=et(St,St.caption);return nn.push("1 g"),nn.push("0 0 "+U(on)+" "+U(sn)+" re"),nn.push("f"),nn.push("q"),nn.push("0 0 1 rg"),nn.push("0 0 "+U(on-1)+" "+U(sn-1)+" re"),nn.push("W"),nn.push("n"),nn.push("0 g"),nn.push("BT"),nn.push("/"+en+" "+U(un.fontSize)+" Tf "+tn),nn.push(un.text),nn.push("ET"),nn.push("Q"),e.stream=nn.join(`
`),e},OffPushDown:function(St){var e=G(St);e.scope=St.scope;var en=[];return en.push("0.749023 g"),en.push("0 0 "+U(xt.internal.getWidth(St))+" "+U(xt.internal.getHeight(St))+" re"),en.push("f"),e.stream=en.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(St){var e={D:{Off:xt.RadioButton.Circle.OffPushDown},N:{}};return e.N[St]=xt.RadioButton.Circle.YesNormal,e.D[St]=xt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(St){var e=G(St);e.scope=St.scope;var en=[],tn=xt.internal.getWidth(St)<=xt.internal.getHeight(St)?xt.internal.getWidth(St)/4:xt.internal.getHeight(St)/4;tn=Number((.9*tn).toFixed(5));var nn=xt.internal.Bezier_C,sn=Number((tn*nn).toFixed(5));return en.push("q"),en.push("1 0 0 1 "+H(xt.internal.getWidth(St)/2)+" "+H(xt.internal.getHeight(St)/2)+" cm"),en.push(tn+" 0 m"),en.push(tn+" "+sn+" "+sn+" "+tn+" 0 "+tn+" c"),en.push("-"+sn+" "+tn+" -"+tn+" "+sn+" -"+tn+" 0 c"),en.push("-"+tn+" -"+sn+" -"+sn+" -"+tn+" 0 -"+tn+" c"),en.push(sn+" -"+tn+" "+tn+" -"+sn+" "+tn+" 0 c"),en.push("f"),en.push("Q"),e.stream=en.join(`
`),e},YesPushDown:function(St){var e=G(St);e.scope=St.scope;var en=[],tn=xt.internal.getWidth(St)<=xt.internal.getHeight(St)?xt.internal.getWidth(St)/4:xt.internal.getHeight(St)/4;tn=Number((.9*tn).toFixed(5));var nn=Number((2*tn).toFixed(5)),sn=Number((nn*xt.internal.Bezier_C).toFixed(5)),on=Number((tn*xt.internal.Bezier_C).toFixed(5));return en.push("0.749023 g"),en.push("q"),en.push("1 0 0 1 "+H(xt.internal.getWidth(St)/2)+" "+H(xt.internal.getHeight(St)/2)+" cm"),en.push(nn+" 0 m"),en.push(nn+" "+sn+" "+sn+" "+nn+" 0 "+nn+" c"),en.push("-"+sn+" "+nn+" -"+nn+" "+sn+" -"+nn+" 0 c"),en.push("-"+nn+" -"+sn+" -"+sn+" -"+nn+" 0 -"+nn+" c"),en.push(sn+" -"+nn+" "+nn+" -"+sn+" "+nn+" 0 c"),en.push("f"),en.push("Q"),en.push("0 g"),en.push("q"),en.push("1 0 0 1 "+H(xt.internal.getWidth(St)/2)+" "+H(xt.internal.getHeight(St)/2)+" cm"),en.push(tn+" 0 m"),en.push(tn+" "+on+" "+on+" "+tn+" 0 "+tn+" c"),en.push("-"+on+" "+tn+" -"+tn+" "+on+" -"+tn+" 0 c"),en.push("-"+tn+" -"+on+" -"+on+" -"+tn+" 0 -"+tn+" c"),en.push(on+" -"+tn+" "+tn+" -"+on+" "+tn+" 0 c"),en.push("f"),en.push("Q"),e.stream=en.join(`
`),e},OffPushDown:function(St){var e=G(St);e.scope=St.scope;var en=[],tn=xt.internal.getWidth(St)<=xt.internal.getHeight(St)?xt.internal.getWidth(St)/4:xt.internal.getHeight(St)/4;tn=Number((.9*tn).toFixed(5));var nn=Number((2*tn).toFixed(5)),sn=Number((nn*xt.internal.Bezier_C).toFixed(5));return en.push("0.749023 g"),en.push("q"),en.push("1 0 0 1 "+H(xt.internal.getWidth(St)/2)+" "+H(xt.internal.getHeight(St)/2)+" cm"),en.push(nn+" 0 m"),en.push(nn+" "+sn+" "+sn+" "+nn+" 0 "+nn+" c"),en.push("-"+sn+" "+nn+" -"+nn+" "+sn+" -"+nn+" 0 c"),en.push("-"+nn+" -"+sn+" -"+sn+" -"+nn+" 0 -"+nn+" c"),en.push(sn+" -"+nn+" "+nn+" -"+sn+" "+nn+" 0 c"),en.push("f"),en.push("Q"),e.stream=en.join(`
`),e}},Cross:{createAppearanceStream:function(St){var e={D:{Off:xt.RadioButton.Cross.OffPushDown},N:{}};return e.N[St]=xt.RadioButton.Cross.YesNormal,e.D[St]=xt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(St){var e=G(St);e.scope=St.scope;var en=[],tn=xt.internal.calculateCross(St);return en.push("q"),en.push("1 1 "+U(xt.internal.getWidth(St)-2)+" "+U(xt.internal.getHeight(St)-2)+" re"),en.push("W"),en.push("n"),en.push(U(tn.x1.x)+" "+U(tn.x1.y)+" m"),en.push(U(tn.x2.x)+" "+U(tn.x2.y)+" l"),en.push(U(tn.x4.x)+" "+U(tn.x4.y)+" m"),en.push(U(tn.x3.x)+" "+U(tn.x3.y)+" l"),en.push("s"),en.push("Q"),e.stream=en.join(`
`),e},YesPushDown:function(St){var e=G(St);e.scope=St.scope;var en=xt.internal.calculateCross(St),tn=[];return tn.push("0.749023 g"),tn.push("0 0 "+U(xt.internal.getWidth(St))+" "+U(xt.internal.getHeight(St))+" re"),tn.push("f"),tn.push("q"),tn.push("1 1 "+U(xt.internal.getWidth(St)-2)+" "+U(xt.internal.getHeight(St)-2)+" re"),tn.push("W"),tn.push("n"),tn.push(U(en.x1.x)+" "+U(en.x1.y)+" m"),tn.push(U(en.x2.x)+" "+U(en.x2.y)+" l"),tn.push(U(en.x4.x)+" "+U(en.x4.y)+" m"),tn.push(U(en.x3.x)+" "+U(en.x3.y)+" l"),tn.push("s"),tn.push("Q"),e.stream=tn.join(`
`),e},OffPushDown:function(St){var e=G(St);e.scope=St.scope;var en=[];return en.push("0.749023 g"),en.push("0 0 "+U(xt.internal.getWidth(St))+" "+U(xt.internal.getHeight(St))+" re"),en.push("f"),e.stream=en.join(`
`),e}}},createDefaultAppearanceStream:function(St){var e=St.scope.internal.getFont(St.fontName,St.fontStyle).id,en=St.scope.__private__.encodeColorString(St.color);return"/"+e+" "+St.fontSize+" Tf "+en}};xt.internal={Bezier_C:.551915024494,calculateCross:function(St){var e=xt.internal.getWidth(St),en=xt.internal.getHeight(St),tn=Math.min(e,en);return{x1:{x:(e-tn)/2,y:(en-tn)/2+tn},x2:{x:(e-tn)/2+tn,y:(en-tn)/2},x3:{x:(e-tn)/2,y:(en-tn)/2},x4:{x:(e-tn)/2+tn,y:(en-tn)/2+tn}}}},xt.internal.getWidth=function(St){var e=0;return _typeof(St)==="object"&&(e=V(St.Rect[2])),e},xt.internal.getHeight=function(St){var e=0;return _typeof(St)==="object"&&(e=V(St.Rect[3])),e};var At=R.addField=function(St){if(at(this,St),!(St instanceof ht))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=St).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),St.page=St.scope.internal.getCurrentPageInfo().pageNumber,this};R.AcroFormChoiceField=ft,R.AcroFormListBox=dt,R.AcroFormComboBox=pt,R.AcroFormEditBox=gt,R.AcroFormButton=mt,R.AcroFormPushButton=vt,R.AcroFormRadioButton=bt,R.AcroFormCheckBox=wt,R.AcroFormTextField=Nt,R.AcroFormPasswordField=Lt,R.AcroFormAppearance=xt,R.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:xt},E.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:xt};E.AcroForm;function _t(St){return St.reduce(function(e,en,tn){return e[en]=tn,e},{})}(function(St){var e="addImage_";St.__addimage__={};var en="UNKNOWN",tn={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},nn=St.__addimage__.getImageFileTypeByImageData=function(Nn,Mn){var Fn,In,Bn,Ln,qn,Yn=en;if((Mn=Mn||en)==="RGBA"||Nn.data!==void 0&&Nn.data instanceof Uint8ClampedArray&&"height"in Nn&&"width"in Nn)return"RGBA";if(Tn(Nn))for(qn in tn)for(Bn=tn[qn],Fn=0;Fn<Bn.length;Fn+=1){for(Ln=!0,In=0;In<Bn[Fn].length;In+=1)if(Bn[Fn][In]!==void 0&&Bn[Fn][In]!==Nn[In]){Ln=!1;break}if(Ln===!0){Yn=qn;break}}else for(qn in tn)for(Bn=tn[qn],Fn=0;Fn<Bn.length;Fn+=1){for(Ln=!0,In=0;In<Bn[Fn].length;In+=1)if(Bn[Fn][In]!==void 0&&Bn[Fn][In]!==Nn.charCodeAt(In)){Ln=!1;break}if(Ln===!0){Yn=qn;break}}return Yn===en&&Mn!==en&&(Yn=Mn),Yn},sn=function Nn(Mn){for(var Fn=this.internal.write,In=this.internal.putStream,Bn=(0,this.internal.getFilters)();Bn.indexOf("FlateEncode")!==-1;)Bn.splice(Bn.indexOf("FlateEncode"),1);Mn.objectId=this.internal.newObject();var Ln=[];if(Ln.push({key:"Type",value:"/XObject"}),Ln.push({key:"Subtype",value:"/Image"}),Ln.push({key:"Width",value:Mn.width}),Ln.push({key:"Height",value:Mn.height}),Mn.colorSpace===gn.INDEXED?Ln.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(Mn.palette.length/3-1)+" "+("sMask"in Mn&&Mn.sMask!==void 0?Mn.objectId+2:Mn.objectId+1)+" 0 R]"}):(Ln.push({key:"ColorSpace",value:"/"+Mn.colorSpace}),Mn.colorSpace===gn.DEVICE_CMYK&&Ln.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Ln.push({key:"BitsPerComponent",value:Mn.bitsPerComponent}),"decodeParameters"in Mn&&Mn.decodeParameters!==void 0&&Ln.push({key:"DecodeParms",value:"<<"+Mn.decodeParameters+">>"}),"transparency"in Mn&&Array.isArray(Mn.transparency)&&Mn.transparency.length>0){for(var qn="",Yn=0,Qn=Mn.transparency.length;Yn<Qn;Yn++)qn+=Mn.transparency[Yn]+" "+Mn.transparency[Yn]+" ";Ln.push({key:"Mask",value:"["+qn+"]"})}Mn.sMask!==void 0&&Ln.push({key:"SMask",value:Mn.objectId+1+" 0 R"});var zn=Mn.filter!==void 0?["/"+Mn.filter]:void 0;if(In({data:Mn.data,additionalKeyValues:Ln,alreadyAppliedFilters:zn,objectId:Mn.objectId}),Fn("endobj"),"sMask"in Mn&&Mn.sMask!==void 0){var lr,$n=(lr=Mn.sMaskBitsPerComponent)!==null&&lr!==void 0?lr:Mn.bitsPerComponent,On={width:Mn.width,height:Mn.height,colorSpace:"DeviceGray",bitsPerComponent:$n,data:Mn.sMask};"filter"in Mn&&(On.decodeParameters="/Predictor ".concat(Mn.predictor," /Colors 1 /BitsPerComponent ").concat($n," /Columns ").concat(Mn.width),On.filter=Mn.filter),Nn.call(this,On)}if(Mn.colorSpace===gn.INDEXED){var er=this.internal.newObject();In({data:Pn(new Uint8Array(Mn.palette)),objectId:er}),Fn("endobj")}},on=function(){var Nn=this.internal.collections[e+"images"];for(var Mn in Nn)sn.call(this,Nn[Mn])},un=function(){var Nn,Mn=this.internal.collections[e+"images"],Fn=this.internal.write;for(var In in Mn)Fn("/I"+(Nn=Mn[In]).index,Nn.objectId,"0","R")},dn=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",on),this.internal.events.subscribe("putXobjectDict",un))},fn=function(){var Nn=this.internal.collections[e+"images"];return dn.call(this),Nn},hn=function(){return Object.keys(this.internal.collections[e+"images"]).length},an=function(Nn){return typeof St["process"+Nn.toUpperCase()]=="function"},rn=function(Nn){return _typeof(Nn)==="object"&&Nn.nodeType===1},cn=function(Nn,Mn){if(Nn.nodeName==="IMG"&&Nn.hasAttribute("src")){var Fn=""+Nn.getAttribute("src");if(Fn.indexOf("data:image/")===0)return f(unescape(Fn).split("base64,").pop());var In=St.loadFile(Fn,!0);if(In!==void 0)return In}if(Nn.nodeName==="CANVAS"){if(Nn.width===0||Nn.height===0)throw new Error("Given canvas must have data. Canvas width: "+Nn.width+", height: "+Nn.height);var Bn;switch(Mn){case"PNG":Bn="image/png";break;case"WEBP":Bn="image/webp";break;default:Bn="image/jpeg"}return f(Nn.toDataURL(Bn,1).split("base64,").pop())}},pn=function(Nn){var Mn=this.internal.collections[e+"images"];if(Mn){for(var Fn in Mn)if(Nn===Mn[Fn].alias)return Mn[Fn]}},mn=function(Nn,Mn,Fn){return Nn||Mn||(Nn=-96,Mn=-96),Nn<0&&(Nn=-1*Fn.width*72/Nn/this.internal.scaleFactor),Mn<0&&(Mn=-1*Fn.height*72/Mn/this.internal.scaleFactor),Nn===0&&(Nn=Mn*Fn.width/Fn.height),Mn===0&&(Mn=Nn*Fn.height/Fn.width),[Nn,Mn]},xn=function(Nn,Mn,Fn,In,Bn,Ln){var qn=mn.call(this,Fn,In,Bn),Yn=this.internal.getCoordinateString,Qn=this.internal.getVerticalCoordinateString,zn=fn.call(this);if(Fn=qn[0],In=qn[1],zn[Bn.index]=Bn,Ln){Ln*=Math.PI/180;var lr=Math.cos(Ln),$n=Math.sin(Ln),On=function(sr){return sr.toFixed(4)},er=[On(lr),On($n),On(-1*$n),On(lr),0,0,"cm"]}this.internal.write("q"),Ln?(this.internal.write([1,"0","0",1,Yn(Nn),Qn(Mn+In),"cm"].join(" ")),this.internal.write(er.join(" ")),this.internal.write([Yn(Fn),"0","0",Yn(In),"0","0","cm"].join(" "))):this.internal.write([Yn(Fn),"0","0",Yn(In),Yn(Nn),Qn(Mn+In),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Bn.index+" Do"),this.internal.write("Q")},gn=St.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};St.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var yn=St.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},bn=St.__addimage__.sHashCode=function(Nn){var Mn,Fn,In=0;if(typeof Nn=="string")for(Fn=Nn.length,Mn=0;Mn<Fn;Mn++)In=(In<<5)-In+Nn.charCodeAt(Mn),In|=0;else if(Tn(Nn))for(Fn=Nn.byteLength/2,Mn=0;Mn<Fn;Mn++)In=(In<<5)-In+Nn[Mn],In|=0;return In},wn=St.__addimage__.validateStringAsBase64=function(Nn){(Nn=Nn||"").toString().trim();var Mn=!0;return Nn.length===0&&(Mn=!1),Nn.length%4!=0&&(Mn=!1),/^[A-Za-z0-9+/]+$/.test(Nn.substr(0,Nn.length-2))===!1&&(Mn=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(Nn.substr(-2))===!1&&(Mn=!1),Mn},_n=St.__addimage__.extractImageFromDataUrl=function(Nn){if(Nn==null||!(Nn=Nn.trim()).startsWith("data:"))return null;var Mn=Nn.indexOf(",");return Mn<0?null:Nn.substring(0,Mn).trim().endsWith("base64")?Nn.substring(Mn+1):null};St.__addimage__.isArrayBuffer=function(Nn){return Nn instanceof ArrayBuffer};var Tn=St.__addimage__.isArrayBufferView=function(Nn){return Nn instanceof Int8Array||Nn instanceof Uint8Array||Nn instanceof Uint8ClampedArray||Nn instanceof Int16Array||Nn instanceof Uint16Array||Nn instanceof Int32Array||Nn instanceof Uint32Array||Nn instanceof Float32Array||Nn instanceof Float64Array},An=St.__addimage__.binaryStringToUint8Array=function(Nn){for(var Mn=Nn.length,Fn=new Uint8Array(Mn),In=0;In<Mn;In++)Fn[In]=Nn.charCodeAt(In);return Fn},Pn=St.__addimage__.arrayBufferToBinaryString=function(Nn){for(var Mn="",Fn=Tn(Nn)?Nn:new Uint8Array(Nn),In=0;In<Fn.length;In+=8192)Mn+=String.fromCharCode.apply(null,Fn.subarray(In,In+8192));return Mn};St.addImage=function(){var Nn,Mn,Fn,In,Bn,Ln,qn,Yn,Qn;if(typeof arguments[1]=="number"?(Mn=en,Fn=arguments[1],In=arguments[2],Bn=arguments[3],Ln=arguments[4],qn=arguments[5],Yn=arguments[6],Qn=arguments[7]):(Mn=arguments[1],Fn=arguments[2],In=arguments[3],Bn=arguments[4],Ln=arguments[5],qn=arguments[6],Yn=arguments[7],Qn=arguments[8]),_typeof(Nn=arguments[0])==="object"&&!rn(Nn)&&"imageData"in Nn){var zn=Nn;Nn=zn.imageData,Mn=zn.format||Mn||en,Fn=zn.x||Fn||0,In=zn.y||In||0,Bn=zn.w||zn.width||Bn,Ln=zn.h||zn.height||Ln,qn=zn.alias||qn,Yn=zn.compression||Yn,Qn=zn.rotation||zn.angle||Qn}var lr=this.internal.getFilters();if(Yn===void 0&&lr.indexOf("FlateEncode")!==-1&&(Yn="SLOW"),isNaN(Fn)||isNaN(In))throw new Error("Invalid coordinates passed to jsPDF.addImage");dn.call(this);var $n=Sn.call(this,Nn,Mn,qn,Yn);return xn.call(this,Fn,In,Bn,Ln,$n,Qn),this};var Sn=function(Nn,Mn,Fn,In){var Bn,Ln,qn;if(typeof Nn=="string"&&nn(Nn)===en){Nn=unescape(Nn);var Yn=Cn(Nn,!1);(Yn!==""||(Yn=St.loadFile(Nn,!0))!==void 0)&&(Nn=Yn)}if(rn(Nn)&&(Nn=cn(Nn,Mn)),Mn=nn(Nn,Mn),!an(Mn))throw new Error("addImage does not support files of type '"+Mn+"', please ensure that a plugin for '"+Mn+"' support is added.");if(((qn=Fn)==null||qn.length===0)&&(Fn=function(Qn){return typeof Qn=="string"||Tn(Qn)?bn(Qn):Tn(Qn.data)?bn(Qn.data):null}(Nn)),(Bn=pn.call(this,Fn))||(Nn instanceof Uint8Array||Mn==="RGBA"||(Ln=Nn,Nn=An(Nn)),Bn=this["process"+Mn.toUpperCase()](Nn,hn.call(this),Fn,function(Qn){return Qn&&typeof Qn=="string"&&(Qn=Qn.toUpperCase()),Qn in St.image_compression?Qn:yn.NONE}(In),Ln)),!Bn)throw new Error("An unknown error occurred whilst processing the image.");return Bn},Cn=St.__addimage__.convertBase64ToBinaryString=function(Nn,Mn){Mn=typeof Mn!="boolean"||Mn;var Fn,In="";if(typeof Nn=="string"){var Bn;Fn=(Bn=_n(Nn))!==null&&Bn!==void 0?Bn:Nn;try{In=f(Fn)}catch(Ln){if(Mn)throw wn(Fn)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Ln.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return In};St.getImageProperties=function(Nn){var Mn,Fn,In="";if(rn(Nn)&&(Nn=cn(Nn)),typeof Nn=="string"&&nn(Nn)===en&&((In=Cn(Nn,!1))===""&&(In=St.loadFile(Nn)||""),Nn=In),Fn=nn(Nn),!an(Fn))throw new Error("addImage does not support files of type '"+Fn+"', please ensure that a plugin for '"+Fn+"' support is added.");if(Nn instanceof Uint8Array||(Nn=An(Nn)),!(Mn=this["process"+Fn.toUpperCase()](Nn)))throw new Error("An unknown error occurred whilst processing the image");return Mn.fileType=Fn,Mn}})(E.API),function(St){var e=function(en){if(en!==void 0&&en!="")return!0};E.API.events.push(["addPage",function(en){this.internal.getPageInfo(en.pageNumber).pageContext.annotations=[]}]),St.events.push(["putPage",function(en){for(var tn,nn,sn,on=this.internal.getCoordinateString,un=this.internal.getVerticalCoordinateString,dn=this.internal.getPageInfoByObjId(en.objId),fn=en.pageContext.annotations,hn=!1,an=0;an<fn.length&&!hn;an++)switch((tn=fn[an]).type){case"link":(e(tn.options.url)||e(tn.options.pageNumber))&&(hn=!0);break;case"reference":case"text":case"freetext":hn=!0}if(hn!=0){this.internal.write("/Annots [");for(var rn=0;rn<fn.length;rn++){tn=fn[rn];var cn=this.internal.pdfEscape,pn=this.internal.getEncryptor(en.objId);switch(tn.type){case"reference":this.internal.write(" "+tn.object.objId+" 0 R ");break;case"text":var mn=this.internal.newAdditionalObject(),xn=this.internal.newAdditionalObject(),gn=this.internal.getEncryptor(mn.objId),yn=tn.title||"Note";sn="<</Type /Annot /Subtype /Text "+(nn="/Rect ["+on(tn.bounds.x)+" "+un(tn.bounds.y+tn.bounds.h)+" "+on(tn.bounds.x+tn.bounds.w)+" "+un(tn.bounds.y)+"] ")+"/Contents ("+cn(gn(tn.contents))+")",sn+=" /Popup "+xn.objId+" 0 R",sn+=" /P "+dn.objId+" 0 R",sn+=" /T ("+cn(gn(yn))+") >>",mn.content=sn;var bn=mn.objId+" 0 R";sn="<</Type /Annot /Subtype /Popup "+(nn="/Rect ["+on(tn.bounds.x+30)+" "+un(tn.bounds.y+tn.bounds.h)+" "+on(tn.bounds.x+tn.bounds.w+30)+" "+un(tn.bounds.y)+"] ")+" /Parent "+bn,tn.open&&(sn+=" /Open true"),sn+=" >>",xn.content=sn,this.internal.write(mn.objId,"0 R",xn.objId,"0 R");break;case"freetext":nn="/Rect ["+on(tn.bounds.x)+" "+un(tn.bounds.y)+" "+on(tn.bounds.x+tn.bounds.w)+" "+un(tn.bounds.y+tn.bounds.h)+"] ";var wn=tn.color||"#000000";sn="<</Type /Annot /Subtype /FreeText "+nn+"/Contents ("+cn(pn(tn.contents))+")",sn+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+wn+")",sn+=" /Border [0 0 0]",sn+=" >>",this.internal.write(sn);break;case"link":if(tn.options.name){var _n=this.annotations._nameMap[tn.options.name];tn.options.pageNumber=_n.page,tn.options.top=_n.y}else tn.options.top||(tn.options.top=0);if(nn="/Rect ["+tn.finalBounds.x+" "+tn.finalBounds.y+" "+tn.finalBounds.w+" "+tn.finalBounds.h+"] ",sn="",tn.options.url)sn="<</Type /Annot /Subtype /Link "+nn+"/Border [0 0 0] /A <</S /URI /URI ("+cn(pn(tn.options.url))+") >>";else if(tn.options.pageNumber)switch(sn="<</Type /Annot /Subtype /Link "+nn+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(tn.options.pageNumber).objId+" 0 R",tn.options.magFactor=tn.options.magFactor||"XYZ",tn.options.magFactor){case"Fit":sn+=" /Fit]";break;case"FitH":sn+=" /FitH "+tn.options.top+"]";break;case"FitV":tn.options.left=tn.options.left||0,sn+=" /FitV "+tn.options.left+"]";break;default:var Tn=un(tn.options.top);tn.options.left=tn.options.left||0,tn.options.zoom===void 0&&(tn.options.zoom=0),sn+=" /XYZ "+tn.options.left+" "+Tn+" "+tn.options.zoom+"]"}sn!=""&&(sn+=" >>",this.internal.write(sn))}}this.internal.write("]")}}]),St.createAnnotation=function(en){var tn=this.internal.getCurrentPageInfo();switch(en.type){case"link":this.link(en.bounds.x,en.bounds.y,en.bounds.w,en.bounds.h,en);break;case"text":case"freetext":tn.pageContext.annotations.push(en)}},St.link=function(en,tn,nn,sn,on){var un=this.internal.getCurrentPageInfo(),dn=this.internal.getCoordinateString,fn=this.internal.getVerticalCoordinateString;un.pageContext.annotations.push({finalBounds:{x:dn(en),y:fn(tn),w:dn(en+nn),h:fn(tn+sn)},options:on,type:"link"})},St.textWithLink=function(en,tn,nn,sn){var on,un,dn=this.getTextWidth(en),fn=this.internal.getLineHeight()/this.internal.scaleFactor;if(sn.maxWidth!==void 0){un=sn.maxWidth;var hn=this.splitTextToSize(en,un).length;on=Math.ceil(fn*hn)}else un=dn,on=fn;return this.text(en,tn,nn,sn),nn+=.2*fn,sn.align==="center"&&(tn-=dn/2),sn.align==="right"&&(tn-=dn),this.link(tn,nn-fn,un,on,sn),dn},St.getTextWidth=function(en){var tn=this.internal.getFontSize();return this.getStringUnitWidth(en)*tn/this.internal.scaleFactor}}(E.API),function(St){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},en={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},tn={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},nn=[1570,1571,1573,1575];St.__arabicParser__={};var sn=St.__arabicParser__.isInArabicSubstitutionA=function(mn){return e[mn.charCodeAt(0)]!==void 0},on=St.__arabicParser__.isArabicLetter=function(mn){return typeof mn=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(mn)},un=St.__arabicParser__.isArabicEndLetter=function(mn){return on(mn)&&sn(mn)&&e[mn.charCodeAt(0)].length<=2},dn=St.__arabicParser__.isArabicAlfLetter=function(mn){return on(mn)&&nn.indexOf(mn.charCodeAt(0))>=0};St.__arabicParser__.arabicLetterHasIsolatedForm=function(mn){return on(mn)&&sn(mn)&&e[mn.charCodeAt(0)].length>=1};var fn=St.__arabicParser__.arabicLetterHasFinalForm=function(mn){return on(mn)&&sn(mn)&&e[mn.charCodeAt(0)].length>=2};St.__arabicParser__.arabicLetterHasInitialForm=function(mn){return on(mn)&&sn(mn)&&e[mn.charCodeAt(0)].length>=3};var hn=St.__arabicParser__.arabicLetterHasMedialForm=function(mn){return on(mn)&&sn(mn)&&e[mn.charCodeAt(0)].length==4},an=St.__arabicParser__.resolveLigatures=function(mn){var xn=0,gn=en,yn="",bn=0;for(xn=0;xn<mn.length;xn+=1)gn[mn.charCodeAt(xn)]!==void 0?(bn++,typeof(gn=gn[mn.charCodeAt(xn)])=="number"&&(yn+=String.fromCharCode(gn),gn=en,bn=0),xn===mn.length-1&&(gn=en,yn+=mn.charAt(xn-(bn-1)),xn-=bn-1,bn=0)):(gn=en,yn+=mn.charAt(xn-bn),xn-=bn,bn=0);return yn};St.__arabicParser__.isArabicDiacritic=function(mn){return mn!==void 0&&tn[mn.charCodeAt(0)]!==void 0};var rn=St.__arabicParser__.getCorrectForm=function(mn,xn,gn){return on(mn)?sn(mn)===!1?-1:!fn(mn)||!on(xn)&&!on(gn)||!on(gn)&&un(xn)||un(mn)&&!on(xn)||un(mn)&&dn(xn)||un(mn)&&un(xn)?0:hn(mn)&&on(xn)&&!un(xn)&&on(gn)&&fn(gn)?3:un(mn)||!on(gn)?1:2:-1},cn=function(mn){var xn=0,gn=0,yn=0,bn="",wn="",_n="",Tn=(mn=mn||"").split("\\s+"),An=[];for(xn=0;xn<Tn.length;xn+=1){for(An.push(""),gn=0;gn<Tn[xn].length;gn+=1)bn=Tn[xn][gn],wn=Tn[xn][gn-1],_n=Tn[xn][gn+1],on(bn)?(yn=rn(bn,wn,_n),An[xn]+=yn!==-1?String.fromCharCode(e[bn.charCodeAt(0)][yn]):bn):An[xn]+=bn;An[xn]=an(An[xn])}return An.join(" ")},pn=St.__arabicParser__.processArabic=St.processArabic=function(){var mn,xn=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,gn=[];if(Array.isArray(xn)){var yn=0;for(gn=[],yn=0;yn<xn.length;yn+=1)Array.isArray(xn[yn])?gn.push([cn(xn[yn][0]),xn[yn][1],xn[yn][2]]):gn.push([cn(xn[yn])]);mn=gn}else mn=cn(xn);return typeof arguments[0]=="string"?mn:(arguments[0].text=mn,arguments[0])};St.events.push(["preProcessText",pn])}(E.API),E.API.autoPrint=function(St){var e;return(St=St||{}).variant=St.variant||"non-conform",St.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(St){var e=function(){var en=void 0;Object.defineProperty(this,"pdf",{get:function(){return en},set:function(un){en=un}});var tn=150;Object.defineProperty(this,"width",{get:function(){return tn},set:function(un){tn=isNaN(un)||Number.isInteger(un)===!1||un<0?150:un,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=tn+1)}});var nn=300;Object.defineProperty(this,"height",{get:function(){return nn},set:function(un){nn=isNaN(un)||Number.isInteger(un)===!1||un<0?300:un,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=nn+1)}});var sn=[];Object.defineProperty(this,"childNodes",{get:function(){return sn},set:function(un){sn=un}});var on={};Object.defineProperty(this,"style",{get:function(){return on},set:function(un){on=un}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(en,tn){var nn;if((en=en||"2d")!=="2d")return null;for(nn in tn)this.pdf.context2d.hasOwnProperty(nn)&&(this.pdf.context2d[nn]=tn[nn]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},St.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(E.API),function(St){var e={left:0,top:0,bottom:0,right:0},en=!1,tn=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),nn.call(this))},nn=function(){this.internal.__cell__.lastCell=new sn,this.internal.__cell__.pages=1},sn=function(){var dn=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return dn},set:function(mn){dn=mn}});var fn=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return fn},set:function(mn){fn=mn}});var hn=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return hn},set:function(mn){hn=mn}});var an=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return an},set:function(mn){an=mn}});var rn=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return rn},set:function(mn){rn=mn}});var cn=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return cn},set:function(mn){cn=mn}});var pn=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return pn},set:function(mn){pn=mn}}),this};sn.prototype.clone=function(){return new sn(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},sn.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},St.setHeaderFunction=function(dn){return tn.call(this),this.internal.__cell__.headerFunction=typeof dn=="function"?dn:void 0,this},St.getTextDimensions=function(dn,fn){tn.call(this);var hn=(fn=fn||{}).fontSize||this.getFontSize(),an=fn.font||this.getFont(),rn=fn.scaleFactor||this.internal.scaleFactor,cn=0,pn=0,mn=0,xn=this;if(!Array.isArray(dn)&&typeof dn!="string"){if(typeof dn!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");dn=String(dn)}var gn=fn.maxWidth;gn>0?typeof dn=="string"?dn=this.splitTextToSize(dn,gn):Object.prototype.toString.call(dn)==="[object Array]"&&(dn=dn.reduce(function(bn,wn){return bn.concat(xn.splitTextToSize(wn,gn))},[])):dn=Array.isArray(dn)?dn:[dn];for(var yn=0;yn<dn.length;yn++)cn<(mn=this.getStringUnitWidth(dn[yn],{font:an})*hn)&&(cn=mn);return cn!==0&&(pn=dn.length),{w:cn/=rn,h:Math.max((pn*hn*this.getLineHeightFactor()-hn*(this.getLineHeightFactor()-1))/rn,0)}},St.cellAddPage=function(){tn.call(this),this.addPage();var dn=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new sn(dn.left,dn.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var on=St.cell=function(){var dn;dn=arguments[0]instanceof sn?arguments[0]:new sn(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),tn.call(this);var fn=this.internal.__cell__.lastCell,hn=this.internal.__cell__.padding,an=this.internal.__cell__.margins||e,rn=this.internal.__cell__.tableHeaderRow,cn=this.internal.__cell__.printHeaders;return fn.lineNumber!==void 0&&(fn.lineNumber===dn.lineNumber?(dn.x=(fn.x||0)+(fn.width||0),dn.y=fn.y||0):fn.y+fn.height+dn.height+an.bottom>this.getPageHeight()?(this.cellAddPage(),dn.y=an.top,cn&&rn&&(this.printHeaderRow(dn.lineNumber,!0),dn.y+=rn[0].height)):dn.y=fn.y+fn.height||dn.y),dn.text[0]!==void 0&&(this.rect(dn.x,dn.y,dn.width,dn.height,en===!0?"FD":void 0),dn.align==="right"?this.text(dn.text,dn.x+dn.width-hn,dn.y+hn,{align:"right",baseline:"top"}):dn.align==="center"?this.text(dn.text,dn.x+dn.width/2,dn.y+hn,{align:"center",baseline:"top",maxWidth:dn.width-hn-hn}):this.text(dn.text,dn.x+hn,dn.y+hn,{align:"left",baseline:"top",maxWidth:dn.width-hn-hn})),this.internal.__cell__.lastCell=dn,this};St.table=function(dn,fn,hn,an,rn){if(tn.call(this),!hn)throw new Error("No data for PDF table.");var cn,pn,mn,xn,gn=[],yn=[],bn=[],wn={},_n={},Tn=[],An=[],Pn=(rn=rn||{}).autoSize||!1,Sn=rn.printHeaders!==!1,Cn=rn.css&&rn.css["font-size"]!==void 0?16*rn.css["font-size"]:rn.fontSize||12,Nn=rn.margins||Object.assign({width:this.getPageWidth()},e),Mn=typeof rn.padding=="number"?rn.padding:3,Fn=rn.headerBackgroundColor||"#c8c8c8",In=rn.headerTextColor||"#000";if(nn.call(this),this.internal.__cell__.printHeaders=Sn,this.internal.__cell__.margins=Nn,this.internal.__cell__.table_font_size=Cn,this.internal.__cell__.padding=Mn,this.internal.__cell__.headerBackgroundColor=Fn,this.internal.__cell__.headerTextColor=In,this.setFontSize(Cn),an==null)yn=gn=Object.keys(hn[0]),bn=gn.map(function(){return"left"});else if(Array.isArray(an)&&_typeof(an[0])==="object")for(gn=an.map(function(zn){return zn.name}),yn=an.map(function(zn){return zn.prompt||zn.name||""}),bn=an.map(function(zn){return zn.align||"left"}),cn=0;cn<an.length;cn+=1)_n[an[cn].name]=.7499990551181103*an[cn].width;else Array.isArray(an)&&typeof an[0]=="string"&&(yn=gn=an,bn=gn.map(function(){return"left"}));if(Pn||Array.isArray(an)&&typeof an[0]=="string")for(cn=0;cn<gn.length;cn+=1){for(wn[xn=gn[cn]]=hn.map(function(zn){return zn[xn]}),this.setFont(void 0,"bold"),Tn.push(this.getTextDimensions(yn[cn],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),pn=wn[xn],this.setFont(void 0,"normal"),mn=0;mn<pn.length;mn+=1)Tn.push(this.getTextDimensions(pn[mn],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);_n[xn]=Math.max.apply(null,Tn)+Mn+Mn,Tn=[]}if(Sn){var Bn={};for(cn=0;cn<gn.length;cn+=1)Bn[gn[cn]]={},Bn[gn[cn]].text=yn[cn],Bn[gn[cn]].align=bn[cn];var Ln=un.call(this,Bn,_n);An=gn.map(function(zn){return new sn(dn,fn,_n[zn],Ln,Bn[zn].text,void 0,Bn[zn].align)}),this.setTableHeaderRow(An),this.printHeaderRow(1,!1)}var qn=an.reduce(function(zn,lr){return zn[lr.name]=lr.align,zn},{});for(cn=0;cn<hn.length;cn+=1){"rowStart"in rn&&rn.rowStart instanceof Function&&rn.rowStart({row:cn,data:hn[cn]},this);var Yn=un.call(this,hn[cn],_n);for(mn=0;mn<gn.length;mn+=1){var Qn=hn[cn][gn[mn]];"cellStart"in rn&&rn.cellStart instanceof Function&&rn.cellStart({row:cn,col:mn,data:Qn},this),on.call(this,new sn(dn,fn,_n[gn[mn]],Yn,Qn,cn+2,qn[gn[mn]]))}}return this.internal.__cell__.table_x=dn,this.internal.__cell__.table_y=fn,this};var un=function(dn,fn){var hn=this.internal.__cell__.padding,an=this.internal.__cell__.table_font_size,rn=this.internal.scaleFactor;return Object.keys(dn).map(function(cn){var pn=dn[cn];return this.splitTextToSize(pn.hasOwnProperty("text")?pn.text:pn,fn[cn]-hn-hn)},this).map(function(cn){return this.getLineHeightFactor()*cn.length*an/rn+hn+hn},this).reduce(function(cn,pn){return Math.max(cn,pn)},0)};St.setTableHeaderRow=function(dn){tn.call(this),this.internal.__cell__.tableHeaderRow=dn},St.printHeaderRow=function(dn,fn){if(tn.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var hn;if(en=!0,typeof this.internal.__cell__.headerFunction=="function"){var an=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new sn(an[0],an[1],an[2],an[3],void 0,-1)}this.setFont(void 0,"bold");for(var rn=[],cn=0;cn<this.internal.__cell__.tableHeaderRow.length;cn+=1){hn=this.internal.__cell__.tableHeaderRow[cn].clone(),fn&&(hn.y=this.internal.__cell__.margins.top||0,rn.push(hn)),hn.lineNumber=dn;var pn=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),on.call(this,hn),this.setTextColor(pn)}rn.length>0&&this.setTableHeaderRow(rn),this.setFont(void 0,"normal"),en=!1}}(E.API);var Pt={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},kt=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Ft=_t(kt),It=[100,200,300,400,500,600,700,800,900],jt=_t(It);function Ct(St){var e=St.family.replace(/"|'/g,"").toLowerCase(),en=function(sn){return Pt[sn=sn||"normal"]?sn:"normal"}(St.style),tn=function(sn){return sn?typeof sn=="number"?sn>=100&&sn<=900&&sn%100==0?sn:400:/^\d00$/.test(sn)?parseInt(sn):sn==="bold"?700:400:400}(St.weight),nn=function(sn){return typeof Ft[sn=sn||"normal"]=="number"?sn:"normal"}(St.stretch);return{family:e,style:en,weight:tn,stretch:nn,src:St.src||[],ref:St.ref||{name:e,style:[nn,en,tn].join(" ")}}}function Ot(St,e,en,tn){var nn;for(nn=en;nn>=0&&nn<e.length;nn+=tn)if(St[e[nn]])return St[e[nn]];for(nn=en;nn>=0&&nn<e.length;nn-=tn)if(St[e[nn]])return St[e[nn]]}var Bt={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Mt={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function qt(St){return[St.stretch,St.style,St.weight,St.family].join(" ")}function Et(St){return St.trimLeft()}function Rt(St,e){for(var en=0;en<St.length;){if(St.charAt(en)===e)return[St.substring(0,en),St.substring(en+1)];en+=1}return null}function Dt(St){var e=St.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],St.substring(e[0].length)]}var Tt,zt,Ut,Ht,Wt,Vt,Gt,Yt,Jt=["times"];function Xt(St,e,en,tn,nn){var sn=4,on=$t;switch(nn){case E.API.image_compression.FAST:sn=1,on=Zt;break;case E.API.image_compression.MEDIUM:sn=6,on=Qt;break;case E.API.image_compression.SLOW:sn=9,on=te}St=function(dn,fn,hn,an){for(var rn,cn=dn.length/fn,pn=new Uint8Array(dn.length+cn),mn=[Kt,Zt,$t,Qt,te],xn=0;xn<cn;xn+=1){var gn=xn*fn,yn=dn.subarray(gn,gn+fn);if(an)pn.set(an(yn,hn,rn),gn+xn);else{for(var bn=mn.length,wn=[],_n=0;_n<bn;_n+=1)wn[_n]=mn[_n](yn,hn,rn);var Tn=ne(wn.concat());pn.set(wn[Tn],gn+xn)}rn=yn}return pn}(St,e,Math.ceil(en*tn/8),on);var un=zlibSync(St,{level:sn});return E.API.__addimage__.arrayBufferToBinaryString(un)}function Kt(St){var e=Array.apply([],St);return e.unshift(0),e}function Zt(St,e){var en=St.length,tn=[];tn[0]=1;for(var nn=0;nn<en;nn+=1){var sn=St[nn-e]||0;tn[nn+1]=St[nn]-sn+256&255}return tn}function $t(St,e,en){var tn=St.length,nn=[];nn[0]=2;for(var sn=0;sn<tn;sn+=1){var on=en&&en[sn]||0;nn[sn+1]=St[sn]-on+256&255}return nn}function Qt(St,e,en){var tn=St.length,nn=[];nn[0]=3;for(var sn=0;sn<tn;sn+=1){var on=St[sn-e]||0,un=en&&en[sn]||0;nn[sn+1]=St[sn]+256-(on+un>>>1)&255}return nn}function te(St,e,en){var tn=St.length,nn=[];nn[0]=4;for(var sn=0;sn<tn;sn+=1){var on=ee(St[sn-e]||0,en&&en[sn]||0,en&&en[sn-e]||0);nn[sn+1]=St[sn]-on+256&255}return nn}function ee(St,e,en){if(St===e&&e===en)return St;var tn=Math.abs(e-en),nn=Math.abs(St-en),sn=Math.abs(St+e-en-en);return tn<=nn&&tn<=sn?St:nn<=sn?e:en}function ne(St){var e=St.map(function(en){return en.reduce(function(tn,nn){return tn+Math.abs(nn)},0)});return e.indexOf(Math.min.apply(null,e))}function re(St,e,en){var tn=e*en,nn=Math.floor(tn/8),sn=16-(tn-8*nn+en),on=(1<<en)-1;return ae(St,nn)>>sn&on}function ie(St,e,en,tn){var nn=en*tn,sn=Math.floor(nn/8),on=16-(nn-8*sn+tn),un=(1<<tn)-1,dn=(e&un)<<on;(function(fn,hn,an){if(hn+1<fn.byteLength)fn.setUint16(hn,an,!1);else{var rn=an>>8&255;fn.setUint8(hn,rn)}})(St,sn,ae(St,sn)&~(un<<on)&65535|dn)}function ae(St,e){return e+1<St.byteLength?St.getUint16(e,!1):St.getUint8(e)<<8}function oe(St){var e=0;if(St[e++]!==71||St[e++]!==73||St[e++]!==70||St[e++]!==56||(St[e++]+1&253)!=56||St[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var en=St[e++]|St[e++]<<8,tn=St[e++]|St[e++]<<8,nn=St[e++],sn=nn>>7,on=1<<1+(7&nn);St[e++],St[e++];var un=null,dn=null;sn&&(un=e,dn=on,e+=3*on);var fn=!0,hn=[],an=0,rn=null,cn=0,pn=null;for(this.width=en,this.height=tn;fn&&e<St.length;)switch(St[e++]){case 33:switch(St[e++]){case 255:if(St[e]!==11||St[e+1]==78&&St[e+2]==69&&St[e+3]==84&&St[e+4]==83&&St[e+5]==67&&St[e+6]==65&&St[e+7]==80&&St[e+8]==69&&St[e+9]==50&&St[e+10]==46&&St[e+11]==48&&St[e+12]==3&&St[e+13]==1&&St[e+16]==0)e+=14,pn=St[e++]|St[e++]<<8,e++;else for(e+=12;;){if(!((Nn=St[e++])>=0))throw Error("Invalid block size");if(Nn===0)break;e+=Nn}break;case 249:if(St[e++]!==4||St[e+4]!==0)throw new Error("Invalid graphics extension block.");var mn=St[e++];an=St[e++]|St[e++]<<8,rn=St[e++],1&mn||(rn=null),cn=mn>>2&7,e++;break;case 254:for(;;){if(!((Nn=St[e++])>=0))throw Error("Invalid block size");if(Nn===0)break;e+=Nn}break;default:throw new Error("Unknown graphic control label: 0x"+St[e-1].toString(16))}break;case 44:var xn=St[e++]|St[e++]<<8,gn=St[e++]|St[e++]<<8,yn=St[e++]|St[e++]<<8,bn=St[e++]|St[e++]<<8,wn=St[e++],_n=wn>>6&1,Tn=1<<1+(7&wn),An=un,Pn=dn,Sn=!1;wn>>7&&(Sn=!0,An=e,Pn=Tn,e+=3*Tn);var Cn=e;for(e++;;){var Nn;if(!((Nn=St[e++])>=0))throw Error("Invalid block size");if(Nn===0)break;e+=Nn}hn.push({x:xn,y:gn,width:yn,height:bn,has_local_palette:Sn,palette_offset:An,palette_size:Pn,data_offset:Cn,data_length:e-Cn,transparent_index:rn,interlaced:!!_n,delay:an,disposal:cn});break;case 59:fn=!1;break;default:throw new Error("Unknown gif block: 0x"+St[e-1].toString(16))}this.numFrames=function(){return hn.length},this.loopCount=function(){return pn},this.frameInfo=function(Mn){if(Mn<0||Mn>=hn.length)throw new Error("Frame index out of range.");return hn[Mn]},this.decodeAndBlitFrameBGRA=function(Mn,Fn){var In=this.frameInfo(Mn),Bn=In.width*In.height,Ln=new Uint8Array(Bn);se(St,In.data_offset,Ln,Bn);var qn=In.palette_offset,Yn=In.transparent_index;Yn===null&&(Yn=256);var Qn=In.width,zn=en-Qn,lr=Qn,$n=4*(In.y*en+In.x),On=4*((In.y+In.height)*en+In.x),er=$n,sr=4*zn;In.interlaced===!0&&(sr+=4*en*7);for(var ar=8,cr=0,gr=Ln.length;cr<gr;++cr){var vr=Ln[cr];if(lr===0&&(lr=Qn,(er+=sr)>=On&&(sr=4*zn+4*en*(ar-1),er=$n+(Qn+zn)*(ar<<1),ar>>=1)),vr===Yn)er+=4;else{var Er=St[qn+3*vr],Rr=St[qn+3*vr+1],Kr=St[qn+3*vr+2];Fn[er++]=Kr,Fn[er++]=Rr,Fn[er++]=Er,Fn[er++]=255}--lr}},this.decodeAndBlitFrameRGBA=function(Mn,Fn){var In=this.frameInfo(Mn),Bn=In.width*In.height,Ln=new Uint8Array(Bn);se(St,In.data_offset,Ln,Bn);var qn=In.palette_offset,Yn=In.transparent_index;Yn===null&&(Yn=256);var Qn=In.width,zn=en-Qn,lr=Qn,$n=4*(In.y*en+In.x),On=4*((In.y+In.height)*en+In.x),er=$n,sr=4*zn;In.interlaced===!0&&(sr+=4*en*7);for(var ar=8,cr=0,gr=Ln.length;cr<gr;++cr){var vr=Ln[cr];if(lr===0&&(lr=Qn,(er+=sr)>=On&&(sr=4*zn+4*en*(ar-1),er=$n+(Qn+zn)*(ar<<1),ar>>=1)),vr===Yn)er+=4;else{var Er=St[qn+3*vr],Rr=St[qn+3*vr+1],Kr=St[qn+3*vr+2];Fn[er++]=Er,Fn[er++]=Rr,Fn[er++]=Kr,Fn[er++]=255}--lr}}}function se(St,e,en,tn){for(var nn=St[e++],sn=1<<nn,on=sn+1,un=on+1,dn=nn+1,fn=(1<<dn)-1,hn=0,an=0,rn=0,cn=St[e++],pn=new Int32Array(4096),mn=null;;){for(;hn<16&&cn!==0;)an|=St[e++]<<hn,hn+=8,cn===1?cn=St[e++]:--cn;if(hn<dn)break;var xn=an&fn;if(an>>=dn,hn-=dn,xn!==sn){if(xn===on)break;for(var gn=xn<un?xn:mn,yn=0,bn=gn;bn>sn;)bn=pn[bn]>>8,++yn;var wn=bn;if(rn+yn+(gn!==xn?1:0)>tn)return void o.log("Warning, gif stream longer than expected.");en[rn++]=wn;var _n=rn+=yn;for(gn!==xn&&(en[rn++]=wn),bn=gn;yn--;)bn=pn[bn],en[--_n]=255&bn,bn>>=8;mn!==null&&un<4096&&(pn[un++]=mn<<8|wn,un>=fn+1&&dn<12&&(++dn,fn=fn<<1|1)),mn=xn}else un=on+1,fn=(1<<(dn=nn+1))-1,mn=null}return rn!==tn&&o.log("Warning, gif stream shorter than expected."),en}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function ue(St){var e,en,tn,nn,sn,on=Math.floor,un=new Array(64),dn=new Array(64),fn=new Array(64),hn=new Array(64),an=new Array(65535),rn=new Array(65535),cn=new Array(64),pn=new Array(64),mn=[],xn=0,gn=7,yn=new Array(64),bn=new Array(64),wn=new Array(64),_n=new Array(256),Tn=new Array(2048),An=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Pn=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Sn=[0,1,2,3,4,5,6,7,8,9,10,11],Cn=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],Nn=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Mn=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Fn=[0,1,2,3,4,5,6,7,8,9,10,11],In=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Bn=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Ln($n,On){for(var er=0,sr=0,ar=new Array,cr=1;cr<=16;cr++){for(var gr=1;gr<=$n[cr];gr++)ar[On[sr]]=[],ar[On[sr]][0]=er,ar[On[sr]][1]=cr,sr++,er++;er*=2}return ar}function qn($n){for(var On=$n[0],er=$n[1]-1;er>=0;)On&1<<er&&(xn|=1<<gn),er--,--gn<0&&(xn==255?(Yn(255),Yn(0)):Yn(xn),gn=7,xn=0)}function Yn($n){mn.push($n)}function Qn($n){Yn($n>>8&255),Yn(255&$n)}function zn($n,On,er,sr,ar){for(var cr,gr=ar[0],vr=ar[240],Er=function(zr,ls){var wr,Fr,Qr,fs,os,xr,Or,Ir,$r,ss,as=0;for($r=0;$r<8;++$r){wr=zr[as],Fr=zr[as+1],Qr=zr[as+2],fs=zr[as+3],os=zr[as+4],xr=zr[as+5],Or=zr[as+6];var Ns=wr+(Ir=zr[as+7]),As=wr-Ir,Jr=Fr+Or,Ss=Fr-Or,es=Qr+xr,qr=Qr-xr,ts=fs+os,Dr=fs-os,ns=Ns+ts,ks=Ns-ts,ms=Jr+es,Yr=Jr-es;zr[as]=ns+ms,zr[as+4]=ns-ms;var is=.707106781*(Yr+ks);zr[as+2]=ks+is,zr[as+6]=ks-is;var _s=.382683433*((ns=Dr+qr)-(Yr=Ss+As)),so=.5411961*ns+_s,ho=1.306562965*Yr+_s,Co=.707106781*(ms=qr+Ss),Ts=As+Co,qo=As-Co;zr[as+5]=qo+so,zr[as+3]=qo-so,zr[as+1]=Ts+ho,zr[as+7]=Ts-ho,as+=8}for(as=0,$r=0;$r<8;++$r){wr=zr[as],Fr=zr[as+8],Qr=zr[as+16],fs=zr[as+24],os=zr[as+32],xr=zr[as+40],Or=zr[as+48];var Go=wr+(Ir=zr[as+56]),Mo=wr-Ir,Ro=Fr+Or,eo=Fr-Or,lo=Qr+xr,fo=Qr-xr,xa=fs+os,Qo=fs-os,Oo=Go+xa,Kn=Go-xa,or=Ro+lo,hr=Ro-lo;zr[as]=Oo+or,zr[as+32]=Oo-or;var mr=.707106781*(hr+Kn);zr[as+16]=Kn+mr,zr[as+48]=Kn-mr;var kr=.382683433*((Oo=Qo+fo)-(hr=eo+Mo)),Pr=.5411961*Oo+kr,_i=1.306562965*hr+kr,gs=.707106781*(or=fo+eo),ds=Mo+gs,Cs=Mo-gs;zr[as+40]=Cs+Pr,zr[as+24]=Cs-Pr,zr[as+8]=ds+_i,zr[as+56]=ds-_i,as++}for($r=0;$r<64;++$r)ss=zr[$r]*ls[$r],cn[$r]=ss>0?ss+.5|0:ss-.5|0;return cn}($n,On),Rr=0;Rr<64;++Rr)pn[An[Rr]]=Er[Rr];var Kr=pn[0]-er;er=pn[0],Kr==0?qn(sr[0]):(qn(sr[rn[cr=32767+Kr]]),qn(an[cr]));for(var Cr=63;Cr>0&&pn[Cr]==0;)Cr--;if(Cr==0)return qn(gr),er;for(var Gr,Zn=1;Zn<=Cr;){for(var Xr=Zn;pn[Zn]==0&&Zn<=Cr;)++Zn;var hs=Zn-Xr;if(hs>=16){Gr=hs>>4;for(var us=1;us<=Gr;++us)qn(vr);hs&=15}cr=32767+pn[Zn],qn(ar[(hs<<4)+rn[cr]]),qn(an[cr]),Zn++}return Cr!=63&&qn(gr),er}function lr($n){$n=Math.min(Math.max($n,1),100),sn!=$n&&(function(On){for(var er=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],sr=0;sr<64;sr++){var ar=on((er[sr]*On+50)/100);ar=Math.min(Math.max(ar,1),255),un[An[sr]]=ar}for(var cr=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],gr=0;gr<64;gr++){var vr=on((cr[gr]*On+50)/100);vr=Math.min(Math.max(vr,1),255),dn[An[gr]]=vr}for(var Er=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Rr=0,Kr=0;Kr<8;Kr++)for(var Cr=0;Cr<8;Cr++)fn[Rr]=1/(un[An[Rr]]*Er[Kr]*Er[Cr]*8),hn[Rr]=1/(dn[An[Rr]]*Er[Kr]*Er[Cr]*8),Rr++}($n<50?Math.floor(5e3/$n):Math.floor(200-2*$n)),sn=$n)}this.encode=function($n,On){On&&lr(On),mn=new Array,xn=0,gn=7,Qn(65496),Qn(65504),Qn(16),Yn(74),Yn(70),Yn(73),Yn(70),Yn(0),Yn(1),Yn(1),Yn(0),Qn(1),Qn(1),Yn(0),Yn(0),function(){Qn(65499),Qn(132),Yn(0);for(var Fr=0;Fr<64;Fr++)Yn(un[Fr]);Yn(1);for(var Qr=0;Qr<64;Qr++)Yn(dn[Qr])}(),function(Fr,Qr){Qn(65472),Qn(17),Yn(8),Qn(Qr),Qn(Fr),Yn(3),Yn(1),Yn(17),Yn(0),Yn(2),Yn(17),Yn(1),Yn(3),Yn(17),Yn(1)}($n.width,$n.height),function(){Qn(65476),Qn(418),Yn(0);for(var Fr=0;Fr<16;Fr++)Yn(Pn[Fr+1]);for(var Qr=0;Qr<=11;Qr++)Yn(Sn[Qr]);Yn(16);for(var fs=0;fs<16;fs++)Yn(Cn[fs+1]);for(var os=0;os<=161;os++)Yn(Nn[os]);Yn(1);for(var xr=0;xr<16;xr++)Yn(Mn[xr+1]);for(var Or=0;Or<=11;Or++)Yn(Fn[Or]);Yn(17);for(var Ir=0;Ir<16;Ir++)Yn(In[Ir+1]);for(var $r=0;$r<=161;$r++)Yn(Bn[$r])}(),Qn(65498),Qn(12),Yn(3),Yn(1),Yn(0),Yn(2),Yn(17),Yn(3),Yn(17),Yn(0),Yn(63),Yn(0);var er=0,sr=0,ar=0;xn=0,gn=7,this.encode.displayName="_encode_";for(var cr,gr,vr,Er,Rr,Kr,Cr,Gr,Zn,Xr=$n.data,hs=$n.width,us=$n.height,zr=4*hs,ls=0;ls<us;){for(cr=0;cr<zr;){for(Rr=zr*ls+cr,Cr=-1,Gr=0,Zn=0;Zn<64;Zn++)Kr=Rr+(Gr=Zn>>3)*zr+(Cr=4*(7&Zn)),ls+Gr>=us&&(Kr-=zr*(ls+1+Gr-us)),cr+Cr>=zr&&(Kr-=cr+Cr-zr+4),gr=Xr[Kr++],vr=Xr[Kr++],Er=Xr[Kr++],yn[Zn]=(Tn[gr]+Tn[vr+256|0]+Tn[Er+512|0]>>16)-128,bn[Zn]=(Tn[gr+768|0]+Tn[vr+1024|0]+Tn[Er+1280|0]>>16)-128,wn[Zn]=(Tn[gr+1280|0]+Tn[vr+1536|0]+Tn[Er+1792|0]>>16)-128;er=zn(yn,fn,er,e,tn),sr=zn(bn,hn,sr,en,nn),ar=zn(wn,hn,ar,en,nn),cr+=32}ls+=8}if(gn>=0){var wr=[];wr[1]=gn+1,wr[0]=(1<<gn+1)-1,qn(wr)}return Qn(65497),new Uint8Array(mn)},St=St||50,function(){for(var $n=String.fromCharCode,On=0;On<256;On++)_n[On]=$n(On)}(),e=Ln(Pn,Sn),en=Ln(Mn,Fn),tn=Ln(Cn,Nn),nn=Ln(In,Bn),function(){for(var $n=1,On=2,er=1;er<=15;er++){for(var sr=$n;sr<On;sr++)rn[32767+sr]=er,an[32767+sr]=[],an[32767+sr][1]=er,an[32767+sr][0]=sr;for(var ar=-(On-1);ar<=-$n;ar++)rn[32767+ar]=er,an[32767+ar]=[],an[32767+ar][1]=er,an[32767+ar][0]=On-1+ar;$n<<=1,On<<=1}}(),function(){for(var $n=0;$n<256;$n++)Tn[$n]=19595*$n,Tn[$n+256|0]=38470*$n,Tn[$n+512|0]=7471*$n+32768,Tn[$n+768|0]=-11059*$n,Tn[$n+1024|0]=-21709*$n,Tn[$n+1280|0]=32768*$n+8421375,Tn[$n+1536|0]=-27439*$n,Tn[$n+1792|0]=-5329*$n}(),lr(St)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function ce(St,e){if(this.pos=0,this.buffer=St,this.datav=new DataView(St.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function le(St){function e(Sn){if(!Sn)throw Error("assert :P")}function en(Sn,Cn,Nn){for(var Mn=0;4>Mn;Mn++)if(Sn[Cn+Mn]!=Nn.charCodeAt(Mn))return!0;return!1}function tn(Sn,Cn,Nn,Mn,Fn){for(var In=0;In<Fn;In++)Sn[Cn+In]=Nn[Mn+In]}function nn(Sn,Cn,Nn,Mn){for(var Fn=0;Fn<Mn;Fn++)Sn[Cn+Fn]=Nn}function sn(Sn){return new Int32Array(Sn)}function on(Sn,Cn){for(var Nn=[],Mn=0;Mn<Sn;Mn++)Nn.push(new Cn);return Nn}function un(Sn,Cn){var Nn=[];return function Mn(Fn,In,Bn){for(var Ln=Bn[In],qn=0;qn<Ln&&(Fn.push(Bn.length>In+1?[]:new Cn),!(Bn.length<In+1));qn++)Mn(Fn[qn],In+1,Bn)}(Nn,0,Sn),Nn}var dn=function(){var Sn=this;function Cn(vn,En){for(var jn=1<<En-1>>>0;vn&jn;)jn>>>=1;return jn?(vn&jn-1)+jn:vn}function Nn(vn,En,jn,Rn,Vn){e(!(Rn%jn));do vn[En+(Rn-=jn)]=Vn;while(0<Rn)}function Mn(vn,En,jn,Rn,Vn){if(e(2328>=Vn),512>=Vn)var Gn=sn(512);else if((Gn=sn(Vn))==null)return 0;return function(Hn,Xn,Jn,nr,fr,Tr){var rr,pr,br=Xn,Lr=1<<Jn,Sr=sn(16),Br=sn(16);for(e(fr!=0),e(nr!=null),e(Hn!=null),e(0<Jn),pr=0;pr<fr;++pr){if(15<nr[pr])return 0;++Sr[nr[pr]]}if(Sr[0]==fr)return 0;for(Br[1]=0,rr=1;15>rr;++rr){if(Sr[rr]>1<<rr)return 0;Br[rr+1]=Br[rr]+Sr[rr]}for(pr=0;pr<fr;++pr)rr=nr[pr],0<nr[pr]&&(Tr[Br[rr]++]=pr);if(Br[15]==1)return(nr=new Fn).g=0,nr.value=Tr[0],Nn(Hn,br,1,Lr,nr),Lr;var Vr,Zr=-1,Wr=Lr-1,Es=0,ps=1,zs=1,bs=1<<Jn;for(pr=0,rr=1,fr=2;rr<=Jn;++rr,fr<<=1){if(ps+=zs<<=1,0>(zs-=Sr[rr]))return 0;for(;0<Sr[rr];--Sr[rr])(nr=new Fn).g=rr,nr.value=Tr[pr++],Nn(Hn,br+Es,fr,bs,nr),Es=Cn(Es,rr)}for(rr=Jn+1,fr=2;15>=rr;++rr,fr<<=1){if(ps+=zs<<=1,0>(zs-=Sr[rr]))return 0;for(;0<Sr[rr];--Sr[rr]){if(nr=new Fn,(Es&Wr)!=Zr){for(br+=bs,Vr=1<<(Zr=rr)-Jn;15>Zr&&!(0>=(Vr-=Sr[Zr]));)++Zr,Vr<<=1;Lr+=bs=1<<(Vr=Zr-Jn),Hn[Xn+(Zr=Es&Wr)].g=Vr+Jn,Hn[Xn+Zr].value=br-Xn-Zr}nr.g=rr-Jn,nr.value=Tr[pr++],Nn(Hn,br+(Es>>Jn),fr,bs,nr),Es=Cn(Es,rr)}}return ps!=2*Br[15]-1?0:Lr}(vn,En,jn,Rn,Vn,Gn)}function Fn(){this.value=this.g=0}function In(){this.value=this.g=0}function Bn(){this.G=on(5,Fn),this.H=sn(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=on(Fu,In)}function Ln(vn,En,jn,Rn){e(vn!=null),e(En!=null),e(2147483648>Rn),vn.Ca=254,vn.I=0,vn.b=-8,vn.Ka=0,vn.oa=En,vn.pa=jn,vn.Jd=En,vn.Yc=jn+Rn,vn.Zc=4<=Rn?jn+Rn-4+1:jn,gr(vn)}function qn(vn,En){for(var jn=0;0<En--;)jn|=Er(vn,128)<<En;return jn}function Yn(vn,En){var jn=qn(vn,En);return vr(vn)?-jn:jn}function Qn(vn,En,jn,Rn){var Vn,Gn=0;for(e(vn!=null),e(En!=null),e(4294967288>Rn),vn.Sb=Rn,vn.Ra=0,vn.u=0,vn.h=0,4<Rn&&(Rn=4),Vn=0;Vn<Rn;++Vn)Gn+=En[jn+Vn]<<8*Vn;vn.Ra=Gn,vn.bb=Rn,vn.oa=En,vn.pa=jn}function zn(vn){for(;8<=vn.u&&vn.bb<vn.Sb;)vn.Ra>>>=8,vn.Ra+=vn.oa[vn.pa+vn.bb]<<gu-8>>>0,++vn.bb,vn.u-=8;sr(vn)&&(vn.h=1,vn.u=0)}function lr(vn,En){if(e(0<=En),!vn.h&&En<=xl){var jn=er(vn)&$a[En];return vn.u+=En,zn(vn),jn}return vn.h=1,vn.u=0}function $n(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function On(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function er(vn){return vn.Ra>>>(vn.u&gu-1)>>>0}function sr(vn){return e(vn.bb<=vn.Sb),vn.h||vn.bb==vn.Sb&&vn.u>gu}function ar(vn,En){vn.u=En,vn.h=sr(vn)}function cr(vn){vn.u>=nu&&(e(vn.u>=nu),zn(vn))}function gr(vn){e(vn!=null&&vn.oa!=null),vn.pa<vn.Zc?(vn.I=(vn.oa[vn.pa++]|vn.I<<8)>>>0,vn.b+=8):(e(vn!=null&&vn.oa!=null),vn.pa<vn.Yc?(vn.b+=8,vn.I=vn.oa[vn.pa++]|vn.I<<8):vn.Ka?vn.b=0:(vn.I<<=8,vn.b+=8,vn.Ka=1))}function vr(vn){return qn(vn,1)}function Er(vn,En){var jn=vn.Ca;0>vn.b&&gr(vn);var Rn=vn.b,Vn=jn*En>>>8,Gn=(vn.I>>>Rn>Vn)+0;for(Gn?(jn-=Vn,vn.I-=Vn+1<<Rn>>>0):jn=Vn+1,Rn=jn,Vn=0;256<=Rn;)Vn+=8,Rn>>=8;return Rn=7^Vn+xu[Rn],vn.b-=Rn,vn.Ca=(jn<<Rn)-1,Gn}function Rr(vn,En,jn){vn[En+0]=jn>>24&255,vn[En+1]=jn>>16&255,vn[En+2]=jn>>8&255,vn[En+3]=255&jn}function Kr(vn,En){return vn[En+0]|vn[En+1]<<8}function Cr(vn,En){return Kr(vn,En)|vn[En+2]<<16}function Gr(vn,En){return Kr(vn,En)|Kr(vn,En+2)<<16}function Zn(vn,En){var jn=1<<En;return e(vn!=null),e(0<En),vn.X=sn(jn),vn.X==null?0:(vn.Mb=32-En,vn.Xa=En,1)}function Xr(vn,En){e(vn!=null),e(En!=null),e(vn.Xa==En.Xa),tn(En.X,0,vn.X,0,1<<En.Xa)}function hs(){this.X=[],this.Xa=this.Mb=0}function us(vn,En,jn,Rn){e(jn!=null),e(Rn!=null);var Vn=jn[0],Gn=Rn[0];return Vn==0&&(Vn=(vn*Gn+En/2)/En),Gn==0&&(Gn=(En*Vn+vn/2)/vn),0>=Vn||0>=Gn?0:(jn[0]=Vn,Rn[0]=Gn,1)}function zr(vn,En){return vn+(1<<En)-1>>>En}function ls(vn,En){return((4278255360&vn)+(4278255360&En)>>>0&4278255360)+((16711935&vn)+(16711935&En)>>>0&16711935)>>>0}function wr(vn,En){Sn[En]=function(jn,Rn,Vn,Gn,Hn,Xn,Jn){var nr;for(nr=0;nr<Hn;++nr){var fr=Sn[vn](Xn[Jn+nr-1],Vn,Gn+nr);Xn[Jn+nr]=ls(jn[Rn+nr],fr)}}}function Fr(){this.ud=this.hd=this.jd=0}function Qr(vn,En){return((4278124286&(vn^En))>>>1)+(vn&En)>>>0}function fs(vn){return 0<=vn&&256>vn?vn:0>vn?0:255<vn?255:void 0}function os(vn,En){return fs(vn+(vn-En+.5>>1))}function xr(vn,En,jn){return Math.abs(En-jn)-Math.abs(vn-jn)}function Or(vn,En,jn,Rn,Vn,Gn,Hn){for(Rn=Gn[Hn-1],jn=0;jn<Vn;++jn)Gn[Hn+jn]=Rn=ls(vn[En+jn],Rn)}function Ir(vn,En,jn,Rn,Vn){var Gn;for(Gn=0;Gn<jn;++Gn){var Hn=vn[En+Gn],Xn=Hn>>8&255,Jn=16711935&(Jn=(Jn=16711935&Hn)+((Xn<<16)+Xn));Rn[Vn+Gn]=(4278255360&Hn)+Jn>>>0}}function $r(vn,En){En.jd=255&vn,En.hd=vn>>8&255,En.ud=vn>>16&255}function ss(vn,En,jn,Rn,Vn,Gn){var Hn;for(Hn=0;Hn<Rn;++Hn){var Xn=En[jn+Hn],Jn=Xn>>>8,nr=Xn,fr=255&(fr=(fr=Xn>>>16)+((vn.jd<<24>>24)*(Jn<<24>>24)>>>5));nr=255&(nr=(nr+=(vn.hd<<24>>24)*(Jn<<24>>24)>>>5)+((vn.ud<<24>>24)*(fr<<24>>24)>>>5)),Vn[Gn+Hn]=(4278255360&Xn)+(fr<<16)+nr}}function as(vn,En,jn,Rn,Vn){Sn[En]=function(Gn,Hn,Xn,Jn,nr,fr,Tr,rr,pr){for(Jn=Tr;Jn<rr;++Jn)for(Tr=0;Tr<pr;++Tr)nr[fr++]=Vn(Xn[Rn(Gn[Hn++])])},Sn[vn]=function(Gn,Hn,Xn,Jn,nr,fr,Tr){var rr=8>>Gn.b,pr=Gn.Ea,br=Gn.K[0],Lr=Gn.w;if(8>rr)for(Gn=(1<<Gn.b)-1,Lr=(1<<rr)-1;Hn<Xn;++Hn){var Sr,Br=0;for(Sr=0;Sr<pr;++Sr)Sr&Gn||(Br=Rn(Jn[nr++])),fr[Tr++]=Vn(br[Br&Lr]),Br>>=rr}else Sn["VP8LMapColor"+jn](Jn,nr,br,Lr,fr,Tr,Hn,Xn,pr)}}function Ns(vn,En,jn,Rn,Vn){for(jn=En+jn;En<jn;){var Gn=vn[En++];Rn[Vn++]=Gn>>16&255,Rn[Vn++]=Gn>>8&255,Rn[Vn++]=255&Gn}}function As(vn,En,jn,Rn,Vn){for(jn=En+jn;En<jn;){var Gn=vn[En++];Rn[Vn++]=Gn>>16&255,Rn[Vn++]=Gn>>8&255,Rn[Vn++]=255&Gn,Rn[Vn++]=Gn>>24&255}}function Jr(vn,En,jn,Rn,Vn){for(jn=En+jn;En<jn;){var Gn=(Hn=vn[En++])>>16&240|Hn>>12&15,Hn=240&Hn|Hn>>28&15;Rn[Vn++]=Gn,Rn[Vn++]=Hn}}function Ss(vn,En,jn,Rn,Vn){for(jn=En+jn;En<jn;){var Gn=(Hn=vn[En++])>>16&248|Hn>>13&7,Hn=Hn>>5&224|Hn>>3&31;Rn[Vn++]=Gn,Rn[Vn++]=Hn}}function es(vn,En,jn,Rn,Vn){for(jn=En+jn;En<jn;){var Gn=vn[En++];Rn[Vn++]=255&Gn,Rn[Vn++]=Gn>>8&255,Rn[Vn++]=Gn>>16&255}}function qr(vn,En,jn,Rn,Vn,Gn){if(Gn==0)for(jn=En+jn;En<jn;)Rr(Rn,((Gn=vn[En++])[0]>>24|Gn[1]>>8&65280|Gn[2]<<8&16711680|Gn[3]<<24)>>>0),Vn+=32;else tn(Rn,Vn,vn,En,jn)}function ts(vn,En){Sn[En][0]=Sn[vn+"0"],Sn[En][1]=Sn[vn+"1"],Sn[En][2]=Sn[vn+"2"],Sn[En][3]=Sn[vn+"3"],Sn[En][4]=Sn[vn+"4"],Sn[En][5]=Sn[vn+"5"],Sn[En][6]=Sn[vn+"6"],Sn[En][7]=Sn[vn+"7"],Sn[En][8]=Sn[vn+"8"],Sn[En][9]=Sn[vn+"9"],Sn[En][10]=Sn[vn+"10"],Sn[En][11]=Sn[vn+"11"],Sn[En][12]=Sn[vn+"12"],Sn[En][13]=Sn[vn+"13"],Sn[En][14]=Sn[vn+"0"],Sn[En][15]=Sn[vn+"0"]}function Dr(vn){return vn==$p||vn==Bp||vn==kp||vn==zp}function ns(){this.eb=[],this.size=this.A=this.fb=0}function ks(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ms(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ns,this.f.kb=new ks,this.sd=null}function Yr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function is(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function _s(vn){return alert("todo:WebPSamplerProcessPlane"),vn.T}function so(vn,En){var jn=vn.T,Rn=En.ba.f.RGBA,Vn=Rn.eb,Gn=Rn.fb+vn.ka*Rn.A,Hn=Il[En.ba.S],Xn=vn.y,Jn=vn.O,nr=vn.f,fr=vn.N,Tr=vn.ea,rr=vn.W,pr=En.cc,br=En.dc,Lr=En.Mc,Sr=En.Nc,Br=vn.ka,Vr=vn.ka+vn.T,Zr=vn.U,Wr=Zr+1>>1;for(Br==0?Hn(Xn,Jn,null,null,nr,fr,Tr,rr,nr,fr,Tr,rr,Vn,Gn,null,null,Zr):(Hn(En.ec,En.fc,Xn,Jn,pr,br,Lr,Sr,nr,fr,Tr,rr,Vn,Gn-Rn.A,Vn,Gn,Zr),++jn);Br+2<Vr;Br+=2)pr=nr,br=fr,Lr=Tr,Sr=rr,fr+=vn.Rc,rr+=vn.Rc,Gn+=2*Rn.A,Hn(Xn,(Jn+=2*vn.fa)-vn.fa,Xn,Jn,pr,br,Lr,Sr,nr,fr,Tr,rr,Vn,Gn-Rn.A,Vn,Gn,Zr);return Jn+=vn.fa,vn.j+Vr<vn.o?(tn(En.ec,En.fc,Xn,Jn,Zr),tn(En.cc,En.dc,nr,fr,Wr),tn(En.Mc,En.Nc,Tr,rr,Wr),jn--):1&Vr||Hn(Xn,Jn,null,null,nr,fr,Tr,rr,nr,fr,Tr,rr,Vn,Gn+Rn.A,null,null,Zr),jn}function ho(vn,En,jn){var Rn=vn.F,Vn=[vn.J];if(Rn!=null){var Gn=vn.U,Hn=En.ba.S,Xn=Hn==Tp||Hn==kp;En=En.ba.f.RGBA;var Jn=[0],nr=vn.ka;Jn[0]=vn.T,vn.Kb&&(nr==0?--Jn[0]:(--nr,Vn[0]-=vn.width),vn.j+vn.ka+vn.T==vn.o&&(Jn[0]=vn.o-vn.j-nr));var fr=En.eb;nr=En.fb+nr*En.A,vn=om(Rn,Vn[0],vn.width,Gn,Jn,fr,nr+(Xn?0:3),En.A),e(jn==Jn),vn&&Dr(Hn)&&cp(fr,nr,Xn,Gn,Jn,En.A)}return 0}function Co(vn){var En=vn.ma,jn=En.ba.S,Rn=11>jn,Vn=jn==Ep||jn==Sp||jn==Tp||jn==Fp||jn==12||Dr(jn);if(En.memory=null,En.Ib=null,En.Jb=null,En.Nd=null,!np(En.Oa,vn,Vn?11:12))return 0;if(Vn&&Dr(jn)&&_f(),vn.da)alert("todo:use_scaling");else{if(Rn){if(En.Ib=_s,vn.Kb){if(jn=vn.U+1>>1,En.memory=sn(vn.U+2*jn),En.memory==null)return 0;En.ec=En.memory,En.fc=0,En.cc=En.ec,En.dc=En.fc+vn.U,En.Mc=En.cc,En.Nc=En.dc+jn,En.Ib=so,_f()}}else alert("todo:EmitYUV");Vn&&(En.Jb=ho,Rn&&Fl())}if(Rn&&!_m){for(vn=0;256>vn;++vn)n0[vn]=89858*(vn-128)+Pp>>Ap,s0[vn]=-22014*(vn-128)+Pp,i0[vn]=-45773*(vn-128),r0[vn]=113618*(vn-128)+Pp>>Ap;for(vn=hp;vn<qp;++vn)En=76283*(vn-16)+Pp>>Ap,o0[vn-hp]=oo(En,255),a0[vn-hp]=oo(En+8>>4,15);_m=1}return 1}function Ts(vn){var En=vn.ma,jn=vn.U,Rn=vn.T;return e(!(1&vn.ka)),0>=jn||0>=Rn?0:(jn=En.Ib(vn,En),En.Jb!=null&&En.Jb(vn,En,jn),En.Dc+=jn,1)}function qo(vn){vn.ma.memory=null}function Go(vn,En,jn,Rn){return lr(vn,8)!=47?0:(En[0]=lr(vn,14)+1,jn[0]=lr(vn,14)+1,Rn[0]=lr(vn,1),lr(vn,3)!=0?0:!vn.h)}function Mo(vn,En){if(4>vn)return vn+1;var jn=vn-2>>1;return(2+(1&vn)<<jn)+lr(En,jn)+1}function Ro(vn,En){return 120<En?En-120:1<=(jn=((jn=Vm[En-1])>>4)*vn+(8-(15&jn)))?jn:1;var jn}function eo(vn,En,jn){var Rn=er(jn),Vn=vn[En+=255&Rn].g-8;return 0<Vn&&(ar(jn,jn.u+8),Rn=er(jn),En+=vn[En].value,En+=Rn&(1<<Vn)-1),ar(jn,jn.u+vn[En].g),vn[En].value}function lo(vn,En,jn){return jn.g+=vn.g,jn.value+=vn.value<<En>>>0,e(8>=jn.g),vn.g}function fo(vn,En,jn){var Rn=vn.xc;return e((En=Rn==0?0:vn.vc[vn.md*(jn>>Rn)+(En>>Rn)])<vn.Wb),vn.Ya[En]}function xa(vn,En,jn,Rn){var Vn=vn.ab,Gn=vn.c*En,Hn=vn.C;En=Hn+En;var Xn=jn,Jn=Rn;for(Rn=vn.Ta,jn=vn.Ua;0<Vn--;){var nr=vn.gc[Vn],fr=Hn,Tr=En,rr=Xn,pr=Jn,br=(Jn=Rn,Xn=jn,nr.Ea);switch(e(fr<Tr),e(Tr<=nr.nc),nr.hc){case 2:bo(rr,pr,(Tr-fr)*br,Jn,Xn);break;case 0:var Lr=fr,Sr=Tr,Br=Jn,Vr=Xn,Zr=(bs=nr).Ea;Lr==0&&(ip(rr,pr,null,null,1,Br,Vr),Or(rr,pr+1,0,0,Zr-1,Br,Vr+1),pr+=Zr,Vr+=Zr,++Lr);for(var Wr=1<<bs.b,Es=Wr-1,ps=zr(Zr,bs.b),zs=bs.K,bs=bs.w+(Lr>>bs.b)*ps;Lr<Sr;){var Vs=zs,Po=bs,Us=1;for(_c(rr,pr,Br,Vr-Zr,1,Br,Vr);Us<Zr;){var vs=(Us&~Es)+Wr;vs>Zr&&(vs=Zr),(0,op[Vs[Po++]>>8&15])(rr,pr+ +Us,Br,Vr+Us-Zr,vs-Us,Br,Vr+Us),Us=vs}pr+=Zr,Vr+=Zr,++Lr&Es||(bs+=ps)}Tr!=nr.nc&&tn(Jn,Xn-br,Jn,Xn+(Tr-fr-1)*br,br);break;case 1:for(br=rr,Sr=pr,Zr=(rr=nr.Ea)-(Vr=rr&~(Br=(pr=1<<nr.b)-1)),Lr=zr(rr,nr.b),Wr=nr.K,nr=nr.w+(fr>>nr.b)*Lr;fr<Tr;){for(Es=Wr,ps=nr,zs=new Fr,bs=Sr+Vr,Vs=Sr+rr;Sr<bs;)$r(Es[ps++],zs),ap(zs,br,Sr,pr,Jn,Xn),Sr+=pr,Xn+=pr;Sr<Vs&&($r(Es[ps++],zs),ap(zs,br,Sr,Zr,Jn,Xn),Sr+=Zr,Xn+=Zr),++fr&Br||(nr+=Lr)}break;case 3:if(rr==Jn&&pr==Xn&&0<nr.b){for(Sr=Jn,rr=br=Xn+(Tr-fr)*br-(Vr=(Tr-fr)*zr(nr.Ea,nr.b)),pr=Jn,Br=Xn,Lr=[],Vr=(Zr=Vr)-1;0<=Vr;--Vr)Lr[Vr]=pr[Br+Vr];for(Vr=Zr-1;0<=Vr;--Vr)Sr[rr+Vr]=Lr[Vr];bp(nr,fr,Tr,Jn,br,Jn,Xn)}else bp(nr,fr,Tr,rr,pr,Jn,Xn)}Xn=Rn,Jn=jn}Jn!=jn&&tn(Rn,jn,Xn,Jn,Gn)}function Qo(vn,En){var jn=vn.V,Rn=vn.Ba+vn.c*vn.C,Vn=En-vn.C;if(e(En<=vn.l.o),e(16>=Vn),0<Vn){var Gn=vn.l,Hn=vn.Ta,Xn=vn.Ua,Jn=Gn.width;if(xa(vn,Vn,jn,Rn),Vn=Xn=[Xn],e((jn=vn.C)<(Rn=En)),e(Gn.v<Gn.va),Rn>Gn.o&&(Rn=Gn.o),jn<Gn.j){var nr=Gn.j-jn;jn=Gn.j,Vn[0]+=nr*Jn}if(jn>=Rn?jn=0:(Vn[0]+=4*Gn.v,Gn.ka=jn-Gn.j,Gn.U=Gn.va-Gn.v,Gn.T=Rn-jn,jn=1),jn){if(Xn=Xn[0],11>(jn=vn.ca).S){var fr=jn.f.RGBA,Tr=(Rn=jn.S,Vn=Gn.U,Gn=Gn.T,nr=fr.eb,fr.A),rr=Gn;for(fr=fr.fb+vn.Ma*fr.A;0<rr--;){var pr=Hn,br=Xn,Lr=Vn,Sr=nr,Br=fr;switch(Rn){case _p:lp(pr,br,Lr,Sr,Br);break;case Ep:yu(pr,br,Lr,Sr,Br);break;case $p:yu(pr,br,Lr,Sr,Br),cp(Sr,Br,0,Lr,1,0);break;case fm:$u(pr,br,Lr,Sr,Br);break;case Sp:qr(pr,br,Lr,Sr,Br,1);break;case Bp:qr(pr,br,Lr,Sr,Br,1),cp(Sr,Br,0,Lr,1,0);break;case Tp:qr(pr,br,Lr,Sr,Br,0);break;case kp:qr(pr,br,Lr,Sr,Br,0),cp(Sr,Br,1,Lr,1,0);break;case Fp:bu(pr,br,Lr,Sr,Br);break;case zp:bu(pr,br,Lr,Sr,Br),sm(Sr,Br,Lr,1,0);break;case pm:vu(pr,br,Lr,Sr,Br);break;default:e(0)}Xn+=Jn,fr+=Tr}vn.Ma+=Gn}else alert("todo:EmitRescaledRowsYUVA");e(vn.Ma<=jn.height)}}vn.C=En,e(vn.C<=vn.i)}function Oo(vn){var En;if(0<vn.ua)return 0;for(En=0;En<vn.Wb;++En){var jn=vn.Ya[En].G,Rn=vn.Ya[En].H;if(0<jn[1][Rn[1]+0].g||0<jn[2][Rn[2]+0].g||0<jn[3][Rn[3]+0].g)return 0}return 1}function Kn(vn,En,jn,Rn,Vn,Gn){if(vn.Z!=0){var Hn=vn.qd,Xn=vn.rd;for(e(Eu[vn.Z]!=null);En<jn;++En)Eu[vn.Z](Hn,Xn,Rn,Vn,Rn,Vn,Gn),Hn=Rn,Xn=Vn,Vn+=Gn;vn.qd=Hn,vn.rd=Xn}}function or(vn,En){var jn=vn.l.ma,Rn=jn.Z==0||jn.Z==1?vn.l.j:vn.C;if(Rn=vn.C<Rn?Rn:vn.C,e(En<=vn.l.o),En>Rn){var Vn=vn.l.width,Gn=jn.ca,Hn=jn.tb+Vn*Rn,Xn=vn.V,Jn=vn.Ba+vn.c*Rn,nr=vn.gc;e(vn.ab==1),e(nr[0].hc==3),Gl(nr[0],Rn,En,Xn,Jn,Gn,Hn),Kn(jn,Rn,En,Gn,Hn,Vn)}vn.C=vn.Ma=En}function hr(vn,En,jn,Rn,Vn,Gn,Hn){var Xn=vn.$/Rn,Jn=vn.$%Rn,nr=vn.m,fr=vn.s,Tr=jn+vn.$,rr=Tr;Vn=jn+Rn*Vn;var pr=jn+Rn*Gn,br=280+fr.ua,Lr=vn.Pb?Xn:16777216,Sr=0<fr.ua?fr.Wa:null,Br=fr.wc,Vr=Tr<pr?fo(fr,Jn,Xn):null;e(vn.C<Gn),e(pr<=Vn);var Zr=!1;e:for(;;){for(;Zr||Tr<pr;){var Wr=0;if(Xn>=Lr){var Es=Tr-jn;e((Lr=vn).Pb),Lr.wd=Lr.m,Lr.xd=Es,0<Lr.s.ua&&Xr(Lr.s.Wa,Lr.s.vb),Lr=Xn+Gm}if(Jn&Br||(Vr=fo(fr,Jn,Xn)),e(Vr!=null),Vr.Qb&&(En[Tr]=Vr.qb,Zr=!0),!Zr)if(cr(nr),Vr.jc){Wr=nr,Es=En;var ps=Tr,zs=Vr.pd[er(Wr)&Fu-1];e(Vr.jc),256>zs.g?(ar(Wr,Wr.u+zs.g),Es[ps]=zs.value,Wr=0):(ar(Wr,Wr.u+zs.g-256),e(256<=zs.value),Wr=zs.value),Wr==0&&(Zr=!0)}else Wr=eo(Vr.G[0],Vr.H[0],nr);if(nr.h)break;if(Zr||256>Wr){if(!Zr)if(Vr.nd)En[Tr]=(Vr.qb|Wr<<8)>>>0;else{if(cr(nr),Zr=eo(Vr.G[1],Vr.H[1],nr),cr(nr),Es=eo(Vr.G[2],Vr.H[2],nr),ps=eo(Vr.G[3],Vr.H[3],nr),nr.h)break;En[Tr]=(ps<<24|Zr<<16|Wr<<8|Es)>>>0}if(Zr=!1,++Tr,++Jn>=Rn&&(Jn=0,++Xn,Hn!=null&&Xn<=Gn&&!(Xn%16)&&Hn(vn,Xn),Sr!=null))for(;rr<Tr;)Wr=En[rr++],Sr.X[(506832829*Wr&4294967295)>>>Sr.Mb]=Wr}else if(280>Wr){if(Wr=Mo(Wr-256,nr),Es=eo(Vr.G[4],Vr.H[4],nr),cr(nr),Es=Ro(Rn,Es=Mo(Es,nr)),nr.h)break;if(Tr-jn<Es||Vn-Tr<Wr)break e;for(ps=0;ps<Wr;++ps)En[Tr+ps]=En[Tr+ps-Es];for(Tr+=Wr,Jn+=Wr;Jn>=Rn;)Jn-=Rn,++Xn,Hn!=null&&Xn<=Gn&&!(Xn%16)&&Hn(vn,Xn);if(e(Tr<=Vn),Jn&Br&&(Vr=fo(fr,Jn,Xn)),Sr!=null)for(;rr<Tr;)Wr=En[rr++],Sr.X[(506832829*Wr&4294967295)>>>Sr.Mb]=Wr}else{if(!(Wr<br))break e;for(Zr=Wr-280,e(Sr!=null);rr<Tr;)Wr=En[rr++],Sr.X[(506832829*Wr&4294967295)>>>Sr.Mb]=Wr;Wr=Tr,e(!(Zr>>>(Es=Sr).Xa)),En[Wr]=Es.X[Zr],Zr=!0}Zr||e(nr.h==sr(nr))}if(vn.Pb&&nr.h&&Tr<Vn)e(vn.m.h),vn.a=5,vn.m=vn.wd,vn.$=vn.xd,0<vn.s.ua&&Xr(vn.s.vb,vn.s.Wa);else{if(nr.h)break e;Hn!=null&&Hn(vn,Xn>Gn?Gn:Xn),vn.a=0,vn.$=Tr-jn}return 1}return vn.a=3,0}function mr(vn){e(vn!=null),vn.vc=null,vn.yc=null,vn.Ya=null;var En=vn.Wa;En!=null&&(En.X=null),vn.vb=null,e(vn!=null)}function kr(){var vn=new Rs;return vn==null?null:(vn.a=0,vn.xb=xm,ts("Predictor","VP8LPredictors"),ts("Predictor","VP8LPredictors_C"),ts("PredictorAdd","VP8LPredictorsAdd"),ts("PredictorAdd","VP8LPredictorsAdd_C"),bo=Ir,ap=ss,lp=Ns,yu=As,bu=Jr,vu=Ss,$u=es,Sn.VP8LMapColor32b=Vl,Sn.VP8LMapColor8b=sp,vn)}function Pr(vn,En,jn,Rn,Vn){var Gn=1,Hn=[vn],Xn=[En],Jn=Rn.m,nr=Rn.s,fr=null,Tr=0;e:for(;;){if(jn)for(;Gn&&lr(Jn,1);){var rr=Hn,pr=Xn,br=Rn,Lr=1,Sr=br.m,Br=br.gc[br.ab],Vr=lr(Sr,2);if(br.Oc&1<<Vr)Gn=0;else{switch(br.Oc|=1<<Vr,Br.hc=Vr,Br.Ea=rr[0],Br.nc=pr[0],Br.K=[null],++br.ab,e(4>=br.ab),Vr){case 0:case 1:Br.b=lr(Sr,3)+2,Lr=Pr(zr(Br.Ea,Br.b),zr(Br.nc,Br.b),0,br,Br.K),Br.K=Br.K[0];break;case 3:var Zr,Wr=lr(Sr,8)+1,Es=16<Wr?0:4<Wr?1:2<Wr?2:3;if(rr[0]=zr(Br.Ea,Es),Br.b=Es,Zr=Lr=Pr(Wr,1,0,br,Br.K)){var ps,zs=Wr,bs=Br,Vs=1<<(8>>bs.b),Po=sn(Vs);if(Po==null)Zr=0;else{var Us=bs.K[0],vs=bs.w;for(Po[0]=bs.K[0][0],ps=1;ps<1*zs;++ps)Po[ps]=ls(Us[vs+ps],Po[ps-1]);for(;ps<4*Vs;++ps)Po[ps]=0;bs.K[0]=null,bs.K[0]=Po,Zr=1}}Lr=Zr;break;case 2:break;default:e(0)}Gn=Lr}}if(Hn=Hn[0],Xn=Xn[0],Gn&&lr(Jn,1)&&!(Gn=1<=(Tr=lr(Jn,4))&&11>=Tr)){Rn.a=3;break e}var cs;if(cs=Gn)t:{var wo,Fs,qs,ao=Rn,Fo=Hn,Yo=Xn,xo=Tr,Vo=jn,Ko=ao.m,No=ao.s,Ws=[null],Zs=1,yo=0,Js=qm[xo];n:for(;;){if(Vo&&lr(Ko,1)){var $o=lr(Ko,3)+2,Bl=zr(Fo,$o),_o=zr(Yo,$o),na=Bl*_o;if(!Pr(Bl,_o,0,ao,Ws))break n;for(Ws=Ws[0],No.xc=$o,wo=0;wo<na;++wo){var no=Ws[wo]>>8&65535;Ws[wo]=no,no>=Zs&&(Zs=no+1)}}if(Ko.h)break n;for(Fs=0;5>Fs;++Fs){var jo=mm[Fs];!Fs&&0<xo&&(jo+=1<<xo),yo<jo&&(yo=jo)}var wl=on(Zs*Js,Fn),Xo=Zs,_l=on(Xo,Bn);if(_l==null)var El=null;else e(65536>=Xo),El=_l;var ga=sn(yo);if(El==null||ga==null||wl==null){ao.a=1;break n}var Sl=wl;for(wo=qs=0;wo<Zs;++wo){var io=El[wo],Tl=io.G,zl=io.H,zu=0,su=1,Bo=0;for(Fs=0;5>Fs;++Fs){jo=mm[Fs],Tl[Fs]=Sl,zl[Fs]=qs,!Fs&&0<xo&&(jo+=1<<xo);i:{var jp,Gp=jo,Cp=ao,fp=ga,c0=Sl,d0=qs,Hp=0,Su=Cp.m,h0=lr(Su,1);if(nn(fp,0,0,Gp),h0){var f0=lr(Su,1)+1,p0=lr(Su,1),Tm=lr(Su,p0==0?1:8);fp[Tm]=1,f0==2&&(fp[Tm=lr(Su,8)]=1);var Mp=1}else{var km=sn(19),Am=lr(Su,4)+4;if(19<Am){Cp.a=3;var Rp=0;break i}for(jp=0;jp<Am;++jp)km[Um[jp]]=lr(Su,3);var Wp=void 0,pp=void 0,Pm=Cp,m0=km,Op=Gp,Nm=fp,Yp=0,Tu=Pm.m,jm=8,Cm=on(128,Fn);r:for(;Mn(Cm,0,7,m0,19);){if(lr(Tu,1)){var g0=2+2*lr(Tu,3);if((Wp=2+lr(Tu,g0))>Op)break r}else Wp=Op;for(pp=0;pp<Op&&Wp--;){cr(Tu);var Mm=Cm[0+(127&er(Tu))];ar(Tu,Tu.u+Mm.g);var _h=Mm.value;if(16>_h)Nm[pp++]=_h,_h!=0&&(jm=_h);else{var x0=_h==16,Rm=_h-16,y0=Bm[Rm],Om=lr(Tu,$m[Rm])+y0;if(pp+Om>Op)break r;for(var b0=x0?jm:0;0<Om--;)Nm[pp++]=b0}}Yp=1;break r}Yp||(Pm.a=3),Mp=Yp}(Mp=Mp&&!Su.h)&&(Hp=Mn(c0,d0,8,fp,Gp)),Mp&&Hp!=0?Rp=Hp:(Cp.a=3,Rp=0)}if(Rp==0)break n;if(su&&zm[Fs]==1&&(su=Sl[qs].g==0),zu+=Sl[qs].g,qs+=Rp,3>=Fs){var mp,Kp=ga[0];for(mp=1;mp<jo;++mp)ga[mp]>Kp&&(Kp=ga[mp]);Bo+=Kp}}if(io.nd=su,io.Qb=0,su&&(io.qb=(Tl[3][zl[3]+0].value<<24|Tl[1][zl[1]+0].value<<16|Tl[2][zl[2]+0].value)>>>0,zu==0&&256>Tl[0][zl[0]+0].value&&(io.Qb=1,io.qb+=Tl[0][zl[0]+0].value<<8)),io.jc=!io.Qb&&6>Bo,io.jc){var Ip,ou=io;for(Ip=0;Ip<Fu;++Ip){var ku=Ip,Au=ou.pd[ku],Lp=ou.G[0][ou.H[0]+ku];256<=Lp.value?(Au.g=Lp.g+256,Au.value=Lp.value):(Au.g=0,Au.value=0,ku>>=lo(Lp,8,Au),ku>>=lo(ou.G[1][ou.H[1]+ku],16,Au),ku>>=lo(ou.G[2][ou.H[2]+ku],0,Au),lo(ou.G[3][ou.H[3]+ku],24,Au))}}}No.vc=Ws,No.Wb=Zs,No.Ya=El,No.yc=wl,cs=1;break t}cs=0}if(!(Gn=cs)){Rn.a=3;break e}if(0<Tr){if(nr.ua=1<<Tr,!Zn(nr.Wa,Tr)){Rn.a=1,Gn=0;break e}}else nr.ua=0;var Xp=Rn,Im=Hn,v0=Xn,Qp=Xp.s,Zp=Qp.xc;if(Xp.c=Im,Xp.i=v0,Qp.md=zr(Im,Zp),Qp.wc=Zp==0?-1:(1<<Zp)-1,jn){Rn.xb=Zm;break e}if((fr=sn(Hn*Xn))==null){Rn.a=1,Gn=0;break e}Gn=(Gn=hr(Rn,fr,0,Hn,Xn,Xn,null))&&!Jn.h;break e}return Gn?(Vn!=null?Vn[0]=fr:(e(fr==null),e(jn)),Rn.$=0,jn||mr(nr)):mr(nr),Gn}function _i(vn,En){var jn=vn.c*vn.i,Rn=jn+En+16*En;return e(vn.c<=En),vn.V=sn(Rn),vn.V==null?(vn.Ta=null,vn.Ua=0,vn.a=1,0):(vn.Ta=vn.V,vn.Ua=vn.Ba+jn+En,1)}function gs(vn,En){var jn=vn.C,Rn=En-jn,Vn=vn.V,Gn=vn.Ba+vn.c*jn;for(e(En<=vn.l.o);0<Rn;){var Hn=16<Rn?16:Rn,Xn=vn.l.ma,Jn=vn.l.width,nr=Jn*Hn,fr=Xn.ca,Tr=Xn.tb+Jn*jn,rr=vn.Ta,pr=vn.Ua;xa(vn,Hn,Vn,Gn),am(rr,pr,fr,Tr,nr),Kn(Xn,jn,jn+Hn,fr,Tr,Jn),Rn-=Hn,Vn+=Hn*vn.c,jn+=Hn}e(jn==En),vn.C=vn.Ma=En}function ds(){this.ub=this.yd=this.td=this.Rb=0}function Cs(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Gs(){this.Fb=this.Bb=this.Cb=0,this.Zb=sn(4),this.Lb=sn(4)}function uo(){this.Yb=function(){var vn=[];return function En(jn,Rn,Vn){for(var Gn=Vn[Rn],Hn=0;Hn<Gn&&(jn.push(Vn.length>Rn+1?[]:0),!(Vn.length<Rn+1));Hn++)En(jn[Hn],Rn+1,Vn)}(vn,0,[3,11]),vn}()}function co(){this.jb=sn(3),this.Wc=un([4,8],uo),this.Xc=un([4,17],uo)}function Nr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new sn(4),this.od=new sn(4)}function Ps(){this.ld=this.La=this.dd=this.tc=0}function Ys(){this.Na=this.la=0}function Io(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ho(){this.ad=sn(384),this.Za=0,this.Ob=sn(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function au(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ps),this.Y=0,this.ya=Array(new Ho),this.aa=0,this.l=new Ll}function lu(){this.y=sn(16),this.f=sn(8),this.ea=sn(8)}function Pu(){this.cb=this.a=0,this.sc="",this.m=new $n,this.Od=new ds,this.Kc=new Cs,this.ed=new Nr,this.Qa=new Gs,this.Ic=this.$c=this.Aa=0,this.D=new au,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=on(8,$n),this.ia=0,this.pb=on(4,Io),this.Pa=new co,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new lu),this.Hd=0,this.rb=Array(new Ys),this.sb=0,this.wa=Array(new Ps),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ho),this.L=this.aa=0,this.gd=un([4,2],Ps),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function oo(vn,En){return 0>vn?0:vn>En?En:vn}function Ll(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Vu(){var vn=new Pu;return vn!=null&&(vn.a=0,vn.sc="OK",vn.cb=0,vn.Xb=0,dp||(dp=uu)),vn}function po(vn,En,jn){return vn.a==0&&(vn.a=En,vn.sc=jn,vn.cb=0),0}function Nu(vn,En,jn){return 3<=jn&&vn[En+0]==157&&vn[En+1]==1&&vn[En+2]==42}function Al(vn,En){if(vn==null)return 0;if(vn.a=0,vn.sc="OK",En==null)return po(vn,2,"null VP8Io passed to VP8GetHeaders()");var jn=En.data,Rn=En.w,Vn=En.ha;if(4>Vn)return po(vn,7,"Truncated header.");var Gn=jn[Rn+0]|jn[Rn+1]<<8|jn[Rn+2]<<16,Hn=vn.Od;if(Hn.Rb=!(1&Gn),Hn.td=Gn>>1&7,Hn.yd=Gn>>4&1,Hn.ub=Gn>>5,3<Hn.td)return po(vn,3,"Incorrect keyframe parameters.");if(!Hn.yd)return po(vn,4,"Frame not displayable.");Rn+=3,Vn-=3;var Xn=vn.Kc;if(Hn.Rb){if(7>Vn)return po(vn,7,"cannot parse picture header");if(!Nu(jn,Rn,Vn))return po(vn,3,"Bad code word");Xn.c=16383&(jn[Rn+4]<<8|jn[Rn+3]),Xn.Td=jn[Rn+4]>>6,Xn.i=16383&(jn[Rn+6]<<8|jn[Rn+5]),Xn.Ud=jn[Rn+6]>>6,Rn+=7,Vn-=7,vn.za=Xn.c+15>>4,vn.Ub=Xn.i+15>>4,En.width=Xn.c,En.height=Xn.i,En.Da=0,En.j=0,En.v=0,En.va=En.width,En.o=En.height,En.da=0,En.ib=En.width,En.hb=En.height,En.U=En.width,En.T=En.height,nn((Gn=vn.Pa).jb,0,255,Gn.jb.length),e((Gn=vn.Qa)!=null),Gn.Cb=0,Gn.Bb=0,Gn.Fb=1,nn(Gn.Zb,0,0,Gn.Zb.length),nn(Gn.Lb,0,0,Gn.Lb)}if(Hn.ub>Vn)return po(vn,7,"bad partition length");Ln(Gn=vn.m,jn,Rn,Hn.ub),Rn+=Hn.ub,Vn-=Hn.ub,Hn.Rb&&(Xn.Ld=vr(Gn),Xn.Kd=vr(Gn)),Xn=vn.Qa;var Jn,nr=vn.Pa;if(e(Gn!=null),e(Xn!=null),Xn.Cb=vr(Gn),Xn.Cb){if(Xn.Bb=vr(Gn),vr(Gn)){for(Xn.Fb=vr(Gn),Jn=0;4>Jn;++Jn)Xn.Zb[Jn]=vr(Gn)?Yn(Gn,7):0;for(Jn=0;4>Jn;++Jn)Xn.Lb[Jn]=vr(Gn)?Yn(Gn,6):0}if(Xn.Bb)for(Jn=0;3>Jn;++Jn)nr.jb[Jn]=vr(Gn)?qn(Gn,8):255}else Xn.Bb=0;if(Gn.Ka)return po(vn,3,"cannot parse segment header");if((Xn=vn.ed).zd=vr(Gn),Xn.Tb=qn(Gn,6),Xn.wb=qn(Gn,3),Xn.Pc=vr(Gn),Xn.Pc&&vr(Gn)){for(nr=0;4>nr;++nr)vr(Gn)&&(Xn.vd[nr]=Yn(Gn,6));for(nr=0;4>nr;++nr)vr(Gn)&&(Xn.od[nr]=Yn(Gn,6))}if(vn.L=Xn.Tb==0?0:Xn.zd?1:2,Gn.Ka)return po(vn,3,"cannot parse filter header");var fr=Vn;if(Vn=Jn=Rn,Rn=Jn+fr,Xn=fr,vn.Xb=(1<<qn(vn.m,2))-1,fr<3*(nr=vn.Xb))jn=7;else{for(Jn+=3*nr,Xn-=3*nr,fr=0;fr<nr;++fr){var Tr=jn[Vn+0]|jn[Vn+1]<<8|jn[Vn+2]<<16;Tr>Xn&&(Tr=Xn),Ln(vn.Jc[+fr],jn,Jn,Tr),Jn+=Tr,Xn-=Tr,Vn+=3}Ln(vn.Jc[+nr],jn,Jn,Xn),jn=Jn<Rn?0:5}if(jn!=0)return po(vn,jn,"cannot parse partitions");for(jn=qn(Jn=vn.m,7),Vn=vr(Jn)?Yn(Jn,4):0,Rn=vr(Jn)?Yn(Jn,4):0,Xn=vr(Jn)?Yn(Jn,4):0,nr=vr(Jn)?Yn(Jn,4):0,Jn=vr(Jn)?Yn(Jn,4):0,fr=vn.Qa,Tr=0;4>Tr;++Tr){if(fr.Cb){var rr=fr.Zb[Tr];fr.Fb||(rr+=jn)}else{if(0<Tr){vn.pb[Tr]=vn.pb[0];continue}rr=jn}var pr=vn.pb[Tr];pr.Sc[0]=Up[oo(rr+Vn,127)],pr.Sc[1]=Vp[oo(rr+0,127)],pr.Eb[0]=2*Up[oo(rr+Rn,127)],pr.Eb[1]=101581*Vp[oo(rr+Xn,127)]>>16,8>pr.Eb[1]&&(pr.Eb[1]=8),pr.Qc[0]=Up[oo(rr+nr,117)],pr.Qc[1]=Vp[oo(rr+Jn,127)],pr.lc=rr+Jn}if(!Hn.Rb)return po(vn,4,"Not a key frame.");for(vr(Gn),Hn=vn.Pa,jn=0;4>jn;++jn){for(Vn=0;8>Vn;++Vn)for(Rn=0;3>Rn;++Rn)for(Xn=0;11>Xn;++Xn)nr=Er(Gn,Xm[jn][Vn][Rn][Xn])?qn(Gn,8):Ym[jn][Vn][Rn][Xn],Hn.Wc[jn][Vn].Yb[Rn][Xn]=nr;for(Vn=0;17>Vn;++Vn)Hn.Xc[jn][Vn]=Hn.Wc[jn][Qm[Vn]]}return vn.kc=vr(Gn),vn.kc&&(vn.Bd=qn(Gn,8)),vn.cb=1}function uu(vn,En,jn,Rn,Vn,Gn,Hn){var Xn=En[Vn].Yb[jn];for(jn=0;16>Vn;++Vn){if(!Er(vn,Xn[jn+0]))return Vn;for(;!Er(vn,Xn[jn+1]);)if(Xn=En[++Vn].Yb[0],jn=0,Vn==16)return 16;var Jn=En[Vn+1].Yb;if(Er(vn,Xn[jn+2])){var nr=vn,fr=0;if(Er(nr,(rr=Xn)[(Tr=jn)+3]))if(Er(nr,rr[Tr+6])){for(Xn=0,Tr=2*(fr=Er(nr,rr[Tr+8]))+(rr=Er(nr,rr[Tr+9+fr])),fr=0,rr=Hm[Tr];rr[Xn];++Xn)fr+=fr+Er(nr,rr[Xn]);fr+=3+(8<<Tr)}else Er(nr,rr[Tr+7])?(fr=7+2*Er(nr,165),fr+=Er(nr,145)):fr=5+Er(nr,159);else fr=Er(nr,rr[Tr+4])?3+Er(nr,rr[Tr+5]):2;Xn=Jn[2]}else fr=1,Xn=Jn[1];Jn=Hn+Wm[Vn],0>(nr=vn).b&&gr(nr);var Tr,rr=nr.b,pr=(Tr=nr.Ca>>1)-(nr.I>>rr)>>31;--nr.b,nr.Ca+=pr,nr.Ca|=1,nr.I-=(Tr+1&pr)<<rr,Gn[Jn]=((fr^pr)-pr)*Rn[(0<Vn)+0]}return 16}function Wl(vn){var En=vn.rb[vn.sb-1];En.la=0,En.Na=0,nn(vn.zc,0,0,vn.zc.length),vn.ja=0}function zo(vn,En,jn,Rn,Vn){Vn=vn[En+jn+32*Rn]+(Vn>>3),vn[En+jn+32*Rn]=-256&Vn?0>Vn?0:255:Vn}function go(vn,En,jn,Rn,Vn,Gn){zo(vn,En,0,jn,Rn+Vn),zo(vn,En,1,jn,Rn+Gn),zo(vn,En,2,jn,Rn-Gn),zo(vn,En,3,jn,Rn-Vn)}function Pl(vn){return(20091*vn>>16)+vn}function ju(vn,En,jn,Rn){var Vn,Gn=0,Hn=sn(16);for(Vn=0;4>Vn;++Vn){var Xn=vn[En+0]+vn[En+8],Jn=vn[En+0]-vn[En+8],nr=(35468*vn[En+4]>>16)-Pl(vn[En+12]),fr=Pl(vn[En+4])+(35468*vn[En+12]>>16);Hn[Gn+0]=Xn+fr,Hn[Gn+1]=Jn+nr,Hn[Gn+2]=Jn-nr,Hn[Gn+3]=Xn-fr,Gn+=4,En++}for(Vn=Gn=0;4>Vn;++Vn)Xn=(vn=Hn[Gn+0]+4)+Hn[Gn+8],Jn=vn-Hn[Gn+8],nr=(35468*Hn[Gn+4]>>16)-Pl(Hn[Gn+12]),zo(jn,Rn,0,0,Xn+(fr=Pl(Hn[Gn+4])+(35468*Hn[Gn+12]>>16))),zo(jn,Rn,1,0,Jn+nr),zo(jn,Rn,2,0,Jn-nr),zo(jn,Rn,3,0,Xn-fr),Gn++,Rn+=32}function qu(vn,En,jn,Rn){var Vn=vn[En+0]+4,Gn=35468*vn[En+4]>>16,Hn=Pl(vn[En+4]),Xn=35468*vn[En+1]>>16;go(jn,Rn,0,Vn+Hn,vn=Pl(vn[En+1]),Xn),go(jn,Rn,1,Vn+Gn,vn,Xn),go(jn,Rn,2,Vn-Gn,vn,Xn),go(jn,Rn,3,Vn-Hn,vn,Xn)}function cu(vn,En,jn,Rn,Vn){ju(vn,En,jn,Rn),Vn&&ju(vn,En+16,jn,Rn+4)}function ba(vn,En,jn,Rn){Bu(vn,En+0,jn,Rn,1),Bu(vn,En+32,jn,Rn+128,1)}function Cu(vn,En,jn,Rn){var Vn;for(vn=vn[En+0]+4,Vn=0;4>Vn;++Vn)for(En=0;4>En;++En)zo(jn,Rn,En,Vn,vn)}function du(vn,En,jn,Rn){vn[En+0]&&Xs(vn,En+0,jn,Rn),vn[En+16]&&Xs(vn,En+16,jn,Rn+4),vn[En+32]&&Xs(vn,En+32,jn,Rn+128),vn[En+48]&&Xs(vn,En+48,jn,Rn+128+4)}function Yl(vn,En,jn,Rn){var Vn,Gn=sn(16);for(Vn=0;4>Vn;++Vn){var Hn=vn[En+0+Vn]+vn[En+12+Vn],Xn=vn[En+4+Vn]+vn[En+8+Vn],Jn=vn[En+4+Vn]-vn[En+8+Vn],nr=vn[En+0+Vn]-vn[En+12+Vn];Gn[0+Vn]=Hn+Xn,Gn[8+Vn]=Hn-Xn,Gn[4+Vn]=nr+Jn,Gn[12+Vn]=nr-Jn}for(Vn=0;4>Vn;++Vn)Hn=(vn=Gn[0+4*Vn]+3)+Gn[3+4*Vn],Xn=Gn[1+4*Vn]+Gn[2+4*Vn],Jn=Gn[1+4*Vn]-Gn[2+4*Vn],nr=vn-Gn[3+4*Vn],jn[Rn+0]=Hn+Xn>>3,jn[Rn+16]=nr+Jn>>3,jn[Rn+32]=Hn-Xn>>3,jn[Rn+48]=nr-Jn>>3,Rn+=64}function Ms(vn,En,jn){var Rn,Vn=En-32,Gn=yl,Hn=255-vn[Vn-1];for(Rn=0;Rn<jn;++Rn){var Xn,Jn=Gn,nr=Hn+vn[En-1];for(Xn=0;Xn<jn;++Xn)vn[En+Xn]=Jn[nr+vn[Vn+Xn]];En+=32}}function Gu(vn,En){Ms(vn,En,4)}function Ls(vn,En){Ms(vn,En,8)}function Os(vn,En){Ms(vn,En,16)}function Kl(vn,En){var jn;for(jn=0;16>jn;++jn)tn(vn,En+32*jn,vn,En-32,16)}function Xl(vn,En){var jn;for(jn=16;0<jn;--jn)nn(vn,En,vn[En-1],16),En+=32}function Zo(vn,En,jn){var Rn;for(Rn=0;16>Rn;++Rn)nn(En,jn+32*Rn,vn,16)}function Hu(vn,En){var jn,Rn=16;for(jn=0;16>jn;++jn)Rn+=vn[En-1+32*jn]+vn[En+jn-32];Zo(Rn>>5,vn,En)}function Ul(vn,En){var jn,Rn=8;for(jn=0;16>jn;++jn)Rn+=vn[En-1+32*jn];Zo(Rn>>4,vn,En)}function hu(vn,En){var jn,Rn=8;for(jn=0;16>jn;++jn)Rn+=vn[En+jn-32];Zo(Rn>>4,vn,En)}function Wu(vn,En){Zo(128,vn,En)}function js(vn,En,jn){return vn+2*En+jn+2>>2}function Yu(vn,En){var jn,Rn=En-32;for(Rn=new Uint8Array([js(vn[Rn-1],vn[Rn+0],vn[Rn+1]),js(vn[Rn+0],vn[Rn+1],vn[Rn+2]),js(vn[Rn+1],vn[Rn+2],vn[Rn+3]),js(vn[Rn+2],vn[Rn+3],vn[Rn+4])]),jn=0;4>jn;++jn)tn(vn,En+32*jn,Rn,0,Rn.length)}function Ku(vn,En){var jn=vn[En-1],Rn=vn[En-1+32],Vn=vn[En-1+64],Gn=vn[En-1+96];Rr(vn,En+0,16843009*js(vn[En-1-32],jn,Rn)),Rr(vn,En+32,16843009*js(jn,Rn,Vn)),Rr(vn,En+64,16843009*js(Rn,Vn,Gn)),Rr(vn,En+96,16843009*js(Vn,Gn,Gn))}function Xu(vn,En){var jn,Rn=4;for(jn=0;4>jn;++jn)Rn+=vn[En+jn-32]+vn[En-1+32*jn];for(Rn>>=3,jn=0;4>jn;++jn)nn(vn,En+32*jn,Rn,4)}function Nl(vn,En){var jn=vn[En-1+0],Rn=vn[En-1+32],Vn=vn[En-1+64],Gn=vn[En-1-32],Hn=vn[En+0-32],Xn=vn[En+1-32],Jn=vn[En+2-32],nr=vn[En+3-32];vn[En+0+96]=js(Rn,Vn,vn[En-1+96]),vn[En+1+96]=vn[En+0+64]=js(jn,Rn,Vn),vn[En+2+96]=vn[En+1+64]=vn[En+0+32]=js(Gn,jn,Rn),vn[En+3+96]=vn[En+2+64]=vn[En+1+32]=vn[En+0+0]=js(Hn,Gn,jn),vn[En+3+64]=vn[En+2+32]=vn[En+1+0]=js(Xn,Hn,Gn),vn[En+3+32]=vn[En+2+0]=js(Jn,Xn,Hn),vn[En+3+0]=js(nr,Jn,Xn)}function Cl(vn,En){var jn=vn[En+1-32],Rn=vn[En+2-32],Vn=vn[En+3-32],Gn=vn[En+4-32],Hn=vn[En+5-32],Xn=vn[En+6-32],Jn=vn[En+7-32];vn[En+0+0]=js(vn[En+0-32],jn,Rn),vn[En+1+0]=vn[En+0+32]=js(jn,Rn,Vn),vn[En+2+0]=vn[En+1+32]=vn[En+0+64]=js(Rn,Vn,Gn),vn[En+3+0]=vn[En+2+32]=vn[En+1+64]=vn[En+0+96]=js(Vn,Gn,Hn),vn[En+3+32]=vn[En+2+64]=vn[En+1+96]=js(Gn,Hn,Xn),vn[En+3+64]=vn[En+2+96]=js(Hn,Xn,Jn),vn[En+3+96]=js(Xn,Jn,Jn)}function Qu(vn,En){var jn=vn[En-1+0],Rn=vn[En-1+32],Vn=vn[En-1+64],Gn=vn[En-1-32],Hn=vn[En+0-32],Xn=vn[En+1-32],Jn=vn[En+2-32],nr=vn[En+3-32];vn[En+0+0]=vn[En+1+64]=Gn+Hn+1>>1,vn[En+1+0]=vn[En+2+64]=Hn+Xn+1>>1,vn[En+2+0]=vn[En+3+64]=Xn+Jn+1>>1,vn[En+3+0]=Jn+nr+1>>1,vn[En+0+96]=js(Vn,Rn,jn),vn[En+0+64]=js(Rn,jn,Gn),vn[En+0+32]=vn[En+1+96]=js(jn,Gn,Hn),vn[En+1+32]=vn[En+2+96]=js(Gn,Hn,Xn),vn[En+2+32]=vn[En+3+96]=js(Hn,Xn,Jn),vn[En+3+32]=js(Xn,Jn,nr)}function Dn(vn,En){var jn=vn[En+0-32],Rn=vn[En+1-32],Vn=vn[En+2-32],Gn=vn[En+3-32],Hn=vn[En+4-32],Xn=vn[En+5-32],Jn=vn[En+6-32],nr=vn[En+7-32];vn[En+0+0]=jn+Rn+1>>1,vn[En+1+0]=vn[En+0+64]=Rn+Vn+1>>1,vn[En+2+0]=vn[En+1+64]=Vn+Gn+1>>1,vn[En+3+0]=vn[En+2+64]=Gn+Hn+1>>1,vn[En+0+32]=js(jn,Rn,Vn),vn[En+1+32]=vn[En+0+96]=js(Rn,Vn,Gn),vn[En+2+32]=vn[En+1+96]=js(Vn,Gn,Hn),vn[En+3+32]=vn[En+2+96]=js(Gn,Hn,Xn),vn[En+3+64]=js(Hn,Xn,Jn),vn[En+3+96]=js(Xn,Jn,nr)}function Wn(vn,En){var jn=vn[En-1+0],Rn=vn[En-1+32],Vn=vn[En-1+64],Gn=vn[En-1+96];vn[En+0+0]=jn+Rn+1>>1,vn[En+2+0]=vn[En+0+32]=Rn+Vn+1>>1,vn[En+2+32]=vn[En+0+64]=Vn+Gn+1>>1,vn[En+1+0]=js(jn,Rn,Vn),vn[En+3+0]=vn[En+1+32]=js(Rn,Vn,Gn),vn[En+3+32]=vn[En+1+64]=js(Vn,Gn,Gn),vn[En+3+64]=vn[En+2+64]=vn[En+0+96]=vn[En+1+96]=vn[En+2+96]=vn[En+3+96]=Gn}function tr(vn,En){var jn=vn[En-1+0],Rn=vn[En-1+32],Vn=vn[En-1+64],Gn=vn[En-1+96],Hn=vn[En-1-32],Xn=vn[En+0-32],Jn=vn[En+1-32],nr=vn[En+2-32];vn[En+0+0]=vn[En+2+32]=jn+Hn+1>>1,vn[En+0+32]=vn[En+2+64]=Rn+jn+1>>1,vn[En+0+64]=vn[En+2+96]=Vn+Rn+1>>1,vn[En+0+96]=Gn+Vn+1>>1,vn[En+3+0]=js(Xn,Jn,nr),vn[En+2+0]=js(Hn,Xn,Jn),vn[En+1+0]=vn[En+3+32]=js(jn,Hn,Xn),vn[En+1+32]=vn[En+3+64]=js(Rn,jn,Hn),vn[En+1+64]=vn[En+3+96]=js(Vn,Rn,jn),vn[En+1+96]=js(Gn,Vn,Rn)}function ur(vn,En){var jn;for(jn=0;8>jn;++jn)tn(vn,En+32*jn,vn,En-32,8)}function _r(vn,En){var jn;for(jn=0;8>jn;++jn)nn(vn,En,vn[En-1],8),En+=32}function Ar(vn,En,jn){var Rn;for(Rn=0;8>Rn;++Rn)nn(En,jn+32*Rn,vn,8)}function rs(vn,En){var jn,Rn=8;for(jn=0;8>jn;++jn)Rn+=vn[En+jn-32]+vn[En-1+32*jn];Ar(Rn>>4,vn,En)}function xs(vn,En){var jn,Rn=4;for(jn=0;8>jn;++jn)Rn+=vn[En+jn-32];Ar(Rn>>3,vn,En)}function Is(vn,En){var jn,Rn=4;for(jn=0;8>jn;++jn)Rn+=vn[En-1+32*jn];Ar(Rn>>3,vn,En)}function $s(vn,En){Ar(128,vn,En)}function Ks(vn,En,jn){var Rn=vn[En-jn],Vn=vn[En+0],Gn=3*(Vn-Rn)+Dp[1020+vn[En-2*jn]-vn[En+jn]],Hn=wp[112+(Gn+4>>3)];vn[En-jn]=yl[255+Rn+wp[112+(Gn+3>>3)]],vn[En+0]=yl[255+Vn-Hn]}function Uo(vn,En,jn,Rn){var Vn=vn[En+0],Gn=vn[En+jn];return Ol[255+vn[En-2*jn]-vn[En-jn]]>Rn||Ol[255+Gn-Vn]>Rn}function To(vn,En,jn,Rn){return 4*Ol[255+vn[En-jn]-vn[En+0]]+Ol[255+vn[En-2*jn]-vn[En+jn]]<=Rn}function jr(vn,En,jn,Rn,Vn){var Gn=vn[En-3*jn],Hn=vn[En-2*jn],Xn=vn[En-jn],Jn=vn[En+0],nr=vn[En+jn],fr=vn[En+2*jn],Tr=vn[En+3*jn];return 4*Ol[255+Xn-Jn]+Ol[255+Hn-nr]>Rn?0:Ol[255+vn[En-4*jn]-Gn]<=Vn&&Ol[255+Gn-Hn]<=Vn&&Ol[255+Hn-Xn]<=Vn&&Ol[255+Tr-fr]<=Vn&&Ol[255+fr-nr]<=Vn&&Ol[255+nr-Jn]<=Vn}function Ds(vn,En,jn,Rn){var Vn=2*Rn+1;for(Rn=0;16>Rn;++Rn)To(vn,En+Rn,jn,Vn)&&Ks(vn,En+Rn,jn)}function Qs(vn,En,jn,Rn){var Vn=2*Rn+1;for(Rn=0;16>Rn;++Rn)To(vn,En+Rn*jn,1,Vn)&&Ks(vn,En+Rn*jn,1)}function Jo(vn,En,jn,Rn){var Vn;for(Vn=3;0<Vn;--Vn)Ds(vn,En+=4*jn,jn,Rn)}function Dl(vn,En,jn,Rn){var Vn;for(Vn=3;0<Vn;--Vn)Qs(vn,En+=4,jn,Rn)}function Ql(vn,En,jn,Rn,Vn,Gn,Hn,Xn){for(Gn=2*Gn+1;0<Vn--;){if(jr(vn,En,jn,Gn,Hn))if(Uo(vn,En,jn,Xn))Ks(vn,En,jn);else{var Jn=vn,nr=En,fr=jn,Tr=Jn[nr-2*fr],rr=Jn[nr-fr],pr=Jn[nr+0],br=Jn[nr+fr],Lr=Jn[nr+2*fr],Sr=27*(Vr=Dp[1020+3*(pr-rr)+Dp[1020+Tr-br]])+63>>7,Br=18*Vr+63>>7,Vr=9*Vr+63>>7;Jn[nr-3*fr]=yl[255+Jn[nr-3*fr]+Vr],Jn[nr-2*fr]=yl[255+Tr+Br],Jn[nr-fr]=yl[255+rr+Sr],Jn[nr+0]=yl[255+pr-Sr],Jn[nr+fr]=yl[255+br-Br],Jn[nr+2*fr]=yl[255+Lr-Vr]}En+=Rn}}function Zl(vn,En,jn,Rn,Vn,Gn,Hn,Xn){for(Gn=2*Gn+1;0<Vn--;){if(jr(vn,En,jn,Gn,Hn))if(Uo(vn,En,jn,Xn))Ks(vn,En,jn);else{var Jn=vn,nr=En,fr=jn,Tr=Jn[nr-fr],rr=Jn[nr+0],pr=Jn[nr+fr],br=wp[112+(4+(Lr=3*(rr-Tr))>>3)],Lr=wp[112+(Lr+3>>3)],Sr=br+1>>1;Jn[nr-2*fr]=yl[255+Jn[nr-2*fr]+Sr],Jn[nr-fr]=yl[255+Tr+Lr],Jn[nr+0]=yl[255+rr-br],Jn[nr+fr]=yl[255+pr-Sr]}En+=Rn}}function gp(vn,En,jn,Rn,Vn,Gn){Ql(vn,En,jn,1,16,Rn,Vn,Gn)}function Mu(vn,En,jn,Rn,Vn,Gn){Ql(vn,En,1,jn,16,Rn,Vn,Gn)}function xp(vn,En,jn,Rn,Vn,Gn){var Hn;for(Hn=3;0<Hn;--Hn)Zl(vn,En+=4*jn,jn,1,16,Rn,Vn,Gn)}function kn(vn,En,jn,Rn,Vn,Gn){var Hn;for(Hn=3;0<Hn;--Hn)Zl(vn,En+=4,1,jn,16,Rn,Vn,Gn)}function Un(vn,En,jn,Rn,Vn,Gn,Hn,Xn){Ql(vn,En,Vn,1,8,Gn,Hn,Xn),Ql(jn,Rn,Vn,1,8,Gn,Hn,Xn)}function ir(vn,En,jn,Rn,Vn,Gn,Hn,Xn){Ql(vn,En,1,Vn,8,Gn,Hn,Xn),Ql(jn,Rn,1,Vn,8,Gn,Hn,Xn)}function dr(vn,En,jn,Rn,Vn,Gn,Hn,Xn){Zl(vn,En+4*Vn,Vn,1,8,Gn,Hn,Xn),Zl(jn,Rn+4*Vn,Vn,1,8,Gn,Hn,Xn)}function yr(vn,En,jn,Rn,Vn,Gn,Hn,Xn){Zl(vn,En+4,1,Vn,8,Gn,Hn,Xn),Zl(jn,Rn+4,1,Vn,8,Gn,Hn,Xn)}function Ur(){this.ba=new ms,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new is,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Hr(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ys(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ws(){this.ua=0,this.Wa=new hs,this.vb=new hs,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Bn,this.yc=new Fn}function Rs(){this.xb=this.a=0,this.l=new Ll,this.ca=new ms,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new On,this.Pb=0,this.wd=new On,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ws,this.ab=0,this.gc=on(4,ys),this.Oc=0}function Bs(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ll,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Hs(vn,En,jn,Rn,Vn,Gn,Hn){for(vn=vn==null?0:vn[En+0],En=0;En<Hn;++En)Vn[Gn+En]=vn+jn[Rn+En]&255,vn=Vn[Gn+En]}function mo(vn,En,jn,Rn,Vn,Gn,Hn){var Xn;if(vn==null)Hs(null,null,jn,Rn,Vn,Gn,Hn);else for(Xn=0;Xn<Hn;++Xn)Vn[Gn+Xn]=vn[En+Xn]+jn[Rn+Xn]&255}function Eo(vn,En,jn,Rn,Vn,Gn,Hn){if(vn==null)Hs(null,null,jn,Rn,Vn,Gn,Hn);else{var Xn,Jn=vn[En+0],nr=Jn,fr=Jn;for(Xn=0;Xn<Hn;++Xn)nr=fr+(Jn=vn[En+Xn])-nr,fr=jn[Rn+Xn]+(-256&nr?0>nr?0:255:nr)&255,nr=Jn,Vn[Gn+Xn]=fr}}function ro(vn,En,jn,Rn){var Vn=En.width,Gn=En.o;if(e(vn!=null&&En!=null),0>jn||0>=Rn||jn+Rn>Gn)return null;if(!vn.Cc){if(vn.ga==null){var Hn;if(vn.ga=new Bs,(Hn=vn.ga==null)||(Hn=En.width*En.o,e(vn.Gb.length==0),vn.Gb=sn(Hn),vn.Uc=0,vn.Gb==null?Hn=0:(vn.mb=vn.Gb,vn.nb=vn.Uc,vn.rc=null,Hn=1),Hn=!Hn),!Hn){Hn=vn.ga;var Xn=vn.Fa,Jn=vn.P,nr=vn.qc,fr=vn.mb,Tr=vn.nb,rr=Jn+1,pr=nr-1,br=Hn.l;if(e(Xn!=null&&fr!=null&&En!=null),Eu[0]=null,Eu[1]=Hs,Eu[2]=mo,Eu[3]=Eo,Hn.ca=fr,Hn.tb=Tr,Hn.c=En.width,Hn.i=En.height,e(0<Hn.c&&0<Hn.i),1>=nr)En=0;else if(Hn.$a=3&Xn[Jn+0],Hn.Z=Xn[Jn+0]>>2&3,Hn.Lc=Xn[Jn+0]>>4&3,Jn=Xn[Jn+0]>>6&3,0>Hn.$a||1<Hn.$a||4<=Hn.Z||1<Hn.Lc||Jn)En=0;else if(br.put=Ts,br.ac=Co,br.bc=qo,br.ma=Hn,br.width=En.width,br.height=En.height,br.Da=En.Da,br.v=En.v,br.va=En.va,br.j=En.j,br.o=En.o,Hn.$a)e:{e(Hn.$a==1),En=kr();t:for(;;){if(En==null){En=0;break e}if(e(Hn!=null),Hn.mc=En,En.c=Hn.c,En.i=Hn.i,En.l=Hn.l,En.l.ma=Hn,En.l.width=Hn.c,En.l.height=Hn.i,En.a=0,Qn(En.m,Xn,rr,pr),!Pr(Hn.c,Hn.i,1,En,null)||(En.ab==1&&En.gc[0].hc==3&&Oo(En.s)?(Hn.ic=1,Xn=En.c*En.i,En.Ta=null,En.Ua=0,En.V=sn(Xn),En.Ba=0,En.V==null?(En.a=1,En=0):En=1):(Hn.ic=0,En=_i(En,Hn.c)),!En))break t;En=1;break e}Hn.mc=null,En=0}else En=pr>=Hn.c*Hn.i;Hn=!En}if(Hn)return null;vn.ga.Lc!=1?vn.Ga=0:Rn=Gn-jn}e(vn.ga!=null),e(jn+Rn<=Gn);e:{if(En=(Xn=vn.ga).c,Gn=Xn.l.o,Xn.$a==0){if(rr=vn.rc,pr=vn.Vc,br=vn.Fa,Jn=vn.P+1+jn*En,nr=vn.mb,fr=vn.nb+jn*En,e(Jn<=vn.P+vn.qc),Xn.Z!=0)for(e(Eu[Xn.Z]!=null),Hn=0;Hn<Rn;++Hn)Eu[Xn.Z](rr,pr,br,Jn,nr,fr,En),rr=nr,pr=fr,fr+=En,Jn+=En;else for(Hn=0;Hn<Rn;++Hn)tn(nr,fr,br,Jn,En),rr=nr,pr=fr,fr+=En,Jn+=En;vn.rc=rr,vn.Vc=pr}else{if(e(Xn.mc!=null),En=jn+Rn,e((Hn=Xn.mc)!=null),e(En<=Hn.i),Hn.C>=En)En=1;else if(Xn.ic||Fl(),Xn.ic){Xn=Hn.V,rr=Hn.Ba,pr=Hn.c;var Lr=Hn.i,Sr=(br=1,Jn=Hn.$/pr,nr=Hn.$%pr,fr=Hn.m,Tr=Hn.s,Hn.$),Br=pr*Lr,Vr=pr*En,Zr=Tr.wc,Wr=Sr<Vr?fo(Tr,nr,Jn):null;e(Sr<=Br),e(En<=Lr),e(Oo(Tr));t:for(;;){for(;!fr.h&&Sr<Vr;){if(nr&Zr||(Wr=fo(Tr,nr,Jn)),e(Wr!=null),cr(fr),256>(Lr=eo(Wr.G[0],Wr.H[0],fr)))Xn[rr+Sr]=Lr,++Sr,++nr>=pr&&(nr=0,++Jn<=En&&!(Jn%16)&&or(Hn,Jn));else{if(!(280>Lr)){br=0;break t}Lr=Mo(Lr-256,fr);var Es,ps=eo(Wr.G[4],Wr.H[4],fr);if(cr(fr),!(Sr>=(ps=Ro(pr,ps=Mo(ps,fr)))&&Br-Sr>=Lr)){br=0;break t}for(Es=0;Es<Lr;++Es)Xn[rr+Sr+Es]=Xn[rr+Sr+Es-ps];for(Sr+=Lr,nr+=Lr;nr>=pr;)nr-=pr,++Jn<=En&&!(Jn%16)&&or(Hn,Jn);Sr<Vr&&nr&Zr&&(Wr=fo(Tr,nr,Jn))}e(fr.h==sr(fr))}or(Hn,Jn>En?En:Jn);break t}!br||fr.h&&Sr<Br?(br=0,Hn.a=fr.h?5:3):Hn.$=Sr,En=br}else En=hr(Hn,Hn.V,Hn.Ba,Hn.c,Hn.i,En,gs);if(!En){Rn=0;break e}}jn+Rn>=Gn&&(vn.Cc=1),Rn=1}if(!Rn)return null;if(vn.Cc&&((Rn=vn.ga)!=null&&(Rn.mc=null),vn.ga=null,0<vn.Ga))return alert("todo:WebPDequantizeLevels"),null}return vn.nb+jn*Vn}function ko(vn,En,jn,Rn,Vn,Gn){for(;0<Vn--;){var Hn,Xn=vn,Jn=En+(jn?1:0),nr=vn,fr=En+(jn?0:3);for(Hn=0;Hn<Rn;++Hn){var Tr=nr[fr+4*Hn];Tr!=255&&(Tr*=32897,Xn[Jn+4*Hn+0]=Xn[Jn+4*Hn+0]*Tr>>23,Xn[Jn+4*Hn+1]=Xn[Jn+4*Hn+1]*Tr>>23,Xn[Jn+4*Hn+2]=Xn[Jn+4*Hn+2]*Tr>>23)}En+=Gn}}function So(vn,En,jn,Rn,Vn){for(;0<Rn--;){var Gn;for(Gn=0;Gn<jn;++Gn){var Hn=vn[En+2*Gn+0],Xn=15&(nr=vn[En+2*Gn+1]),Jn=4369*Xn,nr=(240&nr|nr>>4)*Jn>>16;vn[En+2*Gn+0]=(240&Hn|Hn>>4)*Jn>>16&240|(15&Hn|Hn<<4)*Jn>>16>>4&15,vn[En+2*Gn+1]=240&nr|Xn}En+=Vn}}function Lo(vn,En,jn,Rn,Vn,Gn,Hn,Xn){var Jn,nr,fr=255;for(nr=0;nr<Vn;++nr){for(Jn=0;Jn<Rn;++Jn){var Tr=vn[En+Jn];Gn[Hn+4*Jn]=Tr,fr&=Tr}En+=jn,Hn+=Xn}return fr!=255}function Jl(vn,En,jn,Rn,Vn){var Gn;for(Gn=0;Gn<Vn;++Gn)jn[Rn+Gn]=vn[En+Gn]>>8}function Fl(){cp=ko,sm=So,om=Lo,am=Jl}function eu(vn,En,jn){Sn[vn]=function(Rn,Vn,Gn,Hn,Xn,Jn,nr,fr,Tr,rr,pr,br,Lr,Sr,Br,Vr,Zr){var Wr,Es=Zr-1>>1,ps=Xn[Jn+0]|nr[fr+0]<<16,zs=Tr[rr+0]|pr[br+0]<<16;e(Rn!=null);var bs=3*ps+zs+131074>>2;for(En(Rn[Vn+0],255&bs,bs>>16,Lr,Sr),Gn!=null&&(bs=3*zs+ps+131074>>2,En(Gn[Hn+0],255&bs,bs>>16,Br,Vr)),Wr=1;Wr<=Es;++Wr){var Vs=Xn[Jn+Wr]|nr[fr+Wr]<<16,Po=Tr[rr+Wr]|pr[br+Wr]<<16,Us=ps+Vs+zs+Po+524296,vs=Us+2*(Vs+zs)>>3;bs=vs+ps>>1,ps=(Us=Us+2*(ps+Po)>>3)+Vs>>1,En(Rn[Vn+2*Wr-1],255&bs,bs>>16,Lr,Sr+(2*Wr-1)*jn),En(Rn[Vn+2*Wr-0],255&ps,ps>>16,Lr,Sr+(2*Wr-0)*jn),Gn!=null&&(bs=Us+zs>>1,ps=vs+Po>>1,En(Gn[Hn+2*Wr-1],255&bs,bs>>16,Br,Vr+(2*Wr-1)*jn),En(Gn[Hn+2*Wr+0],255&ps,ps>>16,Br,Vr+(2*Wr+0)*jn)),ps=Vs,zs=Po}1&Zr||(bs=3*ps+zs+131074>>2,En(Rn[Vn+Zr-1],255&bs,bs>>16,Lr,Sr+(Zr-1)*jn),Gn!=null&&(bs=3*zs+ps+131074>>2,En(Gn[Hn+Zr-1],255&bs,bs>>16,Br,Vr+(Zr-1)*jn)))}}function _f(){Il[_p]=Jm,Il[Ep]=ym,Il[fm]=_g,Il[Sp]=bm,Il[Tp]=vm,Il[Fp]=wm,Il[pm]=e0,Il[$p]=ym,Il[Bp]=bm,Il[kp]=vm,Il[zp]=wm}function Zu(vn){return vn&-16384?0>vn?0:255:vn>>t0}function fu(vn,En){return Zu((19077*vn>>8)+(26149*En>>8)-14234)}function Ru(vn,En,jn){return Zu((19077*vn>>8)-(6419*En>>8)-(13320*jn>>8)+8708)}function Ou(vn,En){return Zu((19077*vn>>8)+(33050*En>>8)-17685)}function pu(vn,En,jn,Rn,Vn){Rn[Vn+0]=fu(vn,jn),Rn[Vn+1]=Ru(vn,En,jn),Rn[Vn+2]=Ou(vn,En)}function Do(vn,En,jn,Rn,Vn){Rn[Vn+0]=Ou(vn,En),Rn[Vn+1]=Ru(vn,En,jn),Rn[Vn+2]=fu(vn,jn)}function Iu(vn,En,jn,Rn,Vn){var Gn=Ru(vn,En,jn);En=Gn<<3&224|Ou(vn,En)>>3,Rn[Vn+0]=248&fu(vn,jn)|Gn>>5,Rn[Vn+1]=En}function Lu(vn,En,jn,Rn,Vn){var Gn=240&Ou(vn,En)|15;Rn[Vn+0]=240&fu(vn,jn)|Ru(vn,En,jn)>>4,Rn[Vn+1]=Gn}function ep(vn,En,jn,Rn,Vn){Rn[Vn+0]=255,pu(vn,En,jn,Rn,Vn+1)}function tp(vn,En,jn,Rn,Vn){Do(vn,En,jn,Rn,Vn),Rn[Vn+3]=255}function Wo(vn,En,jn,Rn,Vn){pu(vn,En,jn,Rn,Vn),Rn[Vn+3]=255}function tu(vn,En,jn){Sn[vn]=function(Rn,Vn,Gn,Hn,Xn,Jn,nr,fr,Tr){for(var rr=fr+(-2&Tr)*jn;fr!=rr;)En(Rn[Vn+0],Gn[Hn+0],Xn[Jn+0],nr,fr),En(Rn[Vn+1],Gn[Hn+0],Xn[Jn+0],nr,fr+jn),Vn+=2,++Hn,++Jn,fr+=2*jn;1&Tr&&En(Rn[Vn+0],Gn[Hn+0],Xn[Jn+0],nr,fr)}}function Ju(vn,En,jn){return jn==0?vn==0?En==0?6:5:En==0?4:0:jn}function yp(vn,En,jn,Rn,Vn){switch(vn>>>30){case 3:Bu(En,jn,Rn,Vn,0);break;case 2:Rl(En,jn,Rn,Vn);break;case 1:Xs(En,jn,Rn,Vn)}}function Ml(vn,En){var jn,Rn,Vn=En.M,Gn=En.Nb,Hn=vn.oc,Xn=vn.pc+40,Jn=vn.oc,nr=vn.pc+584,fr=vn.oc,Tr=vn.pc+600;for(jn=0;16>jn;++jn)Hn[Xn+32*jn-1]=129;for(jn=0;8>jn;++jn)Jn[nr+32*jn-1]=129,fr[Tr+32*jn-1]=129;for(0<Vn?Hn[Xn-1-32]=Jn[nr-1-32]=fr[Tr-1-32]=129:(nn(Hn,Xn-32-1,127,21),nn(Jn,nr-32-1,127,9),nn(fr,Tr-32-1,127,9)),Rn=0;Rn<vn.za;++Rn){var rr=En.ya[En.aa+Rn];if(0<Rn){for(jn=-1;16>jn;++jn)tn(Hn,Xn+32*jn-4,Hn,Xn+32*jn+12,4);for(jn=-1;8>jn;++jn)tn(Jn,nr+32*jn-4,Jn,nr+32*jn+4,4),tn(fr,Tr+32*jn-4,fr,Tr+32*jn+4,4)}var pr=vn.Gd,br=vn.Hd+Rn,Lr=rr.ad,Sr=rr.Hc;if(0<Vn&&(tn(Hn,Xn-32,pr[br].y,0,16),tn(Jn,nr-32,pr[br].f,0,8),tn(fr,Tr-32,pr[br].ea,0,8)),rr.Za){var Br=Hn,Vr=Xn-32+16;for(0<Vn&&(Rn>=vn.za-1?nn(Br,Vr,pr[br].y[15],4):tn(Br,Vr,pr[br+1].y,0,4)),jn=0;4>jn;jn++)Br[Vr+128+jn]=Br[Vr+256+jn]=Br[Vr+384+jn]=Br[Vr+0+jn];for(jn=0;16>jn;++jn,Sr<<=2)Br=Hn,Vr=Xn+Em[jn],$l[rr.Ob[jn]](Br,Vr),yp(Sr,Lr,16*+jn,Br,Vr)}else if(Br=Ju(Rn,Vn,rr.Ob[0]),_u[Br](Hn,Xn),Sr!=0)for(jn=0;16>jn;++jn,Sr<<=2)yp(Sr,Lr,16*+jn,Hn,Xn+Em[jn]);for(jn=rr.Gc,Br=Ju(Rn,Vn,rr.Dd),iu[Br](Jn,nr),iu[Br](fr,Tr),Sr=Lr,Br=Jn,Vr=nr,255&(rr=0|jn)&&(170&rr?Hl(Sr,256,Br,Vr):to(Sr,256,Br,Vr)),rr=fr,Sr=Tr,255&(jn>>=8)&&(170&jn?Hl(Lr,320,rr,Sr):to(Lr,320,rr,Sr)),Vn<vn.Ub-1&&(tn(pr[br].y,0,Hn,Xn+480,16),tn(pr[br].f,0,Jn,nr+224,8),tn(pr[br].ea,0,fr,Tr+224,8)),jn=8*Gn*vn.B,pr=vn.sa,br=vn.ta+16*Rn+16*Gn*vn.R,Lr=vn.qa,rr=vn.ra+8*Rn+jn,Sr=vn.Ha,Br=vn.Ia+8*Rn+jn,jn=0;16>jn;++jn)tn(pr,br+jn*vn.R,Hn,Xn+32*jn,16);for(jn=0;8>jn;++jn)tn(Lr,rr+jn*vn.B,Jn,nr+32*jn,8),tn(Sr,Br+jn*vn.B,fr,Tr+32*jn,8)}}function Du(vn,En,jn,Rn,Vn,Gn,Hn,Xn,Jn){var nr=[0],fr=[0],Tr=0,rr=Jn!=null?Jn.kd:0,pr=Jn??new Hr;if(vn==null||12>jn)return 7;pr.data=vn,pr.w=En,pr.ha=jn,En=[En],jn=[jn],pr.gb=[pr.gb];e:{var br=En,Lr=jn,Sr=pr.gb;if(e(vn!=null),e(Lr!=null),e(Sr!=null),Sr[0]=0,12<=Lr[0]&&!en(vn,br[0],"RIFF")){if(en(vn,br[0]+8,"WEBP")){Sr=3;break e}var Br=Gr(vn,br[0]+4);if(12>Br||4294967286<Br){Sr=3;break e}if(rr&&Br>Lr[0]-8){Sr=7;break e}Sr[0]=Br,br[0]+=12,Lr[0]-=12}Sr=0}if(Sr!=0)return Sr;for(Br=0<pr.gb[0],jn=jn[0];;){e:{var Vr=vn;Lr=En,Sr=jn;var Zr=nr,Wr=fr,Es=br=[0];if((bs=Tr=[Tr])[0]=0,8>Sr[0])Sr=7;else{if(!en(Vr,Lr[0],"VP8X")){if(Gr(Vr,Lr[0]+4)!=10){Sr=3;break e}if(18>Sr[0]){Sr=7;break e}var ps=Gr(Vr,Lr[0]+8),zs=1+Cr(Vr,Lr[0]+12);if(2147483648<=zs*(Vr=1+Cr(Vr,Lr[0]+15))){Sr=3;break e}Es!=null&&(Es[0]=ps),Zr!=null&&(Zr[0]=zs),Wr!=null&&(Wr[0]=Vr),Lr[0]+=18,Sr[0]-=18,bs[0]=1}Sr=0}}if(Tr=Tr[0],br=br[0],Sr!=0)return Sr;if(Lr=!!(2&br),!Br&&Tr)return 3;if(Gn!=null&&(Gn[0]=!!(16&br)),Hn!=null&&(Hn[0]=Lr),Xn!=null&&(Xn[0]=0),Hn=nr[0],br=fr[0],Tr&&Lr&&Jn==null){Sr=0;break}if(4>jn){Sr=7;break}if(Br&&Tr||!Br&&!Tr&&!en(vn,En[0],"ALPH")){jn=[jn],pr.na=[pr.na],pr.P=[pr.P],pr.Sa=[pr.Sa];e:{ps=vn,Sr=En,Br=jn;var bs=pr.gb;Zr=pr.na,Wr=pr.P,Es=pr.Sa,zs=22,e(ps!=null),e(Br!=null),Vr=Sr[0];var Vs=Br[0];for(e(Zr!=null),e(Es!=null),Zr[0]=null,Wr[0]=null,Es[0]=0;;){if(Sr[0]=Vr,Br[0]=Vs,8>Vs){Sr=7;break e}var Po=Gr(ps,Vr+4);if(4294967286<Po){Sr=3;break e}var Us=8+Po+1&-2;if(zs+=Us,0<bs&&zs>bs){Sr=3;break e}if(!en(ps,Vr,"VP8 ")||!en(ps,Vr,"VP8L")){Sr=0;break e}if(Vs[0]<Us){Sr=7;break e}en(ps,Vr,"ALPH")||(Zr[0]=ps,Wr[0]=Vr+8,Es[0]=Po),Vr+=Us,Vs-=Us}}if(jn=jn[0],pr.na=pr.na[0],pr.P=pr.P[0],pr.Sa=pr.Sa[0],Sr!=0)break}jn=[jn],pr.Ja=[pr.Ja],pr.xa=[pr.xa];e:if(bs=vn,Sr=En,Br=jn,Zr=pr.gb[0],Wr=pr.Ja,Es=pr.xa,ps=Sr[0],Vr=!en(bs,ps,"VP8 "),zs=!en(bs,ps,"VP8L"),e(bs!=null),e(Br!=null),e(Wr!=null),e(Es!=null),8>Br[0])Sr=7;else{if(Vr||zs){if(bs=Gr(bs,ps+4),12<=Zr&&bs>Zr-12){Sr=3;break e}if(rr&&bs>Br[0]-8){Sr=7;break e}Wr[0]=bs,Sr[0]+=8,Br[0]-=8,Es[0]=zs}else Es[0]=5<=Br[0]&&bs[ps+0]==47&&!(bs[ps+4]>>5),Wr[0]=Br[0];Sr=0}if(jn=jn[0],pr.Ja=pr.Ja[0],pr.xa=pr.xa[0],En=En[0],Sr!=0)break;if(4294967286<pr.Ja)return 3;if(Xn==null||Lr||(Xn[0]=pr.xa?2:1),Hn=[Hn],br=[br],pr.xa){if(5>jn){Sr=7;break}Xn=Hn,rr=br,Lr=Gn,vn==null||5>jn?vn=0:5<=jn&&vn[En+0]==47&&!(vn[En+4]>>5)?(Br=[0],bs=[0],Zr=[0],Qn(Wr=new On,vn,En,jn),Go(Wr,Br,bs,Zr)?(Xn!=null&&(Xn[0]=Br[0]),rr!=null&&(rr[0]=bs[0]),Lr!=null&&(Lr[0]=Zr[0]),vn=1):vn=0):vn=0}else{if(10>jn){Sr=7;break}Xn=br,vn==null||10>jn||!Nu(vn,En+3,jn-3)?vn=0:(rr=vn[En+0]|vn[En+1]<<8|vn[En+2]<<16,Lr=16383&(vn[En+7]<<8|vn[En+6]),vn=16383&(vn[En+9]<<8|vn[En+8]),1&rr||3<(rr>>1&7)||!(rr>>4&1)||rr>>5>=pr.Ja||!Lr||!vn?vn=0:(Hn&&(Hn[0]=Lr),Xn&&(Xn[0]=vn),vn=1))}if(!vn||(Hn=Hn[0],br=br[0],Tr&&(nr[0]!=Hn||fr[0]!=br)))return 3;Jn!=null&&(Jn[0]=pr,Jn.offset=En-Jn.w,e(4294967286>En-Jn.w),e(Jn.offset==Jn.ha-jn));break}return Sr==0||Sr==7&&Tr&&Jn==null?(Gn!=null&&(Gn[0]|=pr.na!=null&&0<pr.na.length),Rn!=null&&(Rn[0]=Hn),Vn!=null&&(Vn[0]=br),0):Sr}function np(vn,En,jn){var Rn=En.width,Vn=En.height,Gn=0,Hn=0,Xn=Rn,Jn=Vn;if(En.Da=vn!=null&&0<vn.Da,En.Da&&(Xn=vn.cd,Jn=vn.bd,Gn=vn.v,Hn=vn.j,11>jn||(Gn&=-2,Hn&=-2),0>Gn||0>Hn||0>=Xn||0>=Jn||Gn+Xn>Rn||Hn+Jn>Vn))return 0;if(En.v=Gn,En.j=Hn,En.va=Gn+Xn,En.o=Hn+Jn,En.U=Xn,En.T=Jn,En.da=vn!=null&&0<vn.da,En.da){if(!us(Xn,Jn,jn=[vn.ib],Gn=[vn.hb]))return 0;En.ib=jn[0],En.hb=Gn[0]}return En.ob=vn!=null&&vn.ob,En.Kb=vn==null||!vn.Sd,En.da&&(En.ob=En.ib<3*Rn/4&&En.hb<3*Vn/4,En.Kb=0),1}function rp(vn){if(vn==null)return 2;if(11>vn.S){var En=vn.f.RGBA;En.fb+=(vn.height-1)*En.A,En.A=-En.A}else En=vn.f.kb,vn=vn.height,En.O+=(vn-1)*En.fa,En.fa=-En.fa,En.N+=(vn-1>>1)*En.Ab,En.Ab=-En.Ab,En.W+=(vn-1>>1)*En.Db,En.Db=-En.Db,En.F!=null&&(En.J+=(vn-1)*En.lb,En.lb=-En.lb);return 0}function mu(vn,En,jn,Rn){if(Rn==null||0>=vn||0>=En)return 2;if(jn!=null){if(jn.Da){var Vn=jn.cd,Gn=jn.bd,Hn=-2&jn.v,Xn=-2&jn.j;if(0>Hn||0>Xn||0>=Vn||0>=Gn||Hn+Vn>vn||Xn+Gn>En)return 2;vn=Vn,En=Gn}if(jn.da){if(!us(vn,En,Vn=[jn.ib],Gn=[jn.hb]))return 2;vn=Vn[0],En=Gn[0]}}Rn.width=vn,Rn.height=En;e:{var Jn=Rn.width,nr=Rn.height;if(vn=Rn.S,0>=Jn||0>=nr||!(vn>=_p&&13>vn))vn=2;else{if(0>=Rn.Rd&&Rn.sd==null){Hn=Gn=Vn=En=0;var fr=(Xn=Jn*Sm[vn])*nr;if(11>vn||(Gn=(nr+1)/2*(En=(Jn+1)/2),vn==12&&(Hn=(Vn=Jn)*nr)),(nr=sn(fr+2*Gn+Hn))==null){vn=1;break e}Rn.sd=nr,11>vn?((Jn=Rn.f.RGBA).eb=nr,Jn.fb=0,Jn.A=Xn,Jn.size=fr):((Jn=Rn.f.kb).y=nr,Jn.O=0,Jn.fa=Xn,Jn.Fd=fr,Jn.f=nr,Jn.N=0+fr,Jn.Ab=En,Jn.Cd=Gn,Jn.ea=nr,Jn.W=0+fr+Gn,Jn.Db=En,Jn.Ed=Gn,vn==12&&(Jn.F=nr,Jn.J=0+fr+2*Gn),Jn.Tc=Hn,Jn.lb=Vn)}if(En=1,Vn=Rn.S,Gn=Rn.width,Hn=Rn.height,Vn>=_p&&13>Vn)if(11>Vn)vn=Rn.f.RGBA,En&=(Xn=Math.abs(vn.A))*(Hn-1)+Gn<=vn.size,En&=Xn>=Gn*Sm[Vn],En&=vn.eb!=null;else{vn=Rn.f.kb,Xn=(Gn+1)/2,fr=(Hn+1)/2,Jn=Math.abs(vn.fa),nr=Math.abs(vn.Ab);var Tr=Math.abs(vn.Db),rr=Math.abs(vn.lb),pr=rr*(Hn-1)+Gn;En&=Jn*(Hn-1)+Gn<=vn.Fd,En&=nr*(fr-1)+Xn<=vn.Cd,En=(En&=Tr*(fr-1)+Xn<=vn.Ed)&Jn>=Gn&nr>=Xn&Tr>=Xn,En&=vn.y!=null,En&=vn.f!=null,En&=vn.ea!=null,Vn==12&&(En&=rr>=Gn,En&=pr<=vn.Tc,En&=vn.F!=null)}else En=0;vn=En?0:2}}return vn!=0||jn!=null&&jn.fd&&(vn=rp(Rn)),vn}var Fu=64,$a=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],xl=24,gu=32,nu=8,xu=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];wr("Predictor0","PredictorAdd0"),Sn.Predictor0=function(){return 4278190080},Sn.Predictor1=function(vn){return vn},Sn.Predictor2=function(vn,En,jn){return En[jn+0]},Sn.Predictor3=function(vn,En,jn){return En[jn+1]},Sn.Predictor4=function(vn,En,jn){return En[jn-1]},Sn.Predictor5=function(vn,En,jn){return Qr(Qr(vn,En[jn+1]),En[jn+0])},Sn.Predictor6=function(vn,En,jn){return Qr(vn,En[jn-1])},Sn.Predictor7=function(vn,En,jn){return Qr(vn,En[jn+0])},Sn.Predictor8=function(vn,En,jn){return Qr(En[jn-1],En[jn+0])},Sn.Predictor9=function(vn,En,jn){return Qr(En[jn+0],En[jn+1])},Sn.Predictor10=function(vn,En,jn){return Qr(Qr(vn,En[jn-1]),Qr(En[jn+0],En[jn+1]))},Sn.Predictor11=function(vn,En,jn){var Rn=En[jn+0];return 0>=xr(Rn>>24&255,vn>>24&255,(En=En[jn-1])>>24&255)+xr(Rn>>16&255,vn>>16&255,En>>16&255)+xr(Rn>>8&255,vn>>8&255,En>>8&255)+xr(255&Rn,255&vn,255&En)?Rn:vn},Sn.Predictor12=function(vn,En,jn){var Rn=En[jn+0];return(fs((vn>>24&255)+(Rn>>24&255)-((En=En[jn-1])>>24&255))<<24|fs((vn>>16&255)+(Rn>>16&255)-(En>>16&255))<<16|fs((vn>>8&255)+(Rn>>8&255)-(En>>8&255))<<8|fs((255&vn)+(255&Rn)-(255&En)))>>>0},Sn.Predictor13=function(vn,En,jn){var Rn=En[jn-1];return(os((vn=Qr(vn,En[jn+0]))>>24&255,Rn>>24&255)<<24|os(vn>>16&255,Rn>>16&255)<<16|os(vn>>8&255,Rn>>8&255)<<8|os(255&vn,255&Rn))>>>0};var ip=Sn.PredictorAdd0;Sn.PredictorAdd1=Or,wr("Predictor2","PredictorAdd2"),wr("Predictor3","PredictorAdd3"),wr("Predictor4","PredictorAdd4"),wr("Predictor5","PredictorAdd5"),wr("Predictor6","PredictorAdd6"),wr("Predictor7","PredictorAdd7"),wr("Predictor8","PredictorAdd8"),wr("Predictor9","PredictorAdd9"),wr("Predictor10","PredictorAdd10"),wr("Predictor11","PredictorAdd11"),wr("Predictor12","PredictorAdd12"),wr("Predictor13","PredictorAdd13");var _c=Sn.PredictorAdd2;as("ColorIndexInverseTransform","MapARGB","32b",function(vn){return vn>>8&255},function(vn){return vn}),as("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(vn){return vn},function(vn){return vn>>8&255});var bo,bp=Sn.ColorIndexInverseTransform,Vl=Sn.MapARGB,Gl=Sn.VP8LColorIndexInverseTransformAlpha,sp=Sn.MapAlpha,op=Sn.VP8LPredictorsAdd=[];op.length=16,(Sn.VP8LPredictors=[]).length=16,(Sn.VP8LPredictorsAdd_C=[]).length=16,(Sn.VP8LPredictors_C=[]).length=16;var ap,lp,yu,bu,vu,$u,wu,Bu,Rl,Hl,Xs,to,vo,Ao,ru,up,_d,vp,Jp,em,tm,nm,rm,im,cp,sm,om,am,lm=sn(511),um=sn(2041),cm=sn(225),dm=sn(767),hm=0,Dp=um,wp=cm,yl=dm,Ol=lm,_p=0,Ep=1,fm=2,Sp=3,Tp=4,Fp=5,pm=6,$p=7,Bp=8,kp=9,zp=10,$m=[2,3,7],Bm=[3,3,11],mm=[280,256,256,256,40],zm=[0,1,1,1,0],Um=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Vm=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],qm=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Gm=8,Up=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Vp=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],dp=null,Hm=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Wm=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],gm=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Ym=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Km=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Xm=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Qm=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],_u=[],$l=[],iu=[],Zm=1,xm=2,Eu=[],Il=[];eu("UpsampleRgbLinePair",pu,3),eu("UpsampleBgrLinePair",Do,3),eu("UpsampleRgbaLinePair",Wo,4),eu("UpsampleBgraLinePair",tp,4),eu("UpsampleArgbLinePair",ep,4),eu("UpsampleRgba4444LinePair",Lu,2),eu("UpsampleRgb565LinePair",Iu,2);var Jm=Sn.UpsampleRgbLinePair,_g=Sn.UpsampleBgrLinePair,ym=Sn.UpsampleRgbaLinePair,bm=Sn.UpsampleBgraLinePair,vm=Sn.UpsampleArgbLinePair,wm=Sn.UpsampleRgba4444LinePair,e0=Sn.UpsampleRgb565LinePair,Ap=16,Pp=1<<Ap-1,hp=-227,qp=482,t0=6,_m=0,n0=sn(256),r0=sn(256),i0=sn(256),s0=sn(256),o0=sn(qp-hp),a0=sn(qp-hp);tu("YuvToRgbRow",pu,3),tu("YuvToBgrRow",Do,3),tu("YuvToRgbaRow",Wo,4),tu("YuvToBgraRow",tp,4),tu("YuvToArgbRow",ep,4),tu("YuvToRgba4444Row",Lu,2),tu("YuvToRgb565Row",Iu,2);var Em=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Np=[0,2,8],l0=[8,7,6,4,4,2,2,2,1,1,1,1],u0=1;this.WebPDecodeRGBA=function(vn,En,jn,Rn,Vn){var Gn=Ep,Hn=new Ur,Xn=new ms;Hn.ba=Xn,Xn.S=Gn,Xn.width=[Xn.width],Xn.height=[Xn.height];var Jn=Xn.width,nr=Xn.height,fr=new Yr;if(fr==null||vn==null)var Tr=2;else e(fr!=null),Tr=Du(vn,En,jn,fr.width,fr.height,fr.Pd,fr.Qd,fr.format,null);if(Tr!=0?Jn=0:(Jn!=null&&(Jn[0]=fr.width[0]),nr!=null&&(nr[0]=fr.height[0]),Jn=1),Jn){Xn.width=Xn.width[0],Xn.height=Xn.height[0],Rn!=null&&(Rn[0]=Xn.width),Vn!=null&&(Vn[0]=Xn.height);e:{if(Rn=new Ll,(Vn=new Hr).data=vn,Vn.w=En,Vn.ha=jn,Vn.kd=1,En=[0],e(Vn!=null),((vn=Du(Vn.data,Vn.w,Vn.ha,null,null,null,En,null,Vn))==0||vn==7)&&En[0]&&(vn=4),(En=vn)==0){if(e(Hn!=null),Rn.data=Vn.data,Rn.w=Vn.w+Vn.offset,Rn.ha=Vn.ha-Vn.offset,Rn.put=Ts,Rn.ac=Co,Rn.bc=qo,Rn.ma=Hn,Vn.xa){if((vn=kr())==null){Hn=1;break e}if(function(rr,pr){var br=[0],Lr=[0],Sr=[0];t:for(;;){if(rr==null)return 0;if(pr==null)return rr.a=2,0;if(rr.l=pr,rr.a=0,Qn(rr.m,pr.data,pr.w,pr.ha),!Go(rr.m,br,Lr,Sr)){rr.a=3;break t}if(rr.xb=xm,pr.width=br[0],pr.height=Lr[0],!Pr(br[0],Lr[0],1,rr,null))break t;return 1}return e(rr.a!=0),0}(vn,Rn)){if(Rn=(En=mu(Rn.width,Rn.height,Hn.Oa,Hn.ba))==0){t:{Rn=vn;n:for(;;){if(Rn==null){Rn=0;break t}if(e(Rn.s.yc!=null),e(Rn.s.Ya!=null),e(0<Rn.s.Wb),e((jn=Rn.l)!=null),e((Vn=jn.ma)!=null),Rn.xb!=0){if(Rn.ca=Vn.ba,Rn.tb=Vn.tb,e(Rn.ca!=null),!np(Vn.Oa,jn,Sp)){Rn.a=2;break n}if(!_i(Rn,jn.width)||jn.da)break n;if((jn.da||Dr(Rn.ca.S))&&Fl(),11>Rn.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Rn.ca.f.kb.F!=null&&Fl()),Rn.Pb&&0<Rn.s.ua&&Rn.s.vb.X==null&&!Zn(Rn.s.vb,Rn.s.Wa.Xa)){Rn.a=1;break n}Rn.xb=0}if(!hr(Rn,Rn.V,Rn.Ba,Rn.c,Rn.i,jn.o,Qo))break n;Vn.Dc=Rn.Ma,Rn=1;break t}e(Rn.a!=0),Rn=0}Rn=!Rn}Rn&&(En=vn.a)}else En=vn.a}else{if((vn=new Vu)==null){Hn=1;break e}if(vn.Fa=Vn.na,vn.P=Vn.P,vn.qc=Vn.Sa,Al(vn,Rn)){if((En=mu(Rn.width,Rn.height,Hn.Oa,Hn.ba))==0){if(vn.Aa=0,jn=Hn.Oa,e((Vn=vn)!=null),jn!=null){if(0<(Jn=0>(Jn=jn.Md)?0:100<Jn?255:255*Jn/100)){for(nr=fr=0;4>nr;++nr)12>(Tr=Vn.pb[nr]).lc&&(Tr.ia=Jn*l0[0>Tr.lc?0:Tr.lc]>>3),fr|=Tr.ia;fr&&(alert("todo:VP8InitRandom"),Vn.ia=1)}Vn.Ga=jn.Id,100<Vn.Ga?Vn.Ga=100:0>Vn.Ga&&(Vn.Ga=0)}(function(rr,pr){if(rr==null)return 0;if(pr==null)return po(rr,2,"NULL VP8Io parameter in VP8Decode().");if(!rr.cb&&!Al(rr,pr))return 0;if(e(rr.cb),pr.ac==null||pr.ac(pr)){pr.ob&&(rr.L=0);var br=Np[rr.L];if(rr.L==2?(rr.yb=0,rr.zb=0):(rr.yb=pr.v-br>>4,rr.zb=pr.j-br>>4,0>rr.yb&&(rr.yb=0),0>rr.zb&&(rr.zb=0)),rr.Va=pr.o+15+br>>4,rr.Hb=pr.va+15+br>>4,rr.Hb>rr.za&&(rr.Hb=rr.za),rr.Va>rr.Ub&&(rr.Va=rr.Ub),0<rr.L){var Lr=rr.ed;for(br=0;4>br;++br){var Sr;if(rr.Qa.Cb){var Br=rr.Qa.Lb[br];rr.Qa.Fb||(Br+=Lr.Tb)}else Br=Lr.Tb;for(Sr=0;1>=Sr;++Sr){var Vr=rr.gd[br][Sr],Zr=Br;if(Lr.Pc&&(Zr+=Lr.vd[0],Sr&&(Zr+=Lr.od[0])),0<(Zr=0>Zr?0:63<Zr?63:Zr)){var Wr=Zr;0<Lr.wb&&(Wr=4<Lr.wb?Wr>>2:Wr>>1)>9-Lr.wb&&(Wr=9-Lr.wb),1>Wr&&(Wr=1),Vr.dd=Wr,Vr.tc=2*Zr+Wr,Vr.ld=40<=Zr?2:15<=Zr?1:0}else Vr.tc=0;Vr.La=Sr}}}br=0}else po(rr,6,"Frame setup failed"),br=rr.a;if(br=br==0){if(br){rr.$c=0,0<rr.Aa||(rr.Ic=u0);t:{br=rr.Ic,Lr=4*(Wr=rr.za);var Es=32*Wr,ps=Wr+1,zs=0<rr.L?Wr*(0<rr.Aa?2:1):0,bs=(rr.Aa==2?2:1)*Wr;if((Vr=Lr+832+(Sr=3*(16*br+Np[rr.L])/2*Es)+(Br=rr.Fa!=null&&0<rr.Fa.length?rr.Kc.c*rr.Kc.i:0))!=Vr)br=0;else{if(Vr>rr.Vb){if(rr.Vb=0,rr.Ec=sn(Vr),rr.Fc=0,rr.Ec==null){br=po(rr,1,"no memory during frame initialization.");break t}rr.Vb=Vr}Vr=rr.Ec,Zr=rr.Fc,rr.Ac=Vr,rr.Bc=Zr,Zr+=Lr,rr.Gd=on(Es,lu),rr.Hd=0,rr.rb=on(ps+1,Ys),rr.sb=1,rr.wa=zs?on(zs,Ps):null,rr.Y=0,rr.D.Nb=0,rr.D.wa=rr.wa,rr.D.Y=rr.Y,0<rr.Aa&&(rr.D.Y+=Wr),e(!0),rr.oc=Vr,rr.pc=Zr,Zr+=832,rr.ya=on(bs,Ho),rr.aa=0,rr.D.ya=rr.ya,rr.D.aa=rr.aa,rr.Aa==2&&(rr.D.aa+=Wr),rr.R=16*Wr,rr.B=8*Wr,Wr=(Es=Np[rr.L])*rr.R,Es=Es/2*rr.B,rr.sa=Vr,rr.ta=Zr+Wr,rr.qa=rr.sa,rr.ra=rr.ta+16*br*rr.R+Es,rr.Ha=rr.qa,rr.Ia=rr.ra+8*br*rr.B+Es,rr.$c=0,Zr+=Sr,rr.mb=Br?Vr:null,rr.nb=Br?Zr:null,e(Zr+Br<=rr.Fc+rr.Vb),Wl(rr),nn(rr.Ac,rr.Bc,0,Lr),br=1}}if(br){if(pr.ka=0,pr.y=rr.sa,pr.O=rr.ta,pr.f=rr.qa,pr.N=rr.ra,pr.ea=rr.Ha,pr.Vd=rr.Ia,pr.fa=rr.R,pr.Rc=rr.B,pr.F=null,pr.J=0,!hm){for(br=-255;255>=br;++br)lm[255+br]=0>br?-br:br;for(br=-1020;1020>=br;++br)um[1020+br]=-128>br?-128:127<br?127:br;for(br=-112;112>=br;++br)cm[112+br]=-16>br?-16:15<br?15:br;for(br=-255;510>=br;++br)dm[255+br]=0>br?0:255<br?255:br;hm=1}wu=Yl,Bu=cu,Hl=ba,Xs=Cu,to=du,Rl=qu,vo=gp,Ao=Mu,ru=Un,up=ir,_d=xp,vp=kn,Jp=dr,em=yr,tm=Ds,nm=Qs,rm=Jo,im=Dl,$l[0]=Xu,$l[1]=Gu,$l[2]=Yu,$l[3]=Ku,$l[4]=Nl,$l[5]=Qu,$l[6]=Cl,$l[7]=Dn,$l[8]=tr,$l[9]=Wn,_u[0]=Hu,_u[1]=Os,_u[2]=Kl,_u[3]=Xl,_u[4]=Ul,_u[5]=hu,_u[6]=Wu,iu[0]=rs,iu[1]=Ls,iu[2]=ur,iu[3]=_r,iu[4]=Is,iu[5]=xs,iu[6]=$s,br=1}else br=0}br&&(br=function(Vs,Po){for(Vs.M=0;Vs.M<Vs.Va;++Vs.M){var Us,vs=Vs.Jc[Vs.M&Vs.Xb],cs=Vs.m,wo=Vs;for(Us=0;Us<wo.za;++Us){var Fs=cs,qs=wo,ao=qs.Ac,Fo=qs.Bc+4*Us,Yo=qs.zc,xo=qs.ya[qs.aa+Us];if(qs.Qa.Bb?xo.$b=Er(Fs,qs.Pa.jb[0])?2+Er(Fs,qs.Pa.jb[2]):Er(Fs,qs.Pa.jb[1]):xo.$b=0,qs.kc&&(xo.Ad=Er(Fs,qs.Bd)),xo.Za=!Er(Fs,145)+0,xo.Za){var Vo=xo.Ob,Ko=0;for(qs=0;4>qs;++qs){var No,Ws=Yo[0+qs];for(No=0;4>No;++No){Ws=Km[ao[Fo+No]][Ws];for(var Zs=gm[Er(Fs,Ws[0])];0<Zs;)Zs=gm[2*Zs+Er(Fs,Ws[Zs])];Ws=-Zs,ao[Fo+No]=Ws}tn(Vo,Ko,ao,Fo,4),Ko+=4,Yo[0+qs]=Ws}}else Ws=Er(Fs,156)?Er(Fs,128)?1:3:Er(Fs,163)?2:0,xo.Ob[0]=Ws,nn(ao,Fo,Ws,4),nn(Yo,0,Ws,4);xo.Dd=Er(Fs,142)?Er(Fs,114)?Er(Fs,183)?1:3:2:0}if(wo.m.Ka)return po(Vs,7,"Premature end-of-partition0 encountered.");for(;Vs.ja<Vs.za;++Vs.ja){if(wo=vs,Fs=(cs=Vs).rb[cs.sb-1],ao=cs.rb[cs.sb+cs.ja],Us=cs.ya[cs.aa+cs.ja],Fo=cs.kc?Us.Ad:0)Fs.la=ao.la=0,Us.Za||(Fs.Na=ao.Na=0),Us.Hc=0,Us.Gc=0,Us.ia=0;else{var yo,Js;if(Fs=ao,ao=wo,Fo=cs.Pa.Xc,Yo=cs.ya[cs.aa+cs.ja],xo=cs.pb[Yo.$b],qs=Yo.ad,Vo=0,Ko=cs.rb[cs.sb-1],Ws=No=0,nn(qs,Vo,0,384),Yo.Za)var $o=0,Bl=Fo[3];else{Zs=sn(16);var _o=Fs.Na+Ko.Na;if(_o=dp(ao,Fo[1],_o,xo.Eb,0,Zs,0),Fs.Na=Ko.Na=(0<_o)+0,1<_o)wu(Zs,0,qs,Vo);else{var na=Zs[0]+3>>3;for(Zs=0;256>Zs;Zs+=16)qs[Vo+Zs]=na}$o=1,Bl=Fo[0]}var no=15&Fs.la,jo=15&Ko.la;for(Zs=0;4>Zs;++Zs){var wl=1&jo;for(na=Js=0;4>na;++na)no=no>>1|(wl=(_o=dp(ao,Bl,_o=wl+(1&no),xo.Sc,$o,qs,Vo))>$o)<<7,Js=Js<<2|(3<_o?3:1<_o?2:qs[Vo+0]!=0),Vo+=16;no>>=4,jo=jo>>1|wl<<7,No=(No<<8|Js)>>>0}for(Bl=no,$o=jo>>4,yo=0;4>yo;yo+=2){for(Js=0,no=Fs.la>>4+yo,jo=Ko.la>>4+yo,Zs=0;2>Zs;++Zs){for(wl=1&jo,na=0;2>na;++na)_o=wl+(1&no),no=no>>1|(wl=0<(_o=dp(ao,Fo[2],_o,xo.Qc,0,qs,Vo)))<<3,Js=Js<<2|(3<_o?3:1<_o?2:qs[Vo+0]!=0),Vo+=16;no>>=2,jo=jo>>1|wl<<5}Ws|=Js<<4*yo,Bl|=no<<4<<yo,$o|=(240&jo)<<yo}Fs.la=Bl,Ko.la=$o,Yo.Hc=No,Yo.Gc=Ws,Yo.ia=43690&Ws?0:xo.ia,Fo=!(No|Ws)}if(0<cs.L&&(cs.wa[cs.Y+cs.ja]=cs.gd[Us.$b][Us.Za],cs.wa[cs.Y+cs.ja].La|=!Fo),wo.Ka)return po(Vs,7,"Premature end-of-file encountered.")}if(Wl(Vs),cs=Po,wo=1,Us=(vs=Vs).D,Fs=0<vs.L&&vs.M>=vs.zb&&vs.M<=vs.Va,vs.Aa==0)t:{if(Us.M=vs.M,Us.uc=Fs,Ml(vs,Us),wo=1,Us=(Js=vs.D).Nb,Fs=(Ws=Np[vs.L])*vs.R,ao=Ws/2*vs.B,Zs=16*Us*vs.R,na=8*Us*vs.B,Fo=vs.sa,Yo=vs.ta-Fs+Zs,xo=vs.qa,qs=vs.ra-ao+na,Vo=vs.Ha,Ko=vs.Ia-ao+na,jo=(no=Js.M)==0,No=no>=vs.Va-1,vs.Aa==2&&Ml(vs,Js),Js.uc)for(wl=(_o=vs).D.M,e(_o.D.uc),Js=_o.yb;Js<_o.Hb;++Js){$o=Js,Bl=wl;var Xo=(_l=(Bo=_o).D).Nb;yo=Bo.R;var _l=_l.wa[_l.Y+$o],El=Bo.sa,ga=Bo.ta+16*Xo*yo+16*$o,Sl=_l.dd,io=_l.tc;if(io!=0)if(e(3<=io),Bo.L==1)0<$o&&nm(El,ga,yo,io+4),_l.La&&im(El,ga,yo,io),0<Bl&&tm(El,ga,yo,io+4),_l.La&&rm(El,ga,yo,io);else{var Tl=Bo.B,zl=Bo.qa,zu=Bo.ra+8*Xo*Tl+8*$o,su=Bo.Ha,Bo=Bo.Ia+8*Xo*Tl+8*$o;Xo=_l.ld,0<$o&&(Ao(El,ga,yo,io+4,Sl,Xo),up(zl,zu,su,Bo,Tl,io+4,Sl,Xo)),_l.La&&(vp(El,ga,yo,io,Sl,Xo),em(zl,zu,su,Bo,Tl,io,Sl,Xo)),0<Bl&&(vo(El,ga,yo,io+4,Sl,Xo),ru(zl,zu,su,Bo,Tl,io+4,Sl,Xo)),_l.La&&(_d(El,ga,yo,io,Sl,Xo),Jp(zl,zu,su,Bo,Tl,io,Sl,Xo))}}if(vs.ia&&alert("todo:DitherRow"),cs.put!=null){if(Js=16*no,no=16*(no+1),jo?(cs.y=vs.sa,cs.O=vs.ta+Zs,cs.f=vs.qa,cs.N=vs.ra+na,cs.ea=vs.Ha,cs.W=vs.Ia+na):(Js-=Ws,cs.y=Fo,cs.O=Yo,cs.f=xo,cs.N=qs,cs.ea=Vo,cs.W=Ko),No||(no-=Ws),no>cs.o&&(no=cs.o),cs.F=null,cs.J=null,vs.Fa!=null&&0<vs.Fa.length&&Js<no&&(cs.J=ro(vs,cs,Js,no-Js),cs.F=vs.mb,cs.F==null&&cs.F.length==0)){wo=po(vs,3,"Could not decode alpha data.");break t}Js<cs.j&&(Ws=cs.j-Js,Js=cs.j,e(!(1&Ws)),cs.O+=vs.R*Ws,cs.N+=vs.B*(Ws>>1),cs.W+=vs.B*(Ws>>1),cs.F!=null&&(cs.J+=cs.width*Ws)),Js<no&&(cs.O+=cs.v,cs.N+=cs.v>>1,cs.W+=cs.v>>1,cs.F!=null&&(cs.J+=cs.v),cs.ka=Js-cs.j,cs.U=cs.va-cs.v,cs.T=no-Js,wo=cs.put(cs))}Us+1!=vs.Ic||No||(tn(vs.sa,vs.ta-Fs,Fo,Yo+16*vs.R,Fs),tn(vs.qa,vs.ra-ao,xo,qs+8*vs.B,ao),tn(vs.Ha,vs.Ia-ao,Vo,Ko+8*vs.B,ao))}if(!wo)return po(Vs,6,"Output aborted.")}return 1}(rr,pr)),pr.bc!=null&&pr.bc(pr),br&=1}return br?(rr.cb=0,br):0})(vn,Rn)||(En=vn.a)}}else En=vn.a}En==0&&Hn.Oa!=null&&Hn.Oa.fd&&(En=rp(Hn.ba))}Hn=En}Gn=Hn!=0?null:11>Gn?Xn.f.RGBA.eb:Xn.f.kb.y}else Gn=null;return Gn};var Sm=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function fn(Sn,Cn){for(var Nn="",Mn=0;Mn<4;Mn++)Nn+=String.fromCharCode(Sn[Cn++]);return Nn}function hn(Sn,Cn){return Sn[Cn+0]|Sn[Cn+1]<<8}function an(Sn,Cn){return(Sn[Cn+0]|Sn[Cn+1]<<8|Sn[Cn+2]<<16)>>>0}function rn(Sn,Cn){return(Sn[Cn+0]|Sn[Cn+1]<<8|Sn[Cn+2]<<16|Sn[Cn+3]<<24)>>>0}new dn;var cn=[0],pn=[0],mn=[],xn=new dn,gn=St,yn=function(Sn,Cn){var Nn={},Mn=0,Fn=!1,In=0,Bn=0;if(Nn.frames=[],!function($n,On){for(var er=0;er<4;er++)if($n[On+er]!="RIFF".charCodeAt(er))return!0;return!1}(Sn,Cn)){for(rn(Sn,Cn+=4),Cn+=8;Cn<Sn.length;){var Ln=fn(Sn,Cn),qn=rn(Sn,Cn+=4);Cn+=4;var Yn=qn+(1&qn);switch(Ln){case"VP8 ":case"VP8L":Nn.frames[Mn]===void 0&&(Nn.frames[Mn]={}),(lr=Nn.frames[Mn]).src_off=Fn?Bn:Cn-8,lr.src_size=In+qn+8,Mn++,Fn&&(Fn=!1,In=0,Bn=0);break;case"VP8X":(lr=Nn.header={}).feature_flags=Sn[Cn];var Qn=Cn+4;lr.canvas_width=1+an(Sn,Qn),Qn+=3,lr.canvas_height=1+an(Sn,Qn),Qn+=3;break;case"ALPH":Fn=!0,In=Yn+8,Bn=Cn-8;break;case"ANIM":(lr=Nn.header).bgcolor=rn(Sn,Cn),Qn=Cn+4,lr.loop_count=hn(Sn,Qn),Qn+=2;break;case"ANMF":var zn,lr;(lr=Nn.frames[Mn]={}).offset_x=2*an(Sn,Cn),Cn+=3,lr.offset_y=2*an(Sn,Cn),Cn+=3,lr.width=1+an(Sn,Cn),Cn+=3,lr.height=1+an(Sn,Cn),Cn+=3,lr.duration=an(Sn,Cn),Cn+=3,zn=Sn[Cn++],lr.dispose=1&zn,lr.blend=zn>>1&1}Ln!="ANMF"&&(Cn+=Yn)}return Nn}}(gn,0);yn.response=gn,yn.rgbaoutput=!0,yn.dataurl=!1;var bn=yn.header?yn.header:null,wn=yn.frames?yn.frames:null;if(bn){bn.loop_counter=bn.loop_count,cn=[bn.canvas_height],pn=[bn.canvas_width];for(var _n=0;_n<wn.length&&wn[_n].blend!=0;_n++);}var Tn=wn[0],An=xn.WebPDecodeRGBA(gn,Tn.src_off,Tn.src_size,pn,cn);Tn.rgba=An,Tn.imgwidth=pn[0],Tn.imgheight=cn[0];for(var Pn=0;Pn<pn[0]*cn[0]*4;Pn++)mn[Pn]=An[Pn];return this.width=pn,this.height=cn,this.data=mn,this}(function(St){var e,en,tn,nn,sn,on,un,dn,fn,hn=function($n){return $n=$n||{},this.isStrokeTransparent=$n.isStrokeTransparent||!1,this.strokeOpacity=$n.strokeOpacity||1,this.strokeStyle=$n.strokeStyle||"#000000",this.fillStyle=$n.fillStyle||"#000000",this.isFillTransparent=$n.isFillTransparent||!1,this.fillOpacity=$n.fillOpacity||1,this.font=$n.font||"10px sans-serif",this.textBaseline=$n.textBaseline||"alphabetic",this.textAlign=$n.textAlign||"left",this.lineWidth=$n.lineWidth||1,this.lineJoin=$n.lineJoin||"miter",this.lineCap=$n.lineCap||"butt",this.path=$n.path||[],this.transform=$n.transform!==void 0?$n.transform.clone():new dn,this.globalCompositeOperation=$n.globalCompositeOperation||"normal",this.globalAlpha=$n.globalAlpha||1,this.clip_path=$n.clip_path||[],this.currentPoint=$n.currentPoint||new on,this.miterLimit=$n.miterLimit||10,this.lastPoint=$n.lastPoint||new on,this.lineDashOffset=$n.lineDashOffset||0,this.lineDash=$n.lineDash||[],this.margin=$n.margin||[0,0,0,0],this.prevPageLastElemOffset=$n.prevPageLastElemOffset||0,this.ignoreClearRect=typeof $n.ignoreClearRect!="boolean"||$n.ignoreClearRect,this};St.events.push(["initialized",function(){this.context2d=new an(this),e=this.internal.f2,en=this.internal.getCoordinateString,tn=this.internal.getVerticalCoordinateString,nn=this.internal.getHorizontalCoordinate,sn=this.internal.getVerticalCoordinate,on=this.internal.Point,un=this.internal.Rectangle,dn=this.internal.Matrix,fn=new hn}]);var an=function($n){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var On=$n;Object.defineProperty(this,"pdf",{get:function(){return On}});var er=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return er},set:function(Zn){er=!!Zn}});var sr=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return sr},set:function(Zn){sr=!!Zn}});var ar=0;Object.defineProperty(this,"posX",{get:function(){return ar},set:function(Zn){isNaN(Zn)||(ar=Zn)}});var cr=0;Object.defineProperty(this,"posY",{get:function(){return cr},set:function(Zn){isNaN(Zn)||(cr=Zn)}}),Object.defineProperty(this,"margin",{get:function(){return fn.margin},set:function(Zn){var Xr;typeof Zn=="number"?Xr=[Zn,Zn,Zn,Zn]:((Xr=new Array(4))[0]=Zn[0],Xr[1]=Zn.length>=2?Zn[1]:Xr[0],Xr[2]=Zn.length>=3?Zn[2]:Xr[0],Xr[3]=Zn.length>=4?Zn[3]:Xr[1]),fn.margin=Xr}});var gr=!1;Object.defineProperty(this,"autoPaging",{get:function(){return gr},set:function(Zn){gr=Zn}});var vr=0;Object.defineProperty(this,"lastBreak",{get:function(){return vr},set:function(Zn){vr=Zn}});var Er=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Er},set:function(Zn){Er=Zn}}),Object.defineProperty(this,"ctx",{get:function(){return fn},set:function(Zn){Zn instanceof hn&&(fn=Zn)}}),Object.defineProperty(this,"path",{get:function(){return fn.path},set:function(Zn){fn.path=Zn}});var Rr=[];Object.defineProperty(this,"ctxStack",{get:function(){return Rr},set:function(Zn){Rr=Zn}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Zn){var Xr;Xr=rn(Zn),this.ctx.fillStyle=Xr.style,this.ctx.isFillTransparent=Xr.a===0,this.ctx.fillOpacity=Xr.a,this.pdf.setFillColor(Xr.r,Xr.g,Xr.b,{a:Xr.a}),this.pdf.setTextColor(Xr.r,Xr.g,Xr.b,{a:Xr.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Zn){var Xr=rn(Zn);this.ctx.strokeStyle=Xr.style,this.ctx.isStrokeTransparent=Xr.a===0,this.ctx.strokeOpacity=Xr.a,Xr.a===0?this.pdf.setDrawColor(255,255,255):(Xr.a,this.pdf.setDrawColor(Xr.r,Xr.g,Xr.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Zn){["butt","round","square"].indexOf(Zn)!==-1&&(this.ctx.lineCap=Zn,this.pdf.setLineCap(Zn))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Zn){isNaN(Zn)||(this.ctx.lineWidth=Zn,this.pdf.setLineWidth(Zn))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Zn){["bevel","round","miter"].indexOf(Zn)!==-1&&(this.ctx.lineJoin=Zn,this.pdf.setLineJoin(Zn))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Zn){isNaN(Zn)||(this.ctx.miterLimit=Zn,this.pdf.setMiterLimit(Zn))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Zn){this.ctx.textBaseline=Zn}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Zn){["right","end","center","left","start"].indexOf(Zn)!==-1&&(this.ctx.textAlign=Zn)}});var Kr=null,Cr=null,Gr=null;Object.defineProperty(this,"fontFaces",{get:function(){return Gr},set:function(Zn){Kr=null,Cr=null,Gr=Zn}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Zn){var Xr;if(this.ctx.font=Zn,(Xr=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(Zn))!==null){var hs=Xr[1];Xr[2];var us=Xr[3],zr=Xr[4];Xr[5];var ls=Xr[6],wr=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(zr)[2];zr=Math.floor(wr==="px"?parseFloat(zr)*this.pdf.internal.scaleFactor:wr==="em"?parseFloat(zr)*this.pdf.getFontSize():parseFloat(zr)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(zr);var Fr=function(as){var Ns,As,Jr=[],Ss=as.trim();if(Ss==="")return Jt;if(Ss in Mt)return[Mt[Ss]];for(;Ss!=="";){switch(As=null,Ns=(Ss=Et(Ss)).charAt(0)){case'"':case"'":As=Rt(Ss.substring(1),Ns);break;default:As=Dt(Ss)}if(As===null||(Jr.push(As[0]),(Ss=Et(As[1]))!==""&&Ss.charAt(0)!==","))return Jt;Ss=Ss.replace(/^,/,"")}return Jr}(ls);if(this.fontFaces){var Qr=function(as,Ns){var As=as.getFontList(),Jr=JSON.stringify(As);if(Kr===null||Cr!==Jr){var Ss=function(es){var qr=[];return Object.keys(es).forEach(function(ts){es[ts].forEach(function(Dr){var ns=null;switch(Dr){case"bold":ns={family:ts,weight:"bold"};break;case"italic":ns={family:ts,style:"italic"};break;case"bolditalic":ns={family:ts,weight:"bold",style:"italic"};break;case"":case"normal":ns={family:ts}}ns!==null&&(ns.ref={name:ts,style:Dr},qr.push(ns))})}),qr}(As);Kr=function(es){for(var qr={},ts=0;ts<es.length;++ts){var Dr=Ct(es[ts]),ns=Dr.family,ks=Dr.stretch,ms=Dr.style,Yr=Dr.weight;qr[ns]=qr[ns]||{},qr[ns][ks]=qr[ns][ks]||{},qr[ns][ks][ms]=qr[ns][ks][ms]||{},qr[ns][ks][ms][Yr]=Dr}return qr}(Ss.concat(Ns)),Cr=Jr}return Kr}(this.pdf,this.fontFaces),fs=Fr.map(function(as){return{family:as,stretch:"normal",weight:us,style:hs}}),os=function(as,Ns,As){for(var Jr=(As=As||{}).defaultFontFamily||"times",Ss=Object.assign({},Bt,As.genericFontFamilies||{}),es=null,qr=null,ts=0;ts<Ns.length;++ts)if(Ss[(es=Ct(Ns[ts])).family]&&(es.family=Ss[es.family]),as.hasOwnProperty(es.family)){qr=as[es.family];break}if(!(qr=qr||as[Jr]))throw new Error("Could not find a font-family for the rule '"+qt(es)+"' and default family '"+Jr+"'.");if(qr=function(Dr,ns){if(ns[Dr])return ns[Dr];var ks=Ft[Dr],ms=ks<=Ft.normal?-1:1,Yr=Ot(ns,kt,ks,ms);if(!Yr)throw new Error("Could not find a matching font-stretch value for "+Dr);return Yr}(es.stretch,qr),qr=function(Dr,ns){if(ns[Dr])return ns[Dr];for(var ks=Pt[Dr],ms=0;ms<ks.length;++ms)if(ns[ks[ms]])return ns[ks[ms]];throw new Error("Could not find a matching font-style for "+Dr)}(es.style,qr),!(qr=function(Dr,ns){if(ns[Dr])return ns[Dr];if(Dr===400&&ns[500])return ns[500];if(Dr===500&&ns[400])return ns[400];var ks=jt[Dr],ms=Ot(ns,It,ks,Dr<400?-1:1);if(!ms)throw new Error("Could not find a matching font-weight for value "+Dr);return ms}(es.weight,qr)))throw new Error("Failed to resolve a font for the rule '"+qt(es)+"'.");return qr}(Qr,fs);this.pdf.setFont(os.ref.name,os.ref.style)}else{var xr="";(us==="bold"||parseInt(us,10)>=700||hs==="bold")&&(xr="bold"),hs==="italic"&&(xr+="italic"),xr.length===0&&(xr="normal");for(var Or="",Ir={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},$r=0;$r<Fr.length;$r++){if(this.pdf.internal.getFont(Fr[$r],xr,{noFallback:!0,disableWarning:!0})!==void 0){Or=Fr[$r];break}if(xr==="bolditalic"&&this.pdf.internal.getFont(Fr[$r],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Or=Fr[$r],xr="bold";else if(this.pdf.internal.getFont(Fr[$r],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Or=Fr[$r],xr="normal";break}}if(Or===""){for(var ss=0;ss<Fr.length;ss++)if(Ir[Fr[ss]]){Or=Ir[Fr[ss]];break}}Or=Or===""?"Times":Or,this.pdf.setFont(Or,xr)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Zn){this.ctx.globalCompositeOperation=Zn}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Zn){this.ctx.globalAlpha=Zn}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Zn){this.ctx.lineDashOffset=Zn,lr.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Zn){this.ctx.lineDash=Zn,lr.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Zn){this.ctx.ignoreClearRect=!!Zn}})};an.prototype.setLineDash=function($n){this.lineDash=$n},an.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},an.prototype.fill=function(){wn.call(this,"fill",!1)},an.prototype.stroke=function(){wn.call(this,"stroke",!1)},an.prototype.beginPath=function(){this.path=[{type:"begin"}]},an.prototype.moveTo=function($n,On){if(isNaN($n)||isNaN(On))throw o.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var er=this.ctx.transform.applyToPoint(new on($n,On));this.path.push({type:"mt",x:er.x,y:er.y}),this.ctx.lastPoint=new on($n,On)},an.prototype.closePath=function(){var $n=new on(0,0),On=0;for(On=this.path.length-1;On!==-1;On--)if(this.path[On].type==="begin"&&_typeof(this.path[On+1])==="object"&&typeof this.path[On+1].x=="number"){$n=new on(this.path[On+1].x,this.path[On+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new on($n.x,$n.y)},an.prototype.lineTo=function($n,On){if(isNaN($n)||isNaN(On))throw o.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var er=this.ctx.transform.applyToPoint(new on($n,On));this.path.push({type:"lt",x:er.x,y:er.y}),this.ctx.lastPoint=new on(er.x,er.y)},an.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),wn.call(this,null,!0)},an.prototype.quadraticCurveTo=function($n,On,er,sr){if(isNaN(er)||isNaN(sr)||isNaN($n)||isNaN(On))throw o.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ar=this.ctx.transform.applyToPoint(new on(er,sr)),cr=this.ctx.transform.applyToPoint(new on($n,On));this.path.push({type:"qct",x1:cr.x,y1:cr.y,x:ar.x,y:ar.y}),this.ctx.lastPoint=new on(ar.x,ar.y)},an.prototype.bezierCurveTo=function($n,On,er,sr,ar,cr){if(isNaN(ar)||isNaN(cr)||isNaN($n)||isNaN(On)||isNaN(er)||isNaN(sr))throw o.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var gr=this.ctx.transform.applyToPoint(new on(ar,cr)),vr=this.ctx.transform.applyToPoint(new on($n,On)),Er=this.ctx.transform.applyToPoint(new on(er,sr));this.path.push({type:"bct",x1:vr.x,y1:vr.y,x2:Er.x,y2:Er.y,x:gr.x,y:gr.y}),this.ctx.lastPoint=new on(gr.x,gr.y)},an.prototype.arc=function($n,On,er,sr,ar,cr){if(isNaN($n)||isNaN(On)||isNaN(er)||isNaN(sr)||isNaN(ar))throw o.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(cr=!!cr,!this.ctx.transform.isIdentity){var gr=this.ctx.transform.applyToPoint(new on($n,On));$n=gr.x,On=gr.y;var vr=this.ctx.transform.applyToPoint(new on(0,er)),Er=this.ctx.transform.applyToPoint(new on(0,0));er=Math.sqrt(Math.pow(vr.x-Er.x,2)+Math.pow(vr.y-Er.y,2))}Math.abs(ar-sr)>=2*Math.PI&&(sr=0,ar=2*Math.PI),this.path.push({type:"arc",x:$n,y:On,radius:er,startAngle:sr,endAngle:ar,counterclockwise:cr})},an.prototype.arcTo=function($n,On,er,sr,ar){throw new Error("arcTo not implemented.")},an.prototype.rect=function($n,On,er,sr){if(isNaN($n)||isNaN(On)||isNaN(er)||isNaN(sr))throw o.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo($n,On),this.lineTo($n+er,On),this.lineTo($n+er,On+sr),this.lineTo($n,On+sr),this.lineTo($n,On),this.lineTo($n+er,On),this.lineTo($n,On)},an.prototype.fillRect=function($n,On,er,sr){if(isNaN($n)||isNaN(On)||isNaN(er)||isNaN(sr))throw o.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!cn.call(this)){var ar={};this.lineCap!=="butt"&&(ar.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ar.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect($n,On,er,sr),this.fill(),ar.hasOwnProperty("lineCap")&&(this.lineCap=ar.lineCap),ar.hasOwnProperty("lineJoin")&&(this.lineJoin=ar.lineJoin)}},an.prototype.strokeRect=function($n,On,er,sr){if(isNaN($n)||isNaN(On)||isNaN(er)||isNaN(sr))throw o.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");pn.call(this)||(this.beginPath(),this.rect($n,On,er,sr),this.stroke())},an.prototype.clearRect=function($n,On,er,sr){if(isNaN($n)||isNaN(On)||isNaN(er)||isNaN(sr))throw o.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect($n,On,er,sr))},an.prototype.save=function($n){$n=typeof $n!="boolean"||$n;for(var On=this.pdf.internal.getCurrentPageInfo().pageNumber,er=0;er<this.pdf.internal.getNumberOfPages();er++)this.pdf.setPage(er+1),this.pdf.internal.out("q");if(this.pdf.setPage(On),$n){this.ctx.fontSize=this.pdf.internal.getFontSize();var sr=new hn(this.ctx);this.ctxStack.push(this.ctx),this.ctx=sr}},an.prototype.restore=function($n){$n=typeof $n!="boolean"||$n;for(var On=this.pdf.internal.getCurrentPageInfo().pageNumber,er=0;er<this.pdf.internal.getNumberOfPages();er++)this.pdf.setPage(er+1),this.pdf.internal.out("Q");this.pdf.setPage(On),$n&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},an.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var rn=function($n){var On,er,sr,ar;if($n.isCanvasGradient===!0&&($n=$n.getColor()),!$n)return{r:0,g:0,b:0,a:0,style:$n};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test($n))On=0,er=0,sr=0,ar=0;else{var cr=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec($n);if(cr!==null)On=parseInt(cr[1]),er=parseInt(cr[2]),sr=parseInt(cr[3]),ar=1;else if((cr=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec($n))!==null)On=parseInt(cr[1]),er=parseInt(cr[2]),sr=parseInt(cr[3]),ar=parseFloat(cr[4]);else{if(ar=1,typeof $n=="string"&&$n.charAt(0)!=="#"){var gr=new h($n);$n=gr.ok?gr.toHex():"#000000"}$n.length===4?(On=$n.substring(1,2),On+=On,er=$n.substring(2,3),er+=er,sr=$n.substring(3,4),sr+=sr):(On=$n.substring(1,3),er=$n.substring(3,5),sr=$n.substring(5,7)),On=parseInt(On,16),er=parseInt(er,16),sr=parseInt(sr,16)}}return{r:On,g:er,b:sr,a:ar,style:$n}},cn=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},pn=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};an.prototype.fillText=function($n,On,er,sr){if(isNaN(On)||isNaN(er)||typeof $n!="string")throw o.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(sr=isNaN(sr)?void 0:sr,!cn.call(this)){var ar=Yn(this.ctx.transform.rotation),cr=this.ctx.transform.scaleX;Mn.call(this,{text:$n,x:On,y:er,scale:cr,angle:ar,align:this.textAlign,maxWidth:sr})}},an.prototype.strokeText=function($n,On,er,sr){if(isNaN(On)||isNaN(er)||typeof $n!="string")throw o.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!pn.call(this)){sr=isNaN(sr)?void 0:sr;var ar=Yn(this.ctx.transform.rotation),cr=this.ctx.transform.scaleX;Mn.call(this,{text:$n,x:On,y:er,scale:cr,renderingMode:"stroke",angle:ar,align:this.textAlign,maxWidth:sr})}},an.prototype.measureText=function($n){if(typeof $n!="string")throw o.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var On=this.pdf,er=this.pdf.internal.scaleFactor,sr=On.internal.getFontSize(),ar=On.getStringUnitWidth($n)*sr/On.internal.scaleFactor;return new function(cr){var gr=(cr=cr||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return gr}}),this}({width:ar*=Math.round(96*er/72*1e4)/1e4})},an.prototype.scale=function($n,On){if(isNaN($n)||isNaN(On))throw o.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var er=new dn($n,0,0,On,0,0);this.ctx.transform=this.ctx.transform.multiply(er)},an.prototype.rotate=function($n){if(isNaN($n))throw o.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var On=new dn(Math.cos($n),Math.sin($n),-Math.sin($n),Math.cos($n),0,0);this.ctx.transform=this.ctx.transform.multiply(On)},an.prototype.translate=function($n,On){if(isNaN($n)||isNaN(On))throw o.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var er=new dn(1,0,0,1,$n,On);this.ctx.transform=this.ctx.transform.multiply(er)},an.prototype.transform=function($n,On,er,sr,ar,cr){if(isNaN($n)||isNaN(On)||isNaN(er)||isNaN(sr)||isNaN(ar)||isNaN(cr))throw o.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var gr=new dn($n,On,er,sr,ar,cr);this.ctx.transform=this.ctx.transform.multiply(gr)},an.prototype.setTransform=function($n,On,er,sr,ar,cr){$n=isNaN($n)?1:$n,On=isNaN(On)?0:On,er=isNaN(er)?0:er,sr=isNaN(sr)?1:sr,ar=isNaN(ar)?0:ar,cr=isNaN(cr)?0:cr,this.ctx.transform=new dn($n,On,er,sr,ar,cr)};var mn=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};an.prototype.drawImage=function($n,On,er,sr,ar,cr,gr,vr,Er){var Rr=this.pdf.getImageProperties($n),Kr=1,Cr=1,Gr=1,Zn=1;sr!==void 0&&vr!==void 0&&(Gr=vr/sr,Zn=Er/ar,Kr=Rr.width/sr*vr/sr,Cr=Rr.height/ar*Er/ar),cr===void 0&&(cr=On,gr=er,On=0,er=0),sr!==void 0&&vr===void 0&&(vr=sr,Er=ar),sr===void 0&&vr===void 0&&(vr=Rr.width,Er=Rr.height);var Xr=this.ctx.transform.decompose(),hs=Yn(Xr.rotate.shx),us=new dn,zr=(us=(us=(us=us.multiply(Xr.translate)).multiply(Xr.skew)).multiply(Xr.scale)).applyToRectangle(new un(cr-On*Gr,gr-er*Zn,sr*Kr,ar*Cr));if(this.autoPaging){for(var ls,wr=xn.call(this,zr),Fr=[],Qr=0;Qr<wr.length;Qr+=1)Fr.indexOf(wr[Qr])===-1&&Fr.push(wr[Qr]);bn(Fr);for(var fs=Fr[0],os=Fr[Fr.length-1],xr=fs;xr<os+1;xr++){this.pdf.setPage(xr);var Or=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ir=xr===1?this.posY+this.margin[0]:this.margin[0],$r=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ss=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],as=xr===1?0:$r+(xr-2)*ss;if(this.ctx.clip_path.length!==0){var Ns=this.path;ls=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=yn(ls,this.posX+this.margin[3],-as+Ir+this.ctx.prevPageLastElemOffset),_n.call(this,"fill",!0),this.path=Ns}var As=JSON.parse(JSON.stringify(zr));As=yn([As],this.posX+this.margin[3],-as+Ir+this.ctx.prevPageLastElemOffset)[0];var Jr=(xr>fs||xr<os)&&mn.call(this);Jr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Or,ss,null).clip().discardPath()),this.pdf.addImage($n,"JPEG",As.x,As.y,As.w,As.h,null,null,hs),Jr&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage($n,"JPEG",zr.x,zr.y,zr.w,zr.h,null,null,hs)};var xn=function($n,On,er){var sr=[];On=On||this.pdf.internal.pageSize.width,er=er||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ar=this.posY+this.ctx.prevPageLastElemOffset;switch($n.type){default:case"mt":case"lt":sr.push(Math.floor(($n.y+ar)/er)+1);break;case"arc":sr.push(Math.floor(($n.y+ar-$n.radius)/er)+1),sr.push(Math.floor(($n.y+ar+$n.radius)/er)+1);break;case"qct":var cr=Qn(this.ctx.lastPoint.x,this.ctx.lastPoint.y,$n.x1,$n.y1,$n.x,$n.y);sr.push(Math.floor((cr.y+ar)/er)+1),sr.push(Math.floor((cr.y+cr.h+ar)/er)+1);break;case"bct":var gr=zn(this.ctx.lastPoint.x,this.ctx.lastPoint.y,$n.x1,$n.y1,$n.x2,$n.y2,$n.x,$n.y);sr.push(Math.floor((gr.y+ar)/er)+1),sr.push(Math.floor((gr.y+gr.h+ar)/er)+1);break;case"rect":sr.push(Math.floor(($n.y+ar)/er)+1),sr.push(Math.floor(($n.y+$n.h+ar)/er)+1)}for(var vr=0;vr<sr.length;vr+=1)for(;this.pdf.internal.getNumberOfPages()<sr[vr];)gn.call(this);return sr},gn=function(){var $n=this.fillStyle,On=this.strokeStyle,er=this.font,sr=this.lineCap,ar=this.lineWidth,cr=this.lineJoin;this.pdf.addPage(),this.fillStyle=$n,this.strokeStyle=On,this.font=er,this.lineCap=sr,this.lineWidth=ar,this.lineJoin=cr},yn=function($n,On,er){for(var sr=0;sr<$n.length;sr++)switch($n[sr].type){case"bct":$n[sr].x2+=On,$n[sr].y2+=er;case"qct":$n[sr].x1+=On,$n[sr].y1+=er;default:$n[sr].x+=On,$n[sr].y+=er}return $n},bn=function($n){return $n.sort(function(On,er){return On-er})},wn=function($n,On){var er=this.fillStyle,sr=this.strokeStyle,ar=this.lineCap,cr=this.lineWidth,gr=Math.abs(cr*this.ctx.transform.scaleX),vr=this.lineJoin;if(this.autoPaging){for(var Er,Rr,Kr=JSON.parse(JSON.stringify(this.path)),Cr=JSON.parse(JSON.stringify(this.path)),Gr=[],Zn=0;Zn<Cr.length;Zn++)if(Cr[Zn].x!==void 0)for(var Xr=xn.call(this,Cr[Zn]),hs=0;hs<Xr.length;hs+=1)Gr.indexOf(Xr[hs])===-1&&Gr.push(Xr[hs]);for(var us=0;us<Gr.length;us++)for(;this.pdf.internal.getNumberOfPages()<Gr[us];)gn.call(this);bn(Gr);for(var zr=Gr[0],ls=Gr[Gr.length-1],wr=zr;wr<ls+1;wr++){this.pdf.setPage(wr),this.fillStyle=er,this.strokeStyle=sr,this.lineCap=ar,this.lineWidth=gr,this.lineJoin=vr;var Fr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Qr=wr===1?this.posY+this.margin[0]:this.margin[0],fs=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],os=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],xr=wr===1?0:fs+(wr-2)*os;if(this.ctx.clip_path.length!==0){var Or=this.path;Er=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=yn(Er,this.posX+this.margin[3],-xr+Qr+this.ctx.prevPageLastElemOffset),_n.call(this,$n,!0),this.path=Or}if(Rr=JSON.parse(JSON.stringify(Kr)),this.path=yn(Rr,this.posX+this.margin[3],-xr+Qr+this.ctx.prevPageLastElemOffset),On===!1||wr===0){var Ir=(wr>zr||wr<ls)&&mn.call(this);Ir&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Fr,os,null).clip().discardPath()),_n.call(this,$n,On),Ir&&this.pdf.restoreGraphicsState()}this.lineWidth=cr}this.path=Kr}else this.lineWidth=gr,_n.call(this,$n,On),this.lineWidth=cr},_n=function($n,On){if(($n!=="stroke"||On||!pn.call(this))&&($n==="stroke"||On||!cn.call(this))){for(var er,sr,ar=[],cr=this.path,gr=0;gr<cr.length;gr++){var vr=cr[gr];switch(vr.type){case"begin":ar.push({begin:!0});break;case"close":ar.push({close:!0});break;case"mt":ar.push({start:vr,deltas:[],abs:[]});break;case"lt":var Er=ar.length;if(cr[gr-1]&&!isNaN(cr[gr-1].x)&&(er=[vr.x-cr[gr-1].x,vr.y-cr[gr-1].y],Er>0)){for(;Er>=0;Er--)if(ar[Er-1].close!==!0&&ar[Er-1].begin!==!0){ar[Er-1].deltas.push(er),ar[Er-1].abs.push(vr);break}}break;case"bct":er=[vr.x1-cr[gr-1].x,vr.y1-cr[gr-1].y,vr.x2-cr[gr-1].x,vr.y2-cr[gr-1].y,vr.x-cr[gr-1].x,vr.y-cr[gr-1].y],ar[ar.length-1].deltas.push(er);break;case"qct":var Rr=cr[gr-1].x+2/3*(vr.x1-cr[gr-1].x),Kr=cr[gr-1].y+2/3*(vr.y1-cr[gr-1].y),Cr=vr.x+2/3*(vr.x1-vr.x),Gr=vr.y+2/3*(vr.y1-vr.y),Zn=vr.x,Xr=vr.y;er=[Rr-cr[gr-1].x,Kr-cr[gr-1].y,Cr-cr[gr-1].x,Gr-cr[gr-1].y,Zn-cr[gr-1].x,Xr-cr[gr-1].y],ar[ar.length-1].deltas.push(er);break;case"arc":ar.push({deltas:[],abs:[],arc:!0}),Array.isArray(ar[ar.length-1].abs)&&ar[ar.length-1].abs.push(vr)}}sr=On?null:$n==="stroke"?"stroke":"fill";for(var hs=!1,us=0;us<ar.length;us++)if(ar[us].arc)for(var zr=ar[us].abs,ls=0;ls<zr.length;ls++){var wr=zr[ls];wr.type==="arc"?Pn.call(this,wr.x,wr.y,wr.radius,wr.startAngle,wr.endAngle,wr.counterclockwise,void 0,On,!hs):Fn.call(this,wr.x,wr.y),hs=!0}else if(ar[us].close===!0)this.pdf.internal.out("h"),hs=!1;else if(ar[us].begin!==!0){var Fr=ar[us].start.x,Qr=ar[us].start.y;In.call(this,ar[us].deltas,Fr,Qr),hs=!0}sr&&Sn.call(this,sr),On&&Cn.call(this)}},Tn=function($n){var On=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,er=On*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return $n-er;case"top":return $n+On-er;case"hanging":return $n+On-2*er;case"middle":return $n+On/2-er;default:return $n}},An=function($n){return $n+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};an.prototype.createLinearGradient=function(){var $n=function(){};return $n.colorStops=[],$n.addColorStop=function(On,er){this.colorStops.push([On,er])},$n.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},$n.isCanvasGradient=!0,$n},an.prototype.createPattern=function(){return this.createLinearGradient()},an.prototype.createRadialGradient=function(){return this.createLinearGradient()};var Pn=function($n,On,er,sr,ar,cr,gr,vr,Er){for(var Rr=Ln.call(this,er,sr,ar,cr),Kr=0;Kr<Rr.length;Kr++){var Cr=Rr[Kr];Kr===0&&(Er?Nn.call(this,Cr.x1+$n,Cr.y1+On):Fn.call(this,Cr.x1+$n,Cr.y1+On)),Bn.call(this,$n,On,Cr.x2,Cr.y2,Cr.x3,Cr.y3,Cr.x4,Cr.y4)}vr?Cn.call(this):Sn.call(this,gr)},Sn=function($n){switch($n){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Cn=function(){this.pdf.clip(),this.pdf.discardPath()},Nn=function($n,On){this.pdf.internal.out(en($n)+" "+tn(On)+" m")},Mn=function($n){var On;switch($n.align){case"right":case"end":On="right";break;case"center":On="center";break;default:On="left"}var er,sr,ar,cr=this.pdf.getTextDimensions($n.text),gr=Tn.call(this,$n.y),vr=An.call(this,gr)-cr.h,Er=this.ctx.transform.applyToPoint(new on($n.x,gr));if(this.autoPaging){var Rr=this.ctx.transform.decompose(),Kr=new dn;Kr=(Kr=(Kr=Kr.multiply(Rr.translate)).multiply(Rr.skew)).multiply(Rr.scale);for(var Cr=this.ctx.transform.applyToRectangle(new un($n.x,gr,cr.w,cr.h)),Gr=Kr.applyToRectangle(new un($n.x,vr,cr.w,cr.h)),Zn=xn.call(this,Gr),Xr=[],hs=0;hs<Zn.length;hs+=1)Xr.indexOf(Zn[hs])===-1&&Xr.push(Zn[hs]);bn(Xr);for(var us=Xr[0],zr=Xr[Xr.length-1],ls=us;ls<zr+1;ls++){this.pdf.setPage(ls);var wr=ls===1?this.posY+this.margin[0]:this.margin[0],Fr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Qr=this.pdf.internal.pageSize.height-this.margin[2],fs=Qr-this.margin[0],os=this.pdf.internal.pageSize.width-this.margin[1],xr=os-this.margin[3],Or=ls===1?0:Fr+(ls-2)*fs;if(this.ctx.clip_path.length!==0){var Ir=this.path;er=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=yn(er,this.posX+this.margin[3],-1*Or+wr),_n.call(this,"fill",!0),this.path=Ir}var $r=yn([JSON.parse(JSON.stringify(Gr))],this.posX+this.margin[3],-Or+wr+this.ctx.prevPageLastElemOffset)[0];$n.scale>=.01&&(sr=this.pdf.internal.getFontSize(),this.pdf.setFontSize(sr*$n.scale),ar=this.lineWidth,this.lineWidth=ar*$n.scale);var ss=this.autoPaging!=="text";if(ss||$r.y+$r.h<=Qr){if(ss||$r.y>=wr&&$r.x<=os){var as=ss?$n.text:this.pdf.splitTextToSize($n.text,$n.maxWidth||os-$r.x)[0],Ns=yn([JSON.parse(JSON.stringify(Cr))],this.posX+this.margin[3],-Or+wr+this.ctx.prevPageLastElemOffset)[0],As=ss&&(ls>us||ls<zr)&&mn.call(this);As&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],xr,fs,null).clip().discardPath()),this.pdf.text(as,Ns.x,Ns.y,{angle:$n.angle,align:On,renderingMode:$n.renderingMode}),As&&this.pdf.restoreGraphicsState()}}else $r.y<Qr&&(this.ctx.prevPageLastElemOffset+=Qr-$r.y);$n.scale>=.01&&(this.pdf.setFontSize(sr),this.lineWidth=ar)}}else $n.scale>=.01&&(sr=this.pdf.internal.getFontSize(),this.pdf.setFontSize(sr*$n.scale),ar=this.lineWidth,this.lineWidth=ar*$n.scale),this.pdf.text($n.text,Er.x+this.posX,Er.y+this.posY,{angle:$n.angle,align:On,renderingMode:$n.renderingMode,maxWidth:$n.maxWidth}),$n.scale>=.01&&(this.pdf.setFontSize(sr),this.lineWidth=ar)},Fn=function($n,On,er,sr){er=er||0,sr=sr||0,this.pdf.internal.out(en($n+er)+" "+tn(On+sr)+" l")},In=function($n,On,er){return this.pdf.lines($n,On,er,null,null)},Bn=function($n,On,er,sr,ar,cr,gr,vr){this.pdf.internal.out([e(nn(er+$n)),e(sn(sr+On)),e(nn(ar+$n)),e(sn(cr+On)),e(nn(gr+$n)),e(sn(vr+On)),"c"].join(" "))},Ln=function($n,On,er,sr){for(var ar=2*Math.PI,cr=Math.PI/2;On>er;)On-=ar;var gr=Math.abs(er-On);gr<ar&&sr&&(gr=ar-gr);for(var vr=[],Er=sr?-1:1,Rr=On;gr>1e-5;){var Kr=Rr+Er*Math.min(gr,cr);vr.push(qn.call(this,$n,Rr,Kr)),gr-=Math.abs(Kr-Rr),Rr=Kr}return vr},qn=function($n,On,er){var sr=(er-On)/2,ar=$n*Math.cos(sr),cr=$n*Math.sin(sr),gr=ar,vr=-cr,Er=gr*gr+vr*vr,Rr=Er+gr*ar+vr*cr,Kr=4/3*(Math.sqrt(2*Er*Rr)-Rr)/(gr*cr-vr*ar),Cr=gr-Kr*vr,Gr=vr+Kr*gr,Zn=Cr,Xr=-Gr,hs=sr+On,us=Math.cos(hs),zr=Math.sin(hs);return{x1:$n*Math.cos(On),y1:$n*Math.sin(On),x2:Cr*us-Gr*zr,y2:Cr*zr+Gr*us,x3:Zn*us-Xr*zr,y3:Zn*zr+Xr*us,x4:$n*Math.cos(er),y4:$n*Math.sin(er)}},Yn=function($n){return 180*$n/Math.PI},Qn=function($n,On,er,sr,ar,cr){var gr=$n+.5*(er-$n),vr=On+.5*(sr-On),Er=ar+.5*(er-ar),Rr=cr+.5*(sr-cr),Kr=Math.min($n,ar,gr,Er),Cr=Math.max($n,ar,gr,Er),Gr=Math.min(On,cr,vr,Rr),Zn=Math.max(On,cr,vr,Rr);return new un(Kr,Gr,Cr-Kr,Zn-Gr)},zn=function($n,On,er,sr,ar,cr,gr,vr){var Er,Rr,Kr,Cr,Gr,Zn,Xr,hs,us,zr,ls,wr,Fr,Qr,fs=er-$n,os=sr-On,xr=ar-er,Or=cr-sr,Ir=gr-ar,$r=vr-cr;for(Rr=0;Rr<41;Rr++)us=(Xr=(Kr=$n+(Er=Rr/40)*fs)+Er*((Gr=er+Er*xr)-Kr))+Er*(Gr+Er*(ar+Er*Ir-Gr)-Xr),zr=(hs=(Cr=On+Er*os)+Er*((Zn=sr+Er*Or)-Cr))+Er*(Zn+Er*(cr+Er*$r-Zn)-hs),Rr==0?(ls=us,wr=zr,Fr=us,Qr=zr):(ls=Math.min(ls,us),wr=Math.min(wr,zr),Fr=Math.max(Fr,us),Qr=Math.max(Qr,zr));return new un(Math.round(ls),Math.round(wr),Math.round(Fr-ls),Math.round(Qr-wr))},lr=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var $n,On,er=($n=this.ctx.lineDash,On=this.ctx.lineDashOffset,JSON.stringify({lineDash:$n,lineDashOffset:On}));this.prevLineDash!==er&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=er)}}})(E.API),function(St){var e=function(on){var un,dn,fn,hn,an,rn,cn,pn,mn,xn;for(dn=[],fn=0,hn=(on+=un="\0\0\0\0".slice(on.length%4||4)).length;hn>fn;fn+=4)(an=(on.charCodeAt(fn)<<24)+(on.charCodeAt(fn+1)<<16)+(on.charCodeAt(fn+2)<<8)+on.charCodeAt(fn+3))!==0?(rn=(an=((an=((an=((an=(an-(xn=an%85))/85)-(mn=an%85))/85)-(pn=an%85))/85)-(cn=an%85))/85)%85,dn.push(rn+33,cn+33,pn+33,mn+33,xn+33)):dn.push(122);return function(gn,yn){for(var bn=yn;bn>0;bn--)gn.pop()}(dn,un.length),String.fromCharCode.apply(String,dn)+"~>"},en=function(on){var un,dn,fn,hn,an,rn=String,cn="length",pn=255,mn="charCodeAt",xn="slice",gn="replace";for(on[xn](-2),on=on[xn](0,-2)[gn](/\s/g,"")[gn]("z","!!!!!"),fn=[],hn=0,an=(on+=un="uuuuu"[xn](on[cn]%5||5))[cn];an>hn;hn+=5)dn=52200625*(on[mn](hn)-33)+614125*(on[mn](hn+1)-33)+7225*(on[mn](hn+2)-33)+85*(on[mn](hn+3)-33)+(on[mn](hn+4)-33),fn.push(pn&dn>>24,pn&dn>>16,pn&dn>>8,pn&dn);return function(yn,bn){for(var wn=bn;wn>0;wn--)yn.pop()}(fn,un[cn]),rn.fromCharCode.apply(rn,fn)},tn=function(on){return on.split("").map(function(un){return("0"+un.charCodeAt().toString(16)).slice(-2)}).join("")+">"},nn=function(on){var un=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((on=on.replace(/\s/g,"")).indexOf(">")!==-1&&(on=on.substr(0,on.indexOf(">"))),on.length%2&&(on+="0"),un.test(on)===!1)return"";for(var dn="",fn=0;fn<on.length;fn+=2)dn+=String.fromCharCode("0x"+(on[fn]+on[fn+1]));return dn},sn=function(on){for(var un=new Uint8Array(on.length),dn=on.length;dn--;)un[dn]=on.charCodeAt(dn);return(un=zlibSync(un)).reduce(function(fn,hn){return fn+String.fromCharCode(hn)},"")};St.processDataByFilters=function(on,un){var dn=0,fn=on||"",hn=[];for(typeof(un=un||[])=="string"&&(un=[un]),dn=0;dn<un.length;dn+=1)switch(un[dn]){case"ASCII85Decode":case"/ASCII85Decode":fn=en(fn),hn.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":fn=e(fn),hn.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":fn=nn(fn),hn.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":fn=tn(fn),hn.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":fn=sn(fn),hn.push("/FlateDecode");break;default:throw new Error('The filter: "'+un[dn]+'" is not implemented')}return{data:fn,reverseChain:hn.reverse().join(" ")}}}(E.API),function(St){St.loadFile=function(e,en,tn){return function(nn,sn,on){sn=sn!==!1,on=typeof on=="function"?on:function(){};var un=void 0;try{un=function(dn,fn,hn){var an=new XMLHttpRequest,rn=0,cn=function(pn){var mn=pn.length,xn=[],gn=String.fromCharCode;for(rn=0;rn<mn;rn+=1)xn.push(gn(255&pn.charCodeAt(rn)));return xn.join("")};if(an.open("GET",dn,!fn),an.overrideMimeType("text/plain; charset=x-user-defined"),fn===!1&&(an.onload=function(){an.status===200?hn(cn(this.responseText)):hn(void 0)}),an.send(null),fn&&an.status===200)return cn(an.responseText)}(nn,sn,on)}catch{}return un}(e,en,tn)},St.loadImageFile=St.loadFile}(E.API),function(St){function e(){return(i.html2canvas?Promise.resolve(i.html2canvas):__vitePreload(()=>import("./html2canvas.esm-CBrSDip1.js"),[],import.meta.url)).catch(function(un){return Promise.reject(new Error("Could not load html2canvas: "+un))}).then(function(un){return un.default?un.default:un})}function en(){return(i.DOMPurify?Promise.resolve(i.DOMPurify):__vitePreload(()=>import("./purify.es-B6FQ9oRL.js"),[],import.meta.url)).catch(function(un){return Promise.reject(new Error("Could not load dompurify: "+un))}).then(function(un){return un.default?un.default:un})}var tn=function(un){var dn=_typeof(un);return dn==="undefined"?"undefined":dn==="string"||un instanceof String?"string":dn==="number"||un instanceof Number?"number":dn==="function"||un instanceof Function?"function":un&&un.constructor===Array?"array":un&&un.nodeType===1?"element":dn==="object"?"object":"unknown"},nn=function(un,dn){var fn=document.createElement(un);for(var hn in dn.className&&(fn.className=dn.className),dn.innerHTML&&dn.dompurify&&(fn.innerHTML=dn.dompurify.sanitize(dn.innerHTML)),dn.style)fn.style[hn]=dn.style[hn];return fn},sn=function un(dn,fn){for(var hn=dn.nodeType===3?document.createTextNode(dn.nodeValue):dn.cloneNode(!1),an=dn.firstChild;an;an=an.nextSibling)fn!==!0&&an.nodeType===1&&an.nodeName==="SCRIPT"||hn.appendChild(un(an,fn));return dn.nodeType===1&&(dn.nodeName==="CANVAS"?(hn.width=dn.width,hn.height=dn.height,hn.getContext("2d").drawImage(dn,0,0)):dn.nodeName!=="TEXTAREA"&&dn.nodeName!=="SELECT"||(hn.value=dn.value),hn.addEventListener("load",function(){hn.scrollTop=dn.scrollTop,hn.scrollLeft=dn.scrollLeft},!0)),hn},on=function un(dn){var fn=Object.assign(un.convert(Promise.resolve()),JSON.parse(JSON.stringify(un.template))),hn=un.convert(Promise.resolve(),fn);return(hn=hn.setProgress(1,un,1,[un])).set(dn)};(on.prototype=Object.create(Promise.prototype)).constructor=on,on.convert=function(un,dn){return un.__proto__=dn||on.prototype,un},on.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},on.prototype.from=function(un,dn){return this.then(function(){switch(dn=dn||function(fn){switch(tn(fn)){case"string":return"string";case"element":return fn.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(un),dn){case"string":return this.then(en).then(function(fn){return this.set({src:nn("div",{innerHTML:un,dompurify:fn})})});case"element":return this.set({src:un});case"canvas":return this.set({canvas:un});case"img":return this.set({img:un});default:return this.error("Unknown source type.")}})},on.prototype.to=function(un){switch(un){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},on.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var un={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},dn=sn(this.prop.src,this.opt.html2canvas.javascriptEnabled);dn.tagName==="BODY"&&(un.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=nn("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=nn("div",{className:"html2pdf__container",style:un}),this.prop.container.appendChild(dn),this.prop.container.firstChild.appendChild(nn("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},on.prototype.toCanvas=function(){var un=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(un).then(e).then(function(dn){var fn=Object.assign({},this.opt.html2canvas);return delete fn.onrendered,dn(this.prop.container,fn)}).then(function(dn){(this.opt.html2canvas.onrendered||function(){})(dn),this.prop.canvas=dn,document.body.removeChild(this.prop.overlay)})},on.prototype.toContext2d=function(){var un=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(un).then(e).then(function(dn){var fn=this.opt.jsPDF,hn=this.opt.fontFaces,an=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,rn=Object.assign({async:!0,allowTaint:!0,scale:an,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete rn.onrendered,fn.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,fn.context2d.posX=this.opt.x,fn.context2d.posY=this.opt.y,fn.context2d.margin=this.opt.margin,fn.context2d.fontFaces=hn,hn)for(var cn=0;cn<hn.length;++cn){var pn=hn[cn],mn=pn.src.find(function(xn){return xn.format==="truetype"});mn&&fn.addFont(mn.url,pn.ref.name,pn.ref.style)}return rn.windowHeight=rn.windowHeight||0,rn.windowHeight=rn.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):rn.windowHeight,fn.context2d.save(!0),dn(this.prop.container,rn)}).then(function(dn){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(dn),this.prop.canvas=dn,document.body.removeChild(this.prop.overlay)})},on.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var un=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=un})},on.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},on.prototype.output=function(un,dn,fn){return(fn=fn||"pdf").toLowerCase()==="img"||fn.toLowerCase()==="image"?this.outputImg(un,dn):this.outputPdf(un,dn)},on.prototype.outputPdf=function(un,dn){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(un,dn)})},on.prototype.outputImg=function(un){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(un){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+un+'" is not supported.'}})},on.prototype.save=function(un){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(un?{filename:un}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},on.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},on.prototype.set=function(un){if(tn(un)!=="object")return this;var dn=Object.keys(un||{}).map(function(fn){if(fn in on.template.prop)return function(){this.prop[fn]=un[fn]};switch(fn){case"margin":return this.setMargin.bind(this,un.margin);case"jsPDF":return function(){return this.opt.jsPDF=un.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,un.pageSize);default:return function(){this.opt[fn]=un[fn]}}},this);return this.then(function(){return this.thenList(dn)})},on.prototype.get=function(un,dn){return this.then(function(){var fn=un in on.template.prop?this.prop[un]:this.opt[un];return dn?dn(fn):fn})},on.prototype.setMargin=function(un){return this.then(function(){switch(tn(un)){case"number":un=[un,un,un,un];case"array":if(un.length===2&&(un=[un[0],un[1],un[0],un[1]]),un.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=un}).then(this.setPageSize)},on.prototype.setPageSize=function(un){function dn(fn,hn){return Math.floor(fn*hn/72*96)}return this.then(function(){(un=un||E.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(un.inner={width:un.width-this.opt.margin[1]-this.opt.margin[3],height:un.height-this.opt.margin[0]-this.opt.margin[2]},un.inner.px={width:dn(un.inner.width,un.k),height:dn(un.inner.height,un.k)},un.inner.ratio=un.inner.height/un.inner.width),this.prop.pageSize=un})},on.prototype.setProgress=function(un,dn,fn,hn){return un!=null&&(this.progress.val=un),dn!=null&&(this.progress.state=dn),fn!=null&&(this.progress.n=fn),hn!=null&&(this.progress.stack=hn),this.progress.ratio=this.progress.val/this.progress.state,this},on.prototype.updateProgress=function(un,dn,fn,hn){return this.setProgress(un?this.progress.val+un:null,dn||null,fn?this.progress.n+fn:null,hn?this.progress.stack.concat(hn):null)},on.prototype.then=function(un,dn){var fn=this;return this.thenCore(un,dn,function(hn,an){return fn.updateProgress(null,null,1,[hn]),Promise.prototype.then.call(this,function(rn){return fn.updateProgress(null,hn),rn}).then(hn,an).then(function(rn){return fn.updateProgress(1),rn})})},on.prototype.thenCore=function(un,dn,fn){fn=fn||Promise.prototype.then;var hn=this;un&&(un=un.bind(hn)),dn&&(dn=dn.bind(hn));var an=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?hn:on.convert(Object.assign({},hn),Promise.prototype),rn=fn.call(an,un,dn);return on.convert(rn,hn.__proto__)},on.prototype.thenExternal=function(un,dn){return Promise.prototype.then.call(this,un,dn)},on.prototype.thenList=function(un){var dn=this;return un.forEach(function(fn){dn=dn.thenCore(fn)}),dn},on.prototype.catch=function(un){un&&(un=un.bind(this));var dn=Promise.prototype.catch.call(this,un);return on.convert(dn,this)},on.prototype.catchExternal=function(un){return Promise.prototype.catch.call(this,un)},on.prototype.error=function(un){return this.then(function(){throw new Error(un)})},on.prototype.using=on.prototype.set,on.prototype.saveAs=on.prototype.save,on.prototype.export=on.prototype.output,on.prototype.run=on.prototype.then,E.getPageSize=function(un,dn,fn){if(_typeof(un)==="object"){var hn=un;un=hn.orientation,dn=hn.unit||dn,fn=hn.format||fn}dn=dn||"mm",fn=fn||"a4",un=(""+(un||"P")).toLowerCase();var an,rn=(""+fn).toLowerCase(),cn={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(dn){case"pt":an=1;break;case"mm":an=72/25.4;break;case"cm":an=72/2.54;break;case"in":an=72;break;case"px":an=.75;break;case"pc":case"em":an=12;break;case"ex":an=6;break;default:throw"Invalid unit: "+dn}var pn,mn=0,xn=0;if(cn.hasOwnProperty(rn))mn=cn[rn][1]/an,xn=cn[rn][0]/an;else try{mn=fn[1],xn=fn[0]}catch{throw new Error("Invalid format: "+fn)}if(un==="p"||un==="portrait")un="p",xn>mn&&(pn=xn,xn=mn,mn=pn);else{if(un!=="l"&&un!=="landscape")throw"Invalid orientation: "+un;un="l",mn>xn&&(pn=xn,xn=mn,mn=pn)}return{width:xn,height:mn,unit:dn,k:an,orientation:un}},St.html=function(un,dn){(dn=dn||{}).callback=dn.callback||function(){},dn.html2canvas=dn.html2canvas||{},dn.html2canvas.canvas=dn.html2canvas.canvas||this.canvas,dn.jsPDF=dn.jsPDF||this,dn.fontFaces=dn.fontFaces?dn.fontFaces.map(Ct):null;var fn=new on(dn);return dn.worker?fn:fn.from(un).doCallback()}}(E.API),E.API.addJS=function(St){return Ut=St,this.internal.events.subscribe("postPutResources",function(){Tt=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Tt+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),zt=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Ut+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Tt!==void 0&&zt!==void 0&&this.internal.out("/Names <</JavaScript "+Tt+" 0 R>>")}),this},function(St){var e;St.events.push(["postPutResources",function(){var en=this,tn=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var nn=en.outline.render().split(/\r\n/),sn=0;sn<nn.length;sn++){var on=nn[sn],un=tn.exec(on);if(un!=null){var dn=un[1];en.internal.newObjectDeferredBegin(dn,!1)}en.internal.write(on)}if(this.outline.createNamedDestinations){var fn=this.internal.pages.length,hn=[];for(sn=0;sn<fn;sn++){var an=en.internal.newObject();hn.push(an);var rn=en.internal.getPageInfo(sn+1);en.internal.write("<< /D["+rn.objId+" 0 R /XYZ null null null]>> endobj")}var cn=en.internal.newObject();for(en.internal.write("<< /Names [ "),sn=0;sn<hn.length;sn++)en.internal.write("(page_"+(sn+1)+")"+hn[sn]+" 0 R");en.internal.write(" ] >>","endobj"),e=en.internal.newObject(),en.internal.write("<< /Dests "+cn+" 0 R"),en.internal.write(">>","endobj")}}]),St.events.push(["putCatalog",function(){var en=this;en.outline.root.children.length>0&&(en.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&en.internal.write("/Names "+e+" 0 R"))}]),St.events.push(["initialized",function(){var en=this;en.outline={createNamedDestinations:!1,root:{children:[]}},en.outline.add=function(tn,nn,sn){var on={title:nn,options:sn,children:[]};return tn==null&&(tn=this.root),tn.children.push(on),on},en.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=en,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},en.outline.genIds_r=function(tn){tn.id=en.internal.newObjectDeferred();for(var nn=0;nn<tn.children.length;nn++)this.genIds_r(tn.children[nn])},en.outline.renderRoot=function(tn){this.objStart(tn),this.line("/Type /Outlines"),tn.children.length>0&&(this.line("/First "+this.makeRef(tn.children[0])),this.line("/Last "+this.makeRef(tn.children[tn.children.length-1]))),this.line("/Count "+this.count_r({count:0},tn)),this.objEnd()},en.outline.renderItems=function(tn){for(var nn=this.ctx.pdf.internal.getVerticalCoordinateString,sn=0;sn<tn.children.length;sn++){var on=tn.children[sn];this.objStart(on),this.line("/Title "+this.makeString(on.title)),this.line("/Parent "+this.makeRef(tn)),sn>0&&this.line("/Prev "+this.makeRef(tn.children[sn-1])),sn<tn.children.length-1&&this.line("/Next "+this.makeRef(tn.children[sn+1])),on.children.length>0&&(this.line("/First "+this.makeRef(on.children[0])),this.line("/Last "+this.makeRef(on.children[on.children.length-1])));var un=this.count=this.count_r({count:0},on);if(un>0&&this.line("/Count "+un),on.options&&on.options.pageNumber){var dn=en.internal.getPageInfo(on.options.pageNumber);this.line("/Dest ["+dn.objId+" 0 R /XYZ 0 "+nn(0)+" 0]")}this.objEnd()}for(var fn=0;fn<tn.children.length;fn++)this.renderItems(tn.children[fn])},en.outline.line=function(tn){this.ctx.val+=tn+`\r
`},en.outline.makeRef=function(tn){return tn.id+" 0 R"},en.outline.makeString=function(tn){return"("+en.internal.pdfEscape(tn)+")"},en.outline.objStart=function(tn){this.ctx.val+=`\r
`+tn.id+` 0 obj\r
<<\r
`},en.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},en.outline.count_r=function(tn,nn){for(var sn=0;sn<nn.children.length;sn++)tn.count++,this.count_r(tn,nn.children[sn]);return tn.count}}])}(E.API),function(St){var e=[192,193,194,195,196,197,198,199];St.processJPEG=function(en,tn,nn,sn,on,un){var dn,fn=this.decode.DCT_DECODE,hn=null;if(typeof en=="string"||this.__addimage__.isArrayBuffer(en)||this.__addimage__.isArrayBufferView(en)){switch(en=on||en,en=this.__addimage__.isArrayBuffer(en)?new Uint8Array(en):en,dn=function(an){for(var rn,cn=256*an.charCodeAt(4)+an.charCodeAt(5),pn=an.length,mn={width:0,height:0,numcomponents:1},xn=4;xn<pn;xn+=2){if(xn+=cn,e.indexOf(an.charCodeAt(xn+1))!==-1){rn=256*an.charCodeAt(xn+5)+an.charCodeAt(xn+6),mn={width:256*an.charCodeAt(xn+7)+an.charCodeAt(xn+8),height:rn,numcomponents:an.charCodeAt(xn+9)};break}cn=256*an.charCodeAt(xn+2)+an.charCodeAt(xn+3)}return mn}(en=this.__addimage__.isArrayBufferView(en)?this.__addimage__.arrayBufferToBinaryString(en):en),dn.numcomponents){case 1:un=this.color_spaces.DEVICE_GRAY;break;case 4:un=this.color_spaces.DEVICE_CMYK;break;case 3:un=this.color_spaces.DEVICE_RGB}hn={data:en,width:dn.width,height:dn.height,colorSpace:un,bitsPerComponent:8,filter:fn,index:tn,alias:nn}}return hn}}(E.API),E.API.processPNG=function(St,e,en,tn){if(this.__addimage__.isArrayBuffer(St)&&(St=new Uint8Array(St)),this.__addimage__.isArrayBufferView(St)){var nn,sn=decodePng(St,{checkCrc:!0}),on=sn.width,un=sn.height,dn=sn.channels,fn=sn.palette,hn=sn.depth;nn=fn&&dn===1?function(Pn){for(var Sn=Pn.width,Cn=Pn.height,Nn=Pn.data,Mn=Pn.palette,Fn=Pn.depth,In=!1,Bn=[],Ln=[],qn=void 0,Yn=!1,Qn=0,zn=0;zn<Mn.length;zn++){var lr=_slicedToArray(Mn[zn],4),$n=lr[0],On=lr[1],er=lr[2],sr=lr[3];Bn.push($n,On,er),sr!=null&&(sr===0?(Qn++,Ln.length<1&&Ln.push(zn)):sr<255&&(Yn=!0))}if(Yn||Qn>1){In=!0,Ln=void 0;var ar=Sn*Cn;qn=new Uint8Array(ar);for(var cr=new DataView(Nn.buffer),gr=0;gr<ar;gr++){var vr=re(cr,gr,Fn),Er=_slicedToArray(Mn[vr],4)[3];qn[gr]=Er}}else Qn===0&&(Ln=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:In?8:void 0,colorBytes:Nn,alphaBytes:qn,needSMask:In,palette:Bn,mask:Ln}}(sn):dn===2||dn===4?function(Pn){for(var Sn=Pn.data,Cn=Pn.width,Nn=Pn.height,Mn=Pn.channels,Fn=Pn.depth,In=Mn===2?"DeviceGray":"DeviceRGB",Bn=Mn-1,Ln=Cn*Nn,qn=Bn,Yn=Ln*qn,Qn=1*Ln,zn=Math.ceil(Yn*Fn/8),lr=Math.ceil(Qn*Fn/8),$n=new Uint8Array(zn),On=new Uint8Array(lr),er=new DataView(Sn.buffer),sr=new DataView($n.buffer),ar=new DataView(On.buffer),cr=!1,gr=0;gr<Ln;gr++){for(var vr=gr*Mn,Er=0;Er<qn;Er++)ie(sr,re(er,vr+Er,Fn),gr*qn+Er,Fn);var Rr=re(er,vr+qn,Fn);Rr<(1<<Fn)-1&&(cr=!0),ie(ar,Rr,1*gr,Fn)}return{colorSpace:In,colorsPerPixel:Bn,sMaskBitsPerComponent:cr?Fn:void 0,colorBytes:$n,alphaBytes:On,needSMask:cr}}(sn):function(Pn){var Sn=Pn.data,Cn=Pn.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:Cn,colorsPerPixel:Cn==="DeviceGray"?1:3,colorBytes:Sn instanceof Uint16Array?function(Nn){for(var Mn=Nn.length,Fn=new Uint8Array(2*Mn),In=new DataView(Fn.buffer,Fn.byteOffset,Fn.byteLength),Bn=0;Bn<Mn;Bn++)In.setUint16(2*Bn,Nn[Bn],!1);return Fn}(Sn):Sn,needSMask:!1}}(sn);var an,rn,cn,pn=nn,mn=pn.colorSpace,xn=pn.colorsPerPixel,gn=pn.sMaskBitsPerComponent,yn=pn.colorBytes,bn=pn.alphaBytes,wn=pn.needSMask,_n=pn.palette,Tn=pn.mask,An=null;return tn!==E.API.image_compression.NONE&&typeof zlibSync=="function"?(An=function(Pn){var Sn;switch(Pn){case E.API.image_compression.FAST:Sn=11;break;case E.API.image_compression.MEDIUM:Sn=13;break;case E.API.image_compression.SLOW:Sn=14;break;default:Sn=12}return Sn}(tn),an=this.decode.FLATE_DECODE,rn="/Predictor ".concat(An," /Colors ").concat(xn," /BitsPerComponent ").concat(hn," /Columns ").concat(on),St=Xt(yn,Math.ceil(on*xn*hn/8),xn,hn,tn),wn&&(cn=Xt(bn,Math.ceil(on*gn/8),1,gn,tn))):(an=void 0,rn=void 0,St=yn,wn&&(cn=bn)),(this.__addimage__.isArrayBuffer(St)||this.__addimage__.isArrayBufferView(St))&&(St=this.__addimage__.arrayBufferToBinaryString(St)),(cn&&this.__addimage__.isArrayBuffer(cn)||this.__addimage__.isArrayBufferView(cn))&&(cn=this.__addimage__.arrayBufferToBinaryString(cn)),{alias:en,data:St,index:e,filter:an,decodeParameters:rn,transparency:Tn,palette:_n,sMask:cn,predictor:An,width:on,height:un,bitsPerComponent:hn,sMaskBitsPerComponent:gn,colorSpace:mn}}},function(St){St.processGIF89A=function(e,en,tn,nn){var sn=new oe(e),on=sn.width,un=sn.height,dn=[];sn.decodeAndBlitFrameRGBA(0,dn);var fn={data:dn,width:on,height:un},hn=new ue(100).encode(fn,100);return St.processJPEG.call(this,hn,en,tn,nn)},St.processGIF87A=St.processGIF89A}(E.API),ce.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var St=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(St);for(var e=0;e<St;e++){var en=this.datav.getUint8(this.pos++,!0),tn=this.datav.getUint8(this.pos++,!0),nn=this.datav.getUint8(this.pos++,!0),sn=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:nn,green:tn,blue:en,quad:sn}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ce.prototype.parseBGR=function(){this.pos=this.offset;try{var St="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[St]()}catch(en){o.log("bit decode error:"+en)}},ce.prototype.bit1=function(){var St,e=Math.ceil(this.width/8),en=e%4;for(St=this.height-1;St>=0;St--){for(var tn=this.bottom_up?St:this.height-1-St,nn=0;nn<e;nn++)for(var sn=this.datav.getUint8(this.pos++,!0),on=tn*this.width*4+8*nn*4,un=0;un<8&&8*nn+un<this.width;un++){var dn=this.palette[sn>>7-un&1];this.data[on+4*un]=dn.blue,this.data[on+4*un+1]=dn.green,this.data[on+4*un+2]=dn.red,this.data[on+4*un+3]=255}en!==0&&(this.pos+=4-en)}},ce.prototype.bit4=function(){for(var St=Math.ceil(this.width/2),e=St%4,en=this.height-1;en>=0;en--){for(var tn=this.bottom_up?en:this.height-1-en,nn=0;nn<St;nn++){var sn=this.datav.getUint8(this.pos++,!0),on=tn*this.width*4+2*nn*4,un=sn>>4,dn=15&sn,fn=this.palette[un];if(this.data[on]=fn.blue,this.data[on+1]=fn.green,this.data[on+2]=fn.red,this.data[on+3]=255,2*nn+1>=this.width)break;fn=this.palette[dn],this.data[on+4]=fn.blue,this.data[on+4+1]=fn.green,this.data[on+4+2]=fn.red,this.data[on+4+3]=255}e!==0&&(this.pos+=4-e)}},ce.prototype.bit8=function(){for(var St=this.width%4,e=this.height-1;e>=0;e--){for(var en=this.bottom_up?e:this.height-1-e,tn=0;tn<this.width;tn++){var nn=this.datav.getUint8(this.pos++,!0),sn=en*this.width*4+4*tn;if(nn<this.palette.length){var on=this.palette[nn];this.data[sn]=on.red,this.data[sn+1]=on.green,this.data[sn+2]=on.blue,this.data[sn+3]=255}else this.data[sn]=255,this.data[sn+1]=255,this.data[sn+2]=255,this.data[sn+3]=255}St!==0&&(this.pos+=4-St)}},ce.prototype.bit15=function(){for(var St=this.width%3,e=parseInt("11111",2),en=this.height-1;en>=0;en--){for(var tn=this.bottom_up?en:this.height-1-en,nn=0;nn<this.width;nn++){var sn=this.datav.getUint16(this.pos,!0);this.pos+=2;var on=(sn&e)/e*255|0,un=(sn>>5&e)/e*255|0,dn=(sn>>10&e)/e*255|0,fn=sn>>15?255:0,hn=tn*this.width*4+4*nn;this.data[hn]=dn,this.data[hn+1]=un,this.data[hn+2]=on,this.data[hn+3]=fn}this.pos+=St}},ce.prototype.bit16=function(){for(var St=this.width%3,e=parseInt("11111",2),en=parseInt("111111",2),tn=this.height-1;tn>=0;tn--){for(var nn=this.bottom_up?tn:this.height-1-tn,sn=0;sn<this.width;sn++){var on=this.datav.getUint16(this.pos,!0);this.pos+=2;var un=(on&e)/e*255|0,dn=(on>>5&en)/en*255|0,fn=(on>>11)/e*255|0,hn=nn*this.width*4+4*sn;this.data[hn]=fn,this.data[hn+1]=dn,this.data[hn+2]=un,this.data[hn+3]=255}this.pos+=St}},ce.prototype.bit24=function(){for(var St=this.height-1;St>=0;St--){for(var e=this.bottom_up?St:this.height-1-St,en=0;en<this.width;en++){var tn=this.datav.getUint8(this.pos++,!0),nn=this.datav.getUint8(this.pos++,!0),sn=this.datav.getUint8(this.pos++,!0),on=e*this.width*4+4*en;this.data[on]=sn,this.data[on+1]=nn,this.data[on+2]=tn,this.data[on+3]=255}this.pos+=this.width%4}},ce.prototype.bit32=function(){for(var St=this.height-1;St>=0;St--)for(var e=this.bottom_up?St:this.height-1-St,en=0;en<this.width;en++){var tn=this.datav.getUint8(this.pos++,!0),nn=this.datav.getUint8(this.pos++,!0),sn=this.datav.getUint8(this.pos++,!0),on=this.datav.getUint8(this.pos++,!0),un=e*this.width*4+4*en;this.data[un]=sn,this.data[un+1]=nn,this.data[un+2]=tn,this.data[un+3]=on}},ce.prototype.getData=function(){return this.data},function(St){St.processBMP=function(e,en,tn,nn){var sn=new ce(e,!1),on=sn.width,un=sn.height,dn={data:sn.getData(),width:on,height:un},fn=new ue(100).encode(dn,100);return St.processJPEG.call(this,fn,en,tn,nn)}}(E.API),le.prototype.getData=function(){return this.data},function(St){St.processWEBP=function(e,en,tn,nn){var sn=new le(e),on=sn.width,un=sn.height,dn={data:sn.getData(),width:on,height:un},fn=new ue(100).encode(dn,100);return St.processJPEG.call(this,fn,en,tn,nn)}}(E.API),E.API.processRGBA=function(St,e,en){for(var tn=St.data,nn=tn.length,sn=new Uint8Array(nn/4*3),on=new Uint8Array(nn/4),un=0,dn=0,fn=0;fn<nn;fn+=4){var hn=tn[fn],an=tn[fn+1],rn=tn[fn+2],cn=tn[fn+3];sn[un++]=hn,sn[un++]=an,sn[un++]=rn,on[dn++]=cn}var pn=this.__addimage__.arrayBufferToBinaryString(sn);return{alpha:this.__addimage__.arrayBufferToBinaryString(on),data:pn,index:e,alias:en,colorSpace:"DeviceRGB",bitsPerComponent:8,width:St.width,height:St.height}},E.API.setLanguage=function(St){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[St]!==void 0&&(this.internal.languageSettings.languageCode=St,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Ht=E.API,Wt=Ht.getCharWidthsArray=function(St,e){var en,tn,nn=(e=e||{}).font||this.internal.getFont(),sn=e.fontSize||this.internal.getFontSize(),on=e.charSpace||this.internal.getCharSpace(),un=e.widths?e.widths:nn.metadata.Unicode.widths,dn=un.fof?un.fof:1,fn=e.kerning?e.kerning:nn.metadata.Unicode.kerning,hn=fn.fof?fn.fof:1,an=e.doKerning!==!1,rn=0,cn=St.length,pn=0,mn=un[0]||dn,xn=[];for(en=0;en<cn;en++)tn=St.charCodeAt(en),typeof nn.metadata.widthOfString=="function"?xn.push((nn.metadata.widthOfGlyph(nn.metadata.characterToGlyph(tn))+on*(1e3/sn)||0)/1e3):(rn=an&&_typeof(fn[tn])==="object"&&!isNaN(parseInt(fn[tn][pn],10))?fn[tn][pn]/hn:0,xn.push((un[tn]||mn)/dn+rn)),pn=tn;return xn},Vt=Ht.getStringUnitWidth=function(St,e){var en=(e=e||{}).fontSize||this.internal.getFontSize(),tn=e.font||this.internal.getFont(),nn=e.charSpace||this.internal.getCharSpace();return Ht.processArabic&&(St=Ht.processArabic(St)),typeof tn.metadata.widthOfString=="function"?tn.metadata.widthOfString(St,en,nn)/en:Wt.apply(this,arguments).reduce(function(sn,on){return sn+on},0)},Gt=function(St,e,en,tn){for(var nn=[],sn=0,on=St.length,un=0;sn!==on&&un+e[sn]<en;)un+=e[sn],sn++;nn.push(St.slice(0,sn));var dn=sn;for(un=0;sn!==on;)un+e[sn]>tn&&(nn.push(St.slice(dn,sn)),un=0,dn=sn),un+=e[sn],sn++;return dn!==sn&&nn.push(St.slice(dn,sn)),nn},Yt=function(St,e,en){en||(en={});var tn,nn,sn,on,un,dn,fn,hn=[],an=[hn],rn=en.textIndent||0,cn=0,pn=0,mn=St.split(" "),xn=Wt.apply(this,[" ",en])[0];if(dn=en.lineIndent===-1?mn[0].length+2:en.lineIndent||0){var gn=Array(dn).join(" "),yn=[];mn.map(function(wn){(wn=wn.split(/\s*\n/)).length>1?yn=yn.concat(wn.map(function(_n,Tn){return(Tn&&_n.length?`
`:"")+_n})):yn.push(wn[0])}),mn=yn,dn=Vt.apply(this,[gn,en])}for(sn=0,on=mn.length;sn<on;sn++){var bn=0;if(tn=mn[sn],dn&&tn[0]==`
`&&(tn=tn.substr(1),bn=1),rn+cn+(pn=(nn=Wt.apply(this,[tn,en])).reduce(function(wn,_n){return wn+_n},0))>e||bn){if(pn>e){for(un=Gt.apply(this,[tn,nn,e-(rn+cn),e]),hn.push(un.shift()),hn=[un.pop()];un.length;)an.push([un.shift()]);pn=nn.slice(tn.length-(hn[0]?hn[0].length:0)).reduce(function(wn,_n){return wn+_n},0)}else hn=[tn];an.push(hn),rn=pn+dn,cn=xn}else hn.push(tn),rn+=cn+pn,cn=xn}return fn=dn?function(wn,_n){return(_n?gn:"")+wn.join(" ")}:function(wn){return wn.join(" ")},an.map(fn)},Ht.splitTextToSize=function(St,e,en){var tn,nn=(en=en||{}).fontSize||this.internal.getFontSize(),sn=(function(hn){if(hn.widths&&hn.kerning)return{widths:hn.widths,kerning:hn.kerning};var an=this.internal.getFont(hn.fontName,hn.fontStyle),rn="Unicode";return an.metadata[rn]?{widths:an.metadata[rn].widths||{0:1},kerning:an.metadata[rn].kerning||{}}:{font:an.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,en);tn=Array.isArray(St)?St:String(St).split(/\r?\n/);var on=1*this.internal.scaleFactor*e/nn;sn.textIndent=en.textIndent?1*en.textIndent*this.internal.scaleFactor/nn:0,sn.lineIndent=en.lineIndent;var un,dn,fn=[];for(un=0,dn=tn.length;un<dn;un++)fn=fn.concat(Yt.apply(this,[tn[un],on,sn]));return fn},function(St){St.__fontmetrics__=St.__fontmetrics__||{};for(var e="0123456789abcdef",en="klmnopqrstuvwxyz",tn={},nn={},sn=0;sn<16;sn++)tn[en[sn]]=e[sn],nn[e[sn]]=en[sn];var on=function(rn){return"0x"+parseInt(rn,10).toString(16)},un=St.__fontmetrics__.compress=function(rn){var cn,pn,mn,xn,gn=["{"];for(var yn in rn){if(cn=rn[yn],isNaN(parseInt(yn,10))?pn="'"+yn+"'":(yn=parseInt(yn,10),pn=(pn=on(yn).slice(2)).slice(0,-1)+nn[pn.slice(-1)]),typeof cn=="number")cn<0?(mn=on(cn).slice(3),xn="-"):(mn=on(cn).slice(2),xn=""),mn=xn+mn.slice(0,-1)+nn[mn.slice(-1)];else{if(_typeof(cn)!=="object")throw new Error("Don't know what to do with value type "+_typeof(cn)+".");mn=un(cn)}gn.push(pn+mn)}return gn.push("}"),gn.join("")},dn=St.__fontmetrics__.uncompress=function(rn){if(typeof rn!="string")throw new Error("Invalid argument passed to uncompress.");for(var cn,pn,mn,xn,gn={},yn=1,bn=gn,wn=[],_n="",Tn="",An=rn.length-1,Pn=1;Pn<An;Pn+=1)(xn=rn[Pn])=="'"?cn?(mn=cn.join(""),cn=void 0):cn=[]:cn?cn.push(xn):xn=="{"?(wn.push([bn,mn]),bn={},mn=void 0):xn=="}"?((pn=wn.pop())[0][pn[1]]=bn,mn=void 0,bn=pn[0]):xn=="-"?yn=-1:mn===void 0?tn.hasOwnProperty(xn)?(_n+=tn[xn],mn=parseInt(_n,16)*yn,yn=1,_n=""):_n+=xn:tn.hasOwnProperty(xn)?(Tn+=tn[xn],bn[mn]=parseInt(Tn,16)*yn,yn=1,mn=void 0,Tn=""):Tn+=xn;return gn},fn={codePages:["WinAnsiEncoding"],WinAnsiEncoding:dn("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},hn={Unicode:{Courier:fn,"Courier-Bold":fn,"Courier-BoldOblique":fn,"Courier-Oblique":fn,Helvetica:fn,"Helvetica-Bold":fn,"Helvetica-BoldOblique":fn,"Helvetica-Oblique":fn,"Times-Roman":fn,"Times-Bold":fn,"Times-BoldItalic":fn,"Times-Italic":fn}},an={Unicode:{"Courier-Oblique":dn("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":dn("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":dn("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:dn("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":dn("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":dn("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:dn("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:dn("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":dn("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:dn("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":dn("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":dn("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":dn("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":dn("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};St.events.push(["addFont",function(rn){var cn=rn.font,pn=an.Unicode[cn.postScriptName];pn&&(cn.metadata.Unicode={},cn.metadata.Unicode.widths=pn.widths,cn.metadata.Unicode.kerning=pn.kerning);var mn=hn.Unicode[cn.postScriptName];mn&&(cn.metadata.Unicode.encoding=mn,cn.encoding=mn.codePages[0])}])}(E.API),function(St){var e=function(en){for(var tn=en.length,nn=new Uint8Array(tn),sn=0;sn<tn;sn++)nn[sn]=en.charCodeAt(sn);return nn};St.API.events.push(["addFont",function(en){var tn=void 0,nn=en.font,sn=en.instance;if(!nn.isStandardFont){if(sn===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+nn.postScriptName+"').");if(typeof(tn=sn.existsFileInVFS(nn.postScriptName)===!1?sn.loadFile(nn.postScriptName):sn.getFileFromVFS(nn.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+nn.postScriptName+"').");(function(on,un){un=/^\x00\x01\x00\x00/.test(un)?e(un):e(f(un)),on.metadata=St.API.TTFFont.open(un),on.metadata.Unicode=on.metadata.Unicode||{encoding:{},kerning:{},widths:[]},on.metadata.glyIdsUsed=[0]})(nn,tn)}}])}(E),E.API.addSvgAsImage=function(St,e,en,tn,nn,sn,on,un){if(isNaN(e)||isNaN(en))throw o.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(tn)||isNaN(nn))throw o.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var dn=document.createElement("canvas");dn.width=tn,dn.height=nn;var fn=dn.getContext("2d");fn.fillStyle="#fff",fn.fillRect(0,0,dn.width,dn.height);var hn={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},an=this;return(i.canvg?Promise.resolve(i.canvg):__vitePreload(()=>import("./index.es-BeSaA4RD.js"),[],import.meta.url)).catch(function(rn){return Promise.reject(new Error("Could not load canvg: "+rn))}).then(function(rn){return rn.default?rn.default:rn}).then(function(rn){return rn.fromString(fn,St,hn)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(rn){return rn.render(hn)}).then(function(){an.addImage(dn.toDataURL("image/jpeg",1),e,en,tn,nn,on,un)})},E.API.putTotalPages=function(St){var e,en=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(St,"g"),en=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(St,this.internal.getFont()),"g"),en=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var tn=1;tn<=this.internal.getNumberOfPages();tn++)for(var nn=0;nn<this.internal.pages[tn].length;nn++)this.internal.pages[tn][nn]=this.internal.pages[tn][nn].replace(e,en);return this},E.API.viewerPreferences=function(St,e){var en;St=St||{},e=e||!1;var tn,nn,sn,on={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},un=Object.keys(on),dn=[],fn=0,hn=0,an=0;function rn(pn,mn){var xn,gn=!1;for(xn=0;xn<pn.length;xn+=1)pn[xn]===mn&&(gn=!0);return gn}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(on)),this.internal.viewerpreferences.isSubscribed=!1),en=this.internal.viewerpreferences.configuration,St==="reset"||e===!0){var cn=un.length;for(an=0;an<cn;an+=1)en[un[an]].value=en[un[an]].defaultValue,en[un[an]].explicitSet=!1}if(_typeof(St)==="object"){for(nn in St)if(sn=St[nn],rn(un,nn)&&sn!==void 0){if(en[nn].type==="boolean"&&typeof sn=="boolean")en[nn].value=sn;else if(en[nn].type==="name"&&rn(en[nn].valueSet,sn))en[nn].value=sn;else if(en[nn].type==="integer"&&Number.isInteger(sn))en[nn].value=sn;else if(en[nn].type==="array"){for(fn=0;fn<sn.length;fn+=1)if(tn=!0,sn[fn].length===1&&typeof sn[fn][0]=="number")dn.push(String(sn[fn]-1));else if(sn[fn].length>1){for(hn=0;hn<sn[fn].length;hn+=1)typeof sn[fn][hn]!="number"&&(tn=!1);tn===!0&&dn.push([sn[fn][0]-1,sn[fn][1]-1].join(" "))}en[nn].value="["+dn.join(" ")+"]"}else en[nn].value=en[nn].defaultValue;en[nn].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var pn,mn=[];for(pn in en)en[pn].explicitSet===!0&&(en[pn].type==="name"?mn.push("/"+pn+" /"+en[pn].value):mn.push("/"+pn+" "+en[pn].value));mn.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+mn.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=en,this},function(St){var e=function(){var tn='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',nn=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),sn=unescape(encodeURIComponent(tn)),on=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),un=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),dn=unescape(encodeURIComponent("</x:xmpmeta>")),fn=sn.length+on.length+un.length+nn.length+dn.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+fn+" >>"),this.internal.write("stream"),this.internal.write(nn+sn+on+un+dn),this.internal.write("endstream"),this.internal.write("endobj")},en=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};St.addMetadata=function(tn,nn){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:tn,namespaceuri:nn||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",en),this.internal.events.subscribe("postPutResources",e)),this}}(E.API),function(St){var e=St.API,en=e.pdfEscape16=function(sn,on){for(var un,dn=on.metadata.Unicode.widths,fn=["","0","00","000","0000"],hn=[""],an=0,rn=sn.length;an<rn;++an){if(un=on.metadata.characterToGlyph(sn.charCodeAt(an)),on.metadata.glyIdsUsed.push(un),on.metadata.toUnicode[un]=sn.charCodeAt(an),dn.indexOf(un)==-1&&(dn.push(un),dn.push([parseInt(on.metadata.widthOfGlyph(un),10)])),un=="0")return hn.join("");un=un.toString(16),hn.push(fn[4-un.length],un)}return hn.join("")},tn=function(sn){var on,un,dn,fn,hn,an,rn;for(hn=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,dn=[],an=0,rn=(un=Object.keys(sn).sort(function(cn,pn){return cn-pn})).length;an<rn;an++)on=un[an],dn.length>=100&&(hn+=`
`+dn.length+` beginbfchar
`+dn.join(`
`)+`
endbfchar`,dn=[]),sn[on]!==void 0&&sn[on]!==null&&typeof sn[on].toString=="function"&&(fn=("0000"+sn[on].toString(16)).slice(-4),on=("0000"+(+on).toString(16)).slice(-4),dn.push("<"+on+"><"+fn+">"));return dn.length&&(hn+=`
`+dn.length+` beginbfchar
`+dn.join(`
`)+`
endbfchar
`),hn+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(sn){(function(on){var un=on.font,dn=on.out,fn=on.newObject,hn=on.putStream;if(un.metadata instanceof St.API.TTFFont&&un.encoding==="Identity-H"){for(var an=un.metadata.Unicode.widths,rn=un.metadata.subset.encode(un.metadata.glyIdsUsed,1),cn="",pn=0;pn<rn.length;pn++)cn+=String.fromCharCode(rn[pn]);var mn=fn();hn({data:cn,addLength1:!0,objectId:mn}),dn("endobj");var xn=fn();hn({data:tn(un.metadata.toUnicode),addLength1:!0,objectId:xn}),dn("endobj");var gn=fn();dn("<<"),dn("/Type /FontDescriptor"),dn("/FontName /"+j(un.fontName)),dn("/FontFile2 "+mn+" 0 R"),dn("/FontBBox "+St.API.PDFObject.convert(un.metadata.bbox)),dn("/Flags "+un.metadata.flags),dn("/StemV "+un.metadata.stemV),dn("/ItalicAngle "+un.metadata.italicAngle),dn("/Ascent "+un.metadata.ascender),dn("/Descent "+un.metadata.decender),dn("/CapHeight "+un.metadata.capHeight),dn(">>"),dn("endobj");var yn=fn();dn("<<"),dn("/Type /Font"),dn("/BaseFont /"+j(un.fontName)),dn("/FontDescriptor "+gn+" 0 R"),dn("/W "+St.API.PDFObject.convert(an)),dn("/CIDToGIDMap /Identity"),dn("/DW 1000"),dn("/Subtype /CIDFontType2"),dn("/CIDSystemInfo"),dn("<<"),dn("/Supplement 0"),dn("/Registry (Adobe)"),dn("/Ordering ("+un.encoding+")"),dn(">>"),dn(">>"),dn("endobj"),un.objectNumber=fn(),dn("<<"),dn("/Type /Font"),dn("/Subtype /Type0"),dn("/ToUnicode "+xn+" 0 R"),dn("/BaseFont /"+j(un.fontName)),dn("/Encoding /"+un.encoding),dn("/DescendantFonts ["+yn+" 0 R]"),dn(">>"),dn("endobj"),un.isAlreadyPutted=!0}})(sn)}]),e.events.push(["putFont",function(sn){(function(on){var un=on.font,dn=on.out,fn=on.newObject,hn=on.putStream;if(un.metadata instanceof St.API.TTFFont&&un.encoding==="WinAnsiEncoding"){for(var an=un.metadata.rawData,rn="",cn=0;cn<an.length;cn++)rn+=String.fromCharCode(an[cn]);var pn=fn();hn({data:rn,addLength1:!0,objectId:pn}),dn("endobj");var mn=fn();hn({data:tn(un.metadata.toUnicode),addLength1:!0,objectId:mn}),dn("endobj");var xn=fn();dn("<<"),dn("/Descent "+un.metadata.decender),dn("/CapHeight "+un.metadata.capHeight),dn("/StemV "+un.metadata.stemV),dn("/Type /FontDescriptor"),dn("/FontFile2 "+pn+" 0 R"),dn("/Flags 96"),dn("/FontBBox "+St.API.PDFObject.convert(un.metadata.bbox)),dn("/FontName /"+j(un.fontName)),dn("/ItalicAngle "+un.metadata.italicAngle),dn("/Ascent "+un.metadata.ascender),dn(">>"),dn("endobj"),un.objectNumber=fn();for(var gn=0;gn<un.metadata.hmtx.widths.length;gn++)un.metadata.hmtx.widths[gn]=parseInt(un.metadata.hmtx.widths[gn]*(1e3/un.metadata.head.unitsPerEm));dn("<</Subtype/TrueType/Type/Font/ToUnicode "+mn+" 0 R/BaseFont/"+j(un.fontName)+"/FontDescriptor "+xn+" 0 R/Encoding/"+un.encoding+" /FirstChar 29 /LastChar 255 /Widths "+St.API.PDFObject.convert(un.metadata.hmtx.widths)+">>"),dn("endobj"),un.isAlreadyPutted=!0}})(sn)}]);var nn=function(sn){var on,un=sn.text||"",dn=sn.x,fn=sn.y,hn=sn.options||{},an=sn.mutex||{},rn=an.pdfEscape,cn=an.activeFontKey,pn=an.fonts,mn=cn,xn="",gn=0,yn="",bn=pn[mn].encoding;if(pn[mn].encoding!=="Identity-H")return{text:un,x:dn,y:fn,options:hn,mutex:an};for(yn=un,mn=cn,Array.isArray(un)&&(yn=un[0]),gn=0;gn<yn.length;gn+=1)pn[mn].metadata.hasOwnProperty("cmap")&&(on=pn[mn].metadata.cmap.unicode.codeMap[yn[gn].charCodeAt(0)]),on||yn[gn].charCodeAt(0)<256&&pn[mn].metadata.hasOwnProperty("Unicode")?xn+=yn[gn]:xn+="";var wn="";return parseInt(mn.slice(1))<14||bn==="WinAnsiEncoding"?wn=rn(xn,mn).split("").map(function(_n){return _n.charCodeAt(0).toString(16)}).join(""):bn==="Identity-H"&&(wn=en(xn,pn[mn])),an.isHex=!0,{text:wn,x:dn,y:fn,options:hn,mutex:an}};e.events.push(["postProcessText",function(sn){var on=sn.text||"",un=[],dn={text:on,x:sn.x,y:sn.y,options:sn.options,mutex:sn.mutex};if(Array.isArray(on)){var fn=0;for(fn=0;fn<on.length;fn+=1)Array.isArray(on[fn])&&on[fn].length===3?un.push([nn(Object.assign({},dn,{text:on[fn][0]})).text,on[fn][1],on[fn][2]]):un.push(nn(Object.assign({},dn,{text:on[fn]})).text);sn.text=un}else sn.text=nn(Object.assign({},dn,{text:on})).text}])}(E),function(St){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};St.existsFileInVFS=function(en){return e.call(this),this.internal.vFS[en]!==void 0},St.addFileToVFS=function(en,tn){return e.call(this),this.internal.vFS[en]=tn,this},St.getFileFromVFS=function(en){return e.call(this),this.internal.vFS[en]!==void 0?this.internal.vFS[en]:null}}(E.API),function(St){St.__bidiEngine__=St.prototype.__bidiEngine__=function(tn){var nn,sn,on,un,dn,fn,hn,an=e,rn=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],cn=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],pn={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},mn={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},xn=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],gn=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),yn=!1,bn=0;this.__bidiEngine__={};var wn=function(Nn){var Mn=Nn.charCodeAt(),Fn=Mn>>8,In=mn[Fn];return In!==void 0?an[256*In+(255&Mn)]:Fn===252||Fn===253?"AL":gn.test(Fn)?"L":Fn===8?"R":"N"},_n=function(Nn){for(var Mn,Fn=0;Fn<Nn.length;Fn++){if((Mn=wn(Nn.charAt(Fn)))==="L")return!1;if(Mn==="R")return!0}return!1},Tn=function(Nn,Mn,Fn,In){var Bn,Ln,qn,Yn,Qn=Mn[In];switch(Qn){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":yn=!1;break;case"N":case"AN":break;case"EN":yn&&(Qn="AN");break;case"AL":yn=!0,Qn="R";break;case"WS":case"BN":Qn="N";break;case"CS":In<1||In+1>=Mn.length||(Bn=Fn[In-1])!=="EN"&&Bn!=="AN"||(Ln=Mn[In+1])!=="EN"&&Ln!=="AN"?Qn="N":yn&&(Ln="AN"),Qn=Ln===Bn?Ln:"N";break;case"ES":Qn=(Bn=In>0?Fn[In-1]:"B")==="EN"&&In+1<Mn.length&&Mn[In+1]==="EN"?"EN":"N";break;case"ET":if(In>0&&Fn[In-1]==="EN"){Qn="EN";break}if(yn){Qn="N";break}for(qn=In+1,Yn=Mn.length;qn<Yn&&Mn[qn]==="ET";)qn++;Qn=qn<Yn&&Mn[qn]==="EN"?"EN":"N";break;case"NSM":if(on&&!un){for(Yn=Mn.length,qn=In+1;qn<Yn&&Mn[qn]==="NSM";)qn++;if(qn<Yn){var zn=Nn[In],lr=zn>=1425&&zn<=2303||zn===64286;if(Bn=Mn[qn],lr&&(Bn==="R"||Bn==="AL")){Qn="R";break}}}Qn=In<1||(Bn=Mn[In-1])==="B"?"N":Fn[In-1];break;case"B":yn=!1,nn=!0,Qn=bn;break;case"S":sn=!0,Qn="N"}return Qn},An=function(Nn,Mn,Fn){var In=Nn.split("");return Fn&&Pn(In,Fn,{hiLevel:bn}),In.reverse(),Mn&&Mn.reverse(),In.join("")},Pn=function(Nn,Mn,Fn){var In,Bn,Ln,qn,Yn,Qn=-1,zn=Nn.length,lr=0,$n=[],On=bn?cn:rn,er=[];for(yn=!1,nn=!1,sn=!1,Bn=0;Bn<zn;Bn++)er[Bn]=wn(Nn[Bn]);for(Ln=0;Ln<zn;Ln++){if(Yn=lr,$n[Ln]=Tn(Nn,er,$n,Ln),In=240&(lr=On[Yn][pn[$n[Ln]]]),lr&=15,Mn[Ln]=qn=On[lr][5],In>0)if(In===16){for(Bn=Qn;Bn<Ln;Bn++)Mn[Bn]=1;Qn=-1}else Qn=-1;if(On[lr][6])Qn===-1&&(Qn=Ln);else if(Qn>-1){for(Bn=Qn;Bn<Ln;Bn++)Mn[Bn]=qn;Qn=-1}er[Ln]==="B"&&(Mn[Ln]=0),Fn.hiLevel|=qn}sn&&function(sr,ar,cr){for(var gr=0;gr<cr;gr++)if(sr[gr]==="S"){ar[gr]=bn;for(var vr=gr-1;vr>=0&&sr[vr]==="WS";vr--)ar[vr]=bn}}(er,Mn,zn)},Sn=function(Nn,Mn,Fn,In,Bn){if(!(Bn.hiLevel<Nn)){if(Nn===1&&bn===1&&!nn)return Mn.reverse(),void(Fn&&Fn.reverse());for(var Ln,qn,Yn,Qn,zn=Mn.length,lr=0;lr<zn;){if(In[lr]>=Nn){for(Yn=lr+1;Yn<zn&&In[Yn]>=Nn;)Yn++;for(Qn=lr,qn=Yn-1;Qn<qn;Qn++,qn--)Ln=Mn[Qn],Mn[Qn]=Mn[qn],Mn[qn]=Ln,Fn&&(Ln=Fn[Qn],Fn[Qn]=Fn[qn],Fn[qn]=Ln);lr=Yn}lr++}}},Cn=function(Nn,Mn,Fn){var In=Nn.split(""),Bn={hiLevel:bn};return Fn||(Fn=[]),Pn(In,Fn,Bn),function(Ln,qn,Yn){if(Yn.hiLevel!==0&&hn)for(var Qn,zn=0;zn<Ln.length;zn++)qn[zn]===1&&(Qn=xn.indexOf(Ln[zn]))>=0&&(Ln[zn]=xn[Qn+1])}(In,Fn,Bn),Sn(2,In,Mn,Fn,Bn),Sn(1,In,Mn,Fn,Bn),In.join("")};return this.__bidiEngine__.doBidiReorder=function(Nn,Mn,Fn){if(function(Bn,Ln){if(Ln)for(var qn=0;qn<Bn.length;qn++)Ln[qn]=qn;un===void 0&&(un=_n(Bn)),fn===void 0&&(fn=_n(Bn))}(Nn,Mn),on||!dn||fn)if(on&&dn&&un^fn)bn=un?1:0,Nn=An(Nn,Mn,Fn);else if(!on&&dn&&fn)bn=un?1:0,Nn=Cn(Nn,Mn,Fn),Nn=An(Nn,Mn);else if(!on||un||dn||fn){if(on&&!dn&&un^fn)Nn=An(Nn,Mn),un?(bn=0,Nn=Cn(Nn,Mn,Fn)):(bn=1,Nn=Cn(Nn,Mn,Fn),Nn=An(Nn,Mn));else if(on&&un&&!dn&&fn)bn=1,Nn=Cn(Nn,Mn,Fn),Nn=An(Nn,Mn);else if(!on&&!dn&&un^fn){var In=hn;un?(bn=1,Nn=Cn(Nn,Mn,Fn),bn=0,hn=!1,Nn=Cn(Nn,Mn,Fn),hn=In):(bn=0,Nn=Cn(Nn,Mn,Fn),Nn=An(Nn,Mn),bn=1,hn=!1,Nn=Cn(Nn,Mn,Fn),hn=In,Nn=An(Nn,Mn))}}else bn=0,Nn=Cn(Nn,Mn,Fn);else bn=un?1:0,Nn=Cn(Nn,Mn,Fn);return Nn},this.__bidiEngine__.setOptions=function(Nn){Nn&&(on=Nn.isInputVisual,dn=Nn.isOutputVisual,un=Nn.isInputRtl,fn=Nn.isOutputRtl,hn=Nn.isSymmetricSwapping)},this.__bidiEngine__.setOptions(tn),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],en=new St.__bidiEngine__({isInputVisual:!0});St.API.events.push(["postProcessText",function(tn){var nn=tn.text;tn.x,tn.y;var sn=tn.options||{};tn.mutex,sn.lang;var on=[];if(sn.isInputVisual=typeof sn.isInputVisual!="boolean"||sn.isInputVisual,en.setOptions(sn),Object.prototype.toString.call(nn)==="[object Array]"){var un=0;for(on=[],un=0;un<nn.length;un+=1)Object.prototype.toString.call(nn[un])==="[object Array]"?on.push([en.doBidiReorder(nn[un][0]),nn[un][1],nn[un][2]]):on.push([en.doBidiReorder(nn[un])]);tn.text=on}else tn.text=en.doBidiReorder(nn);en.setOptions({isInputVisual:!0})}])}(E),E.API.TTFFont=function(){function St(e){var en;if(this.rawData=e,en=this.contents=new fe(e),this.contents.pos=4,en.readString(4)==="ttcf")throw new Error("TTCF not supported.");en.pos=0,this.parse(),this.subset=new je(this),this.registerTTF()}return St.open=function(e){return new St(e)},St.prototype.parse=function(){return this.directory=new de(this.contents),this.head=new me(this),this.name=new xe(this),this.cmap=new be(this),this.toUnicode={},this.hhea=new ye(this),this.maxp=new Ae(this),this.hmtx=new Se(this),this.post=new Ne(this),this.os2=new we(this),this.loca=new Ie(this),this.glyf=new Pe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},St.prototype.registerTTF=function(){var e,en,tn,nn,sn;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var on,un,dn,fn;for(fn=[],on=0,un=(dn=this.bbox).length;on<un;on++)e=dn[on],fn.push(Math.round(e*this.scaleFactor));return fn}).call(this),this.stemV=0,this.post.exists?(tn=255&(nn=this.post.italic_angle),32768&(en=nn>>16)&&(en=-(1+(65535^en))),this.italicAngle=+(en+"."+tn)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(sn=this.familyClass)===1||sn===2||sn===3||sn===4||sn===5||sn===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},St.prototype.characterToGlyph=function(e){var en;return((en=this.cmap.unicode)!=null?en.codeMap[e]:void 0)||0},St.prototype.widthOfGlyph=function(e){var en;return en=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*en},St.prototype.widthOfString=function(e,en,tn){var nn,sn,on,un;for(on=0,sn=0,un=(e=""+e).length;0<=un?sn<un:sn>un;sn=0<=un?++sn:--sn)nn=e.charCodeAt(sn),on+=this.widthOfGlyph(this.characterToGlyph(nn))+tn*(1e3/en)||0;return on*(en/1e3)},St.prototype.lineHeight=function(e,en){var tn;return en==null&&(en=!1),tn=en?this.lineGap:0,(this.ascender+tn-this.decender)/1e3*e},St}();var he,fe=function(){function St(e){this.data=e??[],this.pos=0,this.length=this.data.length}return St.prototype.readByte=function(){return this.data[this.pos++]},St.prototype.writeByte=function(e){return this.data[this.pos++]=e},St.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},St.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},St.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},St.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},St.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},St.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},St.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},St.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},St.prototype.readString=function(e){var en,tn;for(tn=[],en=0;0<=e?en<e:en>e;en=0<=e?++en:--en)tn[en]=String.fromCharCode(this.readByte());return tn.join("")},St.prototype.writeString=function(e){var en,tn,nn;for(nn=[],en=0,tn=e.length;0<=tn?en<tn:en>tn;en=0<=tn?++en:--en)nn.push(this.writeByte(e.charCodeAt(en)));return nn},St.prototype.readShort=function(){return this.readInt16()},St.prototype.writeShort=function(e){return this.writeInt16(e)},St.prototype.readLongLong=function(){var e,en,tn,nn,sn,on,un,dn;return e=this.readByte(),en=this.readByte(),tn=this.readByte(),nn=this.readByte(),sn=this.readByte(),on=this.readByte(),un=this.readByte(),dn=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^en)+1099511627776*(255^tn)+4294967296*(255^nn)+16777216*(255^sn)+65536*(255^on)+256*(255^un)+(255^dn)+1):72057594037927940*e+281474976710656*en+1099511627776*tn+4294967296*nn+16777216*sn+65536*on+256*un+dn},St.prototype.writeLongLong=function(e){var en,tn;return en=Math.floor(e/4294967296),tn=4294967295&e,this.writeByte(en>>24&255),this.writeByte(en>>16&255),this.writeByte(en>>8&255),this.writeByte(255&en),this.writeByte(tn>>24&255),this.writeByte(tn>>16&255),this.writeByte(tn>>8&255),this.writeByte(255&tn)},St.prototype.readInt=function(){return this.readInt32()},St.prototype.writeInt=function(e){return this.writeInt32(e)},St.prototype.read=function(e){var en,tn;for(en=[],tn=0;0<=e?tn<e:tn>e;tn=0<=e?++tn:--tn)en.push(this.readByte());return en},St.prototype.write=function(e){var en,tn,nn,sn;for(sn=[],tn=0,nn=e.length;tn<nn;tn++)en=e[tn],sn.push(this.writeByte(en));return sn},St}(),de=function(){var St;function e(en){var tn,nn,sn;for(this.scalarType=en.readInt(),this.tableCount=en.readShort(),this.searchRange=en.readShort(),this.entrySelector=en.readShort(),this.rangeShift=en.readShort(),this.tables={},nn=0,sn=this.tableCount;0<=sn?nn<sn:nn>sn;nn=0<=sn?++nn:--nn)tn={tag:en.readString(4),checksum:en.readInt(),offset:en.readInt(),length:en.readInt()},this.tables[tn.tag]=tn}return e.prototype.encode=function(en){var tn,nn,sn,on,un,dn,fn,hn,an,rn,cn,pn,mn;for(mn in cn=Object.keys(en).length,dn=Math.log(2),an=16*Math.floor(Math.log(cn)/dn),on=Math.floor(an/dn),hn=16*cn-an,(nn=new fe).writeInt(this.scalarType),nn.writeShort(cn),nn.writeShort(an),nn.writeShort(on),nn.writeShort(hn),sn=16*cn,fn=nn.pos+sn,un=null,pn=[],en)for(rn=en[mn],nn.writeString(mn),nn.writeInt(St(rn)),nn.writeInt(fn),nn.writeInt(rn.length),pn=pn.concat(rn),mn==="head"&&(un=fn),fn+=rn.length;fn%4;)pn.push(0),fn++;return nn.write(pn),tn=2981146554-St(nn.data),nn.pos=un+8,nn.writeUInt32(tn),nn.data},St=function(en){var tn,nn,sn,on;for(en=_e.call(en);en.length%4;)en.push(0);for(sn=new fe(en),nn=0,tn=0,on=en.length;tn<on;tn=tn+=4)nn+=sn.readUInt32();return 4294967295&nn},e}(),pe={}.hasOwnProperty,ge=function(St,e){for(var en in e)pe.call(e,en)&&(St[en]=e[en]);function tn(){this.constructor=St}return tn.prototype=e.prototype,St.prototype=new tn,St.__super__=e.prototype,St};he=function(){function St(e){var en;this.file=e,en=this.file.directory.tables[this.tag],this.exists=!!en,en&&(this.offset=en.offset,this.length=en.length,this.parse(this.file.contents))}return St.prototype.parse=function(){},St.prototype.encode=function(){},St.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},St}();var me=function(){function St(){return St.__super__.constructor.apply(this,arguments)}return ge(St,he),St.prototype.tag="head",St.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},St.prototype.encode=function(e){var en;return(en=new fe).writeInt(this.version),en.writeInt(this.revision),en.writeInt(this.checkSumAdjustment),en.writeInt(this.magicNumber),en.writeShort(this.flags),en.writeShort(this.unitsPerEm),en.writeLongLong(this.created),en.writeLongLong(this.modified),en.writeShort(this.xMin),en.writeShort(this.yMin),en.writeShort(this.xMax),en.writeShort(this.yMax),en.writeShort(this.macStyle),en.writeShort(this.lowestRecPPEM),en.writeShort(this.fontDirectionHint),en.writeShort(e),en.writeShort(this.glyphDataFormat),en.data},St}(),ve=function(){function St(e,en){var tn,nn,sn,on,un,dn,fn,hn,an,rn,cn,pn,mn,xn,gn,yn,bn;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=en+e.readInt(),an=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(dn=0;dn<256;++dn)this.codeMap[dn]=e.readByte();break;case 4:for(cn=e.readUInt16(),rn=cn/2,e.pos+=6,sn=function(){var wn,_n;for(_n=[],dn=wn=0;0<=rn?wn<rn:wn>rn;dn=0<=rn?++wn:--wn)_n.push(e.readUInt16());return _n}(),e.pos+=2,mn=function(){var wn,_n;for(_n=[],dn=wn=0;0<=rn?wn<rn:wn>rn;dn=0<=rn?++wn:--wn)_n.push(e.readUInt16());return _n}(),fn=function(){var wn,_n;for(_n=[],dn=wn=0;0<=rn?wn<rn:wn>rn;dn=0<=rn?++wn:--wn)_n.push(e.readUInt16());return _n}(),hn=function(){var wn,_n;for(_n=[],dn=wn=0;0<=rn?wn<rn:wn>rn;dn=0<=rn?++wn:--wn)_n.push(e.readUInt16());return _n}(),nn=(this.length-e.pos+this.offset)/2,un=function(){var wn,_n;for(_n=[],dn=wn=0;0<=nn?wn<nn:wn>nn;dn=0<=nn?++wn:--wn)_n.push(e.readUInt16());return _n}(),dn=gn=0,bn=sn.length;gn<bn;dn=++gn)for(xn=sn[dn],tn=yn=pn=mn[dn];pn<=xn?yn<=xn:yn>=xn;tn=pn<=xn?++yn:--yn)hn[dn]===0?on=tn+fn[dn]:(on=un[hn[dn]/2+(tn-pn)-(rn-dn)]||0)!==0&&(on+=fn[dn]),this.codeMap[tn]=65535&on}e.pos=an}return St.encode=function(e,en){var tn,nn,sn,on,un,dn,fn,hn,an,rn,cn,pn,mn,xn,gn,yn,bn,wn,_n,Tn,An,Pn,Sn,Cn,Nn,Mn,Fn,In,Bn,Ln,qn,Yn,Qn,zn,lr,$n,On,er,sr,ar,cr,gr,vr,Er,Rr,Kr;switch(In=new fe,on=Object.keys(e).sort(function(Cr,Gr){return Cr-Gr}),en){case"macroman":for(mn=0,xn=function(){var Cr=[];for(pn=0;pn<256;++pn)Cr.push(0);return Cr}(),yn={0:0},sn={},Bn=0,Qn=on.length;Bn<Qn;Bn++)yn[vr=e[nn=on[Bn]]]==null&&(yn[vr]=++mn),sn[nn]={old:e[nn],new:yn[e[nn]]},xn[nn]=yn[e[nn]];return In.writeUInt16(1),In.writeUInt16(0),In.writeUInt32(12),In.writeUInt16(0),In.writeUInt16(262),In.writeUInt16(0),In.write(xn),{charMap:sn,subtable:In.data,maxGlyphID:mn+1};case"unicode":for(Mn=[],an=[],bn=0,yn={},tn={},gn=fn=null,Ln=0,zn=on.length;Ln<zn;Ln++)yn[_n=e[nn=on[Ln]]]==null&&(yn[_n]=++bn),tn[nn]={old:_n,new:yn[_n]},un=yn[_n]-nn,gn!=null&&un===fn||(gn&&an.push(gn),Mn.push(nn),fn=un),gn=nn;for(gn&&an.push(gn),an.push(65535),Mn.push(65535),Cn=2*(Sn=Mn.length),Pn=2*Math.pow(Math.log(Sn)/Math.LN2,2),rn=Math.log(Pn/2)/Math.LN2,An=2*Sn-Pn,dn=[],Tn=[],cn=[],pn=qn=0,lr=Mn.length;qn<lr;pn=++qn){if(Nn=Mn[pn],hn=an[pn],Nn===65535){dn.push(0),Tn.push(0);break}if(Nn-(Fn=tn[Nn].new)>=32768)for(dn.push(0),Tn.push(2*(cn.length+Sn-pn)),nn=Yn=Nn;Nn<=hn?Yn<=hn:Yn>=hn;nn=Nn<=hn?++Yn:--Yn)cn.push(tn[nn].new);else dn.push(Fn-Nn),Tn.push(0)}for(In.writeUInt16(3),In.writeUInt16(1),In.writeUInt32(12),In.writeUInt16(4),In.writeUInt16(16+8*Sn+2*cn.length),In.writeUInt16(0),In.writeUInt16(Cn),In.writeUInt16(Pn),In.writeUInt16(rn),In.writeUInt16(An),cr=0,$n=an.length;cr<$n;cr++)nn=an[cr],In.writeUInt16(nn);for(In.writeUInt16(0),gr=0,On=Mn.length;gr<On;gr++)nn=Mn[gr],In.writeUInt16(nn);for(Er=0,er=dn.length;Er<er;Er++)un=dn[Er],In.writeUInt16(un);for(Rr=0,sr=Tn.length;Rr<sr;Rr++)wn=Tn[Rr],In.writeUInt16(wn);for(Kr=0,ar=cn.length;Kr<ar;Kr++)mn=cn[Kr],In.writeUInt16(mn);return{charMap:tn,subtable:In.data,maxGlyphID:bn+1}}},St}(),be=function(){function St(){return St.__super__.constructor.apply(this,arguments)}return ge(St,he),St.prototype.tag="cmap",St.prototype.parse=function(e){var en,tn,nn;for(e.pos=this.offset,this.version=e.readUInt16(),nn=e.readUInt16(),this.tables=[],this.unicode=null,tn=0;0<=nn?tn<nn:tn>nn;tn=0<=nn?++tn:--tn)en=new ve(e,this.offset),this.tables.push(en),en.isUnicode&&this.unicode==null&&(this.unicode=en);return!0},St.encode=function(e,en){var tn,nn;return en==null&&(en="macroman"),tn=ve.encode(e,en),(nn=new fe).writeUInt16(0),nn.writeUInt16(1),tn.table=nn.data.concat(tn.subtable),tn},St}(),ye=function(){function St(){return St.__super__.constructor.apply(this,arguments)}return ge(St,he),St.prototype.tag="hhea",St.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},St}(),we=function(){function St(){return St.__super__.constructor.apply(this,arguments)}return ge(St,he),St.prototype.tag="OS/2",St.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var en,tn;for(tn=[],en=0;en<10;++en)tn.push(e.readByte());return tn}(),this.charRange=function(){var en,tn;for(tn=[],en=0;en<4;++en)tn.push(e.readInt());return tn}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var en,tn;for(tn=[],en=0;en<2;en=++en)tn.push(e.readInt());return tn}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},St}(),Ne=function(){function St(){return St.__super__.constructor.apply(this,arguments)}return ge(St,he),St.prototype.tag="post",St.prototype.parse=function(e){var en,tn,nn;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var sn;for(tn=e.readUInt16(),this.glyphNameIndex=[],sn=0;0<=tn?sn<tn:sn>tn;sn=0<=tn?++sn:--sn)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],nn=[];e.pos<this.offset+this.length;)en=e.readByte(),nn.push(this.names.push(e.readString(en)));return nn;case 151552:return tn=e.readUInt16(),this.offsets=e.read(tn);case 262144:return this.map=(function(){var on,un,dn;for(dn=[],sn=on=0,un=this.file.maxp.numGlyphs;0<=un?on<un:on>un;sn=0<=un?++on:--on)dn.push(e.readUInt32());return dn}).call(this)}},St}(),Le=function(St,e){this.raw=St,this.length=St.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},xe=function(){function St(){return St.__super__.constructor.apply(this,arguments)}return ge(St,he),St.prototype.tag="name",St.prototype.parse=function(e){var en,tn,nn,sn,on,un,dn,fn,hn,an,rn;for(e.pos=this.offset,e.readShort(),en=e.readShort(),un=e.readShort(),tn=[],sn=0;0<=en?sn<en:sn>en;sn=0<=en?++sn:--sn)tn.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+un+e.readShort()});for(dn={},sn=hn=0,an=tn.length;hn<an;sn=++hn)nn=tn[sn],e.pos=nn.offset,fn=e.readString(nn.length),on=new Le(fn,nn),dn[rn=nn.nameID]==null&&(dn[rn]=[]),dn[nn.nameID].push(on);this.strings=dn,this.copyright=dn[0],this.fontFamily=dn[1],this.fontSubfamily=dn[2],this.uniqueSubfamily=dn[3],this.fontName=dn[4],this.version=dn[5];try{this.postscriptName=dn[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=dn[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=dn[7],this.manufacturer=dn[8],this.designer=dn[9],this.description=dn[10],this.vendorUrl=dn[11],this.designerUrl=dn[12],this.license=dn[13],this.licenseUrl=dn[14],this.preferredFamily=dn[15],this.preferredSubfamily=dn[17],this.compatibleFull=dn[18],this.sampleText=dn[19]},St}(),Ae=function(){function St(){return St.__super__.constructor.apply(this,arguments)}return ge(St,he),St.prototype.tag="maxp",St.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},St}(),Se=function(){function St(){return St.__super__.constructor.apply(this,arguments)}return ge(St,he),St.prototype.tag="hmtx",St.prototype.parse=function(e){var en,tn,nn,sn,on,un,dn;for(e.pos=this.offset,this.metrics=[],en=0,un=this.file.hhea.numberOfMetrics;0<=un?en<un:en>un;en=0<=un?++en:--en)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(nn=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var fn,hn;for(hn=[],en=fn=0;0<=nn?fn<nn:fn>nn;en=0<=nn?++fn:--fn)hn.push(e.readInt16());return hn}(),this.widths=(function(){var fn,hn,an,rn;for(rn=[],fn=0,hn=(an=this.metrics).length;fn<hn;fn++)sn=an[fn],rn.push(sn.advance);return rn}).call(this),tn=this.widths[this.widths.length-1],dn=[],en=on=0;0<=nn?on<nn:on>nn;en=0<=nn?++on:--on)dn.push(this.widths.push(tn));return dn},St.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},St}(),_e=[].slice,Pe=function(){function St(){return St.__super__.constructor.apply(this,arguments)}return ge(St,he),St.prototype.tag="glyf",St.prototype.parse=function(){return this.cache={}},St.prototype.glyphFor=function(e){var en,tn,nn,sn,on,un,dn,fn,hn,an;return e in this.cache?this.cache[e]:(sn=this.file.loca,en=this.file.contents,tn=sn.indexOf(e),(nn=sn.lengthOf(e))===0?this.cache[e]=null:(en.pos=this.offset+tn,on=(un=new fe(en.read(nn))).readShort(),fn=un.readShort(),an=un.readShort(),dn=un.readShort(),hn=un.readShort(),this.cache[e]=on===-1?new Fe(un,fn,an,dn,hn):new ke(un,on,fn,an,dn,hn),this.cache[e]))},St.prototype.encode=function(e,en,tn){var nn,sn,on,un,dn;for(on=[],sn=[],un=0,dn=en.length;un<dn;un++)nn=e[en[un]],sn.push(on.length),nn&&(on=on.concat(nn.encode(tn)));return sn.push(on.length),{table:on,offsets:sn}},St}(),ke=function(){function St(e,en,tn,nn,sn,on){this.raw=e,this.numberOfContours=en,this.xMin=tn,this.yMin=nn,this.xMax=sn,this.yMax=on,this.compound=!1}return St.prototype.encode=function(){return this.raw.data},St}(),Fe=function(){function St(e,en,tn,nn,sn){var on,un;for(this.raw=e,this.xMin=en,this.yMin=tn,this.xMax=nn,this.yMax=sn,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],on=this.raw;un=on.readShort(),this.glyphOffsets.push(on.pos),this.glyphIDs.push(on.readUInt16()),32&un;)on.pos+=1&un?4:2,128&un?on.pos+=8:64&un?on.pos+=4:8&un&&(on.pos+=2)}return St.prototype.encode=function(){var e,en,tn;for(en=new fe(_e.call(this.raw.data)),e=0,tn=this.glyphIDs.length;e<tn;++e)en.pos=this.glyphOffsets[e];return en.data},St}(),Ie=function(){function St(){return St.__super__.constructor.apply(this,arguments)}return ge(St,he),St.prototype.tag="loca",St.prototype.parse=function(e){var en,tn;return e.pos=this.offset,en=this.file.head.indexToLocFormat,this.offsets=en===0?(function(){var nn,sn;for(sn=[],tn=0,nn=this.length;tn<nn;tn+=2)sn.push(2*e.readUInt16());return sn}).call(this):(function(){var nn,sn;for(sn=[],tn=0,nn=this.length;tn<nn;tn+=4)sn.push(e.readUInt32());return sn}).call(this)},St.prototype.indexOf=function(e){return this.offsets[e]},St.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},St.prototype.encode=function(e,en){for(var tn=new Uint32Array(this.offsets.length),nn=0,sn=0,on=0;on<tn.length;++on)if(tn[on]=nn,sn<en.length&&en[sn]==on){++sn,tn[on]=nn;var un=this.offsets[on],dn=this.offsets[on+1]-un;dn>0&&(nn+=dn)}for(var fn=new Array(4*tn.length),hn=0;hn<tn.length;++hn)fn[4*hn+3]=255&tn[hn],fn[4*hn+2]=(65280&tn[hn])>>8,fn[4*hn+1]=(16711680&tn[hn])>>16,fn[4*hn]=(4278190080&tn[hn])>>24;return fn},St}(),je=function(){function St(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return St.prototype.generateCmap=function(){var e,en,tn,nn,sn;for(en in nn=this.font.cmap.tables[0].codeMap,e={},sn=this.subset)tn=sn[en],e[en]=nn[tn];return e},St.prototype.glyphsFor=function(e){var en,tn,nn,sn,on,un,dn;for(nn={},on=0,un=e.length;on<un;on++)nn[sn=e[on]]=this.font.glyf.glyphFor(sn);for(sn in en=[],nn)(tn=nn[sn])!=null&&tn.compound&&en.push.apply(en,tn.glyphIDs);if(en.length>0)for(sn in dn=this.glyphsFor(en))tn=dn[sn],nn[sn]=tn;return nn},St.prototype.encode=function(e,en){var tn,nn,sn,on,un,dn,fn,hn,an,rn,cn,pn,mn,xn,gn;for(nn in tn=be.encode(this.generateCmap(),"unicode"),on=this.glyphsFor(e),cn={0:0},gn=tn.charMap)cn[(dn=gn[nn]).old]=dn.new;for(pn in rn=tn.maxGlyphID,on)pn in cn||(cn[pn]=rn++);return hn=function(yn){var bn,wn;for(bn in wn={},yn)wn[yn[bn]]=bn;return wn}(cn),an=Object.keys(hn).sort(function(yn,bn){return yn-bn}),mn=function(){var yn,bn,wn;for(wn=[],yn=0,bn=an.length;yn<bn;yn++)un=an[yn],wn.push(hn[un]);return wn}(),sn=this.font.glyf.encode(on,mn,cn),fn=this.font.loca.encode(sn.offsets,mn),xn={cmap:this.font.cmap.raw(),glyf:sn.table,loca:fn,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(en)},this.font.os2.exists&&(xn["OS/2"]=this.font.os2.raw()),this.font.directory.encode(xn)},St}();E.API.PDFObject=function(){var St;function e(){}return St=function(en,tn){return(Array(tn+1).join("0")+en).slice(-tn)},e.convert=function(en){var tn,nn,sn,on;if(Array.isArray(en))return"["+function(){var un,dn,fn;for(fn=[],un=0,dn=en.length;un<dn;un++)tn=en[un],fn.push(e.convert(tn));return fn}().join(" ")+"]";if(typeof en=="string")return"/"+en;if(en!=null&&en.isString)return"("+en+")";if(en instanceof Date)return"(D:"+St(en.getUTCFullYear(),4)+St(en.getUTCMonth(),2)+St(en.getUTCDate(),2)+St(en.getUTCHours(),2)+St(en.getUTCMinutes(),2)+St(en.getUTCSeconds(),2)+"Z)";if({}.toString.call(en)==="[object Object]"){for(nn in sn=["<<"],en)on=en[nn],sn.push("/"+nn+" "+e.convert(on));return sn.push(">>"),sn.join(`
`)}return""+en},e}();function autoTableText(St,e,en,tn,nn){tn=tn||{};var sn=1.15,on=nn.internal.scaleFactor,un=nn.internal.getFontSize()/on,dn=nn.getLineHeightFactor?nn.getLineHeightFactor():sn,fn=un*dn,hn=/\r\n|\r|\n/g,an="",rn=1;if((tn.valign==="middle"||tn.valign==="bottom"||tn.halign==="center"||tn.halign==="right")&&(an=typeof St=="string"?St.split(hn):St,rn=an.length||1),en+=un*(2-sn),tn.valign==="middle"?en-=rn/2*fn:tn.valign==="bottom"&&(en-=rn*fn),tn.halign==="center"||tn.halign==="right"){var cn=un;if(tn.halign==="center"&&(cn*=.5),an&&rn>=1){for(var pn=0;pn<an.length;pn++)nn.text(an[pn],e-nn.getStringUnitWidth(an[pn])*cn,en),en+=fn;return nn}e-=nn.getStringUnitWidth(St)*cn}return tn.halign==="justify"?nn.text(St,e,en,{maxWidth:tn.maxWidth||100,align:"justify"}):nn.text(St,e,en),nn}var globalDefaults={},DocHandler=function(){function St(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return St.setDefaults=function(e,en){en===void 0&&(en=null),en?en.__autoTableDocumentDefaults=e:globalDefaults=e},St.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},St.prototype.applyStyles=function(e,en){var tn,nn,sn;en===void 0&&(en=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var on=this.jsPDFDocument.internal.getFont(),un=on.fontStyle,dn=on.fontName;if(e.font&&(dn=e.font),e.fontStyle){un=e.fontStyle;var fn=this.getFontList()[dn];fn&&fn.indexOf(un)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(fn[0]),un=fn[0])}if(this.jsPDFDocument.setFont(dn,un),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!en){var hn=St.unifyColor(e.fillColor);hn&&(tn=this.jsPDFDocument).setFillColor.apply(tn,hn),hn=St.unifyColor(e.textColor),hn&&(nn=this.jsPDFDocument).setTextColor.apply(nn,hn),hn=St.unifyColor(e.lineColor),hn&&(sn=this.jsPDFDocument).setDrawColor.apply(sn,hn),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},St.prototype.splitTextToSize=function(e,en,tn){return this.jsPDFDocument.splitTextToSize(e,en,tn)},St.prototype.rect=function(e,en,tn,nn,sn){return this.jsPDFDocument.rect(e,en,tn,nn,sn)},St.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},St.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},St.prototype.getDocument=function(){return this.jsPDFDocument},St.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},St.prototype.addPage=function(){return this.jsPDFDocument.addPage()},St.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},St.prototype.getGlobalOptions=function(){return globalDefaults||{}},St.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},St.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},St.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},St.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},St.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},St.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},St}(),extendStatics=function(St,e){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(en,tn){en.__proto__=tn}||function(en,tn){for(var nn in tn)Object.prototype.hasOwnProperty.call(tn,nn)&&(en[nn]=tn[nn])},extendStatics(St,e)};function __extends(St,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");extendStatics(St,e);function en(){this.constructor=St}St.prototype=e===null?Object.create(e):(en.prototype=e.prototype,new en)}typeof SuppressedError=="function"&&SuppressedError;var HtmlRowInput=function(St){__extends(e,St);function e(en){var tn=St.call(this)||this;return tn._element=en,tn}return e}(Array);function defaultStyles(St){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/St,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function getTheme(St){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[St]}function getStringWidth(St,e,en){en.applyStyles(e,!0);var tn=Array.isArray(St)?St:[St],nn=tn.map(function(sn){return en.getTextWidth(sn)}).reduce(function(sn,on){return Math.max(sn,on)},0);return nn}function addTableBorder(St,e,en,tn){var nn=e.settings.tableLineWidth,sn=e.settings.tableLineColor;St.applyStyles({lineWidth:nn,lineColor:sn});var on=getFillStyle(nn,!1);on&&St.rect(en.x,en.y,e.getWidth(St.pageSize().width),tn.y-en.y,on)}function getFillStyle(St,e){var en=St>0,tn=e||e===0;return en&&tn?"DF":en?"S":tn?"F":null}function parseSpacing(St,e){var en,tn,nn,sn;if(St=St||e,Array.isArray(St)){if(St.length>=4)return{top:St[0],right:St[1],bottom:St[2],left:St[3]};if(St.length===3)return{top:St[0],right:St[1],bottom:St[2],left:St[1]};if(St.length===2)return{top:St[0],right:St[1],bottom:St[0],left:St[1]};St.length===1?St=St[0]:St=e}return typeof St=="object"?(typeof St.vertical=="number"&&(St.top=St.vertical,St.bottom=St.vertical),typeof St.horizontal=="number"&&(St.right=St.horizontal,St.left=St.horizontal),{left:(en=St.left)!==null&&en!==void 0?en:e,top:(tn=St.top)!==null&&tn!==void 0?tn:e,right:(nn=St.right)!==null&&nn!==void 0?nn:e,bottom:(sn=St.bottom)!==null&&sn!==void 0?sn:e}):(typeof St!="number"&&(St=e),{top:St,right:St,bottom:St,left:St})}function getPageAvailableWidth(St,e){var en=parseSpacing(e.settings.margin,0);return St.pageSize().width-(en.left+en.right)}function parseCss(St,e,en,tn,nn){var sn={},on=1.3333333333333333,un=parseColor(e,function(bn){return nn.getComputedStyle(bn).backgroundColor});un!=null&&(sn.fillColor=un);var dn=parseColor(e,function(bn){return nn.getComputedStyle(bn).color});dn!=null&&(sn.textColor=dn);var fn=parsePadding(tn,en);fn&&(sn.cellPadding=fn);var hn="borderTopColor",an=on*en,rn=tn.borderTopWidth;if(tn.borderBottomWidth===rn&&tn.borderRightWidth===rn&&tn.borderLeftWidth===rn){var cn=(parseFloat(rn)||0)/an;cn&&(sn.lineWidth=cn)}else sn.lineWidth={top:(parseFloat(tn.borderTopWidth)||0)/an,right:(parseFloat(tn.borderRightWidth)||0)/an,bottom:(parseFloat(tn.borderBottomWidth)||0)/an,left:(parseFloat(tn.borderLeftWidth)||0)/an},sn.lineWidth.top||(sn.lineWidth.right?hn="borderRightColor":sn.lineWidth.bottom?hn="borderBottomColor":sn.lineWidth.left&&(hn="borderLeftColor"));var pn=parseColor(e,function(bn){return nn.getComputedStyle(bn)[hn]});pn!=null&&(sn.lineColor=pn);var mn=["left","right","center","justify"];mn.indexOf(tn.textAlign)!==-1&&(sn.halign=tn.textAlign),mn=["middle","bottom","top"],mn.indexOf(tn.verticalAlign)!==-1&&(sn.valign=tn.verticalAlign);var xn=parseInt(tn.fontSize||"");isNaN(xn)||(sn.fontSize=xn/on);var gn=parseFontStyle(tn);gn&&(sn.fontStyle=gn);var yn=(tn.fontFamily||"").toLowerCase();return St.indexOf(yn)!==-1&&(sn.font=yn),sn}function parseFontStyle(St){var e="";return(St.fontWeight==="bold"||St.fontWeight==="bolder"||parseInt(St.fontWeight)>=700)&&(e="bold"),(St.fontStyle==="italic"||St.fontStyle==="oblique")&&(e+="italic"),e}function parseColor(St,e){var en=realColor(St,e);if(!en)return null;var tn=en.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!tn||!Array.isArray(tn))return null;var nn=[parseInt(tn[1]),parseInt(tn[2]),parseInt(tn[3])],sn=parseInt(tn[4]);return sn===0||isNaN(nn[0])||isNaN(nn[1])||isNaN(nn[2])?null:nn}function realColor(St,e){var en=e(St);return en==="rgba(0, 0, 0, 0)"||en==="transparent"||en==="initial"||en==="inherit"?St.parentElement==null?null:realColor(St.parentElement,e):en}function parsePadding(St,e){var en=[St.paddingTop,St.paddingRight,St.paddingBottom,St.paddingLeft],tn=96/(72/e),nn=(parseInt(St.lineHeight)-parseInt(St.fontSize))/e/2,sn=en.map(function(un){return parseInt(un||"0")/tn}),on=parseSpacing(sn,0);return nn>on.top&&(on.top=nn),nn>on.bottom&&(on.bottom=nn),on}function parseHtml(St,e,en,tn,nn){var sn,on;tn===void 0&&(tn=!1),nn===void 0&&(nn=!1);var un;typeof e=="string"?un=en.document.querySelector(e):un=e;var dn=Object.keys(St.getFontList()),fn=St.scaleFactor(),hn=[],an=[],rn=[];if(!un)return console.error("Html table could not be found with input: ",e),{head:hn,body:an,foot:rn};for(var cn=0;cn<un.rows.length;cn++){var pn=un.rows[cn],mn=(on=(sn=pn==null?void 0:pn.parentElement)===null||sn===void 0?void 0:sn.tagName)===null||on===void 0?void 0:on.toLowerCase(),xn=parseRowContent(dn,fn,en,pn,tn,nn);xn&&(mn==="thead"?hn.push(xn):mn==="tfoot"?rn.push(xn):an.push(xn))}return{head:hn,body:an,foot:rn}}function parseRowContent(St,e,en,tn,nn,sn){for(var on=new HtmlRowInput(tn),un=0;un<tn.cells.length;un++){var dn=tn.cells[un],fn=en.getComputedStyle(dn);if(nn||fn.display!=="none"){var hn=void 0;sn&&(hn=parseCss(St,dn,e,fn,en)),on.push({rowSpan:dn.rowSpan,colSpan:dn.colSpan,styles:hn,_element:dn,content:parseCellContent(dn)})}}var an=en.getComputedStyle(tn);if(on.length>0&&(nn||an.display!=="none"))return on}function parseCellContent(St){var e=St.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(en){return en.trim()}).join(`
`),e.innerText||e.textContent||""}function validateInput(St,e,en){for(var tn=0,nn=[St,e,en];tn<nn.length;tn++){var sn=nn[tn];sn&&typeof sn!="object"&&console.error("The options parameter should be of type object, is: "+typeof sn),sn.startY&&typeof sn.startY!="number"&&(console.error("Invalid value for startY option",sn.startY),delete sn.startY)}}function assign(St,e,en,tn,nn){if(St==null)throw new TypeError("Cannot convert undefined or null to object");for(var sn=Object(St),on=1;on<arguments.length;on++){var un=arguments[on];if(un!=null)for(var dn in un)Object.prototype.hasOwnProperty.call(un,dn)&&(sn[dn]=un[dn])}return sn}function parseInput(St,e){var en=new DocHandler(St),tn=en.getDocumentOptions(),nn=en.getGlobalOptions();validateInput(nn,tn,e);var sn=assign({},nn,tn,e),on;typeof window<"u"&&(on=window);var un=parseStyles(nn,tn,e),dn=parseHooks(nn,tn,e),fn=parseSettings(en,sn),hn=parseContent$1(en,sn,on);return{id:e.tableId,content:hn,hooks:dn,styles:un,settings:fn}}function parseStyles(St,e,en){for(var tn={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},nn=function(dn){if(dn==="columnStyles"){var fn=St[dn],hn=e[dn],an=en[dn];tn.columnStyles=assign({},fn,hn,an)}else{var rn=[St,e,en],cn=rn.map(function(pn){return pn[dn]||{}});tn[dn]=assign({},cn[0],cn[1],cn[2])}},sn=0,on=Object.keys(tn);sn<on.length;sn++){var un=on[sn];nn(un)}return tn}function parseHooks(St,e,en){for(var tn=[St,e,en],nn={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},sn=0,on=tn;sn<on.length;sn++){var un=on[sn];un.didParseCell&&nn.didParseCell.push(un.didParseCell),un.willDrawCell&&nn.willDrawCell.push(un.willDrawCell),un.didDrawCell&&nn.didDrawCell.push(un.didDrawCell),un.willDrawPage&&nn.willDrawPage.push(un.willDrawPage),un.didDrawPage&&nn.didDrawPage.push(un.didDrawPage)}return nn}function parseSettings(St,e){var en,tn,nn,sn,on,un,dn,fn,hn,an,rn,cn,pn=parseSpacing(e.margin,40/St.scaleFactor()),mn=(en=getStartY(St,e.startY))!==null&&en!==void 0?en:pn.top,xn;e.showFoot===!0?xn="everyPage":e.showFoot===!1?xn="never":xn=(tn=e.showFoot)!==null&&tn!==void 0?tn:"everyPage";var gn;e.showHead===!0?gn="everyPage":e.showHead===!1?gn="never":gn=(nn=e.showHead)!==null&&nn!==void 0?nn:"everyPage";var yn=(sn=e.useCss)!==null&&sn!==void 0?sn:!1,bn=e.theme||(yn?"plain":"striped"),wn=!!e.horizontalPageBreak,_n=(on=e.horizontalPageBreakRepeat)!==null&&on!==void 0?on:null;return{includeHiddenHtml:(un=e.includeHiddenHtml)!==null&&un!==void 0?un:!1,useCss:yn,theme:bn,startY:mn,margin:pn,pageBreak:(dn=e.pageBreak)!==null&&dn!==void 0?dn:"auto",rowPageBreak:(fn=e.rowPageBreak)!==null&&fn!==void 0?fn:"auto",tableWidth:(hn=e.tableWidth)!==null&&hn!==void 0?hn:"auto",showHead:gn,showFoot:xn,tableLineWidth:(an=e.tableLineWidth)!==null&&an!==void 0?an:0,tableLineColor:(rn=e.tableLineColor)!==null&&rn!==void 0?rn:200,horizontalPageBreak:wn,horizontalPageBreakRepeat:_n,horizontalPageBreakBehaviour:(cn=e.horizontalPageBreakBehaviour)!==null&&cn!==void 0?cn:"afterAllRows"}}function getStartY(St,e){var en=St.getLastAutoTable(),tn=St.scaleFactor(),nn=St.pageNumber(),sn=!1;if(en&&en.startPageNumber){var on=en.startPageNumber+en.pageNumber-1;sn=on===nn}return typeof e=="number"?e:(e==null||e===!1)&&sn&&(en==null?void 0:en.finalY)!=null?en.finalY+20/tn:null}function parseContent$1(St,e,en){var tn=e.head||[],nn=e.body||[],sn=e.foot||[];if(e.html){var on=e.includeHiddenHtml;if(en){var un=parseHtml(St,e.html,en,on,e.useCss)||{};tn=un.head||tn,nn=un.body||tn,sn=un.foot||tn}else console.error("Cannot parse html in non browser environment")}var dn=e.columns||parseColumns(tn,nn,sn);return{columns:dn,head:tn,body:nn,foot:sn}}function parseColumns(St,e,en){var tn=St[0]||e[0]||en[0]||[],nn=[];return Object.keys(tn).filter(function(sn){return sn!=="_element"}).forEach(function(sn){var on=1,un;Array.isArray(tn)?un=tn[parseInt(sn)]:un=tn[sn],typeof un=="object"&&!Array.isArray(un)&&(on=(un==null?void 0:un.colSpan)||1);for(var dn=0;dn<on;dn++){var fn=void 0;Array.isArray(tn)?fn=nn.length:fn=sn+(dn>0?"_".concat(dn):"");var hn={dataKey:fn};nn.push(hn)}}),nn}var HookData=function(){function St(e,en,tn){this.table=en,this.pageNumber=en.pageNumber,this.settings=en.settings,this.cursor=tn,this.doc=e.getDocument()}return St}(),CellHookData=function(St){__extends(e,St);function e(en,tn,nn,sn,on,un){var dn=St.call(this,en,tn,un)||this;return dn.cell=nn,dn.row=sn,dn.column=on,dn.section=sn.section,dn}return e}(HookData),Table=function(){function St(e,en){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=en.columns,this.head=en.head,this.body=en.body,this.foot=en.foot}return St.prototype.getHeadHeight=function(e){return this.head.reduce(function(en,tn){return en+tn.getMaxCellHeight(e)},0)},St.prototype.getFootHeight=function(e){return this.foot.reduce(function(en,tn){return en+tn.getMaxCellHeight(e)},0)},St.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},St.prototype.callCellHooks=function(e,en,tn,nn,sn,on){for(var un=0,dn=en;un<dn.length;un++){var fn=dn[un],hn=new CellHookData(e,this,tn,nn,sn,on),an=fn(hn)===!1;if(tn.text=Array.isArray(tn.text)?tn.text:[tn.text],an)return!1}return!0},St.prototype.callEndPageHooks=function(e,en){e.applyStyles(e.userStyles);for(var tn=0,nn=this.hooks.didDrawPage;tn<nn.length;tn++){var sn=nn[tn];sn(new HookData(e,this,en))}},St.prototype.callWillDrawPageHooks=function(e,en){for(var tn=0,nn=this.hooks.willDrawPage;tn<nn.length;tn++){var sn=nn[tn];sn(new HookData(e,this,en))}},St.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var en=this.columns.reduce(function(nn,sn){return nn+sn.wrappedWidth},0);return en}else{var tn=this.settings.margin;return e-tn.left-tn.right}},St}(),Row=function(){function St(e,en,tn,nn,sn){sn===void 0&&(sn=!1),this.height=0,this.raw=e,e instanceof HtmlRowInput&&(this.raw=e._element,this.element=e._element),this.index=en,this.section=tn,this.cells=nn,this.spansMultiplePages=sn}return St.prototype.getMaxCellHeight=function(e){var en=this;return e.reduce(function(tn,nn){var sn;return Math.max(tn,((sn=en.cells[nn.index])===null||sn===void 0?void 0:sn.height)||0)},0)},St.prototype.hasRowSpan=function(e){var en=this;return e.filter(function(tn){var nn=en.cells[tn.index];return nn?nn.rowSpan>1:!1}).length>0},St.prototype.canEntireRowFit=function(e,en){return this.getMaxCellHeight(en)<=e},St.prototype.getMinimumRowHeight=function(e,en){var tn=this;return e.reduce(function(nn,sn){var on=tn.cells[sn.index];if(!on)return 0;var un=en.getLineHeight(on.styles.fontSize),dn=on.padding("vertical"),fn=dn+un;return fn>nn?fn:nn},0)},St}(),Cell=function(){function St(e,en,tn){var nn;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=en,this.section=tn,this.raw=e;var sn=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,sn=(nn=e.content)!==null&&nn!==void 0?nn:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var on=sn!=null?""+sn:"",un=/\r\n|\r|\n/g;this.text=on.split(un)}return St.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var en=this.height-this.padding("vertical");e=this.y+en/2+this.padding("top")}var tn;if(this.styles.halign==="right")tn=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var nn=this.width-this.padding("horizontal");tn=this.x+nn/2+this.padding("left")}else tn=this.x+this.padding("left");return{x:tn,y:e}},St.prototype.getContentHeight=function(e,en){en===void 0&&(en=1.15);var tn=Array.isArray(this.text)?this.text.length:1,nn=this.styles.fontSize/e*en,sn=tn*nn+this.padding("vertical");return Math.max(sn,this.styles.minCellHeight)},St.prototype.padding=function(e){var en=parseSpacing(this.styles.cellPadding,0);return e==="vertical"?en.top+en.bottom:e==="horizontal"?en.left+en.right:en[e]},St}(),Column=function(){function St(e,en,tn){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=en,this.index=tn}return St.prototype.getMaxCustomCellWidth=function(e){for(var en=0,tn=0,nn=e.allRows();tn<nn.length;tn++){var sn=nn[tn],on=sn.cells[this.index];on&&typeof on.styles.cellWidth=="number"&&(en=Math.max(en,on.styles.cellWidth))}return en},St}();function calculateWidths(St,e){calculate(St,e);var en=[],tn=0;e.columns.forEach(function(sn){var on=sn.getMaxCustomCellWidth(e);on?sn.width=on:(sn.width=sn.wrappedWidth,en.push(sn)),tn+=sn.width});var nn=e.getWidth(St.pageSize().width)-tn;nn&&(nn=resizeColumns(en,nn,function(sn){return Math.max(sn.minReadableWidth,sn.minWidth)})),nn&&(nn=resizeColumns(en,nn,function(sn){return sn.minWidth})),nn=Math.abs(nn),!e.settings.horizontalPageBreak&&nn>.1/St.scaleFactor()&&(nn=nn<1?nn:Math.round(nn),console.warn("Of the table content, ".concat(nn," units width could not fit page"))),applyColSpans(e),fitContent(e,St),applyRowSpans(e)}function calculate(St,e){var en=St.scaleFactor(),tn=e.settings.horizontalPageBreak,nn=getPageAvailableWidth(St,e);e.allRows().forEach(function(sn){for(var on=0,un=e.columns;on<un.length;on++){var dn=un[on],fn=sn.cells[dn.index];if(fn){var hn=e.hooks.didParseCell;e.callCellHooks(St,hn,fn,sn,dn,null);var an=fn.padding("horizontal");fn.contentWidth=getStringWidth(fn.text,fn.styles,St)+an;var rn=getStringWidth(fn.text.join(" ").split(/[^\S\u00A0]+/),fn.styles,St);if(fn.minReadableWidth=rn+fn.padding("horizontal"),typeof fn.styles.cellWidth=="number")fn.minWidth=fn.styles.cellWidth,fn.wrappedWidth=fn.styles.cellWidth;else if(fn.styles.cellWidth==="wrap"||tn===!0)fn.contentWidth>nn?(fn.minWidth=nn,fn.wrappedWidth=nn):(fn.minWidth=fn.contentWidth,fn.wrappedWidth=fn.contentWidth);else{var cn=10/en;fn.minWidth=fn.styles.minCellWidth||cn,fn.wrappedWidth=fn.contentWidth,fn.minWidth>fn.wrappedWidth&&(fn.wrappedWidth=fn.minWidth)}}}}),e.allRows().forEach(function(sn){for(var on=0,un=e.columns;on<un.length;on++){var dn=un[on],fn=sn.cells[dn.index];if(fn&&fn.colSpan===1)dn.wrappedWidth=Math.max(dn.wrappedWidth,fn.wrappedWidth),dn.minWidth=Math.max(dn.minWidth,fn.minWidth),dn.minReadableWidth=Math.max(dn.minReadableWidth,fn.minReadableWidth);else{var hn=e.styles.columnStyles[dn.dataKey]||e.styles.columnStyles[dn.index]||{},an=hn.cellWidth||hn.minCellWidth;an&&typeof an=="number"&&(dn.minWidth=an,dn.wrappedWidth=an)}fn&&(fn.colSpan>1&&!dn.minWidth&&(dn.minWidth=fn.minWidth),fn.colSpan>1&&!dn.wrappedWidth&&(dn.wrappedWidth=fn.minWidth))}})}function resizeColumns(St,e,en){for(var tn=e,nn=St.reduce(function(cn,pn){return cn+pn.wrappedWidth},0),sn=0;sn<St.length;sn++){var on=St[sn],un=on.wrappedWidth/nn,dn=tn*un,fn=on.width+dn,hn=en(on),an=fn<hn?hn:fn;e-=an-on.width,on.width=an}if(e=Math.round(e*1e10)/1e10,e){var rn=St.filter(function(cn){return e<0?cn.width>en(cn):!0});rn.length&&(e=resizeColumns(rn,e,en))}return e}function applyRowSpans(St){for(var e={},en=1,tn=St.allRows(),nn=0;nn<tn.length;nn++)for(var sn=tn[nn],on=0,un=St.columns;on<un.length;on++){var dn=un[on],fn=e[dn.index];if(en>1)en--,delete sn.cells[dn.index];else if(fn)fn.cell.height+=sn.height,en=fn.cell.colSpan,delete sn.cells[dn.index],fn.left--,fn.left<=1&&delete e[dn.index];else{var hn=sn.cells[dn.index];if(!hn)continue;if(hn.height=sn.height,hn.rowSpan>1){var an=tn.length-nn,rn=hn.rowSpan>an?an:hn.rowSpan;e[dn.index]={cell:hn,left:rn,row:sn}}}}}function applyColSpans(St){for(var e=St.allRows(),en=0;en<e.length;en++)for(var tn=e[en],nn=null,sn=0,on=0,un=0;un<St.columns.length;un++){var dn=St.columns[un];if(on-=1,on>1&&St.columns[un+1])sn+=dn.width,delete tn.cells[dn.index];else if(nn){var fn=nn;delete tn.cells[dn.index],nn=null,fn.width=dn.width+sn}else{var fn=tn.cells[dn.index];if(!fn)continue;if(on=fn.colSpan,sn=0,fn.colSpan>1){nn=fn,sn+=dn.width;continue}fn.width=dn.width+sn}}}function fitContent(St,e){for(var en={count:0,height:0},tn=0,nn=St.allRows();tn<nn.length;tn++){for(var sn=nn[tn],on=0,un=St.columns;on<un.length;on++){var dn=un[on],fn=sn.cells[dn.index];if(fn){e.applyStyles(fn.styles,!0);var hn=fn.width-fn.padding("horizontal");if(fn.styles.overflow==="linebreak")fn.text=e.splitTextToSize(fn.text,hn+1/e.scaleFactor(),{fontSize:fn.styles.fontSize});else if(fn.styles.overflow==="ellipsize")fn.text=ellipsize(fn.text,hn,fn.styles,e,"...");else if(fn.styles.overflow==="hidden")fn.text=ellipsize(fn.text,hn,fn.styles,e,"");else if(typeof fn.styles.overflow=="function"){var an=fn.styles.overflow(fn.text,hn);typeof an=="string"?fn.text=[an]:fn.text=an}fn.contentHeight=fn.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var rn=fn.contentHeight/fn.rowSpan;fn.rowSpan>1&&en.count*en.height<rn*fn.rowSpan?en={height:rn,count:fn.rowSpan}:en&&en.count>0&&en.height>rn&&(rn=en.height),rn>sn.height&&(sn.height=rn)}}en.count--}}function ellipsize(St,e,en,tn,nn){return St.map(function(sn){return ellipsizeStr(sn,e,en,tn,nn)})}function ellipsizeStr(St,e,en,tn,nn){var sn=1e4*tn.scaleFactor();if(e=Math.ceil(e*sn)/sn,e>=getStringWidth(St,en,tn))return St;for(;e<getStringWidth(St+nn,en,tn)&&!(St.length<=1);)St=St.substring(0,St.length-1);return St.trim()+nn}function createTable(St,e){var en=new DocHandler(St),tn=parseContent(e,en.scaleFactor()),nn=new Table(e,tn);return calculateWidths(en,nn),en.applyStyles(en.userStyles),nn}function parseContent(St,e){var en=St.content,tn=createColumns(en.columns);if(en.head.length===0){var nn=generateSectionRow(tn,"head");nn&&en.head.push(nn)}if(en.foot.length===0){var nn=generateSectionRow(tn,"foot");nn&&en.foot.push(nn)}var sn=St.settings.theme,on=St.styles;return{columns:tn,head:parseSection("head",en.head,tn,on,sn,e),body:parseSection("body",en.body,tn,on,sn,e),foot:parseSection("foot",en.foot,tn,on,sn,e)}}function parseSection(St,e,en,tn,nn,sn){var on={},un=e.map(function(dn,fn){for(var hn=0,an={},rn=0,cn=0,pn=0,mn=en;pn<mn.length;pn++){var xn=mn[pn];if(on[xn.index]==null||on[xn.index].left===0)if(cn===0){var gn=void 0;Array.isArray(dn)?gn=dn[xn.index-rn-hn]:gn=dn[xn.dataKey];var yn={};typeof gn=="object"&&!Array.isArray(gn)&&(yn=(gn==null?void 0:gn.styles)||{});var bn=cellStyles(St,xn,fn,nn,tn,sn,yn),wn=new Cell(gn,bn,St);an[xn.dataKey]=wn,an[xn.index]=wn,cn=wn.colSpan-1,on[xn.index]={left:wn.rowSpan-1,times:cn}}else cn--,rn++;else on[xn.index].left--,cn=on[xn.index].times,hn++}return new Row(dn,fn,St,an)});return un}function generateSectionRow(St,e){var en={};return St.forEach(function(tn){if(tn.raw!=null){var nn=getSectionTitle(e,tn.raw);nn!=null&&(en[tn.dataKey]=nn)}}),Object.keys(en).length>0?en:null}function getSectionTitle(St,e){if(St==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(St==="foot"&&typeof e=="object")return e.footer;return null}function createColumns(St){return St.map(function(e,en){var tn,nn;return typeof e=="object"?nn=(tn=e.dataKey)!==null&&tn!==void 0?tn:en:nn=en,new Column(nn,e,en)})}function cellStyles(St,e,en,tn,nn,sn,on){var un=getTheme(tn),dn;St==="head"?dn=nn.headStyles:St==="body"?dn=nn.bodyStyles:St==="foot"&&(dn=nn.footStyles);var fn=assign({},un.table,un[St],nn.styles,dn),hn=nn.columnStyles[e.dataKey]||nn.columnStyles[e.index]||{},an=St==="body"?hn:{},rn=St==="body"&&en%2===0?assign({},un.alternateRow,nn.alternateRowStyles):{},cn=defaultStyles(sn),pn=assign({},cn,fn,rn,an);return assign(pn,on)}function getColumnsCanFitInPage(St,e,en){var tn;en===void 0&&(en={});var nn=getPageAvailableWidth(St,e),sn=new Map,on=[],un=[],dn=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?dn=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(dn=[e.settings.horizontalPageBreakRepeat]),dn.forEach(function(rn){var cn=e.columns.find(function(pn){return pn.dataKey===rn||pn.index===rn});cn&&!sn.has(cn.index)&&(sn.set(cn.index,!0),on.push(cn.index),un.push(e.columns[cn.index]),nn-=cn.wrappedWidth)});for(var fn=!0,hn=(tn=en==null?void 0:en.start)!==null&&tn!==void 0?tn:0;hn<e.columns.length;){if(sn.has(hn)){hn++;continue}var an=e.columns[hn].wrappedWidth;if(fn||nn>=an)fn=!1,on.push(hn),un.push(e.columns[hn]),nn-=an;else break;hn++}return{colIndexes:on,columns:un,lastIndex:hn-1}}function calculateAllColumnsCanFitInPage(St,e){for(var en=[],tn=0;tn<e.columns.length;tn++){var nn=getColumnsCanFitInPage(St,e,{start:tn});nn.columns.length&&(en.push(nn),tn=nn.lastIndex)}return en}function drawTable(St,e){var en=e.settings,tn=en.startY,nn=en.margin,sn={x:nn.left,y:tn},on=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),un=tn+nn.bottom+on;if(en.pageBreak==="avoid"){var dn=e.body,fn=dn.reduce(function(rn,cn){return rn+cn.height},0);un+=fn}var hn=new DocHandler(St);(en.pageBreak==="always"||en.startY!=null&&un>hn.pageSize().height)&&(nextPage(hn),sn.y=nn.top),e.callWillDrawPageHooks(hn,sn);var an=assign({},sn);e.startPageNumber=hn.pageNumber(),en.horizontalPageBreak?printTableWithHorizontalPageBreak(hn,e,an,sn):(hn.applyStyles(hn.userStyles),(en.showHead==="firstPage"||en.showHead==="everyPage")&&e.head.forEach(function(rn){return printRow(hn,e,rn,sn,e.columns)}),hn.applyStyles(hn.userStyles),e.body.forEach(function(rn,cn){var pn=cn===e.body.length-1;printFullRow(hn,e,rn,pn,an,sn,e.columns)}),hn.applyStyles(hn.userStyles),(en.showFoot==="lastPage"||en.showFoot==="everyPage")&&e.foot.forEach(function(rn){return printRow(hn,e,rn,sn,e.columns)})),addTableBorder(hn,e,an,sn),e.callEndPageHooks(hn,sn),e.finalY=sn.y,St.lastAutoTable=e,hn.applyStyles(hn.userStyles)}function printTableWithHorizontalPageBreak(St,e,en,tn){var nn=calculateAllColumnsCanFitInPage(St,e),sn=e.settings;if(sn.horizontalPageBreakBehaviour==="afterAllRows")nn.forEach(function(fn,hn){St.applyStyles(St.userStyles),hn>0?addPage(St,e,en,tn,fn.columns,!0):printHead(St,e,tn,fn.columns),printBody(St,e,en,tn,fn.columns),printFoot(St,e,tn,fn.columns)});else for(var on=-1,un=nn[0],dn=function(){var fn=on;if(un){St.applyStyles(St.userStyles);var hn=un.columns;on>=0?addPage(St,e,en,tn,hn,!0):printHead(St,e,tn,hn),fn=printBodyWithoutPageBreaks(St,e,on+1,tn,hn),printFoot(St,e,tn,hn)}var an=fn-on;nn.slice(1).forEach(function(rn){St.applyStyles(St.userStyles),addPage(St,e,en,tn,rn.columns,!0),printBodyWithoutPageBreaks(St,e,on+1,tn,rn.columns,an),printFoot(St,e,tn,rn.columns)}),on=fn};on<e.body.length-1;)dn()}function printHead(St,e,en,tn){var nn=e.settings;St.applyStyles(St.userStyles),(nn.showHead==="firstPage"||nn.showHead==="everyPage")&&e.head.forEach(function(sn){return printRow(St,e,sn,en,tn)})}function printBody(St,e,en,tn,nn){St.applyStyles(St.userStyles),e.body.forEach(function(sn,on){var un=on===e.body.length-1;printFullRow(St,e,sn,un,en,tn,nn)})}function printBodyWithoutPageBreaks(St,e,en,tn,nn,sn){St.applyStyles(St.userStyles),sn=sn??e.body.length;var on=Math.min(en+sn,e.body.length),un=-1;return e.body.slice(en,on).forEach(function(dn,fn){var hn=en+fn===e.body.length-1,an=getRemainingPageSpace(St,e,hn,tn);dn.canEntireRowFit(an,nn)&&(printRow(St,e,dn,tn,nn),un=en+fn)}),un}function printFoot(St,e,en,tn){var nn=e.settings;St.applyStyles(St.userStyles),(nn.showFoot==="lastPage"||nn.showFoot==="everyPage")&&e.foot.forEach(function(sn){return printRow(St,e,sn,en,tn)})}function getRemainingLineCount(St,e,en){var tn=en.getLineHeight(St.styles.fontSize),nn=St.padding("vertical"),sn=Math.floor((e-nn)/tn);return Math.max(0,sn)}function modifyRowToFit(St,e,en,tn){var nn={};St.spansMultiplePages=!0,St.height=0;for(var sn=0,on=0,un=en.columns;on<un.length;on++){var dn=un[on],fn=St.cells[dn.index];if(fn){Array.isArray(fn.text)||(fn.text=[fn.text]);var hn=new Cell(fn.raw,fn.styles,fn.section);hn=assign(hn,fn),hn.text=[];var an=getRemainingLineCount(fn,e,tn);fn.text.length>an&&(hn.text=fn.text.splice(an,fn.text.length));var rn=tn.scaleFactor(),cn=tn.getLineHeightFactor();fn.contentHeight=fn.getContentHeight(rn,cn),fn.contentHeight>=e&&(fn.contentHeight=e,hn.styles.minCellHeight-=e),fn.contentHeight>St.height&&(St.height=fn.contentHeight),hn.contentHeight=hn.getContentHeight(rn,cn),hn.contentHeight>sn&&(sn=hn.contentHeight),nn[dn.index]=hn}}var pn=new Row(St.raw,-1,St.section,nn,!0);pn.height=sn;for(var mn=0,xn=en.columns;mn<xn.length;mn++){var dn=xn[mn],hn=pn.cells[dn.index];hn&&(hn.height=pn.height);var fn=St.cells[dn.index];fn&&(fn.height=St.height)}return pn}function shouldPrintOnCurrentPage(St,e,en,tn){var nn=St.pageSize().height,sn=tn.settings.margin,on=sn.top+sn.bottom,un=nn-on;e.section==="body"&&(un-=tn.getHeadHeight(tn.columns)+tn.getFootHeight(tn.columns));var dn=e.getMinimumRowHeight(tn.columns,St),fn=dn<en;if(dn>un)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!fn)return!1;var hn=e.hasRowSpan(tn.columns),an=e.getMaxCellHeight(tn.columns)>un;return an?(hn&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(hn||tn.settings.rowPageBreak==="avoid")}function printFullRow(St,e,en,tn,nn,sn,on){var un=getRemainingPageSpace(St,e,tn,sn);if(en.canEntireRowFit(un,on))printRow(St,e,en,sn,on);else if(shouldPrintOnCurrentPage(St,en,un,e)){var dn=modifyRowToFit(en,un,e,St);printRow(St,e,en,sn,on),addPage(St,e,nn,sn,on),printFullRow(St,e,dn,tn,nn,sn,on)}else addPage(St,e,nn,sn,on),printFullRow(St,e,en,tn,nn,sn,on)}function printRow(St,e,en,tn,nn){tn.x=e.settings.margin.left;for(var sn=0,on=nn;sn<on.length;sn++){var un=on[sn],dn=en.cells[un.index];if(!dn){tn.x+=un.width;continue}St.applyStyles(dn.styles),dn.x=tn.x,dn.y=tn.y;var fn=e.callCellHooks(St,e.hooks.willDrawCell,dn,en,un,tn);if(fn===!1){tn.x+=un.width;continue}drawCellRect(St,dn,tn);var hn=dn.getTextPos();autoTableText(dn.text,hn.x,hn.y,{halign:dn.styles.halign,valign:dn.styles.valign,maxWidth:Math.ceil(dn.width-dn.padding("left")-dn.padding("right"))},St.getDocument()),e.callCellHooks(St,e.hooks.didDrawCell,dn,en,un,tn),tn.x+=un.width}tn.y+=en.height}function drawCellRect(St,e,en){var tn=e.styles;if(St.getDocument().setFillColor(St.getDocument().getFillColor()),typeof tn.lineWidth=="number"){var nn=getFillStyle(tn.lineWidth,tn.fillColor);nn&&St.rect(e.x,en.y,e.width,e.height,nn)}else typeof tn.lineWidth=="object"&&(tn.fillColor&&St.rect(e.x,en.y,e.width,e.height,"F"),drawCellBorders(St,e,en,tn.lineWidth))}function drawCellBorders(St,e,en,tn){var nn,sn,on,un;tn.top&&(nn=en.x,sn=en.y,on=en.x+e.width,un=en.y,tn.right&&(on+=.5*tn.right),tn.left&&(nn-=.5*tn.left),dn(tn.top,nn,sn,on,un)),tn.bottom&&(nn=en.x,sn=en.y+e.height,on=en.x+e.width,un=en.y+e.height,tn.right&&(on+=.5*tn.right),tn.left&&(nn-=.5*tn.left),dn(tn.bottom,nn,sn,on,un)),tn.left&&(nn=en.x,sn=en.y,on=en.x,un=en.y+e.height,tn.top&&(sn-=.5*tn.top),tn.bottom&&(un+=.5*tn.bottom),dn(tn.left,nn,sn,on,un)),tn.right&&(nn=en.x+e.width,sn=en.y,on=en.x+e.width,un=en.y+e.height,tn.top&&(sn-=.5*tn.top),tn.bottom&&(un+=.5*tn.bottom),dn(tn.right,nn,sn,on,un));function dn(fn,hn,an,rn,cn){St.getDocument().setLineWidth(fn),St.getDocument().line(hn,an,rn,cn,"S")}}function getRemainingPageSpace(St,e,en,tn){var nn=e.settings.margin.bottom,sn=e.settings.showFoot;return(sn==="everyPage"||sn==="lastPage"&&en)&&(nn+=e.getFootHeight(e.columns)),St.pageSize().height-tn.y-nn}function addPage(St,e,en,tn,nn,sn){nn===void 0&&(nn=[]),sn===void 0&&(sn=!1),St.applyStyles(St.userStyles),e.settings.showFoot==="everyPage"&&!sn&&e.foot.forEach(function(un){return printRow(St,e,un,tn,nn)}),e.callEndPageHooks(St,tn);var on=e.settings.margin;addTableBorder(St,e,en,tn),nextPage(St),e.pageNumber++,tn.x=on.left,tn.y=on.top,en.y=on.top,e.callWillDrawPageHooks(St,tn),e.settings.showHead==="everyPage"&&(e.head.forEach(function(un){return printRow(St,e,un,tn,nn)}),St.applyStyles(St.userStyles))}function nextPage(St){var e=St.pageNumber();St.setPage(e+1);var en=St.pageNumber();return en===e?(St.addPage(),!0):!1}function applyPlugin(St){St.API.autoTable=function(){for(var e=[],en=0;en<arguments.length;en++)e[en]=arguments[en];var tn=e[0],nn=parseInput(this,tn),sn=createTable(this,nn);return drawTable(this,sn),this},St.API.lastAutoTable=!1,St.API.autoTableText=function(e,en,tn,nn){autoTableText(e,en,tn,nn,this)},St.API.autoTableSetDefaults=function(e){return DocHandler.setDefaults(e,this),this},St.autoTableSetDefaults=function(e,en){DocHandler.setDefaults(e,en)},St.API.autoTableHtmlToJson=function(e,en){var tn;if(en===void 0&&(en=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var nn=new DocHandler(this),sn=parseHtml(nn,e,window,en,!1),on=sn.head,un=sn.body,dn=((tn=on[0])===null||tn===void 0?void 0:tn.map(function(fn){return fn.content}))||[];return{columns:dn,rows:un,data:un}}}var _a;try{if(typeof window<"u"&&window){var anyWindow=window,jsPDF=anyWindow.jsPDF||((_a=anyWindow.jspdf)===null||_a===void 0?void 0:_a.jsPDF);jsPDF&&applyPlugin(jsPDF)}}catch(St){console.error("Could not apply autoTable plugin",St)}class PDFReportGenerator{constructor(){this.doc=null}async generateProgressReport(e){const{clientName:en="Client",dateRange:tn={start:new Date(Date.now()-30*24*60*60*1e3),end:new Date},sessions:nn=[],currentMetrics:sn={},targetMetrics:on={},coachNotes:un=[],includeGraphs:dn=!0}=e;this.doc=new E;let fn=20;return fn=this.addHeader(en,tn,fn),fn=this.addExecutiveSummary(nn,fn),fn=this.addCurrentStatus(sn,on,fn),dn&&nn.length>1&&(fn=this.addMetricTrends(nn,fn)),un.length>0&&(fn=this.addCoachNotes(un,fn)),fn=this.addSessionLog(nn,fn),this.addFooter(),this.doc}addHeader(e,en,tn){const{doc:nn}=this;nn.setFontSize(20),nn.setFont("helvetica","bold"),nn.text("Voice Therapy Progress Report",105,tn,{align:"center"}),tn+=10,nn.setFontSize(12),nn.setFont("helvetica","normal"),nn.text(`Client: ${e}`,20,tn),tn+=7;const sn=this.formatDate(en.start),on=this.formatDate(en.end);return nn.text(`Report Period: ${sn} - ${on}`,20,tn),tn+=10,nn.setDrawColor(200,200,200),nn.line(20,tn,190,tn),tn+10}addExecutiveSummary(e,en){const{doc:tn}=this;this.checkPageBreak(en,40),tn.setFontSize(16),tn.setFont("helvetica","bold"),tn.text("Executive Summary",20,en),en+=8,tn.setFontSize(11),tn.setFont("helvetica","normal");const nn=e.length,sn=this.calculateSessionFrequency(e),on=this.calculateOverallProgress(e);return tn.text(`Total Sessions: ${nn}`,25,en),en+=6,tn.text(`Session Frequency: ${sn.toFixed(1)} sessions/week`,25,en),en+=6,tn.text(`Overall Progress: ${on}`,25,en),en+=6,en+5}addCurrentStatus(e,en,tn){var on,un,dn,fn,hn;const{doc:nn}=this;this.checkPageBreak(tn,60),nn.setFontSize(16),nn.setFont("helvetica","bold"),nn.text("Current Status",20,tn),tn+=8;const sn=[["Pitch (Hz)",((on=e.pitch)==null?void 0:on.toFixed(0))||"N/A",`${en.pitchMin||170}-${en.pitchMax||220}`,this.getStatus(e.pitch,en.pitchMin,en.pitchMax)],["Resonance F1 (Hz)",((un=e.f1)==null?void 0:un.toFixed(0))||"N/A",en.f1Target||">450",this.getResonanceStatus(e.f1,en.f1Target)],["Resonance F2 (Hz)",((dn=e.f2)==null?void 0:dn.toFixed(0))||"N/A",en.f2Target||">1800",this.getResonanceStatus(e.f2,en.f2Target)],["CPP (dB)",((fn=e.cpp)==null?void 0:fn.toFixed(1))||"N/A",">10",this.getCPPStatus(e.cpp)],["Jitter (%)",((hn=e.jitter)==null?void 0:hn.toFixed(2))||"N/A","<1.0",this.getJitterStatus(e.jitter)]];return nn.autoTable({startY:tn,head:[["Metric","Current","Target","Status"]],body:sn,theme:"grid",headStyles:{fillColor:[79,70,229],fontSize:10},styles:{fontSize:9},columnStyles:{0:{cellWidth:50},1:{cellWidth:40,halign:"center"},2:{cellWidth:40,halign:"center"},3:{cellWidth:50,halign:"center"}}}),nn.lastAutoTable.finalY+10}addMetricTrends(e,en){const{doc:tn}=this;this.checkPageBreak(en,80),tn.setFontSize(16),tn.setFont("helvetica","bold"),tn.text("Metric Trends (Last 30 Days)",20,en),en+=8,tn.setFontSize(10),tn.setFont("helvetica","normal");const nn=this.calculateTrends(e);return Object.entries(nn).forEach(([sn,on])=>{const un=on.direction==="improving"?"":on.direction==="declining"?"":"",dn=on.direction==="improving"?[34,197,94]:on.direction==="declining"?[239,68,68]:[148,163,184];tn.setTextColor(...dn),tn.text(`${sn}: ${un} ${on.change>0?"+":""}${on.change.toFixed(1)}% (${on.description})`,25,en),tn.setTextColor(0,0,0),en+=6}),en+5}addCoachNotes(e,en){const{doc:tn}=this;return this.checkPageBreak(en,40),tn.setFontSize(16),tn.setFont("helvetica","bold"),tn.text("Coach Notes & Recommendations",20,en),en+=8,tn.setFontSize(10),tn.setFont("helvetica","normal"),e.slice(0,5).forEach((nn,sn)=>{const on=`${sn+1}. ${nn.text||nn}`,un=tn.splitTextToSize(on,170);this.checkPageBreak(en,un.length*6),un.forEach(dn=>{tn.text(dn,25,en),en+=6})}),en+5}addSessionLog(e,en){const{doc:tn}=this;this.checkPageBreak(en,60),tn.setFontSize(16),tn.setFont("helvetica","bold"),tn.text("Session Log",20,en),en+=8;const nn=e.slice(0,20).map(sn=>{var on,un,dn,fn;return[this.formatDate(new Date(sn.timestamp||sn.date)),sn.duration?`${Math.round(sn.duration/60)}min`:"N/A",((on=sn.pitch)==null?void 0:on.toFixed(0))||"N/A",((un=sn.f1)==null?void 0:un.toFixed(0))||"N/A",((dn=sn.cpp)==null?void 0:dn.toFixed(1))||"N/A",((fn=sn.notes)==null?void 0:fn.substring(0,30))||"-"]});return tn.autoTable({startY:en,head:[["Date","Duration","Pitch","F1","CPP","Notes"]],body:nn,theme:"striped",headStyles:{fillColor:[79,70,229],fontSize:9},styles:{fontSize:8},columnStyles:{0:{cellWidth:30},1:{cellWidth:20},2:{cellWidth:20},3:{cellWidth:20},4:{cellWidth:20},5:{cellWidth:70}}}),tn.lastAutoTable.finalY+10}addFooter(){const{doc:e}=this,en=e.internal.getNumberOfPages();for(let tn=1;tn<=en;tn++)e.setPage(tn),e.setFontSize(8),e.setTextColor(128,128,128),e.text(`Generated by Vocal GEM - ${this.formatDate(new Date)}`,105,285,{align:"center"}),e.text(`Page ${tn} of ${en}`,190,285,{align:"right"})}checkPageBreak(e,en){return e+en>270?(this.doc.addPage(),20):e}formatDate(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}calculateSessionFrequency(e){if(e.length<2)return 0;const en=e.map(sn=>new Date(sn.timestamp||sn.date).getTime()).sort(),nn=(en[en.length-1]-en[0])/(1e3*60*60*24)/7;return nn>0?e.length/nn:0}calculateOverallProgress(e){if(e.length<2)return"Insufficient data";const en=e.slice(0,Math.ceil(e.length/3)),tn=e.slice(Math.ceil(e.length*2/3)),nn=this.averageMetrics(en),sn=this.averageMetrics(tn),on=[];return nn.pitch>sn.pitch&&on.push("pitch"),nn.cpp>sn.cpp&&on.push("voice quality"),nn.f1>sn.f1&&on.push("resonance"),on.length>=2?"Improving":on.length===1?"Stable with some improvement":"Stable"}averageMetrics(e){const en=e.reduce((tn,nn)=>({pitch:tn.pitch+(nn.pitch||0),cpp:tn.cpp+(nn.cpp||0),f1:tn.f1+(nn.f1||0)}),{pitch:0,cpp:0,f1:0});return{pitch:en.pitch/e.length,cpp:en.cpp/e.length,f1:en.f1/e.length}}calculateTrends(e){const en={};return["pitch","cpp","f1","f2"].forEach(nn=>{const sn=e.map(rn=>rn[nn]).filter(rn=>rn!=null);if(sn.length<2)return;const on=sn.slice(0,Math.ceil(sn.length/2)),un=sn.slice(Math.ceil(sn.length/2)),dn=on.reduce((rn,cn)=>rn+cn,0)/on.length,fn=un.reduce((rn,cn)=>rn+cn,0)/un.length,hn=(dn-fn)/fn*100,an=hn>2?"improving":hn<-2?"declining":"stable";en[nn.toUpperCase()]={change:hn,direction:an,description:an==="improving"?"Improving":an==="declining"?"Needs attention":"Stable"}}),en}getStatus(e,en,tn){return e?e>=en&&e<=tn?" On Target":e<en?" Below Target":" Above Target":"N/A"}getResonanceStatus(e,en){if(!e)return"N/A";const tn=parseInt(en.replace(">",""));return e>=tn?" On Target":" Below Target"}getCPPStatus(e){return e?e>10?" Excellent":e>8?" Good":e>6?" Fair":" Needs Work":"N/A"}getJitterStatus(e){return e?e<1?" Good":e<2?" Fair":" High":"N/A"}save(e="voice-therapy-report.pdf"){this.doc&&this.doc.save(e)}getBlob(){return this.doc?this.doc.output("blob"):null}}const pdfReportGenerator=new PDFReportGenerator,HistoryView=({stats:St,journals:e,onLogClick:en,userMode:tn})=>{const[nn,sn]=reactExports.useState(!1),on=async()=>{sn(!0);try{const un=Date.now()-2592e6,dn=e.filter(an=>an.timestamp>un).map(an=>({timestamp:an.timestamp,duration:an.duration||0,pitch:an.pitch,f1:an.f1,f2:an.f2,cpp:an.cpp,jitter:an.jitter,notes:an.notes})),fn=await pdfReportGenerator.generateProgressReport({clientName:"Client",dateRange:{start:new Date(un),end:new Date},sessions:dn,currentMetrics:dn[0]||{},targetMetrics:{pitchMin:170,pitchMax:220,f1Target:">450",f2Target:">1800"},coachNotes:["Continue practicing pitch control exercises","Focus on resonance shaping","Maintain good breath support"]}),hn=`voice-therapy-report-${new Date().toISOString().split("T")[0]}.pdf`;fn.save(hn)}catch(un){console.error("Error generating report:",un),alert("Failed to generate report. Please try again.")}finally{sn(!1)}};return jsxRuntimeExports.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500 pb-20",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-slate-800 p-4 rounded-2xl border border-slate-700",children:[jsxRuntimeExports.jsx("div",{className:"text-slate-400 text-xs font-bold uppercase tracking-wider mb-1",children:"Current Streak"}),jsxRuntimeExports.jsxs("div",{className:"text-3xl font-bold text-white flex items-baseline gap-1",children:[St.streak," ",jsxRuntimeExports.jsx("span",{className:"text-sm text-slate-500 font-normal",children:"days"})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-800 p-4 rounded-2xl border border-slate-700",children:[jsxRuntimeExports.jsx("div",{className:"text-slate-400 text-xs font-bold uppercase tracking-wider mb-1",children:"Total Practice"}),jsxRuntimeExports.jsxs("div",{className:"text-3xl font-bold text-white flex items-baseline gap-1",children:[Math.floor(St.totalSeconds/60)," ",jsxRuntimeExports.jsx("span",{className:"text-sm text-slate-500 font-normal",children:"mins"})]})]})]}),jsxRuntimeExports.jsxs("button",{onClick:en,className:"w-full mb-4 p-4 bg-blue-600 hover:bg-blue-500 rounded-2xl flex items-center justify-center gap-3 transition-colors shadow-lg shadow-blue-500/20",children:[jsxRuntimeExports.jsx(Book,{className:"w-5 h-5 text-white"}),jsxRuntimeExports.jsx("span",{className:"font-bold text-white",children:"Log New Entry"})]}),tn==="slp"&&jsxRuntimeExports.jsxs("button",{onClick:on,disabled:nn||e.length===0,className:"w-full mb-6 p-4 bg-indigo-600 hover:bg-indigo-500 disabled:bg-slate-700 disabled:cursor-not-allowed rounded-2xl flex items-center justify-center gap-3 transition-colors shadow-lg shadow-indigo-500/20",children:[jsxRuntimeExports.jsx(FileText,{className:"w-5 h-5 text-white"}),jsxRuntimeExports.jsx("span",{className:"font-bold text-white",children:nn?"Generating Report...":"Generate PDF Report"})]}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-bold mb-4 px-1",children:"Journal History"}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:e.length===0?jsxRuntimeExports.jsx("div",{className:"text-center py-10 text-slate-500",children:jsxRuntimeExports.jsx("p",{children:"No entries yet. Start practicing!"})}):e.slice().reverse().map((un,dn)=>jsxRuntimeExports.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 p-4 rounded-2xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-2",children:[jsxRuntimeExports.jsxs("span",{className:"text-xs text-slate-400 font-mono",children:[new Date(un.timestamp).toLocaleDateString(),"  ",new Date(un.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-bold ${un.effort>7?"bg-red-500/20 text-red-400":"bg-blue-500/20 text-blue-400"}`,children:["Effort: ",un.effort]}),jsxRuntimeExports.jsxs("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-bold ${un.confidence>7?"bg-emerald-500/20 text-emerald-400":"bg-orange-500/20 text-orange-400"}`,children:["Conf: ",un.confidence]})]})]}),un.script&&jsxRuntimeExports.jsxs("div",{className:"mb-3 p-2 bg-slate-950 rounded border border-slate-800 text-xs text-slate-400 italic",children:['"',un.script.length>50?un.script.substring(0,50)+"...":un.script,'"']}),un.audioUrl&&jsxRuntimeExports.jsx("div",{className:"mb-3",children:jsxRuntimeExports.jsx("audio",{src:un.audioUrl.startsWith("http")?un.audioUrl:`http://localhost:5000${un.audioUrl}`,controls:!0,className:"w-full h-8"})}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-300 leading-relaxed",children:un.notes})]},dn))})]})},AudioLibrary=({audioEngine:St})=>{const[e,en]=reactExports.useState(null),tn=(un,dn)=>{St.current&&(St.current.playFeedbackTone(un,1),en(dn),setTimeout(()=>en(null),1e3))},nn=un=>{const dn=new SpeechSynthesisUtterance(un);window.speechSynthesis.speak(dn)},sn=[{label:"G2 (Masc Low)",hz:98},{label:"C3 (Masc Avg)",hz:130},{label:"E3 (Androg)",hz:165},{label:"A3 (Fem Low)",hz:220},{label:"C4 (Fem Avg)",hz:261},{label:"E4 (Fem High)",hz:329}],on=[{title:"Bright Resonance",desc:"Making the vocal tract smaller (like a trumpet). Think of smiling or making an 'Eeee' sound.",speech:"Bright resonance sounds sharp, buzzy, and forward. Eeeeeee."},{title:"Dark Resonance",desc:"Making the vocal tract larger (like a cello). Think of yawning or making an 'Oooo' sound.",speech:"Dark resonance sounds hollow, deep, and warm. Oooooooo."},{title:"Thin Weight",desc:"Light vocal fold contact. Sounds soft, gentle, or breathy.",speech:"Thin weight is soft and light, like a whisper."},{title:"Thick Weight",desc:"Heavy vocal fold contact. Sounds buzzy, loud, or strained.",speech:"Thick weight is heavy and buzzy, like a shout."}];return jsxRuntimeExports.jsxs("div",{className:"p-4 space-y-6 pb-20",children:[jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-bold text-white mb-3 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Music,{className:"text-blue-400"})," Pitch Targets"]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 gap-3",children:sn.map(un=>jsxRuntimeExports.jsxs("button",{onClick:()=>tn(un.hz,un.label),className:`p-4 rounded-xl border transition-all text-left ${e===un.label?"bg-blue-500 border-blue-400 text-white shadow-[0_0_15px_rgba(59,130,246,0.5)]":"bg-slate-800/50 border-slate-700 text-slate-300 hover:bg-slate-800"}`,children:[jsxRuntimeExports.jsx("div",{className:"text-xs font-bold uppercase tracking-wider opacity-70",children:"Reference"}),jsxRuntimeExports.jsxs("div",{className:"text-lg font-bold",children:[un.label.split(" ")[0]," ",jsxRuntimeExports.jsxs("span",{className:"text-xs font-normal text-slate-400",children:[un.hz," Hz"]})]})]},un.label))})]}),jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-bold text-white mb-3 flex items-center gap-2",children:[jsxRuntimeExports.jsx(BookOpen,{className:"text-purple-400"})," Vocal Concepts"]}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:on.map((un,dn)=>jsxRuntimeExports.jsxs("div",{className:"glass-panel p-4 rounded-xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-2",children:[jsxRuntimeExports.jsx("h3",{className:"font-bold text-slate-200",children:un.title}),jsxRuntimeExports.jsx("button",{onClick:()=>nn(un.speech),className:"p-2 bg-slate-700/50 hover:bg-blue-600 rounded-full transition-colors text-slate-300 hover:text-white",children:jsxRuntimeExports.jsx(Volume2,{className:"w-4 h-4"})})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-400 leading-relaxed",children:un.desc})]},dn))})]})]})},PitchPipe=({audioEngine:St})=>{const[e,en]=reactExports.useState(!1),[tn,nn]=reactExports.useState(220),sn=reactExports.useRef(null),on=()=>{St.current&&(en(!0),St.current.playFeedbackTone(tn),sn.current=setInterval(()=>{St.current.playFeedbackTone(tn)},100))},un=()=>{en(!1),sn.current&&(clearInterval(sn.current),sn.current=null)};return jsxRuntimeExports.jsxs("div",{className:"glass-panel p-3 rounded-xl mb-4 flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-indigo-500/20 rounded-lg text-indigo-300",children:jsxRuntimeExports.jsx(Music,{className:"w-5 h-5"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xs font-bold text-white",children:"Reference Tone"}),jsxRuntimeExports.jsx("div",{className:"text-[10px] text-slate-400",children:"Hold to play"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"number",value:tn,onChange:dn=>nn(parseInt(dn.target.value)),className:"w-16 bg-slate-800 border border-slate-600 rounded px-2 py-1 text-xs text-white focus:outline-none text-center"}),jsxRuntimeExports.jsx("button",{onMouseDown:on,onMouseUp:un,onMouseLeave:un,onTouchStart:on,onTouchEnd:un,className:`p-2 rounded-full transition-all ${e?"bg-indigo-500 text-white scale-95":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:jsxRuntimeExports.jsx(Play,{className:"w-4 h-4"})})]})]})},FeedbackSettings=({settings:St,setSettings:e,isOpen:en,onClose:tn,targetRange:nn,onSetGoal:sn,onOpenTutorial:on,calibration:un,onUpdateRange:dn,onUpdateCalibration:fn,onExportData:hn,userMode:an,setUserMode:rn})=>{const[cn,pn]=React.useState({masc:{min:nn.min,max:nn.max},androg:{min:nn.min,max:nn.max},fem:{min:nn.min,max:nn.max}});return en?jsxRuntimeExports.jsxs("div",{className:`fixed inset-x-0 bottom-0 z-50 bg-slate-900 rounded-t-3xl border-t border-white/10 shadow-2xl transition-transform duration-300 transform ${en?"translate-y-0":"translate-y-full"} max-h-[85vh] overflow-y-auto`,children:[jsxRuntimeExports.jsxs("div",{className:"sticky top-0 bg-slate-900/95 backdrop-blur-md p-4 border-b border-white/5 flex justify-between items-center z-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-bold text-white",children:"Settings"}),jsxRuntimeExports.jsx("button",{onClick:tn,className:"p-2 bg-slate-800 rounded-full text-slate-400 hover:text-white",children:jsxRuntimeExports.jsx(X$1,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 space-y-8 pb-20",children:[jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsx("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-4",children:"Target Pitch Range"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 mb-4",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>sn("masc"),className:`flex-1 p-3 rounded-xl border ${nn.min===85?"bg-blue-600 border-blue-500 text-white":"bg-slate-800 border-slate-700 text-slate-400"}`,children:[jsxRuntimeExports.jsx("div",{className:"font-bold text-sm",children:"Masculine"}),jsxRuntimeExports.jsx("div",{className:"text-[10px] opacity-70",children:"85-145 Hz"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>sn("androg"),className:`flex-1 p-3 rounded-xl border ${nn.min===145?"bg-purple-600 border-purple-500 text-white":"bg-slate-800 border-slate-700 text-slate-400"}`,children:[jsxRuntimeExports.jsx("div",{className:"font-bold text-sm",children:"Androgynous"}),jsxRuntimeExports.jsx("div",{className:"text-[10px] opacity-70",children:"145-175 Hz"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>sn("fem"),className:`flex-1 p-3 rounded-xl border ${nn.min===170?"bg-pink-600 border-pink-500 text-white":"bg-slate-800 border-slate-700 text-slate-400"}`,children:[jsxRuntimeExports.jsx("div",{className:"font-bold text-sm",children:"Feminine"}),jsxRuntimeExports.jsx("div",{className:"text-[10px] opacity-70",children:"170-220 Hz"})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-4 space-y-4",children:["masc","androg","fem"].map(mn=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"capitalize text-sm w-20",children:mn}),jsxRuntimeExports.jsx("input",{type:"number",min:"50",max:"300",value:cn[mn].min,onChange:xn=>pn(gn=>({...gn,[mn]:{...gn[mn],min:parseInt(xn.target.value)}})),className:"w-16 p-1 bg-slate-800 border border-slate-600 rounded"}),jsxRuntimeExports.jsx("span",{children:"-"}),jsxRuntimeExports.jsx("input",{type:"number",min:"50",max:"300",value:cn[mn].max,onChange:xn=>pn(gn=>({...gn,[mn]:{...gn[mn],max:parseInt(xn.target.value)}})),className:"w-16 p-1 bg-slate-800 border border-slate-600 rounded"}),jsxRuntimeExports.jsx("button",{onClick:()=>e({...St,genderRanges:{...St.genderRanges,[mn]:{min:cn[mn].min,max:cn[mn].max}}}),className:"px-2 py-1 bg-blue-600 rounded text-xs",children:"Apply"})]},mn))}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-white/5 space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-xs text-slate-400 mb-1",children:[jsxRuntimeExports.jsx("span",{children:"Min Pitch"})," ",jsxRuntimeExports.jsxs("span",{children:[nn.min," Hz"]})]}),jsxRuntimeExports.jsx("input",{type:"range",min:"50",max:"300",value:nn.min,onChange:mn=>dn(parseInt(mn.target.value),nn.max),className:"w-full accent-blue-500 h-1 bg-slate-700 rounded-lg appearance-none cursor-pointer"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-xs text-slate-400 mb-1",children:[jsxRuntimeExports.jsx("span",{children:"Max Pitch"})," ",jsxRuntimeExports.jsxs("span",{children:[nn.max," Hz"]})]}),jsxRuntimeExports.jsx("input",{type:"range",min:"100",max:"500",value:nn.max,onChange:mn=>dn(nn.min,parseInt(mn.target.value)),className:"w-full accent-blue-500 h-1 bg-slate-700 rounded-lg appearance-none cursor-pointer"})]})]})]}),jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsx("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-4",children:"Voice Profiles"}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-white/5",children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-slate-400 mb-3",children:"Quick switch between voice modes"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>window.dispatchEvent(new CustomEvent("switchProfile",{detail:"fem"})),className:"p-3 rounded-xl bg-pink-900/20 border border-pink-500/30 hover:bg-pink-900/40 transition-colors text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-pink-400 font-bold text-sm",children:"Fem"}),jsxRuntimeExports.jsx("div",{className:"text-[10px] text-slate-400",children:"170-220 Hz"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>window.dispatchEvent(new CustomEvent("switchProfile",{detail:"neutral"})),className:"p-3 rounded-xl bg-purple-900/20 border border-purple-500/30 hover:bg-purple-900/40 transition-colors text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-purple-400 font-bold text-sm",children:"Neutral"}),jsxRuntimeExports.jsx("div",{className:"text-[10px] text-slate-400",children:"145-175 Hz"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>window.dispatchEvent(new CustomEvent("switchProfile",{detail:"masc"})),className:"p-3 rounded-xl bg-blue-900/20 border border-blue-500/30 hover:bg-blue-900/40 transition-colors text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-blue-400 font-bold text-sm",children:"Masc"}),jsxRuntimeExports.jsx("div",{className:"text-[10px] text-slate-400",children:"85-145 Hz"})]})]})]})]}),jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsx("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-4",children:"Professional Mode"}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-white/5 space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:`p-2 rounded-lg ${an==="slp"?"bg-indigo-500/20 text-indigo-400":"bg-slate-700 text-slate-400"}`,children:jsxRuntimeExports.jsx(Stethoscope,{className:"w-5 h-5"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-bold text-white",children:"SLP/Clinician Mode"}),jsxRuntimeExports.jsx("div",{className:"text-[10px] text-slate-400",children:"Clinical-grade tools and visualizations"})]})]}),jsxRuntimeExports.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:an==="slp",onChange:mn=>rn(mn.target.checked?"slp":"user"),className:"sr-only peer"}),jsxRuntimeExports.jsx("div",{className:"w-11 h-6 bg-slate-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-500"})]})]}),an==="slp"&&jsxRuntimeExports.jsxs("div",{className:"bg-indigo-500/10 border border-indigo-500/20 rounded-lg p-3 animate-in fade-in slide-in-from-top-2 duration-300",children:[jsxRuntimeExports.jsx("div",{className:"text-xs font-bold text-indigo-300 mb-2",children:"SLP Mode Features:"}),jsxRuntimeExports.jsxs("ul",{className:"text-[10px] text-indigo-200/80 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:" High-resolution spectrogram visualization"}),jsxRuntimeExports.jsx("li",{children:" CPP (Cepstral Peak Prominence) analysis"}),jsxRuntimeExports.jsx("li",{children:" Clinical terminology (F0, formants, etc.)"}),jsxRuntimeExports.jsx("li",{children:" PDF progress reports for clients"}),jsxRuntimeExports.jsx("li",{children:" Advanced acoustic measurements"})]})]})]})]}),jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsx("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-4",children:"Home Note Anchor"}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-white/5",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-xs text-slate-400 mb-2",children:[jsxRuntimeExports.jsx("span",{children:"Your baseline pitch"}),jsxRuntimeExports.jsxs("span",{className:"text-yellow-400 font-bold",children:[St.homeNote," Hz"]})]}),jsxRuntimeExports.jsx("input",{type:"range",min:"80",max:"300",value:St.homeNote,onChange:mn=>e({...St,homeNote:parseInt(mn.target.value)}),className:"w-full accent-yellow-500 h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer"}),jsxRuntimeExports.jsx("div",{className:"text-[10px] text-slate-500 mt-2",children:"A golden line will appear on your pitch graph at this frequency"})]})]}),jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsx("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-4",children:"Biofeedback Triggers"}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-800 rounded-xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:`p-2 rounded-lg ${St.vibration?"bg-green-500/20 text-green-400":"bg-slate-700 text-slate-400"}`,children:jsxRuntimeExports.jsx(Vibrate,{className:"w-5 h-5"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-bold text-white",children:"Haptic Vibration"}),jsxRuntimeExports.jsx("div",{className:"text-[10px] text-slate-400",children:"Vibrate when off-target"})]})]}),jsxRuntimeExports.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:St.vibration,onChange:mn=>e({...St,vibration:mn.target.checked}),className:"sr-only peer"}),jsxRuntimeExports.jsx("div",{className:"w-11 h-6 bg-slate-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-500"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-800 rounded-xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:`p-2 rounded-lg ${St.tone?"bg-blue-500/20 text-blue-400":"bg-slate-700 text-slate-400"}`,children:jsxRuntimeExports.jsx(Volume2,{className:"w-5 h-5"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-bold text-white",children:"Audio Guide Tone"}),jsxRuntimeExports.jsx("div",{className:"text-[10px] text-slate-400",children:"Play tone when off-target"})]})]}),jsxRuntimeExports.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:St.tone,onChange:mn=>e({...St,tone:mn.target.checked}),className:"sr-only peer"}),jsxRuntimeExports.jsx("div",{className:"w-11 h-6 bg-slate-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-500"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 p-4 bg-slate-800/50 rounded-xl border border-white/5 space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:St.triggerLowPitch,onChange:mn=>e({...St,triggerLowPitch:mn.target.checked}),className:"accent-blue-500 w-4 h-4 rounded"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-slate-300",children:"Trigger when Pitch is too LOW"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:St.triggerDarkRes,onChange:mn=>e({...St,triggerDarkRes:mn.target.checked}),className:"accent-blue-500 w-4 h-4 rounded"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-slate-300",children:"Trigger when Resonance is too DARK"})]})]})]}),jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsx("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-4",children:"Advanced Calibration"}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-800 p-4 rounded-xl space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-xs text-slate-400 mb-1",children:[jsxRuntimeExports.jsx("span",{children:"Noise Gate Threshold"})," ",jsxRuntimeExports.jsxs("span",{children:[Math.round(St.noiseGate*100),"%"]})]}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"10",step:"1",value:St.noiseGate*100,onChange:mn=>e({...St,noiseGate:mn.target.value/100}),className:"w-full accent-slate-500 h-1 bg-slate-700 rounded-lg appearance-none cursor-pointer"})]}),un&&jsxRuntimeExports.jsxs("div",{className:"pt-2 border-t border-white/5",children:[jsxRuntimeExports.jsx("div",{className:"text-xs font-bold text-slate-400 mb-2",children:"Resonance Baselines"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-[10px] text-slate-500",children:"Dark (Chest)"}),jsxRuntimeExports.jsx("input",{type:"number",value:Math.round(un.dark),onChange:mn=>fn(parseInt(mn.target.value),un.bright),className:"w-full bg-slate-900 border border-slate-700 rounded px-2 py-1 text-xs text-white"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-[10px] text-slate-500",children:"Bright (Head)"}),jsxRuntimeExports.jsx("input",{type:"number",value:Math.round(un.bright),onChange:mn=>fn(un.dark,parseInt(mn.target.value)),className:"w-full bg-slate-900 border border-slate-700 rounded px-2 py-1 text-xs text-white"})]})]})]})]})]}),jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsx("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-4",children:"Data & System"}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("button",{onClick:on,className:"w-full p-3 bg-slate-800 hover:bg-slate-700 rounded-xl text-left flex items-center gap-3 transition-colors",children:[jsxRuntimeExports.jsx(HelpCircle,{className:"w-5 h-5 text-slate-400"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-bold text-slate-200",children:"Replay Tutorial"})]}),jsxRuntimeExports.jsxs("button",{onClick:hn,className:"w-full p-3 bg-slate-800 hover:bg-slate-700 rounded-xl text-left flex items-center gap-3 transition-colors",children:[jsxRuntimeExports.jsx(Download,{className:"w-5 h-5 text-slate-400"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-bold text-slate-200",children:"Export My Data (JSON)"})]}),jsxRuntimeExports.jsxs("div",{className:"text-[10px] text-slate-600 text-center pt-4 space-y-1",children:[jsxRuntimeExports.jsx("div",{children:"Vocal GEM v0.9.2 (Beta)"}),jsxRuntimeExports.jsx("div",{children:"Designed by Riley Reso"}),jsxRuntimeExports.jsx("div",{children:"Founded on clinical research and techniques"}),jsxRuntimeExports.jsx("div",{children:"A hobby project made with love "}),jsxRuntimeExports.jsxs("div",{children:["Contact: ",jsxRuntimeExports.jsx("a",{href:"mailto:rreso@msudenver.edu",className:"text-blue-500 hover:underline",children:"rreso@msudenver.edu"})]})]})]})]}),jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsx("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-4",children:"Health & Progress"}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>{tn(),setTimeout(()=>window.dispatchEvent(new CustomEvent("openVocalHealth")),100)},className:"w-full p-3 bg-emerald-800 hover:bg-emerald-700 rounded-xl text-left flex items-center gap-3 transition-colors",children:[jsxRuntimeExports.jsx(HeartPulse,{className:"w-5 h-5 text-emerald-400"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-bold text-white",children:"Vocal Health Tips"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{tn(),setTimeout(()=>window.dispatchEvent(new CustomEvent("openAssessment")),100)},className:"w-full p-3 bg-blue-800 hover:bg-blue-700 rounded-xl text-left flex items-center gap-3 transition-colors",children:[jsxRuntimeExports.jsx(ClipboardCheck,{className:"w-5 h-5 text-blue-400"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-bold text-white",children:"Baseline Assessment"})]})]})]}),jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsx("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-4",children:"Exercises & Drills"}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>{tn(),setTimeout(()=>window.dispatchEvent(new CustomEvent("openWarmUp")),100)},className:"w-full p-3 bg-orange-800 hover:bg-orange-700 rounded-xl text-left flex items-center gap-3 transition-colors",children:[jsxRuntimeExports.jsx(Flame,{className:"w-5 h-5 text-orange-400"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-bold text-white",children:"Warm-Up Exercises"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{tn(),setTimeout(()=>window.dispatchEvent(new CustomEvent("openForwardFocus")),100)},className:"w-full p-3 bg-purple-800 hover:bg-purple-700 rounded-xl text-left flex items-center gap-3 transition-colors",children:[jsxRuntimeExports.jsx(Target,{className:"w-5 h-5 text-purple-400"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-bold text-white",children:"Forward Focus Drill"})]})]})]})]})]}):null},TutorialWizard=({onComplete:St,onSkip:e})=>{const[en,tn]=reactExports.useState(0),nn=[{title:"Welcome to Vocal GEM",content:"Your AI-powered companion for gender-affirming voice training. We'll help you find a voice that feels authentic to you.",icon:""},{title:"How it Works",content:"We analyze your Pitch (high/low) and Resonance (bright/dark) in real-time to give you instant feedback.",icon:""},{title:"Privacy First",content:"All audio processing happens right here on your device. Your voice data never leaves your browser.",icon:""},{title:"Ready to Start?",content:"Let's set up your profile and calibrate the app for your unique voice.",icon:""}],sn=()=>{en<nn.length-1?tn(en+1):St()};return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-md p-4 animate-in fade-in duration-500",children:jsxRuntimeExports.jsxs("div",{className:"glass-panel max-w-md w-full p-8 rounded-3xl border border-white/10 shadow-2xl relative overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-500/10 rounded-full blur-3xl -mr-20 -mt-20 animate-pulse"}),jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-slate-800/50",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-300",style:{width:`${(en+1)/nn.length*100}%`}})}),jsxRuntimeExports.jsxs("div",{className:"text-center py-8 relative z-10",children:[jsxRuntimeExports.jsx("div",{className:"text-7xl mb-6 animate-bounce drop-shadow-lg filter",children:nn[en].icon}),jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-white mb-4 tracking-tight",children:nn[en].title}),jsxRuntimeExports.jsx("p",{className:"text-slate-300 leading-relaxed text-lg",children:nn[en].content})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 mt-6 relative z-10",children:[jsxRuntimeExports.jsx("button",{onClick:e,className:"flex-1 py-4 rounded-xl text-slate-400 hover:bg-white/5 transition-colors font-bold text-sm uppercase tracking-wider",children:"Skip"}),jsxRuntimeExports.jsx("button",{onClick:sn,className:"flex-[2] py-4 rounded-xl bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white font-bold shadow-lg shadow-blue-500/20 transition-all transform active:scale-95 text-sm uppercase tracking-wider",children:en===nn.length-1?"Let's Go!":"Next"})]})]})})},CompassWizard=({onComplete:St})=>{const e=en=>{let tn={min:170,max:220};en==="masc"&&(tn={min:85,max:145}),en==="androg"&&(tn={min:145,max:175}),en==="fem"&&(tn={min:170,max:220}),St(tn,{mode:en})};return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-md p-4",children:jsxRuntimeExports.jsxs("div",{className:"max-w-lg w-full space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center space-y-2",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-white",children:"Set Your Compass "}),jsxRuntimeExports.jsx("p",{className:"text-slate-400",children:"Choose a target range to guide your exercises. You can change this anytime."})]}),jsxRuntimeExports.jsxs("div",{className:"grid gap-4",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>e("masc"),className:"group relative overflow-hidden p-6 rounded-2xl bg-slate-800 border border-slate-700 hover:border-blue-500 hover:bg-slate-700 transition-all text-left",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:"Masculine"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-400",children:"Focus on chest resonance and lower pitch (85-145 Hz)."})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>e("androg"),className:"group relative overflow-hidden p-6 rounded-2xl bg-slate-800 border border-slate-700 hover:border-purple-500 hover:bg-slate-700 transition-all text-left",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:"Androgynous"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-400",children:"A balanced mix of resonance and pitch (145-175 Hz)."})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>e("fem"),className:"group relative overflow-hidden p-6 rounded-2xl bg-slate-800 border border-slate-700 hover:border-pink-500 hover:bg-slate-700 transition-all text-left",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-pink-600/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:"Feminine"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-400",children:"Focus on head resonance and higher pitch (170-220 Hz)."})]})]})]})})},CalibrationWizard=({onComplete:St,audioEngine:e})=>{const[en,tn]=reactExports.useState(0),[nn,sn]=reactExports.useState(!1),[on,un]=reactExports.useState({dark:0,bright:0}),[dn,fn]=reactExports.useState(0),hn=reactExports.useRef([]);reactExports.useEffect(()=>{(en===1||en===2)&&(hn.current=[],fn(0))},[en]),reactExports.useEffect(()=>{if(!nn)return;const rn=setInterval(()=>{e.current&&e.current.workletNode&&fn(cn=>Math.min(100,cn+5))},100);return()=>clearInterval(rn)},[nn,e]);const an=async()=>{e.current&&!e.current.isActive&&await e.current.start(),sn(!0),setTimeout(()=>{sn(!1);const rn=en===1?600:2e3;un(en===1?cn=>({...cn,dark:rn}):cn=>({...cn,bright:rn})),tn(en+1)},2e3)};return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-md p-4",children:jsxRuntimeExports.jsxs("div",{className:"glass-panel max-w-md w-full p-8 rounded-3xl border border-white/10 text-center space-y-6",children:[en===0&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"w-20 h-20 bg-yellow-500/20 rounded-full flex items-center justify-center mx-auto text-4xl",children:""}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white",children:"Resonance Calibration"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400",children:"We need to learn your voice's unique range. We'll measure your darkest (chest) and brightest (head) sounds."}),jsxRuntimeExports.jsx("button",{onClick:()=>tn(1),className:"w-full py-4 bg-white text-black font-bold rounded-xl hover:bg-slate-200 transition-colors",children:"Start Calibration"})]}),en===1&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"w-20 h-20 bg-blue-500/20 rounded-full flex items-center justify-center mx-auto text-4xl animate-pulse",children:""}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white",children:"Dark Resonance"}),jsxRuntimeExports.jsxs("p",{className:"text-slate-400",children:["Make a deep, hollow sound like a yawn. Say ",jsxRuntimeExports.jsx("b",{children:'"Ooooo"'}),"."]}),jsxRuntimeExports.jsx("button",{onMouseDown:an,onTouchStart:an,className:`w-full py-6 rounded-2xl font-bold text-xl transition-all ${nn?"bg-blue-500 scale-95":"bg-slate-800 hover:bg-slate-700"}`,children:nn?"Listening...":"Hold & Say 'Ooooo'"})]}),en===2&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"w-20 h-20 bg-yellow-500/20 rounded-full flex items-center justify-center mx-auto text-4xl animate-pulse",children:""}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white",children:"Bright Resonance"}),jsxRuntimeExports.jsxs("p",{className:"text-slate-400",children:["Make a sharp, buzzy sound like a smile. Say ",jsxRuntimeExports.jsx("b",{children:'"Eeeee"'}),"."]}),jsxRuntimeExports.jsx("button",{onMouseDown:an,onTouchStart:an,className:`w-full py-6 rounded-2xl font-bold text-xl transition-all ${nn?"bg-yellow-500 text-black scale-95":"bg-slate-800 hover:bg-slate-700"}`,children:nn?"Listening...":"Hold & Say 'Eeeee'"})]}),en===3&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"w-20 h-20 bg-green-500/20 rounded-full flex items-center justify-center mx-auto text-4xl",children:""}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white",children:"Calibration Complete!"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-8 text-sm",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-slate-500",children:"Dark"}),jsxRuntimeExports.jsxs("div",{className:"font-bold text-blue-400",children:[Math.round(on.dark)," Hz"]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-slate-500",children:"Bright"}),jsxRuntimeExports.jsxs("div",{className:"font-bold text-yellow-400",children:[Math.round(on.bright)," Hz"]})]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>St(on.dark,on.bright),className:"w-full py-4 bg-green-500 text-black font-bold rounded-xl hover:bg-green-400 transition-colors",children:"Save Profile"})]})]})})},BreathPacer=()=>{const[St,e]=reactExports.useState("Inhale"),[en,tn]=reactExports.useState(1);return reactExports.useEffect(()=>{const nn=()=>{e("Inhale"),tn(1.5),setTimeout(()=>{e("Hold"),setTimeout(()=>{e("Exhale"),tn(1),setTimeout(()=>{e("Hold")},4e3)},2e3)},4e3)};nn();const sn=setInterval(nn,12e3);return()=>clearInterval(sn)},[]),jsxRuntimeExports.jsxs("div",{className:"glass-panel p-6 rounded-2xl flex flex-col items-center justify-center mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"relative w-40 h-40 flex items-center justify-center",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-blue-500/20 rounded-full animate-pulse"}),jsxRuntimeExports.jsx("div",{className:"w-20 h-20 bg-blue-500 rounded-full transition-all duration-[4000ms] ease-in-out flex items-center justify-center shadow-[0_0_30px_rgba(59,130,246,0.5)]",style:{transform:`scale(${en})`},children:jsxRuntimeExports.jsx("span",{className:"text-white font-bold text-xs uppercase tracking-widest",children:St})})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 text-center",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-bold text-white",children:"Box Breathing"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-400",children:"Inhale 4s  Hold 2s  Exhale 4s  Hold 2s"})]})]})},MirrorComponent=()=>{const St=reactExports.useRef(null),[e,en]=reactExports.useState(null);return reactExports.useEffect(()=>{let tn=null;return(async()=>{try{tn=await navigator.mediaDevices.getUserMedia({video:!0}),St.current&&(St.current.srcObject=tn)}catch(sn){console.error("Camera error:",sn),en("Could not access camera. Please check permissions.")}})(),()=>{tn&&tn.getTracks().forEach(sn=>sn.stop())}},[]),e?jsxRuntimeExports.jsx("div",{className:"p-4 text-red-400 text-center bg-slate-800 rounded-xl",children:e}):jsxRuntimeExports.jsxs("div",{className:"relative w-full aspect-video bg-black rounded-2xl overflow-hidden mb-4 shadow-2xl border border-white/10",children:[jsxRuntimeExports.jsx("video",{ref:St,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover transform scale-x-[-1]"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-2 left-2 bg-black/50 backdrop-blur px-2 py-1 rounded text-[10px] text-white font-bold",children:" Mirror Mode"})]})},JournalForm=({onSubmit:St,onCancel:e})=>{const{audioEngineRef:en}=useGem(),[tn,nn]=reactExports.useState(""),[sn,on]=reactExports.useState(""),[un,dn]=reactExports.useState(5),[fn,hn]=reactExports.useState(5),[an,rn]=reactExports.useState(3),[cn,pn]=reactExports.useState(!1),[mn,xn]=reactExports.useState(null),[gn,yn]=reactExports.useState(0),[bn,wn]=reactExports.useState(!1),_n=reactExports.useRef(null),Tn=async()=>{if(en.current)if(cn){const Sn=await en.current.stopRecording();xn(Sn),pn(!1),clearInterval(_n.current)}else en.current.startRecording(),pn(!0),yn(0),_n.current=setInterval(()=>yn(Sn=>Sn+1),1e3)},An=async Sn=>{if(Sn.preventDefault(),bn)return;wn(!0);let Cn=null;if(mn)try{const Nn=await fetch(mn).then(Bn=>Bn.blob()),Mn=new FormData;Mn.append("file",Nn,"recording.ogg");const In=await fetch("https://vocalgem.onrender.com/api/upload",{method:"POST",body:Mn});In.ok?Cn=(await In.json()).url:console.warn("Audio upload failed, saving text only.")}catch(Nn){console.warn("Upload failed (network error?), saving text only.",Nn)}St&&St({notes:tn,script:sn,effort:un,confidence:fn,sentiment:an,audioUrl:Cn,timestamp:Date.now()}),wn(!1)},Pn=Sn=>{const Cn=Math.floor(Sn/60),Nn=Sn%60;return`${Cn}:${Nn.toString().padStart(2,"0")}`};return jsxRuntimeExports.jsxs("form",{onSubmit:An,className:"glass-panel p-4 rounded-2xl space-y-4 max-h-[80vh] overflow-y-auto",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-bold text-white",children:"Log Practice Session"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider block mb-2",children:"Reading Script (Optional)"}),jsxRuntimeExports.jsx("textarea",{value:sn,onChange:Sn=>on(Sn.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-xl p-3 text-white focus:outline-none focus:border-blue-500 min-h-[60px] text-sm",placeholder:"Paste text here to read while recording..."})]}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-xl border border-slate-700 flex flex-col items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-mono font-bold text-slate-200",children:Pn(gn)}),mn?jsxRuntimeExports.jsxs("div",{className:"w-full flex items-center gap-2",children:[jsxRuntimeExports.jsx("audio",{src:mn,controls:!0,className:"w-full h-8"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>xn(null),className:"p-2 text-red-400 hover:text-red-300",children:jsxRuntimeExports.jsx(Trash2,{})})]}):jsxRuntimeExports.jsx("button",{type:"button",onClick:Tn,className:`w-16 h-16 rounded-full flex items-center justify-center transition-all ${cn?"bg-red-500 animate-pulse":"bg-red-600 hover:bg-red-500"}`,children:cn?jsxRuntimeExports.jsx("div",{className:"w-6 h-6 bg-white rounded-sm"}):jsxRuntimeExports.jsx("div",{className:"w-6 h-6 bg-white rounded-full"})}),jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-500",children:cn?"Recording... Read your script!":"Tap to record your voice"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider block mb-2",children:"How did it feel?"}),jsxRuntimeExports.jsx("textarea",{value:tn,onChange:Sn=>nn(Sn.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-xl p-3 text-white focus:outline-none focus:border-blue-500 min-h-[80px]",placeholder:"Describe your sensations, challenges, or wins..."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider block mb-2",children:"How does your voice feel?"}),jsxRuntimeExports.jsx("div",{className:"flex justify-between gap-2",children:[{emoji:"",value:1,label:"Dysphoric"},{emoji:"",value:2,label:"Uncomfortable"},{emoji:"",value:3,label:"Neutral"},{emoji:"",value:4,label:"Good"},{emoji:"",value:5,label:"Euphoric"}].map(({emoji:Sn,value:Cn,label:Nn})=>jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>rn(Cn),className:`flex-1 p-3 rounded-xl border transition-all ${an===Cn?"bg-blue-600 border-blue-500 scale-110":"bg-slate-800 border-slate-700 hover:bg-slate-700"}`,title:Nn,children:jsxRuntimeExports.jsx("div",{className:"text-2xl",children:Sn})},Cn))})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider block mb-1",children:"Effort (1-10)"}),jsxRuntimeExports.jsx("input",{type:"range",min:"1",max:"10",value:un,onChange:Sn=>dn(parseInt(Sn.target.value)),className:"w-full accent-blue-500"}),jsxRuntimeExports.jsx("div",{className:"text-center text-blue-400 font-bold",children:un})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider block mb-1",children:"Confidence (1-10)"}),jsxRuntimeExports.jsx("input",{type:"range",min:"1",max:"10",value:fn,onChange:Sn=>hn(parseInt(Sn.target.value)),className:"w-full accent-emerald-500"}),jsxRuntimeExports.jsx("div",{className:"text-center text-emerald-400 font-bold",children:fn})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3 pt-2",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:e,className:"flex-1 py-3 rounded-xl bg-slate-800 text-slate-300 font-bold hover:bg-slate-700 transition-colors",children:"Cancel"}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:bn,className:`flex-1 py-3 rounded-xl font-bold transition-colors shadow-lg shadow-blue-500/20 ${bn?"bg-blue-800 text-slate-400 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-500"}`,children:bn?"Saving...":"Save Log"})]})]})},Login=({onSwitchToSignup:St,onClose:e})=>{const{login:en}=useGem(),[tn,nn]=reactExports.useState(""),[sn,on]=reactExports.useState(""),[un,dn]=reactExports.useState(""),[fn,hn]=reactExports.useState(!1),an=async rn=>{rn.preventDefault(),hn(!0),dn("");try{await en(tn,sn)?e():dn("Invalid username or password")}catch{dn("Login failed. Is the backend running?")}finally{hn(!1)}};return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",onClick:e,children:jsxRuntimeExports.jsxs("div",{className:"bg-slate-900 border border-slate-700 p-6 rounded-2xl w-full max-w-sm shadow-2xl",onClick:rn=>rn.stopPropagation(),children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-white",children:"Welcome Back"}),jsxRuntimeExports.jsx("button",{onClick:e,className:"text-slate-400 hover:text-white",children:jsxRuntimeExports.jsx(X$1,{})})]}),un&&jsxRuntimeExports.jsx("div",{className:"bg-red-500/20 text-red-400 p-3 rounded-lg mb-4 text-sm",children:un}),jsxRuntimeExports.jsxs("form",{onSubmit:an,className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase mb-1",children:"Username"}),jsxRuntimeExports.jsx("input",{type:"text",value:tn,onChange:rn=>nn(rn.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-xl p-3 text-white focus:border-blue-500 outline-none transition-colors",placeholder:"Enter your username",required:!0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase mb-1",children:"Password"}),jsxRuntimeExports.jsx("input",{type:"password",value:sn,onChange:rn=>on(rn.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-xl p-3 text-white focus:border-blue-500 outline-none transition-colors",placeholder:"",required:!0})]}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:fn,className:"w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 rounded-xl transition-all flex items-center justify-center gap-2",children:fn?"Logging in...":"Log In"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6 text-center text-sm text-slate-400",children:["Don't have an account? ",jsxRuntimeExports.jsx("button",{onClick:St,className:"text-blue-400 hover:text-blue-300 font-bold",children:"Sign Up"})]})]})})},Signup=({onSwitchToLogin:St,onClose:e})=>{const{signup:en}=useGem(),[tn,nn]=reactExports.useState(""),[sn,on]=reactExports.useState(""),[un,dn]=reactExports.useState(""),[fn,hn]=reactExports.useState(""),[an,rn]=reactExports.useState(!1),cn=async pn=>{if(pn.preventDefault(),sn!==un){hn("Passwords don't match");return}rn(!0),hn("");try{await en(tn,sn)?e():hn("Username already taken")}catch{hn("Signup failed. Is the backend running?")}finally{rn(!1)}};return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-slate-900 border border-slate-700 p-6 rounded-2xl w-full max-w-sm shadow-2xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-white",children:"Create Account"}),jsxRuntimeExports.jsx("button",{onClick:e,className:"text-slate-400 hover:text-white",children:jsxRuntimeExports.jsx(X$1,{})})]}),fn&&jsxRuntimeExports.jsx("div",{className:"bg-red-500/20 text-red-400 p-3 rounded-lg mb-4 text-sm",children:fn}),jsxRuntimeExports.jsxs("form",{onSubmit:cn,className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase mb-1",children:"Username"}),jsxRuntimeExports.jsx("input",{type:"text",value:tn,onChange:pn=>nn(pn.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-xl p-3 text-white focus:border-blue-500 outline-none transition-colors",placeholder:"Choose a username",required:!0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase mb-1",children:"Password"}),jsxRuntimeExports.jsx("input",{type:"password",value:sn,onChange:pn=>on(pn.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-xl p-3 text-white focus:border-blue-500 outline-none transition-colors",placeholder:"",required:!0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase mb-1",children:"Confirm Password"}),jsxRuntimeExports.jsx("input",{type:"password",value:un,onChange:pn=>dn(pn.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-xl p-3 text-white focus:border-blue-500 outline-none transition-colors",placeholder:"",required:!0})]}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:an,className:"w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 rounded-xl transition-all flex items-center justify-center gap-2",children:an?"Creating Account...":"Sign Up"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6 text-center text-sm text-slate-400",children:["Already have an account? ",jsxRuntimeExports.jsx("button",{onClick:St,className:"text-blue-400 hover:text-blue-300 font-bold",children:"Log In"})]})]})})},ComparisonTool=()=>{const{audioEngineRef:St}=useGem(),[e,en]=reactExports.useState(null),[tn,nn]=reactExports.useState(null),[sn,on]=reactExports.useState(null),[un,dn]=reactExports.useState(!1),fn=async hn=>{if(St.current)if(un){const an=await St.current.stopRecording();sn==="A"&&en(an),sn==="B"&&nn(an),dn(!1),on(null)}else on(hn),St.current.startRecording(),dn(!0)};return jsxRuntimeExports.jsxs("div",{className:"glass-panel p-6 rounded-2xl space-y-6 mb-4",children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[jsxRuntimeExports.jsx(ArrowLeftRight,{className:"text-blue-400"}),"Voice Comparison"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-400",children:'Record a "Before" and "After" clip to hear your progress.'}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-xl border border-slate-700 flex flex-col items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-bold uppercase text-slate-500",children:"Clip A (Before)"}),e?jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-2 w-full",children:[jsxRuntimeExports.jsx("audio",{src:e,controls:!0,className:"w-full h-8"}),jsxRuntimeExports.jsx("button",{onClick:()=>en(null),className:"text-xs text-red-400 hover:text-red-300",children:"Delete"})]}):jsxRuntimeExports.jsx("button",{onClick:()=>fn("A"),disabled:un&&sn!=="A",className:`w-12 h-12 rounded-full flex items-center justify-center transition-all ${un&&sn==="A"?"bg-red-500 animate-pulse":"bg-slate-700 hover:bg-slate-600"} ${un&&sn!=="A"?"opacity-20":""}`,children:un&&sn==="A"?jsxRuntimeExports.jsx("div",{className:"w-4 h-4 bg-white rounded-sm"}):jsxRuntimeExports.jsx("div",{className:"w-4 h-4 bg-red-500 rounded-full"})})]}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-xl border border-slate-700 flex flex-col items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-bold uppercase text-slate-500",children:"Clip B (After)"}),tn?jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-2 w-full",children:[jsxRuntimeExports.jsx("audio",{src:tn,controls:!0,className:"w-full h-8"}),jsxRuntimeExports.jsx("button",{onClick:()=>nn(null),className:"text-xs text-red-400 hover:text-red-300",children:"Delete"})]}):jsxRuntimeExports.jsx("button",{onClick:()=>fn("B"),disabled:un&&sn!=="B",className:`w-12 h-12 rounded-full flex items-center justify-center transition-all ${un&&sn==="B"?"bg-red-500 animate-pulse":"bg-slate-700 hover:bg-slate-600"} ${un&&sn!=="B"?"opacity-20":""}`,children:un&&sn==="B"?jsxRuntimeExports.jsx("div",{className:"w-4 h-4 bg-white rounded-sm"}):jsxRuntimeExports.jsx("div",{className:"w-4 h-4 bg-red-500 rounded-full"})})]})]})]})},IntonationExercise=()=>{const{dataRef:St,audioEngineRef:e,targetRange:en}=useGem(),tn=reactExports.useRef(null),[nn,sn]=reactExports.useState(3),[on,un]=reactExports.useState(30),[dn,fn]=reactExports.useState(.5),[hn,an]=reactExports.useState(!1),rn=reactExports.useRef({x:0,targetPath:[],userPath:[]});reactExports.useEffect(()=>{(()=>{const yn=[],bn=(en.min+en.max)/2;for(let wn=0;wn<800;wn++){const _n=Math.sin(wn*.005*nn),Tn=Math.sin(wn*.03*nn)*.3,An=bn+(_n+Tn)*on;yn.push(An)}rn.current.targetPath=yn})()},[nn,on,en]),reactExports.useEffect(()=>{const gn=tn.current,yn=gn.getContext("2d");let bn;const wn=()=>{const{pitch:_n}=St.current;_n>0?rn.current.userPath.push(_n):rn.current.userPath.push(null),rn.current.userPath.length>800&&rn.current.userPath.shift(),rn.current.x+=nn*.5,yn.clearRect(0,0,gn.width,gn.height);const Tn=600-(en.min-50)/300*600,An=600-(en.max-50)/300*600;yn.fillStyle="rgba(59, 130, 246, 0.05)",yn.fillRect(0,An,gn.width,Tn-An);const Pn=600-((en.min+en.max)/2-50)/300*600;yn.beginPath(),yn.moveTo(0,Pn),yn.lineTo(gn.width,Pn),yn.strokeStyle="rgba(255, 255, 255, 0.1)",yn.setLineDash([5,5]),yn.stroke(),yn.setLineDash([]),yn.beginPath(),yn.strokeStyle="rgba(96, 165, 250, 0.6)",yn.lineWidth=6,yn.lineCap="round",yn.lineJoin="round",rn.current.targetPath.forEach((Cn,Nn)=>{const Mn=Nn*2-rn.current.x%1600,Fn=600-(Cn-50)/300*600;Nn===0?yn.moveTo(Mn,Fn):yn.lineTo(Mn,Fn)}),yn.stroke(),yn.beginPath(),yn.strokeStyle="#fbbf24",yn.lineWidth=4,yn.shadowColor="#fbbf24",yn.shadowBlur=10;const Sn=rn.current.userPath.length;if(rn.current.userPath.forEach((Cn,Nn)=>{if(Cn){const Mn=gn.width/2-(Sn-Nn)*2,Fn=600-(Cn-50)/300*600;Nn===0?yn.moveTo(Mn,Fn):yn.lineTo(Mn,Fn)}}),yn.stroke(),yn.shadowBlur=0,_n>0){const Cn=600-(_n-50)/300*600;yn.fillStyle="#fff",yn.beginPath(),yn.arc(gn.width/2,Cn,6,0,Math.PI*2),yn.fill();const Nn=Math.floor((rn.current.x+gn.width/2)/2)%800,Mn=rn.current.targetPath[Nn];Math.abs(_n-Mn)<20&&(yn.strokeStyle="#4ade80",yn.lineWidth=2,yn.beginPath(),yn.arc(gn.width/2,Cn,12,0,Math.PI*2),yn.stroke())}if(hn&&e.current){const Cn=Math.floor((rn.current.x+gn.width/2)/2)%800,Nn=rn.current.targetPath[Cn];Nn&&rn.current.x%10<1&&e.current.playFeedbackTone(Nn)}bn=requestAnimationFrame(wn)};return wn(),()=>cancelAnimationFrame(bn)},[nn,on,hn,en]);const[cn,pn]=reactExports.useState("Hello, how are you today?"),[mn,xn]=reactExports.useState(!1);return jsxRuntimeExports.jsxs("div",{className:"glass-panel p-4 rounded-2xl space-y-4 mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-bold text-white",children:"Intonation Flow"}),jsxRuntimeExports.jsx("button",{onClick:()=>an(!hn),className:`px-3 py-1 rounded-full text-xs font-bold ${hn?"bg-blue-500 text-white":"bg-slate-700 text-slate-300"}`,children:hn?"Stop Guide":"Play Guide Tone"})]}),jsxRuntimeExports.jsx("div",{className:"relative h-48 bg-slate-900 rounded-xl overflow-hidden border border-slate-700",children:jsxRuntimeExports.jsx("canvas",{ref:tn,width:400,height:600,className:"w-full h-full"})}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-800/50 p-3 rounded-xl border border-white/5 text-center",children:[mn?jsxRuntimeExports.jsx("input",{type:"text",value:cn,onChange:gn=>pn(gn.target.value),onBlur:()=>xn(!1),autoFocus:!0,className:"w-full bg-transparent text-center text-lg font-serif text-white outline-none border-b border-blue-500"}):jsxRuntimeExports.jsxs("p",{onClick:()=>xn(!0),className:"text-lg font-serif text-slate-200 cursor-pointer hover:text-blue-300 transition-colors",title:"Click to edit text",children:['"',cn,'"']}),jsxRuntimeExports.jsx("div",{className:"text-[10px] text-slate-500 mt-1 uppercase tracking-widest",children:"Read this while following the line"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase block mb-1",children:"Speed"}),jsxRuntimeExports.jsx("input",{type:"range",min:"1",max:"10",value:nn,onChange:gn=>sn(parseInt(gn.target.value)),className:"w-full accent-blue-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase block mb-1",children:"Variance"}),jsxRuntimeExports.jsx("input",{type:"range",min:"10",max:"100",value:on,onChange:gn=>un(parseInt(gn.target.value)),className:"w-full accent-purple-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase block mb-1",children:"Volume"}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:dn,onChange:gn=>fn(parseFloat(gn.target.value)),className:"w-full accent-emerald-500"})]})]})]})},VocalHealthTips=({onClose:St})=>{const e=[{icon:"",title:"Stay Hydrated",desc:"Drink plenty of water throughout the day. Avoid caffeine and alcohol before practice."},{icon:"",title:"Avoid Strain",desc:"Never push through pain. If your voice hurts, stop and rest."},{icon:"",title:"Rest Your Voice",desc:"Take breaks during long practice sessions. Silence is healing."},{icon:"",title:"Avoid Irritants",desc:"Smoking, vaping, and shouting can damage your vocal cords."},{icon:"",title:"Warm Up First",desc:"Always do gentle humming or sirens before intense exercises."},{icon:"",title:"See a Professional",desc:"If you experience persistent hoarseness or pain, consult an SLP or ENT doctor."}];return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-in fade-in duration-300",children:jsxRuntimeExports.jsxs("div",{className:"glass-panel max-w-md w-full p-6 rounded-3xl border border-white/10 shadow-2xl relative overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-emerald-500/10 rounded-full blur-3xl -mr-20 -mt-20 animate-pulse"}),jsxRuntimeExports.jsxs("div",{className:"relative z-10",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-6",children:[jsxRuntimeExports.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[jsxRuntimeExports.jsx(HeartPulse,{className:"text-emerald-400"})," Vocal Health"]}),jsxRuntimeExports.jsx("button",{onClick:St,className:"p-2 hover:bg-white/10 rounded-full transition-colors",children:jsxRuntimeExports.jsx(X$1,{className:"w-5 h-5 text-slate-400"})})]}),jsxRuntimeExports.jsx("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-slate-700 scrollbar-track-transparent",children:e.map((en,tn)=>jsxRuntimeExports.jsx("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-white/5 hover:border-emerald-500/30 transition-colors",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("div",{className:"text-3xl",children:en.icon}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"font-bold text-white mb-1",children:en.title}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-300 leading-relaxed",children:en.desc})]})]})},tn))}),jsxRuntimeExports.jsx("div",{className:"mt-6 text-center",children:jsxRuntimeExports.jsx("button",{onClick:St,className:"px-6 py-3 bg-emerald-600 hover:bg-emerald-500 text-white font-bold rounded-xl transition-colors shadow-lg shadow-emerald-500/20",children:"Got It!"})})]})]})})},RAINBOW_PASSAGE="When the sunlight strikes raindrops in the air, they act as a prism and form a rainbow. The rainbow is a division of white light into many beautiful colors. These take the shape of a long round arch, with its path high above, and its two ends apparently beyond the horizon. There is, according to legend, a boiling pot of gold at one end. People look, but no one ever finds it. When a man looks for something beyond his reach, his friends say he is looking for the pot of gold at the end of the rainbow.",AssessmentModule=({onClose:St})=>{const{dataRef:e,isAudioActive:en,toggleAudio:tn}=useGem(),[nn,sn]=reactExports.useState(!1),[on,un]=reactExports.useState(null),dn=reactExports.useRef([]);reactExports.useEffect(()=>{if(nn&&en){const an=setInterval(()=>{const rn=e.current.pitch;rn>0&&dn.current.push(rn)},100);return()=>clearInterval(an)}},[nn,en,e]);const fn=async()=>{dn.current=[],un(null),sn(!0),en||await tn()},hn=()=>{sn(!1),en&&tn();const an=dn.current;if(an.length>0){const rn=an.reduce((gn,yn)=>gn+yn,0)/an.length,cn=Math.min(...an),pn=Math.max(...an),mn=pn-cn;un({avgPitch:Math.round(rn),minPitch:Math.round(cn),maxPitch:Math.round(pn),range:Math.round(mn),date:new Date().toISOString()});const xn=JSON.parse(localStorage.getItem("assessments")||"[]");xn.push({avgPitch:Math.round(rn),minPitch:Math.round(cn),maxPitch:Math.round(pn),range:Math.round(mn),date:new Date().toISOString()}),localStorage.setItem("assessments",JSON.stringify(xn))}};return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-md p-4 animate-in fade-in duration-300",children:jsxRuntimeExports.jsxs("div",{className:"glass-panel max-w-2xl w-full p-8 rounded-3xl border border-white/10 shadow-2xl relative overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-0 w-64 h-64 bg-blue-500/10 rounded-full blur-3xl -ml-20 -mt-20 animate-pulse"}),jsxRuntimeExports.jsxs("div",{className:"relative z-10",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-6",children:[jsxRuntimeExports.jsxs("h2",{className:"text-3xl font-bold text-white flex items-center gap-2",children:[jsxRuntimeExports.jsx(ClipboardCheck,{className:"text-blue-400"})," Baseline Assessment"]}),jsxRuntimeExports.jsx("button",{onClick:St,className:"p-2 hover:bg-white/10 rounded-full transition-colors",children:jsxRuntimeExports.jsx(X$1,{className:"w-5 h-5 text-slate-400"})})]}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-800/50 p-6 rounded-2xl border border-white/5 mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wider mb-3",children:"The Rainbow Passage"}),jsxRuntimeExports.jsx("p",{className:"text-slate-200 leading-relaxed text-lg font-serif",children:RAINBOW_PASSAGE})]}),on?jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-white text-center mb-4",children:"Your Results"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"bg-blue-900/20 p-4 rounded-xl border border-blue-500/30 text-center",children:[jsxRuntimeExports.jsxs("div",{className:"text-3xl font-bold text-blue-400",children:[on.avgPitch," Hz"]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-wider mt-1",children:"Average Pitch"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-purple-900/20 p-4 rounded-xl border border-purple-500/30 text-center",children:[jsxRuntimeExports.jsxs("div",{className:"text-3xl font-bold text-purple-400",children:[on.range," Hz"]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-wider mt-1",children:"Pitch Range"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-white/5 text-center",children:[jsxRuntimeExports.jsxs("div",{className:"text-2xl font-mono text-slate-300",children:[on.minPitch," Hz"]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-wider mt-1",children:"Lowest"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-white/5 text-center",children:[jsxRuntimeExports.jsxs("div",{className:"text-2xl font-mono text-slate-300",children:[on.maxPitch," Hz"]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-wider mt-1",children:"Highest"})]})]}),jsxRuntimeExports.jsxs("div",{className:"text-center mt-6 space-x-4",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{un(null),dn.current=[]},className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white font-bold rounded-xl transition-colors",children:"Try Again"}),jsxRuntimeExports.jsx("button",{onClick:St,className:"px-6 py-3 bg-emerald-600 hover:bg-emerald-500 text-white font-bold rounded-xl transition-colors shadow-lg shadow-emerald-500/20",children:"Done"})]})]}):jsxRuntimeExports.jsxs("div",{className:"text-center space-y-4",children:[jsxRuntimeExports.jsx("p",{className:"text-slate-300 text-sm",children:"Read the passage above out loud at a comfortable pace. We'll analyze your average pitch and range."}),nn?jsxRuntimeExports.jsxs("button",{onClick:hn,className:"px-8 py-4 bg-red-500/20 text-red-400 border border-red-500/50 font-bold rounded-xl transition-all animate-pulse",children:[jsxRuntimeExports.jsx("span",{className:"w-3 h-3 bg-red-500 rounded-full inline-block mr-2 animate-ping"})," Stop Recording"]}):jsxRuntimeExports.jsxs("button",{onClick:fn,className:"px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white font-bold rounded-xl transition-all shadow-lg shadow-blue-500/20 transform active:scale-95",children:[jsxRuntimeExports.jsx(Mic,{className:"w-5 h-5 inline mr-2"})," Start Recording"]})]})]})]})})},WarmUpModule=({onComplete:St,onSkip:e})=>{const[en,tn]=reactExports.useState(0),nn=[{title:"Lip Trills",icon:"",instructions:"Blow air through your lips to make them vibrate (like a motorboat). Do this for 30 seconds.",duration:30,demo:"Brrrrrrr..."},{title:"Humming",icon:"",instructions:'Hum gently on "mmm" at a comfortable pitch. Feel the vibration in your lips and face.',duration:30,demo:"Mmmmmm..."},{title:"Sirens",icon:"",instructions:"Glide smoothly from your lowest note to your highest and back down. Keep it gentle.",duration:30,demo:"Wooooo..."}],sn=()=>{en<nn.length-1?tn(en+1):St()},on=nn[en];return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-md p-4 animate-in fade-in duration-300",children:jsxRuntimeExports.jsxs("div",{className:"glass-panel max-w-md w-full p-8 rounded-3xl border border-white/10 shadow-2xl relative overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-orange-500/10 rounded-full blur-3xl -mr-20 -mt-20 animate-pulse"}),jsxRuntimeExports.jsxs("div",{className:"relative z-10",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-6",children:[jsxRuntimeExports.jsx("div",{className:"text-7xl mb-4 animate-bounce",children:on.icon}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:on.title}),jsxRuntimeExports.jsx("p",{className:"text-slate-300 text-sm leading-relaxed",children:on.instructions})]}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-white/5 mb-6 text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-wider mb-2",children:"Example"}),jsxRuntimeExports.jsx("div",{className:"text-2xl font-serif text-blue-300",children:on.demo})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center gap-2 mb-6",children:nn.map((un,dn)=>jsxRuntimeExports.jsx("div",{className:`w-2 h-2 rounded-full transition-all ${dn===en?"bg-orange-500 w-8":dn<en?"bg-emerald-500":"bg-slate-700"}`},dn))}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[jsxRuntimeExports.jsx("button",{onClick:e,className:"flex-1 py-3 rounded-xl text-slate-400 hover:bg-white/5 transition-colors font-bold text-sm uppercase tracking-wider",children:"Skip Warm-Up"}),jsxRuntimeExports.jsx("button",{onClick:sn,className:"flex-[2] py-3 rounded-xl bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-500 hover:to-red-500 text-white font-bold shadow-lg shadow-orange-500/20 transition-all transform active:scale-95 text-sm uppercase tracking-wider",children:en===nn.length-1?"I'm Warmed Up!":"Next Exercise"})]}),jsxRuntimeExports.jsx("div",{className:"mt-4 text-center text-[10px] text-slate-500",children:" Warm-ups protect your voice and improve performance"})]})]})})},ForwardFocusDrill=({onClose:St})=>{const{dataRef:e}=useGem(),[en,tn]=reactExports.useState(0),nn=[{title:"Find Your Forward Focus",instruction:`Say "Mmm-hmm" like you're agreeing with someone. Feel the vibration in your lips and nose.`,tip:"This is forward resonance - the key to a brighter, more feminine voice."},{title:"Sustain the Hum",instruction:'Hold the "Mmm" sound for 5 seconds. Keep the buzz in your face, not your chest.',tip:"If you feel vibration in your chest, raise your pitch slightly."},{title:"Add Vowels",instruction:'Say "Mmm-EEE" smoothly. Keep the same forward placement on the "EEE".',tip:"The vowel should feel like it's coming from your face, not your throat."}],sn=nn[en];return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-md p-4 animate-in fade-in duration-300",children:jsxRuntimeExports.jsxs("div",{className:"glass-panel max-w-md w-full p-8 rounded-3xl border border-white/10 shadow-2xl relative overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-0 w-64 h-64 bg-purple-500/10 rounded-full blur-3xl -ml-20 -mt-20 animate-pulse"}),jsxRuntimeExports.jsxs("div",{className:"relative z-10",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white",children:"Forward Focus Drill"}),jsxRuntimeExports.jsx("button",{onClick:St,className:"p-2 hover:bg-white/10 rounded-full transition-colors",children:jsxRuntimeExports.jsx(X$1,{className:"w-5 h-5 text-slate-400"})})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("div",{className:"text-7xl text-center mb-4",children:""}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:sn.title}),jsxRuntimeExports.jsx("p",{className:"text-slate-300 leading-relaxed mb-4",children:sn.instruction}),jsxRuntimeExports.jsxs("div",{className:"bg-purple-900/20 p-4 rounded-xl border border-purple-500/30",children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-purple-400 uppercase tracking-wider mb-1",children:" Tip"}),jsxRuntimeExports.jsx("div",{className:"text-sm text-slate-200",children:sn.tip})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-white/5 mb-6",children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-wider mb-2",children:"Live Resonance"}),jsxRuntimeExports.jsx("div",{className:"h-2 bg-slate-900 rounded-full overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-300",style:{width:`${Math.min(100,(e.current.resonance||0)*100)}%`}})}),jsxRuntimeExports.jsx("div",{className:"text-xs text-slate-500 mt-1 text-right",children:e.current.resonance>.7?" Bright!":e.current.resonance>.4?" Good":" Higher"})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center gap-2 mb-6",children:nn.map((on,un)=>jsxRuntimeExports.jsx("div",{className:`w-2 h-2 rounded-full transition-all ${un===en?"bg-purple-500 w-8":un<en?"bg-emerald-500":"bg-slate-700"}`},un))}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[en>0&&jsxRuntimeExports.jsx("button",{onClick:()=>tn(en-1),className:"flex-1 py-3 rounded-xl text-slate-400 hover:bg-white/5 transition-colors font-bold",children:" Back"}),jsxRuntimeExports.jsx("button",{onClick:()=>en<nn.length-1?tn(en+1):St(),className:"flex-[2] py-3 rounded-xl bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white font-bold shadow-lg shadow-purple-500/20 transition-all transform active:scale-95",children:en===nn.length-1?"Complete":"Next "})]})]})]})})},IncognitoScreen=({onExit:St})=>jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black font-mono text-green-500 p-4 overflow-hidden",onDoubleClick:St,children:[jsxRuntimeExports.jsx("div",{className:"text-xs opacity-70 mb-4",children:"SYSTEM DIAGNOSTICS TOOL v4.2.1"}),jsxRuntimeExports.jsxs("div",{className:"space-y-1 text-[10px] sm:text-xs",children:[jsxRuntimeExports.jsxs("div",{children:[">"," CPU: OK"]}),jsxRuntimeExports.jsxs("div",{children:[">"," MEM: 1024MB OK"]}),jsxRuntimeExports.jsxs("div",{children:[">"," DISK: /dev/sda1 MOUNTED"]}),jsxRuntimeExports.jsxs("div",{children:[">"," NET: ETH0 UP 192.168.1.105"]}),jsxRuntimeExports.jsxs("div",{children:[">"," KERNEL: 5.15.0-76-generic"]}),jsxRuntimeExports.jsxs("div",{className:"opacity-50",children:[">"," Loading modules..."]}),jsxRuntimeExports.jsxs("div",{className:"animate-pulse",children:[">"," _"]})]}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-4 left-4 text-[9px] text-gray-600",children:"Double-tap to exit diagnostics"})]}),FloatingCamera=({onClose:St})=>{const e=reactExports.useRef(null),[en,tn]=reactExports.useState({x:20,y:100}),[nn,sn]=reactExports.useState({width:160,height:120}),[on,un]=reactExports.useState(!1),[dn,fn]=reactExports.useState({x:0,y:0}),[hn,an]=reactExports.useState(1),[rn,cn]=reactExports.useState(null);reactExports.useEffect(()=>{let bn=null;return(async()=>{try{bn=await navigator.mediaDevices.getUserMedia({video:!0}),e.current&&(e.current.srcObject=bn)}catch(_n){console.error("Camera error:",_n),cn("Camera access denied")}})(),()=>{bn&&bn.getTracks().forEach(_n=>_n.stop())}},[]);const pn=bn=>{un(!0),fn({x:bn.clientX-en.x,y:bn.clientY-en.y})},mn=bn=>{on&&tn({x:bn.clientX-dn.x,y:bn.clientY-dn.y})},xn=()=>{un(!1)};reactExports.useEffect(()=>(on?(window.addEventListener("mousemove",mn),window.addEventListener("mouseup",xn)):(window.removeEventListener("mousemove",mn),window.removeEventListener("mouseup",xn)),()=>{window.removeEventListener("mousemove",mn),window.removeEventListener("mouseup",xn)}),[on]);const gn=bn=>{an(wn=>Math.max(1,Math.min(3,wn+bn)))},yn=()=>{nn.width===160?sn({width:240,height:180}):sn({width:160,height:120})};return rn?null:jsxRuntimeExports.jsxs("div",{style:{position:"fixed",left:en.x,top:en.y,width:nn.width,height:nn.height,zIndex:100,touchAction:"none"},className:"rounded-xl overflow-hidden shadow-2xl border-2 border-white/20 bg-black group",children:[jsxRuntimeExports.jsx("div",{onMouseDown:pn,onTouchStart:bn=>{const wn=bn.touches[0];un(!0),fn({x:wn.clientX-en.x,y:wn.clientY-en.y})},onTouchMove:bn=>{if(on){const wn=bn.touches[0];tn({x:wn.clientX-dn.x,y:wn.clientY-dn.y})}},onTouchEnd:()=>un(!1),className:"absolute inset-0 z-10 cursor-move"}),jsxRuntimeExports.jsx("div",{className:"w-full h-full overflow-hidden relative",children:jsxRuntimeExports.jsx("video",{ref:e,autoPlay:!0,playsInline:!0,muted:!0,style:{transform:`scale(${hn}) scaleX(-1)`,transformOrigin:"center center"},className:"w-full h-full object-cover pointer-events-none"})}),jsxRuntimeExports.jsxs("div",{className:"absolute bottom-0 inset-x-0 p-2 bg-gradient-to-t from-black/80 to-transparent flex justify-between items-end opacity-0 group-hover:opacity-100 transition-opacity z-20",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-1",children:[jsxRuntimeExports.jsx("button",{onClick:()=>gn(-.2),className:"p-1 bg-white/10 rounded hover:bg-white/20 text-white text-[10px]",children:jsxRuntimeExports.jsx(Minus,{className:"w-3 h-3"})}),jsxRuntimeExports.jsx("button",{onClick:()=>gn(.2),className:"p-1 bg-white/10 rounded hover:bg-white/20 text-white text-[10px]",children:jsxRuntimeExports.jsx(Plus,{className:"w-3 h-3"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-1",children:[jsxRuntimeExports.jsx("button",{onClick:yn,className:"p-1 bg-white/10 rounded hover:bg-white/20 text-white",children:jsxRuntimeExports.jsx(Maximize2,{className:"w-3 h-3"})}),jsxRuntimeExports.jsx("button",{onClick:St,className:"p-1 bg-red-500/80 rounded hover:bg-red-500 text-white",children:jsxRuntimeExports.jsx(X$1,{className:"w-3 h-3"})})]})]})]})},OfflineIndicator=()=>{const[St,e]=reactExports.useState(syncManager.getStatus());reactExports.useEffect(()=>syncManager.subscribe(e),[]);const en=()=>{syncManager.forceSyncNow()},{isOnline:tn,isSyncing:nn,pendingCount:sn,lastSyncTime:on}=St,un=()=>{if(!on)return"Never";const dn=Date.now()-on;return dn<6e4?"Just now":dn<36e5?`${Math.floor(dn/6e4)}m ago`:dn<864e5?`${Math.floor(dn/36e5)}h ago`:`${Math.floor(dn/864e5)}d ago`};return jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[tn?jsxRuntimeExports.jsx(Wifi,{className:"w-5 h-5 text-emerald-400"}):jsxRuntimeExports.jsx(WifiOff,{className:"w-5 h-5 text-red-400"}),sn>0&&jsxRuntimeExports.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-orange-500 rounded-full text-[8px] flex items-center justify-center text-white font-bold",children:sn>9?"9+":sn})]}),nn&&jsxRuntimeExports.jsx(RefreshCw,{className:"w-4 h-4 text-blue-400 animate-spin"}),tn&&sn>0&&!nn&&jsxRuntimeExports.jsx("button",{onClick:en,className:"text-xs px-2 py-1 bg-blue-500/20 text-blue-400 rounded hover:bg-blue-500/30 transition-colors",title:"Sync now",children:"Sync"}),jsxRuntimeExports.jsx("div",{className:"hidden md:block text-xs text-slate-400",title:`Last sync: ${un()}`,children:un()})]})},MigrationModal=({onComplete:St})=>{const[e,en]=reactExports.useState("checking"),[tn,nn]=reactExports.useState("Checking for data...");reactExports.useEffect(()=>{sn()},[]);const sn=async()=>{try{if(!await indexedDB$1.needsMigration()){en("complete"),nn("No migration needed"),setTimeout(St,1e3);return}en("migrating"),nn("Migrating your data to improved storage..."),await indexedDB$1.migrateFromLocalStorage()?(en("complete"),nn("Migration complete! Your data is now stored more efficiently."),setTimeout(St,2e3)):(en("error"),nn("Migration failed. Your data is safe in the old storage."))}catch(on){console.error("Migration error:",on),en("error"),nn("An error occurred during migration.")}};return e==="complete"&&tn==="No migration needed"?null:jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:jsxRuntimeExports.jsx("div",{className:"bg-slate-900 rounded-2xl p-6 max-w-md w-full border border-slate-700 shadow-2xl",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center text-center gap-4",children:[e==="checking"&&jsxRuntimeExports.jsx(Loader,{className:"w-12 h-12 text-blue-400 animate-spin"}),e==="migrating"&&jsxRuntimeExports.jsx(Database,{className:"w-12 h-12 text-blue-400 animate-pulse"}),e==="complete"&&jsxRuntimeExports.jsx(CheckCircle,{className:"w-12 h-12 text-emerald-400"}),e==="error"&&jsxRuntimeExports.jsx(AlertCircle,{className:"w-12 h-12 text-red-400"}),jsxRuntimeExports.jsxs("h2",{className:"text-xl font-bold text-white",children:[e==="checking"&&"Checking Data",e==="migrating"&&"Upgrading Storage",e==="complete"&&"Success!",e==="error"&&"Migration Error"]}),jsxRuntimeExports.jsx("p",{className:"text-slate-300 text-sm",children:tn}),e==="migrating"&&jsxRuntimeExports.jsx("div",{className:"w-full bg-slate-800 rounded-full h-2 overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-500 animate-pulse"})}),e==="error"&&jsxRuntimeExports.jsx("button",{onClick:St,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors",children:"Continue Anyway"})]})})})};class VoiceAnalyzer{constructor(e){this.audioContext=e}analyzeBuffer(e,en=0,tn=null){const nn=e.sampleRate,sn=e.getChannelData(0),on=Math.floor(en*nn),un=tn?Math.floor(tn*nn):sn.length,dn=sn.slice(on,un);return{pitch:this.extractPitch(dn,nn),pitchSeries:this.extractPitchSeries(dn,nn),formants:this.estimateFormants(dn,nn),intensity:this.calculateIntensity(dn),spectral:this.calculateSpectralFeatures(dn,nn),jitter:this.estimateJitter(dn,nn),hnr:this.estimateHNR(dn,nn),sibilance:this.calculateSibilance(dn,nn)}}extractPitchSeries(e,en,tn=.05){const nn=Math.floor(en*tn),sn=[];for(let on=0;on<e.length-nn;on+=nn){const un=e.slice(on,on+nn),dn=this.extractPitch(un,en);sn.push({time:on/en,frequency:dn?dn.mean:null,confidence:dn?dn.confidence:0})}return sn}extractPitch(e,en){const tn=Math.floor(en/600),nn=Math.floor(en/75),sn=new Array(nn).fill(0);for(let fn=tn;fn<nn;fn++){let hn=0;for(let an=0;an<e.length-fn;an++)hn+=e[an]*e[an+fn];sn[fn]=hn}let on=-1/0,un=0;for(let fn=tn;fn<nn;fn++)sn[fn]>on&&(on=sn[fn],un=fn);return on<.3?null:{mean:en/un,confidence:on}}estimateFormants(e,en){const tn=new Float32Array(e.length);tn[0]=e[0];for(let dn=1;dn<e.length;dn++)tn[dn]=e[dn]-.97*e[dn-1];const nn=2048,on=this.performFFT(tn.slice(0,nn)).map(dn=>Math.sqrt(dn.real*dn.real+dn.imag*dn.imag)),un=this.findSpectralPeaks(on,en,nn);return{f1:un[0]||null,f2:un[1]||null,f3:un[2]||null}}calculateIntensity(e){let en=0;for(let sn=0;sn<e.length;sn++)en+=e[sn]*e[sn];const tn=Math.sqrt(en/e.length),nn=20*Math.log10(tn+1e-10);return{rms:tn,db:nn}}calculateSpectralFeatures(e,en){const sn=this.performFFT(e.slice(0,2048)).map(rn=>Math.sqrt(rn.real*rn.real+rn.imag*rn.imag));let on=0,un=0;for(let rn=0;rn<sn.length/2;rn++){const cn=rn*en/2048;on+=cn*sn[rn],un+=sn[rn]}const dn=un>0?on/un:0;let fn=0;const hn=un*.95;let an=0;for(let rn=0;rn<sn.length/2;rn++)if(fn+=sn[rn],fn>=hn){an=rn*en/2048;break}return{centroid:dn,rolloff:an}}estimateJitter(e,en){const tn=Math.floor(en*.05),nn=[];for(let fn=0;fn<e.length-tn;fn+=tn/2){const hn=e.slice(fn,fn+tn),an=this.extractPitch(hn,en);an&&an.confidence>.5&&nn.push(an.mean)}if(nn.length<2)return null;const sn=nn.map(fn=>1/fn);let on=0;for(let fn=1;fn<sn.length;fn++)on+=Math.abs(sn[fn]-sn[fn-1]);const un=sn.reduce((fn,hn)=>fn+hn,0)/sn.length;return on/(sn.length-1)/un*100}estimateHNR(e,en){const tn=this.autocorrelate(e);let nn=-1/0;const sn=Math.floor(en/600),on=Math.floor(en/75);for(let fn=sn;fn<Math.min(on,tn.length);fn++)tn[fn]>nn&&(nn=tn[fn]);if(nn<=0)return null;const un=nn/Math.abs(tn[0]);return 10*Math.log10(un+1e-10)}autocorrelate(e){const en=new Float32Array(e.length);for(let tn=0;tn<e.length;tn++){let nn=0;for(let sn=0;sn<e.length-tn;sn++)nn+=e[sn]*e[sn+tn];en[tn]=nn}return en}performFFT(e){const en=e.length;if(en<=1)return e.map(sn=>({real:sn,imag:0}));const tn=Math.pow(2,Math.ceil(Math.log2(en))),nn=new Float32Array(tn);return nn.set(e),this.fftRecursive(Array.from(nn).map(sn=>({real:sn,imag:0})))}fftRecursive(e){const en=e.length;if(en<=1)return e;const tn=this.fftRecursive(e.filter((on,un)=>un%2===0)),nn=this.fftRecursive(e.filter((on,un)=>un%2===1)),sn=new Array(en);for(let on=0;on<en/2;on++){const un=-2*Math.PI*on/en,dn={real:Math.cos(un)*nn[on].real-Math.sin(un)*nn[on].imag,imag:Math.cos(un)*nn[on].imag+Math.sin(un)*nn[on].real};sn[on]={real:tn[on].real+dn.real,imag:tn[on].imag+dn.imag},sn[on+en/2]={real:tn[on].real-dn.real,imag:tn[on].imag-dn.imag}}return sn}calculateSibilance(e,en){const sn=this.performFFT(e.slice(0,2048)).map(an=>Math.sqrt(an.real*an.real+an.imag*an.imag));let on=0,un=0,dn=0,fn=0;for(let an=0;an<sn.length/2;an++){const rn=an*en/2048,cn=sn[an];un+=cn,rn<3e3||rn>=4e3&&rn<=8e3&&(on+=cn,dn+=rn*cn,fn+=cn)}const hn=fn>0?dn/fn:0;return{score:un>0?on/un:0,centroid:hn,isSibilant:this.detectSibilant(e,en)}}detectSibilant(e,en){let tn=0;for(let un=1;un<e.length;un++)(e[un]>=0&&e[un-1]<0||e[un]<0&&e[un-1]>=0)&&tn++;const nn=tn/e.length;let sn=0;for(let un=0;un<e.length;un++)sn+=e[un]*e[un];const on=Math.sqrt(sn/e.length);return nn>.15&&on>.01}findSpectralPeaks(e,en,tn,nn=3){const sn=[];for(let on=1;on<e.length/2-1;on++)if(e[on]>e[on-1]&&e[on]>e[on+1]){const un=on*en/tn;un>200&&un<5e3&&sn.push({freq:un,magnitude:e[on]})}return sn.sort((on,un)=>un.magnitude-on.magnitude),sn.slice(0,nn).map(on=>on.freq).sort((on,un)=>on-un)}}function dispatchCallback(St,e){St&&St(e)}function reverseDictionary(St){return Object.fromEntries(Object.entries(St).map(([e,en])=>[en,e]))}function escapeRegExp(St){return St.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const Callable=class{constructor(){let St=function(...e){return St._call(...e)};return Object.setPrototypeOf(St,new.target.prototype)}_call(...St){throw Error("Must implement _call method in subclass")}};function isTypedArray(St){var e,en,tn;return((tn=(en=(e=St==null?void 0:St.prototype)==null?void 0:e.__proto__)==null?void 0:en.constructor)==null?void 0:tn.name)==="TypedArray"}function isIntegralNumber(St){return Number.isInteger(St)||typeof St=="bigint"}function exists(St){return St!=null}function calculateDimensions(St){const e=[];let en=St;for(;Array.isArray(en);)e.push(en.length),en=en[0];return e}function pop(St,e,en=void 0){const tn=St[e];if(tn!==void 0)return delete St[e],tn;if(en===void 0)throw Error(`Key ${e} does not exist in object.`);return en}function mergeArrays(...St){return Array.prototype.concat.apply([],St)}function product(...St){return St.reduce((e,en)=>e.flatMap(tn=>en.map(nn=>[tn,nn])))}function calculateReflectOffset(St,e){return Math.abs((St+e)%(2*e)-e)}const sharp={},ONNX_NODE=Object.freeze(Object.defineProperty({__proto__:null,default:sharp},Symbol.toStringTag,{value:"Module"}));var ortWeb_min={exports:{}};const backends={},backendsSortedByPriority=[],registerBackend=(St,e,en)=>{if(e&&typeof e.init=="function"&&typeof e.createSessionHandler=="function"){const tn=backends[St];if(tn===void 0)backends[St]={backend:e,priority:en};else{if(tn.priority>en)return;if(tn.priority===en&&tn.backend!==e)throw new Error(`cannot register backend "${St}" using priority ${en}`)}if(en>=0){const nn=backendsSortedByPriority.indexOf(St);nn!==-1&&backendsSortedByPriority.splice(nn,1);for(let sn=0;sn<backendsSortedByPriority.length;sn++)if(backends[backendsSortedByPriority[sn]].priority<=en){backendsSortedByPriority.splice(sn,0,St);return}backendsSortedByPriority.push(St)}return}throw new TypeError("not a valid backend")},resolveBackend=async St=>{const e=St.length===0?backendsSortedByPriority:St,en=[];for(const tn of e){const nn=backends[tn];if(nn){if(nn.initialized)return nn.backend;if(nn.aborted)continue;const sn=!!nn.initPromise;try{return sn||(nn.initPromise=nn.backend.init()),await nn.initPromise,nn.initialized=!0,nn.backend}catch(on){sn||en.push({name:tn,err:on}),nn.aborted=!0}finally{delete nn.initPromise}}}throw new Error(`no available backend found. ERR: ${en.map(tn=>`[${tn.name}] ${tn.err}`).join(", ")}`)};class EnvImpl{constructor(){this.wasm={},this.webgl={},this.logLevelInternal="warning"}set logLevel(e){if(e!==void 0){if(typeof e!="string"||["verbose","info","warning","error","fatal"].indexOf(e)===-1)throw new Error(`Unsupported logging level: ${e}`);this.logLevelInternal=e}}get logLevel(){return this.logLevelInternal}}const env$2=new EnvImpl,isBigInt64ArrayAvailable=typeof BigInt64Array<"u"&&typeof BigInt64Array.from=="function",isBigUint64ArrayAvailable=typeof BigUint64Array<"u"&&typeof BigUint64Array.from=="function",NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);isBigInt64ArrayAvailable&&(NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("int64",BigInt64Array),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(BigInt64Array,"int64"));isBigUint64ArrayAvailable&&(NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("uint64",BigUint64Array),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(BigUint64Array,"uint64"));const calculateSize=St=>{let e=1;for(let en=0;en<St.length;en++){const tn=St[en];if(typeof tn!="number"||!Number.isSafeInteger(tn))throw new TypeError(`dims[${en}] must be an integer, got: ${tn}`);if(tn<0)throw new RangeError(`dims[${en}] must be a non-negative integer, got: ${tn}`);e*=tn}return e};let Tensor$2=class Uu{constructor(e,en,tn){let nn,sn,on;if(typeof e=="string")if(nn=e,on=tn,e==="string"){if(!Array.isArray(en))throw new TypeError("A string tensor's data must be a string array.");sn=en}else{const dn=NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.get(e);if(dn===void 0)throw new TypeError(`Unsupported tensor type: ${e}.`);if(Array.isArray(en))sn=dn.from(en);else if(en instanceof dn)sn=en;else throw new TypeError(`A ${nn} tensor's data must be type of ${dn}`)}else if(on=en,Array.isArray(e)){if(e.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");const dn=typeof e[0];if(dn==="string")nn="string",sn=e;else if(dn==="boolean")nn="bool",sn=Uint8Array.from(e);else throw new TypeError(`Invalid element type of data array: ${dn}.`)}else{const dn=NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.get(e.constructor);if(dn===void 0)throw new TypeError(`Unsupported type for tensor data: ${e.constructor}.`);nn=dn,sn=e}if(on===void 0)on=[sn.length];else if(!Array.isArray(on))throw new TypeError("A tensor's dims must be a number array");const un=calculateSize(on);if(un!==sn.length)throw new Error(`Tensor's size(${un}) does not match data length(${sn.length}).`);this.dims=on,this.type=nn,this.data=sn,this.size=un}static bufferToTensor(e,en){if(e===void 0)throw new Error("Image buffer must be defined");if(en.height===void 0||en.width===void 0)throw new Error("Image height and width must be defined");const{height:tn,width:nn}=en,sn=en.norm;let on,un;sn===void 0||sn.mean===void 0?on=255:on=sn.mean,sn===void 0||sn.bias===void 0?un=0:un=sn.bias;const dn=en.bitmapFormat!==void 0?en.bitmapFormat:"RGBA",fn=en.tensorFormat!==void 0&&en.tensorFormat!==void 0?en.tensorFormat:"RGB",hn=tn*nn,an=fn==="RGBA"?new Float32Array(hn*4):new Float32Array(hn*3);let rn=4,cn=0,pn=1,mn=2,xn=3,gn=0,yn=hn,bn=hn*2,wn=-1;dn==="RGB"&&(rn=3,cn=0,pn=1,mn=2,xn=-1),fn==="RGBA"?wn=hn*3:fn==="RBG"?(gn=0,bn=hn,yn=hn*2):fn==="BGR"&&(bn=0,yn=hn,gn=hn*2);for(let Tn=0;Tn<hn;Tn++,cn+=rn,mn+=rn,pn+=rn,xn+=rn)an[gn++]=(e[cn]+un)/on,an[yn++]=(e[pn]+un)/on,an[bn++]=(e[mn]+un)/on,wn!==-1&&xn!==-1&&(an[wn++]=(e[xn]+un)/on);return fn==="RGBA"?new Uu("float32",an,[1,4,tn,nn]):new Uu("float32",an,[1,3,tn,nn])}static async fromImage(e,en){const tn=typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement,nn=typeof ImageData<"u"&&e instanceof ImageData,sn=typeof ImageBitmap<"u"&&e instanceof ImageBitmap,on=typeof String<"u"&&(e instanceof String||typeof e=="string");let un,dn={};if(tn){const fn=document.createElement("canvas"),hn=fn.getContext("2d");if(hn!=null){let an=e.naturalHeight,rn=e.naturalWidth;if(en!==void 0&&en.resizedHeight!==void 0&&en.resizedWidth!==void 0&&(an=en.resizedHeight,rn=en.resizedWidth),en!==void 0){if(dn=en,en.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");if(dn.tensorFormat="RGBA",en.height!==void 0&&en.height!==an)throw new Error("Image input config height doesn't match HTMLImageElement height");if(dn.height=an,en.width!==void 0&&en.width!==rn)throw new Error("Image input config width doesn't match HTMLImageElement width");dn.width=rn}else dn.tensorFormat="RGBA",dn.height=an,dn.width=rn;fn.width=rn,fn.height=an,hn.drawImage(e,0,0,rn,an),un=hn.getImageData(0,0,rn,an).data}else throw new Error("Can not access image data")}else if(nn){const fn="RGBA";let hn,an;if(en!==void 0&&en.resizedWidth!==void 0&&en.resizedHeight!==void 0?(hn=en.resizedHeight,an=en.resizedWidth):(hn=e.height,an=e.width),en!==void 0){if(dn=en,en.bitmapFormat!==void 0&&en.bitmapFormat!==fn)throw new Error("Image input config format must be RGBA for ImageData");dn.bitmapFormat="RGBA"}else dn.bitmapFormat="RGBA";if(dn.height=hn,dn.width=an,en!==void 0){const rn=document.createElement("canvas");rn.width=an,rn.height=hn;const cn=rn.getContext("2d");if(cn!=null)cn.putImageData(e,0,0),un=cn.getImageData(0,0,an,hn).data;else throw new Error("Can not access image data")}else un=e.data}else if(sn){if(en===void 0)throw new Error("Please provide image config with format for Imagebitmap");if(en.bitmapFormat!==void 0)throw new Error("Image input config format must be defined for ImageBitmap");const fn=document.createElement("canvas").getContext("2d");if(fn!=null){const hn=e.height,an=e.width;if(fn.drawImage(e,0,0,an,hn),un=fn.getImageData(0,0,an,hn).data,en!==void 0){if(en.height!==void 0&&en.height!==hn)throw new Error("Image input config height doesn't match ImageBitmap height");if(dn.height=hn,en.width!==void 0&&en.width!==an)throw new Error("Image input config width doesn't match ImageBitmap width");dn.width=an}else dn.height=hn,dn.width=an;return Uu.bufferToTensor(un,dn)}else throw new Error("Can not access image data")}else{if(on)return new Promise((fn,hn)=>{const an=document.createElement("canvas"),rn=an.getContext("2d");if(!e||!rn)return hn();const cn=new Image;cn.crossOrigin="Anonymous",cn.src=e,cn.onload=()=>{an.width=cn.width,an.height=cn.height,rn.drawImage(cn,0,0,an.width,an.height);const pn=rn.getImageData(0,0,an.width,an.height);if(en!==void 0){if(en.height!==void 0&&en.height!==an.height)throw new Error("Image input config height doesn't match ImageBitmap height");if(dn.height=an.height,en.width!==void 0&&en.width!==an.width)throw new Error("Image input config width doesn't match ImageBitmap width");dn.width=an.width}else dn.height=an.height,dn.width=an.width;fn(Uu.bufferToTensor(pn.data,dn))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(un!==void 0)return Uu.bufferToTensor(un,dn);throw new Error("Input data provided is not supported - aborted tensor creation")}toImageData(e){var en,tn;const nn=document.createElement("canvas").getContext("2d");let sn;if(nn!=null){const on=this.dims[3],un=this.dims[2],dn=this.dims[1],fn=e!==void 0&&e.format!==void 0?e.format:"RGB",hn=e!==void 0&&((en=e.norm)===null||en===void 0?void 0:en.mean)!==void 0?e.norm.mean:255,an=e!==void 0&&((tn=e.norm)===null||tn===void 0?void 0:tn.bias)!==void 0?e.norm.bias:0,rn=un*on;if(e!==void 0){if(e.height!==void 0&&e.height!==un)throw new Error("Image output config height doesn't match tensor height");if(e.width!==void 0&&e.width!==on)throw new Error("Image output config width doesn't match tensor width");if(e.format!==void 0&&dn===4&&e.format!=="RGBA"||dn===3&&e.format!=="RGB"&&e.format!=="BGR")throw new Error("Tensor format doesn't match input tensor dims")}const cn=4;let pn=0,mn=1,xn=2,gn=3,yn=0,bn=rn,wn=rn*2,_n=-1;fn==="RGBA"?(yn=0,bn=rn,wn=rn*2,_n=rn*3):fn==="RGB"?(yn=0,bn=rn,wn=rn*2):fn==="RBG"&&(yn=0,wn=rn,bn=rn*2),sn=nn.createImageData(on,un);for(let Tn=0;Tn<un*on;pn+=cn,mn+=cn,xn+=cn,gn+=cn,Tn++)sn.data[pn]=(this.data[yn++]-an)*hn,sn.data[mn]=(this.data[bn++]-an)*hn,sn.data[xn]=(this.data[wn++]-an)*hn,sn.data[gn]=_n===-1?255:(this.data[_n++]-an)*hn}else throw new Error("Can not access image data");return sn}reshape(e){return new Uu(this.type,this.data,e)}};const Tensor$1=Tensor$2;let InferenceSession$2=class Fm{constructor(e){this.handler=e}async run(e,en,tn){const nn={};let sn={};if(typeof e!="object"||e===null||e instanceof Tensor$1||Array.isArray(e))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let on=!0;if(typeof en=="object"){if(en===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(en instanceof Tensor$1)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(en)){if(en.length===0)throw new TypeError("'fetches' cannot be an empty array.");on=!1;for(const fn of en){if(typeof fn!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(fn)===-1)throw new RangeError(`'fetches' contains invalid output name: ${fn}.`);nn[fn]=null}if(typeof tn=="object"&&tn!==null)sn=tn;else if(typeof tn<"u")throw new TypeError("'options' must be an object.")}else{let fn=!1;const hn=Object.getOwnPropertyNames(en);for(const an of this.outputNames)if(hn.indexOf(an)!==-1){const rn=en[an];(rn===null||rn instanceof Tensor$1)&&(fn=!0,on=!1,nn[an]=rn)}if(fn){if(typeof tn=="object"&&tn!==null)sn=tn;else if(typeof tn<"u")throw new TypeError("'options' must be an object.")}else sn=en}}else if(typeof en<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(const fn of this.inputNames)if(typeof e[fn]>"u")throw new Error(`input '${fn}' is missing in 'feeds'.`);if(on)for(const fn of this.outputNames)nn[fn]=null;const un=await this.handler.run(e,nn,sn),dn={};for(const fn in un)Object.hasOwnProperty.call(un,fn)&&(dn[fn]=new Tensor$1(un[fn].type,un[fn].data,un[fn].dims));return dn}static async create(e,en,tn,nn){let sn,on={};if(typeof e=="string"){if(sn=e,typeof en=="object"&&en!==null)on=en;else if(typeof en<"u")throw new TypeError("'options' must be an object.")}else if(e instanceof Uint8Array){if(sn=e,typeof en=="object"&&en!==null)on=en;else if(typeof en<"u")throw new TypeError("'options' must be an object.")}else if(e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer){const an=e;let rn=0,cn=e.byteLength;if(typeof en=="object"&&en!==null)on=en;else if(typeof en=="number"){if(rn=en,!Number.isSafeInteger(rn))throw new RangeError("'byteOffset' must be an integer.");if(rn<0||rn>=an.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${an.byteLength}).`);if(cn=e.byteLength-rn,typeof tn=="number"){if(cn=tn,!Number.isSafeInteger(cn))throw new RangeError("'byteLength' must be an integer.");if(cn<=0||rn+cn>an.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${an.byteLength-rn}].`);if(typeof nn=="object"&&nn!==null)on=nn;else if(typeof nn<"u")throw new TypeError("'options' must be an object.")}else if(typeof tn<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof en<"u")throw new TypeError("'options' must be an object.");sn=new Uint8Array(an,rn,cn)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");const dn=(on.executionProviders||[]).map(an=>typeof an=="string"?an:an.name),hn=await(await resolveBackend(dn)).createSessionHandler(sn,on);return new Fm(hn)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}};const InferenceSession$1=InferenceSession$2,lib=Object.freeze(Object.defineProperty({__proto__:null,InferenceSession:InferenceSession$1,Tensor:Tensor$1,env:env$2,registerBackend},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(lib);/*!
* ONNX Runtime Web v1.14.0
* Copyright (c) Microsoft Corporation. All rights reserved.
* Licensed under the MIT License.
*/(function(module,exports$1){(function(St,e){module.exports=e(require$$0)})(self,__WEBPACK_EXTERNAL_MODULE__1670__=>(()=>{var __webpack_modules__={3474:(St,e,en)=>{var tn,nn=(tn=(tn=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(sn){function on(){return Qn.buffer!=lr&&Cr(Qn.buffer),$n}function un(){return Qn.buffer!=lr&&Cr(Qn.buffer),On}function dn(){return Qn.buffer!=lr&&Cr(Qn.buffer),er}function fn(){return Qn.buffer!=lr&&Cr(Qn.buffer),sr}function hn(){return Qn.buffer!=lr&&Cr(Qn.buffer),ar}var an,rn,cn;sn=sn||{},an||(an=sn!==void 0?sn:{}),an.ready=new Promise(function(Dn,Wn){rn=Dn,cn=Wn});var pn,mn,xn,gn,yn,bn,wn=Object.assign({},an),_n="./this.program",Tn=(Dn,Wn)=>{throw Wn},An=typeof window=="object",Pn=typeof importScripts=="function",Sn=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",Cn=an.ENVIRONMENT_IS_PTHREAD||!1,Nn="";function Mn(Dn){return an.locateFile?an.locateFile(Dn,Nn):Nn+Dn}if(Sn){let Dn;Nn=Pn?en(908).dirname(Nn)+"/":"//",bn=()=>{yn||(gn=en(1384),yn=en(908))},pn=function(Wn,tr){return bn(),Wn=yn.normalize(Wn),gn.readFileSync(Wn,tr?void 0:"utf8")},xn=Wn=>((Wn=pn(Wn,!0)).buffer||(Wn=new Uint8Array(Wn)),Wn),mn=(Wn,tr,ur)=>{bn(),Wn=yn.normalize(Wn),gn.readFile(Wn,function(_r,Ar){_r?ur(_r):tr(Ar.buffer)})},1<process.argv.length&&(_n=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(Wn){if(!(Wn instanceof $r))throw Wn}),process.on("unhandledRejection",function(Wn){throw Wn}),Tn=(Wn,tr)=>{if(ls())throw process.exitCode=Wn,tr;tr instanceof $r||qn("exiting due to exception: "+tr),process.exit(Wn)},an.inspect=function(){return"[Emscripten Module object]"};try{Dn=en(9925)}catch(Wn){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),Wn}en.g.Worker=Dn.Worker}else(An||Pn)&&(Pn?Nn=self.location.href:typeof document<"u"&&document.currentScript&&(Nn=document.currentScript.src),tn&&(Nn=tn),Nn=Nn.indexOf("blob:")!==0?Nn.substr(0,Nn.replace(/[?#].*/,"").lastIndexOf("/")+1):"",Sn||(pn=Dn=>{var Wn=new XMLHttpRequest;return Wn.open("GET",Dn,!1),Wn.send(null),Wn.responseText},Pn&&(xn=Dn=>{var Wn=new XMLHttpRequest;return Wn.open("GET",Dn,!1),Wn.responseType="arraybuffer",Wn.send(null),new Uint8Array(Wn.response)}),mn=(Dn,Wn,tr)=>{var ur=new XMLHttpRequest;ur.open("GET",Dn,!0),ur.responseType="arraybuffer",ur.onload=()=>{ur.status==200||ur.status==0&&ur.response?Wn(ur.response):tr()},ur.onerror=tr,ur.send(null)}));Sn&&typeof performance>"u"&&(en.g.performance=en(6953).performance);var Fn=console.log.bind(console),In=console.warn.bind(console);Sn&&(bn(),Fn=Dn=>gn.writeSync(1,Dn+`
`),In=Dn=>gn.writeSync(2,Dn+`
`));var Bn,Ln=an.print||Fn,qn=an.printErr||In;Object.assign(an,wn),wn=null,an.thisProgram&&(_n=an.thisProgram),an.quit&&(Tn=an.quit),an.wasmBinary&&(Bn=an.wasmBinary);var Yn=an.noExitRuntime||!1;typeof WebAssembly!="object"&&os("no native wasm support detected");var Qn,zn,lr,$n,On,er,sr,ar,cr=!1,gr=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function vr(Dn,Wn,tr){var ur=(Wn>>>=0)+tr;for(tr=Wn;Dn[tr]&&!(tr>=ur);)++tr;if(16<tr-Wn&&Dn.buffer&&gr)return gr.decode(Dn.buffer instanceof SharedArrayBuffer?Dn.slice(Wn,tr):Dn.subarray(Wn,tr));for(ur="";Wn<tr;){var _r=Dn[Wn++];if(128&_r){var Ar=63&Dn[Wn++];if((224&_r)==192)ur+=String.fromCharCode((31&_r)<<6|Ar);else{var rs=63&Dn[Wn++];65536>(_r=(240&_r)==224?(15&_r)<<12|Ar<<6|rs:(7&_r)<<18|Ar<<12|rs<<6|63&Dn[Wn++])?ur+=String.fromCharCode(_r):(_r-=65536,ur+=String.fromCharCode(55296|_r>>10,56320|1023&_r))}}else ur+=String.fromCharCode(_r)}return ur}function Er(Dn,Wn){return(Dn>>>=0)?vr(un(),Dn,Wn):""}function Rr(Dn,Wn,tr,ur){if(!(0<ur))return 0;var _r=tr>>>=0;ur=tr+ur-1;for(var Ar=0;Ar<Dn.length;++Ar){var rs=Dn.charCodeAt(Ar);if(55296<=rs&&57343>=rs&&(rs=65536+((1023&rs)<<10)|1023&Dn.charCodeAt(++Ar)),127>=rs){if(tr>=ur)break;Wn[tr++>>>0]=rs}else{if(2047>=rs){if(tr+1>=ur)break;Wn[tr++>>>0]=192|rs>>6}else{if(65535>=rs){if(tr+2>=ur)break;Wn[tr++>>>0]=224|rs>>12}else{if(tr+3>=ur)break;Wn[tr++>>>0]=240|rs>>18,Wn[tr++>>>0]=128|rs>>12&63}Wn[tr++>>>0]=128|rs>>6&63}Wn[tr++>>>0]=128|63&rs}}return Wn[tr>>>0]=0,tr-_r}function Kr(Dn){for(var Wn=0,tr=0;tr<Dn.length;++tr){var ur=Dn.charCodeAt(tr);127>=ur?Wn++:2047>=ur?Wn+=2:55296<=ur&&57343>=ur?(Wn+=4,++tr):Wn+=3}return Wn}function Cr(Dn){lr=Dn,an.HEAP8=$n=new Int8Array(Dn),an.HEAP16=new Int16Array(Dn),an.HEAP32=er=new Int32Array(Dn),an.HEAPU8=On=new Uint8Array(Dn),an.HEAPU16=new Uint16Array(Dn),an.HEAPU32=sr=new Uint32Array(Dn),an.HEAPF32=new Float32Array(Dn),an.HEAPF64=ar=new Float64Array(Dn)}Cn&&(lr=an.buffer);var Gr=an.INITIAL_MEMORY||16777216;if(Cn)Qn=an.wasmMemory,lr=an.buffer;else if(an.wasmMemory)Qn=an.wasmMemory;else if(!((Qn=new WebAssembly.Memory({initial:Gr/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw qn("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),Sn&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");Qn&&(lr=Qn.buffer),Gr=lr.byteLength,Cr(lr);var Zn,Xr=[],hs=[],us=[],zr=[];function ls(){return Yn||!1}function wr(){var Dn=an.preRun.shift();Xr.unshift(Dn)}var Fr,Qr=0,fs=null;function os(Dn){throw Cn?postMessage({cmd:"onAbort",arg:Dn}):an.onAbort&&an.onAbort(Dn),qn(Dn="Aborted("+Dn+")"),cr=!0,Dn=new WebAssembly.RuntimeError(Dn+". Build with -sASSERTIONS for more info."),cn(Dn),Dn}function xr(){return Fr.startsWith("data:application/octet-stream;base64,")}function Or(){var Dn=Fr;try{if(Dn==Fr&&Bn)return new Uint8Array(Bn);if(xn)return xn(Dn);throw"both async and sync fetching of the wasm failed"}catch(Wn){os(Wn)}}Fr="ort-wasm-threaded.wasm",xr()||(Fr=Mn(Fr));var Ir={};function $r(Dn){this.name="ExitStatus",this.message="Program terminated with exit("+Dn+")",this.status=Dn}function ss(Dn){(Dn=Jr.Vb[Dn])||os(),Jr.mc(Dn)}function as(Dn){var Wn=Jr.Cc();if(!Wn)return 6;Jr.ac.push(Wn),Jr.Vb[Dn.Ub]=Wn,Wn.Ub=Dn.Ub;var tr={cmd:"run",start_routine:Dn.Ic,arg:Dn.zc,pthread_ptr:Dn.Ub};return Wn.$b=()=>{tr.time=performance.now(),Wn.postMessage(tr,Dn.Nc)},Wn.loaded&&(Wn.$b(),delete Wn.$b),0}function Ns(Dn){if(Cn)return ds(1,1,Dn);ls()||(Jr.oc(),an.onExit&&an.onExit(Dn),cr=!0),Tn(Dn,new $r(Dn))}function As(Dn,Wn){if(!Wn&&Cn)throw qr(Dn),"unwind";ls()||Cn||(ju(),Ss(us),Pl(0),au[1].length&&lu(1,10),au[2].length&&lu(2,10),Jr.oc()),Ns(Dn)}var Jr={Yb:[],ac:[],qc:[],Vb:{},fc:function(){Cn&&Jr.Ec()},Pc:function(){},Ec:function(){Jr.receiveObjectTransfer=Jr.Gc,Jr.threadInitTLS=Jr.pc,Jr.setExitStatus=Jr.nc,Yn=!1},nc:function(){},oc:function(){for(var Dn of Object.values(Jr.Vb))Jr.mc(Dn);for(Dn of Jr.Yb)Dn.terminate();Jr.Yb=[]},mc:function(Dn){var Wn=Dn.Ub;delete Jr.Vb[Wn],Jr.Yb.push(Dn),Jr.ac.splice(Jr.ac.indexOf(Dn),1),Dn.Ub=0,du(Wn)},Gc:function(){},pc:function(){Jr.qc.forEach(Dn=>Dn())},Fc:function(Dn,Wn){Dn.onmessage=tr=>{var ur=(tr=tr.data).cmd;if(Dn.Ub&&(Jr.Bc=Dn.Ub),tr.targetThread&&tr.targetThread!=Wl()){var _r=Jr.Vb[tr.Qc];_r?_r.postMessage(tr,tr.transferList):qn('Internal error! Worker sent a message "'+ur+'" to target pthread '+tr.targetThread+", but that thread no longer exists!")}else ur==="processProxyingQueue"?hr(tr.queue):ur==="spawnThread"?as(tr):ur==="cleanupThread"?ss(tr.thread):ur==="killThread"?(tr=tr.thread,ur=Jr.Vb[tr],delete Jr.Vb[tr],ur.terminate(),du(tr),Jr.ac.splice(Jr.ac.indexOf(ur),1),ur.Ub=0):ur==="cancelThread"?Jr.Vb[tr.thread].postMessage({cmd:"cancel"}):ur==="loaded"?(Dn.loaded=!0,Wn&&Wn(Dn),Dn.$b&&(Dn.$b(),delete Dn.$b)):ur==="print"?Ln("Thread "+tr.threadId+": "+tr.text):ur==="printErr"?qn("Thread "+tr.threadId+": "+tr.text):ur==="alert"?alert("Thread "+tr.threadId+": "+tr.text):tr.target==="setimmediate"?Dn.postMessage(tr):ur==="onAbort"?an.onAbort&&an.onAbort(tr.arg):ur&&qn("worker sent an unknown command "+ur);Jr.Bc=void 0},Dn.onerror=tr=>{throw qn("worker sent an error! "+tr.filename+":"+tr.lineno+": "+tr.message),tr},Sn&&(Dn.on("message",function(tr){Dn.onmessage({data:tr})}),Dn.on("error",function(tr){Dn.onerror(tr)}),Dn.on("detachedExit",function(){})),Dn.postMessage({cmd:"load",urlOrBlob:an.mainScriptUrlOrBlob||tn,wasmMemory:Qn,wasmModule:zn})},yc:function(){var Dn=Mn("ort-wasm-threaded.worker.js");Jr.Yb.push(new Worker(Dn))},Cc:function(){return Jr.Yb.length==0&&(Jr.yc(),Jr.Fc(Jr.Yb[0])),Jr.Yb.pop()}};function Ss(Dn){for(;0<Dn.length;)Dn.shift()(an)}function es(Dn){var Wn=Ls();return Dn=Dn(),Os(Wn),Dn}function qr(Dn){if(Cn)return ds(2,0,Dn);try{As(Dn)}catch(Wn){Wn instanceof $r||Wn=="unwind"||Tn(1,Wn)}}an.PThread=Jr,an.establishStackSpace=function(){var Dn=Wl(),Wn=dn()[Dn+44>>2>>>0];Dn=dn()[Dn+48>>2>>>0],Gu(Wn,Wn-Dn),Os(Wn)};var ts=[];function Dr(Dn){var Wn=ts[Dn];return Wn||(Dn>=ts.length&&(ts.length=Dn+1),ts[Dn]=Wn=Zn.get(Dn)),Wn}an.invokeEntryPoint=function(Dn,Wn){Dn=Dr(Dn)(Wn),ls()?Jr.nc(Dn):Yl(Dn)};var ns,ks,ms=[],Yr=0,is=0;function _s(Dn){this.Zb=Dn,this.Sb=Dn-24,this.xc=function(Wn){fn()[this.Sb+4>>2>>>0]=Wn},this.bc=function(){return fn()[this.Sb+4>>2>>>0]},this.wc=function(Wn){fn()[this.Sb+8>>2>>>0]=Wn},this.Dc=function(){return fn()[this.Sb+8>>2>>>0]},this.rc=function(){dn()[this.Sb>>2>>>0]=0},this.hc=function(Wn){Wn=Wn?1:0,on()[this.Sb+12>>0>>>0]=Wn},this.uc=function(){return on()[this.Sb+12>>0>>>0]!=0},this.ic=function(Wn){Wn=Wn?1:0,on()[this.Sb+13>>0>>>0]=Wn},this.kc=function(){return on()[this.Sb+13>>0>>>0]!=0},this.fc=function(Wn,tr){this.cc(0),this.xc(Wn),this.wc(tr),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(dn(),this.Sb>>2,1)},this.Hc=function(){return Atomics.sub(dn(),this.Sb>>2,1)===1},this.cc=function(Wn){fn()[this.Sb+16>>2>>>0]=Wn},this.tc=function(){return fn()[this.Sb+16>>2>>>0]},this.vc=function(){if(Zo(this.bc()))return fn()[this.Zb>>2>>>0];var Wn=this.tc();return Wn!==0?Wn:this.Zb}}function so(Dn){return go(new _s(Dn).Sb)}function ho(Dn,Wn,tr,ur){return Cn?ds(3,1,Dn,Wn,tr,ur):Co(Dn,Wn,tr,ur)}function Co(Dn,Wn,tr,ur){if(typeof SharedArrayBuffer>"u")return qn("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var _r=[];return Cn&&_r.length===0?ho(Dn,Wn,tr,ur):(Dn={Ic:tr,Ub:Dn,zc:ur,Nc:_r},Cn?(Dn.Oc="spawnThread",postMessage(Dn,_r),0):as(Dn))}function Ts(Dn,Wn,tr){return Cn?ds(4,1,Dn,Wn,tr):0}function qo(Dn,Wn){if(Cn)return ds(5,1,Dn,Wn)}function Go(Dn,Wn){if(Cn)return ds(6,1,Dn,Wn)}function Mo(Dn,Wn,tr){if(Cn)return ds(7,1,Dn,Wn,tr)}function Ro(Dn,Wn,tr){return Cn?ds(8,1,Dn,Wn,tr):0}function eo(Dn,Wn){if(Cn)return ds(9,1,Dn,Wn)}function lo(Dn,Wn,tr){if(Cn)return ds(10,1,Dn,Wn,tr)}function fo(Dn,Wn,tr,ur){if(Cn)return ds(11,1,Dn,Wn,tr,ur)}function xa(Dn,Wn,tr,ur){if(Cn)return ds(12,1,Dn,Wn,tr,ur)}function Qo(Dn,Wn,tr,ur){if(Cn)return ds(13,1,Dn,Wn,tr,ur)}function Oo(Dn){if(Cn)return ds(14,1,Dn)}function Kn(Dn,Wn){if(Cn)return ds(15,1,Dn,Wn)}function or(Dn,Wn,tr){if(Cn)return ds(16,1,Dn,Wn,tr)}function hr(Dn){Atomics.store(dn(),Dn>>2,1),Wl()&&Cu(Dn),Atomics.compareExchange(dn(),Dn>>2,1,0)}function mr(Dn){return fn()[Dn>>>2]+4294967296*dn()[Dn+4>>>2]}function kr(Dn,Wn,tr,ur,_r,Ar){return Cn?ds(17,1,Dn,Wn,tr,ur,_r,Ar):-52}function Pr(Dn,Wn,tr,ur,_r,Ar){if(Cn)return ds(18,1,Dn,Wn,tr,ur,_r,Ar)}function _i(Dn){var Wn=Kr(Dn)+1,tr=zo(Wn);return tr&&Rr(Dn,on(),tr,Wn),tr}function gs(Dn,Wn,tr){function ur($s){return($s=$s.toTimeString().match(/\(([A-Za-z ]+)\)$/))?$s[1]:"GMT"}if(Cn)return ds(19,1,Dn,Wn,tr);var _r=new Date().getFullYear(),Ar=new Date(_r,0,1),rs=new Date(_r,6,1);_r=Ar.getTimezoneOffset();var xs=rs.getTimezoneOffset(),Is=Math.max(_r,xs);dn()[Dn>>2>>>0]=60*Is,dn()[Wn>>2>>>0]=+(_r!=xs),Dn=ur(Ar),Wn=ur(rs),Dn=_i(Dn),Wn=_i(Wn),xs<_r?(fn()[tr>>2>>>0]=Dn,fn()[tr+4>>2>>>0]=Wn):(fn()[tr>>2>>>0]=Wn,fn()[tr+4>>2>>>0]=Dn)}function ds(Dn,Wn){var tr=arguments.length-2,ur=arguments;return es(()=>{for(var _r=Kl(8*tr),Ar=_r>>3,rs=0;rs<tr;rs++){var xs=ur[2+rs];hn()[Ar+rs>>>0]=xs}return ba(Dn,tr,_r,Wn)})}an.executeNotifiedProxyingQueue=hr,ks=Sn?()=>{var Dn=process.hrtime();return 1e3*Dn[0]+Dn[1]/1e6}:Cn?()=>performance.now()-an.__performance_now_clock_drift:()=>performance.now();var Cs,Gs=[],uo={};function co(){if(!Cs){var Dn,Wn={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:_n||"./this.program"};for(Dn in uo)uo[Dn]===void 0?delete Wn[Dn]:Wn[Dn]=uo[Dn];var tr=[];for(Dn in Wn)tr.push(Dn+"="+Wn[Dn]);Cs=tr}return Cs}function Nr(Dn,Wn){if(Cn)return ds(20,1,Dn,Wn);var tr=0;return co().forEach(function(ur,_r){var Ar=Wn+tr;for(_r=fn()[Dn+4*_r>>2>>>0]=Ar,Ar=0;Ar<ur.length;++Ar)on()[_r++>>0>>>0]=ur.charCodeAt(Ar);on()[_r>>0>>>0]=0,tr+=ur.length+1}),0}function Ps(Dn,Wn){if(Cn)return ds(21,1,Dn,Wn);var tr=co();fn()[Dn>>2>>>0]=tr.length;var ur=0;return tr.forEach(function(_r){ur+=_r.length+1}),fn()[Wn>>2>>>0]=ur,0}function Ys(Dn){return Cn?ds(22,1,Dn):52}function Io(Dn,Wn,tr,ur){return Cn?ds(23,1,Dn,Wn,tr,ur):52}function Ho(Dn,Wn,tr,ur,_r){return Cn?ds(24,1,Dn,Wn,tr,ur,_r):70}var au=[null,[],[]];function lu(Dn,Wn){var tr=au[Dn];Wn===0||Wn===10?((Dn===1?Ln:qn)(vr(tr,0)),tr.length=0):tr.push(Wn)}function Pu(Dn,Wn,tr,ur){if(Cn)return ds(25,1,Dn,Wn,tr,ur);for(var _r=0,Ar=0;Ar<tr;Ar++){var rs=fn()[Wn>>2>>>0],xs=fn()[Wn+4>>2>>>0];Wn+=8;for(var Is=0;Is<xs;Is++)lu(Dn,un()[rs+Is>>>0]);_r+=xs}return fn()[ur>>2>>>0]=_r,0}var oo=0;function Ll(Dn){return Dn%4==0&&(Dn%100!=0||Dn%400==0)}var Vu=[31,29,31,30,31,30,31,31,30,31,30,31],po=[31,28,31,30,31,30,31,31,30,31,30,31];function Nu(Dn,Wn,tr,ur){function _r(jr,Ds,Qs){for(jr=typeof jr=="number"?jr.toString():jr||"";jr.length<Ds;)jr=Qs[0]+jr;return jr}function Ar(jr,Ds){return _r(jr,Ds,"0")}function rs(jr,Ds){function Qs(Dl){return 0>Dl?-1:0<Dl?1:0}var Jo;return(Jo=Qs(jr.getFullYear()-Ds.getFullYear()))===0&&(Jo=Qs(jr.getMonth()-Ds.getMonth()))===0&&(Jo=Qs(jr.getDate()-Ds.getDate())),Jo}function xs(jr){switch(jr.getDay()){case 0:return new Date(jr.getFullYear()-1,11,29);case 1:return jr;case 2:return new Date(jr.getFullYear(),0,3);case 3:return new Date(jr.getFullYear(),0,2);case 4:return new Date(jr.getFullYear(),0,1);case 5:return new Date(jr.getFullYear()-1,11,31);case 6:return new Date(jr.getFullYear()-1,11,30)}}function Is(jr){var Ds=jr.Wb;for(jr=new Date(new Date(jr.Xb+1900,0,1).getTime());0<Ds;){var Qs=jr.getMonth(),Jo=(Ll(jr.getFullYear())?Vu:po)[Qs];if(!(Ds>Jo-jr.getDate())){jr.setDate(jr.getDate()+Ds);break}Ds-=Jo-jr.getDate()+1,jr.setDate(1),11>Qs?jr.setMonth(Qs+1):(jr.setMonth(0),jr.setFullYear(jr.getFullYear()+1))}return Qs=new Date(jr.getFullYear()+1,0,4),Ds=xs(new Date(jr.getFullYear(),0,4)),Qs=xs(Qs),0>=rs(Ds,jr)?0>=rs(Qs,jr)?jr.getFullYear()+1:jr.getFullYear():jr.getFullYear()-1}var $s=dn()[ur+40>>2>>>0];for(var Ks in ur={Lc:dn()[ur>>2>>>0],Kc:dn()[ur+4>>2>>>0],dc:dn()[ur+8>>2>>>0],jc:dn()[ur+12>>2>>>0],ec:dn()[ur+16>>2>>>0],Xb:dn()[ur+20>>2>>>0],Tb:dn()[ur+24>>2>>>0],Wb:dn()[ur+28>>2>>>0],Rc:dn()[ur+32>>2>>>0],Jc:dn()[ur+36>>2>>>0],Mc:$s?Er($s):""},tr=Er(tr),$s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})tr=tr.replace(new RegExp(Ks,"g"),$s[Ks]);var Uo="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),To="January February March April May June July August September October November December".split(" ");for(Ks in $s={"%a":function(jr){return Uo[jr.Tb].substring(0,3)},"%A":function(jr){return Uo[jr.Tb]},"%b":function(jr){return To[jr.ec].substring(0,3)},"%B":function(jr){return To[jr.ec]},"%C":function(jr){return Ar((jr.Xb+1900)/100|0,2)},"%d":function(jr){return Ar(jr.jc,2)},"%e":function(jr){return _r(jr.jc,2," ")},"%g":function(jr){return Is(jr).toString().substring(2)},"%G":function(jr){return Is(jr)},"%H":function(jr){return Ar(jr.dc,2)},"%I":function(jr){return(jr=jr.dc)==0?jr=12:12<jr&&(jr-=12),Ar(jr,2)},"%j":function(jr){for(var Ds=0,Qs=0;Qs<=jr.ec-1;Ds+=(Ll(jr.Xb+1900)?Vu:po)[Qs++]);return Ar(jr.jc+Ds,3)},"%m":function(jr){return Ar(jr.ec+1,2)},"%M":function(jr){return Ar(jr.Kc,2)},"%n":function(){return`
`},"%p":function(jr){return 0<=jr.dc&&12>jr.dc?"AM":"PM"},"%S":function(jr){return Ar(jr.Lc,2)},"%t":function(){return"	"},"%u":function(jr){return jr.Tb||7},"%U":function(jr){return Ar(Math.floor((jr.Wb+7-jr.Tb)/7),2)},"%V":function(jr){var Ds=Math.floor((jr.Wb+7-(jr.Tb+6)%7)/7);if(2>=(jr.Tb+371-jr.Wb-2)%7&&Ds++,Ds)Ds==53&&((Qs=(jr.Tb+371-jr.Wb)%7)==4||Qs==3&&Ll(jr.Xb)||(Ds=1));else{Ds=52;var Qs=(jr.Tb+7-jr.Wb-1)%7;(Qs==4||Qs==5&&Ll(jr.Xb%400-1))&&Ds++}return Ar(Ds,2)},"%w":function(jr){return jr.Tb},"%W":function(jr){return Ar(Math.floor((jr.Wb+7-(jr.Tb+6)%7)/7),2)},"%y":function(jr){return(jr.Xb+1900).toString().substring(2)},"%Y":function(jr){return jr.Xb+1900},"%z":function(jr){var Ds=0<=(jr=jr.Jc);return jr=Math.abs(jr)/60,(Ds?"+":"-")+("0000"+(jr/60*100+jr%60)).slice(-4)},"%Z":function(jr){return jr.Mc},"%%":function(){return"%"}},tr=tr.replace(/%%/g,"\0\0"),$s)tr.includes(Ks)&&(tr=tr.replace(new RegExp(Ks,"g"),$s[Ks](ur)));return Ks=function(jr){var Ds=Array(Kr(jr)+1);return Rr(jr,Ds,0,Ds.length),Ds}(tr=tr.replace(/\0\0/g,"%")),Ks.length>Wn?0:(function(jr,Ds){on().set(jr,Ds>>>0)}(Ks,Dn),Ks.length-1)}Jr.fc();var Al=[null,Ns,qr,ho,Ts,qo,Go,Mo,Ro,eo,lo,fo,xa,Qo,Oo,Kn,or,kr,Pr,gs,Nr,Ps,Ys,Io,Ho,Pu],uu={b:function(Dn){return zo(Dn+24)+24},n:function(Dn){return(Dn=new _s(Dn)).uc()||(Dn.hc(!0),Yr--),Dn.ic(!1),ms.push(Dn),Dn.sc(),Dn.vc()},ma:function(Dn){throw qn("Unexpected exception thrown, this is not properly supported - aborting"),cr=!0,Dn},x:function(){Ms(0);var Dn=ms.pop();if(Dn.Hc()&&!Dn.kc()){var Wn=Dn.Dc();Wn&&Dr(Wn)(Dn.Zb),so(Dn.Zb)}is=0},e:function(){var Dn=is;if(!Dn)return oo=0;var Wn=new _s(Dn);Wn.cc(Dn);var tr=Wn.bc();if(!tr)return oo=0,Dn;for(var ur=Array.prototype.slice.call(arguments),_r=0;_r<ur.length;_r++){var Ar=ur[_r];if(Ar===0||Ar===tr)break;if(Xl(Ar,tr,Wn.Sb+16))return oo=Ar,Dn}return oo=tr,Dn},l:function(){var Dn=is;if(!Dn)return oo=0;var Wn=new _s(Dn);Wn.cc(Dn);var tr=Wn.bc();if(!tr)return oo=0,Dn;for(var ur=Array.prototype.slice.call(arguments),_r=0;_r<ur.length;_r++){var Ar=ur[_r];if(Ar===0||Ar===tr)break;if(Xl(Ar,tr,Wn.Sb+16))return oo=Ar,Dn}return oo=tr,Dn},h:function(){var Dn=is;if(!Dn)return oo=0;var Wn=new _s(Dn);Wn.cc(Dn);var tr=Wn.bc();if(!tr)return oo=0,Dn;for(var ur=Array.prototype.slice.call(arguments),_r=0;_r<ur.length;_r++){var Ar=ur[_r];if(Ar===0||Ar===tr)break;if(Xl(Ar,tr,Wn.Sb+16))return oo=Ar,Dn}return oo=tr,Dn},t:so,M:function(){var Dn=ms.pop();Dn||os("no exception to throw");var Wn=Dn.Zb;throw Dn.kc()||(ms.push(Dn),Dn.ic(!0),Dn.hc(!1),Yr++),is=Wn,Wn},c:function(Dn,Wn,tr){throw new _s(Dn).fc(Wn,tr),is=Dn,Yr++,Dn},pa:function(){return Yr},Fa:function(Dn){qu(Dn,!Pn,1,!An),Jr.pc()},T:function(Dn){Cn?postMessage({cmd:"cleanupThread",thread:Dn}):ss(Dn)},xa:Co,j:function(Dn){throw is||(is=Dn),Dn},H:Ts,Ma:qo,ua:Go,wa:Mo,oa:Ro,Ka:eo,Ca:lo,Ja:fo,V:xa,va:Qo,sa:Oo,La:Kn,ta:or,Ta:function(){},X:function(){os("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){os("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(Dn,Wn,tr,ur){if(Dn==Wn)setTimeout(()=>hr(ur));else if(Cn)postMessage({targetThread:Dn,cmd:"processProxyingQueue",queue:ur});else{if(!(Dn=Jr.Vb[Dn]))return;Dn.postMessage({cmd:"processProxyingQueue",queue:ur})}return 1},Ea:function(){return-1},Pa:function(Dn,Wn){Dn=new Date(1e3*mr(Dn)),dn()[Wn>>2>>>0]=Dn.getUTCSeconds(),dn()[Wn+4>>2>>>0]=Dn.getUTCMinutes(),dn()[Wn+8>>2>>>0]=Dn.getUTCHours(),dn()[Wn+12>>2>>>0]=Dn.getUTCDate(),dn()[Wn+16>>2>>>0]=Dn.getUTCMonth(),dn()[Wn+20>>2>>>0]=Dn.getUTCFullYear()-1900,dn()[Wn+24>>2>>>0]=Dn.getUTCDay(),Dn=(Dn.getTime()-Date.UTC(Dn.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,dn()[Wn+28>>2>>>0]=Dn},Qa:function(Dn,Wn){Dn=new Date(1e3*mr(Dn)),dn()[Wn>>2>>>0]=Dn.getSeconds(),dn()[Wn+4>>2>>>0]=Dn.getMinutes(),dn()[Wn+8>>2>>>0]=Dn.getHours(),dn()[Wn+12>>2>>>0]=Dn.getDate(),dn()[Wn+16>>2>>>0]=Dn.getMonth(),dn()[Wn+20>>2>>>0]=Dn.getFullYear()-1900,dn()[Wn+24>>2>>>0]=Dn.getDay();var tr=new Date(Dn.getFullYear(),0,1),ur=(Dn.getTime()-tr.getTime())/864e5|0;dn()[Wn+28>>2>>>0]=ur,dn()[Wn+36>>2>>>0]=-60*Dn.getTimezoneOffset(),ur=new Date(Dn.getFullYear(),6,1).getTimezoneOffset(),Dn=0|(ur!=(tr=tr.getTimezoneOffset())&&Dn.getTimezoneOffset()==Math.min(tr,ur)),dn()[Wn+32>>2>>>0]=Dn},Ra:function(Dn){var Wn=new Date(dn()[Dn+20>>2>>>0]+1900,dn()[Dn+16>>2>>>0],dn()[Dn+12>>2>>>0],dn()[Dn+8>>2>>>0],dn()[Dn+4>>2>>>0],dn()[Dn>>2>>>0],0),tr=dn()[Dn+32>>2>>>0],ur=Wn.getTimezoneOffset(),_r=new Date(Wn.getFullYear(),0,1),Ar=new Date(Wn.getFullYear(),6,1).getTimezoneOffset(),rs=_r.getTimezoneOffset(),xs=Math.min(rs,Ar);return 0>tr?dn()[Dn+32>>2>>>0]=+(Ar!=rs&&xs==ur):0<tr!=(xs==ur)&&(Ar=Math.max(rs,Ar),Wn.setTime(Wn.getTime()+6e4*((0<tr?xs:Ar)-ur))),dn()[Dn+24>>2>>>0]=Wn.getDay(),tr=(Wn.getTime()-_r.getTime())/864e5|0,dn()[Dn+28>>2>>>0]=tr,dn()[Dn>>2>>>0]=Wn.getSeconds(),dn()[Dn+4>>2>>>0]=Wn.getMinutes(),dn()[Dn+8>>2>>>0]=Wn.getHours(),dn()[Dn+12>>2>>>0]=Wn.getDate(),dn()[Dn+16>>2>>>0]=Wn.getMonth(),Wn.getTime()/1e3|0},Aa:kr,Ba:Pr,Sa:function Dn(Wn,tr,ur){Dn.Ac||(Dn.Ac=!0,gs(Wn,tr,ur))},y:function(){os("")},U:function(){if(!Sn&&!Pn){var Dn="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";ns||(ns={}),ns[Dn]||(ns[Dn]=1,Sn&&(Dn="warning: "+Dn),qn(Dn))}},ra:function(){return 4294901760},B:ks,Ia:function(Dn,Wn,tr){un().copyWithin(Dn>>>0,Wn>>>0,Wn+tr>>>0)},F:function(){return Sn?en(3993).cpus().length:navigator.hardwareConcurrency},Da:function(Dn,Wn,tr){Gs.length=Wn,tr>>=3;for(var ur=0;ur<Wn;ur++)Gs[ur]=hn()[tr+ur>>>0];return(0>Dn?Ir[-Dn-1]:Al[Dn]).apply(null,Gs)},qa:function(Dn){var Wn=un().length;if((Dn>>>=0)<=Wn||4294901760<Dn)return!1;for(var tr=1;4>=tr;tr*=2){var ur=Wn*(1+.2/tr);ur=Math.min(ur,Dn+100663296);var _r=Math;ur=Math.max(Dn,ur),_r=_r.min.call(_r,4294901760,ur+(65536-ur%65536)%65536);e:{try{Qn.grow(_r-lr.byteLength+65535>>>16),Cr(Qn.buffer);var Ar=1;break e}catch{}Ar=void 0}if(Ar)return!0}return!1},Na:function(){throw"unwind"},Ga:Nr,Ha:Ps,J:As,I:Ys,S:Io,ga:Ho,R:Pu,d:function(){return oo},na:function Dn(Wn,tr){Dn.lc||(Dn.lc=function(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var _r=new Uint8Array(1);return()=>(crypto.getRandomValues(_r),_r[0])}if(Sn)try{var Ar=en(Object(function(){var rs=new Error("Cannot find module 'crypto'");throw rs.code="MODULE_NOT_FOUND",rs}()));return()=>Ar.randomBytes(1)[0]}catch{}return()=>os("randomDevice")}());for(var ur=0;ur<tr;ur++)on()[Wn+ur>>0>>>0]=Dn.lc();return 0},ia:function(Dn,Wn,tr){var ur=Ls();try{return Dr(Dn)(Wn,tr)}catch(_r){if(Os(ur),_r!==_r+0)throw _r;Ms(1,0)}},ja:function(Dn,Wn,tr){var ur=Ls();try{return Dr(Dn)(Wn,tr)}catch(_r){if(Os(ur),_r!==_r+0)throw _r;Ms(1,0)}},K:function(Dn){var Wn=Ls();try{return Dr(Dn)()}catch(tr){if(Os(Wn),tr!==tr+0)throw tr;Ms(1,0)}},f:function(Dn,Wn){var tr=Ls();try{return Dr(Dn)(Wn)}catch(ur){if(Os(tr),ur!==ur+0)throw ur;Ms(1,0)}},P:function(Dn,Wn,tr){var ur=Ls();try{return Dr(Dn)(Wn,tr)}catch(_r){if(Os(ur),_r!==_r+0)throw _r;Ms(1,0)}},Q:function(Dn,Wn,tr){var ur=Ls();try{return Dr(Dn)(Wn,tr)}catch(_r){if(Os(ur),_r!==_r+0)throw _r;Ms(1,0)}},k:function(Dn,Wn,tr){var ur=Ls();try{return Dr(Dn)(Wn,tr)}catch(_r){if(Os(ur),_r!==_r+0)throw _r;Ms(1,0)}},p:function(Dn,Wn,tr,ur){var _r=Ls();try{return Dr(Dn)(Wn,tr,ur)}catch(Ar){if(Os(_r),Ar!==Ar+0)throw Ar;Ms(1,0)}},q:function(Dn,Wn,tr,ur,_r){var Ar=Ls();try{return Dr(Dn)(Wn,tr,ur,_r)}catch(rs){if(Os(Ar),rs!==rs+0)throw rs;Ms(1,0)}},N:function(Dn,Wn,tr,ur,_r,Ar){var rs=Ls();try{return Dr(Dn)(Wn,tr,ur,_r,Ar)}catch(xs){if(Os(rs),xs!==xs+0)throw xs;Ms(1,0)}},s:function(Dn,Wn,tr,ur,_r,Ar){var rs=Ls();try{return Dr(Dn)(Wn,tr,ur,_r,Ar)}catch(xs){if(Os(rs),xs!==xs+0)throw xs;Ms(1,0)}},w:function(Dn,Wn,tr,ur,_r,Ar,rs){var xs=Ls();try{return Dr(Dn)(Wn,tr,ur,_r,Ar,rs)}catch(Is){if(Os(xs),Is!==Is+0)throw Is;Ms(1,0)}},L:function(Dn,Wn,tr,ur,_r,Ar,rs,xs){var Is=Ls();try{return Dr(Dn)(Wn,tr,ur,_r,Ar,rs,xs)}catch($s){if(Os(Is),$s!==$s+0)throw $s;Ms(1,0)}},E:function(Dn,Wn,tr,ur,_r,Ar,rs,xs,Is,$s,Ks,Uo){var To=Ls();try{return Dr(Dn)(Wn,tr,ur,_r,Ar,rs,xs,Is,$s,Ks,Uo)}catch(jr){if(Os(To),jr!==jr+0)throw jr;Ms(1,0)}},aa:function(Dn,Wn,tr,ur,_r,Ar,rs,xs){var Is=Ls();try{return Nl(Dn,Wn,tr,ur,_r,Ar,rs,xs)}catch($s){if(Os(Is),$s!==$s+0)throw $s;Ms(1,0)}},_:function(Dn,Wn,tr,ur,_r,Ar,rs){var xs=Ls();try{return Ul(Dn,Wn,tr,ur,_r,Ar,rs)}catch(Is){if(Os(xs),Is!==Is+0)throw Is;Ms(1,0)}},Z:function(Dn,Wn,tr,ur,_r){var Ar=Ls();try{return Cl(Dn,Wn,tr,ur,_r)}catch(rs){if(Os(Ar),rs!==rs+0)throw rs;Ms(1,0)}},ca:function(Dn,Wn,tr,ur){var _r=Ls();try{return Ku(Dn,Wn,tr,ur)}catch(Ar){if(Os(_r),Ar!==Ar+0)throw Ar;Ms(1,0)}},$:function(Dn){var Wn=Ls();try{return Hu(Dn)}catch(tr){if(Os(Wn),tr!==tr+0)throw tr;Ms(1,0)}},ba:function(Dn,Wn){var tr=Ls();try{return Xu(Dn,Wn)}catch(ur){if(Os(tr),ur!==ur+0)throw ur;Ms(1,0)}},Y:function(Dn,Wn,tr){var ur=Ls();try{return hu(Dn,Wn,tr)}catch(_r){if(Os(ur),_r!==_r+0)throw _r;Ms(1,0)}},g:function(Dn){var Wn=Ls();try{Dr(Dn)()}catch(tr){if(Os(Wn),tr!==tr+0)throw tr;Ms(1,0)}},r:function(Dn,Wn){var tr=Ls();try{Dr(Dn)(Wn)}catch(ur){if(Os(tr),ur!==ur+0)throw ur;Ms(1,0)}},i:function(Dn,Wn,tr){var ur=Ls();try{Dr(Dn)(Wn,tr)}catch(_r){if(Os(ur),_r!==_r+0)throw _r;Ms(1,0)}},ha:function(Dn,Wn,tr,ur){var _r=Ls();try{Dr(Dn)(Wn,tr,ur)}catch(Ar){if(Os(_r),Ar!==Ar+0)throw Ar;Ms(1,0)}},m:function(Dn,Wn,tr,ur){var _r=Ls();try{Dr(Dn)(Wn,tr,ur)}catch(Ar){if(Os(_r),Ar!==Ar+0)throw Ar;Ms(1,0)}},v:function(Dn,Wn,tr,ur,_r){var Ar=Ls();try{Dr(Dn)(Wn,tr,ur,_r)}catch(rs){if(Os(Ar),rs!==rs+0)throw rs;Ms(1,0)}},u:function(Dn,Wn,tr,ur,_r,Ar){var rs=Ls();try{Dr(Dn)(Wn,tr,ur,_r,Ar)}catch(xs){if(Os(rs),xs!==xs+0)throw xs;Ms(1,0)}},O:function(Dn,Wn,tr,ur,_r,Ar,rs){var xs=Ls();try{Dr(Dn)(Wn,tr,ur,_r,Ar,rs)}catch(Is){if(Os(xs),Is!==Is+0)throw Is;Ms(1,0)}},A:function(Dn,Wn,tr,ur,_r,Ar,rs,xs){var Is=Ls();try{Dr(Dn)(Wn,tr,ur,_r,Ar,rs,xs)}catch($s){if(Os(Is),$s!==$s+0)throw $s;Ms(1,0)}},ka:function(Dn,Wn,tr,ur,_r,Ar,rs,xs,Is){var $s=Ls();try{Dr(Dn)(Wn,tr,ur,_r,Ar,rs,xs,Is)}catch(Ks){if(Os($s),Ks!==Ks+0)throw Ks;Ms(1,0)}},C:function(Dn,Wn,tr,ur,_r,Ar,rs,xs,Is,$s,Ks){var Uo=Ls();try{Dr(Dn)(Wn,tr,ur,_r,Ar,rs,xs,Is,$s,Ks)}catch(To){if(Os(Uo),To!==To+0)throw To;Ms(1,0)}},D:function(Dn,Wn,tr,ur,_r,Ar,rs,xs,Is,$s,Ks,Uo,To,jr,Ds,Qs){var Jo=Ls();try{Dr(Dn)(Wn,tr,ur,_r,Ar,rs,xs,Is,$s,Ks,Uo,To,jr,Ds,Qs)}catch(Dl){if(Os(Jo),Dl!==Dl+0)throw Dl;Ms(1,0)}},fa:function(Dn,Wn,tr,ur,_r,Ar,rs,xs){var Is=Ls();try{Wu(Dn,Wn,tr,ur,_r,Ar,rs,xs)}catch($s){if(Os(Is),$s!==$s+0)throw $s;Ms(1,0)}},da:function(Dn,Wn,tr,ur,_r,Ar,rs,xs,Is,$s,Ks,Uo){var To=Ls();try{Yu(Dn,Wn,tr,ur,_r,Ar,rs,xs,Is,$s,Ks,Uo)}catch(jr){if(Os(To),jr!==jr+0)throw jr;Ms(1,0)}},ea:function(Dn,Wn,tr,ur,_r,Ar){var rs=Ls();try{js(Dn,Wn,tr,ur,_r,Ar)}catch(xs){if(Os(rs),xs!==xs+0)throw xs;Ms(1,0)}},o:function(Dn){return Dn},a:Qn||an.wasmMemory,G:function(Dn){oo=Dn},la:Nu,z:function(Dn,Wn,tr,ur){return Nu(Dn,Wn,tr,ur)}};(function(){function Dn(_r,Ar){an.asm=_r.exports,Jr.qc.push(an.asm.sb),Zn=an.asm.ub,hs.unshift(an.asm.Va),zn=Ar,Cn||(Qr--,an.monitorRunDependencies&&an.monitorRunDependencies(Qr),Qr==0&&fs&&(_r=fs,fs=null,_r()))}function Wn(_r){Dn(_r.instance,_r.module)}function tr(_r){return function(){if(!Bn&&(An||Pn)){if(typeof fetch=="function"&&!Fr.startsWith("file://"))return fetch(Fr,{credentials:"same-origin"}).then(function(Ar){if(!Ar.ok)throw"failed to load wasm binary file at '"+Fr+"'";return Ar.arrayBuffer()}).catch(function(){return Or()});if(mn)return new Promise(function(Ar,rs){mn(Fr,function(xs){Ar(new Uint8Array(xs))},rs)})}return Promise.resolve().then(function(){return Or()})}().then(function(Ar){return WebAssembly.instantiate(Ar,ur)}).then(function(Ar){return Ar}).then(_r,function(Ar){qn("failed to asynchronously prepare wasm: "+Ar),os(Ar)})}var ur={a:uu};if(Cn||(Qr++,an.monitorRunDependencies&&an.monitorRunDependencies(Qr)),an.instantiateWasm)try{return an.instantiateWasm(ur,Dn)}catch(_r){return qn("Module.instantiateWasm callback failed with error: "+_r),!1}(Bn||typeof WebAssembly.instantiateStreaming!="function"||xr()||Fr.startsWith("file://")||Sn||typeof fetch!="function"?tr(Wn):fetch(Fr,{credentials:"same-origin"}).then(function(_r){return WebAssembly.instantiateStreaming(_r,ur).then(Wn,function(Ar){return qn("wasm streaming compile failed: "+Ar),qn("falling back to ArrayBuffer instantiation"),tr(Wn)})})).catch(cn)})(),an.___wasm_call_ctors=function(){return(an.___wasm_call_ctors=an.asm.Va).apply(null,arguments)},an._OrtInit=function(){return(an._OrtInit=an.asm.Wa).apply(null,arguments)},an._OrtCreateSessionOptions=function(){return(an._OrtCreateSessionOptions=an.asm.Xa).apply(null,arguments)},an._OrtAppendExecutionProvider=function(){return(an._OrtAppendExecutionProvider=an.asm.Ya).apply(null,arguments)},an._OrtAddSessionConfigEntry=function(){return(an._OrtAddSessionConfigEntry=an.asm.Za).apply(null,arguments)},an._OrtReleaseSessionOptions=function(){return(an._OrtReleaseSessionOptions=an.asm._a).apply(null,arguments)},an._OrtCreateSession=function(){return(an._OrtCreateSession=an.asm.$a).apply(null,arguments)},an._OrtReleaseSession=function(){return(an._OrtReleaseSession=an.asm.ab).apply(null,arguments)},an._OrtGetInputCount=function(){return(an._OrtGetInputCount=an.asm.bb).apply(null,arguments)},an._OrtGetOutputCount=function(){return(an._OrtGetOutputCount=an.asm.cb).apply(null,arguments)},an._OrtGetInputName=function(){return(an._OrtGetInputName=an.asm.db).apply(null,arguments)},an._OrtGetOutputName=function(){return(an._OrtGetOutputName=an.asm.eb).apply(null,arguments)},an._OrtFree=function(){return(an._OrtFree=an.asm.fb).apply(null,arguments)},an._OrtCreateTensor=function(){return(an._OrtCreateTensor=an.asm.gb).apply(null,arguments)},an._OrtGetTensorData=function(){return(an._OrtGetTensorData=an.asm.hb).apply(null,arguments)},an._OrtReleaseTensor=function(){return(an._OrtReleaseTensor=an.asm.ib).apply(null,arguments)},an._OrtCreateRunOptions=function(){return(an._OrtCreateRunOptions=an.asm.jb).apply(null,arguments)},an._OrtAddRunConfigEntry=function(){return(an._OrtAddRunConfigEntry=an.asm.kb).apply(null,arguments)},an._OrtReleaseRunOptions=function(){return(an._OrtReleaseRunOptions=an.asm.lb).apply(null,arguments)},an._OrtRun=function(){return(an._OrtRun=an.asm.mb).apply(null,arguments)},an._OrtEndProfiling=function(){return(an._OrtEndProfiling=an.asm.nb).apply(null,arguments)};var Wl=an._pthread_self=function(){return(Wl=an._pthread_self=an.asm.ob).apply(null,arguments)},zo=an._malloc=function(){return(zo=an._malloc=an.asm.pb).apply(null,arguments)},go=an._free=function(){return(go=an._free=an.asm.qb).apply(null,arguments)},Pl=an._fflush=function(){return(Pl=an._fflush=an.asm.rb).apply(null,arguments)};an.__emscripten_tls_init=function(){return(an.__emscripten_tls_init=an.asm.sb).apply(null,arguments)};var ju=an.___funcs_on_exit=function(){return(ju=an.___funcs_on_exit=an.asm.tb).apply(null,arguments)},qu=an.__emscripten_thread_init=function(){return(qu=an.__emscripten_thread_init=an.asm.vb).apply(null,arguments)};an.__emscripten_thread_crashed=function(){return(an.__emscripten_thread_crashed=an.asm.wb).apply(null,arguments)};var cu,ba=an._emscripten_run_in_main_runtime_thread_js=function(){return(ba=an._emscripten_run_in_main_runtime_thread_js=an.asm.xb).apply(null,arguments)},Cu=an.__emscripten_proxy_execute_task_queue=function(){return(Cu=an.__emscripten_proxy_execute_task_queue=an.asm.yb).apply(null,arguments)},du=an.__emscripten_thread_free_data=function(){return(du=an.__emscripten_thread_free_data=an.asm.zb).apply(null,arguments)},Yl=an.__emscripten_thread_exit=function(){return(Yl=an.__emscripten_thread_exit=an.asm.Ab).apply(null,arguments)},Ms=an._setThrew=function(){return(Ms=an._setThrew=an.asm.Bb).apply(null,arguments)},Gu=an._emscripten_stack_set_limits=function(){return(Gu=an._emscripten_stack_set_limits=an.asm.Cb).apply(null,arguments)},Ls=an.stackSave=function(){return(Ls=an.stackSave=an.asm.Db).apply(null,arguments)},Os=an.stackRestore=function(){return(Os=an.stackRestore=an.asm.Eb).apply(null,arguments)},Kl=an.stackAlloc=function(){return(Kl=an.stackAlloc=an.asm.Fb).apply(null,arguments)},Xl=an.___cxa_can_catch=function(){return(Xl=an.___cxa_can_catch=an.asm.Gb).apply(null,arguments)},Zo=an.___cxa_is_pointer_type=function(){return(Zo=an.___cxa_is_pointer_type=an.asm.Hb).apply(null,arguments)},Hu=an.dynCall_j=function(){return(Hu=an.dynCall_j=an.asm.Ib).apply(null,arguments)},Ul=an.dynCall_iiiiij=function(){return(Ul=an.dynCall_iiiiij=an.asm.Jb).apply(null,arguments)},hu=an.dynCall_jii=function(){return(hu=an.dynCall_jii=an.asm.Kb).apply(null,arguments)},Wu=an.dynCall_viiiiij=function(){return(Wu=an.dynCall_viiiiij=an.asm.Lb).apply(null,arguments)},js=an.dynCall_vjji=function(){return(js=an.dynCall_vjji=an.asm.Mb).apply(null,arguments)},Yu=an.dynCall_viiijjjii=function(){return(Yu=an.dynCall_viiijjjii=an.asm.Nb).apply(null,arguments)},Ku=an.dynCall_iij=function(){return(Ku=an.dynCall_iij=an.asm.Ob).apply(null,arguments)},Xu=an.dynCall_ji=function(){return(Xu=an.dynCall_ji=an.asm.Pb).apply(null,arguments)},Nl=an.dynCall_iiiiiij=function(){return(Nl=an.dynCall_iiiiiij=an.asm.Qb).apply(null,arguments)},Cl=an.dynCall_iiij=function(){return(Cl=an.dynCall_iiij=an.asm.Rb).apply(null,arguments)};function Qu(){function Dn(){if(!cu&&(cu=!0,an.calledRun=!0,!cr)&&(Cn||Ss(hs),rn(an),an.onRuntimeInitialized&&an.onRuntimeInitialized(),!Cn)){if(an.postRun)for(typeof an.postRun=="function"&&(an.postRun=[an.postRun]);an.postRun.length;){var Wn=an.postRun.shift();zr.unshift(Wn)}Ss(zr)}}if(!(0<Qr))if(Cn)rn(an),Cn||Ss(hs),postMessage({cmd:"loaded"});else{if(an.preRun)for(typeof an.preRun=="function"&&(an.preRun=[an.preRun]);an.preRun.length;)wr();Ss(Xr),0<Qr||(an.setStatus?(an.setStatus("Running..."),setTimeout(function(){setTimeout(function(){an.setStatus("")},1),Dn()},1)):Dn())}}if(an.UTF8ToString=Er,an.stringToUTF8=function(Dn,Wn,tr){return Rr(Dn,un(),Wn,tr)},an.lengthBytesUTF8=Kr,an.keepRuntimeAlive=ls,an.wasmMemory=Qn,an.stackSave=Ls,an.stackRestore=Os,an.stackAlloc=Kl,an.ExitStatus=$r,an.PThread=Jr,fs=function Dn(){cu||Qu(),cu||(fs=Dn)},an.preInit)for(typeof an.preInit=="function"&&(an.preInit=[an.preInit]);0<an.preInit.length;)an.preInit.pop()();return Qu(),sn.ready});St.exports=nn},932:(St,e,en)=>{var tn,nn=(tn=(tn=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(sn){var on,un,dn;sn=sn||{},on||(on=sn!==void 0?sn:{}),on.ready=new Promise(function(Kn,or){un=Kn,dn=or});var fn,hn,an,rn,cn,pn,mn=Object.assign({},on),xn="./this.program",gn=(Kn,or)=>{throw or},yn=typeof window=="object",bn=typeof importScripts=="function",wn=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",_n="";wn?(_n=bn?en(908).dirname(_n)+"/":"//",pn=()=>{cn||(rn=en(1384),cn=en(908))},fn=function(Kn,or){return pn(),Kn=cn.normalize(Kn),rn.readFileSync(Kn,or?void 0:"utf8")},an=Kn=>((Kn=fn(Kn,!0)).buffer||(Kn=new Uint8Array(Kn)),Kn),hn=(Kn,or,hr)=>{pn(),Kn=cn.normalize(Kn),rn.readFile(Kn,function(mr,kr){mr?hr(mr):or(kr.buffer)})},1<process.argv.length&&(xn=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(Kn){if(!(Kn instanceof hs))throw Kn}),process.on("unhandledRejection",function(Kn){throw Kn}),gn=(Kn,or)=>{if(Sn||0<gr)throw process.exitCode=Kn,or;or instanceof hs||Pn("exiting due to exception: "+or),process.exit(Kn)},on.inspect=function(){return"[Emscripten Module object]"}):(yn||bn)&&(bn?_n=self.location.href:typeof document<"u"&&document.currentScript&&(_n=document.currentScript.src),tn&&(_n=tn),_n=_n.indexOf("blob:")!==0?_n.substr(0,_n.replace(/[?#].*/,"").lastIndexOf("/")+1):"",fn=Kn=>{var or=new XMLHttpRequest;return or.open("GET",Kn,!1),or.send(null),or.responseText},bn&&(an=Kn=>{var or=new XMLHttpRequest;return or.open("GET",Kn,!1),or.responseType="arraybuffer",or.send(null),new Uint8Array(or.response)}),hn=(Kn,or,hr)=>{var mr=new XMLHttpRequest;mr.open("GET",Kn,!0),mr.responseType="arraybuffer",mr.onload=()=>{mr.status==200||mr.status==0&&mr.response?or(mr.response):hr()},mr.onerror=hr,mr.send(null)});var Tn,An=on.print||console.log.bind(console),Pn=on.printErr||console.warn.bind(console);Object.assign(on,mn),mn=null,on.thisProgram&&(xn=on.thisProgram),on.quit&&(gn=on.quit),on.wasmBinary&&(Tn=on.wasmBinary);var Sn=on.noExitRuntime||!1;typeof WebAssembly!="object"&&Cr("no native wasm support detected");var Cn,Nn,Mn,Fn,In,Bn,Ln=!1,qn=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Yn(Kn,or,hr){var mr=(or>>>=0)+hr;for(hr=or;Kn[hr]&&!(hr>=mr);)++hr;if(16<hr-or&&Kn.buffer&&qn)return qn.decode(Kn.subarray(or,hr));for(mr="";or<hr;){var kr=Kn[or++];if(128&kr){var Pr=63&Kn[or++];if((224&kr)==192)mr+=String.fromCharCode((31&kr)<<6|Pr);else{var _i=63&Kn[or++];65536>(kr=(240&kr)==224?(15&kr)<<12|Pr<<6|_i:(7&kr)<<18|Pr<<12|_i<<6|63&Kn[or++])?mr+=String.fromCharCode(kr):(kr-=65536,mr+=String.fromCharCode(55296|kr>>10,56320|1023&kr))}}else mr+=String.fromCharCode(kr)}return mr}function Qn(Kn,or){return(Kn>>>=0)?Yn(Fn,Kn,or):""}function zn(Kn,or,hr,mr){if(!(0<mr))return 0;var kr=hr>>>=0;mr=hr+mr-1;for(var Pr=0;Pr<Kn.length;++Pr){var _i=Kn.charCodeAt(Pr);if(55296<=_i&&57343>=_i&&(_i=65536+((1023&_i)<<10)|1023&Kn.charCodeAt(++Pr)),127>=_i){if(hr>=mr)break;or[hr++>>>0]=_i}else{if(2047>=_i){if(hr+1>=mr)break;or[hr++>>>0]=192|_i>>6}else{if(65535>=_i){if(hr+2>=mr)break;or[hr++>>>0]=224|_i>>12}else{if(hr+3>=mr)break;or[hr++>>>0]=240|_i>>18,or[hr++>>>0]=128|_i>>12&63}or[hr++>>>0]=128|_i>>6&63}or[hr++>>>0]=128|63&_i}}return or[hr>>>0]=0,hr-kr}function lr(Kn){for(var or=0,hr=0;hr<Kn.length;++hr){var mr=Kn.charCodeAt(hr);127>=mr?or++:2047>=mr?or+=2:55296<=mr&&57343>=mr?(or+=4,++hr):or+=3}return or}function $n(){var Kn=Cn.buffer;Nn=Kn,on.HEAP8=Mn=new Int8Array(Kn),on.HEAP16=new Int16Array(Kn),on.HEAP32=In=new Int32Array(Kn),on.HEAPU8=Fn=new Uint8Array(Kn),on.HEAPU16=new Uint16Array(Kn),on.HEAPU32=Bn=new Uint32Array(Kn),on.HEAPF32=new Float32Array(Kn),on.HEAPF64=new Float64Array(Kn)}var On,er=[],sr=[],ar=[],cr=[],gr=0;function vr(){var Kn=on.preRun.shift();er.unshift(Kn)}var Er,Rr=0,Kr=null;function Cr(Kn){throw on.onAbort&&on.onAbort(Kn),Pn(Kn="Aborted("+Kn+")"),Ln=!0,Kn=new WebAssembly.RuntimeError(Kn+". Build with -sASSERTIONS for more info."),dn(Kn),Kn}function Gr(){return Er.startsWith("data:application/octet-stream;base64,")}if(Er="ort-wasm.wasm",!Gr()){var Zn=Er;Er=on.locateFile?on.locateFile(Zn,_n):_n+Zn}function Xr(){var Kn=Er;try{if(Kn==Er&&Tn)return new Uint8Array(Tn);if(an)return an(Kn);throw"both async and sync fetching of the wasm failed"}catch(or){Cr(or)}}function hs(Kn){this.name="ExitStatus",this.message="Program terminated with exit("+Kn+")",this.status=Kn}function us(Kn){for(;0<Kn.length;)Kn.shift()(on)}var zr=[],ls=0,wr=0;function Fr(Kn){this.Db=Kn,this.zb=Kn-24,this.Ub=function(or){Bn[this.zb+4>>2>>>0]=or},this.Eb=function(){return Bn[this.zb+4>>2>>>0]},this.Sb=function(or){Bn[this.zb+8>>2>>>0]=or},this.Wb=function(){return Bn[this.zb+8>>2>>>0]},this.Tb=function(){In[this.zb>>2>>>0]=0},this.Ib=function(or){Mn[this.zb+12>>0>>>0]=or?1:0},this.Pb=function(){return Mn[this.zb+12>>0>>>0]!=0},this.Jb=function(or){Mn[this.zb+13>>0>>>0]=or?1:0},this.Lb=function(){return Mn[this.zb+13>>0>>>0]!=0},this.Rb=function(or,hr){this.Fb(0),this.Ub(or),this.Sb(hr),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){In[this.zb>>2>>>0]+=1},this.Xb=function(){var or=In[this.zb>>2>>>0];return In[this.zb>>2>>>0]=or-1,or===1},this.Fb=function(or){Bn[this.zb+16>>2>>>0]=or},this.Ob=function(){return Bn[this.zb+16>>2>>>0]},this.Qb=function(){if(Co(this.Eb()))return Bn[this.Db>>2>>>0];var or=this.Ob();return or!==0?or:this.Db}}function Qr(Kn){return ns(new Fr(Kn).zb)}var fs=[];function os(Kn){var or=fs[Kn];return or||(Kn>=fs.length&&(fs.length=Kn+1),fs[Kn]=or=On.get(Kn)),or}function xr(Kn){var or=lr(Kn)+1,hr=Dr(or);return hr&&zn(Kn,Mn,hr,or),hr}var Or={};function Ir(){if(!$r){var Kn,or={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:xn||"./this.program"};for(Kn in Or)Or[Kn]===void 0?delete or[Kn]:or[Kn]=Or[Kn];var hr=[];for(Kn in or)hr.push(Kn+"="+or[Kn]);$r=hr}return $r}var $r,ss=[null,[],[]];function as(Kn,or){var hr=ss[Kn];or===0||or===10?((Kn===1?An:Pn)(Yn(hr,0)),hr.length=0):hr.push(or)}var Ns=0;function As(Kn){return Kn%4==0&&(Kn%100!=0||Kn%400==0)}var Jr=[31,29,31,30,31,30,31,31,30,31,30,31],Ss=[31,28,31,30,31,30,31,31,30,31,30,31];function es(Kn,or,hr,mr){function kr(Nr,Ps,Ys){for(Nr=typeof Nr=="number"?Nr.toString():Nr||"";Nr.length<Ps;)Nr=Ys[0]+Nr;return Nr}function Pr(Nr,Ps){return kr(Nr,Ps,"0")}function _i(Nr,Ps){function Ys(Ho){return 0>Ho?-1:0<Ho?1:0}var Io;return(Io=Ys(Nr.getFullYear()-Ps.getFullYear()))===0&&(Io=Ys(Nr.getMonth()-Ps.getMonth()))===0&&(Io=Ys(Nr.getDate()-Ps.getDate())),Io}function gs(Nr){switch(Nr.getDay()){case 0:return new Date(Nr.getFullYear()-1,11,29);case 1:return Nr;case 2:return new Date(Nr.getFullYear(),0,3);case 3:return new Date(Nr.getFullYear(),0,2);case 4:return new Date(Nr.getFullYear(),0,1);case 5:return new Date(Nr.getFullYear()-1,11,31);case 6:return new Date(Nr.getFullYear()-1,11,30)}}function ds(Nr){var Ps=Nr.Bb;for(Nr=new Date(new Date(Nr.Cb+1900,0,1).getTime());0<Ps;){var Ys=Nr.getMonth(),Io=(As(Nr.getFullYear())?Jr:Ss)[Ys];if(!(Ps>Io-Nr.getDate())){Nr.setDate(Nr.getDate()+Ps);break}Ps-=Io-Nr.getDate()+1,Nr.setDate(1),11>Ys?Nr.setMonth(Ys+1):(Nr.setMonth(0),Nr.setFullYear(Nr.getFullYear()+1))}return Ys=new Date(Nr.getFullYear()+1,0,4),Ps=gs(new Date(Nr.getFullYear(),0,4)),Ys=gs(Ys),0>=_i(Ps,Nr)?0>=_i(Ys,Nr)?Nr.getFullYear()+1:Nr.getFullYear():Nr.getFullYear()-1}var Cs=In[mr+40>>2>>>0];for(var Gs in mr={$b:In[mr>>2>>>0],Zb:In[mr+4>>2>>>0],Gb:In[mr+8>>2>>>0],Kb:In[mr+12>>2>>>0],Hb:In[mr+16>>2>>>0],Cb:In[mr+20>>2>>>0],Ab:In[mr+24>>2>>>0],Bb:In[mr+28>>2>>>0],bc:In[mr+32>>2>>>0],Yb:In[mr+36>>2>>>0],ac:Cs?Qn(Cs):""},hr=Qn(hr),Cs={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})hr=hr.replace(new RegExp(Gs,"g"),Cs[Gs]);var uo="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),co="January February March April May June July August September October November December".split(" ");for(Gs in Cs={"%a":function(Nr){return uo[Nr.Ab].substring(0,3)},"%A":function(Nr){return uo[Nr.Ab]},"%b":function(Nr){return co[Nr.Hb].substring(0,3)},"%B":function(Nr){return co[Nr.Hb]},"%C":function(Nr){return Pr((Nr.Cb+1900)/100|0,2)},"%d":function(Nr){return Pr(Nr.Kb,2)},"%e":function(Nr){return kr(Nr.Kb,2," ")},"%g":function(Nr){return ds(Nr).toString().substring(2)},"%G":function(Nr){return ds(Nr)},"%H":function(Nr){return Pr(Nr.Gb,2)},"%I":function(Nr){return(Nr=Nr.Gb)==0?Nr=12:12<Nr&&(Nr-=12),Pr(Nr,2)},"%j":function(Nr){for(var Ps=0,Ys=0;Ys<=Nr.Hb-1;Ps+=(As(Nr.Cb+1900)?Jr:Ss)[Ys++]);return Pr(Nr.Kb+Ps,3)},"%m":function(Nr){return Pr(Nr.Hb+1,2)},"%M":function(Nr){return Pr(Nr.Zb,2)},"%n":function(){return`
`},"%p":function(Nr){return 0<=Nr.Gb&&12>Nr.Gb?"AM":"PM"},"%S":function(Nr){return Pr(Nr.$b,2)},"%t":function(){return"	"},"%u":function(Nr){return Nr.Ab||7},"%U":function(Nr){return Pr(Math.floor((Nr.Bb+7-Nr.Ab)/7),2)},"%V":function(Nr){var Ps=Math.floor((Nr.Bb+7-(Nr.Ab+6)%7)/7);if(2>=(Nr.Ab+371-Nr.Bb-2)%7&&Ps++,Ps)Ps==53&&((Ys=(Nr.Ab+371-Nr.Bb)%7)==4||Ys==3&&As(Nr.Cb)||(Ps=1));else{Ps=52;var Ys=(Nr.Ab+7-Nr.Bb-1)%7;(Ys==4||Ys==5&&As(Nr.Cb%400-1))&&Ps++}return Pr(Ps,2)},"%w":function(Nr){return Nr.Ab},"%W":function(Nr){return Pr(Math.floor((Nr.Bb+7-(Nr.Ab+6)%7)/7),2)},"%y":function(Nr){return(Nr.Cb+1900).toString().substring(2)},"%Y":function(Nr){return Nr.Cb+1900},"%z":function(Nr){var Ps=0<=(Nr=Nr.Yb);return Nr=Math.abs(Nr)/60,(Ps?"+":"-")+("0000"+(Nr/60*100+Nr%60)).slice(-4)},"%Z":function(Nr){return Nr.ac},"%%":function(){return"%"}},hr=hr.replace(/%%/g,"\0\0"),Cs)hr.includes(Gs)&&(hr=hr.replace(new RegExp(Gs,"g"),Cs[Gs](mr)));return Gs=function(Nr){var Ps=Array(lr(Nr)+1);return zn(Nr,Ps,0,Ps.length),Ps}(hr=hr.replace(/\0\0/g,"%")),Gs.length>or?0:(Mn.set(Gs,Kn>>>0),Gs.length-1)}var qr={a:function(Kn){return Dr(Kn+24)+24},m:function(Kn){return(Kn=new Fr(Kn)).Pb()||(Kn.Ib(!0),ls--),Kn.Jb(!1),zr.push(Kn),Kn.Nb(),Kn.Qb()},ia:function(Kn){throw Pn("Unexpected exception thrown, this is not properly supported - aborting"),Ln=!0,Kn},w:function(){Yr(0);var Kn=zr.pop();if(Kn.Xb()&&!Kn.Lb()){var or=Kn.Wb();or&&os(or)(Kn.Db),Qr(Kn.Db)}wr=0},d:function(){var Kn=wr;if(!Kn)return Ns=0;var or=new Fr(Kn);or.Fb(Kn);var hr=or.Eb();if(!hr)return Ns=0,Kn;for(var mr=Array.prototype.slice.call(arguments),kr=0;kr<mr.length;kr++){var Pr=mr[kr];if(Pr===0||Pr===hr)break;if(ho(Pr,hr,or.zb+16))return Ns=Pr,Kn}return Ns=hr,Kn},k:function(){var Kn=wr;if(!Kn)return Ns=0;var or=new Fr(Kn);or.Fb(Kn);var hr=or.Eb();if(!hr)return Ns=0,Kn;for(var mr=Array.prototype.slice.call(arguments),kr=0;kr<mr.length;kr++){var Pr=mr[kr];if(Pr===0||Pr===hr)break;if(ho(Pr,hr,or.zb+16))return Ns=Pr,Kn}return Ns=hr,Kn},g:function(){var Kn=wr;if(!Kn)return Ns=0;var or=new Fr(Kn);or.Fb(Kn);var hr=or.Eb();if(!hr)return Ns=0,Kn;for(var mr=Array.prototype.slice.call(arguments),kr=0;kr<mr.length;kr++){var Pr=mr[kr];if(Pr===0||Pr===hr)break;if(ho(Pr,hr,or.zb+16))return Ns=Pr,Kn}return Ns=hr,Kn},s:Qr,L:function(){var Kn=zr.pop();Kn||Cr("no exception to throw");var or=Kn.Db;throw Kn.Lb()||(zr.push(Kn),Kn.Jb(!0),Kn.Ib(!1),ls++),wr=or,or},b:function(Kn,or,hr){throw new Fr(Kn).Rb(or,hr),wr=Kn,ls++,Kn},la:function(){return ls},i:function(Kn){throw wr||(wr=Kn),Kn},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){Cr("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){Cr("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(Kn,or){Kn=new Date(1e3*(Bn[Kn>>>2]+4294967296*In[Kn+4>>>2])),In[or>>2>>>0]=Kn.getUTCSeconds(),In[or+4>>2>>>0]=Kn.getUTCMinutes(),In[or+8>>2>>>0]=Kn.getUTCHours(),In[or+12>>2>>>0]=Kn.getUTCDate(),In[or+16>>2>>>0]=Kn.getUTCMonth(),In[or+20>>2>>>0]=Kn.getUTCFullYear()-1900,In[or+24>>2>>>0]=Kn.getUTCDay(),In[or+28>>2>>>0]=(Kn.getTime()-Date.UTC(Kn.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(Kn,or){Kn=new Date(1e3*(Bn[Kn>>>2]+4294967296*In[Kn+4>>>2])),In[or>>2>>>0]=Kn.getSeconds(),In[or+4>>2>>>0]=Kn.getMinutes(),In[or+8>>2>>>0]=Kn.getHours(),In[or+12>>2>>>0]=Kn.getDate(),In[or+16>>2>>>0]=Kn.getMonth(),In[or+20>>2>>>0]=Kn.getFullYear()-1900,In[or+24>>2>>>0]=Kn.getDay();var hr=new Date(Kn.getFullYear(),0,1);In[or+28>>2>>>0]=(Kn.getTime()-hr.getTime())/864e5|0,In[or+36>>2>>>0]=-60*Kn.getTimezoneOffset();var mr=new Date(Kn.getFullYear(),6,1).getTimezoneOffset();hr=hr.getTimezoneOffset(),In[or+32>>2>>>0]=0|(mr!=hr&&Kn.getTimezoneOffset()==Math.min(hr,mr))},Fa:function(Kn){var or=new Date(In[Kn+20>>2>>>0]+1900,In[Kn+16>>2>>>0],In[Kn+12>>2>>>0],In[Kn+8>>2>>>0],In[Kn+4>>2>>>0],In[Kn>>2>>>0],0),hr=In[Kn+32>>2>>>0],mr=or.getTimezoneOffset(),kr=new Date(or.getFullYear(),0,1),Pr=new Date(or.getFullYear(),6,1).getTimezoneOffset(),_i=kr.getTimezoneOffset(),gs=Math.min(_i,Pr);return 0>hr?In[Kn+32>>2>>>0]=+(Pr!=_i&&gs==mr):0<hr!=(gs==mr)&&(Pr=Math.max(_i,Pr),or.setTime(or.getTime()+6e4*((0<hr?gs:Pr)-mr))),In[Kn+24>>2>>>0]=or.getDay(),In[Kn+28>>2>>>0]=(or.getTime()-kr.getTime())/864e5|0,In[Kn>>2>>>0]=or.getSeconds(),In[Kn+4>>2>>>0]=or.getMinutes(),In[Kn+8>>2>>>0]=or.getHours(),In[Kn+12>>2>>>0]=or.getDate(),In[Kn+16>>2>>>0]=or.getMonth(),or.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function Kn(or,hr,mr){Kn.Vb||(Kn.Vb=!0,function(kr,Pr,_i){function gs(co){return(co=co.toTimeString().match(/\(([A-Za-z ]+)\)$/))?co[1]:"GMT"}var ds=new Date().getFullYear(),Cs=new Date(ds,0,1),Gs=new Date(ds,6,1);ds=Cs.getTimezoneOffset();var uo=Gs.getTimezoneOffset();In[kr>>2>>>0]=60*Math.max(ds,uo),In[Pr>>2>>>0]=+(ds!=uo),kr=gs(Cs),Pr=gs(Gs),kr=xr(kr),Pr=xr(Pr),uo<ds?(Bn[_i>>2>>>0]=kr,Bn[_i+4>>2>>>0]=Pr):(Bn[_i>>2>>>0]=Pr,Bn[_i+4>>2>>>0]=kr)}(or,hr,mr))},B:function(){Cr("")},ma:function(){return 4294901760},I:wn?()=>{var Kn=process.hrtime();return 1e3*Kn[0]+Kn[1]/1e6}:()=>performance.now(),xa:function(Kn,or,hr){Fn.copyWithin(Kn>>>0,or>>>0,or+hr>>>0)},G:function(Kn){var or=Fn.length;if(4294901760<(Kn>>>=0))return!1;for(var hr=1;4>=hr;hr*=2){var mr=or*(1+.2/hr);mr=Math.min(mr,Kn+100663296);var kr=Math;mr=Math.max(Kn,mr),kr=kr.min.call(kr,4294901760,mr+(65536-mr%65536)%65536);e:{try{Cn.grow(kr-Nn.byteLength+65535>>>16),$n();var Pr=1;break e}catch{}Pr=void 0}if(Pr)return!0}return!1},va:function(Kn,or){var hr=0;return Ir().forEach(function(mr,kr){var Pr=or+hr;for(kr=Bn[Kn+4*kr>>2>>>0]=Pr,Pr=0;Pr<mr.length;++Pr)Mn[kr++>>0>>>0]=mr.charCodeAt(Pr);Mn[kr>>0>>>0]=0,hr+=mr.length+1}),0},wa:function(Kn,or){var hr=Ir();Bn[Kn>>2>>>0]=hr.length;var mr=0;return hr.forEach(function(kr){mr+=kr.length+1}),Bn[or>>2>>>0]=mr,0},ba:function(Kn){Sn||0<gr||(ms(),us(ar),ks(0),ss[1].length&&as(1,10),ss[2].length&&as(2,10)),Sn||0<gr||(on.onExit&&on.onExit(Kn),Ln=!0),gn(Kn,new hs(Kn))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(Kn,or,hr,mr){for(var kr=0,Pr=0;Pr<hr;Pr++){var _i=Bn[or>>2>>>0],gs=Bn[or+4>>2>>>0];or+=8;for(var ds=0;ds<gs;ds++)as(Kn,Fn[_i+ds>>>0]);kr+=gs}return Bn[mr>>2>>>0]=kr,0},c:function(){return Ns},ja:function Kn(or,hr){Kn.Mb||(Kn.Mb=function(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var kr=new Uint8Array(1);return()=>(crypto.getRandomValues(kr),kr[0])}if(wn)try{var Pr=en(Object(function(){var _i=new Error("Cannot find module 'crypto'");throw _i.code="MODULE_NOT_FOUND",_i}()));return()=>Pr.randomBytes(1)[0]}catch{}return()=>Cr("randomDevice")}());for(var mr=0;mr<hr;mr++)Mn[or+mr>>0>>>0]=Kn.Mb();return 0},ea:function(Kn,or,hr){var mr=is();try{return os(Kn)(or,hr)}catch(kr){if(_s(mr),kr!==kr+0)throw kr;Yr(1,0)}},fa:function(Kn,or,hr){var mr=is();try{return os(Kn)(or,hr)}catch(kr){if(_s(mr),kr!==kr+0)throw kr;Yr(1,0)}},J:function(Kn){var or=is();try{return os(Kn)()}catch(hr){if(_s(or),hr!==hr+0)throw hr;Yr(1,0)}},e:function(Kn,or){var hr=is();try{return os(Kn)(or)}catch(mr){if(_s(hr),mr!==mr+0)throw mr;Yr(1,0)}},N:function(Kn,or,hr){var mr=is();try{return os(Kn)(or,hr)}catch(kr){if(_s(mr),kr!==kr+0)throw kr;Yr(1,0)}},O:function(Kn,or,hr){var mr=is();try{return os(Kn)(or,hr)}catch(kr){if(_s(mr),kr!==kr+0)throw kr;Yr(1,0)}},j:function(Kn,or,hr){var mr=is();try{return os(Kn)(or,hr)}catch(kr){if(_s(mr),kr!==kr+0)throw kr;Yr(1,0)}},o:function(Kn,or,hr,mr){var kr=is();try{return os(Kn)(or,hr,mr)}catch(Pr){if(_s(kr),Pr!==Pr+0)throw Pr;Yr(1,0)}},p:function(Kn,or,hr,mr,kr){var Pr=is();try{return os(Kn)(or,hr,mr,kr)}catch(_i){if(_s(Pr),_i!==_i+0)throw _i;Yr(1,0)}},M:function(Kn,or,hr,mr,kr,Pr){var _i=is();try{return os(Kn)(or,hr,mr,kr,Pr)}catch(gs){if(_s(_i),gs!==gs+0)throw gs;Yr(1,0)}},r:function(Kn,or,hr,mr,kr,Pr){var _i=is();try{return os(Kn)(or,hr,mr,kr,Pr)}catch(gs){if(_s(_i),gs!==gs+0)throw gs;Yr(1,0)}},v:function(Kn,or,hr,mr,kr,Pr,_i){var gs=is();try{return os(Kn)(or,hr,mr,kr,Pr,_i)}catch(ds){if(_s(gs),ds!==ds+0)throw ds;Yr(1,0)}},K:function(Kn,or,hr,mr,kr,Pr,_i,gs){var ds=is();try{return os(Kn)(or,hr,mr,kr,Pr,_i,gs)}catch(Cs){if(_s(ds),Cs!==Cs+0)throw Cs;Yr(1,0)}},D:function(Kn,or,hr,mr,kr,Pr,_i,gs,ds,Cs,Gs,uo){var co=is();try{return os(Kn)(or,hr,mr,kr,Pr,_i,gs,ds,Cs,Gs,uo)}catch(Nr){if(_s(co),Nr!==Nr+0)throw Nr;Yr(1,0)}},X:function(Kn,or,hr,mr,kr,Pr,_i,gs){var ds=is();try{return xa(Kn,or,hr,mr,kr,Pr,_i,gs)}catch(Cs){if(_s(ds),Cs!==Cs+0)throw Cs;Yr(1,0)}},V:function(Kn,or,hr,mr,kr,Pr,_i){var gs=is();try{return qo(Kn,or,hr,mr,kr,Pr,_i)}catch(ds){if(_s(gs),ds!==ds+0)throw ds;Yr(1,0)}},U:function(Kn,or,hr,mr,kr){var Pr=is();try{return Qo(Kn,or,hr,mr,kr)}catch(_i){if(_s(Pr),_i!==_i+0)throw _i;Yr(1,0)}},Z:function(Kn,or,hr,mr){var kr=is();try{return lo(Kn,or,hr,mr)}catch(Pr){if(_s(kr),Pr!==Pr+0)throw Pr;Yr(1,0)}},W:function(Kn){var or=is();try{return Ts(Kn)}catch(hr){if(_s(or),hr!==hr+0)throw hr;Yr(1,0)}},Y:function(Kn,or){var hr=is();try{return fo(Kn,or)}catch(mr){if(_s(hr),mr!==mr+0)throw mr;Yr(1,0)}},T:function(Kn,or,hr){var mr=is();try{return Go(Kn,or,hr)}catch(kr){if(_s(mr),kr!==kr+0)throw kr;Yr(1,0)}},f:function(Kn){var or=is();try{os(Kn)()}catch(hr){if(_s(or),hr!==hr+0)throw hr;Yr(1,0)}},q:function(Kn,or){var hr=is();try{os(Kn)(or)}catch(mr){if(_s(hr),mr!==mr+0)throw mr;Yr(1,0)}},h:function(Kn,or,hr){var mr=is();try{os(Kn)(or,hr)}catch(kr){if(_s(mr),kr!==kr+0)throw kr;Yr(1,0)}},da:function(Kn,or,hr,mr){var kr=is();try{os(Kn)(or,hr,mr)}catch(Pr){if(_s(kr),Pr!==Pr+0)throw Pr;Yr(1,0)}},l:function(Kn,or,hr,mr){var kr=is();try{os(Kn)(or,hr,mr)}catch(Pr){if(_s(kr),Pr!==Pr+0)throw Pr;Yr(1,0)}},t:function(Kn,or,hr,mr,kr){var Pr=is();try{os(Kn)(or,hr,mr,kr)}catch(_i){if(_s(Pr),_i!==_i+0)throw _i;Yr(1,0)}},u:function(Kn,or,hr,mr,kr,Pr){var _i=is();try{os(Kn)(or,hr,mr,kr,Pr)}catch(gs){if(_s(_i),gs!==gs+0)throw gs;Yr(1,0)}},x:function(Kn,or,hr,mr,kr,Pr,_i){var gs=is();try{os(Kn)(or,hr,mr,kr,Pr,_i)}catch(ds){if(_s(gs),ds!==ds+0)throw ds;Yr(1,0)}},z:function(Kn,or,hr,mr,kr,Pr,_i,gs){var ds=is();try{os(Kn)(or,hr,mr,kr,Pr,_i,gs)}catch(Cs){if(_s(ds),Cs!==Cs+0)throw Cs;Yr(1,0)}},ga:function(Kn,or,hr,mr,kr,Pr,_i,gs,ds){var Cs=is();try{os(Kn)(or,hr,mr,kr,Pr,_i,gs,ds)}catch(Gs){if(_s(Cs),Gs!==Gs+0)throw Gs;Yr(1,0)}},A:function(Kn,or,hr,mr,kr,Pr,_i,gs,ds,Cs,Gs){var uo=is();try{os(Kn)(or,hr,mr,kr,Pr,_i,gs,ds,Cs,Gs)}catch(co){if(_s(uo),co!==co+0)throw co;Yr(1,0)}},C:function(Kn,or,hr,mr,kr,Pr,_i,gs,ds,Cs,Gs,uo,co,Nr,Ps,Ys){var Io=is();try{os(Kn)(or,hr,mr,kr,Pr,_i,gs,ds,Cs,Gs,uo,co,Nr,Ps,Ys)}catch(Ho){if(_s(Io),Ho!==Ho+0)throw Ho;Yr(1,0)}},aa:function(Kn,or,hr,mr,kr,Pr,_i,gs){var ds=is();try{Mo(Kn,or,hr,mr,kr,Pr,_i,gs)}catch(Cs){if(_s(ds),Cs!==Cs+0)throw Cs;Yr(1,0)}},_:function(Kn,or,hr,mr,kr,Pr,_i,gs,ds,Cs,Gs,uo){var co=is();try{eo(Kn,or,hr,mr,kr,Pr,_i,gs,ds,Cs,Gs,uo)}catch(Nr){if(_s(co),Nr!==Nr+0)throw Nr;Yr(1,0)}},$:function(Kn,or,hr,mr,kr,Pr){var _i=is();try{Ro(Kn,or,hr,mr,kr,Pr)}catch(gs){if(_s(_i),gs!==gs+0)throw gs;Yr(1,0)}},n:function(Kn){return Kn},F:function(Kn){Ns=Kn},ha:es,y:function(Kn,or,hr,mr){return es(Kn,or,hr,mr)}};(function(){function Kn(kr){on.asm=kr.exports,Cn=on.asm.Ka,$n(),On=on.asm.ib,sr.unshift(on.asm.La),Rr--,on.monitorRunDependencies&&on.monitorRunDependencies(Rr),Rr==0&&Kr&&(kr=Kr,Kr=null,kr())}function or(kr){Kn(kr.instance)}function hr(kr){return function(){if(!Tn&&(yn||bn)){if(typeof fetch=="function"&&!Er.startsWith("file://"))return fetch(Er,{credentials:"same-origin"}).then(function(Pr){if(!Pr.ok)throw"failed to load wasm binary file at '"+Er+"'";return Pr.arrayBuffer()}).catch(function(){return Xr()});if(hn)return new Promise(function(Pr,_i){hn(Er,function(gs){Pr(new Uint8Array(gs))},_i)})}return Promise.resolve().then(function(){return Xr()})}().then(function(Pr){return WebAssembly.instantiate(Pr,mr)}).then(function(Pr){return Pr}).then(kr,function(Pr){Pn("failed to asynchronously prepare wasm: "+Pr),Cr(Pr)})}var mr={a:qr};if(Rr++,on.monitorRunDependencies&&on.monitorRunDependencies(Rr),on.instantiateWasm)try{return on.instantiateWasm(mr,Kn)}catch(kr){return Pn("Module.instantiateWasm callback failed with error: "+kr),!1}(Tn||typeof WebAssembly.instantiateStreaming!="function"||Gr()||Er.startsWith("file://")||wn||typeof fetch!="function"?hr(or):fetch(Er,{credentials:"same-origin"}).then(function(kr){return WebAssembly.instantiateStreaming(kr,mr).then(or,function(Pr){return Pn("wasm streaming compile failed: "+Pr),Pn("falling back to ArrayBuffer instantiation"),hr(or)})})).catch(dn)})(),on.___wasm_call_ctors=function(){return(on.___wasm_call_ctors=on.asm.La).apply(null,arguments)},on._OrtInit=function(){return(on._OrtInit=on.asm.Ma).apply(null,arguments)},on._OrtCreateSessionOptions=function(){return(on._OrtCreateSessionOptions=on.asm.Na).apply(null,arguments)},on._OrtAppendExecutionProvider=function(){return(on._OrtAppendExecutionProvider=on.asm.Oa).apply(null,arguments)},on._OrtAddSessionConfigEntry=function(){return(on._OrtAddSessionConfigEntry=on.asm.Pa).apply(null,arguments)},on._OrtReleaseSessionOptions=function(){return(on._OrtReleaseSessionOptions=on.asm.Qa).apply(null,arguments)},on._OrtCreateSession=function(){return(on._OrtCreateSession=on.asm.Ra).apply(null,arguments)},on._OrtReleaseSession=function(){return(on._OrtReleaseSession=on.asm.Sa).apply(null,arguments)},on._OrtGetInputCount=function(){return(on._OrtGetInputCount=on.asm.Ta).apply(null,arguments)},on._OrtGetOutputCount=function(){return(on._OrtGetOutputCount=on.asm.Ua).apply(null,arguments)},on._OrtGetInputName=function(){return(on._OrtGetInputName=on.asm.Va).apply(null,arguments)},on._OrtGetOutputName=function(){return(on._OrtGetOutputName=on.asm.Wa).apply(null,arguments)},on._OrtFree=function(){return(on._OrtFree=on.asm.Xa).apply(null,arguments)},on._OrtCreateTensor=function(){return(on._OrtCreateTensor=on.asm.Ya).apply(null,arguments)},on._OrtGetTensorData=function(){return(on._OrtGetTensorData=on.asm.Za).apply(null,arguments)},on._OrtReleaseTensor=function(){return(on._OrtReleaseTensor=on.asm._a).apply(null,arguments)},on._OrtCreateRunOptions=function(){return(on._OrtCreateRunOptions=on.asm.$a).apply(null,arguments)},on._OrtAddRunConfigEntry=function(){return(on._OrtAddRunConfigEntry=on.asm.ab).apply(null,arguments)},on._OrtReleaseRunOptions=function(){return(on._OrtReleaseRunOptions=on.asm.bb).apply(null,arguments)},on._OrtRun=function(){return(on._OrtRun=on.asm.cb).apply(null,arguments)},on._OrtEndProfiling=function(){return(on._OrtEndProfiling=on.asm.db).apply(null,arguments)};var ts,Dr=on._malloc=function(){return(Dr=on._malloc=on.asm.eb).apply(null,arguments)},ns=on._free=function(){return(ns=on._free=on.asm.fb).apply(null,arguments)},ks=on._fflush=function(){return(ks=on._fflush=on.asm.gb).apply(null,arguments)},ms=on.___funcs_on_exit=function(){return(ms=on.___funcs_on_exit=on.asm.hb).apply(null,arguments)},Yr=on._setThrew=function(){return(Yr=on._setThrew=on.asm.jb).apply(null,arguments)},is=on.stackSave=function(){return(is=on.stackSave=on.asm.kb).apply(null,arguments)},_s=on.stackRestore=function(){return(_s=on.stackRestore=on.asm.lb).apply(null,arguments)},so=on.stackAlloc=function(){return(so=on.stackAlloc=on.asm.mb).apply(null,arguments)},ho=on.___cxa_can_catch=function(){return(ho=on.___cxa_can_catch=on.asm.nb).apply(null,arguments)},Co=on.___cxa_is_pointer_type=function(){return(Co=on.___cxa_is_pointer_type=on.asm.ob).apply(null,arguments)},Ts=on.dynCall_j=function(){return(Ts=on.dynCall_j=on.asm.pb).apply(null,arguments)},qo=on.dynCall_iiiiij=function(){return(qo=on.dynCall_iiiiij=on.asm.qb).apply(null,arguments)},Go=on.dynCall_jii=function(){return(Go=on.dynCall_jii=on.asm.rb).apply(null,arguments)},Mo=on.dynCall_viiiiij=function(){return(Mo=on.dynCall_viiiiij=on.asm.sb).apply(null,arguments)},Ro=on.dynCall_vjji=function(){return(Ro=on.dynCall_vjji=on.asm.tb).apply(null,arguments)},eo=on.dynCall_viiijjjii=function(){return(eo=on.dynCall_viiijjjii=on.asm.ub).apply(null,arguments)},lo=on.dynCall_iij=function(){return(lo=on.dynCall_iij=on.asm.vb).apply(null,arguments)},fo=on.dynCall_ji=function(){return(fo=on.dynCall_ji=on.asm.wb).apply(null,arguments)},xa=on.dynCall_iiiiiij=function(){return(xa=on.dynCall_iiiiiij=on.asm.xb).apply(null,arguments)},Qo=on.dynCall_iiij=function(){return(Qo=on.dynCall_iiij=on.asm.yb).apply(null,arguments)};function Oo(){function Kn(){if(!ts&&(ts=!0,on.calledRun=!0,!Ln)){if(us(sr),un(on),on.onRuntimeInitialized&&on.onRuntimeInitialized(),on.postRun)for(typeof on.postRun=="function"&&(on.postRun=[on.postRun]);on.postRun.length;){var or=on.postRun.shift();cr.unshift(or)}us(cr)}}if(!(0<Rr)){if(on.preRun)for(typeof on.preRun=="function"&&(on.preRun=[on.preRun]);on.preRun.length;)vr();us(er),0<Rr||(on.setStatus?(on.setStatus("Running..."),setTimeout(function(){setTimeout(function(){on.setStatus("")},1),Kn()},1)):Kn())}}if(on.UTF8ToString=Qn,on.stringToUTF8=function(Kn,or,hr){return zn(Kn,Fn,or,hr)},on.lengthBytesUTF8=lr,on.stackSave=is,on.stackRestore=_s,on.stackAlloc=so,Kr=function Kn(){ts||Oo(),ts||(Kr=Kn)},on.preInit)for(typeof on.preInit=="function"&&(on.preInit=[on.preInit]);0<on.preInit.length;)on.preInit.pop()();return Oo(),sn.ready});St.exports=nn},4537:St=>{St.exports=function(e,en){for(var tn=new Array(arguments.length-1),nn=0,sn=2,on=!0;sn<arguments.length;)tn[nn++]=arguments[sn++];return new Promise(function(un,dn){tn[nn]=function(fn){if(on)if(on=!1,fn)dn(fn);else{for(var hn=new Array(arguments.length-1),an=0;an<hn.length;)hn[an++]=arguments[an];un.apply(null,hn)}};try{e.apply(en||null,tn)}catch(fn){on&&(on=!1,dn(fn))}})}},7419:(St,e)=>{var en=e;en.length=function(un){var dn=un.length;if(!dn)return 0;for(var fn=0;--dn%4>1&&un.charAt(dn)==="=";)++fn;return Math.ceil(3*un.length)/4-fn};for(var tn=new Array(64),nn=new Array(123),sn=0;sn<64;)nn[tn[sn]=sn<26?sn+65:sn<52?sn+71:sn<62?sn-4:sn-59|43]=sn++;en.encode=function(un,dn,fn){for(var hn,an=null,rn=[],cn=0,pn=0;dn<fn;){var mn=un[dn++];switch(pn){case 0:rn[cn++]=tn[mn>>2],hn=(3&mn)<<4,pn=1;break;case 1:rn[cn++]=tn[hn|mn>>4],hn=(15&mn)<<2,pn=2;break;case 2:rn[cn++]=tn[hn|mn>>6],rn[cn++]=tn[63&mn],pn=0}cn>8191&&((an||(an=[])).push(String.fromCharCode.apply(String,rn)),cn=0)}return pn&&(rn[cn++]=tn[hn],rn[cn++]=61,pn===1&&(rn[cn++]=61)),an?(cn&&an.push(String.fromCharCode.apply(String,rn.slice(0,cn))),an.join("")):String.fromCharCode.apply(String,rn.slice(0,cn))};var on="invalid encoding";en.decode=function(un,dn,fn){for(var hn,an=fn,rn=0,cn=0;cn<un.length;){var pn=un.charCodeAt(cn++);if(pn===61&&rn>1)break;if((pn=nn[pn])===void 0)throw Error(on);switch(rn){case 0:hn=pn,rn=1;break;case 1:dn[fn++]=hn<<2|(48&pn)>>4,hn=pn,rn=2;break;case 2:dn[fn++]=(15&hn)<<4|(60&pn)>>2,hn=pn,rn=3;break;case 3:dn[fn++]=(3&hn)<<6|pn,rn=0}}if(rn===1)throw Error(on);return fn-an},en.test=function(un){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(un)}},9211:St=>{function e(){this._listeners={}}St.exports=e,e.prototype.on=function(en,tn,nn){return(this._listeners[en]||(this._listeners[en]=[])).push({fn:tn,ctx:nn||this}),this},e.prototype.off=function(en,tn){if(en===void 0)this._listeners={};else if(tn===void 0)this._listeners[en]=[];else for(var nn=this._listeners[en],sn=0;sn<nn.length;)nn[sn].fn===tn?nn.splice(sn,1):++sn;return this},e.prototype.emit=function(en){var tn=this._listeners[en];if(tn){for(var nn=[],sn=1;sn<arguments.length;)nn.push(arguments[sn++]);for(sn=0;sn<tn.length;)tn[sn].fn.apply(tn[sn++].ctx,nn)}return this}},945:St=>{function e(on){return typeof Float32Array<"u"?function(){var un=new Float32Array([-0]),dn=new Uint8Array(un.buffer),fn=dn[3]===128;function hn(pn,mn,xn){un[0]=pn,mn[xn]=dn[0],mn[xn+1]=dn[1],mn[xn+2]=dn[2],mn[xn+3]=dn[3]}function an(pn,mn,xn){un[0]=pn,mn[xn]=dn[3],mn[xn+1]=dn[2],mn[xn+2]=dn[1],mn[xn+3]=dn[0]}function rn(pn,mn){return dn[0]=pn[mn],dn[1]=pn[mn+1],dn[2]=pn[mn+2],dn[3]=pn[mn+3],un[0]}function cn(pn,mn){return dn[3]=pn[mn],dn[2]=pn[mn+1],dn[1]=pn[mn+2],dn[0]=pn[mn+3],un[0]}on.writeFloatLE=fn?hn:an,on.writeFloatBE=fn?an:hn,on.readFloatLE=fn?rn:cn,on.readFloatBE=fn?cn:rn}():function(){function un(fn,hn,an,rn){var cn=hn<0?1:0;if(cn&&(hn=-hn),hn===0)fn(1/hn>0?0:2147483648,an,rn);else if(isNaN(hn))fn(2143289344,an,rn);else if(hn>34028234663852886e22)fn((cn<<31|2139095040)>>>0,an,rn);else if(hn<11754943508222875e-54)fn((cn<<31|Math.round(hn/1401298464324817e-60))>>>0,an,rn);else{var pn=Math.floor(Math.log(hn)/Math.LN2);fn((cn<<31|pn+127<<23|8388607&Math.round(hn*Math.pow(2,-pn)*8388608))>>>0,an,rn)}}function dn(fn,hn,an){var rn=fn(hn,an),cn=2*(rn>>31)+1,pn=rn>>>23&255,mn=8388607&rn;return pn===255?mn?NaN:cn*(1/0):pn===0?1401298464324817e-60*cn*mn:cn*Math.pow(2,pn-150)*(mn+8388608)}on.writeFloatLE=un.bind(null,en),on.writeFloatBE=un.bind(null,tn),on.readFloatLE=dn.bind(null,nn),on.readFloatBE=dn.bind(null,sn)}(),typeof Float64Array<"u"?function(){var un=new Float64Array([-0]),dn=new Uint8Array(un.buffer),fn=dn[7]===128;function hn(pn,mn,xn){un[0]=pn,mn[xn]=dn[0],mn[xn+1]=dn[1],mn[xn+2]=dn[2],mn[xn+3]=dn[3],mn[xn+4]=dn[4],mn[xn+5]=dn[5],mn[xn+6]=dn[6],mn[xn+7]=dn[7]}function an(pn,mn,xn){un[0]=pn,mn[xn]=dn[7],mn[xn+1]=dn[6],mn[xn+2]=dn[5],mn[xn+3]=dn[4],mn[xn+4]=dn[3],mn[xn+5]=dn[2],mn[xn+6]=dn[1],mn[xn+7]=dn[0]}function rn(pn,mn){return dn[0]=pn[mn],dn[1]=pn[mn+1],dn[2]=pn[mn+2],dn[3]=pn[mn+3],dn[4]=pn[mn+4],dn[5]=pn[mn+5],dn[6]=pn[mn+6],dn[7]=pn[mn+7],un[0]}function cn(pn,mn){return dn[7]=pn[mn],dn[6]=pn[mn+1],dn[5]=pn[mn+2],dn[4]=pn[mn+3],dn[3]=pn[mn+4],dn[2]=pn[mn+5],dn[1]=pn[mn+6],dn[0]=pn[mn+7],un[0]}on.writeDoubleLE=fn?hn:an,on.writeDoubleBE=fn?an:hn,on.readDoubleLE=fn?rn:cn,on.readDoubleBE=fn?cn:rn}():function(){function un(fn,hn,an,rn,cn,pn){var mn=rn<0?1:0;if(mn&&(rn=-rn),rn===0)fn(0,cn,pn+hn),fn(1/rn>0?0:2147483648,cn,pn+an);else if(isNaN(rn))fn(0,cn,pn+hn),fn(2146959360,cn,pn+an);else if(rn>17976931348623157e292)fn(0,cn,pn+hn),fn((mn<<31|2146435072)>>>0,cn,pn+an);else{var xn;if(rn<22250738585072014e-324)fn((xn=rn/5e-324)>>>0,cn,pn+hn),fn((mn<<31|xn/4294967296)>>>0,cn,pn+an);else{var gn=Math.floor(Math.log(rn)/Math.LN2);gn===1024&&(gn=1023),fn(4503599627370496*(xn=rn*Math.pow(2,-gn))>>>0,cn,pn+hn),fn((mn<<31|gn+1023<<20|1048576*xn&1048575)>>>0,cn,pn+an)}}}function dn(fn,hn,an,rn,cn){var pn=fn(rn,cn+hn),mn=fn(rn,cn+an),xn=2*(mn>>31)+1,gn=mn>>>20&2047,yn=4294967296*(1048575&mn)+pn;return gn===2047?yn?NaN:xn*(1/0):gn===0?5e-324*xn*yn:xn*Math.pow(2,gn-1075)*(yn+4503599627370496)}on.writeDoubleLE=un.bind(null,en,0,4),on.writeDoubleBE=un.bind(null,tn,4,0),on.readDoubleLE=dn.bind(null,nn,0,4),on.readDoubleBE=dn.bind(null,sn,4,0)}(),on}function en(on,un,dn){un[dn]=255&on,un[dn+1]=on>>>8&255,un[dn+2]=on>>>16&255,un[dn+3]=on>>>24}function tn(on,un,dn){un[dn]=on>>>24,un[dn+1]=on>>>16&255,un[dn+2]=on>>>8&255,un[dn+3]=255&on}function nn(on,un){return(on[un]|on[un+1]<<8|on[un+2]<<16|on[un+3]<<24)>>>0}function sn(on,un){return(on[un]<<24|on[un+1]<<16|on[un+2]<<8|on[un+3])>>>0}St.exports=e(e)},7199:module=>{function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(St){}return null}module.exports=inquire},6662:St=>{St.exports=function(e,en,tn){var nn=tn||8192,sn=nn>>>1,on=null,un=nn;return function(dn){if(dn<1||dn>sn)return e(dn);un+dn>nn&&(on=e(nn),un=0);var fn=en.call(on,un,un+=dn);return 7&un&&(un=1+(7|un)),fn}}},4997:(St,e)=>{var en=e;en.length=function(tn){for(var nn=0,sn=0,on=0;on<tn.length;++on)(sn=tn.charCodeAt(on))<128?nn+=1:sn<2048?nn+=2:(64512&sn)==55296&&(64512&tn.charCodeAt(on+1))==56320?(++on,nn+=4):nn+=3;return nn},en.read=function(tn,nn,sn){if(sn-nn<1)return"";for(var on,un=null,dn=[],fn=0;nn<sn;)(on=tn[nn++])<128?dn[fn++]=on:on>191&&on<224?dn[fn++]=(31&on)<<6|63&tn[nn++]:on>239&&on<365?(on=((7&on)<<18|(63&tn[nn++])<<12|(63&tn[nn++])<<6|63&tn[nn++])-65536,dn[fn++]=55296+(on>>10),dn[fn++]=56320+(1023&on)):dn[fn++]=(15&on)<<12|(63&tn[nn++])<<6|63&tn[nn++],fn>8191&&((un||(un=[])).push(String.fromCharCode.apply(String,dn)),fn=0);return un?(fn&&un.push(String.fromCharCode.apply(String,dn.slice(0,fn))),un.join("")):String.fromCharCode.apply(String,dn.slice(0,fn))},en.write=function(tn,nn,sn){for(var on,un,dn=sn,fn=0;fn<tn.length;++fn)(on=tn.charCodeAt(fn))<128?nn[sn++]=on:on<2048?(nn[sn++]=on>>6|192,nn[sn++]=63&on|128):(64512&on)==55296&&(64512&(un=tn.charCodeAt(fn+1)))==56320?(on=65536+((1023&on)<<10)+(1023&un),++fn,nn[sn++]=on>>18|240,nn[sn++]=on>>12&63|128,nn[sn++]=on>>6&63|128,nn[sn++]=63&on|128):(nn[sn++]=on>>12|224,nn[sn++]=on>>6&63|128,nn[sn++]=63&on|128);return sn-dn}},3442:(St,e)=>{e.__esModule=!0;var en=function(){function tn(nn){if(!nn)throw new TypeError("Invalid argument; `value` has no value.");this.value=tn.EMPTY,nn&&tn.isGuid(nn)&&(this.value=nn)}return tn.isGuid=function(nn){var sn=nn.toString();return nn&&(nn instanceof tn||tn.validator.test(sn))},tn.create=function(){return new tn([tn.gen(2),tn.gen(1),tn.gen(1),tn.gen(1),tn.gen(3)].join("-"))},tn.createEmpty=function(){return new tn("emptyguid")},tn.parse=function(nn){return new tn(nn)},tn.raw=function(){return[tn.gen(2),tn.gen(1),tn.gen(1),tn.gen(1),tn.gen(3)].join("-")},tn.gen=function(nn){for(var sn="",on=0;on<nn;on++)sn+=(65536*(1+Math.random())|0).toString(16).substring(1);return sn},tn.prototype.equals=function(nn){return tn.isGuid(nn)&&this.value===nn.toString()},tn.prototype.isEmpty=function(){return this.value===tn.EMPTY},tn.prototype.toString=function(){return this.value},tn.prototype.toJSON=function(){return{value:this.value}},tn.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),tn.EMPTY="00000000-0000-0000-0000-000000000000",tn}();e.Guid=en},3720:St=>{St.exports=en;var e=null;try{e=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function en(Sn,Cn,Nn){this.low=0|Sn,this.high=0|Cn,this.unsigned=!!Nn}function tn(Sn){return(Sn&&Sn.__isLong__)===!0}en.prototype.__isLong__,Object.defineProperty(en.prototype,"__isLong__",{value:!0}),en.isLong=tn;var nn={},sn={};function on(Sn,Cn){var Nn,Mn,Fn;return Cn?(Fn=0<=(Sn>>>=0)&&Sn<256)&&(Mn=sn[Sn])?Mn:(Nn=dn(Sn,(0|Sn)<0?-1:0,!0),Fn&&(sn[Sn]=Nn),Nn):(Fn=-128<=(Sn|=0)&&Sn<128)&&(Mn=nn[Sn])?Mn:(Nn=dn(Sn,Sn<0?-1:0,!1),Fn&&(nn[Sn]=Nn),Nn)}function un(Sn,Cn){if(isNaN(Sn))return Cn?gn:xn;if(Cn){if(Sn<0)return gn;if(Sn>=cn)return Tn}else{if(Sn<=-pn)return An;if(Sn+1>=pn)return _n}return Sn<0?un(-Sn,Cn).neg():dn(Sn%rn|0,Sn/rn|0,Cn)}function dn(Sn,Cn,Nn){return new en(Sn,Cn,Nn)}en.fromInt=on,en.fromNumber=un,en.fromBits=dn;var fn=Math.pow;function hn(Sn,Cn,Nn){if(Sn.length===0)throw Error("empty string");if(Sn==="NaN"||Sn==="Infinity"||Sn==="+Infinity"||Sn==="-Infinity")return xn;if(typeof Cn=="number"?(Nn=Cn,Cn=!1):Cn=!!Cn,(Nn=Nn||10)<2||36<Nn)throw RangeError("radix");var Mn;if((Mn=Sn.indexOf("-"))>0)throw Error("interior hyphen");if(Mn===0)return hn(Sn.substring(1),Cn,Nn).neg();for(var Fn=un(fn(Nn,8)),In=xn,Bn=0;Bn<Sn.length;Bn+=8){var Ln=Math.min(8,Sn.length-Bn),qn=parseInt(Sn.substring(Bn,Bn+Ln),Nn);if(Ln<8){var Yn=un(fn(Nn,Ln));In=In.mul(Yn).add(un(qn))}else In=(In=In.mul(Fn)).add(un(qn))}return In.unsigned=Cn,In}function an(Sn,Cn){return typeof Sn=="number"?un(Sn,Cn):typeof Sn=="string"?hn(Sn,Cn):dn(Sn.low,Sn.high,typeof Cn=="boolean"?Cn:Sn.unsigned)}en.fromString=hn,en.fromValue=an;var rn=4294967296,cn=rn*rn,pn=cn/2,mn=on(1<<24),xn=on(0);en.ZERO=xn;var gn=on(0,!0);en.UZERO=gn;var yn=on(1);en.ONE=yn;var bn=on(1,!0);en.UONE=bn;var wn=on(-1);en.NEG_ONE=wn;var _n=dn(-1,2147483647,!1);en.MAX_VALUE=_n;var Tn=dn(-1,-1,!0);en.MAX_UNSIGNED_VALUE=Tn;var An=dn(0,-2147483648,!1);en.MIN_VALUE=An;var Pn=en.prototype;Pn.toInt=function(){return this.unsigned?this.low>>>0:this.low},Pn.toNumber=function(){return this.unsigned?(this.high>>>0)*rn+(this.low>>>0):this.high*rn+(this.low>>>0)},Pn.toString=function(Sn){if((Sn=Sn||10)<2||36<Sn)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(An)){var Cn=un(Sn),Nn=this.div(Cn),Mn=Nn.mul(Cn).sub(this);return Nn.toString(Sn)+Mn.toInt().toString(Sn)}return"-"+this.neg().toString(Sn)}for(var Fn=un(fn(Sn,6),this.unsigned),In=this,Bn="";;){var Ln=In.div(Fn),qn=(In.sub(Ln.mul(Fn)).toInt()>>>0).toString(Sn);if((In=Ln).isZero())return qn+Bn;for(;qn.length<6;)qn="0"+qn;Bn=""+qn+Bn}},Pn.getHighBits=function(){return this.high},Pn.getHighBitsUnsigned=function(){return this.high>>>0},Pn.getLowBits=function(){return this.low},Pn.getLowBitsUnsigned=function(){return this.low>>>0},Pn.getNumBitsAbs=function(){if(this.isNegative())return this.eq(An)?64:this.neg().getNumBitsAbs();for(var Sn=this.high!=0?this.high:this.low,Cn=31;Cn>0&&!(Sn&1<<Cn);Cn--);return this.high!=0?Cn+33:Cn+1},Pn.isZero=function(){return this.high===0&&this.low===0},Pn.eqz=Pn.isZero,Pn.isNegative=function(){return!this.unsigned&&this.high<0},Pn.isPositive=function(){return this.unsigned||this.high>=0},Pn.isOdd=function(){return(1&this.low)==1},Pn.isEven=function(){return(1&this.low)==0},Pn.equals=function(Sn){return tn(Sn)||(Sn=an(Sn)),(this.unsigned===Sn.unsigned||this.high>>>31!=1||Sn.high>>>31!=1)&&this.high===Sn.high&&this.low===Sn.low},Pn.eq=Pn.equals,Pn.notEquals=function(Sn){return!this.eq(Sn)},Pn.neq=Pn.notEquals,Pn.ne=Pn.notEquals,Pn.lessThan=function(Sn){return this.comp(Sn)<0},Pn.lt=Pn.lessThan,Pn.lessThanOrEqual=function(Sn){return this.comp(Sn)<=0},Pn.lte=Pn.lessThanOrEqual,Pn.le=Pn.lessThanOrEqual,Pn.greaterThan=function(Sn){return this.comp(Sn)>0},Pn.gt=Pn.greaterThan,Pn.greaterThanOrEqual=function(Sn){return this.comp(Sn)>=0},Pn.gte=Pn.greaterThanOrEqual,Pn.ge=Pn.greaterThanOrEqual,Pn.compare=function(Sn){if(tn(Sn)||(Sn=an(Sn)),this.eq(Sn))return 0;var Cn=this.isNegative(),Nn=Sn.isNegative();return Cn&&!Nn?-1:!Cn&&Nn?1:this.unsigned?Sn.high>>>0>this.high>>>0||Sn.high===this.high&&Sn.low>>>0>this.low>>>0?-1:1:this.sub(Sn).isNegative()?-1:1},Pn.comp=Pn.compare,Pn.negate=function(){return!this.unsigned&&this.eq(An)?An:this.not().add(yn)},Pn.neg=Pn.negate,Pn.add=function(Sn){tn(Sn)||(Sn=an(Sn));var Cn=this.high>>>16,Nn=65535&this.high,Mn=this.low>>>16,Fn=65535&this.low,In=Sn.high>>>16,Bn=65535&Sn.high,Ln=Sn.low>>>16,qn=0,Yn=0,Qn=0,zn=0;return Qn+=(zn+=Fn+(65535&Sn.low))>>>16,Yn+=(Qn+=Mn+Ln)>>>16,qn+=(Yn+=Nn+Bn)>>>16,qn+=Cn+In,dn((Qn&=65535)<<16|(zn&=65535),(qn&=65535)<<16|(Yn&=65535),this.unsigned)},Pn.subtract=function(Sn){return tn(Sn)||(Sn=an(Sn)),this.add(Sn.neg())},Pn.sub=Pn.subtract,Pn.multiply=function(Sn){if(this.isZero())return xn;if(tn(Sn)||(Sn=an(Sn)),e)return dn(e.mul(this.low,this.high,Sn.low,Sn.high),e.get_high(),this.unsigned);if(Sn.isZero())return xn;if(this.eq(An))return Sn.isOdd()?An:xn;if(Sn.eq(An))return this.isOdd()?An:xn;if(this.isNegative())return Sn.isNegative()?this.neg().mul(Sn.neg()):this.neg().mul(Sn).neg();if(Sn.isNegative())return this.mul(Sn.neg()).neg();if(this.lt(mn)&&Sn.lt(mn))return un(this.toNumber()*Sn.toNumber(),this.unsigned);var Cn=this.high>>>16,Nn=65535&this.high,Mn=this.low>>>16,Fn=65535&this.low,In=Sn.high>>>16,Bn=65535&Sn.high,Ln=Sn.low>>>16,qn=65535&Sn.low,Yn=0,Qn=0,zn=0,lr=0;return zn+=(lr+=Fn*qn)>>>16,Qn+=(zn+=Mn*qn)>>>16,zn&=65535,Qn+=(zn+=Fn*Ln)>>>16,Yn+=(Qn+=Nn*qn)>>>16,Qn&=65535,Yn+=(Qn+=Mn*Ln)>>>16,Qn&=65535,Yn+=(Qn+=Fn*Bn)>>>16,Yn+=Cn*qn+Nn*Ln+Mn*Bn+Fn*In,dn((zn&=65535)<<16|(lr&=65535),(Yn&=65535)<<16|(Qn&=65535),this.unsigned)},Pn.mul=Pn.multiply,Pn.divide=function(Sn){if(tn(Sn)||(Sn=an(Sn)),Sn.isZero())throw Error("division by zero");var Cn,Nn,Mn;if(e)return this.unsigned||this.high!==-2147483648||Sn.low!==-1||Sn.high!==-1?dn((this.unsigned?e.div_u:e.div_s)(this.low,this.high,Sn.low,Sn.high),e.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?gn:xn;if(this.unsigned){if(Sn.unsigned||(Sn=Sn.toUnsigned()),Sn.gt(this))return gn;if(Sn.gt(this.shru(1)))return bn;Mn=gn}else{if(this.eq(An))return Sn.eq(yn)||Sn.eq(wn)?An:Sn.eq(An)?yn:(Cn=this.shr(1).div(Sn).shl(1)).eq(xn)?Sn.isNegative()?yn:wn:(Nn=this.sub(Sn.mul(Cn)),Mn=Cn.add(Nn.div(Sn)));if(Sn.eq(An))return this.unsigned?gn:xn;if(this.isNegative())return Sn.isNegative()?this.neg().div(Sn.neg()):this.neg().div(Sn).neg();if(Sn.isNegative())return this.div(Sn.neg()).neg();Mn=xn}for(Nn=this;Nn.gte(Sn);){Cn=Math.max(1,Math.floor(Nn.toNumber()/Sn.toNumber()));for(var Fn=Math.ceil(Math.log(Cn)/Math.LN2),In=Fn<=48?1:fn(2,Fn-48),Bn=un(Cn),Ln=Bn.mul(Sn);Ln.isNegative()||Ln.gt(Nn);)Ln=(Bn=un(Cn-=In,this.unsigned)).mul(Sn);Bn.isZero()&&(Bn=yn),Mn=Mn.add(Bn),Nn=Nn.sub(Ln)}return Mn},Pn.div=Pn.divide,Pn.modulo=function(Sn){return tn(Sn)||(Sn=an(Sn)),e?dn((this.unsigned?e.rem_u:e.rem_s)(this.low,this.high,Sn.low,Sn.high),e.get_high(),this.unsigned):this.sub(this.div(Sn).mul(Sn))},Pn.mod=Pn.modulo,Pn.rem=Pn.modulo,Pn.not=function(){return dn(~this.low,~this.high,this.unsigned)},Pn.and=function(Sn){return tn(Sn)||(Sn=an(Sn)),dn(this.low&Sn.low,this.high&Sn.high,this.unsigned)},Pn.or=function(Sn){return tn(Sn)||(Sn=an(Sn)),dn(this.low|Sn.low,this.high|Sn.high,this.unsigned)},Pn.xor=function(Sn){return tn(Sn)||(Sn=an(Sn)),dn(this.low^Sn.low,this.high^Sn.high,this.unsigned)},Pn.shiftLeft=function(Sn){return tn(Sn)&&(Sn=Sn.toInt()),(Sn&=63)==0?this:Sn<32?dn(this.low<<Sn,this.high<<Sn|this.low>>>32-Sn,this.unsigned):dn(0,this.low<<Sn-32,this.unsigned)},Pn.shl=Pn.shiftLeft,Pn.shiftRight=function(Sn){return tn(Sn)&&(Sn=Sn.toInt()),(Sn&=63)==0?this:Sn<32?dn(this.low>>>Sn|this.high<<32-Sn,this.high>>Sn,this.unsigned):dn(this.high>>Sn-32,this.high>=0?0:-1,this.unsigned)},Pn.shr=Pn.shiftRight,Pn.shiftRightUnsigned=function(Sn){if(tn(Sn)&&(Sn=Sn.toInt()),(Sn&=63)==0)return this;var Cn=this.high;return Sn<32?dn(this.low>>>Sn|Cn<<32-Sn,Cn>>>Sn,this.unsigned):dn(Sn===32?Cn:Cn>>>Sn-32,0,this.unsigned)},Pn.shru=Pn.shiftRightUnsigned,Pn.shr_u=Pn.shiftRightUnsigned,Pn.toSigned=function(){return this.unsigned?dn(this.low,this.high,!1):this},Pn.toUnsigned=function(){return this.unsigned?this:dn(this.low,this.high,!0)},Pn.toBytes=function(Sn){return Sn?this.toBytesLE():this.toBytesBE()},Pn.toBytesLE=function(){var Sn=this.high,Cn=this.low;return[255&Cn,Cn>>>8&255,Cn>>>16&255,Cn>>>24,255&Sn,Sn>>>8&255,Sn>>>16&255,Sn>>>24]},Pn.toBytesBE=function(){var Sn=this.high,Cn=this.low;return[Sn>>>24,Sn>>>16&255,Sn>>>8&255,255&Sn,Cn>>>24,Cn>>>16&255,Cn>>>8&255,255&Cn]},en.fromBytes=function(Sn,Cn,Nn){return Nn?en.fromBytesLE(Sn,Cn):en.fromBytesBE(Sn,Cn)},en.fromBytesLE=function(Sn,Cn){return new en(Sn[0]|Sn[1]<<8|Sn[2]<<16|Sn[3]<<24,Sn[4]|Sn[5]<<8|Sn[6]<<16|Sn[7]<<24,Cn)},en.fromBytesBE=function(Sn,Cn){return new en(Sn[4]<<24|Sn[5]<<16|Sn[6]<<8|Sn[7],Sn[0]<<24|Sn[1]<<16|Sn[2]<<8|Sn[3],Cn)}},1446:(St,e,en)=>{var tn,nn,sn,on=en(2100),un=on.Reader,dn=on.Writer,fn=on.util,hn=on.roots.default||(on.roots.default={});hn.onnx=((sn={}).Version=(tn={},(nn=Object.create(tn))[tn[0]="_START_VERSION"]=0,nn[tn[1]="IR_VERSION_2017_10_10"]=1,nn[tn[2]="IR_VERSION_2017_10_30"]=2,nn[tn[3]="IR_VERSION_2017_11_3"]=3,nn[tn[4]="IR_VERSION_2019_1_22"]=4,nn[tn[5]="IR_VERSION"]=5,nn),sn.AttributeProto=function(){function an(rn){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],rn)for(var cn=Object.keys(rn),pn=0;pn<cn.length;++pn)rn[cn[pn]]!=null&&(this[cn[pn]]=rn[cn[pn]])}return an.prototype.name="",an.prototype.refAttrName="",an.prototype.docString="",an.prototype.type=0,an.prototype.f=0,an.prototype.i=fn.Long?fn.Long.fromBits(0,0,!1):0,an.prototype.s=fn.newBuffer([]),an.prototype.t=null,an.prototype.g=null,an.prototype.floats=fn.emptyArray,an.prototype.ints=fn.emptyArray,an.prototype.strings=fn.emptyArray,an.prototype.tensors=fn.emptyArray,an.prototype.graphs=fn.emptyArray,an.create=function(rn){return new an(rn)},an.encode=function(rn,cn){if(cn||(cn=dn.create()),rn.name!=null&&rn.hasOwnProperty("name")&&cn.uint32(10).string(rn.name),rn.f!=null&&rn.hasOwnProperty("f")&&cn.uint32(21).float(rn.f),rn.i!=null&&rn.hasOwnProperty("i")&&cn.uint32(24).int64(rn.i),rn.s!=null&&rn.hasOwnProperty("s")&&cn.uint32(34).bytes(rn.s),rn.t!=null&&rn.hasOwnProperty("t")&&hn.onnx.TensorProto.encode(rn.t,cn.uint32(42).fork()).ldelim(),rn.g!=null&&rn.hasOwnProperty("g")&&hn.onnx.GraphProto.encode(rn.g,cn.uint32(50).fork()).ldelim(),rn.floats!=null&&rn.floats.length){cn.uint32(58).fork();for(var pn=0;pn<rn.floats.length;++pn)cn.float(rn.floats[pn]);cn.ldelim()}if(rn.ints!=null&&rn.ints.length){for(cn.uint32(66).fork(),pn=0;pn<rn.ints.length;++pn)cn.int64(rn.ints[pn]);cn.ldelim()}if(rn.strings!=null&&rn.strings.length)for(pn=0;pn<rn.strings.length;++pn)cn.uint32(74).bytes(rn.strings[pn]);if(rn.tensors!=null&&rn.tensors.length)for(pn=0;pn<rn.tensors.length;++pn)hn.onnx.TensorProto.encode(rn.tensors[pn],cn.uint32(82).fork()).ldelim();if(rn.graphs!=null&&rn.graphs.length)for(pn=0;pn<rn.graphs.length;++pn)hn.onnx.GraphProto.encode(rn.graphs[pn],cn.uint32(90).fork()).ldelim();return rn.docString!=null&&rn.hasOwnProperty("docString")&&cn.uint32(106).string(rn.docString),rn.type!=null&&rn.hasOwnProperty("type")&&cn.uint32(160).int32(rn.type),rn.refAttrName!=null&&rn.hasOwnProperty("refAttrName")&&cn.uint32(170).string(rn.refAttrName),cn},an.encodeDelimited=function(rn,cn){return this.encode(rn,cn).ldelim()},an.decode=function(rn,cn){rn instanceof un||(rn=un.create(rn));for(var pn=cn===void 0?rn.len:rn.pos+cn,mn=new hn.onnx.AttributeProto;rn.pos<pn;){var xn=rn.uint32();switch(xn>>>3){case 1:mn.name=rn.string();break;case 21:mn.refAttrName=rn.string();break;case 13:mn.docString=rn.string();break;case 20:mn.type=rn.int32();break;case 2:mn.f=rn.float();break;case 3:mn.i=rn.int64();break;case 4:mn.s=rn.bytes();break;case 5:mn.t=hn.onnx.TensorProto.decode(rn,rn.uint32());break;case 6:mn.g=hn.onnx.GraphProto.decode(rn,rn.uint32());break;case 7:if(mn.floats&&mn.floats.length||(mn.floats=[]),(7&xn)==2)for(var gn=rn.uint32()+rn.pos;rn.pos<gn;)mn.floats.push(rn.float());else mn.floats.push(rn.float());break;case 8:if(mn.ints&&mn.ints.length||(mn.ints=[]),(7&xn)==2)for(gn=rn.uint32()+rn.pos;rn.pos<gn;)mn.ints.push(rn.int64());else mn.ints.push(rn.int64());break;case 9:mn.strings&&mn.strings.length||(mn.strings=[]),mn.strings.push(rn.bytes());break;case 10:mn.tensors&&mn.tensors.length||(mn.tensors=[]),mn.tensors.push(hn.onnx.TensorProto.decode(rn,rn.uint32()));break;case 11:mn.graphs&&mn.graphs.length||(mn.graphs=[]),mn.graphs.push(hn.onnx.GraphProto.decode(rn,rn.uint32()));break;default:rn.skipType(7&xn)}}return mn},an.decodeDelimited=function(rn){return rn instanceof un||(rn=new un(rn)),this.decode(rn,rn.uint32())},an.verify=function(rn){if(typeof rn!="object"||rn===null)return"object expected";if(rn.name!=null&&rn.hasOwnProperty("name")&&!fn.isString(rn.name))return"name: string expected";if(rn.refAttrName!=null&&rn.hasOwnProperty("refAttrName")&&!fn.isString(rn.refAttrName))return"refAttrName: string expected";if(rn.docString!=null&&rn.hasOwnProperty("docString")&&!fn.isString(rn.docString))return"docString: string expected";if(rn.type!=null&&rn.hasOwnProperty("type"))switch(rn.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:}if(rn.f!=null&&rn.hasOwnProperty("f")&&typeof rn.f!="number")return"f: number expected";if(rn.i!=null&&rn.hasOwnProperty("i")&&!(fn.isInteger(rn.i)||rn.i&&fn.isInteger(rn.i.low)&&fn.isInteger(rn.i.high)))return"i: integer|Long expected";if(rn.s!=null&&rn.hasOwnProperty("s")&&!(rn.s&&typeof rn.s.length=="number"||fn.isString(rn.s)))return"s: buffer expected";if(rn.t!=null&&rn.hasOwnProperty("t")&&(pn=hn.onnx.TensorProto.verify(rn.t)))return"t."+pn;if(rn.g!=null&&rn.hasOwnProperty("g")&&(pn=hn.onnx.GraphProto.verify(rn.g)))return"g."+pn;if(rn.floats!=null&&rn.hasOwnProperty("floats")){if(!Array.isArray(rn.floats))return"floats: array expected";for(var cn=0;cn<rn.floats.length;++cn)if(typeof rn.floats[cn]!="number")return"floats: number[] expected"}if(rn.ints!=null&&rn.hasOwnProperty("ints")){if(!Array.isArray(rn.ints))return"ints: array expected";for(cn=0;cn<rn.ints.length;++cn)if(!(fn.isInteger(rn.ints[cn])||rn.ints[cn]&&fn.isInteger(rn.ints[cn].low)&&fn.isInteger(rn.ints[cn].high)))return"ints: integer|Long[] expected"}if(rn.strings!=null&&rn.hasOwnProperty("strings")){if(!Array.isArray(rn.strings))return"strings: array expected";for(cn=0;cn<rn.strings.length;++cn)if(!(rn.strings[cn]&&typeof rn.strings[cn].length=="number"||fn.isString(rn.strings[cn])))return"strings: buffer[] expected"}if(rn.tensors!=null&&rn.hasOwnProperty("tensors")){if(!Array.isArray(rn.tensors))return"tensors: array expected";for(cn=0;cn<rn.tensors.length;++cn)if(pn=hn.onnx.TensorProto.verify(rn.tensors[cn]))return"tensors."+pn}if(rn.graphs!=null&&rn.hasOwnProperty("graphs")){if(!Array.isArray(rn.graphs))return"graphs: array expected";for(cn=0;cn<rn.graphs.length;++cn){var pn;if(pn=hn.onnx.GraphProto.verify(rn.graphs[cn]))return"graphs."+pn}}return null},an.fromObject=function(rn){if(rn instanceof hn.onnx.AttributeProto)return rn;var cn=new hn.onnx.AttributeProto;switch(rn.name!=null&&(cn.name=String(rn.name)),rn.refAttrName!=null&&(cn.refAttrName=String(rn.refAttrName)),rn.docString!=null&&(cn.docString=String(rn.docString)),rn.type){case"UNDEFINED":case 0:cn.type=0;break;case"FLOAT":case 1:cn.type=1;break;case"INT":case 2:cn.type=2;break;case"STRING":case 3:cn.type=3;break;case"TENSOR":case 4:cn.type=4;break;case"GRAPH":case 5:cn.type=5;break;case"FLOATS":case 6:cn.type=6;break;case"INTS":case 7:cn.type=7;break;case"STRINGS":case 8:cn.type=8;break;case"TENSORS":case 9:cn.type=9;break;case"GRAPHS":case 10:cn.type=10}if(rn.f!=null&&(cn.f=Number(rn.f)),rn.i!=null&&(fn.Long?(cn.i=fn.Long.fromValue(rn.i)).unsigned=!1:typeof rn.i=="string"?cn.i=parseInt(rn.i,10):typeof rn.i=="number"?cn.i=rn.i:typeof rn.i=="object"&&(cn.i=new fn.LongBits(rn.i.low>>>0,rn.i.high>>>0).toNumber())),rn.s!=null&&(typeof rn.s=="string"?fn.base64.decode(rn.s,cn.s=fn.newBuffer(fn.base64.length(rn.s)),0):rn.s.length&&(cn.s=rn.s)),rn.t!=null){if(typeof rn.t!="object")throw TypeError(".onnx.AttributeProto.t: object expected");cn.t=hn.onnx.TensorProto.fromObject(rn.t)}if(rn.g!=null){if(typeof rn.g!="object")throw TypeError(".onnx.AttributeProto.g: object expected");cn.g=hn.onnx.GraphProto.fromObject(rn.g)}if(rn.floats){if(!Array.isArray(rn.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");cn.floats=[];for(var pn=0;pn<rn.floats.length;++pn)cn.floats[pn]=Number(rn.floats[pn])}if(rn.ints){if(!Array.isArray(rn.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");for(cn.ints=[],pn=0;pn<rn.ints.length;++pn)fn.Long?(cn.ints[pn]=fn.Long.fromValue(rn.ints[pn])).unsigned=!1:typeof rn.ints[pn]=="string"?cn.ints[pn]=parseInt(rn.ints[pn],10):typeof rn.ints[pn]=="number"?cn.ints[pn]=rn.ints[pn]:typeof rn.ints[pn]=="object"&&(cn.ints[pn]=new fn.LongBits(rn.ints[pn].low>>>0,rn.ints[pn].high>>>0).toNumber())}if(rn.strings){if(!Array.isArray(rn.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");for(cn.strings=[],pn=0;pn<rn.strings.length;++pn)typeof rn.strings[pn]=="string"?fn.base64.decode(rn.strings[pn],cn.strings[pn]=fn.newBuffer(fn.base64.length(rn.strings[pn])),0):rn.strings[pn].length&&(cn.strings[pn]=rn.strings[pn])}if(rn.tensors){if(!Array.isArray(rn.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");for(cn.tensors=[],pn=0;pn<rn.tensors.length;++pn){if(typeof rn.tensors[pn]!="object")throw TypeError(".onnx.AttributeProto.tensors: object expected");cn.tensors[pn]=hn.onnx.TensorProto.fromObject(rn.tensors[pn])}}if(rn.graphs){if(!Array.isArray(rn.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");for(cn.graphs=[],pn=0;pn<rn.graphs.length;++pn){if(typeof rn.graphs[pn]!="object")throw TypeError(".onnx.AttributeProto.graphs: object expected");cn.graphs[pn]=hn.onnx.GraphProto.fromObject(rn.graphs[pn])}}return cn},an.toObject=function(rn,cn){cn||(cn={});var pn={};if((cn.arrays||cn.defaults)&&(pn.floats=[],pn.ints=[],pn.strings=[],pn.tensors=[],pn.graphs=[]),cn.defaults){if(pn.name="",pn.f=0,fn.Long){var mn=new fn.Long(0,0,!1);pn.i=cn.longs===String?mn.toString():cn.longs===Number?mn.toNumber():mn}else pn.i=cn.longs===String?"0":0;cn.bytes===String?pn.s="":(pn.s=[],cn.bytes!==Array&&(pn.s=fn.newBuffer(pn.s))),pn.t=null,pn.g=null,pn.docString="",pn.type=cn.enums===String?"UNDEFINED":0,pn.refAttrName=""}if(rn.name!=null&&rn.hasOwnProperty("name")&&(pn.name=rn.name),rn.f!=null&&rn.hasOwnProperty("f")&&(pn.f=cn.json&&!isFinite(rn.f)?String(rn.f):rn.f),rn.i!=null&&rn.hasOwnProperty("i")&&(typeof rn.i=="number"?pn.i=cn.longs===String?String(rn.i):rn.i:pn.i=cn.longs===String?fn.Long.prototype.toString.call(rn.i):cn.longs===Number?new fn.LongBits(rn.i.low>>>0,rn.i.high>>>0).toNumber():rn.i),rn.s!=null&&rn.hasOwnProperty("s")&&(pn.s=cn.bytes===String?fn.base64.encode(rn.s,0,rn.s.length):cn.bytes===Array?Array.prototype.slice.call(rn.s):rn.s),rn.t!=null&&rn.hasOwnProperty("t")&&(pn.t=hn.onnx.TensorProto.toObject(rn.t,cn)),rn.g!=null&&rn.hasOwnProperty("g")&&(pn.g=hn.onnx.GraphProto.toObject(rn.g,cn)),rn.floats&&rn.floats.length){pn.floats=[];for(var xn=0;xn<rn.floats.length;++xn)pn.floats[xn]=cn.json&&!isFinite(rn.floats[xn])?String(rn.floats[xn]):rn.floats[xn]}if(rn.ints&&rn.ints.length)for(pn.ints=[],xn=0;xn<rn.ints.length;++xn)typeof rn.ints[xn]=="number"?pn.ints[xn]=cn.longs===String?String(rn.ints[xn]):rn.ints[xn]:pn.ints[xn]=cn.longs===String?fn.Long.prototype.toString.call(rn.ints[xn]):cn.longs===Number?new fn.LongBits(rn.ints[xn].low>>>0,rn.ints[xn].high>>>0).toNumber():rn.ints[xn];if(rn.strings&&rn.strings.length)for(pn.strings=[],xn=0;xn<rn.strings.length;++xn)pn.strings[xn]=cn.bytes===String?fn.base64.encode(rn.strings[xn],0,rn.strings[xn].length):cn.bytes===Array?Array.prototype.slice.call(rn.strings[xn]):rn.strings[xn];if(rn.tensors&&rn.tensors.length)for(pn.tensors=[],xn=0;xn<rn.tensors.length;++xn)pn.tensors[xn]=hn.onnx.TensorProto.toObject(rn.tensors[xn],cn);if(rn.graphs&&rn.graphs.length)for(pn.graphs=[],xn=0;xn<rn.graphs.length;++xn)pn.graphs[xn]=hn.onnx.GraphProto.toObject(rn.graphs[xn],cn);return rn.docString!=null&&rn.hasOwnProperty("docString")&&(pn.docString=rn.docString),rn.type!=null&&rn.hasOwnProperty("type")&&(pn.type=cn.enums===String?hn.onnx.AttributeProto.AttributeType[rn.type]:rn.type),rn.refAttrName!=null&&rn.hasOwnProperty("refAttrName")&&(pn.refAttrName=rn.refAttrName),pn},an.prototype.toJSON=function(){return this.constructor.toObject(this,on.util.toJSONOptions)},an.AttributeType=function(){var rn={},cn=Object.create(rn);return cn[rn[0]="UNDEFINED"]=0,cn[rn[1]="FLOAT"]=1,cn[rn[2]="INT"]=2,cn[rn[3]="STRING"]=3,cn[rn[4]="TENSOR"]=4,cn[rn[5]="GRAPH"]=5,cn[rn[6]="FLOATS"]=6,cn[rn[7]="INTS"]=7,cn[rn[8]="STRINGS"]=8,cn[rn[9]="TENSORS"]=9,cn[rn[10]="GRAPHS"]=10,cn}(),an}(),sn.ValueInfoProto=function(){function an(rn){if(rn)for(var cn=Object.keys(rn),pn=0;pn<cn.length;++pn)rn[cn[pn]]!=null&&(this[cn[pn]]=rn[cn[pn]])}return an.prototype.name="",an.prototype.type=null,an.prototype.docString="",an.create=function(rn){return new an(rn)},an.encode=function(rn,cn){return cn||(cn=dn.create()),rn.name!=null&&rn.hasOwnProperty("name")&&cn.uint32(10).string(rn.name),rn.type!=null&&rn.hasOwnProperty("type")&&hn.onnx.TypeProto.encode(rn.type,cn.uint32(18).fork()).ldelim(),rn.docString!=null&&rn.hasOwnProperty("docString")&&cn.uint32(26).string(rn.docString),cn},an.encodeDelimited=function(rn,cn){return this.encode(rn,cn).ldelim()},an.decode=function(rn,cn){rn instanceof un||(rn=un.create(rn));for(var pn=cn===void 0?rn.len:rn.pos+cn,mn=new hn.onnx.ValueInfoProto;rn.pos<pn;){var xn=rn.uint32();switch(xn>>>3){case 1:mn.name=rn.string();break;case 2:mn.type=hn.onnx.TypeProto.decode(rn,rn.uint32());break;case 3:mn.docString=rn.string();break;default:rn.skipType(7&xn)}}return mn},an.decodeDelimited=function(rn){return rn instanceof un||(rn=new un(rn)),this.decode(rn,rn.uint32())},an.verify=function(rn){if(typeof rn!="object"||rn===null)return"object expected";if(rn.name!=null&&rn.hasOwnProperty("name")&&!fn.isString(rn.name))return"name: string expected";if(rn.type!=null&&rn.hasOwnProperty("type")){var cn=hn.onnx.TypeProto.verify(rn.type);if(cn)return"type."+cn}return rn.docString!=null&&rn.hasOwnProperty("docString")&&!fn.isString(rn.docString)?"docString: string expected":null},an.fromObject=function(rn){if(rn instanceof hn.onnx.ValueInfoProto)return rn;var cn=new hn.onnx.ValueInfoProto;if(rn.name!=null&&(cn.name=String(rn.name)),rn.type!=null){if(typeof rn.type!="object")throw TypeError(".onnx.ValueInfoProto.type: object expected");cn.type=hn.onnx.TypeProto.fromObject(rn.type)}return rn.docString!=null&&(cn.docString=String(rn.docString)),cn},an.toObject=function(rn,cn){cn||(cn={});var pn={};return cn.defaults&&(pn.name="",pn.type=null,pn.docString=""),rn.name!=null&&rn.hasOwnProperty("name")&&(pn.name=rn.name),rn.type!=null&&rn.hasOwnProperty("type")&&(pn.type=hn.onnx.TypeProto.toObject(rn.type,cn)),rn.docString!=null&&rn.hasOwnProperty("docString")&&(pn.docString=rn.docString),pn},an.prototype.toJSON=function(){return this.constructor.toObject(this,on.util.toJSONOptions)},an}(),sn.NodeProto=function(){function an(rn){if(this.input=[],this.output=[],this.attribute=[],rn)for(var cn=Object.keys(rn),pn=0;pn<cn.length;++pn)rn[cn[pn]]!=null&&(this[cn[pn]]=rn[cn[pn]])}return an.prototype.input=fn.emptyArray,an.prototype.output=fn.emptyArray,an.prototype.name="",an.prototype.opType="",an.prototype.domain="",an.prototype.attribute=fn.emptyArray,an.prototype.docString="",an.create=function(rn){return new an(rn)},an.encode=function(rn,cn){if(cn||(cn=dn.create()),rn.input!=null&&rn.input.length)for(var pn=0;pn<rn.input.length;++pn)cn.uint32(10).string(rn.input[pn]);if(rn.output!=null&&rn.output.length)for(pn=0;pn<rn.output.length;++pn)cn.uint32(18).string(rn.output[pn]);if(rn.name!=null&&rn.hasOwnProperty("name")&&cn.uint32(26).string(rn.name),rn.opType!=null&&rn.hasOwnProperty("opType")&&cn.uint32(34).string(rn.opType),rn.attribute!=null&&rn.attribute.length)for(pn=0;pn<rn.attribute.length;++pn)hn.onnx.AttributeProto.encode(rn.attribute[pn],cn.uint32(42).fork()).ldelim();return rn.docString!=null&&rn.hasOwnProperty("docString")&&cn.uint32(50).string(rn.docString),rn.domain!=null&&rn.hasOwnProperty("domain")&&cn.uint32(58).string(rn.domain),cn},an.encodeDelimited=function(rn,cn){return this.encode(rn,cn).ldelim()},an.decode=function(rn,cn){rn instanceof un||(rn=un.create(rn));for(var pn=cn===void 0?rn.len:rn.pos+cn,mn=new hn.onnx.NodeProto;rn.pos<pn;){var xn=rn.uint32();switch(xn>>>3){case 1:mn.input&&mn.input.length||(mn.input=[]),mn.input.push(rn.string());break;case 2:mn.output&&mn.output.length||(mn.output=[]),mn.output.push(rn.string());break;case 3:mn.name=rn.string();break;case 4:mn.opType=rn.string();break;case 7:mn.domain=rn.string();break;case 5:mn.attribute&&mn.attribute.length||(mn.attribute=[]),mn.attribute.push(hn.onnx.AttributeProto.decode(rn,rn.uint32()));break;case 6:mn.docString=rn.string();break;default:rn.skipType(7&xn)}}return mn},an.decodeDelimited=function(rn){return rn instanceof un||(rn=new un(rn)),this.decode(rn,rn.uint32())},an.verify=function(rn){if(typeof rn!="object"||rn===null)return"object expected";if(rn.input!=null&&rn.hasOwnProperty("input")){if(!Array.isArray(rn.input))return"input: array expected";for(var cn=0;cn<rn.input.length;++cn)if(!fn.isString(rn.input[cn]))return"input: string[] expected"}if(rn.output!=null&&rn.hasOwnProperty("output")){if(!Array.isArray(rn.output))return"output: array expected";for(cn=0;cn<rn.output.length;++cn)if(!fn.isString(rn.output[cn]))return"output: string[] expected"}if(rn.name!=null&&rn.hasOwnProperty("name")&&!fn.isString(rn.name))return"name: string expected";if(rn.opType!=null&&rn.hasOwnProperty("opType")&&!fn.isString(rn.opType))return"opType: string expected";if(rn.domain!=null&&rn.hasOwnProperty("domain")&&!fn.isString(rn.domain))return"domain: string expected";if(rn.attribute!=null&&rn.hasOwnProperty("attribute")){if(!Array.isArray(rn.attribute))return"attribute: array expected";for(cn=0;cn<rn.attribute.length;++cn){var pn=hn.onnx.AttributeProto.verify(rn.attribute[cn]);if(pn)return"attribute."+pn}}return rn.docString!=null&&rn.hasOwnProperty("docString")&&!fn.isString(rn.docString)?"docString: string expected":null},an.fromObject=function(rn){if(rn instanceof hn.onnx.NodeProto)return rn;var cn=new hn.onnx.NodeProto;if(rn.input){if(!Array.isArray(rn.input))throw TypeError(".onnx.NodeProto.input: array expected");cn.input=[];for(var pn=0;pn<rn.input.length;++pn)cn.input[pn]=String(rn.input[pn])}if(rn.output){if(!Array.isArray(rn.output))throw TypeError(".onnx.NodeProto.output: array expected");for(cn.output=[],pn=0;pn<rn.output.length;++pn)cn.output[pn]=String(rn.output[pn])}if(rn.name!=null&&(cn.name=String(rn.name)),rn.opType!=null&&(cn.opType=String(rn.opType)),rn.domain!=null&&(cn.domain=String(rn.domain)),rn.attribute){if(!Array.isArray(rn.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");for(cn.attribute=[],pn=0;pn<rn.attribute.length;++pn){if(typeof rn.attribute[pn]!="object")throw TypeError(".onnx.NodeProto.attribute: object expected");cn.attribute[pn]=hn.onnx.AttributeProto.fromObject(rn.attribute[pn])}}return rn.docString!=null&&(cn.docString=String(rn.docString)),cn},an.toObject=function(rn,cn){cn||(cn={});var pn={};if((cn.arrays||cn.defaults)&&(pn.input=[],pn.output=[],pn.attribute=[]),cn.defaults&&(pn.name="",pn.opType="",pn.docString="",pn.domain=""),rn.input&&rn.input.length){pn.input=[];for(var mn=0;mn<rn.input.length;++mn)pn.input[mn]=rn.input[mn]}if(rn.output&&rn.output.length)for(pn.output=[],mn=0;mn<rn.output.length;++mn)pn.output[mn]=rn.output[mn];if(rn.name!=null&&rn.hasOwnProperty("name")&&(pn.name=rn.name),rn.opType!=null&&rn.hasOwnProperty("opType")&&(pn.opType=rn.opType),rn.attribute&&rn.attribute.length)for(pn.attribute=[],mn=0;mn<rn.attribute.length;++mn)pn.attribute[mn]=hn.onnx.AttributeProto.toObject(rn.attribute[mn],cn);return rn.docString!=null&&rn.hasOwnProperty("docString")&&(pn.docString=rn.docString),rn.domain!=null&&rn.hasOwnProperty("domain")&&(pn.domain=rn.domain),pn},an.prototype.toJSON=function(){return this.constructor.toObject(this,on.util.toJSONOptions)},an}(),sn.ModelProto=function(){function an(rn){if(this.opsetImport=[],this.metadataProps=[],rn)for(var cn=Object.keys(rn),pn=0;pn<cn.length;++pn)rn[cn[pn]]!=null&&(this[cn[pn]]=rn[cn[pn]])}return an.prototype.irVersion=fn.Long?fn.Long.fromBits(0,0,!1):0,an.prototype.opsetImport=fn.emptyArray,an.prototype.producerName="",an.prototype.producerVersion="",an.prototype.domain="",an.prototype.modelVersion=fn.Long?fn.Long.fromBits(0,0,!1):0,an.prototype.docString="",an.prototype.graph=null,an.prototype.metadataProps=fn.emptyArray,an.create=function(rn){return new an(rn)},an.encode=function(rn,cn){if(cn||(cn=dn.create()),rn.irVersion!=null&&rn.hasOwnProperty("irVersion")&&cn.uint32(8).int64(rn.irVersion),rn.producerName!=null&&rn.hasOwnProperty("producerName")&&cn.uint32(18).string(rn.producerName),rn.producerVersion!=null&&rn.hasOwnProperty("producerVersion")&&cn.uint32(26).string(rn.producerVersion),rn.domain!=null&&rn.hasOwnProperty("domain")&&cn.uint32(34).string(rn.domain),rn.modelVersion!=null&&rn.hasOwnProperty("modelVersion")&&cn.uint32(40).int64(rn.modelVersion),rn.docString!=null&&rn.hasOwnProperty("docString")&&cn.uint32(50).string(rn.docString),rn.graph!=null&&rn.hasOwnProperty("graph")&&hn.onnx.GraphProto.encode(rn.graph,cn.uint32(58).fork()).ldelim(),rn.opsetImport!=null&&rn.opsetImport.length)for(var pn=0;pn<rn.opsetImport.length;++pn)hn.onnx.OperatorSetIdProto.encode(rn.opsetImport[pn],cn.uint32(66).fork()).ldelim();if(rn.metadataProps!=null&&rn.metadataProps.length)for(pn=0;pn<rn.metadataProps.length;++pn)hn.onnx.StringStringEntryProto.encode(rn.metadataProps[pn],cn.uint32(114).fork()).ldelim();return cn},an.encodeDelimited=function(rn,cn){return this.encode(rn,cn).ldelim()},an.decode=function(rn,cn){rn instanceof un||(rn=un.create(rn));for(var pn=cn===void 0?rn.len:rn.pos+cn,mn=new hn.onnx.ModelProto;rn.pos<pn;){var xn=rn.uint32();switch(xn>>>3){case 1:mn.irVersion=rn.int64();break;case 8:mn.opsetImport&&mn.opsetImport.length||(mn.opsetImport=[]),mn.opsetImport.push(hn.onnx.OperatorSetIdProto.decode(rn,rn.uint32()));break;case 2:mn.producerName=rn.string();break;case 3:mn.producerVersion=rn.string();break;case 4:mn.domain=rn.string();break;case 5:mn.modelVersion=rn.int64();break;case 6:mn.docString=rn.string();break;case 7:mn.graph=hn.onnx.GraphProto.decode(rn,rn.uint32());break;case 14:mn.metadataProps&&mn.metadataProps.length||(mn.metadataProps=[]),mn.metadataProps.push(hn.onnx.StringStringEntryProto.decode(rn,rn.uint32()));break;default:rn.skipType(7&xn)}}return mn},an.decodeDelimited=function(rn){return rn instanceof un||(rn=new un(rn)),this.decode(rn,rn.uint32())},an.verify=function(rn){if(typeof rn!="object"||rn===null)return"object expected";if(rn.irVersion!=null&&rn.hasOwnProperty("irVersion")&&!(fn.isInteger(rn.irVersion)||rn.irVersion&&fn.isInteger(rn.irVersion.low)&&fn.isInteger(rn.irVersion.high)))return"irVersion: integer|Long expected";if(rn.opsetImport!=null&&rn.hasOwnProperty("opsetImport")){if(!Array.isArray(rn.opsetImport))return"opsetImport: array expected";for(var cn=0;cn<rn.opsetImport.length;++cn)if(pn=hn.onnx.OperatorSetIdProto.verify(rn.opsetImport[cn]))return"opsetImport."+pn}if(rn.producerName!=null&&rn.hasOwnProperty("producerName")&&!fn.isString(rn.producerName))return"producerName: string expected";if(rn.producerVersion!=null&&rn.hasOwnProperty("producerVersion")&&!fn.isString(rn.producerVersion))return"producerVersion: string expected";if(rn.domain!=null&&rn.hasOwnProperty("domain")&&!fn.isString(rn.domain))return"domain: string expected";if(rn.modelVersion!=null&&rn.hasOwnProperty("modelVersion")&&!(fn.isInteger(rn.modelVersion)||rn.modelVersion&&fn.isInteger(rn.modelVersion.low)&&fn.isInteger(rn.modelVersion.high)))return"modelVersion: integer|Long expected";if(rn.docString!=null&&rn.hasOwnProperty("docString")&&!fn.isString(rn.docString))return"docString: string expected";if(rn.graph!=null&&rn.hasOwnProperty("graph")&&(pn=hn.onnx.GraphProto.verify(rn.graph)))return"graph."+pn;if(rn.metadataProps!=null&&rn.hasOwnProperty("metadataProps")){if(!Array.isArray(rn.metadataProps))return"metadataProps: array expected";for(cn=0;cn<rn.metadataProps.length;++cn){var pn;if(pn=hn.onnx.StringStringEntryProto.verify(rn.metadataProps[cn]))return"metadataProps."+pn}}return null},an.fromObject=function(rn){if(rn instanceof hn.onnx.ModelProto)return rn;var cn=new hn.onnx.ModelProto;if(rn.irVersion!=null&&(fn.Long?(cn.irVersion=fn.Long.fromValue(rn.irVersion)).unsigned=!1:typeof rn.irVersion=="string"?cn.irVersion=parseInt(rn.irVersion,10):typeof rn.irVersion=="number"?cn.irVersion=rn.irVersion:typeof rn.irVersion=="object"&&(cn.irVersion=new fn.LongBits(rn.irVersion.low>>>0,rn.irVersion.high>>>0).toNumber())),rn.opsetImport){if(!Array.isArray(rn.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");cn.opsetImport=[];for(var pn=0;pn<rn.opsetImport.length;++pn){if(typeof rn.opsetImport[pn]!="object")throw TypeError(".onnx.ModelProto.opsetImport: object expected");cn.opsetImport[pn]=hn.onnx.OperatorSetIdProto.fromObject(rn.opsetImport[pn])}}if(rn.producerName!=null&&(cn.producerName=String(rn.producerName)),rn.producerVersion!=null&&(cn.producerVersion=String(rn.producerVersion)),rn.domain!=null&&(cn.domain=String(rn.domain)),rn.modelVersion!=null&&(fn.Long?(cn.modelVersion=fn.Long.fromValue(rn.modelVersion)).unsigned=!1:typeof rn.modelVersion=="string"?cn.modelVersion=parseInt(rn.modelVersion,10):typeof rn.modelVersion=="number"?cn.modelVersion=rn.modelVersion:typeof rn.modelVersion=="object"&&(cn.modelVersion=new fn.LongBits(rn.modelVersion.low>>>0,rn.modelVersion.high>>>0).toNumber())),rn.docString!=null&&(cn.docString=String(rn.docString)),rn.graph!=null){if(typeof rn.graph!="object")throw TypeError(".onnx.ModelProto.graph: object expected");cn.graph=hn.onnx.GraphProto.fromObject(rn.graph)}if(rn.metadataProps){if(!Array.isArray(rn.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");for(cn.metadataProps=[],pn=0;pn<rn.metadataProps.length;++pn){if(typeof rn.metadataProps[pn]!="object")throw TypeError(".onnx.ModelProto.metadataProps: object expected");cn.metadataProps[pn]=hn.onnx.StringStringEntryProto.fromObject(rn.metadataProps[pn])}}return cn},an.toObject=function(rn,cn){cn||(cn={});var pn={};if((cn.arrays||cn.defaults)&&(pn.opsetImport=[],pn.metadataProps=[]),cn.defaults){if(fn.Long){var mn=new fn.Long(0,0,!1);pn.irVersion=cn.longs===String?mn.toString():cn.longs===Number?mn.toNumber():mn}else pn.irVersion=cn.longs===String?"0":0;pn.producerName="",pn.producerVersion="",pn.domain="",fn.Long?(mn=new fn.Long(0,0,!1),pn.modelVersion=cn.longs===String?mn.toString():cn.longs===Number?mn.toNumber():mn):pn.modelVersion=cn.longs===String?"0":0,pn.docString="",pn.graph=null}if(rn.irVersion!=null&&rn.hasOwnProperty("irVersion")&&(typeof rn.irVersion=="number"?pn.irVersion=cn.longs===String?String(rn.irVersion):rn.irVersion:pn.irVersion=cn.longs===String?fn.Long.prototype.toString.call(rn.irVersion):cn.longs===Number?new fn.LongBits(rn.irVersion.low>>>0,rn.irVersion.high>>>0).toNumber():rn.irVersion),rn.producerName!=null&&rn.hasOwnProperty("producerName")&&(pn.producerName=rn.producerName),rn.producerVersion!=null&&rn.hasOwnProperty("producerVersion")&&(pn.producerVersion=rn.producerVersion),rn.domain!=null&&rn.hasOwnProperty("domain")&&(pn.domain=rn.domain),rn.modelVersion!=null&&rn.hasOwnProperty("modelVersion")&&(typeof rn.modelVersion=="number"?pn.modelVersion=cn.longs===String?String(rn.modelVersion):rn.modelVersion:pn.modelVersion=cn.longs===String?fn.Long.prototype.toString.call(rn.modelVersion):cn.longs===Number?new fn.LongBits(rn.modelVersion.low>>>0,rn.modelVersion.high>>>0).toNumber():rn.modelVersion),rn.docString!=null&&rn.hasOwnProperty("docString")&&(pn.docString=rn.docString),rn.graph!=null&&rn.hasOwnProperty("graph")&&(pn.graph=hn.onnx.GraphProto.toObject(rn.graph,cn)),rn.opsetImport&&rn.opsetImport.length){pn.opsetImport=[];for(var xn=0;xn<rn.opsetImport.length;++xn)pn.opsetImport[xn]=hn.onnx.OperatorSetIdProto.toObject(rn.opsetImport[xn],cn)}if(rn.metadataProps&&rn.metadataProps.length)for(pn.metadataProps=[],xn=0;xn<rn.metadataProps.length;++xn)pn.metadataProps[xn]=hn.onnx.StringStringEntryProto.toObject(rn.metadataProps[xn],cn);return pn},an.prototype.toJSON=function(){return this.constructor.toObject(this,on.util.toJSONOptions)},an}(),sn.StringStringEntryProto=function(){function an(rn){if(rn)for(var cn=Object.keys(rn),pn=0;pn<cn.length;++pn)rn[cn[pn]]!=null&&(this[cn[pn]]=rn[cn[pn]])}return an.prototype.key="",an.prototype.value="",an.create=function(rn){return new an(rn)},an.encode=function(rn,cn){return cn||(cn=dn.create()),rn.key!=null&&rn.hasOwnProperty("key")&&cn.uint32(10).string(rn.key),rn.value!=null&&rn.hasOwnProperty("value")&&cn.uint32(18).string(rn.value),cn},an.encodeDelimited=function(rn,cn){return this.encode(rn,cn).ldelim()},an.decode=function(rn,cn){rn instanceof un||(rn=un.create(rn));for(var pn=cn===void 0?rn.len:rn.pos+cn,mn=new hn.onnx.StringStringEntryProto;rn.pos<pn;){var xn=rn.uint32();switch(xn>>>3){case 1:mn.key=rn.string();break;case 2:mn.value=rn.string();break;default:rn.skipType(7&xn)}}return mn},an.decodeDelimited=function(rn){return rn instanceof un||(rn=new un(rn)),this.decode(rn,rn.uint32())},an.verify=function(rn){return typeof rn!="object"||rn===null?"object expected":rn.key!=null&&rn.hasOwnProperty("key")&&!fn.isString(rn.key)?"key: string expected":rn.value!=null&&rn.hasOwnProperty("value")&&!fn.isString(rn.value)?"value: string expected":null},an.fromObject=function(rn){if(rn instanceof hn.onnx.StringStringEntryProto)return rn;var cn=new hn.onnx.StringStringEntryProto;return rn.key!=null&&(cn.key=String(rn.key)),rn.value!=null&&(cn.value=String(rn.value)),cn},an.toObject=function(rn,cn){cn||(cn={});var pn={};return cn.defaults&&(pn.key="",pn.value=""),rn.key!=null&&rn.hasOwnProperty("key")&&(pn.key=rn.key),rn.value!=null&&rn.hasOwnProperty("value")&&(pn.value=rn.value),pn},an.prototype.toJSON=function(){return this.constructor.toObject(this,on.util.toJSONOptions)},an}(),sn.TensorAnnotation=function(){function an(rn){if(this.quantParameterTensorNames=[],rn)for(var cn=Object.keys(rn),pn=0;pn<cn.length;++pn)rn[cn[pn]]!=null&&(this[cn[pn]]=rn[cn[pn]])}return an.prototype.tensorName="",an.prototype.quantParameterTensorNames=fn.emptyArray,an.create=function(rn){return new an(rn)},an.encode=function(rn,cn){if(cn||(cn=dn.create()),rn.tensorName!=null&&rn.hasOwnProperty("tensorName")&&cn.uint32(10).string(rn.tensorName),rn.quantParameterTensorNames!=null&&rn.quantParameterTensorNames.length)for(var pn=0;pn<rn.quantParameterTensorNames.length;++pn)hn.onnx.StringStringEntryProto.encode(rn.quantParameterTensorNames[pn],cn.uint32(18).fork()).ldelim();return cn},an.encodeDelimited=function(rn,cn){return this.encode(rn,cn).ldelim()},an.decode=function(rn,cn){rn instanceof un||(rn=un.create(rn));for(var pn=cn===void 0?rn.len:rn.pos+cn,mn=new hn.onnx.TensorAnnotation;rn.pos<pn;){var xn=rn.uint32();switch(xn>>>3){case 1:mn.tensorName=rn.string();break;case 2:mn.quantParameterTensorNames&&mn.quantParameterTensorNames.length||(mn.quantParameterTensorNames=[]),mn.quantParameterTensorNames.push(hn.onnx.StringStringEntryProto.decode(rn,rn.uint32()));break;default:rn.skipType(7&xn)}}return mn},an.decodeDelimited=function(rn){return rn instanceof un||(rn=new un(rn)),this.decode(rn,rn.uint32())},an.verify=function(rn){if(typeof rn!="object"||rn===null)return"object expected";if(rn.tensorName!=null&&rn.hasOwnProperty("tensorName")&&!fn.isString(rn.tensorName))return"tensorName: string expected";if(rn.quantParameterTensorNames!=null&&rn.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(rn.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var cn=0;cn<rn.quantParameterTensorNames.length;++cn){var pn=hn.onnx.StringStringEntryProto.verify(rn.quantParameterTensorNames[cn]);if(pn)return"quantParameterTensorNames."+pn}}return null},an.fromObject=function(rn){if(rn instanceof hn.onnx.TensorAnnotation)return rn;var cn=new hn.onnx.TensorAnnotation;if(rn.tensorName!=null&&(cn.tensorName=String(rn.tensorName)),rn.quantParameterTensorNames){if(!Array.isArray(rn.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");cn.quantParameterTensorNames=[];for(var pn=0;pn<rn.quantParameterTensorNames.length;++pn){if(typeof rn.quantParameterTensorNames[pn]!="object")throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");cn.quantParameterTensorNames[pn]=hn.onnx.StringStringEntryProto.fromObject(rn.quantParameterTensorNames[pn])}}return cn},an.toObject=function(rn,cn){cn||(cn={});var pn={};if((cn.arrays||cn.defaults)&&(pn.quantParameterTensorNames=[]),cn.defaults&&(pn.tensorName=""),rn.tensorName!=null&&rn.hasOwnProperty("tensorName")&&(pn.tensorName=rn.tensorName),rn.quantParameterTensorNames&&rn.quantParameterTensorNames.length){pn.quantParameterTensorNames=[];for(var mn=0;mn<rn.quantParameterTensorNames.length;++mn)pn.quantParameterTensorNames[mn]=hn.onnx.StringStringEntryProto.toObject(rn.quantParameterTensorNames[mn],cn)}return pn},an.prototype.toJSON=function(){return this.constructor.toObject(this,on.util.toJSONOptions)},an}(),sn.GraphProto=function(){function an(rn){if(this.node=[],this.initializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],rn)for(var cn=Object.keys(rn),pn=0;pn<cn.length;++pn)rn[cn[pn]]!=null&&(this[cn[pn]]=rn[cn[pn]])}return an.prototype.node=fn.emptyArray,an.prototype.name="",an.prototype.initializer=fn.emptyArray,an.prototype.docString="",an.prototype.input=fn.emptyArray,an.prototype.output=fn.emptyArray,an.prototype.valueInfo=fn.emptyArray,an.prototype.quantizationAnnotation=fn.emptyArray,an.create=function(rn){return new an(rn)},an.encode=function(rn,cn){if(cn||(cn=dn.create()),rn.node!=null&&rn.node.length)for(var pn=0;pn<rn.node.length;++pn)hn.onnx.NodeProto.encode(rn.node[pn],cn.uint32(10).fork()).ldelim();if(rn.name!=null&&rn.hasOwnProperty("name")&&cn.uint32(18).string(rn.name),rn.initializer!=null&&rn.initializer.length)for(pn=0;pn<rn.initializer.length;++pn)hn.onnx.TensorProto.encode(rn.initializer[pn],cn.uint32(42).fork()).ldelim();if(rn.docString!=null&&rn.hasOwnProperty("docString")&&cn.uint32(82).string(rn.docString),rn.input!=null&&rn.input.length)for(pn=0;pn<rn.input.length;++pn)hn.onnx.ValueInfoProto.encode(rn.input[pn],cn.uint32(90).fork()).ldelim();if(rn.output!=null&&rn.output.length)for(pn=0;pn<rn.output.length;++pn)hn.onnx.ValueInfoProto.encode(rn.output[pn],cn.uint32(98).fork()).ldelim();if(rn.valueInfo!=null&&rn.valueInfo.length)for(pn=0;pn<rn.valueInfo.length;++pn)hn.onnx.ValueInfoProto.encode(rn.valueInfo[pn],cn.uint32(106).fork()).ldelim();if(rn.quantizationAnnotation!=null&&rn.quantizationAnnotation.length)for(pn=0;pn<rn.quantizationAnnotation.length;++pn)hn.onnx.TensorAnnotation.encode(rn.quantizationAnnotation[pn],cn.uint32(114).fork()).ldelim();return cn},an.encodeDelimited=function(rn,cn){return this.encode(rn,cn).ldelim()},an.decode=function(rn,cn){rn instanceof un||(rn=un.create(rn));for(var pn=cn===void 0?rn.len:rn.pos+cn,mn=new hn.onnx.GraphProto;rn.pos<pn;){var xn=rn.uint32();switch(xn>>>3){case 1:mn.node&&mn.node.length||(mn.node=[]),mn.node.push(hn.onnx.NodeProto.decode(rn,rn.uint32()));break;case 2:mn.name=rn.string();break;case 5:mn.initializer&&mn.initializer.length||(mn.initializer=[]),mn.initializer.push(hn.onnx.TensorProto.decode(rn,rn.uint32()));break;case 10:mn.docString=rn.string();break;case 11:mn.input&&mn.input.length||(mn.input=[]),mn.input.push(hn.onnx.ValueInfoProto.decode(rn,rn.uint32()));break;case 12:mn.output&&mn.output.length||(mn.output=[]),mn.output.push(hn.onnx.ValueInfoProto.decode(rn,rn.uint32()));break;case 13:mn.valueInfo&&mn.valueInfo.length||(mn.valueInfo=[]),mn.valueInfo.push(hn.onnx.ValueInfoProto.decode(rn,rn.uint32()));break;case 14:mn.quantizationAnnotation&&mn.quantizationAnnotation.length||(mn.quantizationAnnotation=[]),mn.quantizationAnnotation.push(hn.onnx.TensorAnnotation.decode(rn,rn.uint32()));break;default:rn.skipType(7&xn)}}return mn},an.decodeDelimited=function(rn){return rn instanceof un||(rn=new un(rn)),this.decode(rn,rn.uint32())},an.verify=function(rn){if(typeof rn!="object"||rn===null)return"object expected";if(rn.node!=null&&rn.hasOwnProperty("node")){if(!Array.isArray(rn.node))return"node: array expected";for(var cn=0;cn<rn.node.length;++cn)if(pn=hn.onnx.NodeProto.verify(rn.node[cn]))return"node."+pn}if(rn.name!=null&&rn.hasOwnProperty("name")&&!fn.isString(rn.name))return"name: string expected";if(rn.initializer!=null&&rn.hasOwnProperty("initializer")){if(!Array.isArray(rn.initializer))return"initializer: array expected";for(cn=0;cn<rn.initializer.length;++cn)if(pn=hn.onnx.TensorProto.verify(rn.initializer[cn]))return"initializer."+pn}if(rn.docString!=null&&rn.hasOwnProperty("docString")&&!fn.isString(rn.docString))return"docString: string expected";if(rn.input!=null&&rn.hasOwnProperty("input")){if(!Array.isArray(rn.input))return"input: array expected";for(cn=0;cn<rn.input.length;++cn)if(pn=hn.onnx.ValueInfoProto.verify(rn.input[cn]))return"input."+pn}if(rn.output!=null&&rn.hasOwnProperty("output")){if(!Array.isArray(rn.output))return"output: array expected";for(cn=0;cn<rn.output.length;++cn)if(pn=hn.onnx.ValueInfoProto.verify(rn.output[cn]))return"output."+pn}if(rn.valueInfo!=null&&rn.hasOwnProperty("valueInfo")){if(!Array.isArray(rn.valueInfo))return"valueInfo: array expected";for(cn=0;cn<rn.valueInfo.length;++cn)if(pn=hn.onnx.ValueInfoProto.verify(rn.valueInfo[cn]))return"valueInfo."+pn}if(rn.quantizationAnnotation!=null&&rn.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(rn.quantizationAnnotation))return"quantizationAnnotation: array expected";for(cn=0;cn<rn.quantizationAnnotation.length;++cn){var pn;if(pn=hn.onnx.TensorAnnotation.verify(rn.quantizationAnnotation[cn]))return"quantizationAnnotation."+pn}}return null},an.fromObject=function(rn){if(rn instanceof hn.onnx.GraphProto)return rn;var cn=new hn.onnx.GraphProto;if(rn.node){if(!Array.isArray(rn.node))throw TypeError(".onnx.GraphProto.node: array expected");cn.node=[];for(var pn=0;pn<rn.node.length;++pn){if(typeof rn.node[pn]!="object")throw TypeError(".onnx.GraphProto.node: object expected");cn.node[pn]=hn.onnx.NodeProto.fromObject(rn.node[pn])}}if(rn.name!=null&&(cn.name=String(rn.name)),rn.initializer){if(!Array.isArray(rn.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");for(cn.initializer=[],pn=0;pn<rn.initializer.length;++pn){if(typeof rn.initializer[pn]!="object")throw TypeError(".onnx.GraphProto.initializer: object expected");cn.initializer[pn]=hn.onnx.TensorProto.fromObject(rn.initializer[pn])}}if(rn.docString!=null&&(cn.docString=String(rn.docString)),rn.input){if(!Array.isArray(rn.input))throw TypeError(".onnx.GraphProto.input: array expected");for(cn.input=[],pn=0;pn<rn.input.length;++pn){if(typeof rn.input[pn]!="object")throw TypeError(".onnx.GraphProto.input: object expected");cn.input[pn]=hn.onnx.ValueInfoProto.fromObject(rn.input[pn])}}if(rn.output){if(!Array.isArray(rn.output))throw TypeError(".onnx.GraphProto.output: array expected");for(cn.output=[],pn=0;pn<rn.output.length;++pn){if(typeof rn.output[pn]!="object")throw TypeError(".onnx.GraphProto.output: object expected");cn.output[pn]=hn.onnx.ValueInfoProto.fromObject(rn.output[pn])}}if(rn.valueInfo){if(!Array.isArray(rn.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");for(cn.valueInfo=[],pn=0;pn<rn.valueInfo.length;++pn){if(typeof rn.valueInfo[pn]!="object")throw TypeError(".onnx.GraphProto.valueInfo: object expected");cn.valueInfo[pn]=hn.onnx.ValueInfoProto.fromObject(rn.valueInfo[pn])}}if(rn.quantizationAnnotation){if(!Array.isArray(rn.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");for(cn.quantizationAnnotation=[],pn=0;pn<rn.quantizationAnnotation.length;++pn){if(typeof rn.quantizationAnnotation[pn]!="object")throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");cn.quantizationAnnotation[pn]=hn.onnx.TensorAnnotation.fromObject(rn.quantizationAnnotation[pn])}}return cn},an.toObject=function(rn,cn){cn||(cn={});var pn={};if((cn.arrays||cn.defaults)&&(pn.node=[],pn.initializer=[],pn.input=[],pn.output=[],pn.valueInfo=[],pn.quantizationAnnotation=[]),cn.defaults&&(pn.name="",pn.docString=""),rn.node&&rn.node.length){pn.node=[];for(var mn=0;mn<rn.node.length;++mn)pn.node[mn]=hn.onnx.NodeProto.toObject(rn.node[mn],cn)}if(rn.name!=null&&rn.hasOwnProperty("name")&&(pn.name=rn.name),rn.initializer&&rn.initializer.length)for(pn.initializer=[],mn=0;mn<rn.initializer.length;++mn)pn.initializer[mn]=hn.onnx.TensorProto.toObject(rn.initializer[mn],cn);if(rn.docString!=null&&rn.hasOwnProperty("docString")&&(pn.docString=rn.docString),rn.input&&rn.input.length)for(pn.input=[],mn=0;mn<rn.input.length;++mn)pn.input[mn]=hn.onnx.ValueInfoProto.toObject(rn.input[mn],cn);if(rn.output&&rn.output.length)for(pn.output=[],mn=0;mn<rn.output.length;++mn)pn.output[mn]=hn.onnx.ValueInfoProto.toObject(rn.output[mn],cn);if(rn.valueInfo&&rn.valueInfo.length)for(pn.valueInfo=[],mn=0;mn<rn.valueInfo.length;++mn)pn.valueInfo[mn]=hn.onnx.ValueInfoProto.toObject(rn.valueInfo[mn],cn);if(rn.quantizationAnnotation&&rn.quantizationAnnotation.length)for(pn.quantizationAnnotation=[],mn=0;mn<rn.quantizationAnnotation.length;++mn)pn.quantizationAnnotation[mn]=hn.onnx.TensorAnnotation.toObject(rn.quantizationAnnotation[mn],cn);return pn},an.prototype.toJSON=function(){return this.constructor.toObject(this,on.util.toJSONOptions)},an}(),sn.TensorProto=function(){function an(rn){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],rn)for(var cn=Object.keys(rn),pn=0;pn<cn.length;++pn)rn[cn[pn]]!=null&&(this[cn[pn]]=rn[cn[pn]])}return an.prototype.dims=fn.emptyArray,an.prototype.dataType=0,an.prototype.segment=null,an.prototype.floatData=fn.emptyArray,an.prototype.int32Data=fn.emptyArray,an.prototype.stringData=fn.emptyArray,an.prototype.int64Data=fn.emptyArray,an.prototype.name="",an.prototype.docString="",an.prototype.rawData=fn.newBuffer([]),an.prototype.externalData=fn.emptyArray,an.prototype.dataLocation=0,an.prototype.doubleData=fn.emptyArray,an.prototype.uint64Data=fn.emptyArray,an.create=function(rn){return new an(rn)},an.encode=function(rn,cn){if(cn||(cn=dn.create()),rn.dims!=null&&rn.dims.length){cn.uint32(10).fork();for(var pn=0;pn<rn.dims.length;++pn)cn.int64(rn.dims[pn]);cn.ldelim()}if(rn.dataType!=null&&rn.hasOwnProperty("dataType")&&cn.uint32(16).int32(rn.dataType),rn.segment!=null&&rn.hasOwnProperty("segment")&&hn.onnx.TensorProto.Segment.encode(rn.segment,cn.uint32(26).fork()).ldelim(),rn.floatData!=null&&rn.floatData.length){for(cn.uint32(34).fork(),pn=0;pn<rn.floatData.length;++pn)cn.float(rn.floatData[pn]);cn.ldelim()}if(rn.int32Data!=null&&rn.int32Data.length){for(cn.uint32(42).fork(),pn=0;pn<rn.int32Data.length;++pn)cn.int32(rn.int32Data[pn]);cn.ldelim()}if(rn.stringData!=null&&rn.stringData.length)for(pn=0;pn<rn.stringData.length;++pn)cn.uint32(50).bytes(rn.stringData[pn]);if(rn.int64Data!=null&&rn.int64Data.length){for(cn.uint32(58).fork(),pn=0;pn<rn.int64Data.length;++pn)cn.int64(rn.int64Data[pn]);cn.ldelim()}if(rn.name!=null&&rn.hasOwnProperty("name")&&cn.uint32(66).string(rn.name),rn.rawData!=null&&rn.hasOwnProperty("rawData")&&cn.uint32(74).bytes(rn.rawData),rn.doubleData!=null&&rn.doubleData.length){for(cn.uint32(82).fork(),pn=0;pn<rn.doubleData.length;++pn)cn.double(rn.doubleData[pn]);cn.ldelim()}if(rn.uint64Data!=null&&rn.uint64Data.length){for(cn.uint32(90).fork(),pn=0;pn<rn.uint64Data.length;++pn)cn.uint64(rn.uint64Data[pn]);cn.ldelim()}if(rn.docString!=null&&rn.hasOwnProperty("docString")&&cn.uint32(98).string(rn.docString),rn.externalData!=null&&rn.externalData.length)for(pn=0;pn<rn.externalData.length;++pn)hn.onnx.StringStringEntryProto.encode(rn.externalData[pn],cn.uint32(106).fork()).ldelim();return rn.dataLocation!=null&&rn.hasOwnProperty("dataLocation")&&cn.uint32(112).int32(rn.dataLocation),cn},an.encodeDelimited=function(rn,cn){return this.encode(rn,cn).ldelim()},an.decode=function(rn,cn){rn instanceof un||(rn=un.create(rn));for(var pn=cn===void 0?rn.len:rn.pos+cn,mn=new hn.onnx.TensorProto;rn.pos<pn;){var xn=rn.uint32();switch(xn>>>3){case 1:if(mn.dims&&mn.dims.length||(mn.dims=[]),(7&xn)==2)for(var gn=rn.uint32()+rn.pos;rn.pos<gn;)mn.dims.push(rn.int64());else mn.dims.push(rn.int64());break;case 2:mn.dataType=rn.int32();break;case 3:mn.segment=hn.onnx.TensorProto.Segment.decode(rn,rn.uint32());break;case 4:if(mn.floatData&&mn.floatData.length||(mn.floatData=[]),(7&xn)==2)for(gn=rn.uint32()+rn.pos;rn.pos<gn;)mn.floatData.push(rn.float());else mn.floatData.push(rn.float());break;case 5:if(mn.int32Data&&mn.int32Data.length||(mn.int32Data=[]),(7&xn)==2)for(gn=rn.uint32()+rn.pos;rn.pos<gn;)mn.int32Data.push(rn.int32());else mn.int32Data.push(rn.int32());break;case 6:mn.stringData&&mn.stringData.length||(mn.stringData=[]),mn.stringData.push(rn.bytes());break;case 7:if(mn.int64Data&&mn.int64Data.length||(mn.int64Data=[]),(7&xn)==2)for(gn=rn.uint32()+rn.pos;rn.pos<gn;)mn.int64Data.push(rn.int64());else mn.int64Data.push(rn.int64());break;case 8:mn.name=rn.string();break;case 12:mn.docString=rn.string();break;case 9:mn.rawData=rn.bytes();break;case 13:mn.externalData&&mn.externalData.length||(mn.externalData=[]),mn.externalData.push(hn.onnx.StringStringEntryProto.decode(rn,rn.uint32()));break;case 14:mn.dataLocation=rn.int32();break;case 10:if(mn.doubleData&&mn.doubleData.length||(mn.doubleData=[]),(7&xn)==2)for(gn=rn.uint32()+rn.pos;rn.pos<gn;)mn.doubleData.push(rn.double());else mn.doubleData.push(rn.double());break;case 11:if(mn.uint64Data&&mn.uint64Data.length||(mn.uint64Data=[]),(7&xn)==2)for(gn=rn.uint32()+rn.pos;rn.pos<gn;)mn.uint64Data.push(rn.uint64());else mn.uint64Data.push(rn.uint64());break;default:rn.skipType(7&xn)}}return mn},an.decodeDelimited=function(rn){return rn instanceof un||(rn=new un(rn)),this.decode(rn,rn.uint32())},an.verify=function(rn){if(typeof rn!="object"||rn===null)return"object expected";if(rn.dims!=null&&rn.hasOwnProperty("dims")){if(!Array.isArray(rn.dims))return"dims: array expected";for(var cn=0;cn<rn.dims.length;++cn)if(!(fn.isInteger(rn.dims[cn])||rn.dims[cn]&&fn.isInteger(rn.dims[cn].low)&&fn.isInteger(rn.dims[cn].high)))return"dims: integer|Long[] expected"}if(rn.dataType!=null&&rn.hasOwnProperty("dataType")&&!fn.isInteger(rn.dataType))return"dataType: integer expected";if(rn.segment!=null&&rn.hasOwnProperty("segment")&&(pn=hn.onnx.TensorProto.Segment.verify(rn.segment)))return"segment."+pn;if(rn.floatData!=null&&rn.hasOwnProperty("floatData")){if(!Array.isArray(rn.floatData))return"floatData: array expected";for(cn=0;cn<rn.floatData.length;++cn)if(typeof rn.floatData[cn]!="number")return"floatData: number[] expected"}if(rn.int32Data!=null&&rn.hasOwnProperty("int32Data")){if(!Array.isArray(rn.int32Data))return"int32Data: array expected";for(cn=0;cn<rn.int32Data.length;++cn)if(!fn.isInteger(rn.int32Data[cn]))return"int32Data: integer[] expected"}if(rn.stringData!=null&&rn.hasOwnProperty("stringData")){if(!Array.isArray(rn.stringData))return"stringData: array expected";for(cn=0;cn<rn.stringData.length;++cn)if(!(rn.stringData[cn]&&typeof rn.stringData[cn].length=="number"||fn.isString(rn.stringData[cn])))return"stringData: buffer[] expected"}if(rn.int64Data!=null&&rn.hasOwnProperty("int64Data")){if(!Array.isArray(rn.int64Data))return"int64Data: array expected";for(cn=0;cn<rn.int64Data.length;++cn)if(!(fn.isInteger(rn.int64Data[cn])||rn.int64Data[cn]&&fn.isInteger(rn.int64Data[cn].low)&&fn.isInteger(rn.int64Data[cn].high)))return"int64Data: integer|Long[] expected"}if(rn.name!=null&&rn.hasOwnProperty("name")&&!fn.isString(rn.name))return"name: string expected";if(rn.docString!=null&&rn.hasOwnProperty("docString")&&!fn.isString(rn.docString))return"docString: string expected";if(rn.rawData!=null&&rn.hasOwnProperty("rawData")&&!(rn.rawData&&typeof rn.rawData.length=="number"||fn.isString(rn.rawData)))return"rawData: buffer expected";if(rn.externalData!=null&&rn.hasOwnProperty("externalData")){if(!Array.isArray(rn.externalData))return"externalData: array expected";for(cn=0;cn<rn.externalData.length;++cn){var pn;if(pn=hn.onnx.StringStringEntryProto.verify(rn.externalData[cn]))return"externalData."+pn}}if(rn.dataLocation!=null&&rn.hasOwnProperty("dataLocation"))switch(rn.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:}if(rn.doubleData!=null&&rn.hasOwnProperty("doubleData")){if(!Array.isArray(rn.doubleData))return"doubleData: array expected";for(cn=0;cn<rn.doubleData.length;++cn)if(typeof rn.doubleData[cn]!="number")return"doubleData: number[] expected"}if(rn.uint64Data!=null&&rn.hasOwnProperty("uint64Data")){if(!Array.isArray(rn.uint64Data))return"uint64Data: array expected";for(cn=0;cn<rn.uint64Data.length;++cn)if(!(fn.isInteger(rn.uint64Data[cn])||rn.uint64Data[cn]&&fn.isInteger(rn.uint64Data[cn].low)&&fn.isInteger(rn.uint64Data[cn].high)))return"uint64Data: integer|Long[] expected"}return null},an.fromObject=function(rn){if(rn instanceof hn.onnx.TensorProto)return rn;var cn=new hn.onnx.TensorProto;if(rn.dims){if(!Array.isArray(rn.dims))throw TypeError(".onnx.TensorProto.dims: array expected");cn.dims=[];for(var pn=0;pn<rn.dims.length;++pn)fn.Long?(cn.dims[pn]=fn.Long.fromValue(rn.dims[pn])).unsigned=!1:typeof rn.dims[pn]=="string"?cn.dims[pn]=parseInt(rn.dims[pn],10):typeof rn.dims[pn]=="number"?cn.dims[pn]=rn.dims[pn]:typeof rn.dims[pn]=="object"&&(cn.dims[pn]=new fn.LongBits(rn.dims[pn].low>>>0,rn.dims[pn].high>>>0).toNumber())}if(rn.dataType!=null&&(cn.dataType=0|rn.dataType),rn.segment!=null){if(typeof rn.segment!="object")throw TypeError(".onnx.TensorProto.segment: object expected");cn.segment=hn.onnx.TensorProto.Segment.fromObject(rn.segment)}if(rn.floatData){if(!Array.isArray(rn.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");for(cn.floatData=[],pn=0;pn<rn.floatData.length;++pn)cn.floatData[pn]=Number(rn.floatData[pn])}if(rn.int32Data){if(!Array.isArray(rn.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");for(cn.int32Data=[],pn=0;pn<rn.int32Data.length;++pn)cn.int32Data[pn]=0|rn.int32Data[pn]}if(rn.stringData){if(!Array.isArray(rn.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");for(cn.stringData=[],pn=0;pn<rn.stringData.length;++pn)typeof rn.stringData[pn]=="string"?fn.base64.decode(rn.stringData[pn],cn.stringData[pn]=fn.newBuffer(fn.base64.length(rn.stringData[pn])),0):rn.stringData[pn].length&&(cn.stringData[pn]=rn.stringData[pn])}if(rn.int64Data){if(!Array.isArray(rn.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");for(cn.int64Data=[],pn=0;pn<rn.int64Data.length;++pn)fn.Long?(cn.int64Data[pn]=fn.Long.fromValue(rn.int64Data[pn])).unsigned=!1:typeof rn.int64Data[pn]=="string"?cn.int64Data[pn]=parseInt(rn.int64Data[pn],10):typeof rn.int64Data[pn]=="number"?cn.int64Data[pn]=rn.int64Data[pn]:typeof rn.int64Data[pn]=="object"&&(cn.int64Data[pn]=new fn.LongBits(rn.int64Data[pn].low>>>0,rn.int64Data[pn].high>>>0).toNumber())}if(rn.name!=null&&(cn.name=String(rn.name)),rn.docString!=null&&(cn.docString=String(rn.docString)),rn.rawData!=null&&(typeof rn.rawData=="string"?fn.base64.decode(rn.rawData,cn.rawData=fn.newBuffer(fn.base64.length(rn.rawData)),0):rn.rawData.length&&(cn.rawData=rn.rawData)),rn.externalData){if(!Array.isArray(rn.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");for(cn.externalData=[],pn=0;pn<rn.externalData.length;++pn){if(typeof rn.externalData[pn]!="object")throw TypeError(".onnx.TensorProto.externalData: object expected");cn.externalData[pn]=hn.onnx.StringStringEntryProto.fromObject(rn.externalData[pn])}}switch(rn.dataLocation){case"DEFAULT":case 0:cn.dataLocation=0;break;case"EXTERNAL":case 1:cn.dataLocation=1}if(rn.doubleData){if(!Array.isArray(rn.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");for(cn.doubleData=[],pn=0;pn<rn.doubleData.length;++pn)cn.doubleData[pn]=Number(rn.doubleData[pn])}if(rn.uint64Data){if(!Array.isArray(rn.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");for(cn.uint64Data=[],pn=0;pn<rn.uint64Data.length;++pn)fn.Long?(cn.uint64Data[pn]=fn.Long.fromValue(rn.uint64Data[pn])).unsigned=!0:typeof rn.uint64Data[pn]=="string"?cn.uint64Data[pn]=parseInt(rn.uint64Data[pn],10):typeof rn.uint64Data[pn]=="number"?cn.uint64Data[pn]=rn.uint64Data[pn]:typeof rn.uint64Data[pn]=="object"&&(cn.uint64Data[pn]=new fn.LongBits(rn.uint64Data[pn].low>>>0,rn.uint64Data[pn].high>>>0).toNumber(!0))}return cn},an.toObject=function(rn,cn){cn||(cn={});var pn={};if((cn.arrays||cn.defaults)&&(pn.dims=[],pn.floatData=[],pn.int32Data=[],pn.stringData=[],pn.int64Data=[],pn.doubleData=[],pn.uint64Data=[],pn.externalData=[]),cn.defaults&&(pn.dataType=0,pn.segment=null,pn.name="",cn.bytes===String?pn.rawData="":(pn.rawData=[],cn.bytes!==Array&&(pn.rawData=fn.newBuffer(pn.rawData))),pn.docString="",pn.dataLocation=cn.enums===String?"DEFAULT":0),rn.dims&&rn.dims.length){pn.dims=[];for(var mn=0;mn<rn.dims.length;++mn)typeof rn.dims[mn]=="number"?pn.dims[mn]=cn.longs===String?String(rn.dims[mn]):rn.dims[mn]:pn.dims[mn]=cn.longs===String?fn.Long.prototype.toString.call(rn.dims[mn]):cn.longs===Number?new fn.LongBits(rn.dims[mn].low>>>0,rn.dims[mn].high>>>0).toNumber():rn.dims[mn]}if(rn.dataType!=null&&rn.hasOwnProperty("dataType")&&(pn.dataType=rn.dataType),rn.segment!=null&&rn.hasOwnProperty("segment")&&(pn.segment=hn.onnx.TensorProto.Segment.toObject(rn.segment,cn)),rn.floatData&&rn.floatData.length)for(pn.floatData=[],mn=0;mn<rn.floatData.length;++mn)pn.floatData[mn]=cn.json&&!isFinite(rn.floatData[mn])?String(rn.floatData[mn]):rn.floatData[mn];if(rn.int32Data&&rn.int32Data.length)for(pn.int32Data=[],mn=0;mn<rn.int32Data.length;++mn)pn.int32Data[mn]=rn.int32Data[mn];if(rn.stringData&&rn.stringData.length)for(pn.stringData=[],mn=0;mn<rn.stringData.length;++mn)pn.stringData[mn]=cn.bytes===String?fn.base64.encode(rn.stringData[mn],0,rn.stringData[mn].length):cn.bytes===Array?Array.prototype.slice.call(rn.stringData[mn]):rn.stringData[mn];if(rn.int64Data&&rn.int64Data.length)for(pn.int64Data=[],mn=0;mn<rn.int64Data.length;++mn)typeof rn.int64Data[mn]=="number"?pn.int64Data[mn]=cn.longs===String?String(rn.int64Data[mn]):rn.int64Data[mn]:pn.int64Data[mn]=cn.longs===String?fn.Long.prototype.toString.call(rn.int64Data[mn]):cn.longs===Number?new fn.LongBits(rn.int64Data[mn].low>>>0,rn.int64Data[mn].high>>>0).toNumber():rn.int64Data[mn];if(rn.name!=null&&rn.hasOwnProperty("name")&&(pn.name=rn.name),rn.rawData!=null&&rn.hasOwnProperty("rawData")&&(pn.rawData=cn.bytes===String?fn.base64.encode(rn.rawData,0,rn.rawData.length):cn.bytes===Array?Array.prototype.slice.call(rn.rawData):rn.rawData),rn.doubleData&&rn.doubleData.length)for(pn.doubleData=[],mn=0;mn<rn.doubleData.length;++mn)pn.doubleData[mn]=cn.json&&!isFinite(rn.doubleData[mn])?String(rn.doubleData[mn]):rn.doubleData[mn];if(rn.uint64Data&&rn.uint64Data.length)for(pn.uint64Data=[],mn=0;mn<rn.uint64Data.length;++mn)typeof rn.uint64Data[mn]=="number"?pn.uint64Data[mn]=cn.longs===String?String(rn.uint64Data[mn]):rn.uint64Data[mn]:pn.uint64Data[mn]=cn.longs===String?fn.Long.prototype.toString.call(rn.uint64Data[mn]):cn.longs===Number?new fn.LongBits(rn.uint64Data[mn].low>>>0,rn.uint64Data[mn].high>>>0).toNumber(!0):rn.uint64Data[mn];if(rn.docString!=null&&rn.hasOwnProperty("docString")&&(pn.docString=rn.docString),rn.externalData&&rn.externalData.length)for(pn.externalData=[],mn=0;mn<rn.externalData.length;++mn)pn.externalData[mn]=hn.onnx.StringStringEntryProto.toObject(rn.externalData[mn],cn);return rn.dataLocation!=null&&rn.hasOwnProperty("dataLocation")&&(pn.dataLocation=cn.enums===String?hn.onnx.TensorProto.DataLocation[rn.dataLocation]:rn.dataLocation),pn},an.prototype.toJSON=function(){return this.constructor.toObject(this,on.util.toJSONOptions)},an.DataType=function(){var rn={},cn=Object.create(rn);return cn[rn[0]="UNDEFINED"]=0,cn[rn[1]="FLOAT"]=1,cn[rn[2]="UINT8"]=2,cn[rn[3]="INT8"]=3,cn[rn[4]="UINT16"]=4,cn[rn[5]="INT16"]=5,cn[rn[6]="INT32"]=6,cn[rn[7]="INT64"]=7,cn[rn[8]="STRING"]=8,cn[rn[9]="BOOL"]=9,cn[rn[10]="FLOAT16"]=10,cn[rn[11]="DOUBLE"]=11,cn[rn[12]="UINT32"]=12,cn[rn[13]="UINT64"]=13,cn[rn[14]="COMPLEX64"]=14,cn[rn[15]="COMPLEX128"]=15,cn[rn[16]="BFLOAT16"]=16,cn}(),an.Segment=function(){function rn(cn){if(cn)for(var pn=Object.keys(cn),mn=0;mn<pn.length;++mn)cn[pn[mn]]!=null&&(this[pn[mn]]=cn[pn[mn]])}return rn.prototype.begin=fn.Long?fn.Long.fromBits(0,0,!1):0,rn.prototype.end=fn.Long?fn.Long.fromBits(0,0,!1):0,rn.create=function(cn){return new rn(cn)},rn.encode=function(cn,pn){return pn||(pn=dn.create()),cn.begin!=null&&cn.hasOwnProperty("begin")&&pn.uint32(8).int64(cn.begin),cn.end!=null&&cn.hasOwnProperty("end")&&pn.uint32(16).int64(cn.end),pn},rn.encodeDelimited=function(cn,pn){return this.encode(cn,pn).ldelim()},rn.decode=function(cn,pn){cn instanceof un||(cn=un.create(cn));for(var mn=pn===void 0?cn.len:cn.pos+pn,xn=new hn.onnx.TensorProto.Segment;cn.pos<mn;){var gn=cn.uint32();switch(gn>>>3){case 1:xn.begin=cn.int64();break;case 2:xn.end=cn.int64();break;default:cn.skipType(7&gn)}}return xn},rn.decodeDelimited=function(cn){return cn instanceof un||(cn=new un(cn)),this.decode(cn,cn.uint32())},rn.verify=function(cn){return typeof cn!="object"||cn===null?"object expected":cn.begin!=null&&cn.hasOwnProperty("begin")&&!(fn.isInteger(cn.begin)||cn.begin&&fn.isInteger(cn.begin.low)&&fn.isInteger(cn.begin.high))?"begin: integer|Long expected":cn.end!=null&&cn.hasOwnProperty("end")&&!(fn.isInteger(cn.end)||cn.end&&fn.isInteger(cn.end.low)&&fn.isInteger(cn.end.high))?"end: integer|Long expected":null},rn.fromObject=function(cn){if(cn instanceof hn.onnx.TensorProto.Segment)return cn;var pn=new hn.onnx.TensorProto.Segment;return cn.begin!=null&&(fn.Long?(pn.begin=fn.Long.fromValue(cn.begin)).unsigned=!1:typeof cn.begin=="string"?pn.begin=parseInt(cn.begin,10):typeof cn.begin=="number"?pn.begin=cn.begin:typeof cn.begin=="object"&&(pn.begin=new fn.LongBits(cn.begin.low>>>0,cn.begin.high>>>0).toNumber())),cn.end!=null&&(fn.Long?(pn.end=fn.Long.fromValue(cn.end)).unsigned=!1:typeof cn.end=="string"?pn.end=parseInt(cn.end,10):typeof cn.end=="number"?pn.end=cn.end:typeof cn.end=="object"&&(pn.end=new fn.LongBits(cn.end.low>>>0,cn.end.high>>>0).toNumber())),pn},rn.toObject=function(cn,pn){pn||(pn={});var mn={};if(pn.defaults){if(fn.Long){var xn=new fn.Long(0,0,!1);mn.begin=pn.longs===String?xn.toString():pn.longs===Number?xn.toNumber():xn}else mn.begin=pn.longs===String?"0":0;fn.Long?(xn=new fn.Long(0,0,!1),mn.end=pn.longs===String?xn.toString():pn.longs===Number?xn.toNumber():xn):mn.end=pn.longs===String?"0":0}return cn.begin!=null&&cn.hasOwnProperty("begin")&&(typeof cn.begin=="number"?mn.begin=pn.longs===String?String(cn.begin):cn.begin:mn.begin=pn.longs===String?fn.Long.prototype.toString.call(cn.begin):pn.longs===Number?new fn.LongBits(cn.begin.low>>>0,cn.begin.high>>>0).toNumber():cn.begin),cn.end!=null&&cn.hasOwnProperty("end")&&(typeof cn.end=="number"?mn.end=pn.longs===String?String(cn.end):cn.end:mn.end=pn.longs===String?fn.Long.prototype.toString.call(cn.end):pn.longs===Number?new fn.LongBits(cn.end.low>>>0,cn.end.high>>>0).toNumber():cn.end),mn},rn.prototype.toJSON=function(){return this.constructor.toObject(this,on.util.toJSONOptions)},rn}(),an.DataLocation=function(){var rn={},cn=Object.create(rn);return cn[rn[0]="DEFAULT"]=0,cn[rn[1]="EXTERNAL"]=1,cn}(),an}(),sn.TensorShapeProto=function(){function an(rn){if(this.dim=[],rn)for(var cn=Object.keys(rn),pn=0;pn<cn.length;++pn)rn[cn[pn]]!=null&&(this[cn[pn]]=rn[cn[pn]])}return an.prototype.dim=fn.emptyArray,an.create=function(rn){return new an(rn)},an.encode=function(rn,cn){if(cn||(cn=dn.create()),rn.dim!=null&&rn.dim.length)for(var pn=0;pn<rn.dim.length;++pn)hn.onnx.TensorShapeProto.Dimension.encode(rn.dim[pn],cn.uint32(10).fork()).ldelim();return cn},an.encodeDelimited=function(rn,cn){return this.encode(rn,cn).ldelim()},an.decode=function(rn,cn){rn instanceof un||(rn=un.create(rn));for(var pn=cn===void 0?rn.len:rn.pos+cn,mn=new hn.onnx.TensorShapeProto;rn.pos<pn;){var xn=rn.uint32();xn>>>3==1?(mn.dim&&mn.dim.length||(mn.dim=[]),mn.dim.push(hn.onnx.TensorShapeProto.Dimension.decode(rn,rn.uint32()))):rn.skipType(7&xn)}return mn},an.decodeDelimited=function(rn){return rn instanceof un||(rn=new un(rn)),this.decode(rn,rn.uint32())},an.verify=function(rn){if(typeof rn!="object"||rn===null)return"object expected";if(rn.dim!=null&&rn.hasOwnProperty("dim")){if(!Array.isArray(rn.dim))return"dim: array expected";for(var cn=0;cn<rn.dim.length;++cn){var pn=hn.onnx.TensorShapeProto.Dimension.verify(rn.dim[cn]);if(pn)return"dim."+pn}}return null},an.fromObject=function(rn){if(rn instanceof hn.onnx.TensorShapeProto)return rn;var cn=new hn.onnx.TensorShapeProto;if(rn.dim){if(!Array.isArray(rn.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");cn.dim=[];for(var pn=0;pn<rn.dim.length;++pn){if(typeof rn.dim[pn]!="object")throw TypeError(".onnx.TensorShapeProto.dim: object expected");cn.dim[pn]=hn.onnx.TensorShapeProto.Dimension.fromObject(rn.dim[pn])}}return cn},an.toObject=function(rn,cn){cn||(cn={});var pn={};if((cn.arrays||cn.defaults)&&(pn.dim=[]),rn.dim&&rn.dim.length){pn.dim=[];for(var mn=0;mn<rn.dim.length;++mn)pn.dim[mn]=hn.onnx.TensorShapeProto.Dimension.toObject(rn.dim[mn],cn)}return pn},an.prototype.toJSON=function(){return this.constructor.toObject(this,on.util.toJSONOptions)},an.Dimension=function(){function rn(pn){if(pn)for(var mn=Object.keys(pn),xn=0;xn<mn.length;++xn)pn[mn[xn]]!=null&&(this[mn[xn]]=pn[mn[xn]])}var cn;return rn.prototype.dimValue=fn.Long?fn.Long.fromBits(0,0,!1):0,rn.prototype.dimParam="",rn.prototype.denotation="",Object.defineProperty(rn.prototype,"value",{get:fn.oneOfGetter(cn=["dimValue","dimParam"]),set:fn.oneOfSetter(cn)}),rn.create=function(pn){return new rn(pn)},rn.encode=function(pn,mn){return mn||(mn=dn.create()),pn.dimValue!=null&&pn.hasOwnProperty("dimValue")&&mn.uint32(8).int64(pn.dimValue),pn.dimParam!=null&&pn.hasOwnProperty("dimParam")&&mn.uint32(18).string(pn.dimParam),pn.denotation!=null&&pn.hasOwnProperty("denotation")&&mn.uint32(26).string(pn.denotation),mn},rn.encodeDelimited=function(pn,mn){return this.encode(pn,mn).ldelim()},rn.decode=function(pn,mn){pn instanceof un||(pn=un.create(pn));for(var xn=mn===void 0?pn.len:pn.pos+mn,gn=new hn.onnx.TensorShapeProto.Dimension;pn.pos<xn;){var yn=pn.uint32();switch(yn>>>3){case 1:gn.dimValue=pn.int64();break;case 2:gn.dimParam=pn.string();break;case 3:gn.denotation=pn.string();break;default:pn.skipType(7&yn)}}return gn},rn.decodeDelimited=function(pn){return pn instanceof un||(pn=new un(pn)),this.decode(pn,pn.uint32())},rn.verify=function(pn){if(typeof pn!="object"||pn===null)return"object expected";var mn={};if(pn.dimValue!=null&&pn.hasOwnProperty("dimValue")&&(mn.value=1,!(fn.isInteger(pn.dimValue)||pn.dimValue&&fn.isInteger(pn.dimValue.low)&&fn.isInteger(pn.dimValue.high))))return"dimValue: integer|Long expected";if(pn.dimParam!=null&&pn.hasOwnProperty("dimParam")){if(mn.value===1)return"value: multiple values";if(mn.value=1,!fn.isString(pn.dimParam))return"dimParam: string expected"}return pn.denotation!=null&&pn.hasOwnProperty("denotation")&&!fn.isString(pn.denotation)?"denotation: string expected":null},rn.fromObject=function(pn){if(pn instanceof hn.onnx.TensorShapeProto.Dimension)return pn;var mn=new hn.onnx.TensorShapeProto.Dimension;return pn.dimValue!=null&&(fn.Long?(mn.dimValue=fn.Long.fromValue(pn.dimValue)).unsigned=!1:typeof pn.dimValue=="string"?mn.dimValue=parseInt(pn.dimValue,10):typeof pn.dimValue=="number"?mn.dimValue=pn.dimValue:typeof pn.dimValue=="object"&&(mn.dimValue=new fn.LongBits(pn.dimValue.low>>>0,pn.dimValue.high>>>0).toNumber())),pn.dimParam!=null&&(mn.dimParam=String(pn.dimParam)),pn.denotation!=null&&(mn.denotation=String(pn.denotation)),mn},rn.toObject=function(pn,mn){mn||(mn={});var xn={};return mn.defaults&&(xn.denotation=""),pn.dimValue!=null&&pn.hasOwnProperty("dimValue")&&(typeof pn.dimValue=="number"?xn.dimValue=mn.longs===String?String(pn.dimValue):pn.dimValue:xn.dimValue=mn.longs===String?fn.Long.prototype.toString.call(pn.dimValue):mn.longs===Number?new fn.LongBits(pn.dimValue.low>>>0,pn.dimValue.high>>>0).toNumber():pn.dimValue,mn.oneofs&&(xn.value="dimValue")),pn.dimParam!=null&&pn.hasOwnProperty("dimParam")&&(xn.dimParam=pn.dimParam,mn.oneofs&&(xn.value="dimParam")),pn.denotation!=null&&pn.hasOwnProperty("denotation")&&(xn.denotation=pn.denotation),xn},rn.prototype.toJSON=function(){return this.constructor.toObject(this,on.util.toJSONOptions)},rn}(),an}(),sn.TypeProto=function(){function an(cn){if(cn)for(var pn=Object.keys(cn),mn=0;mn<pn.length;++mn)cn[pn[mn]]!=null&&(this[pn[mn]]=cn[pn[mn]])}var rn;return an.prototype.tensorType=null,an.prototype.denotation="",Object.defineProperty(an.prototype,"value",{get:fn.oneOfGetter(rn=["tensorType"]),set:fn.oneOfSetter(rn)}),an.create=function(cn){return new an(cn)},an.encode=function(cn,pn){return pn||(pn=dn.create()),cn.tensorType!=null&&cn.hasOwnProperty("tensorType")&&hn.onnx.TypeProto.Tensor.encode(cn.tensorType,pn.uint32(10).fork()).ldelim(),cn.denotation!=null&&cn.hasOwnProperty("denotation")&&pn.uint32(50).string(cn.denotation),pn},an.encodeDelimited=function(cn,pn){return this.encode(cn,pn).ldelim()},an.decode=function(cn,pn){cn instanceof un||(cn=un.create(cn));for(var mn=pn===void 0?cn.len:cn.pos+pn,xn=new hn.onnx.TypeProto;cn.pos<mn;){var gn=cn.uint32();switch(gn>>>3){case 1:xn.tensorType=hn.onnx.TypeProto.Tensor.decode(cn,cn.uint32());break;case 6:xn.denotation=cn.string();break;default:cn.skipType(7&gn)}}return xn},an.decodeDelimited=function(cn){return cn instanceof un||(cn=new un(cn)),this.decode(cn,cn.uint32())},an.verify=function(cn){if(typeof cn!="object"||cn===null)return"object expected";if(cn.tensorType!=null&&cn.hasOwnProperty("tensorType")){var pn=hn.onnx.TypeProto.Tensor.verify(cn.tensorType);if(pn)return"tensorType."+pn}return cn.denotation!=null&&cn.hasOwnProperty("denotation")&&!fn.isString(cn.denotation)?"denotation: string expected":null},an.fromObject=function(cn){if(cn instanceof hn.onnx.TypeProto)return cn;var pn=new hn.onnx.TypeProto;if(cn.tensorType!=null){if(typeof cn.tensorType!="object")throw TypeError(".onnx.TypeProto.tensorType: object expected");pn.tensorType=hn.onnx.TypeProto.Tensor.fromObject(cn.tensorType)}return cn.denotation!=null&&(pn.denotation=String(cn.denotation)),pn},an.toObject=function(cn,pn){pn||(pn={});var mn={};return pn.defaults&&(mn.denotation=""),cn.tensorType!=null&&cn.hasOwnProperty("tensorType")&&(mn.tensorType=hn.onnx.TypeProto.Tensor.toObject(cn.tensorType,pn),pn.oneofs&&(mn.value="tensorType")),cn.denotation!=null&&cn.hasOwnProperty("denotation")&&(mn.denotation=cn.denotation),mn},an.prototype.toJSON=function(){return this.constructor.toObject(this,on.util.toJSONOptions)},an.Tensor=function(){function cn(pn){if(pn)for(var mn=Object.keys(pn),xn=0;xn<mn.length;++xn)pn[mn[xn]]!=null&&(this[mn[xn]]=pn[mn[xn]])}return cn.prototype.elemType=0,cn.prototype.shape=null,cn.create=function(pn){return new cn(pn)},cn.encode=function(pn,mn){return mn||(mn=dn.create()),pn.elemType!=null&&pn.hasOwnProperty("elemType")&&mn.uint32(8).int32(pn.elemType),pn.shape!=null&&pn.hasOwnProperty("shape")&&hn.onnx.TensorShapeProto.encode(pn.shape,mn.uint32(18).fork()).ldelim(),mn},cn.encodeDelimited=function(pn,mn){return this.encode(pn,mn).ldelim()},cn.decode=function(pn,mn){pn instanceof un||(pn=un.create(pn));for(var xn=mn===void 0?pn.len:pn.pos+mn,gn=new hn.onnx.TypeProto.Tensor;pn.pos<xn;){var yn=pn.uint32();switch(yn>>>3){case 1:gn.elemType=pn.int32();break;case 2:gn.shape=hn.onnx.TensorShapeProto.decode(pn,pn.uint32());break;default:pn.skipType(7&yn)}}return gn},cn.decodeDelimited=function(pn){return pn instanceof un||(pn=new un(pn)),this.decode(pn,pn.uint32())},cn.verify=function(pn){if(typeof pn!="object"||pn===null)return"object expected";if(pn.elemType!=null&&pn.hasOwnProperty("elemType")&&!fn.isInteger(pn.elemType))return"elemType: integer expected";if(pn.shape!=null&&pn.hasOwnProperty("shape")){var mn=hn.onnx.TensorShapeProto.verify(pn.shape);if(mn)return"shape."+mn}return null},cn.fromObject=function(pn){if(pn instanceof hn.onnx.TypeProto.Tensor)return pn;var mn=new hn.onnx.TypeProto.Tensor;if(pn.elemType!=null&&(mn.elemType=0|pn.elemType),pn.shape!=null){if(typeof pn.shape!="object")throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");mn.shape=hn.onnx.TensorShapeProto.fromObject(pn.shape)}return mn},cn.toObject=function(pn,mn){mn||(mn={});var xn={};return mn.defaults&&(xn.elemType=0,xn.shape=null),pn.elemType!=null&&pn.hasOwnProperty("elemType")&&(xn.elemType=pn.elemType),pn.shape!=null&&pn.hasOwnProperty("shape")&&(xn.shape=hn.onnx.TensorShapeProto.toObject(pn.shape,mn)),xn},cn.prototype.toJSON=function(){return this.constructor.toObject(this,on.util.toJSONOptions)},cn}(),an}(),sn.OperatorSetIdProto=function(){function an(rn){if(rn)for(var cn=Object.keys(rn),pn=0;pn<cn.length;++pn)rn[cn[pn]]!=null&&(this[cn[pn]]=rn[cn[pn]])}return an.prototype.domain="",an.prototype.version=fn.Long?fn.Long.fromBits(0,0,!1):0,an.create=function(rn){return new an(rn)},an.encode=function(rn,cn){return cn||(cn=dn.create()),rn.domain!=null&&rn.hasOwnProperty("domain")&&cn.uint32(10).string(rn.domain),rn.version!=null&&rn.hasOwnProperty("version")&&cn.uint32(16).int64(rn.version),cn},an.encodeDelimited=function(rn,cn){return this.encode(rn,cn).ldelim()},an.decode=function(rn,cn){rn instanceof un||(rn=un.create(rn));for(var pn=cn===void 0?rn.len:rn.pos+cn,mn=new hn.onnx.OperatorSetIdProto;rn.pos<pn;){var xn=rn.uint32();switch(xn>>>3){case 1:mn.domain=rn.string();break;case 2:mn.version=rn.int64();break;default:rn.skipType(7&xn)}}return mn},an.decodeDelimited=function(rn){return rn instanceof un||(rn=new un(rn)),this.decode(rn,rn.uint32())},an.verify=function(rn){return typeof rn!="object"||rn===null?"object expected":rn.domain!=null&&rn.hasOwnProperty("domain")&&!fn.isString(rn.domain)?"domain: string expected":rn.version!=null&&rn.hasOwnProperty("version")&&!(fn.isInteger(rn.version)||rn.version&&fn.isInteger(rn.version.low)&&fn.isInteger(rn.version.high))?"version: integer|Long expected":null},an.fromObject=function(rn){if(rn instanceof hn.onnx.OperatorSetIdProto)return rn;var cn=new hn.onnx.OperatorSetIdProto;return rn.domain!=null&&(cn.domain=String(rn.domain)),rn.version!=null&&(fn.Long?(cn.version=fn.Long.fromValue(rn.version)).unsigned=!1:typeof rn.version=="string"?cn.version=parseInt(rn.version,10):typeof rn.version=="number"?cn.version=rn.version:typeof rn.version=="object"&&(cn.version=new fn.LongBits(rn.version.low>>>0,rn.version.high>>>0).toNumber())),cn},an.toObject=function(rn,cn){cn||(cn={});var pn={};if(cn.defaults)if(pn.domain="",fn.Long){var mn=new fn.Long(0,0,!1);pn.version=cn.longs===String?mn.toString():cn.longs===Number?mn.toNumber():mn}else pn.version=cn.longs===String?"0":0;return rn.domain!=null&&rn.hasOwnProperty("domain")&&(pn.domain=rn.domain),rn.version!=null&&rn.hasOwnProperty("version")&&(typeof rn.version=="number"?pn.version=cn.longs===String?String(rn.version):rn.version:pn.version=cn.longs===String?fn.Long.prototype.toString.call(rn.version):cn.longs===Number?new fn.LongBits(rn.version.low>>>0,rn.version.high>>>0).toNumber():rn.version),pn},an.prototype.toJSON=function(){return this.constructor.toObject(this,on.util.toJSONOptions)},an}(),sn),St.exports=hn},2100:(St,e,en)=>{St.exports=en(9482)},9482:(St,e,en)=>{var tn=e;function nn(){tn.util._configure(),tn.Writer._configure(tn.BufferWriter),tn.Reader._configure(tn.BufferReader)}tn.build="minimal",tn.Writer=en(1173),tn.BufferWriter=en(3155),tn.Reader=en(1408),tn.BufferReader=en(593),tn.util=en(9693),tn.rpc=en(5994),tn.roots=en(5054),tn.configure=nn,nn()},1408:(St,e,en)=>{St.exports=dn;var tn,nn=en(9693),sn=nn.LongBits,on=nn.utf8;function un(mn,xn){return RangeError("index out of range: "+mn.pos+" + "+(xn||1)+" > "+mn.len)}function dn(mn){this.buf=mn,this.pos=0,this.len=mn.length}var fn,hn=typeof Uint8Array<"u"?function(mn){if(mn instanceof Uint8Array||Array.isArray(mn))return new dn(mn);throw Error("illegal buffer")}:function(mn){if(Array.isArray(mn))return new dn(mn);throw Error("illegal buffer")},an=function(){return nn.Buffer?function(mn){return(dn.create=function(xn){return nn.Buffer.isBuffer(xn)?new tn(xn):hn(xn)})(mn)}:hn};function rn(){var mn=new sn(0,0),xn=0;if(!(this.len-this.pos>4)){for(;xn<3;++xn){if(this.pos>=this.len)throw un(this);if(mn.lo=(mn.lo|(127&this.buf[this.pos])<<7*xn)>>>0,this.buf[this.pos++]<128)return mn}return mn.lo=(mn.lo|(127&this.buf[this.pos++])<<7*xn)>>>0,mn}for(;xn<4;++xn)if(mn.lo=(mn.lo|(127&this.buf[this.pos])<<7*xn)>>>0,this.buf[this.pos++]<128)return mn;if(mn.lo=(mn.lo|(127&this.buf[this.pos])<<28)>>>0,mn.hi=(mn.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return mn;if(xn=0,this.len-this.pos>4){for(;xn<5;++xn)if(mn.hi=(mn.hi|(127&this.buf[this.pos])<<7*xn+3)>>>0,this.buf[this.pos++]<128)return mn}else for(;xn<5;++xn){if(this.pos>=this.len)throw un(this);if(mn.hi=(mn.hi|(127&this.buf[this.pos])<<7*xn+3)>>>0,this.buf[this.pos++]<128)return mn}throw Error("invalid varint encoding")}function cn(mn,xn){return(mn[xn-4]|mn[xn-3]<<8|mn[xn-2]<<16|mn[xn-1]<<24)>>>0}function pn(){if(this.pos+8>this.len)throw un(this,8);return new sn(cn(this.buf,this.pos+=4),cn(this.buf,this.pos+=4))}dn.create=an(),dn.prototype._slice=nn.Array.prototype.subarray||nn.Array.prototype.slice,dn.prototype.uint32=(fn=4294967295,function(){if(fn=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(fn=(fn|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(fn=(fn|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(fn=(fn|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(fn=(fn|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return fn;if((this.pos+=5)>this.len)throw this.pos=this.len,un(this,10);return fn}),dn.prototype.int32=function(){return 0|this.uint32()},dn.prototype.sint32=function(){var mn=this.uint32();return mn>>>1^-(1&mn)|0},dn.prototype.bool=function(){return this.uint32()!==0},dn.prototype.fixed32=function(){if(this.pos+4>this.len)throw un(this,4);return cn(this.buf,this.pos+=4)},dn.prototype.sfixed32=function(){if(this.pos+4>this.len)throw un(this,4);return 0|cn(this.buf,this.pos+=4)},dn.prototype.float=function(){if(this.pos+4>this.len)throw un(this,4);var mn=nn.float.readFloatLE(this.buf,this.pos);return this.pos+=4,mn},dn.prototype.double=function(){if(this.pos+8>this.len)throw un(this,4);var mn=nn.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,mn},dn.prototype.bytes=function(){var mn=this.uint32(),xn=this.pos,gn=this.pos+mn;if(gn>this.len)throw un(this,mn);return this.pos+=mn,Array.isArray(this.buf)?this.buf.slice(xn,gn):xn===gn?new this.buf.constructor(0):this._slice.call(this.buf,xn,gn)},dn.prototype.string=function(){var mn=this.bytes();return on.read(mn,0,mn.length)},dn.prototype.skip=function(mn){if(typeof mn=="number"){if(this.pos+mn>this.len)throw un(this,mn);this.pos+=mn}else do if(this.pos>=this.len)throw un(this);while(128&this.buf[this.pos++]);return this},dn.prototype.skipType=function(mn){switch(mn){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(mn=7&this.uint32())!=4;)this.skipType(mn);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+mn+" at offset "+this.pos)}return this},dn._configure=function(mn){tn=mn,dn.create=an(),tn._configure();var xn=nn.Long?"toLong":"toNumber";nn.merge(dn.prototype,{int64:function(){return rn.call(this)[xn](!1)},uint64:function(){return rn.call(this)[xn](!0)},sint64:function(){return rn.call(this).zzDecode()[xn](!1)},fixed64:function(){return pn.call(this)[xn](!0)},sfixed64:function(){return pn.call(this)[xn](!1)}})}},593:(St,e,en)=>{St.exports=sn;var tn=en(1408);(sn.prototype=Object.create(tn.prototype)).constructor=sn;var nn=en(9693);function sn(on){tn.call(this,on)}sn._configure=function(){nn.Buffer&&(sn.prototype._slice=nn.Buffer.prototype.slice)},sn.prototype.string=function(){var on=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+on,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+on,this.len))},sn._configure()},5054:St=>{St.exports={}},5994:(St,e,en)=>{e.Service=en(7948)},7948:(St,e,en)=>{St.exports=nn;var tn=en(9693);function nn(sn,on,un){if(typeof sn!="function")throw TypeError("rpcImpl must be a function");tn.EventEmitter.call(this),this.rpcImpl=sn,this.requestDelimited=!!on,this.responseDelimited=!!un}(nn.prototype=Object.create(tn.EventEmitter.prototype)).constructor=nn,nn.prototype.rpcCall=function sn(on,un,dn,fn,hn){if(!fn)throw TypeError("request must be specified");var an=this;if(!hn)return tn.asPromise(sn,an,on,un,dn,fn);if(an.rpcImpl)try{return an.rpcImpl(on,un[an.requestDelimited?"encodeDelimited":"encode"](fn).finish(),function(rn,cn){if(rn)return an.emit("error",rn,on),hn(rn);if(cn!==null){if(!(cn instanceof dn))try{cn=dn[an.responseDelimited?"decodeDelimited":"decode"](cn)}catch(pn){return an.emit("error",pn,on),hn(pn)}return an.emit("data",cn,on),hn(null,cn)}an.end(!0)})}catch(rn){return an.emit("error",rn,on),void setTimeout(function(){hn(rn)},0)}else setTimeout(function(){hn(Error("already ended"))},0)},nn.prototype.end=function(sn){return this.rpcImpl&&(sn||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:(St,e,en)=>{St.exports=nn;var tn=en(9693);function nn(dn,fn){this.lo=dn>>>0,this.hi=fn>>>0}var sn=nn.zero=new nn(0,0);sn.toNumber=function(){return 0},sn.zzEncode=sn.zzDecode=function(){return this},sn.length=function(){return 1};var on=nn.zeroHash="\0\0\0\0\0\0\0\0";nn.fromNumber=function(dn){if(dn===0)return sn;var fn=dn<0;fn&&(dn=-dn);var hn=dn>>>0,an=(dn-hn)/4294967296>>>0;return fn&&(an=~an>>>0,hn=~hn>>>0,++hn>4294967295&&(hn=0,++an>4294967295&&(an=0))),new nn(hn,an)},nn.from=function(dn){if(typeof dn=="number")return nn.fromNumber(dn);if(tn.isString(dn)){if(!tn.Long)return nn.fromNumber(parseInt(dn,10));dn=tn.Long.fromString(dn)}return dn.low||dn.high?new nn(dn.low>>>0,dn.high>>>0):sn},nn.prototype.toNumber=function(dn){if(!dn&&this.hi>>>31){var fn=1+~this.lo>>>0,hn=~this.hi>>>0;return fn||(hn=hn+1>>>0),-(fn+4294967296*hn)}return this.lo+4294967296*this.hi},nn.prototype.toLong=function(dn){return tn.Long?new tn.Long(0|this.lo,0|this.hi,!!dn):{low:0|this.lo,high:0|this.hi,unsigned:!!dn}};var un=String.prototype.charCodeAt;nn.fromHash=function(dn){return dn===on?sn:new nn((un.call(dn,0)|un.call(dn,1)<<8|un.call(dn,2)<<16|un.call(dn,3)<<24)>>>0,(un.call(dn,4)|un.call(dn,5)<<8|un.call(dn,6)<<16|un.call(dn,7)<<24)>>>0)},nn.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},nn.prototype.zzEncode=function(){var dn=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^dn)>>>0,this.lo=(this.lo<<1^dn)>>>0,this},nn.prototype.zzDecode=function(){var dn=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^dn)>>>0,this.hi=(this.hi>>>1^dn)>>>0,this},nn.prototype.length=function(){var dn=this.lo,fn=(this.lo>>>28|this.hi<<4)>>>0,hn=this.hi>>>24;return hn===0?fn===0?dn<16384?dn<128?1:2:dn<2097152?3:4:fn<16384?fn<128?5:6:fn<2097152?7:8:hn<128?9:10}},9693:function(St,e,en){var tn=e;function nn(on,un,dn){for(var fn=Object.keys(un),hn=0;hn<fn.length;++hn)on[fn[hn]]!==void 0&&dn||(on[fn[hn]]=un[fn[hn]]);return on}function sn(on){function un(dn,fn){if(!(this instanceof un))return new un(dn,fn);Object.defineProperty(this,"message",{get:function(){return dn}}),Error.captureStackTrace?Error.captureStackTrace(this,un):Object.defineProperty(this,"stack",{value:new Error().stack||""}),fn&&nn(this,fn)}return(un.prototype=Object.create(Error.prototype)).constructor=un,Object.defineProperty(un.prototype,"name",{get:function(){return on}}),un.prototype.toString=function(){return this.name+": "+this.message},un}tn.asPromise=en(4537),tn.base64=en(7419),tn.EventEmitter=en(9211),tn.float=en(945),tn.inquire=en(7199),tn.utf8=en(4997),tn.pool=en(6662),tn.LongBits=en(1945),tn.isNode=!!(en.g!==void 0&&en.g&&en.g.process&&en.g.process.versions&&en.g.process.versions.node),tn.global=tn.isNode&&en.g||typeof window<"u"&&window||typeof self<"u"&&self||this,tn.emptyArray=Object.freeze?Object.freeze([]):[],tn.emptyObject=Object.freeze?Object.freeze({}):{},tn.isInteger=Number.isInteger||function(on){return typeof on=="number"&&isFinite(on)&&Math.floor(on)===on},tn.isString=function(on){return typeof on=="string"||on instanceof String},tn.isObject=function(on){return on&&typeof on=="object"},tn.isset=tn.isSet=function(on,un){var dn=on[un];return!(dn==null||!on.hasOwnProperty(un))&&(typeof dn!="object"||(Array.isArray(dn)?dn.length:Object.keys(dn).length)>0)},tn.Buffer=function(){try{var on=tn.inquire("buffer").Buffer;return on.prototype.utf8Write?on:null}catch{return null}}(),tn._Buffer_from=null,tn._Buffer_allocUnsafe=null,tn.newBuffer=function(on){return typeof on=="number"?tn.Buffer?tn._Buffer_allocUnsafe(on):new tn.Array(on):tn.Buffer?tn._Buffer_from(on):typeof Uint8Array>"u"?on:new Uint8Array(on)},tn.Array=typeof Uint8Array<"u"?Uint8Array:Array,tn.Long=tn.global.dcodeIO&&tn.global.dcodeIO.Long||tn.global.Long||tn.inquire("long"),tn.key2Re=/^true|false|0|1$/,tn.key32Re=/^-?(?:0|[1-9][0-9]*)$/,tn.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,tn.longToHash=function(on){return on?tn.LongBits.from(on).toHash():tn.LongBits.zeroHash},tn.longFromHash=function(on,un){var dn=tn.LongBits.fromHash(on);return tn.Long?tn.Long.fromBits(dn.lo,dn.hi,un):dn.toNumber(!!un)},tn.merge=nn,tn.lcFirst=function(on){return on.charAt(0).toLowerCase()+on.substring(1)},tn.newError=sn,tn.ProtocolError=sn("ProtocolError"),tn.oneOfGetter=function(on){for(var un={},dn=0;dn<on.length;++dn)un[on[dn]]=1;return function(){for(var fn=Object.keys(this),hn=fn.length-1;hn>-1;--hn)if(un[fn[hn]]===1&&this[fn[hn]]!==void 0&&this[fn[hn]]!==null)return fn[hn]}},tn.oneOfSetter=function(on){return function(un){for(var dn=0;dn<on.length;++dn)on[dn]!==un&&delete this[on[dn]]}},tn.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},tn._configure=function(){var on=tn.Buffer;on?(tn._Buffer_from=on.from!==Uint8Array.from&&on.from||function(un,dn){return new on(un,dn)},tn._Buffer_allocUnsafe=on.allocUnsafe||function(un){return new on(un)}):tn._Buffer_from=tn._Buffer_allocUnsafe=null}},1173:(St,e,en)=>{St.exports=an;var tn,nn=en(9693),sn=nn.LongBits,on=nn.base64,un=nn.utf8;function dn(yn,bn,wn){this.fn=yn,this.len=bn,this.next=void 0,this.val=wn}function fn(){}function hn(yn){this.head=yn.head,this.tail=yn.tail,this.len=yn.len,this.next=yn.states}function an(){this.len=0,this.head=new dn(fn,0,0),this.tail=this.head,this.states=null}var rn=function(){return nn.Buffer?function(){return(an.create=function(){return new tn})()}:function(){return new an}};function cn(yn,bn,wn){bn[wn]=255&yn}function pn(yn,bn){this.len=yn,this.next=void 0,this.val=bn}function mn(yn,bn,wn){for(;yn.hi;)bn[wn++]=127&yn.lo|128,yn.lo=(yn.lo>>>7|yn.hi<<25)>>>0,yn.hi>>>=7;for(;yn.lo>127;)bn[wn++]=127&yn.lo|128,yn.lo=yn.lo>>>7;bn[wn++]=yn.lo}function xn(yn,bn,wn){bn[wn]=255&yn,bn[wn+1]=yn>>>8&255,bn[wn+2]=yn>>>16&255,bn[wn+3]=yn>>>24}an.create=rn(),an.alloc=function(yn){return new nn.Array(yn)},nn.Array!==Array&&(an.alloc=nn.pool(an.alloc,nn.Array.prototype.subarray)),an.prototype._push=function(yn,bn,wn){return this.tail=this.tail.next=new dn(yn,bn,wn),this.len+=bn,this},pn.prototype=Object.create(dn.prototype),pn.prototype.fn=function(yn,bn,wn){for(;yn>127;)bn[wn++]=127&yn|128,yn>>>=7;bn[wn]=yn},an.prototype.uint32=function(yn){return this.len+=(this.tail=this.tail.next=new pn((yn>>>=0)<128?1:yn<16384?2:yn<2097152?3:yn<268435456?4:5,yn)).len,this},an.prototype.int32=function(yn){return yn<0?this._push(mn,10,sn.fromNumber(yn)):this.uint32(yn)},an.prototype.sint32=function(yn){return this.uint32((yn<<1^yn>>31)>>>0)},an.prototype.uint64=function(yn){var bn=sn.from(yn);return this._push(mn,bn.length(),bn)},an.prototype.int64=an.prototype.uint64,an.prototype.sint64=function(yn){var bn=sn.from(yn).zzEncode();return this._push(mn,bn.length(),bn)},an.prototype.bool=function(yn){return this._push(cn,1,yn?1:0)},an.prototype.fixed32=function(yn){return this._push(xn,4,yn>>>0)},an.prototype.sfixed32=an.prototype.fixed32,an.prototype.fixed64=function(yn){var bn=sn.from(yn);return this._push(xn,4,bn.lo)._push(xn,4,bn.hi)},an.prototype.sfixed64=an.prototype.fixed64,an.prototype.float=function(yn){return this._push(nn.float.writeFloatLE,4,yn)},an.prototype.double=function(yn){return this._push(nn.float.writeDoubleLE,8,yn)};var gn=nn.Array.prototype.set?function(yn,bn,wn){bn.set(yn,wn)}:function(yn,bn,wn){for(var _n=0;_n<yn.length;++_n)bn[wn+_n]=yn[_n]};an.prototype.bytes=function(yn){var bn=yn.length>>>0;if(!bn)return this._push(cn,1,0);if(nn.isString(yn)){var wn=an.alloc(bn=on.length(yn));on.decode(yn,wn,0),yn=wn}return this.uint32(bn)._push(gn,bn,yn)},an.prototype.string=function(yn){var bn=un.length(yn);return bn?this.uint32(bn)._push(un.write,bn,yn):this._push(cn,1,0)},an.prototype.fork=function(){return this.states=new hn(this),this.head=this.tail=new dn(fn,0,0),this.len=0,this},an.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new dn(fn,0,0),this.len=0),this},an.prototype.ldelim=function(){var yn=this.head,bn=this.tail,wn=this.len;return this.reset().uint32(wn),wn&&(this.tail.next=yn.next,this.tail=bn,this.len+=wn),this},an.prototype.finish=function(){for(var yn=this.head.next,bn=this.constructor.alloc(this.len),wn=0;yn;)yn.fn(yn.val,bn,wn),wn+=yn.len,yn=yn.next;return bn},an._configure=function(yn){tn=yn,an.create=rn(),tn._configure()}},3155:(St,e,en)=>{St.exports=sn;var tn=en(1173);(sn.prototype=Object.create(tn.prototype)).constructor=sn;var nn=en(9693);function sn(){tn.call(this)}function on(un,dn,fn){un.length<40?nn.utf8.write(un,dn,fn):dn.utf8Write?dn.utf8Write(un,fn):dn.write(un,fn)}sn._configure=function(){sn.alloc=nn._Buffer_allocUnsafe,sn.writeBytesBuffer=nn.Buffer&&nn.Buffer.prototype instanceof Uint8Array&&nn.Buffer.prototype.set.name==="set"?function(un,dn,fn){dn.set(un,fn)}:function(un,dn,fn){if(un.copy)un.copy(dn,fn,0,un.length);else for(var hn=0;hn<un.length;)dn[fn++]=un[hn++]}},sn.prototype.bytes=function(un){nn.isString(un)&&(un=nn._Buffer_from(un,"base64"));var dn=un.length>>>0;return this.uint32(dn),dn&&this._push(sn.writeBytesBuffer,dn,un),this},sn.prototype.string=function(un){var dn=nn.Buffer.byteLength(un);return this.uint32(dn),dn&&this._push(on,dn,un),this},sn._configure()},7714:(St,e,en)=>{e.R=void 0;const tn=en(6919),nn=en(7448);e.R=new class{async init(){}async createSessionHandler(sn,on){const un=new tn.Session(on);return await un.loadModel(sn),new nn.OnnxjsSessionHandler(un)}}},4200:(St,e,en)=>{e.c8=e.rX=void 0;const tn=en(1670),nn=en(5381),sn=en(2157),on=en(2306);e.rX=()=>{if((typeof tn.env.wasm.initTimeout!="number"||tn.env.wasm.initTimeout<0)&&(tn.env.wasm.initTimeout=0),typeof tn.env.wasm.simd!="boolean"&&(tn.env.wasm.simd=!0),typeof tn.env.wasm.proxy!="boolean"&&(tn.env.wasm.proxy=!1),typeof tn.env.wasm.numThreads!="number"||!Number.isInteger(tn.env.wasm.numThreads)||tn.env.wasm.numThreads<=0){const un=typeof navigator>"u"?(0,nn.cpus)().length:navigator.hardwareConcurrency;tn.env.wasm.numThreads=Math.min(4,Math.ceil((un||1)/2))}},e.c8=new class{async init(){(0,e.rX)(),await(0,sn.initWasm)()}async createSessionHandler(un,dn){const fn=new on.OnnxruntimeWebAssemblySessionHandler;return await fn.loadModel(un,dn),Promise.resolve(fn)}}},6018:function(St,e,en){var tn=this&&this.__createBinding||(Object.create?function(on,un,dn,fn){fn===void 0&&(fn=dn);var hn=Object.getOwnPropertyDescriptor(un,dn);hn&&!("get"in hn?!un.__esModule:hn.writable||hn.configurable)||(hn={enumerable:!0,get:function(){return un[dn]}}),Object.defineProperty(on,fn,hn)}:function(on,un,dn,fn){fn===void 0&&(fn=dn),on[fn]=un[dn]}),nn=this&&this.__exportStar||function(on,un){for(var dn in on)dn==="default"||Object.prototype.hasOwnProperty.call(un,dn)||tn(un,on,dn)};Object.defineProperty(e,"__esModule",{value:!0}),nn(en(1670),e);const sn=en(1670);{const on=en(7714).R;(0,sn.registerBackend)("webgl",on,-10)}{const on=en(4200).c8;(0,sn.registerBackend)("cpu",on,10),(0,sn.registerBackend)("wasm",on,10),(0,sn.registerBackend)("xnnpack",on,9)}},246:(St,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createAttributeWithCacheKey=void 0;class en{constructor(nn){Object.assign(this,nn)}get cacheKey(){return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map(nn=>`${this[nn]}`).join(";")),this._cacheKey}}e.createAttributeWithCacheKey=tn=>new en(tn)},7778:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Attribute=void 0;const tn=en(1446),nn=en(9395),sn=en(9162),on=en(2517);var un=nn.onnxruntime.experimental.fbs;class dn{constructor(hn){if(this._attributes=new Map,hn!=null){for(const an of hn)an instanceof tn.onnx.AttributeProto?this._attributes.set(an.name,[dn.getValue(an),dn.getType(an)]):an instanceof un.Attribute&&this._attributes.set(an.name(),[dn.getValue(an),dn.getType(an)]);if(this._attributes.size<hn.length)throw new Error("duplicated attribute names")}}set(hn,an,rn){this._attributes.set(hn,[rn,an])}delete(hn){this._attributes.delete(hn)}getFloat(hn,an){return this.get(hn,"float",an)}getInt(hn,an){return this.get(hn,"int",an)}getString(hn,an){return this.get(hn,"string",an)}getTensor(hn,an){return this.get(hn,"tensor",an)}getFloats(hn,an){return this.get(hn,"floats",an)}getInts(hn,an){return this.get(hn,"ints",an)}getStrings(hn,an){return this.get(hn,"strings",an)}getTensors(hn,an){return this.get(hn,"tensors",an)}get(hn,an,rn){const cn=this._attributes.get(hn);if(cn===void 0){if(rn!==void 0)return rn;throw new Error(`required attribute not found: ${hn}`)}if(cn[1]!==an)throw new Error(`type mismatch: expected ${an} but got ${cn[1]}`);return cn[0]}static getType(hn){const an=hn instanceof tn.onnx.AttributeProto?hn.type:hn.type();switch(an){case tn.onnx.AttributeProto.AttributeType.FLOAT:return"float";case tn.onnx.AttributeProto.AttributeType.INT:return"int";case tn.onnx.AttributeProto.AttributeType.STRING:return"string";case tn.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case tn.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case tn.onnx.AttributeProto.AttributeType.INTS:return"ints";case tn.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case tn.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${tn.onnx.AttributeProto.AttributeType[an]}`)}}static getValue(hn){const an=hn instanceof tn.onnx.AttributeProto?hn.type:hn.type();if(an===tn.onnx.AttributeProto.AttributeType.GRAPH||an===tn.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");const rn=this.getValueNoCheck(hn);if(an===tn.onnx.AttributeProto.AttributeType.INT&&on.LongUtil.isLong(rn))return on.LongUtil.longToNumber(rn);if(an===tn.onnx.AttributeProto.AttributeType.INTS){const cn=rn,pn=new Array(cn.length);for(let mn=0;mn<cn.length;mn++){const xn=cn[mn];pn[mn]=on.LongUtil.longToNumber(xn)}return pn}if(an===tn.onnx.AttributeProto.AttributeType.TENSOR)return hn instanceof tn.onnx.AttributeProto?sn.Tensor.fromProto(rn):sn.Tensor.fromOrtTensor(rn);if(an===tn.onnx.AttributeProto.AttributeType.TENSORS){if(hn instanceof tn.onnx.AttributeProto)return rn.map(cn=>sn.Tensor.fromProto(cn));if(hn instanceof un.Attribute)return rn.map(cn=>sn.Tensor.fromOrtTensor(cn))}if(an===tn.onnx.AttributeProto.AttributeType.STRING&&hn instanceof tn.onnx.AttributeProto){const cn=rn;return(0,on.decodeUtf8String)(cn)}return an===tn.onnx.AttributeProto.AttributeType.STRINGS&&hn instanceof tn.onnx.AttributeProto?rn.map(on.decodeUtf8String):rn}static getValueNoCheck(hn){return hn instanceof tn.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(hn):this.getValueNoCheckFromOrtFormat(hn)}static getValueNoCheckFromOnnxFormat(hn){switch(hn.type){case tn.onnx.AttributeProto.AttributeType.FLOAT:return hn.f;case tn.onnx.AttributeProto.AttributeType.INT:return hn.i;case tn.onnx.AttributeProto.AttributeType.STRING:return hn.s;case tn.onnx.AttributeProto.AttributeType.TENSOR:return hn.t;case tn.onnx.AttributeProto.AttributeType.GRAPH:return hn.g;case tn.onnx.AttributeProto.AttributeType.FLOATS:return hn.floats;case tn.onnx.AttributeProto.AttributeType.INTS:return hn.ints;case tn.onnx.AttributeProto.AttributeType.STRINGS:return hn.strings;case tn.onnx.AttributeProto.AttributeType.TENSORS:return hn.tensors;case tn.onnx.AttributeProto.AttributeType.GRAPHS:return hn.graphs;default:throw new Error(`unsupported attribute type: ${tn.onnx.AttributeProto.AttributeType[hn.type]}`)}}static getValueNoCheckFromOrtFormat(hn){switch(hn.type()){case un.AttributeType.FLOAT:return hn.f();case un.AttributeType.INT:return hn.i();case un.AttributeType.STRING:return hn.s();case un.AttributeType.TENSOR:return hn.t();case un.AttributeType.GRAPH:return hn.g();case un.AttributeType.FLOATS:return hn.floatsArray();case un.AttributeType.INTS:{const an=[];for(let rn=0;rn<hn.intsLength();rn++)an.push(hn.ints(rn));return an}case un.AttributeType.STRINGS:{const an=[];for(let rn=0;rn<hn.stringsLength();rn++)an.push(hn.strings(rn));return an}case un.AttributeType.TENSORS:{const an=[];for(let rn=0;rn<hn.tensorsLength();rn++)an.push(hn.tensors(rn));return an}default:throw new Error(`unsupported attribute type: ${un.AttributeType[hn.type()]}`)}}}e.Attribute=dn},7091:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.resolveBackend=e.backend=void 0;const tn=en(5038),nn=new Map;async function sn(on){const un=e.backend;if(un[on]!==void 0&&function(dn){const fn=dn;return"initialize"in fn&&typeof fn.initialize=="function"&&"createSessionHandler"in fn&&typeof fn.createSessionHandler=="function"&&"dispose"in fn&&typeof fn.dispose=="function"}(un[on])){const dn=un[on];let fn=dn.initialize();if(typeof fn=="object"&&"then"in fn&&(fn=await fn),fn)return nn.set(on,dn),dn}}e.backend={webgl:new tn.WebGLBackend},e.resolveBackend=async function on(un){if(!un)return on(["webgl"]);{const dn=typeof un=="string"?[un]:un;for(const fn of dn){const hn=nn.get(fn);if(hn)return hn;const an=await sn(fn);if(an)return an}}throw new Error("no available backend to use")}},5038:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLBackend=void 0;const tn=en(1670),nn=en(6231),sn=en(6416),on=en(7305);e.WebGLBackend=class{get contextId(){return tn.env.webgl.contextId}set contextId(un){tn.env.webgl.contextId=un}get matmulMaxBatchSize(){return tn.env.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(un){tn.env.webgl.matmulMaxBatchSize=un}get textureCacheMode(){return tn.env.webgl.textureCacheMode}set textureCacheMode(un){tn.env.webgl.textureCacheMode=un}get pack(){return tn.env.webgl.pack}set pack(un){tn.env.webgl.pack=un}get async(){return tn.env.webgl.async}set async(un){tn.env.webgl.async=un}initialize(){try{return this.glContext=(0,on.createWebGLContext)(this.contextId),typeof this.matmulMaxBatchSize!="number"&&(this.matmulMaxBatchSize=16),typeof this.textureCacheMode!="string"&&(this.textureCacheMode="full"),typeof this.pack!="boolean"&&(this.pack=!1),typeof this.async!="boolean"&&(this.async=!1),nn.Logger.setWithEnv(tn.env),nn.Logger.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(un){return nn.Logger.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${un}`),!1}}createSessionHandler(un){return new sn.WebGLSessionHandler(this,un)}dispose(){this.glContext.dispose()}}},5107:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CoordsGlslLib=void 0;const tn=en(2517),nn=en(8520),sn=en(5060),on=en(7859),un=en(9390);class dn extends nn.GlslLib{constructor(hn){super(hn)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.offsetToCoords()),this.coordsToOffset()),this.toVec()),this.valueFrom()),this.getCommonUtilFuncs()),this.getInputsSamplingSnippets()),this.getOutputSamplingSnippet())}getCustomTypes(){return{}}offsetToCoords(){return{offsetToCoords:new nn.GlslLibRoutine(`
      vec2 offsetToCoords(int offset, int width, int height) {
        int t = offset / width;
        int s = offset - t*width;
        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);
        return coords;
      }
      `)}}coordsToOffset(){return{coordsToOffset:new nn.GlslLibRoutine(`
      int coordsToOffset(vec2 coords, int width, int height) {
        float s = coords.s * float(width);
        float t = coords.t * float(height);
        int offset = int(t) * width + int(s);
        return offset;
      }
      `)}}getOutputSamplingSnippet(){const hn=this.context.outputTextureLayout;return hn.isPacked?this.getPackedOutputSamplingSnippet(hn):this.getUnpackedOutputSamplingSnippet(hn)}getPackedOutputSamplingSnippet(hn){const an=hn.unpackedShape,rn=[hn.width,hn.height],cn={},pn="getOutputCoords";switch(an.length){case 0:cn[pn]=this.getOutputScalarCoords();break;case 1:cn[pn]=this.getOutputPacked1DCoords(an,rn);break;case 2:cn[pn]=this.getOutputPacked2DCoords(an,rn);break;case 3:cn[pn]=this.getOutputPacked3DCoords(an,rn);break;default:cn[pn]=this.getOutputPackedNDCoords(an,rn)}const mn=`
      void setOutput(vec4 val) {
        ${(0,sn.getGlsl)(this.context.glContext.version).output} = val;
      }
    `;return cn.floatTextureSetRGBA=new nn.GlslLibRoutine(mn),cn}getUnpackedOutputSamplingSnippet(hn){const an=hn.unpackedShape,rn=[hn.width,hn.height],cn={},pn="getOutputCoords";switch(an.length){case 0:cn[pn]=this.getOutputScalarCoords();break;case 1:cn[pn]=this.getOutputUnpacked1DCoords(an,rn);break;case 2:cn[pn]=this.getOutputUnpacked2DCoords(an,rn);break;case 3:cn[pn]=this.getOutputUnpacked3DCoords(an,rn);break;case 4:cn[pn]=this.getOutputUnpacked4DCoords(an,rn);break;case 5:cn[pn]=this.getOutputUnpacked5DCoords(an,rn);break;case 6:cn[pn]=this.getOutputUnpacked6DCoords(an,rn);break;default:throw new Error(`Unsupported output dimensionality: ${an.length}`)}const mn=`
        void setOutput(float val) {
          ${(0,sn.getGlsl)(this.context.glContext.version).output} = vec4(val, 0, 0, 0);
        }
    `;return cn.floatTextureSetR=new nn.GlslLibRoutine(mn),cn}getOutputScalarCoords(){return new nn.GlslLibRoutine(`
      int getOutputCoords() {
        return 0;
      }
    `)}getOutputPacked1DCoords(hn,an){const rn=an;let cn="";return rn[0]===1?(cn=`
          int getOutputCoords() {
            return 2 * int(TexCoords.y * ${rn[1]}.0);
          }
        `,new nn.GlslLibRoutine(cn)):rn[1]===1?(cn=`
          int getOutputCoords() {
            return 2 * int(TexCoords.x * ${rn[0]}.0);
          }
        `,new nn.GlslLibRoutine(cn)):(cn=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                 vec2(${rn[0]}, ${rn[1]}));
          return 2 * (resTexRC.y * ${rn[0]} + resTexRC.x);
        }
      `,new nn.GlslLibRoutine(cn))}getOutputPacked2DCoords(hn,an){let rn="";if(tn.ArrayUtil.arraysEqual(hn,an))return rn=`
        ivec2 getOutputCoords() {
          return 2 * ivec2(TexCoords.xy * vec2(${an[0]}, ${an[1]}));
        }
      `,new nn.GlslLibRoutine(rn);const cn=an,pn=Math.ceil(hn[1]/2);return rn=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${cn[0]}, ${cn[1]}));

          int index = resTexRC.y * ${cn[0]} + resTexRC.x;

          // reverse r and c order for packed texture
          int r = imod(index, ${pn}) * 2;
          int c = 2 * (index / ${pn});

          return ivec2(r, c);
        }
      `,new nn.GlslLibRoutine(rn)}getOutputPacked3DCoords(hn,an){const rn=[an[0],an[1]],cn=Math.ceil(hn[2]/2),pn=cn*Math.ceil(hn[1]/2),mn=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${rn[0]}, ${rn[1]}));
          int index = resTexRC.y * ${rn[0]} + resTexRC.x;

          int b = index / ${pn};
          index -= b * ${pn};

          // reverse r and c order for packed texture
          int r = imod(index, ${cn}) * 2;
          int c = 2 * (index / ${cn});

          return ivec3(b, r, c);
        }
      `;return new nn.GlslLibRoutine(mn)}getOutputPackedNDCoords(hn,an){const rn=[an[0],an[1]],cn=Math.ceil(hn[hn.length-1]/2),pn=cn*Math.ceil(hn[hn.length-2]/2);let mn=pn,xn="",gn="b, r, c";for(let bn=2;bn<hn.length-1;bn++)mn*=hn[hn.length-bn-1],xn=`
      int b${bn} = index / ${mn};
      index -= b${bn} * ${mn};
    `+xn,gn=`b${bn}, `+gn;const yn=`
      ivec${hn.length} getOutputCoords() {
        ivec2 resTexRC = ivec2(TexCoords.xy *
                              vec2(${rn[0]}, ${rn[1]}));
        int index = resTexRC.y * ${rn[0]} + resTexRC.x;

        ${xn}

        int b = index / ${pn};
        index -= b * ${pn};

        // reverse r and c order for packed texture
        int r = imod(index, ${cn}) * 2;
        int c = 2 * (index / ${cn});

        return ivec${hn.length}(${gn});
      }
    `;return new nn.GlslLibRoutine(yn)}getOutputUnpacked1DCoords(hn,an){const rn=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${an[0]}, ${an[1]}));
          return resTexRC.y * ${an[0]} + resTexRC.x;
        }
      `;return new nn.GlslLibRoutine(rn)}getOutputUnpacked2DCoords(hn,an){const rn=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${an[0]}, ${an[1]}));
          int index = resTexRC.y * ${an[0]} + resTexRC.x;
          int r = index / ${hn[1]};
          int c = index - r * ${hn[1]};
          return ivec2(r, c);
        }
      `;return new nn.GlslLibRoutine(rn)}getOutputUnpacked3DCoords(hn,an){let rn="";const cn=hn.length;let pn=null;cn<2&&(pn=[]),pn=new Array(cn-1),pn[cn-2]=hn[cn-1];for(let gn=cn-3;gn>=0;--gn)pn[gn]=pn[gn+1]*hn[gn+1];const mn=["r","c","d"],xn=pn.map((gn,yn)=>`int ${mn[yn]} = index / ${gn}; ${yn===pn.length-1?`int ${mn[yn+1]} = index - ${mn[yn]} * ${gn}`:`index -= ${mn[yn]} * ${gn}`};`).join("");return rn=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${an[0]}, ${an[1]}));
          int index = resTexRC.y * ${an[0]} + resTexRC.x;
          ${xn}
          return ivec3(r, c, d);
        }
      `,new nn.GlslLibRoutine(rn)}getOutputUnpacked4DCoords(hn,an){let rn="";const cn=hn.length;let pn=null;cn<2&&(pn=[]),pn=new Array(cn-1),pn[cn-2]=hn[cn-1];for(let gn=cn-3;gn>=0;--gn)pn[gn]=pn[gn+1]*hn[gn+1];const mn=["r","c","d","d2"],xn=pn.map((gn,yn)=>`int ${mn[yn]} = index / ${gn}; ${yn===pn.length-1?`int ${mn[yn+1]} = index - ${mn[yn]} * ${gn}`:`index -= ${mn[yn]} * ${gn}`};`).join("");return rn=`
      ivec4 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${an[0]}, ${an[1]}));
          int index = resTexRC.y * ${an[0]} + resTexRC.x;
          ${xn}
          return ivec4(r, c, d, d2);
        }
      `,new nn.GlslLibRoutine(rn)}getOutputUnpacked5DCoords(hn,an){let rn="";const cn=hn.length;let pn=null;cn<2&&(pn=[]),pn=new Array(cn-1),pn[cn-2]=hn[cn-1];for(let gn=cn-3;gn>=0;--gn)pn[gn]=pn[gn+1]*hn[gn+1];const mn=["r","c","d","d2","d3"],xn=pn.map((gn,yn)=>`int ${mn[yn]} = index / ${gn}; ${yn===pn.length-1?`int ${mn[yn+1]} = index - ${mn[yn]} * ${gn}`:`index -= ${mn[yn]} * ${gn}`};`).join("");return rn=`
      ivec5 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${an[0]}, ${an[1]}));
          int index = resTexRC.y * ${an[0]} + resTexRC.x;
          ${xn}
          return ivec5(r, c, d, d2, d3);
        }
      `,new nn.GlslLibRoutine(rn)}getOutputUnpacked6DCoords(hn,an){let rn="";const cn=hn.length;let pn=null;cn<2&&(pn=[]),pn=new Array(cn-1),pn[cn-2]=hn[cn-1];for(let gn=cn-3;gn>=0;--gn)pn[gn]=pn[gn+1]*hn[gn+1];const mn=["r","c","d","d2","d3","d4"],xn=pn.map((gn,yn)=>`int ${mn[yn]} = index / ${gn}; ${yn===pn.length-1?`int ${mn[yn+1]} = index - ${mn[yn]} * ${gn}`:`index -= ${mn[yn]} * ${gn}`};`).join("");return rn=`
     ivec6 getOutputCoords() {
         ivec2 resTexRC = ivec2(TexCoords.xy *
                               vec2(${an[0]}, ${an[1]}));
         int index = resTexRC.y * ${an[0]} + resTexRC.x;
         ${xn}
         return ivec6(r, c, d, d2, d3, d4);
       }
     `,new nn.GlslLibRoutine(rn)}getCommonUtilFuncs(){const hn={};let an="uvFromFlat";hn[an]=new nn.GlslLibRoutine(`
    vec2 uvFromFlat(int texNumR, int texNumC, int index) {
      int texC = index / texNumR;
      int texR = index - texC * texNumR;
      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to
      //       v.
      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);
    }
    `),an="packedUVfrom1D",hn[an]=new nn.GlslLibRoutine(`
      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
        int texelIndex = index / 2;
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),an="packedUVfrom2D",hn[an]=new nn.GlslLibRoutine(`
      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {
        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),an="packedUVfrom3D",hn[an]=new nn.GlslLibRoutine(`
      vec2 packedUVfrom3D(int texNumR, int texNumC,
          int texelsInBatch, int texelsInLogicalRow, int b,
          int row, int col) {
        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = index / texNumC;
        int texC = index - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),an="sampleTexture";const rn=(0,sn.getGlsl)(this.context.glContext.version);return hn[an]=new nn.GlslLibRoutine(`
        float sampleTexture(sampler2D textureSampler, vec2 uv) {
            return ${rn.texture2D}(textureSampler, uv).r;
        }`),hn}getInputsSamplingSnippets(){const hn={},an=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((rn,cn)=>{const pn=this.context.inputTextureLayouts[cn],mn=(0,un.generateShaderFuncNameFromInputSamplerName)(rn);pn.isPacked?hn[mn]=this.getPackedSamplerFromInput(mn,rn,pn):hn[mn]=this.getUnpackedSamplerFromInput(mn,rn,pn);const xn=(0,un.generateShaderFuncNameFromInputSamplerNameAtOutCoords)(rn);pn.unpackedShape.length<=an.unpackedShape.length&&(pn.isPacked?hn[xn]=this.getPackedSamplerAtOutputCoords(xn,pn,an,rn):hn[xn]=this.getUnpackedSamplerAtOutputCoords(xn,pn,an,rn))}),hn}getPackedSamplerAtOutputCoords(hn,an,rn,cn){const pn=an.unpackedShape,mn=rn.unpackedShape,xn=cn,gn=(0,un.generateShaderFuncNameFromInputSamplerName)(xn),yn=pn.length,bn=mn.length,wn=tn.BroadcastUtil.getBroadcastDims(pn,mn),_n=(0,un.getCoordsDataType)(bn),Tn=bn-yn;let An;const Pn=(0,un.getGlChannels)();An=yn===0?"":bn<2&&wn.length>=1?"coords = 0;":wn.map(In=>`coords.${Pn[In+Tn]} = 0;`).join(`
`);let Sn="";Sn=bn<2&&yn>0?"coords":pn.map((In,Bn)=>`coords.${Pn[Bn+Tn]}`).join(", ");let Cn="return outputValue;";const Nn=tn.ShapeUtil.size(pn)===1,Mn=tn.ShapeUtil.size(mn)===1;if(yn!==1||Nn||Mn){if(Nn&&!Mn)Cn=bn===1?`
          return vec4(outputValue.x, outputValue.x, 0., 0.);
        `:`
          return vec4(outputValue.x);
        `;else if(wn.length){const In=yn-2,Bn=yn-1;wn.indexOf(In)>-1&&wn.indexOf(Bn)>-1?Cn="return vec4(outputValue.x);":wn.indexOf(In)>-1?Cn="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":wn.indexOf(Bn)>-1&&(Cn="return vec4(outputValue.xx, outputValue.zz);")}}else Cn=`
        return vec4(outputValue.xy, outputValue.xy);
      `;const Fn=`
      vec4 ${hn}() {
        ${_n} coords = getOutputCoords();
        
        int lastDim = coords.${Pn[bn-1]};
        coords.${Pn[bn-1]} = coords.${Pn[bn-2]};
        coords.${Pn[bn-2]} = lastDim;
      
        ${An}
        vec4 outputValue = ${gn}(${Sn});
        ${Cn}
      }
    `;return new nn.GlslLibRoutine(Fn,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(hn,an,rn,cn){const pn=[rn.width,rn.height],mn=[an.width,an.height],xn=an.unpackedShape.length,gn=rn.unpackedShape.length,yn=an.unpackedShape,bn=rn.unpackedShape,wn=(0,un.generateShaderFuncNameFromInputSamplerName)(cn);if(xn===gn&&tn.ArrayUtil.arraysEqual(mn,pn)){const Mn=`
          float ${hn}() {
            return sampleTexture(${cn}, TexCoords);
          }
        `;return new nn.GlslLibRoutine(Mn,["coordinates.sampleTexture"])}const _n=(0,un.getCoordsDataType)(gn),Tn=tn.BroadcastUtil.getBroadcastDims(yn,bn),An=gn-xn;let Pn;const Sn=(0,un.getGlChannels)();Pn=xn===0?"":gn<2&&Tn.length>=1?"coords = 0;":Tn.map(Mn=>`coords.${Sn[Mn+An]} = 0;`).join(`
`);let Cn="";Cn=gn<2&&xn>0?"coords":an.unpackedShape.map((Mn,Fn)=>`coords.${Sn[Fn+An]}`).join(", ");const Nn=`
        float ${hn}() {
          ${_n} coords = getOutputCoords();
          ${Pn}
          return ${wn}(${Cn});
        }
      `;return new nn.GlslLibRoutine(Nn,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(hn,an,rn){switch(rn.unpackedShape.length){case 0:return this.getPackedSamplerScalar(hn,an);case 1:return this.getPackedSampler1D(hn,an,rn);case 2:return this.getPackedSampler2D(hn,an,rn);case 3:return this.getPackedSampler3D(hn,an,rn);default:return this.getPackedSamplerND(hn,an,rn)}}getUnpackedSamplerFromInput(hn,an,rn){const cn=rn.unpackedShape;switch(cn.length){case 0:return this.getUnpackedSamplerScalar(hn,an,rn);case 1:return this.getUnpackedSampler1D(hn,an,rn);case 2:return this.getUnpackedSampler2D(hn,an,rn);case 3:return this.getUnpackedSampler3D(hn,an,rn);case 4:return this.getUnpackedSampler4D(hn,an,rn);case 5:return this.getUnpackedSampler5D(hn,an,rn);case 6:return this.getUnpackedSampler6D(hn,an,rn);default:throw new Error(`Unsupported dimension ${cn.length}-D`)}}getPackedSamplerScalar(hn,an){const rn=`
          vec4 ${hn}() {
            return ${(0,sn.getGlsl)(this.context.glContext.version).texture2D}(${an}, halfCR);
          }
        `;return new nn.GlslLibRoutine(rn)}getPackedSampler1D(hn,an,rn){const cn=[rn.width,rn.height],pn=[cn[1],cn[0]],mn=(0,sn.getGlsl)(this.context.glContext.version),xn=`vec4 ${hn}(int index) {
      vec2 uv = packedUVfrom1D(
      ${pn[0]}, ${pn[1]}, index);
      return ${mn.texture2D}(${an}, uv);
    }`;return new nn.GlslLibRoutine(xn,["coordinates.packedUVfrom1D"])}getPackedSampler2D(hn,an,rn){const cn=rn.unpackedShape,pn=[rn.width,rn.height],mn=(0,sn.getGlsl)(this.context.glContext.version),xn=pn[0],gn=pn[1];if(pn!=null&&tn.ArrayUtil.arraysEqual(cn,pn)){const _n=`vec4 ${hn}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${gn}.0, ${xn}.0);
        return ${mn.texture2D}(${an}, uv);
      }`;return new nn.GlslLibRoutine(_n)}const yn=pn,bn=Math.ceil(cn[1]/2),wn=`vec4 ${hn}(int row, int col) {
      vec2 uv = packedUVfrom2D(${yn[1]}, ${yn[0]}, ${bn}, row, col);
      return ${mn.texture2D}(${an}, uv);
    }`;return new nn.GlslLibRoutine(wn,["coordinates.packedUVfrom2D"])}getPackedSampler3D(hn,an,rn){const cn=rn.unpackedShape,pn=[rn.width,rn.height],mn=[pn[0],pn[1]],xn=(0,sn.getGlsl)(this.context.glContext.version);if(cn[0]===1){const _n=cn.slice(1),Tn=[1,2],An=(0,un.squeezeInputShape)(cn,_n),Pn=["b","row","col"],Sn=JSON.parse(JSON.stringify(rn));Sn.unpackedShape=An;const Cn=this.getPackedSamplerFromInput(hn,an,Sn),Nn=`${Cn.routineBody}
      vec4 ${hn}(int b, int row, int col) {
        return ${hn}(${(0,un.getSqueezedParams)(Pn,Tn)});
      } `;return new nn.GlslLibRoutine(Nn,Cn.dependencies)}const gn=mn[0],yn=mn[1],bn=Math.ceil(cn[2]/2),wn=`vec4 ${hn}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${yn}, ${gn}, ${bn*Math.ceil(cn[1]/2)}, ${bn}, b, row, col);
      return ${xn.texture2D}(${an}, uv);}`;return new nn.GlslLibRoutine(wn,["coordinates.packedUVfrom3D"])}getPackedSamplerND(hn,an,rn){const cn=rn.unpackedShape,pn=cn.length,mn=[rn.width,rn.height],xn=(0,sn.getGlsl)(this.context.glContext.version),gn=[mn[0],mn[1]],yn=gn[1],bn=gn[0],wn=Math.ceil(cn[pn-1]/2);let _n=wn*Math.ceil(cn[pn-2]/2),Tn="int b, int row, int col",An=`b * ${_n} + (row / 2) * ${wn} + (col / 2)`;for(let Sn=2;Sn<pn-1;Sn++)Tn=`int b${Sn}, `+Tn,_n*=cn[pn-Sn-1],An=`b${Sn} * ${_n} + `+An;const Pn=`vec4 ${hn}(${Tn}) {
      int index = ${An};
      int texR = index / ${bn};
      int texC = index - texR * ${bn};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${bn}, ${yn});
      return ${xn.texture2D}(${an}, uv);
    }`;return new nn.GlslLibRoutine(Pn)}getUnpackedSamplerScalar(hn,an,rn){const[cn,pn]=[rn.width,rn.height];if(cn===1&&pn===1){const xn=`
          float ${hn}() {
            return sampleTexture(${an}, halfCR);
          }
        `;return new nn.GlslLibRoutine(xn,["coordinates.sampleTexture"])}const mn=`
        float ${hn}() {
          int offset_${an} = coordsToOffset(TexCoords, ${cn}, ${pn});
          vec2 uv = uvFromFlat(${cn}, ${pn}, offset_${an});
          return sampleTexture(${an}, uv);
        }
      `;return new nn.GlslLibRoutine(mn,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(hn,an,rn){const cn=rn.width,pn=rn.height;if(pn===1&&cn===1){const xn=`
        float ${hn}(int index) {
          return sampleTexture(${an}, halfCR);
        }
      `;return new nn.GlslLibRoutine(xn,["coordinates.sampleTexture"])}if(pn===1){const xn=`
          float ${hn}(int index) {
            vec2 uv = vec2((float(index) + 0.5) / ${cn}.0, 0.5);
            return sampleTexture(${an}, uv);
          }
        `;return new nn.GlslLibRoutine(xn,["coordinates.sampleTexture"])}if(cn===1){const xn=`
          float ${hn}(int index) {
            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${pn}.0);
            return sampleTexture(${an}, uv);
          }
        `;return new nn.GlslLibRoutine(xn,["coordinates.sampleTexture"])}const mn=`
        float ${hn}(int index) {
          vec2 uv = uvFromFlat(${cn}, ${pn}, index);
          return sampleTexture(${an}, uv);
        }
      `;return new nn.GlslLibRoutine(mn,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(hn,an,rn){const cn=rn.unpackedShape,pn=[rn.height,rn.width];if(pn!=null&&tn.ArrayUtil.arraysEqual(cn,pn)){const _n=`
          float ${hn}(int row, int col) {
            vec2 uv = (vec2(row, col) + halfCR) / vec2(${pn[1]}.0, ${pn[0]}.0);
            return sampleTexture(${an}, uv);
          }
        `;return new nn.GlslLibRoutine(_n,["coordinates.sampleTexture"])}const{newShape:mn,keptDims:xn}=(0,on.squeezeShape)(cn),gn=mn;if(gn.length<cn.length){const _n=(0,un.squeezeInputShape)(cn,gn),Tn=JSON.parse(JSON.stringify(rn));Tn.unpackedShape=_n;const An=["col","row"],Pn=`
          ${this.getUnpackedSamplerFromInput(hn,an,Tn).routineBody}
          float ${hn}(int row, int col) {
            return ${hn}(${(0,un.getSqueezedParams)(An,xn)});
          }
        `;return new nn.GlslLibRoutine(Pn,["coordinates.sampleTexture"])}const yn=pn[1],bn=pn[0];if(bn===1){const _n=`
          float ${hn}(int row, int col) {
            int offset_${an} = coordsToOffset(TexCoords, ${yn}, ${bn});
            float index = dot(vec3(row, col, offset_${an}), vec3(${cn[1]}, 1, 1));
            vec2 uv = vec2(0.5, (index + 0.5) / ${yn}.0);
            return sampleTexture(${an}, uv);
          }
        `;return new nn.GlslLibRoutine(_n,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(yn===1){const _n=`
          float ${hn}(int row, int col) {
            int offset_${an} = coordsToOffset(TexCoords, ${yn}, ${bn});
            float index = dot(vec3(row, col, offset_${an}), vec3(${cn[1]}, 1, 1));
            vec2 uv = vec2((index + 0.5) / ${bn}.0, 0.5);
            return sampleTexture(${an}, uv);
          }
        `;return new nn.GlslLibRoutine(_n,["coordinates.sampleTexture","coordinates.coordsToOffset"])}const wn=`
        float ${hn}(int row, int col) {
          int index = col * ${cn[1]} + row;
          vec2 uv = uvFromFlat(${yn}, ${bn}, index);
          return sampleTexture(${an}, uv);
        }
      `;return new nn.GlslLibRoutine(wn,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(hn,an,rn){const cn=rn.unpackedShape,pn=cn[1]*cn[2],mn=cn[2],{newShape:xn,keptDims:gn}=(0,on.squeezeShape)(cn),yn=xn;if(yn.length<cn.length){const wn=(0,un.squeezeInputShape)(cn,yn),_n=["batch","col","row"],Tn=JSON.parse(JSON.stringify(rn));Tn.unpackedShape=wn;const An=this.getUnpackedSamplerFromInput(hn,an,Tn),Pn=gn.reverse(),Sn=`
          ${An.routineBody}
          float ${hn}(int batch, int row, int col) {
            return ${hn}(${(0,un.getSqueezedParams)(_n,Pn)});
          }
        `;return new nn.GlslLibRoutine(Sn,An.dependencies)}const bn=`
          float ${hn}(int depth, int row, int col) {
            // Explicitly use integer operations as dot() only works on floats.
            int index = depth * ${pn} + col * ${mn} + row;
            vec2 uv = uvFromFlat(${rn.width}, ${rn.height}, index);
            return sampleTexture(${an}, uv);
          }
      `;return new nn.GlslLibRoutine(bn,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(hn,an,rn){const cn=rn.unpackedShape,pn=cn[3],mn=cn[2]*pn,xn=`
        float ${hn}(int row, int col, int depth, int depth2) {
          int index = row * ${cn[1]*mn} + col * ${mn} +
              depth2 * ${pn} + depth;
          vec2 uv = uvFromFlat(${rn.width}, ${rn.height}, index);
          return sampleTexture(${an}, uv);
        }
      `;return new nn.GlslLibRoutine(xn,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(hn,an,rn){const cn=rn.unpackedShape,pn=cn[4],mn=cn[3]*pn,xn=cn[2]*mn,gn=cn[1]*xn,{newShape:yn,keptDims:bn}=(0,on.squeezeShape)(cn);if(yn.length<cn.length){const _n=(0,un.squeezeInputShape)(cn,yn),Tn=["row","col","depth","depth2","depth3"],An=JSON.parse(JSON.stringify(rn));An.unpackedShape=_n;const Pn=`
          ${this.getUnpackedSamplerFromInput(hn,an,An).routineBody}
          float ${hn}(int row, int col, int depth, int depth2, int depth3) {
            return ${hn}(${(0,un.getSqueezedParams)(Tn,bn)});
          }
        `;return new nn.GlslLibRoutine(Pn,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const wn=`
        float ${hn}(int row, int col, int depth, int depth2, int depth3) {
          int index = row * ${gn} + col * ${xn} + depth * ${mn} +
          depth3 * ${pn} + depth2;
          vec2 uv = uvFromFlat(${rn.width}, ${rn.height}, index);
          return sampleTexture(${an}, uv);
        }
      `;return new nn.GlslLibRoutine(wn,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(hn,an,rn){const cn=rn.unpackedShape,pn=cn[5],mn=cn[4]*pn,xn=cn[3]*mn,gn=cn[2]*xn,yn=cn[1]*gn,{newShape:bn,keptDims:wn}=(0,on.squeezeShape)(cn);if(bn.length<cn.length){const Tn=(0,un.squeezeInputShape)(cn,bn),An=["row","col","depth","depth2","depth3","depth4"],Pn=JSON.parse(JSON.stringify(rn));Pn.unpackedShape=Tn;const Sn=`
            ${this.getUnpackedSamplerFromInput(hn,an,Pn).routineBody}
            float ${hn}(int row, int col, int depth,
              int depth2, int depth3, int depth4) {
              return ${hn}(${(0,un.getSqueezedParams)(An,wn)});
            }
          `;return new nn.GlslLibRoutine(Sn,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const _n=`
          float ${hn}(int row, int col, int depth,
            int depth2, int depth3, int depth4) {
            int index = row * ${yn} + col * ${gn} + depth * ${xn} +
            depth2 * ${mn} + depth3 * ${pn} + depth4;
            vec2 uv = uvFromFlat(${rn.width}, ${rn.height}, index);
            return sampleTexture(${an}, uv);
          }
        `;return new nn.GlslLibRoutine(_n,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){const hn=this.context.outputTextureLayout,an=hn.shape.length,rn=hn.strides,cn=hn.width,pn=hn.height,mn=[];for(let gn=0;gn<an-1;++gn)mn.push(`
        c[${gn}] = offset / ${rn[gn]};`),mn.push(`
        offset -= c[${gn}] * ${rn[gn]};`);mn.push(`
        c[${an-1}] = offset;`);const xn=`
      void toVec(vec2 texCoords, out int c[${an}]) {
        int offset = coordsToOffset(texCoords, ${cn}, ${pn});
        ${mn.join("")}
      }
      void toVec(int offset, out int c[${an}]) {
        ${mn.join("")}
      }
    `;return{toVec:new nn.GlslLibRoutine(xn,["coordinates.coordsToOffset"])}}valueFrom(){const hn={};return this.context.programInfo.inputNames.forEach((an,rn)=>{const cn=this.context.inputTextureLayouts[rn],pn=(cn.unpackedShape.length>0?cn.unpackedShape:cn.shape).length;let mn=`_${an}`;hn[mn]=new nn.GlslLibRoutine(this.getValueFromSingle(an,pn,cn.width,cn.height,!1),[`shapeUtils.indicesToOffset${mn}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),mn+="_T",hn[mn]=new nn.GlslLibRoutine(this.getValueFromSingle(an,pn,cn.width,cn.height,!0),[`shapeUtils.indicesToOffset${mn}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),hn}getValueFromSingle(hn,an,rn,cn,pn){let mn=`_${hn}`;return pn&&(mn+="_T"),`
        float ${mn}(int m[${an}]) {
          int offset = indicesToOffset${mn}(m);
          vec2 coords = offsetToCoords(offset, ${rn}, ${cn});
          float value = getColorAsFloat(${(0,sn.getGlsl)(this.context.glContext.version).texture2D}(${hn}, coords));
          return value;
        }
        `}getPackedValueFrom(hn,an,rn,cn,pn){let mn=`_${hn}_Pack`;return pn&&(mn+="_T"),`
        vec4 ${mn}(int m[${an}]) {
          int offset = indicesToOffset_${hn}(m);
          vec2 coords = offsetToCoords(offset, ${rn}, ${cn});
          return ${(0,sn.getGlsl)(this.context.glContext.version).texture2D}(${hn}, coords);
        }
        `}}e.CoordsGlslLib=dn},8520:(St,e)=>{var en;Object.defineProperty(e,"__esModule",{value:!0}),e.TopologicalSortGlslRoutines=e.GlslLibRoutineNode=e.GlslLibRoutine=e.GlslLib=e.GlslContext=e.FunctionType=void 0,(en=e.FunctionType||(e.FunctionType={}))[en.ValueBased=0]="ValueBased",en[en.Positional=1]="Positional",e.GlslContext=class{constructor(tn,nn,sn,on){this.glContext=tn,this.programInfo=nn,this.inputTextureLayouts=sn,this.outputTextureLayout=on}},e.GlslLib=class{constructor(tn){this.context=tn}},e.GlslLibRoutine=class{constructor(tn,nn){this.routineBody=tn,this.dependencies=nn}},e.GlslLibRoutineNode=class{constructor(tn,nn,sn){this.name=tn,this.dependencies=sn||[],nn&&(this.routineBody=nn)}addDependency(tn){tn&&this.dependencies.push(tn)}},e.TopologicalSortGlslRoutines=class{static returnOrderedNodes(tn){if(!tn||tn.length===0)return[];if(tn.length===1)return tn;const nn=new Set,sn=new Set,on=new Array;return this.createOrderedNodes(tn,nn,sn,on),on}static createOrderedNodes(tn,nn,sn,on){for(let un=0;un<tn.length;++un)this.dfsTraverse(tn[un],nn,sn,on)}static dfsTraverse(tn,nn,sn,on){if(!tn||sn.has(tn.name))return;if(nn.has(tn.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");nn.add(tn.name);const un=tn.dependencies;if(un&&un.length>0)for(let dn=0;dn<un.length;++dn)this.dfsTraverse(un[dn],nn,sn,on);on.push(tn),sn.add(tn.name),nn.delete(tn.name)}}},7341:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.EncodingGlslLib=void 0;const tn=en(8520);class nn extends tn.GlslLib{constructor(on){super(on)}getFunctions(){return Object.assign(Object.assign({},this.encodeFloat32()),this.decodeFloat32())}getCustomTypes(){return{}}encodeFloat32(){return{encode:new tn.GlslLibRoutine(`highp vec4 encode(highp float f) {
        return vec4(f, 0.0, 0.0, 0.0);
      }
        `)}}decodeFloat32(){return{decode:new tn.GlslLibRoutine(`highp float decode(highp vec4 rgba) {
        return rgba.r;
      }
        `)}}encodeUint8(){const on=nn.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new tn.GlslLibRoutine(`
      highp vec4 encode(highp float f) {
        highp float F = abs(f);
        highp float Sign = step(0.0,-f);
        highp float Exponent = floor(log2(F));
        highp float Mantissa = (exp2(- Exponent) * F);
        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));
        highp vec4 rgba;
        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));
        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);
        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));
        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));
        ${on}
        rgba = rgba / 255.0; // values need to be normalized to [0,1]
        return rgba;
    }
        `)}}decodeUint8(){const on=nn.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new tn.GlslLibRoutine(`
        highp float decode(highp vec4 rgba) {
          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]
          ${on}
          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;
          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;
          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);
          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));
          return Result;
      }
        `)}}static isLittleEndian(){const on=new ArrayBuffer(4),un=new Uint32Array(on),dn=new Uint8Array(on);if(un[0]=3735928559,dn[0]===239)return!0;if(dn[0]===222)return!1;throw new Error("unknown endianness")}}e.EncodingGlslLib=nn},9894:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FragColorGlslLib=void 0;const tn=en(8520),nn=en(5060);class sn extends tn.GlslLib{constructor(un){super(un)}getFunctions(){return Object.assign(Object.assign({},this.setFragColor()),this.getColorAsFloat())}getCustomTypes(){return{}}setFragColor(){const un=(0,nn.getGlsl)(this.context.glContext.version);return{setFragColor:new tn.GlslLibRoutine(`
        void setFragColor(float value) {
            ${un.output} = encode(value);
        }
        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new tn.GlslLibRoutine(`
        float getColorAsFloat(vec4 color) {
            return decode(color);
        }
        `,["encoding.decode"])}}}e.FragColorGlslLib=sn},2848:(St,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.replaceInlines=void 0;const en=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm;e.replaceInlines=function(tn){const nn={};let sn;for(;(sn=en.exec(tn))!==null;){const on=sn[3].split(",").map(un=>{const dn=un.trim().split(" ");return dn&&dn.length===2?{type:dn[0],name:dn[1]}:null}).filter(un=>un!==null);nn[sn[2]]={params:on,body:sn[4]}}for(const on in nn){const un="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;".replace("__FUNC__",on),dn=new RegExp(un,"gm");for(;(sn=dn.exec(tn))!==null;){const fn=sn[1],hn=sn[2],an=sn[3].split(","),rn=fn?`${fn} ${hn};`:"";let cn=nn[on].body,pn="";nn[on].params.forEach((xn,gn)=>{xn&&(pn+=`${xn.type} ${xn.name} = ${an[gn]};
`)}),cn=`${pn}
 ${cn}`,cn=cn.replace("return",`${hn} = `);const mn=`
      ${rn}
      {
        ${cn}
      }
      `;tn=tn.replace(sn[0],mn)}}return tn.replace(en,"")}},8879:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlslPreprocessor=void 0;const tn=en(8520),nn=en(2848),sn=en(5483),on=en(5060);e.GlslPreprocessor=class{constructor(un,dn,fn,hn){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new tn.GlslContext(un,dn,fn,hn),Object.keys(sn.glslRegistry).forEach(rn=>{const cn=new sn.glslRegistry[rn](this.context);this.libs[rn]=cn});const an=this.glslLibRoutineDependencyGraph;for(const rn in this.libs){const cn=this.libs[rn].getFunctions();for(const pn in cn){const mn=rn+"."+pn;let xn;an[mn]?(xn=an[mn],xn.routineBody=cn[pn].routineBody):(xn=new tn.GlslLibRoutineNode(mn,cn[pn].routineBody),an[mn]=xn);const gn=cn[pn].dependencies;if(gn)for(let yn=0;yn<gn.length;++yn)if(an[gn[yn]])xn.addDependency(an[gn[yn]]);else{const bn=new tn.GlslLibRoutineNode(gn[yn]);an[gn[yn]]=bn,xn.addDependency(bn)}}}}preprocess(){const un=this.context.programInfo;let dn=un.shaderSource;return this.context.programInfo.hasMain||(dn=`${dn}
      ${(0,on.getDefaultFragShaderMain)(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),dn=(0,nn.replaceInlines)(dn),`${(0,on.getFragShaderPreamble)(this.context.glContext.version)}
    ${this.getUniforms(un.inputNames,un.variables)}
    ${this.getImports(dn)}
    ${dn}`}getImports(un){const dn=this.selectGlslLibRoutinesToBeIncluded(un);if(dn.length===0)return"";let fn="";for(let hn=0;hn<dn.length;++hn){if(!dn[hn].routineBody)throw new Error(`Missing body for the Glsl Library routine: ${dn[hn].name}`);fn+=dn[hn].routineBody+`
`}return fn}selectGlslLibRoutinesToBeIncluded(un){const dn=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(fn=>{const hn=fn.split(".")[1];un.indexOf(hn)!==-1&&dn.push(this.glslLibRoutineDependencyGraph[fn])}),tn.TopologicalSortGlslRoutines.returnOrderedNodes(dn)}getUniforms(un,dn){const fn=[];if(un)for(const hn of un)fn.push(`uniform sampler2D ${hn};`);if(dn)for(const hn of dn)fn.push(`uniform ${hn.type} ${hn.name}${hn.arrayLength?`[${hn.arrayLength}]`:""};`);return fn.join(`
`)}}},5483:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.glslRegistry=void 0;const tn=en(5107),nn=en(7341),sn=en(9894),on=en(2655),un=en(3891);e.glslRegistry={encoding:nn.EncodingGlslLib,fragcolor:sn.FragColorGlslLib,vec:un.VecGlslLib,shapeUtils:on.ShapeUtilsGlslLib,coordinates:tn.CoordsGlslLib}},2655:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ShapeUtilsGlslLib=void 0;const tn=en(8520);class nn extends tn.GlslLib{constructor(on){super(on)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.bcastIndex()),this.bcastMatmulIndex()),this.offsetToIndices()),this.indicesToOffset()),this.incrementIndices())}getCustomTypes(){return{}}bcastIndex(){const on=this.context.outputTextureLayout.shape.length,un={};return this.context.programInfo.inputNames.forEach((dn,fn)=>{const hn=this.context.inputTextureLayouts[fn].unpackedShape;if(hn.length<=on){const an=hn.length,rn=on-an,cn=`bcastIndices_${dn}`;let pn="";for(let xn=0;xn<an;++xn)pn+=`
          realIndices[${xn}] = int( mod(float(bcastedIndices[${rn+xn}]), ${hn[xn]}.0) );
          `;const mn=`
        void ${cn} (int bcastedIndices[${on}], out int realIndices[${an}]) {
          ${pn}
        }
        `;un[cn]=new tn.GlslLibRoutine(mn)}}),un}bcastMatmulIndex(){const on=this.context.outputTextureLayout.shape.length,un={};return this.context.programInfo.inputNames.forEach((dn,fn)=>{const hn=this.context.inputTextureLayouts[fn].shape;if(!(hn.length<2||hn.length>on)){const an=hn.length,rn=on-an,cn=`bcastMatmulIndices_${dn}`;let pn="";for(let xn=0;xn<an-2;++xn)pn+=`
          realIndices[${xn}] = int( mod(float(bcastedIndices[${rn+xn}]), ${hn[xn]}.0) );
          `;const mn=`
        void ${cn}(int bcastedIndices[${on}], out int realIndices[${an}]) {
          ${pn}
          realIndices[${an-1}] = bcastedIndices[${on-1}];
          realIndices[${an-2}] = bcastedIndices[${on-2}];
        }
        `;un[cn]=new tn.GlslLibRoutine(mn)}}),un}indicesToOffset(){const on={};return this.context.programInfo.inputNames.forEach((un,dn)=>{const fn=this.context.inputTextureLayouts[dn].shape,hn=this.context.inputTextureLayouts[dn].strides,an=fn.length;let rn=`indicesToOffset_${un}`;on[rn]=new tn.GlslLibRoutine(nn.indexToOffsetSingle(rn,an,hn)),rn=`indicesToOffset_${un}_T`,on[rn]=new tn.GlslLibRoutine(nn.indexToOffsetSingle(rn,an,hn.slice().reverse()))}),on}static indexToOffsetSingle(on,un,dn){let fn="";for(let hn=un-1;hn>=0;--hn)fn+=`
        offset += indices[${hn}] * ${dn[hn]};
        `;return`
      int ${on}(int indices[${un}]) {
        int offset = 0;
        ${fn}
        return offset;
      }
      `}offsetToIndices(){const on={};return this.context.programInfo.inputNames.forEach((un,dn)=>{const fn=this.context.inputTextureLayouts[dn].shape,hn=this.context.inputTextureLayouts[dn].strides,an=fn.length;let rn=`offsetToIndices_${un}`;on[rn]=new tn.GlslLibRoutine(nn.offsetToIndicesSingle(rn,an,hn)),rn=`offsetToIndices_${un}_T`,on[rn]=new tn.GlslLibRoutine(nn.offsetToIndicesSingle(rn,an,hn.slice().reverse()))}),on}static offsetToIndicesSingle(on,un,dn){const fn=[];for(let hn=0;hn<un-1;++hn)fn.push(`
      indices[${hn}] = offset / ${dn[hn]};`),fn.push(`
        offset -= indices[${hn}] * ${dn[hn]};`);return fn.push(`
      indices[${un-1}] = offset;`),`
      void ${on}(int offset, out int indices[${un}]) {
        ${fn.join("")}
      }
      `}incrementIndices(){const on={};return this.context.programInfo.inputNames.forEach((un,dn)=>{const fn=this.context.inputTextureLayouts[dn].shape,hn=fn.length,an=`incrementIndices_${un}`;let rn="";for(let pn=0;pn<hn;++pn)rn+=`
        shape[${pn}] = ${fn[pn]};`;const cn=`
        void ${an}(int axis, out int indices[${hn}]) {
          int shape[${hn}];
          ${rn};
          for(int i = ${hn} -1 ; i >= 0; --i) {
            if(i > axis) continue;
            indices[i] += 1;
            if(indices[i] < shape[i]) {
              break;
            }
            indices[i] = 0;
          }
        }
        `;on[an]=new tn.GlslLibRoutine(cn)}),on}}e.ShapeUtilsGlslLib=nn},5060:(St,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getDefaultFragShaderMain=e.getFragShaderPreamble=e.getVertexShaderSource=e.getGlsl=void 0;const en={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},tn={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"};function nn(sn){return sn===1?en:tn}e.getGlsl=nn,e.getVertexShaderSource=function(sn){const on=nn(sn);return`${on.version}
      precision highp float;
      ${on.attribute} vec3 position;
      ${on.attribute} vec2 textureCoord;

      ${on.varyingVertex} vec2 TexCoords;

      void main()
      {
          gl_Position = vec4(position, 1.0);
          TexCoords = textureCoord;
      }`},e.getFragShaderPreamble=function(sn){const on=nn(sn);return`${on.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${on.varyingFrag} vec2 TexCoords;
    ${on.outputDeclaration}
    const vec2 halfCR = vec2(0.5, 0.5);

    // Custom vector types to handle higher dimenalities.
    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    `},e.getDefaultFragShaderMain=function(sn,on){return`
  void main() {
    int indices[${on}];
    toVec(TexCoords, indices);
    vec4 result = vec4(process(indices));
    ${nn(sn).output} = result;
  }
  `}},3891:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VecGlslLib=void 0;const tn=en(8520);class nn extends tn.GlslLib{constructor(on){super(on)}getCustomTypes(){return{}}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign({},this.binaryVecFunctions()),this.copyVec()),this.setVecItem()),this.getVecItem())}binaryVecFunctions(){const on=this.context.outputTextureLayout.shape.length,un={add:"+=",sub:"-=",mul:"*=",div:"/="},dn={};for(const fn in un){const hn=`${fn}Vec`;let an="";for(let cn=0;cn<on;++cn)an+=`
          dest[${cn}] ${un[fn]} src[${cn}];
          `;const rn=`
        void ${hn}(int src[${on}], out int dest[${on}]) {
          ${an}
        }
        `;dn[hn]=new tn.GlslLibRoutine(rn)}return dn}copyVec(){const on=this.context.outputTextureLayout.shape.length;let un="";for(let fn=0;fn<on;++fn)un+=`
        dest[${fn}] = src[${fn}];
        `;const dn=`
      void copyVec(int src[${on}], out int dest[${on}]) {
        ${un}
      }
      `;return{copyVec:new tn.GlslLibRoutine(dn)}}setVecItem(){const on=this.context.outputTextureLayout.shape.length;let un=`
        if(index < 0)
            index =${on} + index;
        if (index == 0)
            m[0] = value;
        `;for(let fn=1;fn<on-1;++fn)un+=`
        else if (index == ${fn})
            m[${fn}] = value;
            `;un+=`
        else
            m[${on-1}] = value;
        `;const dn=`
      void setVecItem(out int m[${on}], int index, int value) {
        ${un}
      }
        `;return{setVecItem:new tn.GlslLibRoutine(dn)}}getVecItem(){const on=this.context.outputTextureLayout.shape.length;let un=`
        if(index < 0)
            index = ${on} + index;
        if (index == 0)
            return m[0];
      `;for(let fn=1;fn<on-1;++fn)un+=`
        else if (index == ${fn})
            return m[${fn}];
      `;un+=`
        else
            return m[${on-1}];
        `;const dn=`
      int getVecItem(int m[${on}], int index) {
        ${un}
      }
    `;return{getVecItem:new tn.GlslLibRoutine(dn)}}}e.VecGlslLib=nn},8316:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLInferenceHandler=void 0;const tn=en(6231),nn=en(9162),sn=en(2517),on=en(2403),un=en(7019),dn=en(8710),fn=en(5611),hn=en(4057),an=en(2039);e.WebGLInferenceHandler=class{constructor(rn){this.session=rn,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(rn,cn){return(0,hn.calculateTextureWidthAndHeight)(this.session.layoutStrategy,rn,cn)}executeProgram(rn,cn){if(cn.length<rn.inputNames.length)throw new Error(`Input size mustn't be less than ${rn.inputNames.length}.`);if(rn.inputNames.length!==rn.inputTypes.length)throw new Error("input names size does not match input types");const pn=[];for(let wn=0;wn<rn.inputNames.length;++wn)pn[wn]=this.getOrCreateTextureData(cn[wn],rn.inputTypes[wn]);const mn=((wn,_n)=>{const Tn=_n.map(Pn=>`${Pn.unpackedShape.join(",")};${Pn.width}x${Pn.height}`).join("_");let An=wn.name;return wn.cacheHint&&(An+="["+wn.cacheHint+"]"),An+=":"+Tn,An})(rn,pn);let xn=this.session.programManager.getArtifact(mn);const gn=xn?xn.programInfo:typeof rn.get=="function"?rn.get():rn,yn=(0,hn.createTextureLayoutFromTextureType)(this.session.layoutStrategy,gn.output.dims,gn.output.textureType),bn=this.createTextureData(yn,gn.output.type);return xn||(xn=this.session.programManager.build(gn,pn,bn),this.session.programManager.setArtifact(mn,xn)),this.runProgram(xn,pn,bn),bn}run(rn,cn){return this.executeProgram(rn,cn).tensor}runProgram(rn,cn,pn){for(let mn=0;mn<cn.length;++mn)if(!!cn[mn].isPacked!=(rn.programInfo.inputTypes[mn]===an.TextureType.packed))throw new Error(`input[${mn}] property packed inconsistent`);if(!!pn.isPacked!=(rn.programInfo.output.textureType===an.TextureType.packed))throw new Error("output property packed inconsistent");this.session.programManager.run(rn,cn,pn)}getOrCreateTextureData(rn,cn){let pn=this.getTextureData(rn.dataId,cn===an.TextureType.packed);if(!pn&&(pn=this.getTextureData(rn.dataId,cn!==an.TextureType.packed),pn))return cn===an.TextureType.packed?this.pack(pn):this.unpack(pn);if(!pn){const mn=(0,hn.createTextureLayoutFromTextureType)(this.session.layoutStrategy,rn.dims,cn);if(cn===an.TextureType.packedLastDimension){const yn=rn.dims;if(yn.length===4){const bn=[yn[0],Math.ceil(yn[1]*yn[2]*yn[3]/4)],wn=(0,hn.createTextureLayoutFromTextureType)(this.session.layoutStrategy,bn,cn);let _n=rn.numberData;if(yn[1]*yn[2]*yn[3]%4!=0){const Tn=yn[0],An=yn[1]*yn[2]*yn[3],Pn=Math.ceil(An*1/4)*4;_n=new Float32Array(Tn*Pn);for(let Sn=0;Sn<Tn;++Sn){const Cn=Sn*An,Nn=Sn*Pn+Sn%1*An;_n.set(rn.numberData.subarray(Cn,Cn+An),Nn)}}return this.createTextureData(wn,rn.type,_n,rn,1)}}if(cn===an.TextureType.packed){const xn=(0,hn.createTextureLayoutFromShape)(this.session.layoutStrategy,rn.dims,1,[],{reverseWH:!0}),gn=this.createTextureData(xn,rn.type,rn.numberData,rn,1);pn=this.pack(gn)}else pn=this.createTextureData(mn,rn.type,rn.numberData,rn,1)}return pn}createTextureDataFromLayoutBindTensor(rn,cn,pn,mn){return this.createTextureData(rn,cn,pn,mn,1)}createTextureData(rn,cn,pn,mn,xn){tn.Logger.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(rn)}]`);const gn=this.session.textureManager.createTextureFromLayout(cn,rn,pn,xn);return this.createTextureDataFromTexture(rn,cn,gn,mn)}reshapeUnpacked(rn,cn){const pn=this.getOrCreateTextureData(rn,an.TextureType.unpacked),mn={channels:pn.channels,height:pn.height,width:pn.width,shape:cn.length!==0?cn:[1],strides:sn.ShapeUtil.computeStrides(cn),unpackedShape:cn};return this.createTextureDataFromTexture(mn,rn.type,pn.texture).tensor}reshapePacked(rn,cn){const pn=this.getOrCreateTextureData(rn,an.TextureType.packed);if((0,un.isReshapeCheap)(rn.dims,cn)){const bn={channels:pn.channels,height:pn.height,width:pn.width,shape:cn.length!==0?cn:[1],strides:sn.ShapeUtil.computeStrides(cn),unpackedShape:cn,isPacked:!0};return this.createTextureDataFromTexture(bn,rn.type,pn.texture).tensor}const mn=(0,un.processDims3D)(rn.dims),xn=(0,un.processDims3D)(cn),gn=this.reshapePacked(rn,mn),yn=this.run((0,un.createPackedReshape3DProgramInfoLoader)(this,gn,xn),[gn]);return this.reshapePacked(yn,cn)}cast(rn,cn){const pn=this.getOrCreateTextureData(rn,an.TextureType.unpacked);return this.createTextureDataFromTexture(pn,cn,pn.texture).tensor}createTextureDataFromTexture(rn,cn,pn,mn,xn){const gn=Object.assign(Object.assign({},rn),{tensor:mn||new nn.Tensor(rn.unpackedShape,cn,yn=>this.readTexture(gn),async yn=>this.readTextureAsync(gn),void 0,xn),texture:pn});return this.setTextureData(gn.tensor.dataId,gn,rn.isPacked),gn}getTextureData(rn,cn=!1){return this.session.isInitializer(rn)?this.session.getTextureData(rn,cn):cn?this.packedTextureDataCache.get(rn):this.unpackedTextureDataCache.get(rn)}setTextureData(rn,cn,pn=!1){this.session.isInitializer(rn)?this.session.setTextureData(rn,cn,pn):(pn?this.packedTextureDataCache:this.unpackedTextureDataCache).set(rn,cn)}isTextureLayoutCached(rn,cn=!1){return!!this.getTextureData(rn.dataId,cn)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(rn=>this.session.textureManager.releaseTexture(rn)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(rn=>this.session.textureManager.releaseTexture(rn)),this.unpackedTextureDataCache=new Map}readTexture(rn){return rn.isPacked?this.readTexture(this.unpack(rn)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(rn,rn.tensor.type,rn.channels):this.session.textureManager.readUint8TextureAsFloat((0,dn.encodeAsUint8)(this,rn))}async readTextureAsync(rn){return rn.isPacked?this.readTextureAsync(this.unpack(rn)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(rn,rn.tensor.type,rn.channels):this.session.textureManager.readUint8TextureAsFloat((0,dn.encodeAsUint8)(this,rn))}pack(rn){return this.executeProgram((0,on.createPackProgramInfoLoader)(this,rn.tensor),[rn.tensor])}unpack(rn){return this.executeProgram((0,fn.createUnpackProgramInfoLoader)(this,rn.tensor),[rn.tensor])}}},1640:function(St,e,en){var tn=this&&this.__createBinding||(Object.create?function(Qn,zn,lr,$n){$n===void 0&&($n=lr);var On=Object.getOwnPropertyDescriptor(zn,lr);On&&!("get"in On?!zn.__esModule:On.writable||On.configurable)||(On={enumerable:!0,get:function(){return zn[lr]}}),Object.defineProperty(Qn,$n,On)}:function(Qn,zn,lr,$n){$n===void 0&&($n=lr),Qn[$n]=zn[lr]}),nn=this&&this.__setModuleDefault||(Object.create?function(Qn,zn){Object.defineProperty(Qn,"default",{enumerable:!0,value:zn})}:function(Qn,zn){Qn.default=zn}),sn=this&&this.__importStar||function(Qn){if(Qn&&Qn.__esModule)return Qn;var zn={};if(Qn!=null)for(var lr in Qn)lr!=="default"&&Object.prototype.hasOwnProperty.call(Qn,lr)&&tn(zn,Qn,lr);return nn(zn,Qn),zn};Object.defineProperty(e,"__esModule",{value:!0}),e.WEBGL_OP_RESOLVE_RULES=void 0;const on=en(2898),un=sn(en(7839)),dn=en(4196),fn=en(2069),hn=en(8138),an=en(9663),rn=en(5193),cn=en(7992),pn=en(1253),mn=en(4776),xn=en(6572),gn=en(3346),yn=en(5623),bn=en(2870),wn=en(2143),_n=en(4939),Tn=en(718),An=en(2268),Pn=en(8117),Sn=en(2278),Cn=en(5524),Nn=en(5975),Mn=en(3933),Fn=en(6558),In=en(5723),Bn=en(3738),Ln=sn(en(4909)),qn=en(8428),Yn=en(9793);e.WEBGL_OP_RESOLVE_RULES=[["Abs","","6+",Ln.abs],["Acos","","7+",Ln.acos],["Add","","7+",un.add],["And","","7+",un.and],["Asin","","7+",Ln.asin],["Atan","","7+",Ln.atan],["AveragePool","","7+",wn.averagePool,wn.parseAveragePoolAttributes],["BatchNormalization","","7+",on.batchNormalization,on.parseBatchNormalizationAttributes],["Cast","","6+",dn.cast,dn.parseCastAttributes],["Ceil","","6+",Ln.ceil],["Clip","","6-10",Ln.clip,Ln.parseClipAttributes],["Clip","","11+",Ln.clipV11],["Concat","","4+",fn.concat,fn.parseConcatAttributes],["Conv","","1+",hn.conv,hn.parseConvAttributes],["ConvTranspose","","1+",an.convTranspose,an.parseConvTransposeAttributes],["Cos","","7+",Ln.cos],["Div","","7+",un.div],["Dropout","","7+",Ln.identity],["DepthToSpace","","1+",rn.depthToSpace,rn.parseDepthToSpaceAttributes],["Equal","","7+",un.equal],["Elu","","6+",Ln.elu,Ln.parseEluAttributes],["Exp","","6+",Ln.exp],["Flatten","","1+",cn.flatten,cn.parseFlattenAttributes],["Floor","","6+",Ln.floor],["FusedConv","com.microsoft","1+",hn.conv,hn.parseConvAttributes],["Gather","","1+",pn.gather,pn.parseGatherAttributes],["Gemm","","7-10",mn.gemm,mn.parseGemmAttributesV7],["Gemm","","11+",mn.gemm,mn.parseGemmAttributesV11],["GlobalAveragePool","","1+",wn.globalAveragePool,wn.parseGlobalAveragePoolAttributes],["GlobalMaxPool","","1+",wn.globalMaxPool],["Greater","","7+",un.greater],["Identity","","1+",Ln.identity],["ImageScaler","","1+",xn.imageScaler,xn.parseImageScalerAttributes],["InstanceNormalization","","6+",gn.instanceNormalization,gn.parseInstanceNormalizationAttributes],["LeakyRelu","","6+",Ln.leakyRelu,Ln.parseLeakyReluAttributes],["Less","","7+",un.less],["Log","","6+",Ln.log],["MatMul","","1+",yn.matMul,yn.parseMatMulAttributes],["MaxPool","","1+",wn.maxPool,wn.parseMaxPoolAttributes],["Mul","","7+",un.mul],["Neg","","6+",Ln.neg],["Not","","1+",Ln.not],["Or","","7+",un.or],["Pad","","2-10",bn.padV2,bn.parsePadAttributesV2],["Pad","","11+",bn.padV11,bn.parsePadAttributesV11],["Pow","","7+",un.pow],["PRelu","","7+",un.pRelu],["ReduceLogSum","","1+",_n.reduceLogSum,_n.parseReduceAttributes],["ReduceMax","","1+",_n.reduceMax,_n.parseReduceAttributes],["ReduceMean","","1+",_n.reduceMean,_n.parseReduceAttributes],["ReduceMin","","1+",_n.reduceMin,_n.parseReduceAttributes],["ReduceProd","","1+",_n.reduceProd,_n.parseReduceAttributes],["ReduceSum","","1-12",_n.reduceSum,_n.parseReduceAttributes],["ReduceSumSquare","","1+",_n.reduceLogSumSquare,_n.parseReduceAttributes],["Relu","","6+",Ln.relu],["Reshape","","5+",Tn.reshape],["Resize","","10",An.resize,An.parseResizeAttributesV10],["Resize","","11+",An.resize,An.parseResizeAttributesV11],["Shape","","1+",Pn.shape],["Sigmoid","","6+",Ln.sigmoid],["Sin","","7+",Ln.sin],["Slice","","10+",Sn.sliceV10],["Slice","","1-9",Sn.slice,Sn.parseSliceAttributes],["Softmax","","1-12",Cn.softmax,Cn.parseSoftmaxAttributes],["Softmax","","13+",Cn.softmaxV13,Cn.parseSoftmaxAttributesV13],["Split","","2-12",Nn.split,Nn.parseSplitAttributes],["Sqrt","","6+",Ln.sqrt],["Squeeze","","1-12",Mn.squeeze,Mn.parseSqueezeAttributes],["Squeeze","","13+",Mn.squeezeV13],["Sub","","7+",un.sub],["Sum","","6+",Fn.sum],["Tan","","7+",Ln.tan],["Tanh","","6+",Ln.tanh],["Tile","","6+",In.tile],["Transpose","","1+",Bn.transpose,Bn.parseTransposeAttributes],["Upsample","","7-8",Yn.upsample,Yn.parseUpsampleAttributesV7],["Upsample","","9",Yn.upsample,Yn.parseUpsampleAttributesV9],["Unsqueeze","","1-12",qn.unsqueeze,qn.parseUnsqueezeAttributes],["Unsqueeze","","13+",qn.unsqueezeV13],["Xor","","7+",un.xor]]},2898:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseBatchNormalizationAttributes=e.batchNormalization=void 0;const tn=en(246),nn=en(5060),sn=en(2039),on={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[sn.TextureType.unpacked,sn.TextureType.unpacked,sn.TextureType.unpacked,sn.TextureType.unpacked,sn.TextureType.unpacked]};e.batchNormalization=(fn,hn,an)=>(dn(hn),[fn.run(Object.assign(Object.assign({},on),{cacheHint:an.cacheKey,get:()=>un(fn,hn,an)}),hn)]),e.parseBatchNormalizationAttributes=fn=>{const hn=fn.attributes.getFloat("epsilon",1e-5),an=fn.attributes.getFloat("momentum",.9),rn=fn.attributes.getInt("spatial",1);return(0,tn.createAttributeWithCacheKey)({epsilon:hn,momentum:an,spatial:rn})};const un=(fn,hn,an)=>{const rn=(0,nn.getGlsl)(fn.session.backend.glContext.version),cn=hn[0].dims.length,[pn,mn]=fn.calculateTextureWidthAndHeight(hn[1].dims,sn.TextureType.unpacked),xn=`
  float process(int[${cn}] indices) {
    vec2 position = offsetToCoords(indices[1], ${pn}, ${mn});
    float scale = getColorAsFloat(${rn.texture2D}(Scale, position));
    float mean = getColorAsFloat(${rn.texture2D}(Mean, position));
    float variance = getColorAsFloat(${rn.texture2D}(Variance, position));
    float b = getColorAsFloat(${rn.texture2D}(B, position));

    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${an.epsilon})) ) + b;
  }`;return Object.assign(Object.assign({},on),{output:{dims:hn[0].dims,type:hn[0].type,textureType:sn.TextureType.unpacked},shaderSource:xn})},dn=fn=>{if(!fn||fn.length!==5)throw new Error("BatchNormalization requires 5 inputs.");const hn=fn[0],an=fn[1],rn=fn[2],cn=fn[3],pn=fn[4];if(hn.dims.length<3||an.dims.length!==1||rn.dims.length!==1||cn.dims.length!==1||pn.dims.length!==1)throw new Error("invalid input shape.");if(an.dims[0]!==hn.dims[1]||rn.dims[0]!==hn.dims[1]||cn.dims[0]!==hn.dims[1]||pn.dims[0]!==hn.dims[1])throw new Error("invalid input shape.");if(hn.type!=="float32"&&hn.type!=="float64"||an.type!=="float32"&&an.type!=="float64"||rn.type!=="float32"&&rn.type!=="float64"||cn.type!=="float32"&&cn.type!=="float64"||pn.type!=="float32"&&pn.type!=="float64")throw new Error("invalid input tensor types.")}},7839:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.xor=e.sub=e.pRelu=e.pow=e.or=e.mul=e.less=e.greater=e.equal=e.div=e.and=e.add=e.glslPRelu=e.glslPow=e.glslXor=e.glslOr=e.glslAnd=e.glslLess=e.glslGreater=e.glslEqual=e.glslSub=e.glslMul=e.glslDiv=e.glslAdd=void 0;const tn=en(2517),nn=en(8520),sn=en(5060),on=en(2039);function un(){const _n="add_";return{body:`
  float ${_n}(float a, float b) {
    return a + b;
  }
  vec4 ${_n}(vec4 v1, vec4 v2) {
    return v1 + v2;
  }
  `,name:_n,type:nn.FunctionType.ValueBased}}function dn(){const _n="div_";return{body:`
  float ${_n}(float a, float b) {
    return a / b;
  }
  vec4 ${_n}(vec4 v1, vec4 v2) {
    return v1 / v2;
  }
  `,name:_n,type:nn.FunctionType.ValueBased}}function fn(){const _n="mul_";return{body:`
  float ${_n}(float a, float b) {
    return a * b;
  }
  vec4 ${_n}(vec4 v1, vec4 v2) {
    return v1 * v2;
  }
  `,name:_n,type:nn.FunctionType.ValueBased}}function hn(){const _n="sub_";return{body:`
  float ${_n}(float a, float b) {
    return a - b;
  }
  vec4 ${_n}(vec4 v1, vec4 v2) {
    return v1 - v2;
  }
  `,name:_n,type:nn.FunctionType.ValueBased}}function an(){const _n="equal_";return{body:`
  float ${_n}(float a, float b) {
    return float(a == b);
  }
  vec4 ${_n}(vec4 v1, vec4 v2) {
    return vec4(equal(v1, v2));
  }
  `,name:_n,type:nn.FunctionType.ValueBased}}function rn(){const _n="greater_";return{body:`
  float ${_n}(float a, float b) {
    return float(a > b);
  }
  vec4 ${_n}(vec4 v1, vec4 v2) {
    return vec4( v1.r > v2.r ,
      v1.g > v2.g,
      v1.b > v2.b,
      v1.a > v2.a );
  }
  `,name:_n,type:nn.FunctionType.ValueBased}}function cn(){const _n="less_";return{body:`
  float ${_n}(float a, float b) {
    return float(a < b);
  }
  vec4 ${_n}(vec4 v1, vec4 v2) {
    return vec4( v1.r < v2.r ,
                v1.g < v2.g,
                v1.b < v2.b,
                v1.a < v2.a );
  }
  `,name:_n,type:nn.FunctionType.ValueBased}}function pn(){const _n="and_";return{body:`
  float ${_n}(float a, float b) {
    return float( bool(a) && bool(b) );
  }
  vec4 ${_n}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r && b2.r ,
                b1.g && b2.g,
                b1.b && b2.b,
                b1.a && b2.a );
  }
  `,name:_n,type:nn.FunctionType.ValueBased}}function mn(){const _n="or_";return{body:`
  float ${_n}(float a, float b) {
    return float( bool(a) || bool(b) );
  }
  vec4 ${_n}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r || b2.r ,
                b1.g || b2.g,
                b1.b || b2.b,
                b1.a || b2.a );
  }
  `,name:_n,type:nn.FunctionType.ValueBased}}function xn(){const _n="xor_";return{body:`
  float ${_n}(float a, float b) {
    return float( bool(a) ^^ bool(b) );
  }
  vec4 ${_n}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r ^^ b2.r ,
                b1.g ^^ b2.g,
                b1.b ^^ b2.b,
                b1.a ^^ b2.a );
  }
  `,name:_n,type:nn.FunctionType.ValueBased}}function gn(){return function(_n){const Tn=`${_n}_`;return{body:`
  float ${Tn}(float a, float b) {
    return ${_n}(a, b);
  }
  vec4 ${Tn}(vec4 v1, vec4 v2) {
    return ${_n}(v1, v2);
  }
  `,name:Tn,type:nn.FunctionType.ValueBased}}("pow")}function yn(){const _n="prelu_";return{body:`
  float ${_n}(float a, float b) {
    return a < 0.0 ? a * b: a;
  }
  vec4 ${_n}(vec4 v1, vec4 v2) {
    return vec4(
      v1.r < 0.0 ? v1.r * v2.r: v1.r,
      v1.g < 0.0 ? v1.g * v2.g: v1.g,
      v1.b < 0.0 ? v1.b * v2.b: v1.b,
      v1.a < 0.0 ? v1.a * v2.a: v1.a
      );
  }
  `,name:_n,type:nn.FunctionType.ValueBased}}e.glslAdd=un,e.glslDiv=dn,e.glslMul=fn,e.glslSub=hn,e.glslEqual=an,e.glslGreater=rn,e.glslLess=cn,e.glslAnd=pn,e.glslOr=mn,e.glslXor=xn,e.glslPow=gn,e.glslPRelu=yn;const bn=(_n,Tn,An,Pn=Tn[0].type,Sn)=>{const Cn=_n.session.pack?on.TextureType.packed:on.TextureType.unpacked;return{name:An.name,inputNames:["A","B"],inputTypes:[Cn,Cn],cacheHint:Sn,get:()=>wn(_n,Tn,An,Pn)}},wn=(_n,Tn,An,Pn=Tn[0].type)=>{const Sn=_n.session.pack?on.TextureType.packed:on.TextureType.unpacked,Cn=!tn.ShapeUtil.areEqual(Tn[0].dims,Tn[1].dims);let Nn=Tn[0].dims;const Mn=_n.session.pack;if(Cn){const Bn=tn.BroadcastUtil.calcShape(Tn[0].dims,Tn[1].dims,!1);if(!Bn)throw new Error("Can't perform binary op on the given tensors");Nn=Bn;const Ln=Nn.length,qn=Tn[0].dims.length!==0?Tn[0].dims.length:1,Yn=Tn[1].dims.length!==0?Tn[1].dims.length:1,Qn=Tn[0].dims.length!==0?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",zn=Tn[1].dims.length!==0?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",lr=(0,sn.getGlsl)(_n.session.backend.glContext.version),$n=Mn?`
      ${An.body}
      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        vec4 result = ${An.name}(a, b);
        ${lr.output} = result;
      }`:`
      ${An.body}
      float process(int indices[${Ln}]) {
        int aindices[${qn}];
        int bindices[${Yn}];
        ${Qn}
        ${zn}
        return ${An.name}(_A(aindices), _B(bindices));
      }`;return{name:An.name,inputNames:["A","B"],inputTypes:[Sn,Sn],output:{dims:Nn,type:Pn,textureType:Sn},shaderSource:$n,hasMain:Mn}}const Fn=(0,sn.getGlsl)(_n.session.backend.glContext.version),In=`
    ${An.body}
    void main() {
      vec4 v1 = ${Fn.texture2D}(A, TexCoords);
      vec4 v2 = ${Fn.texture2D}(B, TexCoords);
      vec4 result = ${An.name}(v1, v2);
      ${Fn.output} = result;
    }
    `;return{name:An.name,inputNames:["A","B"],inputTypes:[Sn,Sn],output:{dims:Tn[0].dims,type:Pn,textureType:Sn},shaderSource:In,hasMain:!0}};e.add=(_n,Tn)=>[_n.run(bn(_n,Tn,un()),Tn)],e.and=(_n,Tn)=>[_n.run(bn(_n,Tn,pn(),"bool"),Tn)],e.div=(_n,Tn)=>[_n.run(bn(_n,Tn,dn()),Tn)],e.equal=(_n,Tn)=>[_n.run(bn(_n,Tn,an(),"bool"),Tn)],e.greater=(_n,Tn)=>[_n.run(bn(_n,Tn,rn(),"bool"),Tn)],e.less=(_n,Tn)=>[_n.run(bn(_n,Tn,cn(),"bool"),Tn)],e.mul=(_n,Tn)=>[_n.run(bn(_n,Tn,fn()),Tn)],e.or=(_n,Tn)=>[_n.run(bn(_n,Tn,mn(),"bool"),Tn)],e.pow=(_n,Tn)=>[_n.run(bn(_n,Tn,gn()),Tn)],e.pRelu=(_n,Tn)=>[_n.run(bn(_n,Tn,yn()),Tn)],e.sub=(_n,Tn)=>[_n.run(bn(_n,Tn,hn()),Tn)],e.xor=(_n,Tn)=>[_n.run(bn(_n,Tn,xn(),"bool"),Tn)]},4196:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseCastAttributes=e.cast=void 0;const tn=en(2517);e.cast=(sn,on,un)=>(nn(on),[sn.cast(on[0],un)]),e.parseCastAttributes=sn=>tn.ProtoUtil.tensorDataTypeFromProto(sn.attributes.getInt("to"));const nn=sn=>{if(!sn||sn.length!==1)throw new Error("Cast requires 1 input.");if(sn[0].type==="string")throw new Error("Invalid input type.")}},1163:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedConcatProgramInfoLoader=void 0;const tn=en(5060),nn=en(2039),sn=en(9390),on=en(2827);e.createPackedConcatProgramInfoLoader=(dn,fn,hn)=>{const an=(rn=fn.length,cn=hn.cacheKey,{name:"Concat (packed)",inputNames:Array.from({length:rn},(pn,mn)=>`X${mn}`),inputTypes:Array(rn).fill(nn.TextureType.packed),cacheHint:cn});var rn,cn;return Object.assign(Object.assign({},an),{get:()=>((pn,mn,xn,gn)=>{const yn=xn[0].dims.slice();if(gn>=yn.length||gn<-1*yn.length)throw new Error("axis specified for concat doesn't match input dimensionality");gn<0&&(gn=yn.length+gn);const bn=yn.slice(0);for(let Qn=1;Qn<xn.length;Qn++){const zn=xn[Qn].dims.slice();for(let lr=0;lr<yn.length;lr++)if(lr===gn)bn[gn]+=zn[lr];else if(yn[lr]!==zn[lr])throw new Error("non concat dimensions must match")}const wn=bn.length,_n=(0,on.getChannels)("coords",wn),Tn=(0,sn.getCoordsDataType)(wn),An=(0,on.unpackFromChannel)(),Pn=xn.map(Qn=>Qn.dims),Sn=(0,sn.getGlChannels)(wn),Cn=new Array(Pn.length-1);Cn[0]=Pn[0][gn];for(let Qn=1;Qn<Cn.length;Qn++)Cn[Qn]=Cn[Qn-1]+Pn[Qn][gn];const Nn=Sn[gn],Mn=Sn.slice(-2),Fn=Sn.join();let In=`if (${Nn} < ${Cn[0]}) {
        return getChannel(
            getX0(${Fn}), vec2(${Mn.join()}));
        }`;for(let Qn=1;Qn<Cn.length;Qn++){const zn=Cn[Qn-1];In+=`
            if (${Nn} < ${Cn[Qn]}  && ${Nn} >= ${Cn[Qn-1]}) {
              return getChannel(
                getX${Qn}(${un(Sn,Nn,zn)}),
                vec2(${un(Mn,Nn,zn)}));
            }`}const Bn=Cn.length,Ln=Cn[Cn.length-1];In+=`
            return getChannel(
              getX${Bn}(${un(Sn,Nn,Ln)}),
              vec2(${un(Mn,Nn,Ln)}));`;const qn=(0,tn.getGlsl)(pn.session.backend.glContext.version),Yn=`
          ${An}
          float getValue(${Sn.map(Qn=>"int "+Qn)}) {
            ${In}
          }

          void main() {
            ${Tn} coords = getOutputCoords();
            int lastDim = coords.${Sn[wn-1]};
            coords.${Sn[wn-1]} = coords.${Sn[wn-2]};
            coords.${Sn[wn-2]} = lastDim;

            vec4 result = vec4(getValue(${_n}), 0., 0., 0.);

            ${_n[wn-1]} = ${_n[wn-1]} + 1;
            if (${_n[wn-1]} < ${bn[wn-1]}) {
              result.g = getValue(${_n});
            }

            ${_n[wn-2]} = ${_n[wn-2]} + 1;
            if (${_n[wn-2]} < ${bn[wn-2]}) {
              result.a = getValue(${_n});
            }

            ${_n[wn-1]} = ${_n[wn-1]} - 1;
            if (${_n[wn-2]} < ${bn[wn-2]} &&
                ${_n[wn-1]} < ${bn[wn-1]}) {
              result.b = getValue(${_n});
            }
            ${qn.output} = result;
          }
        `;return Object.assign(Object.assign({},mn),{output:{dims:bn,type:xn[0].type,textureType:nn.TextureType.packed},shaderSource:Yn,hasMain:!0})})(dn,an,fn,hn.axis)})};const un=(dn,fn,hn)=>{const an=dn.indexOf(fn);return dn.map((rn,cn)=>cn===an?`${rn} - ${hn}`:rn).join()}},2069:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseConcatAttributes=e.concat=void 0;const tn=en(246),nn=en(2039),sn=en(1163);e.concat=(rn,cn,pn)=>(an(cn),rn.session.pack&&cn[0].dims.length>1?[rn.run((0,sn.createPackedConcatProgramInfoLoader)(rn,cn,pn),cn)]:[rn.run(on(rn,cn,pn),cn)]);const on=(rn,cn,pn)=>{const mn=(xn=cn.length,gn=pn.cacheKey,{name:"Concat",inputNames:Array.from({length:xn},(yn,bn)=>`X${bn}`),inputTypes:Array(xn).fill(nn.TextureType.unpacked),cacheHint:gn});var xn,gn;return Object.assign(Object.assign({},mn),{get:()=>((yn,bn,wn,_n)=>{const Tn=wn[0].dims.slice();if(_n>=Tn.length||_n<-1*Tn.length)throw new Error("axis specified for concat doesn't match input dimensionality");_n<0&&(_n=Tn.length+_n);const An=Tn.slice(0);for(let Fn=1;Fn<wn.length;Fn++){const In=wn[Fn].dims.slice();for(let Bn=0;Bn<Tn.length;Bn++)if(Bn===_n)An[_n]+=In[Bn];else if(Tn[Bn]!==In[Bn])throw new Error("non concat dimensions must match")}const Pn=An.length,Sn=new Array(wn.length);let Cn=0;for(let Fn=0;Fn<Sn.length;++Fn)Cn+=wn[Fn].dims[_n],Sn[Fn]=Cn;let Nn="";Nn=wn.length<5?un(Sn):dn(Sn);const Mn=`
        ${fn(wn.length,Pn)}
        ${hn(Sn)}
        ${Nn}
        float process(int indices[${Pn}]) {
          int textureIndex = getTextureWhereDataResides (indices[${_n}]);

          if(textureIndex != 0) {
            indices[${_n}] = indices[${_n}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));
          }

          return fetchDataFromCorrectTexture(textureIndex, indices);
        }`;return Object.assign(Object.assign({},bn),{output:{dims:An,type:wn[0].type,textureType:nn.TextureType.unpacked},shaderSource:Mn})})(0,mn,cn,pn.axis)})},un=rn=>`int getTextureWhereDataResides(int index) {
      ${rn.map((cn,pn)=>`if(index<${cn}) {return ${pn};}
`).join("")}
    }`,dn=rn=>un(rn),fn=(rn,cn)=>{const pn=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${cn}]) {`];for(let mn=0;mn<rn;++mn)mn===0?pn.push(`	if (textureIndex == ${mn}) { return _X${mn}(indices); }`):mn===rn-1?pn.push(`	else { return _X${mn}(indices); }`):pn.push(`	else if (textureIndex == ${mn}) { return _X${mn}(indices); }`);return pn.push("	}"),pn.join(`
`)},hn=rn=>{const cn=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let pn=0;pn<rn.length;++pn)pn===0?cn.push(`	if (index == ${pn}) { return ${rn[pn]}; }`):pn===rn.length-1?cn.push(`	else { return ${rn[pn]}; }`):cn.push(`	else if (index == ${pn}) { return ${rn[pn]}; }`);return cn.push("	}"),cn.join(`
`)};e.parseConcatAttributes=rn=>(0,tn.createAttributeWithCacheKey)({axis:rn.attributes.getInt("axis")});const an=rn=>{if(!rn||rn.length<1)throw new Error("too few inputs");const cn=rn[0].type,pn=rn[0].dims.length;if(cn==="string")throw new Error("string tensor is not supported yet");for(const mn of rn){if(mn.type!==cn)throw new Error("input tensors should be one type");if(mn.dims.length!==pn)throw new Error("input tensors should have the same shape")}}},4770:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createUnpackedGroupedConvProgramInfoLoader=void 0;const tn=en(6231),nn=en(5060),sn=en(2039),on=en(8138),un=en(2823);e.createUnpackedGroupedConvProgramInfoLoader=(dn,fn,hn)=>{const an=(rn=fn.length>2,cn=hn.cacheKey,{name:"GroupedConv",inputNames:rn?["X","W","Bias"]:["X","W"],inputTypes:rn?[sn.TextureType.unpacked,sn.TextureType.unpacked,sn.TextureType.unpacked]:[sn.TextureType.unpacked,sn.TextureType.unpacked],cacheHint:cn});var rn,cn;return Object.assign(Object.assign({},an),{get:()=>((pn,mn,xn,gn)=>{const yn=mn.length>2?"value += getBias(output_channel);":"",bn=mn[0].dims.slice(),wn=mn[1].dims.slice(),_n=wn[0]/gn.group;tn.Logger.verbose("GroupedConv",`autpPad:${gn.autoPad}, dilations:${gn.dilations}, group:${gn.group}, kernelShape:${gn.kernelShape}, pads:${gn.pads}, strides:${gn.strides}`);const Tn=(0,on.calculateOutputShape)(bn,wn,gn.dilations,gn.pads,gn.strides),An=(0,nn.getGlsl)(pn.session.backend.glContext.version),{activationFunction:Pn,applyActivation:Sn}=(0,un.getActivationSnippet)(gn),Cn=`
  const ivec2 strides = ivec2(${gn.strides[0]}, ${gn.strides[1]});
  const ivec2 pads = ivec2(${gn.pads[0]}, ${gn.pads[1]});
  ${Pn}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;
    ivec2 xRCCorner = coords.zw * strides - pads;
    int group_id = output_channel / ${_n};

    float value = 0.0;
    for (int wInChannel = 0; wInChannel < ${wn[1]}; wInChannel++) {
      int input_channel = group_id * ${wn[1]} + wInChannel;
      for (int wHeight = 0; wHeight < ${wn[2]}; wHeight++) {
        int xHeight = xRCCorner.x + wHeight * ${gn.dilations[0]};

        if (xHeight < 0 || xHeight >= ${bn[2]}) {
          continue;
        }

        for (int wWidth = 0; wWidth < ${wn[3]}; wWidth++) {
          int xWidth = xRCCorner.y + wWidth * ${gn.dilations[1]};
          if (xWidth < 0 || xWidth >= ${bn[3]}) {
            continue;
          }

          float xVal = getX(batch, input_channel, xWidth, xHeight);
          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);
          value += xVal*wVal;
        }
      }
    }
    ${yn}
    ${Sn}
    ${An.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},xn),{output:{dims:Tn,type:mn[0].type,textureType:sn.TextureType.unpacked},shaderSource:Cn,hasMain:!0})})(dn,fn,an,hn)})}},1386:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.conv2DPacked=e.conv2DPackedPointwise=void 0;const tn=en(8138),nn=en(8555),sn=en(708);e.conv2DPackedPointwise=(on,un,dn)=>{const fn=un[0].dims,hn=un[1].dims,an=(0,tn.calculateOutputShape)(fn,hn,dn.dilations,dn.pads,dn.strides),rn=on.reshapePacked(un[0],[fn[1],fn[2]*fn[3]]),cn=on.reshapePacked(un[1],[hn[0],hn[1]]),pn=un.length>2?[cn,rn,un[2]]:[cn,rn],mn=on.run((0,sn.createPackedMatmulProgramInfoLoader)(on,pn,dn),pn);return on.reshapePacked(mn,an)},e.conv2DPacked=(on,un,dn)=>{const fn=un[0].dims,hn=un[1].dims,an=(0,tn.calculateOutputShape)(fn,hn,dn.dilations,dn.pads,dn.strides),rn=on.run((0,nn.createPackedIm2ColProgramInfoLoader)(on,un[0],un[1],an,dn),[un[0]]),cn=on.reshapePacked(un[1],[hn[0],hn[1]*hn[2]*hn[3]]),pn=un.length===3?[cn,rn,un[2]]:[cn,rn],mn=on.run((0,sn.createPackedMatmulProgramInfoLoader)(on,pn,dn),pn);return on.reshapePacked(mn,an)}},9663:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseConvTransposeAttributes=e.convTranspose=void 0;const tn=en(246),nn=en(5060),sn=en(2039),on=en(2823),un=(cn,pn,mn,xn,gn,yn)=>(cn-1)*pn+mn+(xn-1)*gn+1-yn,dn=(cn,pn,mn,xn,gn)=>{const yn=Math.floor(cn/2);pn==="SAME_UPPER"?(mn[xn]=yn,mn[gn]=cn-yn):pn==="SAME_LOWER"&&(mn[xn]=cn-yn,mn[gn]=yn)};e.convTranspose=(cn,pn,mn)=>(rn(pn,mn),fn(cn,pn,mn));const fn=(cn,pn,mn)=>{const xn=an(mn,pn);return[hn(cn,pn,xn)]},hn=(cn,pn,mn)=>cn.run(((xn,gn,yn)=>{const bn=(wn=gn.length>2,_n=yn.cacheKey,{name:"ConvTranspose",inputNames:wn?["X","W","B"]:["X","W"],inputTypes:wn?[sn.TextureType.unpacked,sn.TextureType.unpacked,sn.TextureType.unpacked]:[sn.TextureType.unpacked,sn.TextureType.unpacked],cacheHint:_n});var wn,_n;return Object.assign(Object.assign({},bn),{get:()=>((Tn,An,Pn,Sn)=>{const Cn=An.length>2?"getB(output_channel)":"0.0",Nn=An[0].dims,Mn=An[1].dims,Fn=Mn[1],In=Mn[0]/Sn.group,Bn=[An[0].dims[0],An[1].dims[1]*Sn.group,...Sn.outputShape],Ln=(0,nn.getGlsl)(Tn.session.backend.glContext.version),{activationFunction:qn,applyActivation:Yn}=(0,on.getActivationSnippet)(Sn),Qn=`
  const ivec2 strides = ivec2(${Sn.strides[0]}, ${Sn.strides[1]});
  const ivec2 pads = ivec2(${Sn.pads[0]}, ${Sn.pads[1]});
  ${qn}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;

    ivec2 loc = coords.zw + pads;

    int group_id = output_channel / ${Fn};
    int wOutChannel = output_channel - group_id * ${Fn};

    float value = ${Cn};
    for (int inChannelOffset = 0; inChannelOffset < ${In}; inChannelOffset++) {
      int input_channel = group_id * ${In} + inChannelOffset;
      for (int wWOff = 0; wWOff < ${Mn[2]}; wWOff++) {
        for (int wHOff = 0; wHOff < ${Mn[3]}; wHOff++) {
          ivec2 wOff = ivec2(wWOff * ${Sn.dilations[0]}, wHOff * ${Sn.dilations[1]});
          ivec2 wLoc = loc - wOff;
          ivec2 wLocIn = wLoc / strides;
          if (
            wLocIn * strides == wLoc &&
            wLocIn.x >= 0 && wLocIn.x < ${Nn[2]} &&
            wLocIn.y >= 0 && wLocIn.y < ${Nn[3]}
          ) {
            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);
            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);
            value += xVal * wVal;
          }
        }
      }
    }
    ${Yn}
    ${Ln.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},Pn),{output:{dims:Bn,type:An[0].type,textureType:sn.TextureType.unpacked},shaderSource:Qn,hasMain:!0})})(xn,gn,bn,yn)})})(cn,pn,mn),pn),an=(cn,pn)=>{const mn=cn.kernelShape.slice();if(cn.kernelShape.length===0)for(let bn=2;bn<pn[1].dims.length;++bn)mn.push(pn[1].dims[bn]);const xn=cn.pads.slice(),gn=cn.outputShape.slice();((bn,wn,_n,Tn,An,Pn,Sn,Cn)=>{const Nn=bn.length-2,Mn=Cn.length===0;for(let Fn=0;Fn<Nn;++Fn){const In=Mn?bn[Fn+2]*Pn[Fn]:Cn[Fn],Bn=un(bn[Fn+2],Pn[Fn],An[Fn],wn[Fn],_n[Fn],In);dn(Bn,Tn,An,Fn,Fn+Nn),Mn&&Cn.push(Pn[Fn]*(bn[Fn+2]-1)+Sn[Fn]+(wn[Fn]-1)*_n[Fn]+1-An[Fn]-An[Fn+Nn])}})(pn[0].dims,mn,cn.dilations,cn.autoPad,xn,cn.strides,cn.outputPadding,gn);const yn=Object.assign({},cn);return Object.assign(yn,{kernelShape:mn,pads:xn,outputShape:gn,cacheKey:cn.cacheKey}),yn};e.parseConvTransposeAttributes=cn=>{const pn=cn.attributes,mn=(0,on.parseInternalActivationAttributes)(pn),xn=pn.getString("auto_pad","NOTSET"),gn=pn.getInts("dilations",[1,1]),yn=pn.getInt("group",1),bn=pn.getInts("kernel_shape",[]),wn=pn.getInts("output_padding",[0,0]),_n=pn.getInts("output_shape",[]),Tn=pn.getInts("pads",[0,0,0,0]),An=pn.getInts("strides",[1,1]);return(0,tn.createAttributeWithCacheKey)(Object.assign({autoPad:xn,dilations:gn,group:yn,kernelShape:bn,outputPadding:wn,outputShape:_n,pads:Tn,strides:An},mn))};const rn=(cn,pn)=>{if(!cn||cn.length!==2&&cn.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(cn[0].dims.length!==4||cn[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(cn[0].dims[1]!==cn[1].dims[0])throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");const mn=cn[1].dims[1]*pn.group;if(cn.length===3&&(cn[2].dims.length!==1||cn[2].dims[0]!==mn))throw new Error("invalid bias");const xn=cn[0].dims.length-2;if(pn.dilations.length!==xn)throw new Error(`dilations should be ${xn}D`);if(pn.strides.length!==xn)throw new Error(`strides should be ${xn}D`);if(pn.pads.length!==2*xn)throw new Error(`pads should be ${2*xn}D`);if(pn.outputPadding.length!==xn)throw new Error(`output_padding should be ${xn}D`);if(pn.kernelShape.length!==0&&pn.kernelShape.length!==cn[1].dims.length-2)throw new Error("invalid kernel shape");if(pn.outputShape.length!==0&&pn.outputShape.length!==cn[0].dims.length-2)throw new Error("invalid output shape");if(cn[0].type!=="float32"||cn[1].type!=="float32")throw new Error("ConvTranspose input(X,W) should be float tensor");if(cn.length===3&&cn[2].type!=="float32")throw new Error("ConvTranspose input(bias) should be float tensor")}},8138:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseConvAttributes=e.conv=e.calculateOutputShape=void 0;const tn=en(246),nn=en(2517),sn=en(4770),on=en(1386),un=en(9828),dn=en(2823),fn=en(3248),hn=en(5623);e.calculateOutputShape=(xn,gn,yn,bn,wn)=>{const _n=xn[0],Tn=xn.slice(2),An=Tn.length,Pn=gn[0],Sn=gn.slice(2).map((Nn,Mn)=>Nn+(Nn-1)*(yn[Mn]-1)),Cn=Tn.map((Nn,Mn)=>Nn+bn[Mn]+bn[Mn+An]).map((Nn,Mn)=>Math.floor((Nn-Sn[Mn]+wn[Mn])/wn[Mn]));return[_n,Pn].concat(...Cn)},e.conv=(xn,gn,yn)=>(mn(gn,yn),an(xn,gn,yn));const an=(xn,gn,yn)=>{const bn=pn(yn,gn),wn=xn.session.pack,_n=bn.kernelShape[0]===1&&bn.kernelShape[1]===1;return bn.group>1?[xn.run((0,sn.createUnpackedGroupedConvProgramInfoLoader)(xn,gn,bn),gn)]:_n&&wn?[rn(xn,gn,bn)]:wn&&gn[0].dims.length===4&&gn[0].dims[0]===1&&!_n?[(0,on.conv2DPacked)(xn,gn,bn)]:[cn(xn,gn,bn)]},rn=(xn,gn,yn)=>{const bn=gn[0].dims,wn=gn[1].dims,_n=(0,e.calculateOutputShape)(bn,wn,yn.dilations,yn.pads,yn.strides),Tn=xn.reshapeUnpacked(gn[0],[bn[1],bn[2]*bn[3]]),An=xn.reshapeUnpacked(gn[1],[wn[0],wn[1]]),Pn=gn.length>2?[An,Tn,gn[2]]:[An,Tn],Sn=xn.run((0,hn.createMatmulProgramInfoLoader)(Pn,yn),Pn);return xn.reshapeUnpacked(Sn,_n)},cn=(xn,gn,yn)=>{const bn=gn[0].dims,wn=gn[1].dims,_n=(0,e.calculateOutputShape)(bn,wn,yn.dilations,yn.pads,yn.strides),Tn=xn.run((0,fn.createIm2ColProgramInfoLoader)(xn,gn[0],gn[1],_n,yn),[gn[0]]),An=gn.length===3?[Tn,gn[1],gn[2]]:[Tn,gn[1]];return xn.run((0,un.createDotProductProgramInfoLoader)(xn,gn,_n,yn),An)},pn=(xn,gn)=>{const yn=xn.kernelShape.slice();if(xn.kernelShape.length===0)for(let _n=2;_n<gn[1].dims.length;++_n)yn.push(gn[1].dims[_n]);const bn=xn.pads.slice();nn.PoolConvUtil.adjustPadsBasedOnAutoPad(gn[0].dims,xn.strides,xn.dilations,yn,bn,xn.autoPad);const wn=Object.assign({},xn);return Object.assign(wn,{kernelShape:yn,pads:bn,cacheKey:xn.cacheKey}),wn};e.parseConvAttributes=xn=>{const gn=xn.attributes,yn=(0,dn.parseInternalActivationAttributes)(gn),bn=gn.getString("auto_pad","NOTSET"),wn=gn.getInts("dilations",[1,1]),_n=gn.getInt("group",1),Tn=gn.getInts("kernel_shape",[]),An=gn.getInts("pads",[0,0,0,0]),Pn=gn.getInts("strides",[1,1]);return(0,tn.createAttributeWithCacheKey)(Object.assign({autoPad:bn,dilations:wn,group:_n,kernelShape:Tn,pads:An,strides:Pn},yn))};const mn=(xn,gn)=>{if(!xn||xn.length!==2&&xn.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(xn[0].dims.length!==4||xn[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(xn[0].dims[1]!==xn[1].dims[1]*gn.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(xn.length===3&&(xn[2].dims.length!==1||xn[1].dims[0]!==xn[2].dims[0]))throw new Error("invalid bias");const yn=xn[0].dims.length-2;if(gn.dilations.length!==yn)throw new Error(`dilations should be ${yn}D`);if(gn.strides.length!==yn)throw new Error(`strides should be ${yn}D`);if(gn.pads.length!==2*yn)throw new Error(`pads should be ${2*yn}D`);if(gn.kernelShape.length!==0&&gn.kernelShape.length!==xn[1].dims.length-2)throw new Error("invalid kernel shape");if(xn[0].type!=="float32"||xn[1].type!=="float32")throw new Error("Conv input(X,W) should be float tensor");if(xn.length===3&&xn[2].type!=="float32")throw new Error("Conv input(bias) should be float tensor")}},5193:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseDepthToSpaceAttributes=e.depthToSpace=void 0;const tn=en(3738);e.depthToSpace=(sn,on,un)=>{nn(on);const dn=un.blocksize,fn=dn*dn,hn=un.mode==="DCR"?[0,3,4,1,5,2]:[0,1,4,2,5,3],an=un.mode==="DCR"?[on[0].dims[0],dn,dn,on[0].dims[1]/fn,on[0].dims[2],on[0].dims[3]]:[on[0].dims[0],on[0].dims[1]/fn,dn,dn,on[0].dims[2],on[0].dims[3]],rn=sn.reshapeUnpacked(on[0],an),cn={perm:hn,cacheKey:`${hn}`},[pn]=(0,tn.transpose)(sn,[rn],cn),mn=[on[0].dims[0],on[0].dims[1]/fn,on[0].dims[2]*dn,on[0].dims[3]*dn];return[sn.reshapeUnpacked(pn,mn)]},e.parseDepthToSpaceAttributes=sn=>{const on=sn.attributes.getInt("blocksize");if(on<1)throw new Error(`blocksize must be >= 1, but got : ${on} for DepthToSpace`);const un=sn.attributes.getString("mode","DCR");if(un!=="DCR"&&un!=="CRD")throw new Error(`unrecognized mode: ${un} for DepthToSpace`);return{mode:un,blocksize:on}};const nn=sn=>{if(sn.length!==1)throw new Error(`DepthToSpace expect 1 inputs, but got ${sn.length}`);if(sn[0].type==="string"||sn[0].dims.length!==4)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}},9828:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createDotProductProgramInfoLoader=void 0;const tn=en(2517),nn=en(5060),sn=en(2039),on=en(2823),un=en(3248);e.createDotProductProgramInfoLoader=(dn,fn,hn,an)=>{const rn=((cn,pn)=>({name:"ConvDotProduct",inputNames:cn?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:cn?[sn.TextureType.unpacked,sn.TextureType.packedLastDimension,sn.TextureType.unpacked]:[sn.TextureType.unpacked,sn.TextureType.packedLastDimension],cacheKey:pn.activationCacheKey}))(fn.length>2,an);return Object.assign(Object.assign({},rn),{get:()=>((cn,pn,mn,xn,gn)=>{const yn=mn[0].dims,bn=mn[1].dims,wn=[bn[0],Math.ceil(yn[1]*bn[2]*bn[3]/4)],_n=(0,un.calculateIm2ColDims)(yn,bn,xn),[Tn,An]=cn.calculateTextureWidthAndHeight(wn,sn.TextureType.packedLastDimension),Pn=tn.ShapeUtil.computeStrides(_n),[Sn,Cn]=cn.calculateTextureWidthAndHeight(_n,sn.TextureType.packedLastDimension),Nn=xn.length,Mn=mn.length<3?"0.0":"_B(b)",Fn=Math.ceil(yn[1]*bn[2]*bn[3]/4),{activationFunction:In,applyActivation:Bn}=(0,on.getActivationSnippet)(gn),Ln=(0,nn.getGlsl)(cn.session.backend.glContext.version),qn=`
${In}
float process(int indices[${Nn}]) {
  int b[1];
  b[0] = indices[1];
  int im2col[4];
  im2col[0] = indices[0];
  im2col[1] = indices[2];
  im2col[2] = indices[3];
  int im2colOffset = im2col[0] * ${Pn[0]} + im2col[1] * ${Pn[1]} + im2col[2] * ${Pn[2]};
  int kernelOffset = indices[1] * ${wn[1]};
  float value = ${Mn};
  for (int i = 0; i < ${Fn}; ++i) {
    vec2 im2colCoords = offsetToCoords(im2colOffset, ${Sn}, ${Cn});
    vec2 kernelCoords = offsetToCoords(kernelOffset, ${Tn}, ${An});
    value += dot(${Ln.texture2D}(Im2Col, im2colCoords), ${Ln.texture2D}(K, kernelCoords));
    ++im2colOffset;
    ++kernelOffset;
  }
  ${Bn}
  return value;
}`;return Object.assign(Object.assign({},pn),{output:{dims:xn,type:mn[0].type,textureType:sn.TextureType.unpacked},shaderSource:qn})})(dn,rn,fn,hn,an)})}},7992:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseFlattenAttributes=e.flatten=void 0;const tn=en(2517);e.flatten=(sn,on,un)=>{nn(on,un);const dn=tn.ShapeUtil.flattenShape(on[0].dims,un);return[sn.reshapeUnpacked(on[0],dn)]},e.parseFlattenAttributes=sn=>sn.attributes.getInt("axis",1);const nn=(sn,on)=>{if(!sn||sn.length!==1)throw new Error("Flatten requires 1 input.");const un=sn[0].dims.length;if(un===0)throw new Error("scalar tensor is not supported.");if(on<-un||on>un)throw new Error("Invalid axis");if(sn[0].type==="string")throw new Error("string tensor is not supported.")}},2823:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseInternalActivationAttributes=e.getActivationSnippet=void 0;const tn=en(2517),nn=en(4909);e.getActivationSnippet=function(sn){let on;switch(sn.activation){case"Relu":on=(0,nn.glslRelu)();break;case"Sigmoid":on=(0,nn.glslSigmoid)();break;case"Clip":on=(0,nn.glslClip)(sn.clipMin,sn.clipMax);break;default:return{activationFunction:"",applyActivation:""}}const un=on.name;return{activationFunction:on.body,applyActivation:`value = ${un}_(value);`}},e.parseInternalActivationAttributes=sn=>{const on=sn.getString("activation","");if(on==="Clip"){const[un,dn]=sn.getFloats("activation_params",[tn.MIN_CLIP,tn.MAX_CLIP]);return{activation:on,clipMax:dn,clipMin:un,activationCacheKey:`${on}:${un},${dn}`}}return{activation:on,activationCacheKey:on}}},1253:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseGatherAttributes=e.gather=void 0;const tn=en(246),nn=en(782),sn=en(2517),on=en(2039);e.gather=(hn,an,rn)=>(fn(an,rn.axis),[hn.run(dn(hn,an,rn),an)]),e.parseGatherAttributes=hn=>(0,tn.createAttributeWithCacheKey)({axis:hn.attributes.getInt("axis",0)});const un={name:"Gather",inputNames:["A","B"],inputTypes:[on.TextureType.unpacked,on.TextureType.unpacked]},dn=(hn,an,rn)=>{const cn=Object.assign(Object.assign({},un),{cacheHint:rn.cacheKey});return Object.assign(Object.assign({},cn),{get:()=>((pn,mn,xn,gn)=>{const yn=xn[0].dims.slice(),bn=xn[1].dims.slice(),wn=new Array(yn.length+bn.length-1);gn=sn.ShapeUtil.normalizeAxis(gn,yn.length);const _n=[];for(let An=0;An<wn.length;An++)An<gn?(wn[An]=yn[An],_n.push(`inputIdx[${An}] = outputIdx[${An}];`)):An<gn+bn.length?(wn[An]=bn[An-gn],_n.push(`indexDataIdx[${An-gn}] = outputIdx[${An}];`)):(wn[An]=yn[An-bn.length+1],_n.push(`inputIdx[${An-bn.length+1}] = outputIdx[${An}];`));const Tn=`
      float process(int outputIdx[${wn.length||1}]) {
        int inputIdx[${yn.length}];
        int indexDataIdx[${bn.length||1}];
        indexDataIdx[0] = 0;
        ${_n.join(`
        `)}
        int idx = int(_B(indexDataIdx));
        inputIdx[${gn}] = idx < 0 ? idx + ${yn[gn]} : idx;
        return _A(inputIdx);
      }`;return Object.assign(Object.assign({},mn),{output:{dims:wn,type:xn[0].type,textureType:on.TextureType.unpacked},shaderSource:Tn})})(0,cn,an,rn.axis)})},fn=(hn,an)=>{if(!hn||hn.length!==2)throw new Error("Gather requires 2 inputs.");const rn=hn[0].dims.length;if(rn<1)throw new Error("Invalid input shape.");if(an<-rn||an>rn-1)throw new Error("Invalid axis.");if(nn.NUMBER_TYPES.indexOf(hn[0].type)===-1)throw new Error("Invaid input type.");if(hn[1].type!=="int32"&&hn[1].type!=="int16")throw new Error("Invaid input type.")}},4776:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseGemmAttributesV11=e.parseGemmAttributesV7=e.gemm=void 0;const tn=en(246),nn=en(2517),sn=en(2039);e.gemm=(hn,an,rn)=>(fn(an,rn),[hn.run(un(an,rn),an)]);const on=(hn,an)=>{const rn=hn.attributes.getInt("transA",0)!==0,cn=hn.attributes.getInt("transB",0)!==0,pn=hn.attributes.getFloat("alpha",1),mn=hn.attributes.getFloat("beta",1);return(0,tn.createAttributeWithCacheKey)({transA:rn,transB:cn,alpha:pn,beta:mn,isOptionalC:an})};e.parseGemmAttributesV7=hn=>on(hn,!1),e.parseGemmAttributesV11=hn=>on(hn,!0);const un=(hn,an)=>{const rn={name:"Gemm",inputNames:hn.length===3?["A","B","C"]:["A","B"],inputTypes:hn.length===3?[sn.TextureType.unpacked,sn.TextureType.unpacked,sn.TextureType.unpacked]:[sn.TextureType.unpacked,sn.TextureType.unpacked],key:an.cacheKey};return Object.assign(Object.assign({},rn),{get:()=>dn(rn,hn,an)})},dn=(hn,an,rn)=>{const cn=an[0].dims.slice(),pn=an[1].dims.slice(),[mn,xn]=nn.GemmUtil.getShapeOfGemmResult(cn,rn.transA,pn,rn.transB,an.length===3?an[2].dims:void 0),gn=[mn,xn];if(!gn)throw new Error("Can't use gemm on the given tensors");let yn=cn[cn.length-1],bn="";rn.transA&&(yn=cn[0]),rn.transA&&rn.transB?bn="value += _A_T(a) * _B_T(b);":rn.transA&&!rn.transB?bn="value += _A_T(a) * _B(b);":!rn.transA&&rn.transB?bn="value += _A(a) * _B_T(b);":rn.transA||rn.transB||(bn="value += _A(a) * _B(b);");const wn=gn.length,_n=`
      float process(int indices[${wn}]) {
          int a[${wn}];
          int b[${wn}];
          ${an.length===3?`int c[${an[2].dims.length}];`:""}

          copyVec(indices, a);
          copyVec(indices, b);
          ${an.length===3?"bcastIndices_C(indices, c);":""}

          float value = 0.0;
          for (int k=0; k<${yn}; ++k) {
              a[${wn-1}] = k;
              b[${wn-2}] = k;
              ${bn}
          }

          value = value * alpha;
          ${an.length===3?"value += beta * _C(c);":""}
          return value;
      }`;return Object.assign(Object.assign({},hn),{output:{dims:gn,type:an[0].type,textureType:sn.TextureType.unpacked},variables:[{name:"alpha",type:"float",data:rn.alpha},{name:"beta",type:"float",data:rn.beta}],shaderSource:_n})},fn=(hn,an)=>{if(!hn)throw new Error("Input is missing");if(an.isOptionalC&&(hn.length<2||hn.length>3))throw new Error("Invaid input shape.");if(!an.isOptionalC&&hn.length!==3)throw new Error("Gemm requires 3 inputs");if(hn.length===3&&hn[2].dims.length!==1&&hn[2].dims.length!==2)throw new Error("Invalid input shape of C");if(hn[0].type!=="float32"&&hn[0].type!=="float64"||hn[1].type!=="float32"&&hn[1].type!=="float64"||hn.length===3&&hn[2].type!=="float32"&&hn[2].type!=="float64")throw new Error("Invalid input type.");if(hn[0].type!==hn[1].type||hn.length===3&&hn[0].type!==hn[2].type)throw new Error("Input types are mismatched")}},8555:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedIm2ColProgramInfoLoader=void 0;const tn=en(5060),nn=en(2039),sn=en(2827);e.createPackedIm2ColProgramInfoLoader=(on,un,dn,fn,hn)=>{const an=(rn=hn.cacheKey,{name:"Im2Col (packed)",inputNames:["A"],inputTypes:[nn.TextureType.packed],cacheHint:rn});var rn;return Object.assign(Object.assign({},an),{get:()=>((cn,pn,mn,xn,gn,yn)=>{const bn=mn.dims,wn=xn.dims,_n=gn.length,Tn=[wn[1]*wn[2]*wn[3],gn[2]*gn[3]],An=wn[2]*wn[3],Pn=(0,sn.unpackFromChannel)(),Sn=(0,tn.getGlsl)(cn.session.backend.glContext.version);let Cn="";for(let Mn=0;Mn<=1;Mn++)for(let Fn=0;Fn<=1;Fn++)Cn+=`
            blockIndex = rc.x + ${Fn};
            pos = rc.y + ${Mn};

            if(blockIndex < ${Tn[1]} && pos < ${Tn[0]}) {
              offsetY = int(blockIndex / (${gn[_n-1]})) * ${yn.strides[0]} -
                ${yn.pads[0]};
              d0 = offsetY + ${yn.dilations[0]} * (imod(pos, ${An}) / ${wn[2]});

              if(d0 < ${bn[2]} && d0 >= 0) {
                offsetX = imod(blockIndex, ${gn[_n-1]}) * ${yn.strides[1]} -
                  ${yn.pads[1]};
                d1 = offsetX + ${yn.dilations[1]} * imod(imod(pos, ${An}), ${wn[2]});

                if(d1 < ${bn[3]} && d1 >= 0) {

                  ch = int(float(pos)/ ${An}.);
                    innerDims = vec2(d0, d1);
                    result[${2*Mn+Fn}] = getChannel(
                      getA(0, ch, int(innerDims.x),
                      int(innerDims.y)), innerDims);
                }
              }
            }

          `;const Nn=`
      ${Pn}

      void main() {
        ivec2 rc = getOutputCoords();
          vec4 result = vec4(0.0);
          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
          vec2 innerDims;
          ${Cn}
          ${Sn.output} = result;
      }
            `;return Object.assign(Object.assign({},pn),{output:{dims:Tn,type:mn.type,textureType:nn.TextureType.packed},shaderSource:Nn,hasMain:!0})})(on,an,un,dn,fn,hn)})}},3248:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.calculateIm2ColDims=e.createIm2ColProgramInfoLoader=void 0;const tn=en(2039);e.createIm2ColProgramInfoLoader=(nn,sn,on,un,dn)=>{const fn=(hn=dn.cacheKey,{name:"Im2Col",inputNames:["X"],inputTypes:[tn.TextureType.unpacked],cacheHint:hn});var hn;return Object.assign(Object.assign({},fn),{get:()=>((an,rn,cn,pn,mn,xn)=>{const gn=cn.dims,yn=pn.dims,bn=mn.length,wn=(0,e.calculateIm2ColDims)(gn,yn,mn,4),_n=`
        const int XC = ${gn[1]};
        const int XH = ${gn[2]};
        const int XW = ${gn[3]};
        const int KH = ${xn.kernelShape[0]};
        const int KW = ${xn.kernelShape[1]};
        const int dilationH = ${xn.dilations[0]};
        const int dilationW = ${xn.dilations[1]};
        const int strideH = ${xn.strides[0]};
        const int strideW = ${xn.strides[1]};
        const int padH = ${xn.pads[0]};
        const int padW = ${xn.pads[1]};
        const int KHKW = KH*KW;
        const int XCKHKW = XC * KHKW;
        const int outputChannels = 4;
        vec4 process(int indices[${bn}]) {
          int b  = indices[0]; // batch size
          int oh = indices[1] * strideH - padH; //output height
          int ow = indices[2] * strideW - padW; //output width
          int p = indices[3] * outputChannels; //patch
          vec4 value = vec4(0.0);
          for(int i=0; i < outputChannels; ++i) {
            if(p < XCKHKW) {
              int patchC = p / KHKW;
              int patchH = (p - patchC*KHKW) / KW;
              int patchW = (p - patchC*KHKW) - patchH * KW;
              int xh2 = oh + patchH * dilationH;
              int xw2 = ow + patchW * dilationW;
              int x[${gn.length}];
              x[0] = b;
              x[1] = patchC;
              x[2] = xh2;
              x[3] = xw2;
              if(xh2 >= 0 &&
                  xh2 < XH &&
                  xw2 >= 0 &&
                  xw2 < XW) {
                value[i] = _X(x);
              }
            }
            ++p;
          }
          return value;
        }
        `;return Object.assign(Object.assign({},rn),{output:{dims:wn,type:cn.type,textureType:tn.TextureType.packedLastDimension},shaderSource:_n})})(0,fn,sn,on,un,dn)})},e.calculateIm2ColDims=(nn,sn,on,un=4)=>[on[0],on[2],on[3],Math.ceil(nn[1]*sn[2]*sn[3]/un)]},6572:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseImageScalerAttributes=e.imageScaler=void 0;const tn=en(246),nn=en(2039);e.imageScaler=(fn,hn,an)=>(dn(hn),[fn.run(on(fn,hn,an),hn)]),e.parseImageScalerAttributes=fn=>{const hn=fn.attributes.getFloat("scale"),an=fn.attributes.getFloats("bias");return(0,tn.createAttributeWithCacheKey)({scale:hn,bias:an})};const sn={name:"ImageScaler",inputNames:["X"],inputTypes:[nn.TextureType.unpacked]},on=(fn,hn,an)=>{const rn=Object.assign(Object.assign({},sn),{cacheHint:an.cacheKey});return Object.assign(Object.assign({},rn),{get:()=>((cn,pn,mn,xn)=>{const gn=mn[0].dims.slice(),yn=gn.length,bn=`
      ${un(xn.bias.length)}
      float process(int indices[${yn}]) {
        return _X(indices) * scale + getBias(bias, indices[1]);
      }`;return Object.assign(Object.assign({},pn),{output:{dims:gn,type:mn[0].type,textureType:nn.TextureType.unpacked},variables:[{name:"bias",type:"float",arrayLength:xn.bias.length,data:xn.bias},{name:"scale",type:"float",data:xn.scale}],shaderSource:bn})})(0,rn,hn,an)})},un=fn=>{const hn=[`float getBias(float bias[${fn}], int channel) {`];for(let an=0;an<fn;++an)an===0?hn.push(`	if (channel == ${an}) { return bias[${an}]; }`):an===fn-1?hn.push(`	else { return bias[${an}]; }`):hn.push(`	else if (channel == ${an}) { return bias[${an}]; }`);return hn.push("	}"),hn.join(`
`)},dn=fn=>{if(!fn||fn.length!==1)throw new Error("ImageScaler requires 1 input.");if(fn[0].dims.length!==4)throw new Error("Invalid input shape.");if(fn[0].type!=="float32"&&fn[0].type!=="float64")throw new Error("Invalid input type.")}},3346:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseInstanceNormalizationAttributes=e.instanceNormalization=void 0;const tn=en(5060),nn=en(2039);e.instanceNormalization=(hn,an,rn)=>{fn(an);const cn=hn.run(on(an[0]),an);return[hn.run(dn(hn,an[0],rn,cn.dims),[an[0],cn,an[1],an[2]])]},e.parseInstanceNormalizationAttributes=hn=>hn.attributes.getFloat("epsilon",1e-5);const sn={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[nn.TextureType.unpacked]},on=hn=>Object.assign(Object.assign({},sn),{get:()=>((an,rn)=>{const cn=rn.dims.slice(),pn=cn[1],mn=cn[2]*cn[3],xn=[cn[0],pn],gn=`
      vec4 process(int[2] indices) {
        vec4 v = vec4(0.0);
        int a[4];
        a[0] = indices[0];
        a[1] = indices[1];
        float temp = 0.0;
        for(int a2=0; a2<${cn[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${cn[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += x;
          }
        }
        float mean = temp / float(${mn});
        temp = 0.0;
        for(int a2=0; a2<${cn[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${cn[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += (x - mean) * (x - mean);
          }
        }
        v.r = mean;
        v.g = temp / float(${mn});

        return v;
      }`;return Object.assign(Object.assign({},an),{output:{dims:xn,type:rn.type,textureType:nn.TextureType.packedLastDimension},shaderSource:gn})})(sn,hn)}),un={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[nn.TextureType.unpacked,nn.TextureType.packedLastDimension,nn.TextureType.unpacked,nn.TextureType.unpacked]},dn=(hn,an,rn,cn)=>{const pn=Object.assign(Object.assign({},un),{cacheHint:`${rn}`});return Object.assign(Object.assign({},pn),{get:()=>((mn,xn,gn,yn,bn)=>{const wn=(0,tn.getGlsl)(mn.session.backend.glContext.version),[_n,Tn]=mn.calculateTextureWidthAndHeight(bn,nn.TextureType.packedLastDimension),[An,Pn]=[_n/4,Tn],Sn=`
      vec4 get_MeanAndVariance(int[2] mv) {
        int offset = indicesToOffset_MeanAndVariance(mv);
        vec2 coords = offsetToCoords(offset, ${An}, ${Pn});
        return ${wn.texture2D}(MeanAndVariance, coords);
      }

      float process(int[4] indices) {
        int mv[2];
        mv[0] = indices[0];
        mv[1] = indices[1];
        vec4 mean_and_variance = get_MeanAndVariance(mv);
        float mean = mean_and_variance.r;
        float variance = mean_and_variance.g;

        int sb[1];
        sb[0] = indices[1];
        float scale = _Scale(sb);
        float b = _B(sb);

        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;
      }`;return Object.assign(Object.assign({},xn),{output:{dims:gn.dims,type:gn.type,textureType:nn.TextureType.unpacked},variables:[{name:"epsilon",type:"float",data:yn}],shaderSource:Sn})})(hn,pn,an,rn,cn)})},fn=hn=>{if(!hn||hn.length!==3)throw new Error("InstanceNormalization requires 3 inputs.");const an=hn[0],rn=hn[1],cn=hn[2];if(an.dims.length<3||rn.dims.length!==1||cn.dims.length!==1)throw new Error("Invalid input shape.");if(rn.dims[0]!==an.dims[1]||cn.dims[0]!==an.dims[1])throw new Error("Input shapes are mismatched.");if(an.type!=="float32"&&an.type!=="float64"||rn.type!=="float32"&&rn.type!=="float64"||cn.type!=="float32"&&cn.type!=="float64")throw new Error("Invalid input type.");if(hn[0].dims.length!==4)throw new Error("Only support 4-D input shape.")}},708:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedMatmulProgramInfoLoader=void 0;const tn=en(2517),nn=en(5060),sn=en(2039),on=en(9390),un=en(2823),dn=en(5623);e.createPackedMatmulProgramInfoLoader=(fn,hn,an)=>{const rn=(cn=hn.length>2,pn=an.activationCacheKey,{name:"MatMul (packed)",inputNames:cn?["A","B","Bias"]:["A","B"],inputTypes:cn?[sn.TextureType.packed,sn.TextureType.packed,sn.TextureType.packed]:[sn.TextureType.packed,sn.TextureType.packed],cacheHint:pn});var cn,pn;return Object.assign(Object.assign({},rn),{get:()=>((mn,xn,gn,yn)=>{const bn=gn.length>2,wn=bn?"value += getBiasForMatmul();":"",_n=gn[0].dims,Tn=gn[1].dims,An=tn.BroadcastUtil.calcShape(_n,Tn,!0),Pn=!tn.ShapeUtil.areEqual(gn[0].dims,gn[1].dims);if(!An)throw new Error("Can't use matmul on the given tensors");const Sn=_n[_n.length-1],Cn=Math.ceil(Sn/2),Nn=_n.length,Mn=Tn.length,Fn=(0,nn.getGlsl)(mn.session.backend.glContext.version),In=(0,on.getCoordsDataType)(An.length),Bn=An.length,Ln=(0,on.getGlChannels)(),{activationFunction:qn,applyActivation:Yn}=(0,un.getActivationSnippet)(yn),Qn=bn?`${(0,dn.getBiasForMatmul)(In,Ln,gn[2].dims,An,!0)}`:"",zn=Pn?`${function(er,sr,ar,cr){let gr=[],vr=[];const Er=ar[0].dims,Rr=ar[1].dims,Kr=Er.length,Cr=Rr.length,Gr=cr.length,Zn=Gr-Kr,Xr=Gr-Cr;gr=Er.map((Fr,Qr)=>`coords.${sr[Qr+Zn]}`),gr[Kr-1]="i*2",gr.join(", "),vr=Rr.map((Fr,Qr)=>`coords.${sr[Qr+Xr]}`),vr[Cr-2]="i*2",vr.join(", ");const hs=tn.BroadcastUtil.getBroadcastDims(Er,cr),us=tn.BroadcastUtil.getBroadcastDims(Rr,cr),zr=hs.map(Fr=>`coords.${sr[Fr+Zn]} = 0;`).join(`
`),ls=us.map(Fr=>`coords.${sr[Fr+Xr]} = 0;`).join(`
`),wr=`int lastDim = coords.${sr[Gr-1]};
  coords.${sr[Gr-1]} = coords.${sr[Gr-2]};
  coords.${sr[Gr-2]} = lastDim;`;return`
vec4 getAAtOutCoordsMatmul(int i) {
  ${er} coords = getOutputCoords();
  ${wr}
  ${zr}
  vec4 outputValue = getA(${gr});
  return outputValue;
}

vec4 getBAtOutCoordsMatmul(int i) {
  ${er} coords = getOutputCoords();
  ${wr}
  ${ls}
  vec4 outputValue = getB(${vr});
  return outputValue;
}`}(In,Ln,gn,An)}`:"",lr=Pn?"getAAtOutCoordsMatmul(i)":`getA(${function(er,sr){let ar="";for(let cr=0;cr<sr-2;cr++)ar+=`rc.${er[cr]}, `;return ar+=`rc.${er[sr-2]}, i*2`,ar}(Ln,Nn)})`,$n=Pn?"getBAtOutCoordsMatmul(i)":`getB(${function(er,sr){let ar="";for(let cr=0;cr<sr-2;cr++)ar+=`rc.${er[cr]}, `;return ar+=`i*2, rc.${er[sr-1]}`,ar}(Ln,Mn)})`,On=`
            ${zn}
            ${Qn}
            ${qn}
            void main() {
              ${Pn?"":`${In} rc =
          getOutputCoords(); int lastDim = rc.${Ln[Bn-1]}; rc.${Ln[Bn-1]} =
          rc.${Ln[Bn-2]}; rc.${Ln[Bn-2]} = lastDim;
      `}

              vec4 value = vec4(0);
              for (int i = 0; i < ${Cn}; i++) {
                vec4 a = ${lr};
                vec4 b = ${$n};

                value += (a.rrbb * b.rgrg);
                value += (a.ggaa * b.baba);
              }
              ${wn}
              ${Yn}
              ${Fn.output} = value;
            }`;return Object.assign(Object.assign({},xn),{output:{dims:An,type:gn[0].type,textureType:sn.TextureType.packed},shaderSource:On,hasMain:!0})})(fn,rn,hn,an)})}},5623:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getBiasForMatmul=e.createMatmulProgramInfoLoader=e.parseMatMulAttributes=e.matMul=void 0;const tn=en(2517),nn=en(2039),sn=en(9390),on=en(2823),un=en(708);function dn(an,rn){const cn=(pn=an.length>2,mn=rn.activationCacheKey,{name:"MatMul",inputNames:pn?["A","B","Bias"]:["A","B"],inputTypes:pn?[nn.TextureType.unpacked,nn.TextureType.unpacked,nn.TextureType.unpacked]:[nn.TextureType.unpacked,nn.TextureType.unpacked],cacheHint:mn});var pn,mn;return Object.assign(Object.assign({},cn),{get:()=>function(xn,gn,yn){const bn=gn[0].dims,wn=gn[1].dims,_n=tn.BroadcastUtil.calcShape(bn,wn,!0);if(!_n)throw new Error("Can't use matmul on the given tensors");const Tn=(0,sn.getCoordsDataType)(_n.length),An=(0,sn.getGlChannels)(),{activationFunction:Pn,applyActivation:Sn}=(0,on.getActivationSnippet)(yn),Cn=gn.length>2,Nn=Cn?"value += getBiasForMatmul();":"",Mn=Cn?`${hn(Tn,An,gn[2].dims,_n,!1)}`:"",Fn=_n.length,In=bn.length,Bn=wn.length,Ln=`
    ${Pn}
    ${Mn}
    float process(int indices[${Fn}]) {
        int a[${In}];
        int b[${Bn}];
        bcastMatmulIndices_A(indices, a);
        bcastMatmulIndices_B(indices, b);

        float value;
        for (int k=0; k<${bn[bn.length-1]}; ++k) {
            a[${In-1}] = k;
            b[${Bn-2}] = k;
            value += _A(a) * _B(b);
        }
        ${Nn}
        ${Sn}
        return value;
    }`;return Object.assign(Object.assign({},xn),{output:{dims:_n,type:gn[0].type,textureType:nn.TextureType.unpacked},shaderSource:Ln})}(cn,an,rn)})}e.matMul=(an,rn,cn)=>(fn(rn),an.session.pack?[an.run((0,un.createPackedMatmulProgramInfoLoader)(an,rn,cn),rn)]:[an.run(dn(rn,cn),rn)]),e.parseMatMulAttributes=an=>(0,on.parseInternalActivationAttributes)(an.attributes),e.createMatmulProgramInfoLoader=dn;const fn=an=>{if(!an||an.length!==2)throw new Error("MatMul requires 2 inputs.");if(an[0].dims[an[0].dims.length-1]!==an[1].dims[an[1].dims.length-2])throw new Error("shared dimension does not match.");if(an[0].type!=="float32"&&an[0].type!=="float64"||an[1].type!=="float32"&&an[1].type!=="float64")throw new Error("inputs should be float type");if(an[0].type!==an[1].type)throw new Error("inputs types should match")};function hn(an,rn,cn,pn,mn){let xn="";const gn=cn.length,yn=pn.length,bn=yn-gn;xn=yn<2&&gn>0?"coords":cn.map((Tn,An)=>`coords.${rn[An+bn]}`).join(", ");const wn=tn.BroadcastUtil.getBroadcastDims(cn,pn).map(Tn=>`coords.${rn[Tn+bn]} = 0;`).join(`
`);let _n="vec4(outputValue.xx, outputValue.yy)";return tn.ShapeUtil.size(cn)===1&&(_n="vec4(outputValue.x)"),mn?`
vec4 getBiasForMatmul() {
  ${an} coords = getOutputCoords();
  ${wn}
  vec4 outputValue = getBias(${xn});
  return ${_n};
}`:`
float getBiasForMatmul() {
  ${an} coords = getOutputCoords();
  ${wn}
  return getBias(coords.x);
}`}e.getBiasForMatmul=hn},2403:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackProgramInfoLoader=void 0;const tn=en(5060),nn=en(2039),sn=en(9390),on=en(2827),un={name:"pack",inputNames:["A"],inputTypes:[nn.TextureType.unpackedReversed]};e.createPackProgramInfoLoader=(dn,fn)=>Object.assign(Object.assign({},un),{get:()=>((hn,an)=>{const rn=(0,tn.getGlsl)(hn.session.backend.glContext.version),cn=an.dims,pn=cn.length,mn=an.dims.length,xn=(0,sn.getCoordsDataType)(mn),gn=(0,on.getChannels)("rc",mn),yn=(bn=mn,wn=gn,_n=cn[cn.length-2],Tn=cn[cn.length-1],bn===0||bn===1?"":`
    int r = ${wn[bn-2]};
    int c = ${wn[bn-1]};
    int rp1 = ${wn[bn-2]} + 1;
    int cp1 = ${wn[bn-1]} + 1;
    bool rEdge = rp1 >= ${Tn};
    bool cEdge = cp1 >= ${_n};
    `);var bn,wn,_n,Tn;let An;An=pn===0?[1,1]:pn===1?[cn[0],1]:[cn[mn-1],cn[mn-2]];const Pn=function(Nn,Mn,Fn){if(Nn===0)return"false";if(Nn===1)return`rc > ${Mn[0]}`;let In="";for(let Bn=Nn-2;Bn<Nn;Bn++)In+=`${Fn[Bn]} >= ${Mn[Bn-Nn+2]}`,Bn<Nn-1&&(In+="||");return In}(mn,An,gn),Sn=function(Nn,Mn){const Fn=Nn.length;if(Fn===0)return"getA(), 0, 0, 0";if(Fn===1)return`getA(rc),
            rc + 1 >= ${Nn[0]} ? 0. : getA(rc + 1),
            0, 0`;let In="";if(Fn>2)for(let Bn=0;Bn<Fn-2;++Bn)In+=`${Mn[Bn]},`;return`getA(${In}r, c),
          rEdge ? 0. : getA(${In}rp1, c),
          cEdge ? 0. : getA(${In}r, cp1),
          rEdge || cEdge ? 0. : getA(${In}rp1, cp1)`}(cn,gn),Cn=`
        void main() {
          ${xn} rc = getOutputCoords();

          if(${Pn}) {
            ${rn.output} = vec4(0);
          } else {
            ${yn}

            ${rn.output} = vec4(${Sn});
          }
        }
      `;return Object.assign(Object.assign({},un),{hasMain:!0,output:{dims:an.dims,type:an.type,textureType:nn.TextureType.packed},shaderSource:Cn})})(dn,fn)})},2827:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.unpackFromChannel=e.getChannels=e.getVecChannels=void 0;const tn=en(9390);function nn(sn,on){return(0,tn.getGlChannels)(on).map(un=>`${sn}.${un}`)}e.getVecChannels=nn,e.getChannels=function(sn,on){return on===1?[sn]:nn(sn,on)},e.unpackFromChannel=function(){return`
    float getChannel(vec4 frag, int dim) {
      int modCoord = imod(dim, 2);
      return modCoord == 0 ? frag.r : frag.g;
    }

    float getChannel(vec4 frag, vec2 innerDims) {
      vec2 modCoord = mod(innerDims, 2.);
      return modCoord.x == 0. ?
        (modCoord.y == 0. ? frag.r : frag.g) :
        (modCoord.y == 0. ? frag.b : frag.a);
    }
  `}},2870:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parsePadAttributesV11=e.padV11=e.parsePadAttributesV2=e.padV2=void 0;const tn=en(246),nn=en(2517),sn=en(5060),on=en(2039),un={name:"Pad",inputNames:["A"],inputTypes:[on.TextureType.unpacked]};e.padV2=(xn,gn,yn)=>(hn(gn),[xn.run(Object.assign(Object.assign({},un),{cacheHint:yn.cacheKey,get:()=>fn(xn,gn[0],yn)}),gn)]),e.parsePadAttributesV2=xn=>{const gn=xn.attributes.getString("mode","constant"),yn=xn.attributes.getFloat("value",0),bn=xn.attributes.getInts("pads");return(0,tn.createAttributeWithCacheKey)({mode:gn,value:yn,pads:bn})},e.padV11=(xn,gn,yn)=>{an(gn);const bn=dn(xn,gn,yn);return(0,e.padV2)(xn,[gn[0]],bn)},e.parsePadAttributesV11=xn=>xn.attributes.getString("mode","constant");const dn=(xn,gn,yn)=>{if(!xn.session.isInitializer(gn[1].dataId)||gn.length>=3&&!xn.session.isInitializer(gn[2].dataId))throw new Error("dynamic pad attributes are not allowed");const bn=Array.from(gn[1].integerData),wn=gn.length>=3?gn[2].floatData[0]:0;return(0,tn.createAttributeWithCacheKey)({mode:yn,pads:bn,value:wn})},fn=(xn,gn,yn)=>{const bn=nn.ShapeUtil.padShape(gn.dims.slice(),yn.pads),wn=bn.length,_n=`
      ${rn(xn,gn,yn)}
      float process(int[${wn}] indices) {
          return padA(indices);
      }`;return{name:"Pad",inputNames:["A"],inputTypes:[on.TextureType.unpacked],output:{dims:bn,type:gn.type,textureType:on.TextureType.unpacked},shaderSource:_n}},hn=xn=>{if(!xn||xn.length!==1)throw new Error("Pad requires 1 input");if(xn[0].type!=="float32"&&xn[0].type!=="float64")throw new Error("Invalid input type.")},an=xn=>{if(!xn||xn.length!==2&&xn.length!==3)throw new Error("Pad requires 2 or 3 inputs");if(xn[1].type!=="int32")throw new Error("Invalid input type.");if(xn.length>=3&&xn[2].type==="string")throw new Error("Invalid input type.")},rn=(xn,gn,yn)=>{const bn=(0,sn.getGlsl)(xn.session.backend.glContext.version),[wn,_n]=xn.calculateTextureWidthAndHeight(gn.dims,on.TextureType.unpacked),Tn=nn.ShapeUtil.computeStrides(gn.dims);switch(yn.mode){case"constant":return cn(bn,gn.dims,Tn,wn,_n,yn.pads,yn.value);case"reflect":return pn(bn,gn.dims,Tn,wn,_n,yn.pads);case"edge":return mn(bn,gn.dims,Tn,wn,_n,yn.pads);default:throw new Error("Invalid mode")}},cn=(xn,gn,yn,bn,wn,_n,Tn)=>{const An=gn.length;let Pn="";for(let Sn=An-1;Sn>=0;--Sn)Pn+=`
        k = m[${Sn}] - ${_n[Sn]};
        if (k < 0)  return constant;
        if (k >= ${gn[Sn]}) return constant;
        offset += k * ${yn[Sn]};
        `;return`
      float padA(int m[${An}]) {
        const float constant = float(${Tn});
        int offset = 0;
        int k = 0;
        ${Pn}
        vec2 coords = offsetToCoords(offset, ${bn}, ${wn});
        float value = getColorAsFloat(${xn.texture2D}(A, coords));
        return value;
      }
      `},pn=(xn,gn,yn,bn,wn,_n)=>{const Tn=gn.length;let An="";for(let Pn=Tn-1;Pn>=0;--Pn)An+=`
        k = m[${Pn}] - ${_n[Pn]};
        if (k < 0) { k = -k; }
        {
          const int _2n_1 = ${2*(gn[Pn]-1)};
          k = int( mod( float(k), float(_2n_1) ) ) ;
          if(k >= ${gn[Pn]}) { k = _2n_1 - k; }
        }
        offset += k * ${yn[Pn]};
        `;return`
      float padA(int m[${Tn}]) {
        int offset = 0;
        int k = 0;
        ${An}
        vec2 coords = offsetToCoords(offset, ${bn}, ${wn});
        float value = getColorAsFloat(${xn.texture2D}(A, coords));
        return value;
      }
      `},mn=(xn,gn,yn,bn,wn,_n)=>{const Tn=gn.length;let An="";for(let Pn=Tn-1;Pn>=0;--Pn)An+=`
        k = m[${Pn}] - ${_n[Pn]};
        if (k < 0)  k = 0;
        if (k >= ${gn[Pn]}) k = ${gn[Pn]-1};
        offset += k * ${yn[Pn]};
      `;return`
      float padA(int m[${Tn}]) {
        int offset = 0;
        int k = 0;
        ${An}
        vec2 coords = offsetToCoords(offset, ${bn}, ${wn});
        float value = getColorAsFloat(${xn.texture2D}(A, coords));
        return value;
      }
      `}},2143:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.globalMaxPool=e.parseMaxPoolAttributes=e.maxPool=e.parseGlobalAveragePoolAttributes=e.globalAveragePool=e.parseAveragePoolAttributes=e.averagePool=void 0;const tn=en(246),nn=en(2517),sn=en(2039);e.averagePool=(mn,xn,gn)=>{an(xn);const yn={name:"AveragePool",inputNames:["X"],inputTypes:[sn.TextureType.unpacked],cacheHint:gn.cacheKey};return[mn.run(Object.assign(Object.assign({},yn),{get:()=>on(xn,yn,!1,gn)}),xn)]},e.parseAveragePoolAttributes=mn=>{const xn=mn.attributes.getString("auto_pad","NOTSET"),gn=mn.attributes.getInt("ceil_mode",0),yn=mn.attributes.getInt("count_include_pad",0)!==0,bn=mn.attributes.getInts("kernel_shape"),wn=mn.attributes.getInts("strides",[]),_n=mn.attributes.getInts("pads",[]);if(gn!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return(0,tn.createAttributeWithCacheKey)({autoPad:xn,ceilMode:gn,countIncludePad:yn,kernelShape:bn,strides:wn,pads:_n})};const on=(mn,xn,gn,yn)=>{const[bn,wn]=dn(mn,yn,gn),_n=nn.ShapeUtil.size(bn.kernelShape);let Tn="";bn.countIncludePad?Tn+=`value /= float(${_n});`:Tn+=`value /= float(${_n} - pad);`;const An=`
        ${rn(mn[0].dims,bn,"value += _X(x);",Tn,"0.0")}
      `;return Object.assign(Object.assign({},xn),{output:{dims:wn,type:mn[0].type,textureType:sn.TextureType.unpacked},shaderSource:An})};e.globalAveragePool=(mn,xn,gn)=>{an(xn);const yn={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[sn.TextureType.unpacked],cacheHint:`${gn.countIncludePad}`};return[mn.run(Object.assign(Object.assign({},yn),{get:()=>on(xn,yn,!0,gn)}),xn)]},e.parseGlobalAveragePoolAttributes=mn=>{const xn=mn.attributes.getInt("count_include_pad",0)!==0;return(0,tn.createAttributeWithCacheKey)({autoPad:"",ceilMode:0,countIncludePad:xn,kernelShape:[],strides:[],pads:[]})},e.maxPool=(mn,xn,gn)=>{an(xn);const yn={name:"MaxPool",inputNames:["X"],inputTypes:[sn.TextureType.unpacked],cacheHint:gn.cacheKey};return[mn.run(Object.assign(Object.assign({},yn),{get:()=>un(xn,yn,!1,gn)}),xn)]},e.parseMaxPoolAttributes=mn=>{const xn=mn.attributes.getString("auto_pad","NOTSET"),gn=mn.attributes.getInt("ceil_mode",0),yn=mn.attributes.getInts("kernel_shape"),bn=mn.attributes.getInts("strides",[]),wn=mn.attributes.getInts("pads",[]),_n=mn.attributes.getInt("storage_order",0),Tn=mn.attributes.getInts("dilations",[]);if(_n!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(gn!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return(0,tn.createAttributeWithCacheKey)({autoPad:xn,ceilMode:gn,countIncludePad:!1,kernelShape:yn,strides:bn,pads:wn,storageOrder:_n,dilations:Tn})};const un=(mn,xn,gn,yn)=>{const[bn,wn]=dn(mn,yn,gn),_n=`
      ${rn(mn[0].dims,bn,`
      value = max(_X(x), value);
    `,"","-1e5")}
    `;return Object.assign(Object.assign({},xn),{output:{dims:wn,type:mn[0].type,textureType:sn.TextureType.unpacked},shaderSource:_n})},dn=(mn,xn,gn)=>{const yn=mn[0].dims.slice(),bn=Object.hasOwnProperty.call(xn,"dilations"),wn=xn.kernelShape.slice(),_n=xn.strides.slice(),Tn=bn?xn.dilations.slice():[],An=xn.pads.slice();nn.PoolConvUtil.adjustPoolAttributes(gn,yn,wn,_n,Tn,An);const Pn=nn.PoolConvUtil.computePoolOutputShape(gn,yn,_n,Tn,wn,An,xn.autoPad),Sn=Object.assign({},xn);return bn?Object.assign(Sn,{kernelShape:wn,strides:_n,pads:An,dilations:Tn,cacheKey:xn.cacheKey}):Object.assign(Sn,{kernelShape:wn,strides:_n,pads:An,cacheKey:xn.cacheKey}),[Sn,Pn]},fn={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},hn={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[sn.TextureType.unpacked]};e.globalMaxPool=(mn,xn)=>(an(xn),[mn.run(Object.assign(Object.assign({},hn),{get:()=>un(xn,hn,!0,fn)}),xn)]);const an=mn=>{if(!mn||mn.length!==1)throw new Error("Pool ops requires 1 input.");if(mn[0].type!=="float32"&&mn[0].type!=="float64")throw new Error("Invalid input type.")},rn=(mn,xn,gn,yn,bn)=>{const wn=mn.length;if(xn.kernelShape.length<=2){const _n=xn.kernelShape[xn.kernelShape.length-1],Tn=xn.strides[xn.strides.length-1],An=xn.pads[xn.pads.length/2-1],Pn=xn.pads[xn.pads.length-1],Sn=mn[wn-1];let Cn="",Nn="",Mn="";if(Cn=An+Pn!==0?`
          for (int i = 0; i < ${_n}; i++) {
            x[${wn} - 1] = indices[${wn} - 1] * ${Tn} - ${An} + i;
            if (x[${wn} - 1] < 0 || x[${wn} - 1] >= ${Sn}) {
              pad++;
              continue;
            }
            ${gn}
          }`:`
          for (int i = 0; i < ${_n}; i++) {
            x[${wn} - 1] = indices[${wn} - 1] * ${Tn} - ${An} + i;
            ${gn}
          }`,xn.kernelShape.length===2){const Fn=xn.kernelShape[xn.kernelShape.length-2],In=xn.strides[xn.strides.length-2],Bn=xn.pads[xn.pads.length/2-2],Ln=xn.pads[xn.pads.length-2],qn=mn[wn-2];Nn=Bn+Ln!==0?`
            for (int j = 0; j < ${Fn}; j++) {
              x[${wn} - 2] = indices[${wn} - 2] * ${In} - ${Bn} + j;
              if (x[${wn} - 2] < 0 || x[${wn} - 2] >= ${qn}) {
                pad+= ${_n};
                continue;
              }
          `:`
            for (int j = 0; j < ${Fn}; j++) {
              x[${wn} - 2] = indices[${wn} - 2] * ${In} - ${Bn} + j;
            `,Mn=`
          }
        `}return`
        float process(int indices[${wn}]) {
          int x[${wn}];
          copyVec(indices, x);

          float value = ${bn};
          int pad = 0;
          ${Nn}
          ${Cn}
          ${Mn}
          ${yn}
          return value;
        }
      `}{const _n=nn.ShapeUtil.size(xn.kernelShape),Tn=nn.ShapeUtil.computeStrides(xn.kernelShape),An=Tn.length,Pn=xn.pads.length,Sn=pn(An),Cn=cn(mn,"inputDims"),Nn=cn(xn.pads,"pads"),Mn=cn(Tn,"kernelStrides"),Fn=cn(xn.strides,"strides");let In="";return In=xn.pads.reduce((Bn,Ln)=>Bn+Ln)?`
            if (x[j] >= inputDims[j] || x[j] < 0) {
              pad++;
              isPad = true;
              break;
            }
          }
          if (!isPad) {
            ${gn}
          }`:`
          }
          ${gn}
        `,`
        ${Sn}
        float process(int indices[${wn}]) {
          int x[${wn}];
          copyVec(indices, x);
          int offset[${An}];
          int pads[${Pn}];
          int inputDims[${wn}];
          int kernelStrides[${An}];
          int strides[${An}];
          ${Nn}
          ${Cn}
          ${Fn}
          ${Mn}

          float value = ${bn};
          int pad = 0;
          bool isPad = false;
          for (int i = 0; i < ${_n}; i++) {
            offsetToIndices(i, kernelStrides, offset);
            isPad = false;
            for (int j = ${wn} - ${An}; j < ${wn}; j++) {
              x[j] = indices[j] * strides[j - ${wn} + ${An}]
                + offset[j - ${wn} + ${An}] - pads[j - 2];
              ${In}
          }
          ${yn}

          return value;
        }
      `}},cn=(mn,xn)=>{let gn="";for(let yn=0;yn<mn.length;yn++)gn+=`
      ${xn}[${yn}] = ${mn[yn]};
    `;return gn},pn=mn=>`
  void offsetToIndices(int offset, int[${mn}] strides, out int[${mn}] indices) {
    if (${mn} == 0) {
      return;
    }
    for (int i = 0; i < ${mn} - 1; ++i) {
      indices[i] = offset / strides[i];
      offset -= indices[i] * strides[i];
    }
    indices[${mn} - 1] = offset;
  }`},4939:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reduceLogSumSquare=e.reduceLogSum=e.reduceProd=e.reduceMin=e.reduceMax=e.reduceMean=e.reduceSum=e.parseReduceAttributes=void 0;const tn=en(246),nn=en(782),sn=en(2517),on=en(2039),un=(hn,an,rn,cn,pn)=>{fn(an);const mn={name:cn,inputNames:["A"],inputTypes:[on.TextureType.unpacked]};return[hn.run(Object.assign(Object.assign({},mn),{cacheHint:rn.cacheKey,get:()=>dn(hn,an,rn,cn,pn,mn)}),an)]};e.parseReduceAttributes=hn=>{const an=hn.attributes.getInts("axes",[]),rn=hn.attributes.getInt("keepdims",1)===1;return(0,tn.createAttributeWithCacheKey)({axes:an,keepDims:rn})};const dn=(hn,an,rn,cn,pn,mn)=>{const xn=[],gn=an[0].dims.length||1,yn=[],bn=sn.ShapeUtil.normalizeAxes(rn.axes,an[0].dims.length),wn=pn(an,bn);let _n=wn[1];for(let An=0;An<an[0].dims.length;An++)bn.indexOf(An)>=0||bn.length===0?(rn.keepDims&&xn.push(1),_n=`
          for(int j${An} = 0; j${An} < ${an[0].dims[An]}; j${An}++) {
            inputIdx[${An}] = j${An};
            ${_n}
          }`):(yn.push(`inputIdx[${An}] = outputIdx[${xn.length}];`),xn.push(an[0].dims[An]));const Tn=`
      float process(int outputIdx[${xn.length||1}]) {
        float value;                 // final result
        int inputIdx[${gn}];      // addressing input data
        ${yn.join(`
`)}
        ${wn[0]}       // init ops for reduce max/min
        ${_n}
        ${wn[2]}       // final computation for reduce mean
        return value;
      }`;return Object.assign(Object.assign({},mn),{output:{dims:xn,type:an[0].type,textureType:on.TextureType.unpacked},shaderSource:Tn})},fn=hn=>{if(!hn||hn.length!==1)throw new Error("Reduce op requires 1 input.");if(nn.NUMBER_TYPES.indexOf(hn[0].type)===-1)throw new Error("Invalid input type.")};e.reduceSum=(hn,an,rn)=>un(hn,an,rn,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),e.reduceMean=(hn,an,rn)=>un(hn,an,rn,"ReduceMean",(cn,pn)=>{let mn=1;for(let xn=0;xn<cn[0].dims.length;xn++)(pn.indexOf(xn)>=0||pn.length===0)&&(mn*=cn[0].dims[xn]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${mn}.;`]}),e.reduceMax=(hn,an,rn)=>un(hn,an,rn,"ReduceMax",(cn,pn)=>{const mn=[];for(let xn=0;xn<cn[0].dims.length;xn++)(pn.indexOf(xn)>=0||pn.length===0)&&mn.push(`inputIdx[${xn}] = 0;`);return[`${mn.join(`
`)}
value = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]}),e.reduceMin=(hn,an,rn)=>un(hn,an,rn,"ReduceMin",(cn,pn)=>{const mn=[];for(let xn=0;xn<cn[0].dims.length;xn++)(pn.indexOf(xn)>=0||pn.length===0)&&mn.push(`inputIdx[${xn}] = 0;`);return[`${mn.join(`
`)}
value = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]}),e.reduceProd=(hn,an,rn)=>un(hn,an,rn,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),e.reduceLogSum=(hn,an,rn)=>un(hn,an,rn,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),e.reduceLogSumSquare=(hn,an,rn)=>un(hn,an,rn,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])},7019:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isReshapeCheap=e.processDims3D=e.createPackedReshape3DProgramInfoLoader=void 0;const tn=en(2517),nn=en(5060),sn=en(2039),on=en(2827);e.createPackedReshape3DProgramInfoLoader=(un,dn,fn)=>{const hn=(an=>({name:"Reshape (packed)",inputTypes:[sn.TextureType.packed],inputNames:["A"],cacheHint:`${an}`}))(fn);return Object.assign(Object.assign({},hn),{get:()=>((an,rn,cn,pn)=>{const mn=rn.dims,xn=pn;let gn="";for(let wn=0;wn<4;wn++){let _n="";switch(wn){case 0:_n="outputCoords = rc;";break;case 1:_n="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:_n="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:_n="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}gn+=`
        ${_n}
        ${wn>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}
          int flattenedIndex = getFlattenedIndex(outputCoords);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);
          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${wn}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);

        ${wn>0?"}":""}
      `}const yn=(0,nn.getGlsl)(an.session.backend.glContext.version),bn=`
      ${function(wn){const _n=tn.ShapeUtil.computeStrides(wn),Tn=["b","r","c"],An="index";return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${_n.map((Pn,Sn)=>`int ${Tn[Sn]} = ${An} / ${Pn}; ${Sn===_n.length-1?`int ${Tn[Sn+1]} = ${An} - ${Tn[Sn]} * ${Pn}`:`index -= ${Tn[Sn]} * ${Pn}`};`).join("")}
      return ivec3(b, r, c);
    }
  `}(mn)}
      ${function(wn){const _n=tn.ShapeUtil.computeStrides(wn);return`
  int getFlattenedIndex(ivec3 coords) {
    // reverse y, z order
    return coords.x * ${_n[0]} + coords.z * ${_n[1]} + coords.y;
  }
`}(xn)}
      ${(0,on.unpackFromChannel)()}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.0);

        ivec3 outputCoords;
        int rows = ${xn[2]};
        int cols = ${xn[1]};

        ${gn}
        ${yn.output} = result;
      }
    `;return Object.assign(Object.assign({},cn),{output:{dims:xn,type:rn.type,textureType:sn.TextureType.packed},shaderSource:bn,hasMain:!0})})(un,dn,hn,fn)})},e.processDims3D=function(un){if(un.length===0)return[1,1,1];let dn=1;for(let fn=0;fn<un.length-2;++fn)dn*=un[fn];return[dn,un.length>1?un[un.length-2]:1,un[un.length-1]]},e.isReshapeCheap=function(un,dn){let fn=!1;return fn=un.length===0||dn.length===0||(un.length<2||dn.length<2?un[un.length-1]===dn[dn.length-1]:un[un.length-1]===dn[dn.length-1]&&un[un.length-2]===dn[dn.length-2]),fn}},718:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reshape=void 0;const tn=en(2517);e.reshape=(nn,sn)=>{const on=tn.ShapeUtil.calculateReshapedDims(sn[0].dims,sn[1].integerData);return nn.session.pack?[nn.reshapePacked(sn[0],on)]:[nn.reshapeUnpacked(sn[0],on)]}},2268:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseResizeAttributesV11=e.parseResizeAttributesV10=e.resize=void 0;const tn=en(5060),nn=en(2039),sn=en(9390),on=en(2827),un=en(9793),dn={name:"Resize",inputNames:["A"],inputTypes:[nn.TextureType.packed]};e.resize=(cn,pn,mn)=>((0,un.validateInputs)(pn,mn),[cn.run(Object.assign(Object.assign({},dn),{cacheHint:mn.cacheKey,get:()=>fn(cn,pn,mn)}),pn)]),e.parseResizeAttributesV10=cn=>(0,un.parseUpsampleAttributes)(cn,10),e.parseResizeAttributesV11=cn=>(0,un.parseUpsampleAttributes)(cn,11);const fn=(cn,pn,mn)=>{const xn=(0,tn.getGlsl)(cn.session.backend.glContext.version),[gn,yn]=hn(pn,mn);if(gn.every(In=>In===1)&&mn.coordinateTransformMode!=="tf_crop_and_resize")return Object.assign(Object.assign({},dn),{output:{dims:yn,type:pn[0].type,textureType:nn.TextureType.packed},hasMain:!0,shaderSource:`void main() {
                    vec4 v = ${xn.texture2D}(X, TexCoords);
                    ${xn.output} = v;
                }`});const bn=yn.length;if(bn<2)throw new Error(`output dimension should be at least 2, but got ${bn}`);const wn=yn[bn-2],_n=yn[bn-1],Tn=pn[0].dims;if(bn!==Tn.length)throw new Error(`output dimension should match input ${Tn.length}, but got ${bn}`);const An=Tn[bn-2],Pn=Tn[bn-1],Sn=gn[bn-2],Cn=gn[bn-1];let Nn="";if(mn.mode!=="linear")throw new Error(`resize (packed) does not support mode: '${mn.mode}'`);switch(mn.coordinateTransformMode){case"asymmetric":Nn=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return vec4(coords) / scaleWHWH;
                    }
                `;break;case"half_pixel":Nn=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;
                    }
                `;break;case"pytorch_half_pixel":Nn=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 fcoords = vec4(coords);
                        return vec4(
                            ${_n}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,
                            ${wn}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,
                            ${_n}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,
                            ${wn}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0
                          );
                    }
                `;break;case"align_corners":Nn=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 resized = vec4(${_n}.0 - 1.0, ${wn}.0 - 1.0, ${_n}.0 - 1.0,
                            ${wn}.0 - 1.0);
                        vec4 original = vec4(${Pn}.0 - 1.0, ${An}.0 - 1.0, ${Pn}.0 - 1.0,
                            ${An}.0 - 1.0);
                        vec4 new_scale = original / resized;
                        return vec4(coords) * new_scale;
                    }
                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${mn.coordinateTransformMode}'`)}const Mn=(0,sn.getCoordsDataType)(bn),Fn=`
            const vec2 inputWH = vec2(${An}.0, ${Pn}.0);
            const vec4 scaleWHWH = vec4(float(${Sn}), float(${Cn}), float(${Sn}), float(${Cn}));
            ${(0,on.unpackFromChannel)()}
            ${Nn}
            float getAValue(int x10, int r, int c, int d) {
                return getChannel(getA(x10, r, c, d), vec2(c, d));
            }
            void main() {
                ${Mn} rc = getOutputCoords();

                int batch = rc[0];
                int depth = rc[1];

                // retrieve the 4 coordinates that is used in the 4 packed output values.
                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);

                // calculate the source index in fraction
                vec4 sourceFrac = getSourceFracIndex(coords);

                // get the lower and upper bound of the 4 values that will be packed into one texel.
                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));
                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));
                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));
                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));

                bool hasNextRow = rc.w < ${wn-1};
                bool hasNextCol = rc.z < ${_n-1};

                // pack x00, x01, x10, x11's top-left corner into one vec4 structure
                vec4 topLeft = vec4(
                    getAValue(batch, depth, x00.x, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);

                // pack x00, x01, x10, x11's top-right corner into one vec4 structure
                vec4 topRight = vec4(
                    getAValue(batch, depth, x00.x, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);

                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure
                vec4 bottomLeft = vec4(
                    getAValue(batch, depth, x00.z, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);

                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure
                vec4 bottomRight = vec4(
                    getAValue(batch, depth, x00.z, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);

                // calculate the interpolation fraction on u and v direction
                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);
                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));

                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);
                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);
                vec4 newValue = mix(top, bottom, clampFrac.xxzz);

                ${xn.output} = vec4(newValue);
            }
        `;return Object.assign(Object.assign({},dn),{output:{dims:yn,type:pn[0].type,textureType:nn.TextureType.packed},hasMain:!0,shaderSource:Fn})},hn=(cn,pn)=>{const mn=cn[0].dims;let xn,gn=pn.scales;if(gn.length===0){const bn=cn[pn.scalesInputIdx];if(bn&&bn.size!==0){if(cn[pn.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");gn=an(bn,pn.mode,pn.isResize)}else{const wn=cn[pn.sizesInputIdx];if(!wn||wn.size===0)throw new Error("Either scales or sizes MUST be provided as input.");xn=Array.from(wn.integerData),gn=rn(xn,mn,pn.mode,pn.isResize)}}else if(cn[pn.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");const yn=xn||mn.map((bn,wn)=>Math.floor(bn*gn[wn]));return[gn,yn]},an=(cn,pn,mn)=>{const xn=Array.from(cn.floatData);return(0,un.scalesValidation)(xn,pn,mn),xn},rn=(cn,pn,mn,xn)=>{const gn=pn.length,yn=new Array(gn);for(let bn=0,wn=gn;bn<wn;bn++)if(pn[bn]===0){if(cn[bn]!==0)throw new Error("Input dim is zero but required output dim is non-zero.");yn[bn]=1}else yn[bn]=cn[bn]/pn[bn];return(0,un.scalesValidation)(yn,mn,xn),yn}},8117:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.shape=void 0;const tn=en(9162);e.shape=(sn,on)=>(nn(on),[new tn.Tensor([on[0].dims.length],"int32",void 0,void 0,new Int32Array(on[0].dims))]);const nn=sn=>{if(!sn||sn.length!==1)throw new Error("Shape requires 1 input.")}},2278:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sliceV10=e.parseSliceAttributes=e.slice=void 0;const tn=en(246),nn=en(782),sn=en(2517),on=en(2039),un={name:"Slice",inputNames:["A"],inputTypes:[on.TextureType.unpacked]};e.slice=(rn,cn,pn)=>(fn(cn),[rn.run(Object.assign(Object.assign({},un),{cacheHint:pn.cacheKey,get:()=>dn(rn,cn[0],pn)}),cn)]),e.parseSliceAttributes=rn=>{const cn=rn.attributes.getInts("starts"),pn=rn.attributes.getInts("ends"),mn=rn.attributes.getInts("axes",[]);return(0,tn.createAttributeWithCacheKey)({starts:cn,ends:pn,axes:mn})};const dn=(rn,cn,pn)=>{const mn=pn.axes.length===0?cn.dims.slice(0).map((Tn,An)=>An):pn.axes,xn=sn.ShapeUtil.normalizeAxes(mn,cn.dims.length),gn=pn.starts.map((Tn,An)=>Tn>cn.dims[xn[An]]-1?cn.dims[xn[An]]:sn.ShapeUtil.normalizeAxis(Tn,cn.dims[xn[An]])),yn=pn.ends.map((Tn,An)=>Tn>cn.dims[xn[An]]-1?cn.dims[xn[An]]:sn.ShapeUtil.normalizeAxis(Tn,cn.dims[xn[An]])),bn=cn.dims.slice(),wn=[];for(let Tn=0;Tn<xn.length;Tn++)bn[xn[Tn]]=yn[Tn]-gn[Tn],gn[Tn]>0&&wn.push(`outputIdx[${xn[Tn]}] += ${gn[Tn]};`);const _n=`
      float process(int outputIdx[${bn.length}]) {
        ${wn.join(`
      `)}
        return _A(outputIdx);
      }`;return Object.assign(Object.assign({},un),{output:{dims:bn,type:cn.type,textureType:on.TextureType.unpacked},shaderSource:_n})},fn=rn=>{if(!rn||rn.length!==1)throw new Error("Slice requires 1 input.");if(nn.NUMBER_TYPES.indexOf(rn[0].type)===-1)throw new Error("Invalid input type.")};e.sliceV10=(rn,cn)=>{an(cn);const pn=hn(rn,cn);return[rn.run(Object.assign(Object.assign({},un),{cacheHint:pn.cacheKey,get:()=>dn(rn,cn[0],pn)}),[cn[0]])]};const hn=(rn,cn)=>{if(!rn.session.isInitializer(cn[1].dataId)||!rn.session.isInitializer(cn[2].dataId)||cn.length>=4&&!rn.session.isInitializer(cn[3].dataId)||cn.length>=5&&!rn.session.isInitializer(cn[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(cn.length>=5&&cn[4].integerData.some(gn=>gn!==1))throw new Error("currently non-1 steps is not supported for Slice");const pn=Array.from(cn[1].integerData),mn=Array.from(cn[2].integerData),xn=cn.length>=4?Array.from(cn[3].integerData):[];return{starts:pn,ends:mn,axes:xn,cacheKey:`${xn};${pn};${mn}`}},an=rn=>{if(!rn||rn.length<3||rn.length>5)throw new Error("Invalid input number.");if(rn[1].type!=="int32"||rn[1].dims.length!==1)throw new Error("Invalid input type.");if(rn[2].type!=="int32"||rn[2].dims.length!==1)throw new Error("Invalid input type.");if(rn.length>=4&&(rn[3].type!=="int32"||rn[3].dims.length!==1))throw new Error("Invalid input type.");if(rn.length>=5&&(rn[4].type!=="int32"||rn[4].dims.length!==1))throw new Error("Invalid input type.")}},5524:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.softmaxV13=e.parseSoftmaxAttributesV13=e.parseSoftmaxAttributes=e.softmax=void 0;const tn=en(246),nn=en(2517),sn=en(5060),on=en(2039),un=en(3738),dn={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[on.TextureType.unpacked]},fn={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[on.TextureType.unpacked,on.TextureType.unpacked]},hn={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[on.TextureType.unpacked,on.TextureType.unpacked,on.TextureType.unpacked]};e.softmax=(xn,gn,yn)=>{mn(gn);const bn=gn[0].dims.slice(),wn=nn.ShapeUtil.normalizeAxis(yn.axis,bn.length),_n=nn.ShapeUtil.sizeToDimension(bn,wn),Tn=nn.ShapeUtil.sizeFromDimension(bn,wn);return an(xn,gn,yn,_n,Tn)},e.parseSoftmaxAttributes=xn=>(0,tn.createAttributeWithCacheKey)({axis:xn.attributes.getInt("axis",1)}),e.parseSoftmaxAttributesV13=xn=>(0,tn.createAttributeWithCacheKey)({axis:xn.attributes.getInt("axis",-1)}),e.softmaxV13=(xn,gn,yn)=>{mn(gn);const bn=gn[0].dims.slice(),wn=nn.ShapeUtil.normalizeAxis(yn.axis,bn.length),_n=bn.length,Tn=wn!==_n-1,An=[];let Pn,Sn=[],Cn=[];Tn&&(Sn=Array.from({length:_n}).map((In,Bn)=>Bn),Sn[wn]=_n-1,Sn[_n-1]=wn,Sn.map(In=>An.push(bn[In])),Pn=(0,tn.createAttributeWithCacheKey)({perm:Sn}),Cn=(0,un.transpose)(xn,gn,Pn));const Nn=Tn?nn.ShapeUtil.sizeToDimension(An,_n-1):nn.ShapeUtil.sizeToDimension(bn,_n-1),Mn=Tn?nn.ShapeUtil.sizeFromDimension(An,_n-1):nn.ShapeUtil.sizeFromDimension(bn,_n-1),Fn=an(xn,Tn?Cn:gn,yn,Nn,Mn);return Tn?(0,un.transpose)(xn,Fn,Pn):Fn};const an=(xn,gn,yn,bn,wn)=>{const _n=rn(xn,gn[0],bn,wn,[bn]),Tn=xn.run(Object.assign(Object.assign({},dn),{cacheHint:yn.cacheKey,get:()=>_n}),gn),An=cn(xn,gn[0],bn,wn,_n.output.dims,[bn]),Pn=xn.run(Object.assign(Object.assign({},fn),{cacheHint:yn.cacheKey,get:()=>An}),[gn[0],Tn]),Sn=pn(xn,gn[0],bn,wn,_n.output.dims,An.output.dims);return[xn.run(Object.assign(Object.assign({},hn),{cacheHint:yn.cacheKey,get:()=>Sn}),[gn[0],Tn,Pn])]},rn=(xn,gn,yn,bn,wn)=>{const[_n,Tn]=xn.calculateTextureWidthAndHeight(gn.dims,on.TextureType.unpacked),An=wn.length;if(yn<1||bn<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(wn.length!==1)throw new Error("Dimensionality of the output should be 1");if(wn[0]!==yn)throw new Error("Shape of the output should be equal to logical row count");const Pn=(0,sn.getGlsl)(xn.session.backend.glContext.version),Sn=`
      float process(int[${An}] indices) {
        int logical_row_start_offset = indices[0] * ${bn};

        float max = getColorAsFloat(${Pn.texture2D}(A, offsetToCoords(logical_row_start_offset, ${_n},
        ${Tn} )));
        for(int i=1; i<${bn}; ++i)
        {
          float current = getColorAsFloat(${Pn.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${_n}, ${Tn})));
          if(current > max)
          max = current;
        }

        return max;
      }`;return Object.assign(Object.assign({},dn),{output:{dims:wn,type:gn.type,textureType:on.TextureType.unpacked},shaderSource:Sn})},cn=(xn,gn,yn,bn,wn,_n)=>{const[Tn,An]=xn.calculateTextureWidthAndHeight(gn.dims,on.TextureType.unpacked),Pn=_n.length;if(yn<1||bn<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(_n.length!==1)throw new Error("Dimensionality of the output should be 1");if(_n[0]!==yn)throw new Error("Shape of the output should be equal to logical row count");if(wn.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(wn[0]!==yn)throw new Error("Shape of the intermediate results should be equal to logical row count");const Sn=`
      float process(int[${Pn}] indices) {
        int logical_row_start_offset = indices[0] * ${bn};

        float norm_factor = 0.0;
        float max = _Max(indices);
        for(int i=0; i<${bn}; ++i)
        {
          norm_factor += exp(getColorAsFloat(${(0,sn.getGlsl)(xn.session.backend.glContext.version).texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${Tn}, ${An}))) - max);
        }

        return norm_factor;
      }`;return Object.assign(Object.assign({},fn),{output:{dims:_n,type:gn.type,textureType:on.TextureType.unpacked},shaderSource:Sn})},pn=(xn,gn,yn,bn,wn,_n)=>{const[Tn,An]=xn.calculateTextureWidthAndHeight(gn.dims,on.TextureType.unpacked),Pn=gn.dims.length;if(yn<1||bn<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(wn.length!==1||_n.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(wn[0]!==yn||_n[0]!==yn)throw new Error("Shape of the intermediate results should be equal to logical row count");const Sn=`
      float process(int[${Pn}] indices) {

      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)
      int offset = coordsToOffset(TexCoords, ${Tn}, ${An});

      //determine the logical row for this index
      int logical_row_index[1];
      logical_row_index[0] = offset / ${bn};

      float norm_factor = _Norm(logical_row_index);

      // avoid possible division by 0
      // if norm_facor is 0, all elements are zero
      // if so, return 0
      if(norm_factor == 0.0)
        return 0.0;

      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;
    }`;return Object.assign(Object.assign({},hn),{output:{dims:gn.dims,type:gn.type,textureType:on.TextureType.unpacked},shaderSource:Sn})},mn=xn=>{if(!xn||xn.length!==1)throw new Error("Softmax requires 1 input.");if(xn[0].type!=="float32"&&xn[0].type!=="float64")throw new Error("Invalid input type")}},5975:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseSplitAttributes=e.split=void 0;const tn=en(246),nn=en(2517),sn=en(2039),on={name:"Split",inputNames:["A"],inputTypes:[sn.TextureType.unpacked]};e.split=(hn,an,rn)=>{fn(an);const cn=nn.ShapeUtil.normalizeAxis(rn.axis,an[0].dims.length),pn=un(hn,an,cn,rn),mn=[];for(let xn=0;xn<pn;++xn)mn.push(hn.run(Object.assign(Object.assign({},on),{cacheHint:`${rn.cacheKey};${xn}`,get:()=>dn(hn,an[0],rn,cn,xn)}),an));return mn},e.parseSplitAttributes=hn=>{const an=hn.attributes.getInt("axis",0),rn=hn.attributes.getInts("split",[]),cn=hn.outputs.length;return(0,tn.createAttributeWithCacheKey)({axis:an,split:rn,numOutputs:cn})};const un=(hn,an,rn,cn)=>{const[,pn]=nn.SplitUtil.splitShape(an[0].dims,rn,cn.split,cn.numOutputs);return pn.length},dn=(hn,an,rn,cn,pn)=>{const[mn,xn]=nn.SplitUtil.splitShape(an.dims,cn,rn.split,rn.numOutputs),gn=xn[pn],yn=mn[pn],bn=`
      float process(int indices[${yn.length}]) {
        indices[${cn}] += ${gn};
        return _A(indices);
      }
    `;return Object.assign(Object.assign({},on),{cacheHint:`${rn.cacheKey}:${pn}`,output:{dims:yn,type:an.type,textureType:sn.TextureType.unpacked},shaderSource:bn})},fn=hn=>{if(!hn||hn.length!==1)throw new Error("Split requires one input.");if(hn[0].type!=="int8"&&hn[0].type!=="uint8"&&hn[0].type!=="int16"&&hn[0].type!=="uint16"&&hn[0].type!=="int32"&&hn[0].type!=="uint32"&&hn[0].type!=="float32"&&hn[0].type!=="float64"&&hn[0].type!=="bool")throw new Error("Invalid input type.")}},3933:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseSqueezeAttributes=e.squeezeV13=e.squeeze=void 0;const tn=en(2517);e.squeeze=(on,un,dn)=>{nn(un);const fn=tn.ShapeUtil.squeezeShape(un[0].dims,dn);return[on.reshapeUnpacked(un[0],fn)]},e.squeezeV13=(on,un)=>(sn(un),(0,e.squeeze)(on,[un[0]],Array.from(un[1].integerData))),e.parseSqueezeAttributes=on=>on.attributes.getInts("axes");const nn=on=>{if(!on||on.length!==1)throw new Error("Squeeze requires 1 input.");if(on[0].type==="string")throw new Error("invalid input tensor types.")},sn=on=>{if(!on||on.length!==2)throw new Error("Squeeze requires 2 inputs.");if(on[1].type!=="int32")throw new Error("Invalid input type.")}},6558:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sum=void 0;const tn=en(5060),nn=en(2039);e.sum=(un,dn)=>{on(dn);const fn={name:"Sum",inputNames:dn.map((hn,an)=>`X${an}`),inputTypes:new Array(dn.length).fill(nn.TextureType.unpacked)};return[un.run(Object.assign(Object.assign({},fn),{get:()=>sn(un,dn,fn)}),dn)]};const sn=(un,dn,fn)=>{const hn=(0,tn.getGlsl)(un.session.backend.glContext.version),an=dn[0].dims.slice(),rn=`
      void main() {
        vec4 result = ${dn.map((cn,pn)=>`${hn.texture2D}(X${pn},TexCoords)`).join(" + ")};
        ${hn.output} = result;
      }
    `;return Object.assign(Object.assign({},fn),{output:{dims:an,type:dn[0].type,textureType:nn.TextureType.unpacked},hasMain:!0,shaderSource:rn})},on=un=>{if(!un||un.length===0)throw new Error("Sum requires inputs.");const dn=un[0].dims.length;for(let fn=1;fn<un.length;fn++){if(dn!==un[fn].dims.length)throw new Error("Input shapes are mismatched.");for(let hn=0;hn<dn;hn++)if(un[0].dims[hn]!==un[fn].dims[hn])throw new Error("Input shapes are not matched.")}if(un[0].type!=="float32"&&un[0].type!=="float64")throw new Error("Invalid input type.");for(let fn=1;fn<un.length;fn++)if(un[0].type!==un[fn].type)throw new Error("Input types are not matched.")}},5723:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tile=void 0;const tn=en(782),nn=en(2039);e.tile=(un,dn)=>{on(dn);const fn={name:"Tile",inputNames:["A"],inputTypes:[nn.TextureType.unpacked]};return[un.run(Object.assign(Object.assign({},fn),{get:()=>sn(un,dn,fn)}),dn)]};const sn=(un,dn,fn)=>{const hn=dn[0].dims.slice(),an=new Array(hn.length),rn=[];for(let mn=0;mn<hn.length;mn++)an[mn]=hn[mn]*dn[1].numberData[mn],rn.push(`inputIdx[${mn}] = int(mod(float(outputIdx[${mn}]), ${hn[mn]}.));`);const cn=an.length,pn=`
      float process(int outputIdx[${cn}]) {
        int inputIdx[${cn}];
        ${rn.join(`
`)}
        return _A(inputIdx);
      }
    `;return Object.assign(Object.assign({},fn),{output:{dims:an,type:dn[0].type,textureType:nn.TextureType.unpacked},shaderSource:pn})},on=un=>{if(!un||un.length!==2)throw new Error("Tile requires 2 input.");if(un[1].dims.length!==1)throw new Error("The second input shape must 1 dimension.");if(un[1].dims[0]!==un[0].dims.length)throw new Error("Invalid input shape.");if(tn.NUMBER_TYPES.indexOf(un[0].type)===-1)throw new Error("Invalid input type.");if(un[1].type!=="int32"&&un[1].type!=="int16")throw new Error("Invalid repeat type.")}},3738:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseTransposeAttributes=e.transpose=void 0;const tn=en(246),nn=en(2517),sn=en(2039),on={name:"Transpose",inputNames:["A"],inputTypes:[sn.TextureType.unpacked]};e.transpose=(rn,cn,pn)=>(an(cn),[rn.run(Object.assign(Object.assign({},on),{cacheHint:pn.cacheKey,get:()=>un(rn,cn[0],pn.perm)}),cn)]),e.parseTransposeAttributes=rn=>(0,tn.createAttributeWithCacheKey)({perm:rn.attributes.getInts("perm",[])});const un=(rn,cn,pn)=>{const mn=cn.dims;pn=dn(mn,pn);const xn=fn(mn,pn),gn=mn.length,yn=`
      ${hn("perm",pn,gn)}
      float process(int indices[${gn}]) {
        int a[${gn}];
        perm(a, indices);
        return _A(a);
      }`;return Object.assign(Object.assign({},on),{output:{dims:xn,type:cn.type,textureType:sn.TextureType.unpacked},shaderSource:yn})},dn=(rn,cn)=>(cn&&cn.length!==rn.length&&(cn=[...rn.keys()].reverse()),cn),fn=(rn,cn)=>(cn=dn(rn,cn),nn.ShapeUtil.sortBasedOnPerm(rn,cn)),hn=(rn,cn,pn)=>{const mn=[];mn.push(`void ${rn}(out int a[${pn}], int src[${pn}]) {`);for(let xn=0;xn<pn;++xn)mn.push(`	a[${cn[xn]}]=src[${xn}];`);return mn.push("	}"),mn.join(`
`)},an=rn=>{if(!rn||rn.length!==1)throw new Error("Transpose requires 1 input.");if(rn[0].type!=="float32"&&rn[0].type!=="float64")throw new Error("input should be float tensor")}},8710:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.encodeAsUint8=void 0;const tn=en(5060),nn=en(2039);e.encodeAsUint8=(sn,on)=>{const un=on.shape,dn=(0,tn.getGlsl)(sn.session.backend.glContext.version),fn=`
    const float FLOAT_MAX = 1.70141184e38;
    const float FLOAT_MIN = 1.17549435e-38;

    bool isNaN(float val) {
      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
    }

    highp vec4 encodeAsUint8(highp float v) {
      if (isNaN(v)) {
        return vec4(255, 255, 255, 255);
      }

      highp float av = abs(v);

      if(av < FLOAT_MIN) {
        return vec4(0.0, 0.0, 0.0, 0.0);
      } else if(v > FLOAT_MAX) {
        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
      } else if(v < -FLOAT_MAX) {
        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
      }

      highp vec4 c = vec4(0,0,0,0);

      highp float e = floor(log2(av));
      highp float m = exp2(fract(log2(av))) - 1.0;

      c[2] = floor(128.0 * m);
      m -= c[2] / 128.0;
      c[1] = floor(32768.0 * m);
      m -= c[1] / 32768.0;
      c[0] = floor(8388608.0 * m);

      highp float ebias = e + 127.0;
      c[3] = floor(ebias / 2.0);
      ebias -= c[3] * 2.0;
      c[2] += floor(ebias) * 128.0;

      c[3] += 128.0 * step(0.0, -v);

      return c / 255.0;
    }

    void main() {
      float value = ${dn.texture2D}(X,TexCoords).r;
      ${dn.output} = encodeAsUint8(value);
    }`,hn={name:"Uint8Encode",inputTypes:[nn.TextureType.unpacked],inputNames:["X"],output:{dims:un,type:on.tensor.type,textureType:nn.TextureType.downloadUint8AsFloat},shaderSource:fn,hasMain:!0};return sn.executeProgram(hn,[on.tensor])}},4909:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tanh=e.tan=e.sqrt=e.sin=e.sigmoid=e.relu=e.not=e.neg=e.log=e.parseLeakyReluAttributes=e.leakyRelu=e.identity=e.floor=e.exp=e.parseEluAttributes=e.elu=e.cos=e.ceil=e.clipV11=e.parseClipAttributes=e.clip=e.atan=e.asin=e.acos=e.abs=e.glslTanh=e.glslTan=e.glslSqrt=e.glslSigmoid=e.glslRelu=e.glslSin=e.glslNot=e.glslNeg=e.glslLog=e.glslLeakyRelu=e.glslIdentity=e.glslClip=e.glslFloor=e.glslExp=e.glslElu=e.glslCos=e.glslCeil=e.glslAtan=e.glslAsin=e.glslAcos=e.glslAbs=void 0;const tn=en(246),nn=en(2517),sn=en(8520),on=en(5060),un=en(2039);function dn(){return Fn("abs")}function fn(){return Fn("acos")}function hn(){return Fn("asin")}function an(){return Fn("atan")}function rn(){return Fn("ceil")}function cn(){return Fn("cos")}function pn(Ln){const qn="elu";return{body:`
  const float alpha = float(${Ln});

  float ${qn}_(float a) {
    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;
  }
  vec4 ${qn}_(vec4 v) {
    return vec4(${qn}_(v.x), ${qn}_(v.y), ${qn}_(v.z), ${qn}_(v.w));
  }
  `,name:qn,type:sn.FunctionType.ValueBased}}function mn(){return Fn("exp")}function xn(){return Fn("floor")}function gn(Ln,qn){const Yn="clip";return{body:`
  const float min = float(${Ln});
  const float max = float(${qn});

  float ${Yn}_(float a) {
    return clamp(a, min, max);
  }
  vec4 ${Yn}_(vec4 v) {
    return clamp(v, min, max);
  }
  `,name:Yn,type:sn.FunctionType.ValueBased}}function yn(){const Ln="indentity";return{body:`
  float ${Ln}_(float a) {
    return a;
  }
  vec4 ${Ln}_(vec4 v) {
    return v;
  }
  `,name:Ln,type:sn.FunctionType.ValueBased}}function bn(Ln){const qn="leakyRelu";return{body:`
  const float alpha = float(${Ln});

  float ${qn}_(float a) {
    return a < 0.0 ? a * alpha : a;
  }
  vec4 ${qn}_(vec4 v) {
    return vec4(${qn}_(v.x), ${qn}_(v.y), ${qn}_(v.z), ${qn}_(v.w));
  }
  `,name:qn,type:sn.FunctionType.ValueBased}}function wn(){return Fn("log")}function _n(){const Ln="neg";return{body:`
  float ${Ln}_(float a) {
    return -a;
  }
  vec4 ${Ln}_(vec4 v) {
    return -v;
  }
  `,name:Ln,type:sn.FunctionType.ValueBased}}function Tn(){const Ln="not";return{body:`
  float ${Ln}_(float a) {
    return float( ! bool(a) );
  }
  bool ${Ln}_(bool a) {
    return !a;
  }
  vec4 ${Ln}_(vec4 v) {
    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));
  }
  bvec4 ${Ln}_(bvec4 v) {
    return bvec4(!v.x, !v.y, !v.z, !v.w);
  }
  `,name:Ln,type:sn.FunctionType.ValueBased}}function An(){return Fn("sin")}function Pn(){const Ln="relu";return{body:`
  float ${Ln}_(float a) {
    return max( a, 0.0 );
  }
  vec4 ${Ln}_(vec4 v) {
    return max( v, 0.0 );
  }
  `,name:Ln,type:sn.FunctionType.ValueBased}}function Sn(){const Ln="sigmoid";return{body:`
  float ${Ln}_(float a) {
    return 1.0 / (1.0 + exp(-a));
  }
  vec4 ${Ln}_(vec4 v) {
    return 1.0 / (1.0 + exp(-v));
  }
  `,name:Ln,type:sn.FunctionType.ValueBased}}function Cn(){return Fn("sqrt")}function Nn(){return Fn("tan")}function Mn(){const Ln="tanh";return{body:`
  float ${Ln}_(float a) {
    a = clamp(a, -10., 10.);
    a = exp(2.*a);
    return (a - 1.) / (a + 1.);
  }
  vec4 ${Ln}_(vec4 v) {
    v = clamp(v, -10., 10.);
    v = exp(2.*v);
    return (v - 1.) / (v + 1.);
  }
  `,name:Ln,type:sn.FunctionType.ValueBased}}function Fn(Ln){return{body:`
  float ${Ln}_(float a) {
    return ${Ln}(a);
  }
  vec4 ${Ln}_(vec4 v) {
    return ${Ln}(v);
  }
  `,name:Ln,type:sn.FunctionType.ValueBased}}e.glslAbs=dn,e.glslAcos=fn,e.glslAsin=hn,e.glslAtan=an,e.glslCeil=rn,e.glslCos=cn,e.glslElu=pn,e.glslExp=mn,e.glslFloor=xn,e.glslClip=gn,e.glslIdentity=yn,e.glslLeakyRelu=bn,e.glslLog=wn,e.glslNeg=_n,e.glslNot=Tn,e.glslSin=An,e.glslRelu=Pn,e.glslSigmoid=Sn,e.glslSqrt=Cn,e.glslTan=Nn,e.glslTanh=Mn;const In=(Ln,qn,Yn,Qn)=>{const zn=Ln.session.pack?un.TextureType.packed:un.TextureType.unpacked,lr={name:Yn.name,inputTypes:[zn],inputNames:["A"],cacheHint:Qn};return Object.assign(Object.assign({},lr),{get:()=>(($n,On,er,sr)=>{const ar=$n.session.pack?un.TextureType.packed:un.TextureType.unpacked,cr=(0,on.getGlsl)($n.session.backend.glContext.version);return Object.assign(Object.assign({},On),{output:{dims:er.dims,type:er.type,textureType:ar},shaderSource:`
     ${sr.body}
     void main() {
       vec4 v = ${cr.texture2D}(A, TexCoords);
       v = ${sr.name}_(v);
       ${cr.output} = v;
     }
     `,hasMain:!0})})(Ln,lr,qn,Yn)})};e.abs=(Ln,qn)=>[Ln.run(In(Ln,qn[0],dn()),qn)],e.acos=(Ln,qn)=>[Ln.run(In(Ln,qn[0],fn()),qn)],e.asin=(Ln,qn)=>[Ln.run(In(Ln,qn[0],hn()),qn)],e.atan=(Ln,qn)=>[Ln.run(In(Ln,qn[0],an()),qn)],e.clip=(Ln,qn,Yn)=>[Ln.run(In(Ln,qn[0],gn(Yn.min,Yn.max),Yn.cacheKey),qn)],e.parseClipAttributes=Ln=>(0,tn.createAttributeWithCacheKey)({min:Ln.attributes.getFloat("min",nn.MIN_CLIP),max:Ln.attributes.getFloat("max",nn.MAX_CLIP)}),e.clipV11=(Ln,qn)=>{const Yn=Bn(Ln,qn);return(0,e.clip)(Ln,[qn[0]],Yn)};const Bn=(Ln,qn)=>{if(qn.length>=3&&(!Ln.session.isInitializer(qn[1].dataId)||!Ln.session.isInitializer(qn[2].dataId)))throw new Error("dynamic clip attributes are not allowed");const Yn=qn.length>=3?qn[1].numberData[0]:nn.MIN_CLIP,Qn=qn.length>=3?qn[2].numberData[0]:nn.MAX_CLIP;return(0,tn.createAttributeWithCacheKey)({min:Yn,max:Qn})};e.ceil=(Ln,qn)=>[Ln.run(In(Ln,qn[0],rn()),qn)],e.cos=(Ln,qn)=>[Ln.run(In(Ln,qn[0],cn()),qn)],e.elu=(Ln,qn,Yn)=>[Ln.run(In(Ln,qn[0],pn(Yn.alpha),Yn.cacheKey),qn)],e.parseEluAttributes=Ln=>(0,tn.createAttributeWithCacheKey)({alpha:Ln.attributes.getFloat("alpha",1)}),e.exp=(Ln,qn)=>[Ln.run(In(Ln,qn[0],mn()),qn)],e.floor=(Ln,qn)=>[Ln.run(In(Ln,qn[0],xn()),qn)],e.identity=(Ln,qn)=>[Ln.run(In(Ln,qn[0],yn()),qn)],e.leakyRelu=(Ln,qn,Yn)=>[Ln.run(In(Ln,qn[0],bn(Yn.alpha),Yn.cacheKey),qn)],e.parseLeakyReluAttributes=Ln=>(0,tn.createAttributeWithCacheKey)({alpha:Ln.attributes.getFloat("alpha",.01)}),e.log=(Ln,qn)=>[Ln.run(In(Ln,qn[0],wn()),qn)],e.neg=(Ln,qn)=>[Ln.run(In(Ln,qn[0],_n()),qn)],e.not=(Ln,qn)=>[Ln.run(In(Ln,qn[0],Tn()),qn)],e.relu=(Ln,qn)=>[Ln.run(In(Ln,qn[0],Pn()),qn)],e.sigmoid=(Ln,qn)=>[Ln.run(In(Ln,qn[0],Sn()),qn)],e.sin=(Ln,qn)=>[Ln.run(In(Ln,qn[0],An()),qn)],e.sqrt=(Ln,qn)=>[Ln.run(In(Ln,qn[0],Cn()),qn)],e.tan=(Ln,qn)=>[Ln.run(In(Ln,qn[0],Nn()),qn)],e.tanh=(Ln,qn)=>[Ln.run(In(Ln,qn[0],Mn()),qn)]},5611:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createUnpackProgramInfoLoader=e.createUnpackProgramInfo=void 0;const tn=en(5060),nn=en(2039),sn=en(9390),on=en(2827),un={name:"unpack",inputNames:["A"],inputTypes:[nn.TextureType.packed]};e.createUnpackProgramInfo=(dn,fn)=>{const hn=fn.dims.length,an=(0,on.getChannels)("rc",hn),rn=an.slice(-2),cn=(0,sn.getCoordsDataType)(hn),pn=(0,on.unpackFromChannel)(),mn=fn.dims.length===0?"":function(yn,bn){if(yn===1)return"rc";let wn="";for(let _n=0;_n<yn;_n++)wn+=bn[_n],_n<yn-1&&(wn+=",");return wn}(hn,an),xn=hn<=1?"rc":`vec2(${rn.join(",")})`,gn=`
    ${pn}
    void main() {
      ${cn} rc = getOutputCoords();

       // Sample the texture with the coords to get the rgba channel value.
       vec4 packedInput = getA(${mn});

       ${(0,tn.getGlsl)(dn.session.backend.glContext.version).output} = vec4(getChannel(packedInput, ${xn}), 0, 0, 0);
     }
   `;return Object.assign(Object.assign({},un),{hasMain:!0,output:{dims:fn.dims,type:fn.type,textureType:nn.TextureType.unpacked},shaderSource:gn})},e.createUnpackProgramInfoLoader=(dn,fn)=>Object.assign(Object.assign({},un),{get:()=>(0,e.createUnpackProgramInfo)(dn,fn)})},8428:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseUnsqueezeAttributes=e.unsqueezeV13=e.unsqueeze=void 0;const tn=en(2517);e.unsqueeze=(on,un,dn)=>{nn(un);const fn=tn.ShapeUtil.unsqueezeShape(un[0].dims,dn);return[on.reshapeUnpacked(un[0],fn)]},e.unsqueezeV13=(on,un)=>(sn(un),(0,e.unsqueeze)(on,[un[0]],Array.from(un[1].integerData))),e.parseUnsqueezeAttributes=on=>on.attributes.getInts("axes");const nn=on=>{if(!on||on.length!==1)throw new Error("Unsqueeze requires 1 input.");if(on[0].type==="string")throw new Error("invalid input tensor types.")},sn=on=>{if(!on||on.length!==2)throw new Error("Unsqueeze requires 2 inputs.");if(on[1].type!=="int32")throw new Error("Invalid input type.")}},9793:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scalesValidation=e.validateInputs=e.parseUpsampleAttributes=e.parseUpsampleAttributesV9=e.parseUpsampleAttributesV7=e.upsample=void 0;const tn=en(246),nn=en(5060),sn=en(2039),on={name:"Upsample",inputNames:["X"],inputTypes:[sn.TextureType.unpacked]};e.upsample=(dn,fn,hn)=>((0,e.validateInputs)(fn,hn),[dn.run(Object.assign(Object.assign({},on),{cacheHint:hn.cacheKey,get:()=>un(dn,fn,hn)}),fn)]),e.parseUpsampleAttributesV7=dn=>(0,e.parseUpsampleAttributes)(dn,7),e.parseUpsampleAttributesV9=dn=>(0,e.parseUpsampleAttributes)(dn,9),e.parseUpsampleAttributes=(dn,fn)=>{const hn=fn>=10,an=dn.attributes.getString("mode","nearest");if(an!=="nearest"&&an!=="linear"&&(fn<11||an!=="cubic"))throw new Error(`unrecognized mode: ${an}`);let rn=[];fn<9&&(rn=dn.attributes.getFloats("scales"),(0,e.scalesValidation)(rn,an,hn));const cn=dn.attributes.getFloat("extrapolation_value",0),pn=fn>10?dn.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(pn)===-1)throw new Error(`coordinate_transform_mode '${pn}' is not supported`);const mn=pn==="tf_crop_and_resize",xn=mn,gn=an==="nearest"&&fn>=11?dn.attributes.getString("nearest_mode","round_prefer_floor"):"";if(["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(gn)===-1)throw new Error(`nearest_mode '${gn}' is not supported`);const yn=dn.attributes.getFloat("cubic_coeff_a",-.75),bn=dn.attributes.getInt("exclude_outside",0)!==0;if(bn&&an!=="cubic")throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");const wn=fn<11||an==="nearest"&&pn==="asymmetric"&&gn==="floor";let _n=0,Tn=0,An=0;return fn>10?dn.inputs.length>2?(_n=1,Tn=2,An=3):(Tn=1,An=2):fn===9&&(Tn=1),(0,tn.createAttributeWithCacheKey)({opset:fn,isResize:hn,mode:an,scales:rn,extrapolationValue:cn,coordinateTransformMode:pn,useExtrapolation:xn,needRoiInput:mn,nearestMode:gn,cubicCoefficientA:yn,excludeOutside:bn,useNearest2xOptimization:wn,roiInputIdx:_n,scalesInputIdx:Tn,sizesInputIdx:An})};const un=(dn,fn,hn)=>{const an=(0,nn.getGlsl)(dn.session.backend.glContext.version),[rn,cn]=dn.calculateTextureWidthAndHeight(fn[0].dims,sn.TextureType.unpacked),pn=fn[0].dims.map((An,Pn)=>Math.floor(An*hn.scales[Pn])),[mn,xn]=dn.calculateTextureWidthAndHeight(pn,sn.TextureType.unpacked),gn=pn.length,yn=new Array(gn),bn=new Array(gn);let wn=`
      int output_pitches[${gn}];
      int input_pitches[${gn}];
      `;for(let An=gn-1;An>=0;An--)yn[An]=An===gn-1?1:yn[An+1]*pn[An+1],bn[An]=An===gn-1?1:bn[An+1]*fn[0].dims[An+1],wn+=`
        output_pitches[${An}] = ${yn[An]};
        input_pitches[${An}] = ${bn[An]};
        `;const _n=`
      float getInputFloat(int index) {
        vec2 coords = offsetToCoords(index, ${rn}, ${cn});
        float value = getColorAsFloat(${an.texture2D}(X, coords));
        return value;
      }
      `,Tn=hn.mode==="nearest"?`
    ${_n}
    float process(int indices[${gn}]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${mn}, ${xn});

      ${wn}

      int d, m;
      for (int dim = 0; dim < ${gn}; ++dim) {
        d = output_index / output_pitches[dim];
        m = output_index - d * output_pitches[dim];
        output_index = m;

        if (scales[dim] != 1 && d > 0) {
          int d2 = d / scales[dim];
          m = d - d2 * scales[dim];
          d = d2;
        }
        input_index += input_pitches[dim] * d;
      }

      return getInputFloat(input_index);
    }`:gn===4?`
    ${_n}
    float process(int indices[4]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${mn}, ${xn});

      ${wn}

      int m;
      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m / output_pitches[1];
      m = m - index_of_dim1 * output_pitches[1];
      index_of_dim2 = m / output_pitches[2];
      m = m - index_of_dim2 * output_pitches[2];
      index_of_dim3 = m;

      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;
      index_of_input_dim2 = index_of_dim2 / scales[2];
      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];
      index_of_input_dim3 = index_of_dim3 / scales[3];
      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];

      input_index = index_of_dim0 * input_pitches[0] +
            index_of_dim1 * input_pitches[1] +
            index_of_input_dim2 * input_pitches[2] +
            index_of_input_dim3;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim2 = false;
      if (index_of_input_dim2 == (${fn[0].dims[2]} - 1)) {
        // It's the end in dimension 2
        x01 = x00;
        end_of_dim2 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[2]);
      }

      if (index_of_input_dim3 == (input_pitches[2] - 1)) {
        // It's the end in dimension 3
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);
    }`:`
    ${_n}
    float process(int indices[2]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${mn}, ${xn});

      ${wn}

      int m;
      int index_of_dim0, index_of_dim1;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m;

      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;
      index_of_input_dim0 = index_of_dim0 / scales[0];
      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];
      index_of_input_dim1 = index_of_dim1 / scales[1];
      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];

      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim0 = false;
      if (index_of_input_dim0 == (${fn[0].dims[0]} - 1)) {
        // It's the end in dimension 0
        x01 = x00;
        end_of_dim0 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[0]);
      }

      if (index_of_input_dim1 == (input_pitches[0] - 1)) {
        // It's the end in dimension 1
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);
    }`;return Object.assign(Object.assign({},on),{output:{dims:pn,type:fn[0].type,textureType:sn.TextureType.unpacked},shaderSource:Tn,variables:[{name:"scales",type:"int",arrayLength:hn.scales.length,data:hn.scales.map(An=>Math.ceil(An))}]})};e.validateInputs=(dn,fn)=>{if(!dn||fn.opset<9&&dn.length!==1||fn.opset>=9&&fn.opset<11&&dn.length!==2||fn.opset>=11&&dn.length<2)throw new Error("invalid inputs.");if(fn.scales.length>0&&dn[0].dims.length!==fn.scales.length)throw new Error("Invalid input shape.");if(dn[0].type==="string")throw new Error("Invalid input tensor types.")},e.scalesValidation=(dn,fn,hn)=>{if(hn){for(const an of dn)if(an<=0)throw new Error("Scale value should be greater than 0.")}else for(const an of dn)if(an<1)throw new Error("Scale value should be greater than or equal to 1.");if(!(fn!=="linear"&&fn!=="cubic"||dn.length===2||dn.length===4&&dn[0]===1&&dn[1]===1))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${hn?"Resize":"Upsample"} opeartor.`)}},1958:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ProgramManager=void 0;const tn=en(1670),nn=en(6231),sn=en(8879),on=en(5060);e.ProgramManager=class{constructor(un,dn,fn){this.profiler=un,this.glContext=dn,this.textureLayoutStrategy=fn,this.repo=new Map,this.attributesBound=!1}getArtifact(un){return this.repo.get(un)}setArtifact(un,dn){this.repo.set(un,dn)}run(un,dn,fn){var hn;this.profiler.event("op",`ProgramManager.run ${(hn=un.programInfo.name)!==null&&hn!==void 0?hn:"unknown kernel"}`,()=>{var an;const rn=this.glContext.gl,cn=un.program;rn.useProgram(cn);try{this.bindOutput(fn),this.attributesBound||this.bindAttributes(un.attribLocations),this.bindUniforms(un.uniformLocations,(an=un.programInfo.variables)!==null&&an!==void 0?an:[],dn)}catch(pn){throw nn.Logger.error("ProgramManager",un.programInfo.shaderSource),pn}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(un=>this.glContext.deleteProgram(un.program))}build(un,dn,fn){return this.profiler.event("backend","ProgramManager.build",()=>{const hn=new sn.GlslPreprocessor(this.glContext,un,dn,fn),an=hn.preprocess(),rn=this.compile(an);return{programInfo:un,program:rn,uniformLocations:this.getUniformLocations(rn,hn.context.programInfo.inputNames,hn.context.programInfo.variables),attribLocations:this.getAttribLocations(rn)}})}compile(un){if(!this.vertexShader){nn.Logger.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");const hn=(0,on.getVertexShaderSource)(this.glContext.version);this.vertexShader=this.glContext.compileShader(hn,this.glContext.gl.VERTEX_SHADER)}tn.env.debug&&nn.Logger.verbose("ProrgramManager",`FragShader:
${un}
`);const dn=this.glContext.compileShader(un,this.glContext.gl.FRAGMENT_SHADER),fn=this.glContext.createProgram(this.vertexShader,dn);return this.glContext.deleteShader(dn),fn}bindOutput(un){const dn=un.width,fn=un.height;nn.Logger.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${dn}/${fn}, shape=${un.shape}, type=${un.tensor.type}`),this.glContext.attachFramebuffer(un.texture,dn,fn)}bindAttributes(un){const dn=un.position,fn=un.textureCoord;this.glContext.setVertexAttributes(dn,fn),this.attributesBound=!0}bindUniforms(un,dn,fn){var hn;const an=this.glContext.gl;let rn=0;for(const{name:cn,type:pn,location:mn,arrayLength:xn}of un){const gn=(hn=dn.find(yn=>yn.name===cn))===null||hn===void 0?void 0:hn.data;if(pn!=="sampler2D"&&!gn)throw new Error(`variable '${cn}' does not have data defined in program info`);switch(pn){case"sampler2D":this.bindTexture(fn[rn],mn,rn),rn++;break;case"float":xn?an.uniform1fv(mn,gn):an.uniform1f(mn,gn);break;case"int":xn?an.uniform1iv(mn,gn):an.uniform1i(mn,gn);break;default:throw new Error(`Uniform not implemented: ${pn}`)}}}bindTexture(un,dn,fn){this.glContext.bindTextureToUniform(un.texture,fn,dn)}getAttribLocations(un){return{position:this.getAttribLocation(un,"position"),textureCoord:this.getAttribLocation(un,"textureCoord")}}getUniformLocations(un,dn,fn){const hn=[];if(dn)for(const an of dn)hn.push({name:an,type:"sampler2D",location:this.getUniformLocation(un,an)});if(fn)for(const an of fn)hn.push(Object.assign(Object.assign({},an),{location:this.getUniformLocation(un,an.name)}));return hn}getUniformLocation(un,dn){const fn=this.glContext.gl.getUniformLocation(un,dn);if(fn===null)throw new Error(`Uniform ${dn} not found.`);return fn}getAttribLocation(un,dn){return this.glContext.gl.getAttribLocation(un,dn)}}},6416:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLSessionHandler=void 0;const tn=en(6231),nn=en(1047),sn=en(8316),on=en(1640),un=en(1958),dn=en(7859),fn=en(5702);e.WebGLSessionHandler=class{constructor(hn,an){this.backend=hn,this.context=an,this.layoutStrategy=new dn.PreferLogicalStrategy(hn.glContext.maxTextureSize),this.programManager=new un.ProgramManager(this.context.profiler,hn.glContext,this.layoutStrategy),this.textureManager=new fn.TextureManager(hn.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:hn.textureCacheMode==="full"}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=hn.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new sn.WebGLInferenceHandler(this)}onGraphInitialized(hn){const an=hn.getValues().filter(rn=>rn.from===-1&&rn.tensor).map(rn=>rn.tensor.dataId);this.initializers=new Set(an)}isInitializer(hn){return!!this.initializers&&this.initializers.has(hn)}addInitializer(hn){this.initializers.add(hn)}getTextureData(hn,an){return an?this.packedTextureDataCache.get(hn):this.unpackedTextureDataCache.get(hn)}setTextureData(hn,an,rn=!1){tn.Logger.verbose("WebGLSessionHandler","Storing Texture data in cache"),rn?this.packedTextureDataCache.set(hn,an):this.unpackedTextureDataCache.set(hn,an)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(hn=>this.textureManager.releaseTexture(hn,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(hn=>this.textureManager.releaseTexture(hn,!0)),this.unpackedTextureDataCache=new Map}resolve(hn,an,rn){const cn=(0,nn.resolveOperator)(hn,an,on.WEBGL_OP_RESOLVE_RULES);return{impl:cn.opImpl,context:cn.opInit?cn.opInit(hn,rn):hn}}}},7769:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Uint8DataEncoder=e.RGBAFloatDataEncoder=e.RedFloat32DataEncoder=void 0;const tn=en(6231);e.RedFloat32DataEncoder=class{constructor(nn,sn=1){if(sn===1)this.internalFormat=nn.R32F,this.format=nn.RED,this.textureType=nn.FLOAT,this.channelSize=sn;else{if(sn!==4)throw new Error(`Invalid number of channels: ${sn}`);this.internalFormat=nn.RGBA32F,this.format=nn.RGBA,this.textureType=nn.FLOAT,this.channelSize=sn}}encode(nn,sn){let on,un;return nn.constructor!==Float32Array&&(tn.Logger.warning("Encoder","data was not of type Float32; creating new Float32Array"),un=new Float32Array(nn)),sn*this.channelSize>nn.length?(tn.Logger.warning("Encoder","Source data too small. Allocating larger array"),un=nn,on=this.allocate(sn*this.channelSize),un.forEach((dn,fn)=>on[fn]=dn)):(un=nn,on=un),on}allocate(nn){return new Float32Array(4*nn)}decode(nn,sn){return this.channelSize===1?nn.filter((on,un)=>un%4==0).subarray(0,sn):nn.subarray(0,sn)}},e.RGBAFloatDataEncoder=class{constructor(nn,sn=1,on){if(sn!==1&&sn!==4)throw new Error(`Invalid number of channels: ${sn}`);this.internalFormat=nn.RGBA,this.format=nn.RGBA,this.channelSize=sn,this.textureType=on||nn.FLOAT}encode(nn,sn){let on=nn;return this.channelSize===1&&(tn.Logger.verbose("Encoder","Exploding into a larger array"),on=this.allocate(sn),nn.forEach((un,dn)=>on[4*dn]=un)),on}allocate(nn){return new Float32Array(4*nn)}decode(nn,sn){return this.channelSize===1?nn.filter((on,un)=>un%4==0).subarray(0,sn):nn.subarray(0,sn)}},e.Uint8DataEncoder=class{constructor(nn,sn=1){if(this.channelSize=4,sn===1)this.internalFormat=nn.ALPHA,this.format=nn.ALPHA,this.textureType=nn.UNSIGNED_BYTE,this.channelSize=sn;else{if(sn!==4)throw new Error(`Invalid number of channels: ${sn}`);this.internalFormat=nn.RGBA,this.format=nn.RGBA,this.textureType=nn.UNSIGNED_BYTE,this.channelSize=sn}}encode(nn,sn){return new Uint8Array(nn.buffer,nn.byteOffset,nn.byteLength)}allocate(nn){return new Uint8Array(nn*this.channelSize)}decode(nn,sn){if(nn instanceof Uint8Array)return nn.subarray(0,sn);throw new Error(`Invalid array type: ${nn.constructor}`)}}},7859:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getBatchDim=e.sizeToSquarishShape=e.getRowsCols=e.sizeFromShape=e.isInt=e.parseAxisParam=e.squeezeShape=e.PreferLogicalStrategy=e.AlwaysKeepOriginalSizeStrategy=void 0;const tn=en(6231),nn=en(2517);function sn(hn,an){const rn=[],cn=[],pn=an!=null&&Array.isArray(an)&&an.length===0,mn=an==null||pn?null:on(an,hn).sort();let xn=0;for(let gn=0;gn<hn.length;++gn){if(mn!=null){if(mn[xn]===gn&&hn[gn]!==1)throw new Error(`Can't squeeze axis ${gn} since its dim '${hn[gn]}' is not 1`);(mn[xn]==null||mn[xn]>gn)&&hn[gn]===1&&(rn.push(hn[gn]),cn.push(gn)),mn[xn]<=gn&&xn++}hn[gn]!==1&&(rn.push(hn[gn]),cn.push(gn))}return{newShape:rn,keptDims:cn}}function on(hn,an){const rn=an.length;return hn=hn==null?an.map((cn,pn)=>pn):[].concat(hn),(0,nn.assert)(hn.every(cn=>cn>=-rn&&cn<rn),()=>`All values in axis param must be in range [-${rn}, ${rn}) but got axis ${hn}`),(0,nn.assert)(hn.every(un),()=>`All values in axis param must be integers but got axis ${hn}`),hn.map(cn=>cn<0?rn+cn:cn)}function un(hn){return hn%1==0}function dn(hn){if(hn.length===0)return 1;let an=hn[0];for(let rn=1;rn<hn.length;rn++)an*=hn[rn];return an}function fn(hn){const an=Math.ceil(Math.sqrt(hn));return[an,Math.ceil(hn/an)]}e.AlwaysKeepOriginalSizeStrategy=class{constructor(hn){this.maxTextureSize=hn}computeTextureWH(hn,an){if(hn.length===0)return[1,1];const rn=this.maxTextureSize;if(an&&an.breakAxis!==void 0){const mn=an.breakAxis>=hn.length?1:hn.slice(an.breakAxis).reduce((gn,yn)=>gn*yn),xn=an.breakAxis<=0?1:hn.slice(0,an.breakAxis).reduce((gn,yn)=>gn*yn);if(!(mn>rn||xn>rn))return[mn,xn];tn.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${hn}, breakAxis:${an.breakAxis}`)}const cn=hn.reduce((mn,xn)=>mn*xn);let pn=Math.floor(Math.sqrt(cn));for(;pn<rn&&pn<cn&&cn%pn!=0;pn++);if(pn>=rn||cn%pn!=0)throw new Error(`The given dimensions are outside this GPU's boundaries: ${hn}`);return[pn,cn/pn]}},e.PreferLogicalStrategy=class{constructor(hn){this.maxTextureSize=hn}computeTextureWH(hn,an){const rn=this.computeTexture(hn,an);return an&&an.isPacked&&(rn[0]/=2,rn[1]/=2),an&&an.reverseWH?[rn[1],rn[0]]:rn}computeTexture(hn,an){const rn=an&&an.isPacked;if(hn.length===0)return rn?[2,2]:[1,1];let cn=this.maxTextureSize;if(an&&an.breakAxis!==void 0){const xn=an.breakAxis>=hn.length?1:hn.slice(an.breakAxis).reduce((yn,bn)=>yn*bn),gn=an.breakAxis<=0?1:hn.slice(0,an.breakAxis).reduce((yn,bn)=>yn*bn);if(!(xn>cn||gn>cn))return[xn,gn];tn.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${hn}, breakAxis:${an.breakAxis}`)}let pn=hn.slice(0);rn&&(cn*=2,pn=pn.map((xn,gn)=>gn>=pn.length-2?pn[gn]%2==0?pn[gn]:pn[gn]+1:pn[gn]),pn.length===1&&(pn=[2,pn[0]])),pn.length!==2&&(pn=sn(pn).newShape);const mn=dn(pn);return pn.length<=1&&mn<=cn?[1,mn]:pn.length===2&&pn[0]<=cn&&pn[1]<=cn?pn:pn.length===3&&pn[0]*pn[1]<=cn&&pn[2]<=cn?[pn[0]*pn[1],pn[2]]:pn.length===3&&pn[0]<=cn&&pn[1]*pn[2]<=cn?[pn[0],pn[1]*pn[2]]:pn.length===4&&pn[0]*pn[1]*pn[2]<=cn&&pn[3]<=cn?[pn[0]*pn[1]*pn[2],pn[3]]:pn.length===4&&pn[0]<=cn&&pn[1]*pn[2]*pn[3]<=cn?[pn[0],pn[1]*pn[2]*pn[3]]:rn?fn(mn/4).map(xn=>2*xn):fn(mn)}},e.squeezeShape=sn,e.parseAxisParam=on,e.isInt=un,e.sizeFromShape=dn,e.getRowsCols=function(hn){if(hn.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[hn.length>1?hn[hn.length-2]:1,hn[hn.length-1]]},e.sizeToSquarishShape=fn,e.getBatchDim=function(hn,an=2){return dn(hn.slice(0,hn.length-an))}},4057:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createTextureLayoutFromShape=e.calculateTextureWidthAndHeight=e.createTextureLayoutFromTextureType=void 0;const tn=en(2517),nn=en(2039);e.createTextureLayoutFromTextureType=(sn,on,un)=>{const dn=un===nn.TextureType.unpacked||un===nn.TextureType.unpackedReversed?1:4,fn=un===nn.TextureType.packed,hn=un===nn.TextureType.unpackedReversed||un===nn.TextureType.packed,an=un===nn.TextureType.packedLastDimension?on.length-1:void 0,rn=un===nn.TextureType.packedLastDimension?on.map((cn,pn)=>pn===on.length-1?4*cn:cn):void 0;return(0,e.createTextureLayoutFromShape)(sn,on,dn,rn,{isPacked:fn,reverseWH:hn,breakAxis:an})},e.calculateTextureWidthAndHeight=(sn,on,un)=>{const dn=(0,e.createTextureLayoutFromTextureType)(sn,on,un);return[dn.width,dn.height]},e.createTextureLayoutFromShape=(sn,on,un=1,dn,fn)=>{const hn=!(!fn||!fn.isPacked),[an,rn]=sn.computeTextureWH(hn&&dn||on,fn),cn=on.length;let pn=on.slice(0);if(cn===0&&(pn=[1]),un===1)dn=on;else if(hn){if(un!==4)throw new Error("a packed texture must be 4-channel");dn=on,cn>0&&(pn[cn-1]=Math.ceil(pn[cn-1]/2)),cn>1&&(pn[cn-2]=Math.ceil(pn[cn-2]/2))}else if(!dn)throw new Error("Unpacked shape is needed when using channels > 1");return{width:an,height:rn,channels:un,isPacked:hn,shape:pn,strides:tn.ShapeUtil.computeStrides(pn),unpackedShape:dn,reversedWH:fn&&fn.reverseWH}}},5702:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextureManager=void 0;const tn=en(6231);e.TextureManager=class{constructor(nn,sn,on,un){this.glContext=nn,this.layoutStrategy=sn,this.profiler=on,this.config=un,this.pendingRead=new Map,un.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(nn,sn,on,un){const dn=this.toEncoderType(nn),fn=this.glContext.getEncoder(dn,sn.channels||1,un);if(sn.isPacked&&un===1)throw new Error("not implemented");const hn=sn.width,an=sn.height;let rn,cn;if(this.config.reuseTextures){rn=`${hn}x${an}_${fn.format}_${fn.internalFormat}_${fn.textureType}`,cn=this.inUseTextures.get(rn),cn||(cn=[],this.inUseTextures.set(rn,cn));const mn=this.idleTextures.get(rn);if(mn&&mn.length>0){const xn=mn.pop();return cn.push(xn),un===1&&this.glContext.updateTexture(xn,hn,an,fn,this.toTextureData(nn,on)),xn}}tn.Logger.verbose("TextureManager",`Creating new texture of size ${sn.width}x${sn.height}`);const pn=this.glContext.allocateTexture(hn,an,fn,this.toTextureData(nn,on));return this.config.reuseTextures&&(cn.push(pn),this.textureLookup.set(pn,rn)),pn}readTexture(nn,sn,on){return on||(on=1),this.profiler.event("backend","TextureManager.readTexture",()=>{const un=nn.shape.reduce((fn,hn)=>fn*hn)*on,dn=this.glContext.readTexture(nn.texture,nn.width,nn.height,un,this.toEncoderType(sn),on);return this.toTensorData(sn,dn)})}async readTextureAsync(nn,sn,on){const un=nn.tensor.dataId;if(on||(on=1),this.pendingRead.has(un)){const dn=this.pendingRead.get(un);return new Promise(fn=>dn==null?void 0:dn.push(fn))}return this.profiler.event("backend","TextureManager.readTextureAsync",async()=>{this.pendingRead.set(un,[]);const dn=nn.shape.reduce((rn,cn)=>rn*cn)*on;await this.glContext.createAndWaitForFence();const fn=this.glContext.readTexture(nn.texture,nn.width,nn.height,dn,this.toEncoderType(sn),on),hn=this.toTensorData(sn,fn),an=this.pendingRead.get(un);return this.pendingRead.delete(un),an==null||an.forEach(rn=>rn(hn)),hn})}readUint8TextureAsFloat(nn){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{const sn=nn.shape.reduce((un,dn)=>un*dn),on=this.glContext.readTexture(nn.texture,nn.width,nn.height,4*sn,"byte",4);return new Float32Array(on.buffer,on.byteOffset,sn)})}releaseTexture(nn,sn){let on;if(this.config.reuseTextures&&(on=this.textureLookup.get(nn.texture),on)){sn&&this.textureLookup.delete(on);const un=this.inUseTextures.get(on);if(un){const dn=un.indexOf(nn.texture);if(dn!==-1){un.splice(dn,1);let fn=this.idleTextures.get(on);fn||(fn=[],this.idleTextures.set(on,fn)),fn.push(nn.texture)}}}on&&!sn||(tn.Logger.verbose("TextureManager",`Deleting texture of size ${nn.width}x${nn.height}`),this.glContext.deleteTexture(nn.texture))}toTensorData(nn,sn){switch(nn){case"int16":return sn instanceof Int16Array?sn:Int16Array.from(sn);case"int32":return sn instanceof Int32Array?sn:Int32Array.from(sn);case"int8":return sn instanceof Int8Array?sn:Int8Array.from(sn);case"uint16":return sn instanceof Uint16Array?sn:Uint16Array.from(sn);case"uint32":return sn instanceof Uint32Array?sn:Uint32Array.from(sn);case"uint8":case"bool":return sn instanceof Uint8Array?sn:Uint8Array.from(sn);case"float32":return sn instanceof Float32Array?sn:Float32Array.from(sn);case"float64":return sn instanceof Float64Array?sn:Float64Array.from(sn);default:throw new Error(`TensorData type ${nn} is not supported`)}}toTextureData(nn,sn){if(sn)return sn instanceof Float32Array?sn:new Float32Array(sn)}toEncoderType(nn){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}},2039:(St,e)=>{var en;Object.defineProperty(e,"__esModule",{value:!0}),e.TextureType=void 0,(en=e.TextureType||(e.TextureType={}))[en.unpacked=0]="unpacked",en[en.unpackedReversed=1]="unpackedReversed",en[en.packed=2]="packed",en[en.downloadUint8AsFloat=3]="downloadUint8AsFloat",en[en.packedLastDimension=4]="packedLastDimension"},9390:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getGlChannels=e.getCoordsDataType=e.getSqueezedParams=e.squeezeInputShape=e.generateShaderFuncNameFromInputSamplerNameAtOutCoords=e.generateShaderFuncNameFromInputSamplerName=e.repeatedTry=e.getPackedShape=void 0;const tn=en(2517);e.getPackedShape=function(nn){const sn=nn.length;return nn.slice(0,sn-1).concat(nn[sn-1]/4)},e.repeatedTry=async function(nn,sn=un=>0,on){return new Promise((un,dn)=>{let fn=0;const hn=()=>{if(nn())return void un();fn++;const an=sn(fn);on!=null&&fn>=on?dn():setTimeout(hn,an)};hn()})},e.generateShaderFuncNameFromInputSamplerName=function(nn){return(0,tn.assert)(nn!==void 0&&nn.length!==0,()=>"empty string found for sampler name"),"get"+nn.charAt(0).toUpperCase()+nn.slice(1)},e.generateShaderFuncNameFromInputSamplerNameAtOutCoords=function(nn){return(0,tn.assert)(nn!==void 0&&nn.length!==0,()=>"empty string found for sampler name"),"get"+nn.charAt(0).toUpperCase()+nn.slice(1)+"AtOutCoords"},e.squeezeInputShape=function(nn,sn){let on=JSON.parse(JSON.stringify(nn));return on=sn,on},e.getSqueezedParams=function(nn,sn){return sn.map(on=>nn[on]).join(", ")},e.getCoordsDataType=function(nn){if(nn<=1)return"int";if(nn===2)return"ivec2";if(nn===3)return"ivec3";if(nn===4)return"ivec4";if(nn===5)return"ivec5";if(nn===6)return"ivec6";throw Error(`GPU for rank ${nn} is not yet supported`)},e.getGlChannels=function(nn=6){return["x","y","z","w","u","v"].slice(0,nn)}},7305:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createNewWebGLContext=e.createWebGLContext=void 0;const tn=en(6231),nn=en(1713),sn={};function on(un){const dn=function(){if(typeof document>"u"){if(typeof OffscreenCanvas>"u")throw new TypeError("failed to create canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}const an=document.createElement("canvas");return an.width=1,an.height=1,an}();let fn;const hn={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1};if((!un||un==="webgl2")&&(fn=dn.getContext("webgl2",hn),fn))try{return new nn.WebGLContext(fn,2)}catch(an){tn.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${an}`)}if((!un||un==="webgl")&&(fn=dn.getContext("webgl",hn)||dn.getContext("experimental-webgl",hn),fn))try{return new nn.WebGLContext(fn,1)}catch(an){tn.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${an}`)}throw new Error("WebGL is not supported")}e.createWebGLContext=function un(dn){let fn;dn&&dn!=="webgl2"||!("webgl2"in sn)?dn&&dn!=="webgl"||!("webgl"in sn)||(fn=sn.webgl):fn=sn.webgl2,fn=fn||on(dn),dn=dn||fn.version===1?"webgl":"webgl2";const hn=fn.gl;return sn[dn]=fn,hn.isContextLost()?(delete sn[dn],un(dn)):(hn.disable(hn.DEPTH_TEST),hn.disable(hn.STENCIL_TEST),hn.disable(hn.BLEND),hn.disable(hn.DITHER),hn.disable(hn.POLYGON_OFFSET_FILL),hn.disable(hn.SAMPLE_COVERAGE),hn.enable(hn.SCISSOR_TEST),hn.enable(hn.CULL_FACE),hn.cullFace(hn.BACK),fn)},e.createNewWebGLContext=on},1713:function(St,e,en){var tn=this&&this.__createBinding||(Object.create?function(hn,an,rn,cn){cn===void 0&&(cn=rn);var pn=Object.getOwnPropertyDescriptor(an,rn);pn&&!("get"in pn?!an.__esModule:pn.writable||pn.configurable)||(pn={enumerable:!0,get:function(){return an[rn]}}),Object.defineProperty(hn,cn,pn)}:function(hn,an,rn,cn){cn===void 0&&(cn=rn),hn[cn]=an[rn]}),nn=this&&this.__setModuleDefault||(Object.create?function(hn,an){Object.defineProperty(hn,"default",{enumerable:!0,value:an})}:function(hn,an){hn.default=an}),sn=this&&this.__importStar||function(hn){if(hn&&hn.__esModule)return hn;var an={};if(hn!=null)for(var rn in hn)rn!=="default"&&Object.prototype.hasOwnProperty.call(hn,rn)&&tn(an,hn,rn);return nn(an,hn),an};Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLContext=e.linearSearchLastTrue=void 0;const on=en(1670),un=sn(en(7769)),dn=en(9390);function fn(hn){let an=0;for(;an<hn.length&&hn[an]();++an);return an-1}e.linearSearchLastTrue=fn,e.WebGLContext=class{constructor(hn,an){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=hn,this.version=an,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(hn,an,rn,cn){const pn=this.gl,mn=pn.createTexture();pn.bindTexture(pn.TEXTURE_2D,mn),pn.texParameteri(pn.TEXTURE_2D,pn.TEXTURE_MIN_FILTER,pn.NEAREST),pn.texParameteri(pn.TEXTURE_2D,pn.TEXTURE_MAG_FILTER,pn.NEAREST),pn.texParameteri(pn.TEXTURE_2D,pn.TEXTURE_WRAP_S,pn.CLAMP_TO_EDGE),pn.texParameteri(pn.TEXTURE_2D,pn.TEXTURE_WRAP_T,pn.CLAMP_TO_EDGE);const xn=cn?rn.encode(cn,hn*an):null;return pn.texImage2D(pn.TEXTURE_2D,0,rn.internalFormat,hn,an,0,rn.format,rn.textureType,xn),this.checkError(),mn}updateTexture(hn,an,rn,cn,pn){const mn=this.gl;mn.bindTexture(mn.TEXTURE_2D,hn);const xn=cn.encode(pn,an*rn);mn.texSubImage2D(mn.TEXTURE_2D,0,0,0,an,rn,cn.format,cn.textureType,xn),this.checkError()}attachFramebuffer(hn,an,rn){const cn=this.gl;cn.bindTexture(cn.TEXTURE_2D,hn),cn.bindFramebuffer(cn.FRAMEBUFFER,this.framebuffer),cn.framebufferTexture2D(cn.FRAMEBUFFER,cn.COLOR_ATTACHMENT0,cn.TEXTURE_2D,hn,0),this.checkError(),cn.viewport(0,0,an,rn),cn.scissor(0,0,an,rn)}readTexture(hn,an,rn,cn,pn,mn){const xn=this.gl;mn||(mn=1),this.frameBufferBound||this.attachFramebuffer(hn,an,rn);const gn=this.getEncoder(pn,mn),yn=gn.allocate(an*rn);return xn.bindTexture(xn.TEXTURE_2D,hn),xn.framebufferTexture2D(xn.FRAMEBUFFER,xn.COLOR_ATTACHMENT0,xn.TEXTURE_2D,hn,0),xn.readPixels(0,0,an,rn,xn.RGBA,gn.textureType,yn),this.checkError(),gn.decode(yn,cn)}isFramebufferReady(){return!0}getActiveTexture(){const hn=this.gl;return"TEXTURE"+(hn.getParameter(this.gl.ACTIVE_TEXTURE)-hn.TEXTURE0)}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(hn,an){const rn=this.gl;rn.vertexAttribPointer(hn,3,rn.FLOAT,!1,20,0),rn.enableVertexAttribArray(hn),an!==-1&&(rn.vertexAttribPointer(an,2,rn.FLOAT,!1,20,12),rn.enableVertexAttribArray(an)),this.checkError()}createProgram(hn,an){const rn=this.gl,cn=rn.createProgram();return rn.attachShader(cn,hn),rn.attachShader(cn,an),rn.linkProgram(cn),cn}compileShader(hn,an){const rn=this.gl,cn=rn.createShader(an);if(!cn)throw new Error(`createShader() returned null with type ${an}`);if(rn.shaderSource(cn,hn),rn.compileShader(cn),rn.getShaderParameter(cn,rn.COMPILE_STATUS)===!1)throw new Error(`Failed to compile shader: ${rn.getShaderInfoLog(cn)}
Shader source:
${hn}`);return cn}deleteShader(hn){this.gl.deleteShader(hn)}bindTextureToUniform(hn,an,rn){const cn=this.gl;cn.activeTexture(cn.TEXTURE0+an),this.checkError(),cn.bindTexture(cn.TEXTURE_2D,hn),this.checkError(),cn.uniform1i(rn,an),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(on.env.debug){const hn=this.gl,an=hn.getError();let rn="";switch(an){case hn.NO_ERROR:return;case hn.INVALID_ENUM:rn="INVALID_ENUM";break;case hn.INVALID_VALUE:rn="INVALID_VALUE";break;case hn.INVALID_OPERATION:rn="INVALID_OPERATION";break;case hn.INVALID_FRAMEBUFFER_OPERATION:rn="INVALID_FRAMEBUFFER_OPERATION";break;case hn.OUT_OF_MEMORY:rn="OUT_OF_MEMORY";break;case hn.CONTEXT_LOST_WEBGL:rn="CONTEXT_LOST_WEBGL";break;default:rn=`Unknown WebGL Error: ${an.toString(16)}`}throw new Error(rn)}}deleteTexture(hn){this.gl.deleteTexture(hn)}deleteProgram(hn){this.gl.deleteProgram(hn)}getEncoder(hn,an,rn=0){if(this.version===2)return new un.RedFloat32DataEncoder(this.gl,an);switch(hn){case"float":return rn===1||this.isRenderFloat32Supported?new un.RGBAFloatDataEncoder(this.gl,an):new un.RGBAFloatDataEncoder(this.gl,an,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new un.Uint8DataEncoder(this.gl,an);default:throw new Error(`Invalid dataType: ${hn}`)}}clearActiveTextures(){const hn=this.gl;for(let an=0;an<this.maxTextureImageUnits;++an)hn.activeTexture(hn.TEXTURE0+an),hn.bindTexture(hn.TEXTURE_2D,null)}dispose(){if(this.disposed)return;const hn=this.gl;hn.bindFramebuffer(hn.FRAMEBUFFER,null),hn.deleteFramebuffer(this.framebuffer),hn.bindBuffer(hn.ARRAY_BUFFER,null),hn.deleteBuffer(this.vertexbuffer),hn.bindBuffer(hn.ELEMENT_ARRAY_BUFFER,null),hn.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){const hn=this.gl,an=hn.createBuffer();if(!an)throw new Error("createBuffer() returned null");const rn=this.createDefaultGeometry();return hn.bindBuffer(hn.ARRAY_BUFFER,an),hn.bufferData(hn.ARRAY_BUFFER,rn,hn.STATIC_DRAW),this.checkError(),an}createFramebuffer(){const hn=this.gl.createFramebuffer();if(!hn)throw new Error("createFramebuffer returned null");return hn}queryVitalParameters(){const hn=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),this.version===1&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=hn.getParameter(hn.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=hn.getParameter(hn.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){this.version===2?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){const hn=this.gl,an=hn.createTexture();hn.bindTexture(hn.TEXTURE_2D,an);const rn=this.version===2?hn.RGBA32F:hn.RGBA;hn.texImage2D(hn.TEXTURE_2D,0,rn,1,1,0,hn.RGBA,hn.FLOAT,null);const cn=hn.createFramebuffer();hn.bindFramebuffer(hn.FRAMEBUFFER,cn),hn.framebufferTexture2D(hn.FRAMEBUFFER,hn.COLOR_ATTACHMENT0,hn.TEXTURE_2D,an,0);const pn=hn.checkFramebufferStatus(hn.FRAMEBUFFER)===hn.FRAMEBUFFER_COMPLETE;return hn.bindTexture(hn.TEXTURE_2D,null),hn.bindFramebuffer(hn.FRAMEBUFFER,null),hn.deleteTexture(an),hn.deleteFramebuffer(cn),pn}checkRenderFloat32(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){const hn=this.gl;let an,rn,cn,pn,mn;try{an=hn.createTexture(),rn=hn.createFramebuffer(),hn.bindTexture(hn.TEXTURE_2D,an);const xn=this.version===2?hn.RGBA32F:hn.RGBA;return hn.texImage2D(hn.TEXTURE_2D,0,xn,1,1,0,hn.RGBA,hn.FLOAT,null),hn.bindFramebuffer(hn.FRAMEBUFFER,rn),hn.framebufferTexture2D(hn.FRAMEBUFFER,hn.COLOR_ATTACHMENT0,hn.TEXTURE_2D,an,0),hn.enable(hn.BLEND),cn=hn.createShader(hn.VERTEX_SHADER),!!cn&&(hn.shaderSource(cn,"void main(){}"),hn.compileShader(cn),pn=hn.createShader(hn.FRAGMENT_SHADER),!!pn&&(hn.shaderSource(pn,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),hn.compileShader(pn),mn=hn.createProgram(),!!mn&&(hn.attachShader(mn,cn),hn.attachShader(mn,pn),hn.linkProgram(mn),hn.useProgram(mn),hn.drawArrays(hn.POINTS,0,1),hn.getError()===hn.NO_ERROR)))}finally{hn.disable(hn.BLEND),mn&&hn.deleteProgram(mn),cn&&hn.deleteShader(cn),pn&&hn.deleteShader(pn),rn&&(hn.bindFramebuffer(hn.FRAMEBUFFER,null),hn.deleteFramebuffer(rn)),an&&(hn.bindTexture(hn.TEXTURE_2D,null),hn.deleteTexture(an))}}beginTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){const hn=this.gl,an=this.disjointTimerQueryWebgl2Extension,rn=hn.createQuery();return hn.beginQuery(an.TIME_ELAPSED_EXT,rn),rn}throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const hn=this.gl,an=this.disjointTimerQueryWebgl2Extension;hn.endQuery(an.TIME_ELAPSED_EXT)}}isTimerResultAvailable(hn){let an=!1,rn=!1;if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const cn=this.gl,pn=this.disjointTimerQueryWebgl2Extension;an=cn.getQueryParameter(hn,cn.QUERY_RESULT_AVAILABLE),rn=cn.getParameter(pn.GPU_DISJOINT_EXT)}return an&&!rn}getTimerResult(hn){let an=0;if(this.version!==2)throw new Error("WebGL1 profiling currently not supported");{const rn=this.gl;an=rn.getQueryParameter(hn,rn.QUERY_RESULT),rn.deleteQuery(hn)}return an/1e6}async waitForQueryAndGetTime(hn){return await(0,dn.repeatedTry)(()=>this.isTimerResultAvailable(hn)),this.getTimerResult(hn)}async createAndWaitForFence(){const hn=this.createFence(this.gl);return this.pollFence(hn)}createFence(hn){let an;const rn=hn,cn=rn.fenceSync(rn.SYNC_GPU_COMMANDS_COMPLETE,0);return hn.flush(),an=cn===null?()=>!0:()=>{const pn=rn.clientWaitSync(cn,0,0);return pn===rn.ALREADY_SIGNALED||pn===rn.CONDITION_SATISFIED},{query:cn,isFencePassed:an}}async pollFence(hn){return new Promise(an=>{this.addItemToPoll(()=>hn.isFencePassed(),()=>an())})}pollItems(){const hn=fn(this.itemsToPoll.map(an=>an.isDoneFn));for(let an=0;an<=hn;++an){const{resolveFn:rn}=this.itemsToPoll[an];rn()}this.itemsToPoll=this.itemsToPoll.slice(hn+1)}async addItemToPoll(hn,an){this.itemsToPoll.push({isDoneFn:hn,resolveFn:an}),this.itemsToPoll.length>1||await(0,dn.repeatedTry)(()=>(this.pollItems(),this.itemsToPoll.length===0))}}},1036:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ExecutionPlan=void 0;const tn=en(6231);class nn{constructor(on,un){this.op=on,this.node=un}}e.ExecutionPlan=class{constructor(sn,on,un){this.graph=sn,this.profiler=un,this.initialize(on)}initialize(sn){this.profiler.event("session","ExecutionPlan.initialize",()=>{const on=this.graph.getNodes();if(on.length!==sn.length)throw new Error("The size of nodes and OPs do not match.");this._ops=sn.map((un,dn)=>new nn(un,on[dn])),this.reset(),this._starter=[],this._ops.forEach((un,dn)=>{let fn=!0;for(const hn of un.node.inputs)if(!this._values[hn]&&this.graph.getInputIndices().indexOf(hn)===-1){fn=!1;break}fn&&this._starter.push(dn)})})}reset(){this._values=this.graph.getValues().map(sn=>sn.tensor)}async execute(sn,on){return this.profiler.event("session","ExecutionPlan.execute",async()=>{this.reset();const un=sn.createInferenceHandler(),dn=this.graph.getInputIndices();if(on.length!==dn.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${on.length} expected: ${dn.length}`);on.forEach((pn,mn)=>{const xn=dn[mn];this._values[xn]=pn});const fn=this._starter.slice(0),hn=this.graph.getValues(),an=this.graph.getNodes();let rn=0;for(;rn<fn.length;){const pn=fn[rn++],mn=this._ops[pn],xn=mn.node.inputs.map(wn=>this._values[wn]);if(xn.indexOf(void 0)!==-1)throw new Error(`unresolved input detected: op: ${mn.node}`);const gn=xn;tn.Logger.verbose("ExecPlan",`Runing op:${mn.node.name} (${gn.map((wn,_n)=>`'${mn.node.inputs[_n]}': ${wn.type}[${wn.dims.join(",")}]`).join(", ")})`);const yn=await this.profiler.event("node",mn.node.name,async()=>mn.op.impl(un,gn,mn.op.context));if(yn.length!==mn.node.outputs.length)throw new Error("the size of output does not match model definition.");yn.forEach((wn,_n)=>{const Tn=mn.node.outputs[_n];if(this._values[Tn])throw new Error(`output [${Tn}] already has value: op:${mn.node.name}`);this._values[Tn]=wn});const bn=new Set;yn.forEach((wn,_n)=>{const Tn=mn.node.outputs[_n];for(const An of hn[Tn].to){const Pn=an[An];let Sn=!0;for(const Cn of Pn.inputs)if(!this._values[Cn]){Sn=!1;break}Sn&&bn.add(An)}}),fn.push(...bn)}const cn=[];for(let pn=0;pn<this.graph.getOutputIndices().length;pn++){const mn=this.graph.getOutputIndices()[pn],xn=this._values[mn];if(xn===void 0)throw new Error(`required output [${mn}] does not have value`);mn===0?await xn.getData():xn.data,cn.push(xn)}return tn.Logger.verbose("ExecPlan","disposing of inferenceHandler"),un.dispose(),cn})}}},7070:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=void 0;const tn=en(1446),nn=en(7778),sn=en(9395),on=en(9162),un=en(2517);var dn=sn.onnxruntime.experimental.fbs;e.Graph={from:(rn,cn)=>new an(rn,cn)};class fn{constructor(cn){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,cn&&(this.type=un.ProtoUtil.tensorValueTypeFromProto(cn.type.tensorType))}get from(){return this._from}get to(){return this._to}}class hn{constructor(cn,pn){cn instanceof tn.onnx.NodeProto?(this.name=cn.name,this.opType=cn.opType,this.attributes=new nn.Attribute(cn.attribute)):cn instanceof dn.Node&&(this.name=pn??cn.name(),this.opType=cn.opType(),this.attributes=new nn.Attribute(un.ProtoUtil.tensorAttributesFromORTFormat(cn))),this.inputs=[],this.outputs=[],this.executeNode=!0}}class an{constructor(cn,pn){if(!cn)throw new TypeError("graph is empty");this.buildGraph(cn),this.transformGraph(pn),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(cn){if(cn instanceof tn.onnx.GraphProto)this.buildGraphFromOnnxFormat(cn);else{if(!(cn instanceof dn.Graph))throw new TypeError("Graph type is not supported.");this.buildGraphFromOrtFormat(cn)}}buildGraphFromOnnxFormat(cn){const pn=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const mn=new Map;if(!cn.input)throw new Error("missing information in graph: input");const xn=[];for(const gn of cn.input){if(pn.has(gn.name))throw new Error(`duplicated input name: ${gn.name}`);const yn=this._allData.push(new fn(gn))-1;pn.set(gn.name,yn),xn.push(gn.name)}if(!cn.initializer)throw new Error("missing information in graph: initializer");for(const gn of cn.initializer){let yn=pn.get(gn.name);if(yn===void 0){const bn=new fn;bn.type={shape:{dims:un.ProtoUtil.tensorDimsFromProto(gn.dims)},tensorType:un.ProtoUtil.tensorDataTypeFromProto(gn.dataType)},yn=this._allData.push(bn)-1,pn.set(gn.name,yn)}this._allData[yn]._from=-1,this._allData[yn].tensor=on.Tensor.fromProto(gn)}for(let gn=0;gn<this._allData.length;gn++)this._allData[gn].tensor||(this._allInputIndices.push(gn),this._allInputNames.push(xn[gn]));if(!cn.output)throw new Error("missing information in graph: output");for(const gn of cn.output){if(pn.has(gn.name))throw new Error(`duplicated output name: ${gn.name}`);const yn=this._allData.push(new fn(gn))-1;pn.set(gn.name,yn),this._allOutputIndices.push(yn),this._allOutputNames.push(gn.name)}if(!cn.node)throw new Error("missing information in graph: node");for(const gn of cn.node){if(!gn.name)for(let bn=0;;bn++){const wn=`unnamed_${gn.opType}_${bn}`;if(!mn.has(wn)){gn.name=wn;break}}if(mn.has(gn.name))throw new Error(`duplicated node name: ${gn.name}`);const yn=this._nodes.push(new hn(gn))-1;mn.set(gn.name,yn)}for(let gn=0;gn<this._nodes.length;gn++){const yn=this._nodes[gn],bn=cn.node[gn];if(!bn.output)throw new Error(`missing output for node: ${bn.name}`);for(const wn of bn.output){let _n=pn.get(wn);if(_n===void 0&&(_n=this._allData.push(new fn)-1,pn.set(wn,_n)),yn.outputs.push(_n),this._allData[_n]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${_n}`);if(this._allData[_n]._from=gn,bn.opType==="Constant"){if(!bn.attribute||bn.attribute.length!==1||!bn.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!bn.output||bn.output.length!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");yn.outputs.pop(),yn.executeNode=!1,this._allData[_n]._from=-1,this._allData[_n].tensor=on.Tensor.fromProto(bn.attribute[0].t)}}}for(let gn=0;gn<this._nodes.length;gn++){const yn=this._nodes[gn],bn=cn.node[gn];if(!bn.input)throw new Error(`missing input for node: ${bn.name}`);for(const wn of bn.input){const _n=pn.get(wn);if(_n===void 0){if(wn===""&&bn.input.length===3&&bn.opType==="Resize")continue;throw new Error(`unrecognized input '${wn}' for node: ${bn.name}`)}yn.inputs.push(_n),this._allData[_n]._to.push(gn)}}return!0}buildGraphFromOrtFormat(cn){var pn,mn,xn;const gn=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const yn=new Map,bn=[];for(let wn=0;wn<cn.inputsLength();wn++){const _n=cn.inputs(wn);if(gn.has(_n))throw new Error(`duplicated input name: ${_n}`);for(let Tn=0;Tn<cn.nodeArgsLength();Tn++)if(((pn=cn.nodeArgs(Tn))===null||pn===void 0?void 0:pn.name())===_n){const An=new fn;if(((xn=(mn=cn.nodeArgs(Tn))===null||mn===void 0?void 0:mn.type())===null||xn===void 0?void 0:xn.valueType())!==dn.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");const Pn=cn.nodeArgs(Tn).type().value(new dn.TensorTypeAndShape),Sn=un.ProtoUtil.tensorDataTypeFromProto(Pn.elemType()),Cn=Pn.shape(),Nn=[];for(let Fn=0;Fn<Cn.dimLength();Fn++)Nn.push(un.LongUtil.longToNumber(Cn.dim(Fn).value().dimValue()));An.type={shape:{dims:Nn},tensorType:Sn};const Mn=this._allData.push(An)-1;gn.set(_n,Mn),bn.push(_n)}}for(let wn=0;wn<cn.initializersLength();wn++){const _n=cn.initializers(wn);let Tn=gn.get(_n.name());if(Tn===void 0){const An=new fn,Pn=un.ProtoUtil.tensorDimsFromORTFormat(_n),Sn=un.ProtoUtil.tensorDataTypeFromProto(_n.dataType());An.type={shape:{dims:Pn},tensorType:Sn},Tn=this._allData.push(An)-1,gn.set(_n.name(),Tn)}this._allData[Tn]._from=-1,this._allData[Tn].tensor=on.Tensor.fromOrtTensor(_n)}for(let wn=0;wn<this._allData.length;wn++)this._allData[wn].tensor||(this._allInputIndices.push(wn),this._allInputNames.push(bn[wn]));for(let wn=0;wn<cn.outputsLength();wn++){const _n=cn.outputs(wn);if(gn.has(_n))throw new Error(`duplicated output name: ${_n}`);const Tn=this._allData.push(new fn)-1;gn.set(_n,Tn),this._allOutputIndices.push(Tn),this._allOutputNames.push(_n)}if(!cn.nodes)throw new Error("missing information in graph: node");for(let wn=0;wn<cn.nodesLength();wn++){const _n=cn.nodes(wn);let Tn=_n.name();if(!Tn)for(let Pn=0;Tn=`unnamed_${_n.opType()}_${Pn}`,yn.has(Tn);Pn++);if(yn.has(Tn))throw new Error(`duplicated node name: ${Tn}`);const An=this._nodes.push(new hn(_n,Tn))-1;yn.set(Tn,An)}for(let wn=0;wn<this._nodes.length;wn++){const _n=this._nodes[wn],Tn=cn.nodes(wn);if(Tn==null)throw new Error(`No node exists at index ${wn}`);if((Tn==null?void 0:Tn.outputsLength())===0)throw new Error(`missing output for node: ${Tn.name}`);for(let An=0;An<(Tn==null?void 0:Tn.outputsLength());An++){const Pn=Tn==null?void 0:Tn.outputs(An);let Sn=gn.get(Pn);if(Sn===void 0&&(Sn=this._allData.push(new fn)-1,gn.set(Pn,Sn)),_n.outputs.push(Sn),this._allData[Sn]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${Sn}`);if(this._allData[Sn]._from=wn,Tn.opType()==="Constant"){if(Tn.attributesLength()!==1||!Tn.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(Tn.outputsLength()!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");_n.outputs.pop(),_n.executeNode=!1,this._allData[Sn]._from=-1,this._allData[Sn].tensor=on.Tensor.fromOrtTensor(Tn.attributes(0).t())}}}for(let wn=0;wn<this._nodes.length;wn++){const _n=this._nodes[wn],Tn=cn.nodes(wn);if(Tn.inputsLength()===0)throw new Error(`missing input for node: ${Tn.name}`);for(let An=0;An<Tn.inputsLength();An++){const Pn=Tn.inputs(An),Sn=gn.get(Pn);if(Sn===void 0)throw new Error(`unrecognized input '${Pn}' for node: ${Tn.name()}`);_n.inputs.push(Sn),this._allData[Sn]._to.push(wn)}}}checkIsAcyclic(){const cn=new Set;this._allInputIndices.forEach(xn=>{this._allData[xn]._to.forEach(gn=>{cn.add(gn)})});const pn=Array.from(cn),mn=new Array(this._nodes.length).fill("white");for(;pn.length>0;){const xn=pn.pop();mn[xn]==="gray"?mn[xn]="black":(pn.push(xn),mn[xn]="gray",this._nodes[xn].outputs.forEach(gn=>{const yn=this._allData[gn];if(yn.tensor!==void 0)throw new Error("node outputs should not be initialized");if(yn._from!==xn)throw new Error("from property of the Value object doesn't match index of Node being processed");yn._to.forEach(bn=>{if(mn[bn]==="gray")throw new Error("model graph is cyclic");mn[bn]==="white"&&pn.push(bn)})}))}}transformGraph(cn){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),cn&&cn.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let cn=0;for(let pn=0;pn<this._nodes.length;pn++)this._nodes[pn].executeNode?cn>0&&(this._nodes[pn].inputs.forEach(mn=>{const xn=this._allData[mn]._to.indexOf(pn+cn);xn!==-1&&(this._allData[mn]._to[xn]=pn)}),this._nodes[pn].outputs.forEach(mn=>{this._allData[mn]._from&&this._allData[mn]._from===pn+cn&&(this._allData[mn]._from=pn)})):(cn++,this._nodes[pn].outputs.forEach(mn=>{this._allData[mn]._from=-2}),this._nodes.splice(pn,1),pn--);cn=0;for(let pn=0;pn<this._allData.length;pn++)if(this._allData[pn].from!==-2||this._allOutputIndices.indexOf(pn+cn)!==-1){if(cn>0){let mn=-1;this._allData[pn].from!==void 0&&this._allData[pn].from!==-1?(mn=this._nodes[this._allData[pn].from].outputs.indexOf(pn+cn),mn!==-1&&(this._nodes[this._allData[pn].from].outputs[mn]=pn)):(mn=this._allInputIndices.indexOf(pn+cn),mn!==-1&&(this._allInputIndices[mn]=pn)),this._allData[pn].to.forEach(xn=>{mn=this._nodes[xn].inputs.indexOf(pn+cn),mn!==-1&&(this._nodes[xn].inputs[mn]=pn)}),this._allData[pn].to.length===0&&(mn=this._allOutputIndices.indexOf(pn+cn),mn!==-1&&(this._allOutputIndices[mn]=pn))}}else cn++,this._allData.splice(pn,1),pn--}deleteNode(cn){const pn=this._nodes[cn];if(pn.outputs.length>1){for(let wn=1;wn<pn.outputs.length;wn++)if(this._allData[pn.outputs[wn]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ")}pn.executeNode=!1;const mn=pn.inputs[0],xn=pn.outputs[0],gn=this._allData[xn].to,yn=this._allData[mn].to.indexOf(cn);if(yn===-1)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[mn].to.splice(yn,1),this._allData[xn]._to=[];const bn=this._allOutputIndices.indexOf(xn);if(bn!==-1&&(this._allOutputIndices[bn]=mn),gn&&gn.length>0)for(const wn of gn){const _n=this._nodes[wn].inputs.indexOf(xn);if(_n===-1)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[wn].inputs[_n]=mn,this._allData[mn].to.push(wn)}}removeAllDropoutNodes(){let cn=0;for(const pn of this._nodes){if(pn.opType==="Dropout"){if(pn.inputs.length!==1)throw new Error("Dropout nodes should only contain one input. ");if(pn.outputs.length!==1&&pn.outputs.length!==2)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(pn.outputs.length===2&&this._allData[pn.outputs[1]]._to.length!==0)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(cn)}cn++}}removeAllIdentityNodes(){let cn=0;for(const pn of this._nodes)pn.opType==="Identity"&&this.deleteNode(cn),cn++}isActivation(cn){switch(cn.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(const cn of this._nodes)if(cn.opType==="Conv"){const pn=this._allData[cn.outputs[0]]._to;if(pn.length===1&&this.isActivation(this._nodes[pn[0]])){const mn=this._nodes[pn[0]];if(mn.opType==="Clip")if(mn.inputs.length===1)try{cn.attributes.set("activation_params","floats",[mn.attributes.getFloat("min"),mn.attributes.getFloat("max")])}catch{cn.attributes.set("activation_params","floats",[un.MIN_CLIP,un.MAX_CLIP])}else{if(!(mn.inputs.length>=3&&this._allData[mn.inputs[1]].tensor!==void 0&&this._allData[mn.inputs[2]].tensor!==void 0))continue;cn.attributes.set("activation_params","floats",[this._allData[mn.inputs[1]].tensor.floatData[0],this._allData[mn.inputs[2]].tensor.floatData[0]])}cn.attributes.set("activation","string",mn.opType),this.deleteNode(pn[0])}}}}},6231:(St,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.now=e.Profiler=e.Logger=void 0;const en={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},tn={none:new class{log(hn,an,rn){}},console:new class{log(hn,an,rn){console.log(`${this.color(hn)} ${rn?"\x1B[35m"+rn+"\x1B[0m ":""}${an}`)}color(hn){switch(hn){case"verbose":return"\x1B[34;40mv\x1B[0m";case"info":return"\x1B[32mi\x1B[0m";case"warning":return"\x1B[30;43mw\x1B[0m";case"error":return"\x1B[31;40me\x1B[0m";case"fatal":return"\x1B[101mf\x1B[0m";default:throw new Error(`unsupported severity: ${hn}`)}}}},nn={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1};let sn={"":nn};function on(hn,an,rn,cn){if(an===void 0)return pn=hn,{verbose:on.verbose.bind(null,pn),info:on.info.bind(null,pn),warning:on.warning.bind(null,pn),error:on.error.bind(null,pn),fatal:on.fatal.bind(null,pn)};if(rn===void 0)un(hn,an);else if(typeof rn=="number"&&cn===void 0)un(hn,an);else if(typeof rn=="string"&&cn===void 0)un(hn,rn,0,an);else{if(typeof rn!="string"||typeof cn!="number")throw new TypeError("input is valid");un(hn,rn,0,an)}var pn}function un(hn,an,rn,cn){const pn=sn[cn||""]||sn[""];en[hn]<en[pn.minimalSeverity]||(pn.logDateTime&&(an=`${new Date().toISOString()}|${an}`),pn.logSourceLocation,tn[pn.provider].log(hn,an,cn))}(function(hn){function an(cn){sn={},rn("",cn||{})}function rn(cn,pn){if(cn==="*")an(pn);else{const mn=sn[cn]||nn;sn[cn]={provider:pn.provider||mn.provider,minimalSeverity:pn.minimalSeverity||mn.minimalSeverity,logDateTime:pn.logDateTime===void 0?mn.logDateTime:pn.logDateTime,logSourceLocation:pn.logSourceLocation===void 0?mn.logSourceLocation:pn.logSourceLocation}}}hn.verbose=function(cn,pn){hn("verbose",cn,pn)},hn.info=function(cn,pn){hn("info",cn,pn)},hn.warning=function(cn,pn){hn("warning",cn,pn)},hn.error=function(cn,pn){hn("error",cn,pn)},hn.fatal=function(cn,pn){hn("fatal",cn,pn)},hn.reset=an,hn.set=rn,hn.setWithEnv=function(cn){const pn={};cn.logLevel&&(pn.minimalSeverity=cn.logLevel),rn("",pn)}})(on||(on={})),e.Logger=on;class dn{constructor(an,rn,cn,pn,mn,xn){this.category=an,this.name=rn,this.startTime=cn,this.endCallback=pn,this.timer=mn,this.ctx=xn}end(){return this.endCallback(this)}async checkTimer(){if(this.ctx===void 0||this.timer===void 0)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)}}class fn{constructor(an,rn,cn,pn){this.category=an,this.name=rn,this.startTime=cn,this.endTime=pn}}e.Profiler=class{static create(hn){return hn===void 0?new this:new this(hn.maxNumberEvents,hn.flushBatchSize,hn.flushIntervalInMilliseconds)}constructor(hn,an,rn){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=hn===void 0?1e4:hn,this._flushBatchSize=an===void 0?10:an,this._flushIntervalInMilliseconds=rn===void 0?5e3:rn}start(){this._started=!0,this._timingEvents=[],this._flushTime=(0,e.now)(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(hn,an,rn,cn){const pn=this._started?this.begin(hn,an,cn):void 0;let mn=!1;const xn=rn();if(xn&&typeof xn.then=="function")return mn=!0,new Promise((gn,yn)=>{xn.then(async bn=>{pn&&await pn.end(),gn(bn)},async bn=>{pn&&await pn.end(),yn(bn)})});if(!mn&&pn){const gn=pn.end();if(gn&&typeof gn.then=="function")return new Promise((yn,bn)=>{gn.then(()=>{yn(xn)},wn=>{bn(wn)})})}return xn}begin(hn,an,rn){if(!this._started)throw new Error("profiler is not started yet");if(rn===void 0){const cn=(0,e.now)();return this.flush(cn),new dn(hn,an,cn,pn=>this.endSync(pn))}{const cn=rn.beginTimer();return new dn(hn,an,0,async pn=>this.end(pn),cn,rn)}}async end(hn){const an=await hn.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new fn(hn.category,hn.name,hn.startTime,an)),this.flush(an))}endSync(hn){const an=(0,e.now)();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new fn(hn.category,hn.name,hn.startTime,an)),this.flush(an))}logOneEvent(hn){e.Logger.verbose(`Profiler.${hn.category}`,`${(hn.endTime-hn.startTime).toFixed(2)}ms on event '${hn.name}' at ${hn.endTime.toFixed(2)}`)}flush(hn){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||hn-this._flushTime>=this._flushIntervalInMilliseconds){for(const an=this._flushPointer;this._flushPointer<an+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=(0,e.now)()}}get started(){return this._started}},e.now=typeof performance<"u"&&performance.now?()=>performance.now():Date.now},2644:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Model=void 0;const tn=en(5686),nn=en(1446),sn=en(7070),on=en(9395),un=en(2517);var dn=on.onnxruntime.experimental.fbs;e.Model=class{constructor(){}load(fn,hn,an){if(!an)try{return void this.loadFromOnnxFormat(fn,hn)}catch(rn){if(an!==void 0)throw rn}this.loadFromOrtFormat(fn,hn)}loadFromOnnxFormat(fn,hn){const an=nn.onnx.ModelProto.decode(fn);if(un.LongUtil.longToNumber(an.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=an.opsetImport.map(rn=>({domain:rn.domain,version:un.LongUtil.longToNumber(rn.version)})),this._graph=sn.Graph.from(an.graph,hn)}loadFromOrtFormat(fn,hn){const an=new tn.flatbuffers.ByteBuffer(fn),rn=dn.InferenceSession.getRootAsInferenceSession(an).model();if(un.LongUtil.longToNumber(rn.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let cn=0;cn<rn.opsetImportLength();cn++){const pn=rn.opsetImport(cn);this._opsets.push({domain:pn==null?void 0:pn.domain(),version:un.LongUtil.longToNumber(pn.version())})}this._graph=sn.Graph.from(rn.graph(),hn)}get graph(){return this._graph}get opsets(){return this._opsets}}},782:(St,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FLOAT_TYPES=e.INT_TYPES=e.NUMBER_TYPES=void 0,e.NUMBER_TYPES=["float32","float64","int32","int16","int8","uint16","uint32","uint8"],e.INT_TYPES=["int32","int16","int8","uint16","uint32","uint8"],e.FLOAT_TYPES=["float32","float64"]},1047:(St,e)=>{function en(tn,nn){if(nn.endsWith("+")){const sn=Number.parseInt(nn.substring(0,nn.length-1),10);return!isNaN(sn)&&sn<=tn}if(nn.split("-").length===2){const sn=nn.split("-"),on=Number.parseInt(sn[0],10),un=Number.parseInt(sn[1],10);return!isNaN(on)&&!isNaN(un)&&on<=tn&&tn<=un}return Number.parseInt(nn,10)===tn}Object.defineProperty(e,"__esModule",{value:!0}),e.resolveOperator=void 0,e.resolveOperator=function(tn,nn,sn){for(const on of sn){const un=on[0],dn=on[1],fn=on[2],hn=on[3],an=on[4];if(tn.opType===un){for(const rn of nn)if((rn.domain===dn||rn.domain==="ai.onnx"&&dn==="")&&en(rn.version,fn))return{opImpl:hn,opInit:an}}}throw new TypeError(`cannot resolve operator '${tn.opType}' with opsets: ${nn.map(on=>`${on.domain||"ai.onnx"} v${on.version}`).join(", ")}`)}},9395:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.onnxruntime=void 0;const tn=en(5686);var nn,sn;nn=e.onnxruntime||(e.onnxruntime={}),function(on){(function(un){un[un.UNDEFINED=0]="UNDEFINED",un[un.FLOAT=1]="FLOAT",un[un.INT=2]="INT",un[un.STRING=3]="STRING",un[un.TENSOR=4]="TENSOR",un[un.GRAPH=5]="GRAPH",un[un.FLOATS=6]="FLOATS",un[un.INTS=7]="INTS",un[un.STRINGS=8]="STRINGS",un[un.TENSORS=9]="TENSORS",un[un.GRAPHS=10]="GRAPHS",un[un.SPARSE_TENSOR=11]="SPARSE_TENSOR",un[un.SPARSE_TENSORS=12]="SPARSE_TENSORS"})(on.AttributeType||(on.AttributeType={}))}((sn=nn.experimental||(nn.experimental={})).fbs||(sn.fbs={})),function(on){(function(un){(function(dn){(function(fn){fn[fn.UNKNOWN=0]="UNKNOWN",fn[fn.VALUE=1]="VALUE",fn[fn.PARAM=2]="PARAM"})(dn.DimensionValueType||(dn.DimensionValueType={}))})(un.fbs||(un.fbs={}))})(on.experimental||(on.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(on){(function(un){(function(dn){(function(fn){fn[fn.UNDEFINED=0]="UNDEFINED",fn[fn.FLOAT=1]="FLOAT",fn[fn.UINT8=2]="UINT8",fn[fn.INT8=3]="INT8",fn[fn.UINT16=4]="UINT16",fn[fn.INT16=5]="INT16",fn[fn.INT32=6]="INT32",fn[fn.INT64=7]="INT64",fn[fn.STRING=8]="STRING",fn[fn.BOOL=9]="BOOL",fn[fn.FLOAT16=10]="FLOAT16",fn[fn.DOUBLE=11]="DOUBLE",fn[fn.UINT32=12]="UINT32",fn[fn.UINT64=13]="UINT64",fn[fn.COMPLEX64=14]="COMPLEX64",fn[fn.COMPLEX128=15]="COMPLEX128",fn[fn.BFLOAT16=16]="BFLOAT16"})(dn.TensorDataType||(dn.TensorDataType={}))})(un.fbs||(un.fbs={}))})(on.experimental||(on.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(on){(function(un){(function(dn){(function(fn){fn[fn.Primitive=0]="Primitive",fn[fn.Fused=1]="Fused"})(dn.NodeType||(dn.NodeType={}))})(un.fbs||(un.fbs={}))})(on.experimental||(on.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(on){(function(un){(function(dn){(function(fn){fn[fn.NONE=0]="NONE",fn[fn.tensor_type=1]="tensor_type",fn[fn.sequence_type=2]="sequence_type",fn[fn.map_type=3]="map_type"})(dn.TypeInfoValue||(dn.TypeInfoValue={}))})(un.fbs||(un.fbs={}))})(on.experimental||(on.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(on){(function(un){(function(dn){class fn{constructor(){this.bb=null,this.bb_pos=0}__init(an,rn){return this.bb_pos=an,this.bb=rn,this}static getRootAsShape(an,rn){return(rn||new fn).__init(an.readInt32(an.position())+an.position(),an)}static getSizePrefixedRootAsShape(an,rn){return an.setPosition(an.position()+tn.flatbuffers.SIZE_PREFIX_LENGTH),(rn||new fn).__init(an.readInt32(an.position())+an.position(),an)}dim(an,rn){let cn=this.bb.__offset(this.bb_pos,4);return cn?(rn||new on.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+cn)+4*an),this.bb):null}dimLength(){let an=this.bb.__offset(this.bb_pos,4);return an?this.bb.__vector_len(this.bb_pos+an):0}static startShape(an){an.startObject(1)}static addDim(an,rn){an.addFieldOffset(0,rn,0)}static createDimVector(an,rn){an.startVector(4,rn.length,4);for(let cn=rn.length-1;cn>=0;cn--)an.addOffset(rn[cn]);return an.endVector()}static startDimVector(an,rn){an.startVector(4,rn,4)}static endShape(an){return an.endObject()}static createShape(an,rn){return fn.startShape(an),fn.addDim(an,rn),fn.endShape(an)}}dn.Shape=fn})(un.fbs||(un.fbs={}))})(on.experimental||(on.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(on){(function(un){(function(dn){class fn{constructor(){this.bb=null,this.bb_pos=0}__init(an,rn){return this.bb_pos=an,this.bb=rn,this}static getRootAsDimension(an,rn){return(rn||new fn).__init(an.readInt32(an.position())+an.position(),an)}static getSizePrefixedRootAsDimension(an,rn){return an.setPosition(an.position()+tn.flatbuffers.SIZE_PREFIX_LENGTH),(rn||new fn).__init(an.readInt32(an.position())+an.position(),an)}value(an){let rn=this.bb.__offset(this.bb_pos,4);return rn?(an||new on.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+rn),this.bb):null}denotation(an){let rn=this.bb.__offset(this.bb_pos,6);return rn?this.bb.__string(this.bb_pos+rn,an):null}static startDimension(an){an.startObject(2)}static addValue(an,rn){an.addFieldOffset(0,rn,0)}static addDenotation(an,rn){an.addFieldOffset(1,rn,0)}static endDimension(an){return an.endObject()}static createDimension(an,rn,cn){return fn.startDimension(an),fn.addValue(an,rn),fn.addDenotation(an,cn),fn.endDimension(an)}}dn.Dimension=fn})(un.fbs||(un.fbs={}))})(on.experimental||(on.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(on){(function(un){(function(dn){class fn{constructor(){this.bb=null,this.bb_pos=0}__init(an,rn){return this.bb_pos=an,this.bb=rn,this}static getRootAsDimensionValue(an,rn){return(rn||new fn).__init(an.readInt32(an.position())+an.position(),an)}static getSizePrefixedRootAsDimensionValue(an,rn){return an.setPosition(an.position()+tn.flatbuffers.SIZE_PREFIX_LENGTH),(rn||new fn).__init(an.readInt32(an.position())+an.position(),an)}dimType(){let an=this.bb.__offset(this.bb_pos,4);return an?this.bb.readInt8(this.bb_pos+an):on.experimental.fbs.DimensionValueType.UNKNOWN}dimValue(){let an=this.bb.__offset(this.bb_pos,6);return an?this.bb.readInt64(this.bb_pos+an):this.bb.createLong(0,0)}dimParam(an){let rn=this.bb.__offset(this.bb_pos,8);return rn?this.bb.__string(this.bb_pos+rn,an):null}static startDimensionValue(an){an.startObject(3)}static addDimType(an,rn){an.addFieldInt8(0,rn,on.experimental.fbs.DimensionValueType.UNKNOWN)}static addDimValue(an,rn){an.addFieldInt64(1,rn,an.createLong(0,0))}static addDimParam(an,rn){an.addFieldOffset(2,rn,0)}static endDimensionValue(an){return an.endObject()}static createDimensionValue(an,rn,cn,pn){return fn.startDimensionValue(an),fn.addDimType(an,rn),fn.addDimValue(an,cn),fn.addDimParam(an,pn),fn.endDimensionValue(an)}}dn.DimensionValue=fn})(un.fbs||(un.fbs={}))})(on.experimental||(on.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(on){(function(un){(function(dn){class fn{constructor(){this.bb=null,this.bb_pos=0}__init(an,rn){return this.bb_pos=an,this.bb=rn,this}static getRootAsTensorTypeAndShape(an,rn){return(rn||new fn).__init(an.readInt32(an.position())+an.position(),an)}static getSizePrefixedRootAsTensorTypeAndShape(an,rn){return an.setPosition(an.position()+tn.flatbuffers.SIZE_PREFIX_LENGTH),(rn||new fn).__init(an.readInt32(an.position())+an.position(),an)}elemType(){let an=this.bb.__offset(this.bb_pos,4);return an?this.bb.readInt32(this.bb_pos+an):on.experimental.fbs.TensorDataType.UNDEFINED}shape(an){let rn=this.bb.__offset(this.bb_pos,6);return rn?(an||new on.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+rn),this.bb):null}static startTensorTypeAndShape(an){an.startObject(2)}static addElemType(an,rn){an.addFieldInt32(0,rn,on.experimental.fbs.TensorDataType.UNDEFINED)}static addShape(an,rn){an.addFieldOffset(1,rn,0)}static endTensorTypeAndShape(an){return an.endObject()}static createTensorTypeAndShape(an,rn,cn){return fn.startTensorTypeAndShape(an),fn.addElemType(an,rn),fn.addShape(an,cn),fn.endTensorTypeAndShape(an)}}dn.TensorTypeAndShape=fn})(un.fbs||(un.fbs={}))})(on.experimental||(on.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(on){(function(un){(function(dn){class fn{constructor(){this.bb=null,this.bb_pos=0}__init(an,rn){return this.bb_pos=an,this.bb=rn,this}static getRootAsMapType(an,rn){return(rn||new fn).__init(an.readInt32(an.position())+an.position(),an)}static getSizePrefixedRootAsMapType(an,rn){return an.setPosition(an.position()+tn.flatbuffers.SIZE_PREFIX_LENGTH),(rn||new fn).__init(an.readInt32(an.position())+an.position(),an)}keyType(){let an=this.bb.__offset(this.bb_pos,4);return an?this.bb.readInt32(this.bb_pos+an):on.experimental.fbs.TensorDataType.UNDEFINED}valueType(an){let rn=this.bb.__offset(this.bb_pos,6);return rn?(an||new on.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+rn),this.bb):null}static startMapType(an){an.startObject(2)}static addKeyType(an,rn){an.addFieldInt32(0,rn,on.experimental.fbs.TensorDataType.UNDEFINED)}static addValueType(an,rn){an.addFieldOffset(1,rn,0)}static endMapType(an){return an.endObject()}static createMapType(an,rn,cn){return fn.startMapType(an),fn.addKeyType(an,rn),fn.addValueType(an,cn),fn.endMapType(an)}}dn.MapType=fn})(un.fbs||(un.fbs={}))})(on.experimental||(on.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(on){(function(un){(function(dn){class fn{constructor(){this.bb=null,this.bb_pos=0}__init(an,rn){return this.bb_pos=an,this.bb=rn,this}static getRootAsSequenceType(an,rn){return(rn||new fn).__init(an.readInt32(an.position())+an.position(),an)}static getSizePrefixedRootAsSequenceType(an,rn){return an.setPosition(an.position()+tn.flatbuffers.SIZE_PREFIX_LENGTH),(rn||new fn).__init(an.readInt32(an.position())+an.position(),an)}elemType(an){let rn=this.bb.__offset(this.bb_pos,4);return rn?(an||new on.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+rn),this.bb):null}static startSequenceType(an){an.startObject(1)}static addElemType(an,rn){an.addFieldOffset(0,rn,0)}static endSequenceType(an){return an.endObject()}static createSequenceType(an,rn){return fn.startSequenceType(an),fn.addElemType(an,rn),fn.endSequenceType(an)}}dn.SequenceType=fn})(un.fbs||(un.fbs={}))})(on.experimental||(on.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(on){(function(un){(un.fbs||(un.fbs={})).EdgeEnd=class{constructor(){this.bb=null,this.bb_pos=0}__init(dn,fn){return this.bb_pos=dn,this.bb=fn,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(dn,fn,hn,an){return dn.prep(4,12),dn.writeInt32(an),dn.writeInt32(hn),dn.writeInt32(fn),dn.offset()}}})(on.experimental||(on.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(on){(function(un){(function(dn){class fn{constructor(){this.bb=null,this.bb_pos=0}__init(an,rn){return this.bb_pos=an,this.bb=rn,this}static getRootAsNodeEdge(an,rn){return(rn||new fn).__init(an.readInt32(an.position())+an.position(),an)}static getSizePrefixedRootAsNodeEdge(an,rn){return an.setPosition(an.position()+tn.flatbuffers.SIZE_PREFIX_LENGTH),(rn||new fn).__init(an.readInt32(an.position())+an.position(),an)}nodeIndex(){let an=this.bb.__offset(this.bb_pos,4);return an?this.bb.readUint32(this.bb_pos+an):0}inputEdges(an,rn){let cn=this.bb.__offset(this.bb_pos,6);return cn?(rn||new on.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+cn)+12*an,this.bb):null}inputEdgesLength(){let an=this.bb.__offset(this.bb_pos,6);return an?this.bb.__vector_len(this.bb_pos+an):0}outputEdges(an,rn){let cn=this.bb.__offset(this.bb_pos,8);return cn?(rn||new on.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+cn)+12*an,this.bb):null}outputEdgesLength(){let an=this.bb.__offset(this.bb_pos,8);return an?this.bb.__vector_len(this.bb_pos+an):0}static startNodeEdge(an){an.startObject(3)}static addNodeIndex(an,rn){an.addFieldInt32(0,rn,0)}static addInputEdges(an,rn){an.addFieldOffset(1,rn,0)}static startInputEdgesVector(an,rn){an.startVector(12,rn,4)}static addOutputEdges(an,rn){an.addFieldOffset(2,rn,0)}static startOutputEdgesVector(an,rn){an.startVector(12,rn,4)}static endNodeEdge(an){return an.endObject()}static createNodeEdge(an,rn,cn,pn){return fn.startNodeEdge(an),fn.addNodeIndex(an,rn),fn.addInputEdges(an,cn),fn.addOutputEdges(an,pn),fn.endNodeEdge(an)}}dn.NodeEdge=fn})(un.fbs||(un.fbs={}))})(on.experimental||(on.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(on){(function(un){(function(dn){class fn{constructor(){this.bb=null,this.bb_pos=0}__init(an,rn){return this.bb_pos=an,this.bb=rn,this}static getRootAsNode(an,rn){return(rn||new fn).__init(an.readInt32(an.position())+an.position(),an)}static getSizePrefixedRootAsNode(an,rn){return an.setPosition(an.position()+tn.flatbuffers.SIZE_PREFIX_LENGTH),(rn||new fn).__init(an.readInt32(an.position())+an.position(),an)}name(an){let rn=this.bb.__offset(this.bb_pos,4);return rn?this.bb.__string(this.bb_pos+rn,an):null}docString(an){let rn=this.bb.__offset(this.bb_pos,6);return rn?this.bb.__string(this.bb_pos+rn,an):null}domain(an){let rn=this.bb.__offset(this.bb_pos,8);return rn?this.bb.__string(this.bb_pos+rn,an):null}sinceVersion(){let an=this.bb.__offset(this.bb_pos,10);return an?this.bb.readInt32(this.bb_pos+an):0}index(){let an=this.bb.__offset(this.bb_pos,12);return an?this.bb.readUint32(this.bb_pos+an):0}opType(an){let rn=this.bb.__offset(this.bb_pos,14);return rn?this.bb.__string(this.bb_pos+rn,an):null}type(){let an=this.bb.__offset(this.bb_pos,16);return an?this.bb.readInt32(this.bb_pos+an):on.experimental.fbs.NodeType.Primitive}executionProviderType(an){let rn=this.bb.__offset(this.bb_pos,18);return rn?this.bb.__string(this.bb_pos+rn,an):null}inputs(an,rn){let cn=this.bb.__offset(this.bb_pos,20);return cn?this.bb.__string(this.bb.__vector(this.bb_pos+cn)+4*an,rn):null}inputsLength(){let an=this.bb.__offset(this.bb_pos,20);return an?this.bb.__vector_len(this.bb_pos+an):0}outputs(an,rn){let cn=this.bb.__offset(this.bb_pos,22);return cn?this.bb.__string(this.bb.__vector(this.bb_pos+cn)+4*an,rn):null}outputsLength(){let an=this.bb.__offset(this.bb_pos,22);return an?this.bb.__vector_len(this.bb_pos+an):0}attributes(an,rn){let cn=this.bb.__offset(this.bb_pos,24);return cn?(rn||new on.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+cn)+4*an),this.bb):null}attributesLength(){let an=this.bb.__offset(this.bb_pos,24);return an?this.bb.__vector_len(this.bb_pos+an):0}inputArgCounts(an){let rn=this.bb.__offset(this.bb_pos,26);return rn?this.bb.readInt32(this.bb.__vector(this.bb_pos+rn)+4*an):0}inputArgCountsLength(){let an=this.bb.__offset(this.bb_pos,26);return an?this.bb.__vector_len(this.bb_pos+an):0}inputArgCountsArray(){let an=this.bb.__offset(this.bb_pos,26);return an?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+an),this.bb.__vector_len(this.bb_pos+an)):null}implicitInputs(an,rn){let cn=this.bb.__offset(this.bb_pos,28);return cn?this.bb.__string(this.bb.__vector(this.bb_pos+cn)+4*an,rn):null}implicitInputsLength(){let an=this.bb.__offset(this.bb_pos,28);return an?this.bb.__vector_len(this.bb_pos+an):0}static startNode(an){an.startObject(13)}static addName(an,rn){an.addFieldOffset(0,rn,0)}static addDocString(an,rn){an.addFieldOffset(1,rn,0)}static addDomain(an,rn){an.addFieldOffset(2,rn,0)}static addSinceVersion(an,rn){an.addFieldInt32(3,rn,0)}static addIndex(an,rn){an.addFieldInt32(4,rn,0)}static addOpType(an,rn){an.addFieldOffset(5,rn,0)}static addType(an,rn){an.addFieldInt32(6,rn,on.experimental.fbs.NodeType.Primitive)}static addExecutionProviderType(an,rn){an.addFieldOffset(7,rn,0)}static addInputs(an,rn){an.addFieldOffset(8,rn,0)}static createInputsVector(an,rn){an.startVector(4,rn.length,4);for(let cn=rn.length-1;cn>=0;cn--)an.addOffset(rn[cn]);return an.endVector()}static startInputsVector(an,rn){an.startVector(4,rn,4)}static addOutputs(an,rn){an.addFieldOffset(9,rn,0)}static createOutputsVector(an,rn){an.startVector(4,rn.length,4);for(let cn=rn.length-1;cn>=0;cn--)an.addOffset(rn[cn]);return an.endVector()}static startOutputsVector(an,rn){an.startVector(4,rn,4)}static addAttributes(an,rn){an.addFieldOffset(10,rn,0)}static createAttributesVector(an,rn){an.startVector(4,rn.length,4);for(let cn=rn.length-1;cn>=0;cn--)an.addOffset(rn[cn]);return an.endVector()}static startAttributesVector(an,rn){an.startVector(4,rn,4)}static addInputArgCounts(an,rn){an.addFieldOffset(11,rn,0)}static createInputArgCountsVector(an,rn){an.startVector(4,rn.length,4);for(let cn=rn.length-1;cn>=0;cn--)an.addInt32(rn[cn]);return an.endVector()}static startInputArgCountsVector(an,rn){an.startVector(4,rn,4)}static addImplicitInputs(an,rn){an.addFieldOffset(12,rn,0)}static createImplicitInputsVector(an,rn){an.startVector(4,rn.length,4);for(let cn=rn.length-1;cn>=0;cn--)an.addOffset(rn[cn]);return an.endVector()}static startImplicitInputsVector(an,rn){an.startVector(4,rn,4)}static endNode(an){return an.endObject()}static createNode(an,rn,cn,pn,mn,xn,gn,yn,bn,wn,_n,Tn,An,Pn){return fn.startNode(an),fn.addName(an,rn),fn.addDocString(an,cn),fn.addDomain(an,pn),fn.addSinceVersion(an,mn),fn.addIndex(an,xn),fn.addOpType(an,gn),fn.addType(an,yn),fn.addExecutionProviderType(an,bn),fn.addInputs(an,wn),fn.addOutputs(an,_n),fn.addAttributes(an,Tn),fn.addInputArgCounts(an,An),fn.addImplicitInputs(an,Pn),fn.endNode(an)}}dn.Node=fn})(un.fbs||(un.fbs={}))})(on.experimental||(on.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(on){(function(un){(function(dn){class fn{constructor(){this.bb=null,this.bb_pos=0}__init(an,rn){return this.bb_pos=an,this.bb=rn,this}static getRootAsValueInfo(an,rn){return(rn||new fn).__init(an.readInt32(an.position())+an.position(),an)}static getSizePrefixedRootAsValueInfo(an,rn){return an.setPosition(an.position()+tn.flatbuffers.SIZE_PREFIX_LENGTH),(rn||new fn).__init(an.readInt32(an.position())+an.position(),an)}name(an){let rn=this.bb.__offset(this.bb_pos,4);return rn?this.bb.__string(this.bb_pos+rn,an):null}docString(an){let rn=this.bb.__offset(this.bb_pos,6);return rn?this.bb.__string(this.bb_pos+rn,an):null}type(an){let rn=this.bb.__offset(this.bb_pos,8);return rn?(an||new on.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+rn),this.bb):null}static startValueInfo(an){an.startObject(3)}static addName(an,rn){an.addFieldOffset(0,rn,0)}static addDocString(an,rn){an.addFieldOffset(1,rn,0)}static addType(an,rn){an.addFieldOffset(2,rn,0)}static endValueInfo(an){return an.endObject()}static createValueInfo(an,rn,cn,pn){return fn.startValueInfo(an),fn.addName(an,rn),fn.addDocString(an,cn),fn.addType(an,pn),fn.endValueInfo(an)}}dn.ValueInfo=fn})(un.fbs||(un.fbs={}))})(on.experimental||(on.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(on){(function(un){(function(dn){class fn{constructor(){this.bb=null,this.bb_pos=0}__init(an,rn){return this.bb_pos=an,this.bb=rn,this}static getRootAsTypeInfo(an,rn){return(rn||new fn).__init(an.readInt32(an.position())+an.position(),an)}static getSizePrefixedRootAsTypeInfo(an,rn){return an.setPosition(an.position()+tn.flatbuffers.SIZE_PREFIX_LENGTH),(rn||new fn).__init(an.readInt32(an.position())+an.position(),an)}denotation(an){let rn=this.bb.__offset(this.bb_pos,4);return rn?this.bb.__string(this.bb_pos+rn,an):null}valueType(){let an=this.bb.__offset(this.bb_pos,6);return an?this.bb.readUint8(this.bb_pos+an):on.experimental.fbs.TypeInfoValue.NONE}value(an){let rn=this.bb.__offset(this.bb_pos,8);return rn?this.bb.__union(an,this.bb_pos+rn):null}static startTypeInfo(an){an.startObject(3)}static addDenotation(an,rn){an.addFieldOffset(0,rn,0)}static addValueType(an,rn){an.addFieldInt8(1,rn,on.experimental.fbs.TypeInfoValue.NONE)}static addValue(an,rn){an.addFieldOffset(2,rn,0)}static endTypeInfo(an){return an.endObject()}static createTypeInfo(an,rn,cn,pn){return fn.startTypeInfo(an),fn.addDenotation(an,rn),fn.addValueType(an,cn),fn.addValue(an,pn),fn.endTypeInfo(an)}}dn.TypeInfo=fn})(un.fbs||(un.fbs={}))})(on.experimental||(on.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(on){(function(un){(function(dn){class fn{constructor(){this.bb=null,this.bb_pos=0}__init(an,rn){return this.bb_pos=an,this.bb=rn,this}static getRootAsOperatorSetId(an,rn){return(rn||new fn).__init(an.readInt32(an.position())+an.position(),an)}static getSizePrefixedRootAsOperatorSetId(an,rn){return an.setPosition(an.position()+tn.flatbuffers.SIZE_PREFIX_LENGTH),(rn||new fn).__init(an.readInt32(an.position())+an.position(),an)}domain(an){let rn=this.bb.__offset(this.bb_pos,4);return rn?this.bb.__string(this.bb_pos+rn,an):null}version(){let an=this.bb.__offset(this.bb_pos,6);return an?this.bb.readInt64(this.bb_pos+an):this.bb.createLong(0,0)}static startOperatorSetId(an){an.startObject(2)}static addDomain(an,rn){an.addFieldOffset(0,rn,0)}static addVersion(an,rn){an.addFieldInt64(1,rn,an.createLong(0,0))}static endOperatorSetId(an){return an.endObject()}static createOperatorSetId(an,rn,cn){return fn.startOperatorSetId(an),fn.addDomain(an,rn),fn.addVersion(an,cn),fn.endOperatorSetId(an)}}dn.OperatorSetId=fn})(un.fbs||(un.fbs={}))})(on.experimental||(on.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(on){(function(un){(function(dn){class fn{constructor(){this.bb=null,this.bb_pos=0}__init(an,rn){return this.bb_pos=an,this.bb=rn,this}static getRootAsTensor(an,rn){return(rn||new fn).__init(an.readInt32(an.position())+an.position(),an)}static getSizePrefixedRootAsTensor(an,rn){return an.setPosition(an.position()+tn.flatbuffers.SIZE_PREFIX_LENGTH),(rn||new fn).__init(an.readInt32(an.position())+an.position(),an)}name(an){let rn=this.bb.__offset(this.bb_pos,4);return rn?this.bb.__string(this.bb_pos+rn,an):null}docString(an){let rn=this.bb.__offset(this.bb_pos,6);return rn?this.bb.__string(this.bb_pos+rn,an):null}dims(an){let rn=this.bb.__offset(this.bb_pos,8);return rn?this.bb.readInt64(this.bb.__vector(this.bb_pos+rn)+8*an):this.bb.createLong(0,0)}dimsLength(){let an=this.bb.__offset(this.bb_pos,8);return an?this.bb.__vector_len(this.bb_pos+an):0}dataType(){let an=this.bb.__offset(this.bb_pos,10);return an?this.bb.readInt32(this.bb_pos+an):on.experimental.fbs.TensorDataType.UNDEFINED}rawData(an){let rn=this.bb.__offset(this.bb_pos,12);return rn?this.bb.readUint8(this.bb.__vector(this.bb_pos+rn)+an):0}rawDataLength(){let an=this.bb.__offset(this.bb_pos,12);return an?this.bb.__vector_len(this.bb_pos+an):0}rawDataArray(){let an=this.bb.__offset(this.bb_pos,12);return an?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+an),this.bb.__vector_len(this.bb_pos+an)):null}stringData(an,rn){let cn=this.bb.__offset(this.bb_pos,14);return cn?this.bb.__string(this.bb.__vector(this.bb_pos+cn)+4*an,rn):null}stringDataLength(){let an=this.bb.__offset(this.bb_pos,14);return an?this.bb.__vector_len(this.bb_pos+an):0}static startTensor(an){an.startObject(6)}static addName(an,rn){an.addFieldOffset(0,rn,0)}static addDocString(an,rn){an.addFieldOffset(1,rn,0)}static addDims(an,rn){an.addFieldOffset(2,rn,0)}static createDimsVector(an,rn){an.startVector(8,rn.length,8);for(let cn=rn.length-1;cn>=0;cn--)an.addInt64(rn[cn]);return an.endVector()}static startDimsVector(an,rn){an.startVector(8,rn,8)}static addDataType(an,rn){an.addFieldInt32(3,rn,on.experimental.fbs.TensorDataType.UNDEFINED)}static addRawData(an,rn){an.addFieldOffset(4,rn,0)}static createRawDataVector(an,rn){an.startVector(1,rn.length,1);for(let cn=rn.length-1;cn>=0;cn--)an.addInt8(rn[cn]);return an.endVector()}static startRawDataVector(an,rn){an.startVector(1,rn,1)}static addStringData(an,rn){an.addFieldOffset(5,rn,0)}static createStringDataVector(an,rn){an.startVector(4,rn.length,4);for(let cn=rn.length-1;cn>=0;cn--)an.addOffset(rn[cn]);return an.endVector()}static startStringDataVector(an,rn){an.startVector(4,rn,4)}static endTensor(an){return an.endObject()}static createTensor(an,rn,cn,pn,mn,xn,gn){return fn.startTensor(an),fn.addName(an,rn),fn.addDocString(an,cn),fn.addDims(an,pn),fn.addDataType(an,mn),fn.addRawData(an,xn),fn.addStringData(an,gn),fn.endTensor(an)}}dn.Tensor=fn})(un.fbs||(un.fbs={}))})(on.experimental||(on.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(on){(function(un){(function(dn){class fn{constructor(){this.bb=null,this.bb_pos=0}__init(an,rn){return this.bb_pos=an,this.bb=rn,this}static getRootAsSparseTensor(an,rn){return(rn||new fn).__init(an.readInt32(an.position())+an.position(),an)}static getSizePrefixedRootAsSparseTensor(an,rn){return an.setPosition(an.position()+tn.flatbuffers.SIZE_PREFIX_LENGTH),(rn||new fn).__init(an.readInt32(an.position())+an.position(),an)}values(an){let rn=this.bb.__offset(this.bb_pos,4);return rn?(an||new on.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+rn),this.bb):null}indices(an){let rn=this.bb.__offset(this.bb_pos,6);return rn?(an||new on.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+rn),this.bb):null}dims(an){let rn=this.bb.__offset(this.bb_pos,8);return rn?this.bb.readInt64(this.bb.__vector(this.bb_pos+rn)+8*an):this.bb.createLong(0,0)}dimsLength(){let an=this.bb.__offset(this.bb_pos,8);return an?this.bb.__vector_len(this.bb_pos+an):0}static startSparseTensor(an){an.startObject(3)}static addValues(an,rn){an.addFieldOffset(0,rn,0)}static addIndices(an,rn){an.addFieldOffset(1,rn,0)}static addDims(an,rn){an.addFieldOffset(2,rn,0)}static createDimsVector(an,rn){an.startVector(8,rn.length,8);for(let cn=rn.length-1;cn>=0;cn--)an.addInt64(rn[cn]);return an.endVector()}static startDimsVector(an,rn){an.startVector(8,rn,8)}static endSparseTensor(an){return an.endObject()}static createSparseTensor(an,rn,cn,pn){return fn.startSparseTensor(an),fn.addValues(an,rn),fn.addIndices(an,cn),fn.addDims(an,pn),fn.endSparseTensor(an)}}dn.SparseTensor=fn})(un.fbs||(un.fbs={}))})(on.experimental||(on.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(on){(function(un){(function(dn){class fn{constructor(){this.bb=null,this.bb_pos=0}__init(an,rn){return this.bb_pos=an,this.bb=rn,this}static getRootAsAttribute(an,rn){return(rn||new fn).__init(an.readInt32(an.position())+an.position(),an)}static getSizePrefixedRootAsAttribute(an,rn){return an.setPosition(an.position()+tn.flatbuffers.SIZE_PREFIX_LENGTH),(rn||new fn).__init(an.readInt32(an.position())+an.position(),an)}name(an){let rn=this.bb.__offset(this.bb_pos,4);return rn?this.bb.__string(this.bb_pos+rn,an):null}docString(an){let rn=this.bb.__offset(this.bb_pos,6);return rn?this.bb.__string(this.bb_pos+rn,an):null}type(){let an=this.bb.__offset(this.bb_pos,8);return an?this.bb.readInt32(this.bb_pos+an):on.experimental.fbs.AttributeType.UNDEFINED}f(){let an=this.bb.__offset(this.bb_pos,10);return an?this.bb.readFloat32(this.bb_pos+an):0}i(){let an=this.bb.__offset(this.bb_pos,12);return an?this.bb.readInt64(this.bb_pos+an):this.bb.createLong(0,0)}s(an){let rn=this.bb.__offset(this.bb_pos,14);return rn?this.bb.__string(this.bb_pos+rn,an):null}t(an){let rn=this.bb.__offset(this.bb_pos,16);return rn?(an||new on.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+rn),this.bb):null}g(an){let rn=this.bb.__offset(this.bb_pos,18);return rn?(an||new on.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+rn),this.bb):null}floats(an){let rn=this.bb.__offset(this.bb_pos,20);return rn?this.bb.readFloat32(this.bb.__vector(this.bb_pos+rn)+4*an):0}floatsLength(){let an=this.bb.__offset(this.bb_pos,20);return an?this.bb.__vector_len(this.bb_pos+an):0}floatsArray(){let an=this.bb.__offset(this.bb_pos,20);return an?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+an),this.bb.__vector_len(this.bb_pos+an)):null}ints(an){let rn=this.bb.__offset(this.bb_pos,22);return rn?this.bb.readInt64(this.bb.__vector(this.bb_pos+rn)+8*an):this.bb.createLong(0,0)}intsLength(){let an=this.bb.__offset(this.bb_pos,22);return an?this.bb.__vector_len(this.bb_pos+an):0}strings(an,rn){let cn=this.bb.__offset(this.bb_pos,24);return cn?this.bb.__string(this.bb.__vector(this.bb_pos+cn)+4*an,rn):null}stringsLength(){let an=this.bb.__offset(this.bb_pos,24);return an?this.bb.__vector_len(this.bb_pos+an):0}tensors(an,rn){let cn=this.bb.__offset(this.bb_pos,26);return cn?(rn||new on.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+cn)+4*an),this.bb):null}tensorsLength(){let an=this.bb.__offset(this.bb_pos,26);return an?this.bb.__vector_len(this.bb_pos+an):0}graphs(an,rn){let cn=this.bb.__offset(this.bb_pos,28);return cn?(rn||new on.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+cn)+4*an),this.bb):null}graphsLength(){let an=this.bb.__offset(this.bb_pos,28);return an?this.bb.__vector_len(this.bb_pos+an):0}static startAttribute(an){an.startObject(13)}static addName(an,rn){an.addFieldOffset(0,rn,0)}static addDocString(an,rn){an.addFieldOffset(1,rn,0)}static addType(an,rn){an.addFieldInt32(2,rn,on.experimental.fbs.AttributeType.UNDEFINED)}static addF(an,rn){an.addFieldFloat32(3,rn,0)}static addI(an,rn){an.addFieldInt64(4,rn,an.createLong(0,0))}static addS(an,rn){an.addFieldOffset(5,rn,0)}static addT(an,rn){an.addFieldOffset(6,rn,0)}static addG(an,rn){an.addFieldOffset(7,rn,0)}static addFloats(an,rn){an.addFieldOffset(8,rn,0)}static createFloatsVector(an,rn){an.startVector(4,rn.length,4);for(let cn=rn.length-1;cn>=0;cn--)an.addFloat32(rn[cn]);return an.endVector()}static startFloatsVector(an,rn){an.startVector(4,rn,4)}static addInts(an,rn){an.addFieldOffset(9,rn,0)}static createIntsVector(an,rn){an.startVector(8,rn.length,8);for(let cn=rn.length-1;cn>=0;cn--)an.addInt64(rn[cn]);return an.endVector()}static startIntsVector(an,rn){an.startVector(8,rn,8)}static addStrings(an,rn){an.addFieldOffset(10,rn,0)}static createStringsVector(an,rn){an.startVector(4,rn.length,4);for(let cn=rn.length-1;cn>=0;cn--)an.addOffset(rn[cn]);return an.endVector()}static startStringsVector(an,rn){an.startVector(4,rn,4)}static addTensors(an,rn){an.addFieldOffset(11,rn,0)}static createTensorsVector(an,rn){an.startVector(4,rn.length,4);for(let cn=rn.length-1;cn>=0;cn--)an.addOffset(rn[cn]);return an.endVector()}static startTensorsVector(an,rn){an.startVector(4,rn,4)}static addGraphs(an,rn){an.addFieldOffset(12,rn,0)}static createGraphsVector(an,rn){an.startVector(4,rn.length,4);for(let cn=rn.length-1;cn>=0;cn--)an.addOffset(rn[cn]);return an.endVector()}static startGraphsVector(an,rn){an.startVector(4,rn,4)}static endAttribute(an){return an.endObject()}static createAttribute(an,rn,cn,pn,mn,xn,gn,yn,bn,wn,_n,Tn,An,Pn){return fn.startAttribute(an),fn.addName(an,rn),fn.addDocString(an,cn),fn.addType(an,pn),fn.addF(an,mn),fn.addI(an,xn),fn.addS(an,gn),fn.addT(an,yn),fn.addG(an,bn),fn.addFloats(an,wn),fn.addInts(an,_n),fn.addStrings(an,Tn),fn.addTensors(an,An),fn.addGraphs(an,Pn),fn.endAttribute(an)}}dn.Attribute=fn})(un.fbs||(un.fbs={}))})(on.experimental||(on.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(on){(function(un){(function(dn){class fn{constructor(){this.bb=null,this.bb_pos=0}__init(an,rn){return this.bb_pos=an,this.bb=rn,this}static getRootAsGraph(an,rn){return(rn||new fn).__init(an.readInt32(an.position())+an.position(),an)}static getSizePrefixedRootAsGraph(an,rn){return an.setPosition(an.position()+tn.flatbuffers.SIZE_PREFIX_LENGTH),(rn||new fn).__init(an.readInt32(an.position())+an.position(),an)}initializers(an,rn){let cn=this.bb.__offset(this.bb_pos,4);return cn?(rn||new on.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+cn)+4*an),this.bb):null}initializersLength(){let an=this.bb.__offset(this.bb_pos,4);return an?this.bb.__vector_len(this.bb_pos+an):0}nodeArgs(an,rn){let cn=this.bb.__offset(this.bb_pos,6);return cn?(rn||new on.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+cn)+4*an),this.bb):null}nodeArgsLength(){let an=this.bb.__offset(this.bb_pos,6);return an?this.bb.__vector_len(this.bb_pos+an):0}nodes(an,rn){let cn=this.bb.__offset(this.bb_pos,8);return cn?(rn||new on.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+cn)+4*an),this.bb):null}nodesLength(){let an=this.bb.__offset(this.bb_pos,8);return an?this.bb.__vector_len(this.bb_pos+an):0}maxNodeIndex(){let an=this.bb.__offset(this.bb_pos,10);return an?this.bb.readUint32(this.bb_pos+an):0}nodeEdges(an,rn){let cn=this.bb.__offset(this.bb_pos,12);return cn?(rn||new on.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+cn)+4*an),this.bb):null}nodeEdgesLength(){let an=this.bb.__offset(this.bb_pos,12);return an?this.bb.__vector_len(this.bb_pos+an):0}inputs(an,rn){let cn=this.bb.__offset(this.bb_pos,14);return cn?this.bb.__string(this.bb.__vector(this.bb_pos+cn)+4*an,rn):null}inputsLength(){let an=this.bb.__offset(this.bb_pos,14);return an?this.bb.__vector_len(this.bb_pos+an):0}outputs(an,rn){let cn=this.bb.__offset(this.bb_pos,16);return cn?this.bb.__string(this.bb.__vector(this.bb_pos+cn)+4*an,rn):null}outputsLength(){let an=this.bb.__offset(this.bb_pos,16);return an?this.bb.__vector_len(this.bb_pos+an):0}sparseInitializers(an,rn){let cn=this.bb.__offset(this.bb_pos,18);return cn?(rn||new on.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+cn)+4*an),this.bb):null}sparseInitializersLength(){let an=this.bb.__offset(this.bb_pos,18);return an?this.bb.__vector_len(this.bb_pos+an):0}static startGraph(an){an.startObject(8)}static addInitializers(an,rn){an.addFieldOffset(0,rn,0)}static createInitializersVector(an,rn){an.startVector(4,rn.length,4);for(let cn=rn.length-1;cn>=0;cn--)an.addOffset(rn[cn]);return an.endVector()}static startInitializersVector(an,rn){an.startVector(4,rn,4)}static addNodeArgs(an,rn){an.addFieldOffset(1,rn,0)}static createNodeArgsVector(an,rn){an.startVector(4,rn.length,4);for(let cn=rn.length-1;cn>=0;cn--)an.addOffset(rn[cn]);return an.endVector()}static startNodeArgsVector(an,rn){an.startVector(4,rn,4)}static addNodes(an,rn){an.addFieldOffset(2,rn,0)}static createNodesVector(an,rn){an.startVector(4,rn.length,4);for(let cn=rn.length-1;cn>=0;cn--)an.addOffset(rn[cn]);return an.endVector()}static startNodesVector(an,rn){an.startVector(4,rn,4)}static addMaxNodeIndex(an,rn){an.addFieldInt32(3,rn,0)}static addNodeEdges(an,rn){an.addFieldOffset(4,rn,0)}static createNodeEdgesVector(an,rn){an.startVector(4,rn.length,4);for(let cn=rn.length-1;cn>=0;cn--)an.addOffset(rn[cn]);return an.endVector()}static startNodeEdgesVector(an,rn){an.startVector(4,rn,4)}static addInputs(an,rn){an.addFieldOffset(5,rn,0)}static createInputsVector(an,rn){an.startVector(4,rn.length,4);for(let cn=rn.length-1;cn>=0;cn--)an.addOffset(rn[cn]);return an.endVector()}static startInputsVector(an,rn){an.startVector(4,rn,4)}static addOutputs(an,rn){an.addFieldOffset(6,rn,0)}static createOutputsVector(an,rn){an.startVector(4,rn.length,4);for(let cn=rn.length-1;cn>=0;cn--)an.addOffset(rn[cn]);return an.endVector()}static startOutputsVector(an,rn){an.startVector(4,rn,4)}static addSparseInitializers(an,rn){an.addFieldOffset(7,rn,0)}static createSparseInitializersVector(an,rn){an.startVector(4,rn.length,4);for(let cn=rn.length-1;cn>=0;cn--)an.addOffset(rn[cn]);return an.endVector()}static startSparseInitializersVector(an,rn){an.startVector(4,rn,4)}static endGraph(an){return an.endObject()}static createGraph(an,rn,cn,pn,mn,xn,gn,yn,bn){return fn.startGraph(an),fn.addInitializers(an,rn),fn.addNodeArgs(an,cn),fn.addNodes(an,pn),fn.addMaxNodeIndex(an,mn),fn.addNodeEdges(an,xn),fn.addInputs(an,gn),fn.addOutputs(an,yn),fn.addSparseInitializers(an,bn),fn.endGraph(an)}}dn.Graph=fn})(un.fbs||(un.fbs={}))})(on.experimental||(on.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(on){(function(un){(function(dn){class fn{constructor(){this.bb=null,this.bb_pos=0}__init(an,rn){return this.bb_pos=an,this.bb=rn,this}static getRootAsModel(an,rn){return(rn||new fn).__init(an.readInt32(an.position())+an.position(),an)}static getSizePrefixedRootAsModel(an,rn){return an.setPosition(an.position()+tn.flatbuffers.SIZE_PREFIX_LENGTH),(rn||new fn).__init(an.readInt32(an.position())+an.position(),an)}irVersion(){let an=this.bb.__offset(this.bb_pos,4);return an?this.bb.readInt64(this.bb_pos+an):this.bb.createLong(0,0)}opsetImport(an,rn){let cn=this.bb.__offset(this.bb_pos,6);return cn?(rn||new on.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+cn)+4*an),this.bb):null}opsetImportLength(){let an=this.bb.__offset(this.bb_pos,6);return an?this.bb.__vector_len(this.bb_pos+an):0}producerName(an){let rn=this.bb.__offset(this.bb_pos,8);return rn?this.bb.__string(this.bb_pos+rn,an):null}producerVersion(an){let rn=this.bb.__offset(this.bb_pos,10);return rn?this.bb.__string(this.bb_pos+rn,an):null}domain(an){let rn=this.bb.__offset(this.bb_pos,12);return rn?this.bb.__string(this.bb_pos+rn,an):null}modelVersion(){let an=this.bb.__offset(this.bb_pos,14);return an?this.bb.readInt64(this.bb_pos+an):this.bb.createLong(0,0)}docString(an){let rn=this.bb.__offset(this.bb_pos,16);return rn?this.bb.__string(this.bb_pos+rn,an):null}graph(an){let rn=this.bb.__offset(this.bb_pos,18);return rn?(an||new on.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+rn),this.bb):null}graphDocString(an){let rn=this.bb.__offset(this.bb_pos,20);return rn?this.bb.__string(this.bb_pos+rn,an):null}static startModel(an){an.startObject(9)}static addIrVersion(an,rn){an.addFieldInt64(0,rn,an.createLong(0,0))}static addOpsetImport(an,rn){an.addFieldOffset(1,rn,0)}static createOpsetImportVector(an,rn){an.startVector(4,rn.length,4);for(let cn=rn.length-1;cn>=0;cn--)an.addOffset(rn[cn]);return an.endVector()}static startOpsetImportVector(an,rn){an.startVector(4,rn,4)}static addProducerName(an,rn){an.addFieldOffset(2,rn,0)}static addProducerVersion(an,rn){an.addFieldOffset(3,rn,0)}static addDomain(an,rn){an.addFieldOffset(4,rn,0)}static addModelVersion(an,rn){an.addFieldInt64(5,rn,an.createLong(0,0))}static addDocString(an,rn){an.addFieldOffset(6,rn,0)}static addGraph(an,rn){an.addFieldOffset(7,rn,0)}static addGraphDocString(an,rn){an.addFieldOffset(8,rn,0)}static endModel(an){return an.endObject()}static createModel(an,rn,cn,pn,mn,xn,gn,yn,bn,wn){return fn.startModel(an),fn.addIrVersion(an,rn),fn.addOpsetImport(an,cn),fn.addProducerName(an,pn),fn.addProducerVersion(an,mn),fn.addDomain(an,xn),fn.addModelVersion(an,gn),fn.addDocString(an,yn),fn.addGraph(an,bn),fn.addGraphDocString(an,wn),fn.endModel(an)}}dn.Model=fn})(un.fbs||(un.fbs={}))})(on.experimental||(on.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(on){(function(un){(function(dn){class fn{constructor(){this.bb=null,this.bb_pos=0}__init(an,rn){return this.bb_pos=an,this.bb=rn,this}static getRootAsKernelCreateInfos(an,rn){return(rn||new fn).__init(an.readInt32(an.position())+an.position(),an)}static getSizePrefixedRootAsKernelCreateInfos(an,rn){return an.setPosition(an.position()+tn.flatbuffers.SIZE_PREFIX_LENGTH),(rn||new fn).__init(an.readInt32(an.position())+an.position(),an)}nodeIndices(an){let rn=this.bb.__offset(this.bb_pos,4);return rn?this.bb.readUint32(this.bb.__vector(this.bb_pos+rn)+4*an):0}nodeIndicesLength(){let an=this.bb.__offset(this.bb_pos,4);return an?this.bb.__vector_len(this.bb_pos+an):0}nodeIndicesArray(){let an=this.bb.__offset(this.bb_pos,4);return an?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+an),this.bb.__vector_len(this.bb_pos+an)):null}kernelDefHashes(an){let rn=this.bb.__offset(this.bb_pos,6);return rn?this.bb.readUint64(this.bb.__vector(this.bb_pos+rn)+8*an):this.bb.createLong(0,0)}kernelDefHashesLength(){let an=this.bb.__offset(this.bb_pos,6);return an?this.bb.__vector_len(this.bb_pos+an):0}static startKernelCreateInfos(an){an.startObject(2)}static addNodeIndices(an,rn){an.addFieldOffset(0,rn,0)}static createNodeIndicesVector(an,rn){an.startVector(4,rn.length,4);for(let cn=rn.length-1;cn>=0;cn--)an.addInt32(rn[cn]);return an.endVector()}static startNodeIndicesVector(an,rn){an.startVector(4,rn,4)}static addKernelDefHashes(an,rn){an.addFieldOffset(1,rn,0)}static createKernelDefHashesVector(an,rn){an.startVector(8,rn.length,8);for(let cn=rn.length-1;cn>=0;cn--)an.addInt64(rn[cn]);return an.endVector()}static startKernelDefHashesVector(an,rn){an.startVector(8,rn,8)}static endKernelCreateInfos(an){return an.endObject()}static createKernelCreateInfos(an,rn,cn){return fn.startKernelCreateInfos(an),fn.addNodeIndices(an,rn),fn.addKernelDefHashes(an,cn),fn.endKernelCreateInfos(an)}}dn.KernelCreateInfos=fn})(un.fbs||(un.fbs={}))})(on.experimental||(on.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(on){(function(un){(function(dn){class fn{constructor(){this.bb=null,this.bb_pos=0}__init(an,rn){return this.bb_pos=an,this.bb=rn,this}static getRootAsSubGraphSessionState(an,rn){return(rn||new fn).__init(an.readInt32(an.position())+an.position(),an)}static getSizePrefixedRootAsSubGraphSessionState(an,rn){return an.setPosition(an.position()+tn.flatbuffers.SIZE_PREFIX_LENGTH),(rn||new fn).__init(an.readInt32(an.position())+an.position(),an)}graphId(an){let rn=this.bb.__offset(this.bb_pos,4);return rn?this.bb.__string(this.bb_pos+rn,an):null}sessionState(an){let rn=this.bb.__offset(this.bb_pos,6);return rn?(an||new on.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+rn),this.bb):null}static startSubGraphSessionState(an){an.startObject(2)}static addGraphId(an,rn){an.addFieldOffset(0,rn,0)}static addSessionState(an,rn){an.addFieldOffset(1,rn,0)}static endSubGraphSessionState(an){let rn=an.endObject();return an.requiredField(rn,4),rn}static createSubGraphSessionState(an,rn,cn){return fn.startSubGraphSessionState(an),fn.addGraphId(an,rn),fn.addSessionState(an,cn),fn.endSubGraphSessionState(an)}}dn.SubGraphSessionState=fn})(un.fbs||(un.fbs={}))})(on.experimental||(on.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(on){(function(un){(function(dn){class fn{constructor(){this.bb=null,this.bb_pos=0}__init(an,rn){return this.bb_pos=an,this.bb=rn,this}static getRootAsSessionState(an,rn){return(rn||new fn).__init(an.readInt32(an.position())+an.position(),an)}static getSizePrefixedRootAsSessionState(an,rn){return an.setPosition(an.position()+tn.flatbuffers.SIZE_PREFIX_LENGTH),(rn||new fn).__init(an.readInt32(an.position())+an.position(),an)}kernels(an){let rn=this.bb.__offset(this.bb_pos,4);return rn?(an||new on.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+rn),this.bb):null}subGraphSessionStates(an,rn){let cn=this.bb.__offset(this.bb_pos,6);return cn?(rn||new on.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+cn)+4*an),this.bb):null}subGraphSessionStatesLength(){let an=this.bb.__offset(this.bb_pos,6);return an?this.bb.__vector_len(this.bb_pos+an):0}static startSessionState(an){an.startObject(2)}static addKernels(an,rn){an.addFieldOffset(0,rn,0)}static addSubGraphSessionStates(an,rn){an.addFieldOffset(1,rn,0)}static createSubGraphSessionStatesVector(an,rn){an.startVector(4,rn.length,4);for(let cn=rn.length-1;cn>=0;cn--)an.addOffset(rn[cn]);return an.endVector()}static startSubGraphSessionStatesVector(an,rn){an.startVector(4,rn,4)}static endSessionState(an){return an.endObject()}static createSessionState(an,rn,cn){return fn.startSessionState(an),fn.addKernels(an,rn),fn.addSubGraphSessionStates(an,cn),fn.endSessionState(an)}}dn.SessionState=fn})(un.fbs||(un.fbs={}))})(on.experimental||(on.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(on){(function(un){(function(dn){class fn{constructor(){this.bb=null,this.bb_pos=0}__init(an,rn){return this.bb_pos=an,this.bb=rn,this}static getRootAsInferenceSession(an,rn){return(rn||new fn).__init(an.readInt32(an.position())+an.position(),an)}static getSizePrefixedRootAsInferenceSession(an,rn){return an.setPosition(an.position()+tn.flatbuffers.SIZE_PREFIX_LENGTH),(rn||new fn).__init(an.readInt32(an.position())+an.position(),an)}static bufferHasIdentifier(an){return an.__has_identifier("ORTM")}ortVersion(an){let rn=this.bb.__offset(this.bb_pos,4);return rn?this.bb.__string(this.bb_pos+rn,an):null}model(an){let rn=this.bb.__offset(this.bb_pos,6);return rn?(an||new on.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+rn),this.bb):null}sessionState(an){let rn=this.bb.__offset(this.bb_pos,8);return rn?(an||new on.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+rn),this.bb):null}static startInferenceSession(an){an.startObject(3)}static addOrtVersion(an,rn){an.addFieldOffset(0,rn,0)}static addModel(an,rn){an.addFieldOffset(1,rn,0)}static addSessionState(an,rn){an.addFieldOffset(2,rn,0)}static endInferenceSession(an){return an.endObject()}static finishInferenceSessionBuffer(an,rn){an.finish(rn,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(an,rn){an.finish(rn,"ORTM",!0)}static createInferenceSession(an,rn,cn,pn){return fn.startInferenceSession(an),fn.addOrtVersion(an,rn),fn.addModel(an,cn),fn.addSessionState(an,pn),fn.endInferenceSession(an)}}dn.InferenceSession=fn})(un.fbs||(un.fbs={}))})(on.experimental||(on.experimental={}))}(e.onnxruntime||(e.onnxruntime={}))},7448:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OnnxjsSessionHandler=void 0;const tn=en(1670),nn=en(9162);e.OnnxjsSessionHandler=class{constructor(sn){this.session=sn,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}async dispose(){}async run(sn,on,un){const dn=new Map;for(const an in sn)if(Object.hasOwnProperty.call(sn,an)){const rn=sn[an];dn.set(an,new nn.Tensor(rn.dims,rn.type,void 0,void 0,rn.data))}const fn=await this.session.run(dn),hn={};return fn.forEach((an,rn)=>{hn[rn]=new tn.Tensor(an.type,an.data,an.dims)}),hn}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}},6919:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Session=void 0;const tn=en(7067),nn=en(1296),sn=en(7091),on=en(1036),un=en(6231),dn=en(2644);e.Session=class{constructor(fn={}){this._initialized=!1,this.backendHint=fn.backendHint,this.profiler=un.Profiler.create(fn.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}async loadModel(fn,hn,an){await this.profiler.event("session","Session.loadModel",async()=>{const rn=await(0,sn.resolveBackend)(this.backendHint);if(this.sessionHandler=rn.createSessionHandler(this.context),this._model=new dn.Model,typeof fn=="string"){const cn=fn.endsWith(".ort");if(typeof fetch>"u"){const pn=await(0,nn.promisify)(tn.readFile)(fn);this.initialize(pn,cn)}else{const pn=await fetch(fn),mn=await pn.arrayBuffer();this.initialize(new Uint8Array(mn),cn)}}else if(ArrayBuffer.isView(fn))this.initialize(fn);else{const cn=new Uint8Array(fn,hn||0,an||fn.byteLength);this.initialize(cn)}})}initialize(fn,hn){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",()=>{const an=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(fn,an,hn),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new on.ExecutionPlan(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}async run(fn){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",async()=>{const hn=this.normalizeAndValidateInputs(fn),an=await this._executionPlan.execute(this.sessionHandler,hn);return this.createOutput(an)})}normalizeAndValidateInputs(fn){const hn=this._model.graph.getInputNames();if(Array.isArray(fn)){if(fn.length!==hn.length)throw new Error(`incorrect input array length: expected ${hn.length} but got ${fn.length}`)}else{if(fn.size!==hn.length)throw new Error(`incorrect input map size: expected ${hn.length} but got ${fn.size}`);const an=new Array(fn.size);let rn=0;for(let cn=0;cn<hn.length;++cn){const pn=fn.get(hn[cn]);if(!pn)throw new Error(`missing input tensor for: '${name}'`);an[rn++]=pn}fn=an}if(this.context.graphInputTypes&&this.context.graphInputTypes.length!==0&&this.context.graphInputDims&&this.context.graphInputDims.length!==0)this.validateInputTensorDims(this.context.graphInputDims,fn,!1);else{const an=this._model.graph.getInputIndices(),rn=this._model.graph.getValues(),cn=new Array(an.length);for(let pn=0;pn<an.length;++pn){const mn=rn[an[pn]];cn[pn]=mn.type.shape.dims,this.context.graphInputTypes.push(mn.type.tensorType),this.context.graphInputDims.push(fn[pn].dims)}this.validateInputTensorDims(cn,fn,!0)}return this.validateInputTensorTypes(this.context.graphInputTypes,fn),fn}validateInputTensorTypes(fn,hn){for(let an=0;an<hn.length;an++){const rn=fn[an],cn=hn[an].type;if(rn!==cn)throw new Error(`input tensor[${an}] check failed: expected type '${rn}' but got ${cn}`)}}validateInputTensorDims(fn,hn,an){for(let rn=0;rn<hn.length;rn++){const cn=fn[rn],pn=hn[rn].dims;if(!this.compareTensorDims(cn,pn,an))throw new Error(`input tensor[${rn}] check failed: expected shape '[${cn.join(",")}]' but got [${pn.join(",")}]`)}}compareTensorDims(fn,hn,an){if(fn.length!==hn.length)return!1;for(let rn=0;rn<fn.length;++rn)if(fn[rn]!==hn[rn]&&(!an||fn[rn]!==0))return!1;return!0}createOutput(fn){const hn=this._model.graph.getOutputNames();if(fn.length!==hn.length)throw new Error("expected number of outputs do not match number of generated outputs");const an=new Map;for(let rn=0;rn<hn.length;++rn)an.set(hn[rn],fn[rn]);return an}initializeOps(fn){const hn=fn.getNodes();this._ops=new Array(hn.length);for(let an=0;an<hn.length;an++)this._ops[an]=this.sessionHandler.resolve(hn[an],this._model.opsets,fn)}}},9162:function(St,e,en){var tn=this&&this.__importDefault||function(mn){return mn&&mn.__esModule?mn:{default:mn}};Object.defineProperty(e,"__esModule",{value:!0}),e.Tensor=void 0;const nn=en(3442),sn=tn(en(3720)),on=en(1446),un=en(9395),dn=en(2517);var fn=un.onnxruntime.experimental.fbs;class hn{get data(){if(this.cache===void 0){const xn=this.dataProvider(this.dataId);if(xn.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=xn}return this.cache}get stringData(){if(this.type!=="string")throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if(this.type!=="string")return this.data;throw new TypeError("type cannot be non-number (string)")}get(xn){return this.data[dn.ShapeUtil.indicesToOffset(xn,this.strides)]}set(xn,gn){this.data[dn.ShapeUtil.indicesToOffset(xn,this.strides)]=gn}async getData(){return this.cache===void 0&&(this.cache=await this.asyncDataProvider(this.dataId)),this.cache}get strides(){return this._strides||(this._strides=dn.ShapeUtil.computeStrides(this.dims)),this._strides}constructor(xn,gn,yn,bn,wn,_n=nn.Guid.create()){this.dims=xn,this.type=gn,this.dataProvider=yn,this.asyncDataProvider=bn,this.cache=wn,this.dataId=_n,this.size=dn.ShapeUtil.validateDimsAndCalcSize(xn);const Tn=this.size,An=yn===void 0&&bn===void 0&&wn===void 0;if(wn!==void 0&&wn.length!==Tn)throw new RangeError("Input dims doesn't match data length.");if(gn==="string"){if(!(wn===void 0||Array.isArray(wn)&&wn.every(Pn=>typeof Pn=="string")))throw new TypeError("cache should be a string array");An&&(this.cache=new Array(Tn))}else{if(wn!==void 0){const Pn=rn(gn);if(!(wn instanceof Pn))throw new TypeError(`cache should be type ${Pn.name}`)}if(An){const Pn=new ArrayBuffer(Tn*function(Sn){switch(Sn){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${Sn}`)}}(gn));this.cache=function(Sn,Cn){return new(rn(Cn))(Sn)}(Pn,gn)}}}static fromProto(xn){if(!xn)throw new Error("cannot construct Value from an empty tensor");const gn=dn.ProtoUtil.tensorDataTypeFromProto(xn.dataType),yn=dn.ProtoUtil.tensorDimsFromProto(xn.dims),bn=new hn(yn,gn);if(gn==="string")xn.stringData.forEach((wn,_n)=>{bn.data[_n]=(0,dn.decodeUtf8String)(wn)});else if(xn.rawData&&typeof xn.rawData.byteLength=="number"&&xn.rawData.byteLength>0){const wn=bn.data,_n=new DataView(xn.rawData.buffer,xn.rawData.byteOffset,xn.rawData.byteLength),Tn=an(xn.dataType),An=xn.rawData.byteLength/Tn;if(xn.rawData.byteLength%Tn!=0)throw new Error("invalid buffer length");if(wn.length!==An)throw new Error("buffer length mismatch");for(let Pn=0;Pn<An;Pn++){const Sn=pn(_n,xn.dataType,Pn*Tn);wn[Pn]=Sn}}else{let wn;switch(xn.dataType){case on.onnx.TensorProto.DataType.FLOAT:wn=xn.floatData;break;case on.onnx.TensorProto.DataType.INT32:case on.onnx.TensorProto.DataType.INT16:case on.onnx.TensorProto.DataType.UINT16:case on.onnx.TensorProto.DataType.INT8:case on.onnx.TensorProto.DataType.UINT8:case on.onnx.TensorProto.DataType.BOOL:wn=xn.int32Data;break;case on.onnx.TensorProto.DataType.INT64:wn=xn.int64Data;break;case on.onnx.TensorProto.DataType.DOUBLE:wn=xn.doubleData;break;case on.onnx.TensorProto.DataType.UINT32:case on.onnx.TensorProto.DataType.UINT64:wn=xn.uint64Data;break;default:throw new Error("unspecific error")}if(wn==null)throw new Error("failed to populate data from a tensorproto value");const _n=bn.data;if(_n.length!==wn.length)throw new Error("array length mismatch");for(let Tn=0;Tn<wn.length;Tn++){const An=wn[Tn];sn.default.isLong(An)?_n[Tn]=cn(An,xn.dataType):_n[Tn]=An}}return bn}static fromData(xn,gn,yn){return new hn(gn,yn,void 0,void 0,xn)}static fromOrtTensor(xn){if(!xn)throw new Error("cannot construct Value from an empty tensor");const gn=dn.ProtoUtil.tensorDimsFromORTFormat(xn),yn=dn.ProtoUtil.tensorDataTypeFromProto(xn.dataType()),bn=new hn(gn,yn);if(yn==="string")for(let wn=0;wn<xn.stringDataLength();wn++)bn.data[wn]=xn.stringData(wn);else if(xn.rawDataArray()&&typeof xn.rawDataLength()=="number"&&xn.rawDataLength()>0){const wn=bn.data,_n=new DataView(xn.rawDataArray().buffer,xn.rawDataArray().byteOffset,xn.rawDataLength()),Tn=an(xn.dataType()),An=xn.rawDataLength()/Tn;if(xn.rawDataLength()%Tn!=0)throw new Error("invalid buffer length");if(wn.length!==An)throw new Error("buffer length mismatch");for(let Pn=0;Pn<An;Pn++){const Sn=pn(_n,xn.dataType(),Pn*Tn);wn[Pn]=Sn}}return bn}}function an(mn){switch(mn){case on.onnx.TensorProto.DataType.UINT8:case on.onnx.TensorProto.DataType.INT8:case on.onnx.TensorProto.DataType.BOOL:return 1;case on.onnx.TensorProto.DataType.UINT16:case on.onnx.TensorProto.DataType.INT16:return 2;case on.onnx.TensorProto.DataType.FLOAT:case on.onnx.TensorProto.DataType.INT32:case on.onnx.TensorProto.DataType.UINT32:return 4;case on.onnx.TensorProto.DataType.INT64:case on.onnx.TensorProto.DataType.DOUBLE:case on.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${on.onnx.TensorProto.DataType[mn]}`)}}function rn(mn){switch(mn){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function cn(mn,xn){if(xn===on.onnx.TensorProto.DataType.INT64||xn===fn.TensorDataType.INT64){if(mn.greaterThanOrEqual(2147483648)||mn.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else{if(xn!==on.onnx.TensorProto.DataType.UINT32&&xn!==fn.TensorDataType.UINT32&&xn!==on.onnx.TensorProto.DataType.UINT64&&xn!==fn.TensorDataType.UINT64)throw new TypeError(`not a LONG type: ${on.onnx.TensorProto.DataType[xn]}`);if(mn.greaterThanOrEqual(4294967296)||mn.lessThan(0))throw new TypeError("uint64 is not supported")}return mn.toNumber()}function pn(mn,xn,gn){switch(xn){case on.onnx.TensorProto.DataType.BOOL:case on.onnx.TensorProto.DataType.UINT8:return mn.getUint8(gn);case on.onnx.TensorProto.DataType.INT8:return mn.getInt8(gn);case on.onnx.TensorProto.DataType.UINT16:return mn.getUint16(gn,!0);case on.onnx.TensorProto.DataType.INT16:return mn.getInt16(gn,!0);case on.onnx.TensorProto.DataType.FLOAT:return mn.getFloat32(gn,!0);case on.onnx.TensorProto.DataType.INT32:return mn.getInt32(gn,!0);case on.onnx.TensorProto.DataType.UINT32:return mn.getUint32(gn,!0);case on.onnx.TensorProto.DataType.INT64:return cn(sn.default.fromBits(mn.getUint32(gn,!0),mn.getUint32(gn+4,!0),!1),xn);case on.onnx.TensorProto.DataType.DOUBLE:return mn.getFloat64(gn,!0);case on.onnx.TensorProto.DataType.UINT64:return cn(sn.default.fromBits(mn.getUint32(gn,!0),mn.getUint32(gn+4,!0),!0),xn);default:throw new Error(`cannot read from DataView for type ${on.onnx.TensorProto.DataType[xn]}`)}}e.Tensor=hn},2517:function(St,e,en){var tn=this&&this.__importDefault||function(xn){return xn&&xn.__esModule?xn:{default:xn}};Object.defineProperty(e,"__esModule",{value:!0}),e.decodeUtf8String=e.MAX_CLIP=e.MIN_CLIP=e.PoolConvUtil=e.ReduceUtil=e.SplitUtil=e.MathUtil=e.ShapeUtil=e.LongUtil=e.ProtoUtil=e.GemmUtil=e.arrayCopyHelper=e.BroadcastUtil=e.MatMulUtil=e.ArrayUtil=e.assert=e.checkInputsShape=void 0;const nn=en(5686),sn=tn(en(3720)),on=en(1446),un=en(9162);e.checkInputsShape=function(xn,...gn){if(!xn||xn.length!==gn.length)return!1;for(let yn=0;yn<xn.length;yn++)if(!xn[yn].dims||xn[yn].dims.length!==gn[yn])return!1;return!0},e.assert=function(xn,gn){if(!xn)throw new Error(typeof gn=="string"?gn:gn())},e.ArrayUtil=class{static arraysEqual(xn,gn){if(xn.length!==gn.length)return!1;for(let yn=0;yn<xn.length;yn++)if(xn[yn]!==gn[yn])return!1;return!0}};class dn{static preprocessInputShapes(gn,yn){return[gn.length===1?[1,gn[0]]:gn,yn.length===1?[yn[0],1]:yn]}static postprocessOutputShape(gn,yn,bn){yn===1&&gn.splice(gn.length-2,1),bn===1&&gn.pop()}static calcMatMulShape(gn,yn){return gn[1]!==yn[0]?void 0:[gn[0],yn[1]]}}e.MatMulUtil=dn;class fn{static calcShape(gn,yn,bn=!1){const wn=gn.length,_n=yn.length;if(wn===0)return yn;if(_n===0)return gn;const Tn=Math.max(gn.length,yn.length),An=new Array(Tn);if(bn){if(wn<2||_n<2)return;const Pn=dn.calcMatMulShape([gn[wn-2],gn[wn-1]],[yn[_n-2],yn[_n-1]]);if(Pn===void 0)return;[An[Tn-2],An[Tn-1]]=Pn}for(let Pn=bn?3:1;Pn<=Tn;Pn++){const Sn=wn-Pn<0?1:gn[wn-Pn],Cn=_n-Pn<0?1:yn[_n-Pn];if(Sn!==Cn&&Sn>1&&Cn>1)return;An[Tn-Pn]=Math.max(Sn,Cn)}return An}static index(gn,yn){const bn=new Array(yn.length);return fn.fillIndex(gn,yn,bn),bn}static fillIndex(gn,yn,bn){const wn=gn.length-yn.length;for(let _n=0;_n<yn.length;_n++)bn[_n]=gn[wn+_n]%yn[_n]}static calc(gn,yn,bn,wn,_n){const Tn=fn.calcShape(gn.dims,yn.dims);if(Tn){if(wn&&!rn.areEqual(Tn,gn.dims))return;const An=rn.size(Tn),Pn=wn?gn:new un.Tensor(Tn,_n||gn.type);if(Tn.length===0)Pn.set([],bn(gn.get([]),yn.get([])));else{const Sn=new Array(Tn.length),Cn=new Array(gn.dims.length),Nn=new Array(yn.dims.length);let Mn,Fn=0,In=0,Bn=!1,Ln=!1;gn.dims.length===0&&(Fn=gn.get([]),Bn=!0),yn.dims.length===0&&(In=yn.get([]),Ln=!0);for(let qn=0;qn<An;qn++){Mn=qn;for(let Yn=Tn.length-1;Yn>=0;Yn--)Sn[Yn]=Mn%Tn[Yn],Mn=Math.floor(Mn/Tn[Yn]);Bn||(fn.fillIndex(Sn,gn.dims,Cn),Fn=gn.get(Cn)),Ln||(fn.fillIndex(Sn,yn.dims,Nn),In=yn.get(Nn)),Pn.set(Sn,bn(Fn,In))}}return Pn}}static isValidBroadcast(gn,yn){const bn=gn.length,wn=yn.length;if(bn>wn)return!1;for(let _n=1;_n<=bn;_n++)if(gn[bn-_n]!==1&&gn[bn-_n]!==yn[wn-_n])return!1;return!0}static getBroadcastDims(gn,yn){const bn=gn.length,wn=[];for(let _n=0;_n<bn;_n++){const Tn=bn-1-_n,An=gn[Tn]||1;(yn[yn.length-1-_n]||1)>1&&An===1&&wn.unshift(Tn)}return wn}}e.BroadcastUtil=fn,e.arrayCopyHelper=function(xn,gn,yn,bn,wn){if(bn<0||bn>=gn.length)throw new Error("sourceIndex out of bounds");if(yn<0||yn>=xn.length)throw new Error("targetIndex out of bounds");if(bn+wn>gn.length)throw new Error("source indices to be copied are outside bounds");if(yn+wn>xn.length)throw new Error("target array is too small to hold result");for(let _n=0;_n<wn;_n++)xn[yn+_n]=gn[bn+_n]},e.GemmUtil=class{static getShapeOfGemmResult(xn,gn,yn,bn,wn){if(xn.length!==2||yn.length!==2)throw new Error("shape need to be of size 2");let _n,Tn,An;gn?(_n=xn[1],Tn=xn[0]):(_n=xn[0],Tn=xn[1]);let Pn=-1;if(bn?(An=yn[0],Pn=1):(An=yn[1],Pn=0),yn[Pn]!==Tn)throw new Error("dimension mismatch");if(_n<=0||An<=0||Tn<=0)throw new Error("invalid shape specified");if(wn&&!fn.isValidBroadcast(wn,[_n,An]))throw new Error("gemm: invalid bias shape for broadcast");return[_n,An,Tn]}};class hn{static tensorDataTypeFromProto(gn){switch(gn){case on.onnx.TensorProto.DataType.INT8:return"int8";case on.onnx.TensorProto.DataType.UINT8:return"uint8";case on.onnx.TensorProto.DataType.BOOL:return"bool";case on.onnx.TensorProto.DataType.INT16:return"int16";case on.onnx.TensorProto.DataType.UINT16:return"uint16";case on.onnx.TensorProto.DataType.INT32:return"int32";case on.onnx.TensorProto.DataType.UINT32:return"uint32";case on.onnx.TensorProto.DataType.FLOAT:return"float32";case on.onnx.TensorProto.DataType.DOUBLE:return"float64";case on.onnx.TensorProto.DataType.STRING:return"string";case on.onnx.TensorProto.DataType.INT64:return"int32";case on.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${on.onnx.TensorProto.DataType[gn]}`)}}static tensorDataTypeStringToEnum(gn){switch(gn){case"int8":return on.onnx.TensorProto.DataType.INT8;case"uint8":return on.onnx.TensorProto.DataType.UINT8;case"bool":return on.onnx.TensorProto.DataType.BOOL;case"int16":return on.onnx.TensorProto.DataType.INT16;case"uint16":return on.onnx.TensorProto.DataType.UINT16;case"int32":return on.onnx.TensorProto.DataType.INT32;case"uint32":return on.onnx.TensorProto.DataType.UINT32;case"float32":return on.onnx.TensorProto.DataType.FLOAT;case"float64":return on.onnx.TensorProto.DataType.DOUBLE;case"string":return on.onnx.TensorProto.DataType.STRING;case"int64":return on.onnx.TensorProto.DataType.INT64;case"uint64":return on.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${gn}`)}}static tensorDimsFromProto(gn){return gn.map(yn=>sn.default.isLong(yn)?yn.toNumber():yn)}static tensorValueTypeFromProto(gn){return{tensorType:hn.tensorDataTypeFromProto(gn.elemType),shape:{dims:hn.tensorDimsFromProto(gn.shape.dim.map(yn=>yn.dimValue))}}}static tensorDimsFromORTFormat(gn){const yn=[];for(let bn=0;bn<gn.dimsLength();bn++)yn.push(an.longToNumber(gn.dims(bn)));return yn}static tensorAttributesFromORTFormat(gn){const yn=[];for(let bn=0;bn<gn.attributesLength();bn++)yn.push(gn.attributes(bn));return yn}}e.ProtoUtil=hn;class an{static longToNumber(gn,yn){return sn.default.isLong(gn)?gn.toNumber():gn instanceof nn.flatbuffers.Long?sn.default.fromValue({low:gn.low,high:gn.high,unsigned:yn!=null&&yn}).toNumber():gn}static isLong(gn){return sn.default.isLong(gn)||gn instanceof nn.flatbuffers.Long}}e.LongUtil=an;class rn{static size(gn){return rn.getSizeFromDimensionRange(gn,0,gn.length)}static sizeFromDimension(gn,yn){if(yn<0||yn>gn.length)throw new Error(`invalid dimension of ${yn} for sizeFromDimension as Tensor has ${gn.length} dimensions.`);return rn.getSizeFromDimensionRange(gn,yn,gn.length)}static sizeToDimension(gn,yn){if(yn<0||yn>gn.length)throw new Error(`invalid dimension of ${yn} for sizeToDimension as Tensor has ${gn.length} dimensions.`);return rn.getSizeFromDimensionRange(gn,0,yn)}static getSizeFromDimensionRange(gn,yn,bn){let wn=1;for(let _n=yn;_n<bn;_n++){if(gn[_n]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");wn*=gn[_n]}return wn}static computeStrides(gn){const yn=gn.length;if(yn===0)return[];if(yn===1)return[1];const bn=new Array(yn);bn[yn-1]=1,bn[yn-2]=gn[yn-1];for(let wn=yn-3;wn>=0;--wn)bn[wn]=bn[wn+1]*gn[wn+1];return bn}static transpose(gn){return gn.slice().reverse()}static indicesToOffset(gn,yn,bn){bn===void 0&&(bn=gn.length);let wn=0;for(let _n=0;_n<bn;++_n)wn+=yn[_n]*gn[_n];return wn}static offsetToIndices(gn,yn){const bn=yn.length;if(bn===0)return[];if(bn===1)return[gn*yn[0]];const wn=new Array(yn.length);for(let _n=0;_n<wn.length-1;++_n)wn[_n]=Math.floor(gn/yn[_n]),gn-=wn[_n]*yn[_n];return wn[wn.length-1]=gn,wn}static normalizeAxis(gn,yn){if(gn<-yn&&gn>=yn)throw new Error("unsupported axis for this operation.");return gn<0?gn+yn:gn}static normalizeAxes(gn,yn){return gn.map(bn=>this.normalizeAxis(bn,yn))}static incrementIndex(gn,yn,bn){if(yn.length===0||gn.length===0)throw new Error("Index incrementing unsupported for scalar Tensor");if(bn===void 0)bn=yn.length;else if(bn<=0||bn>yn.length)throw new Error("Incorrect axis to increment on");for(let wn=bn-1;wn>=0&&(gn[wn]++,!(gn[wn]<yn[wn]));--wn)gn[wn]=0}static calculateReshapedDims(gn,yn){if(yn.length===0){if(gn.length===0||rn.size(gn)===1)return[];throw new Error("cannot reshape to a scalar Tensor")}const bn=yn.length,wn=new Array(bn);let _n=-1,Tn=1;for(let Pn=0;Pn<bn;Pn++){if(yn[Pn]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(yn[Pn]===-1){if(_n!==-1)throw new Error("at most one dimension in shape hints can be -1");_n=Pn}else{if(yn[Pn]===0){if(Pn>=gn.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");wn[Pn]=gn[Pn]}else wn[Pn]=yn[Pn];Tn*=wn[Pn]}}const An=rn.size(gn);if(_n!==-1){if(An%Tn!=0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${gn}] Output shape: [${yn}]`);wn[_n]=An/Tn}else if(Tn!==An)throw new Error("reshapedDims and originalDims don't have matching sizes");return wn}static sortBasedOnPerm(gn,yn){return yn?yn.map(bn=>gn[bn]):gn.slice().reverse()}static padShape(gn,yn){const bn=gn.length;return gn.map((wn,_n)=>wn+yn[_n]+yn[_n+bn])}static areEqual(gn,yn){return gn.length===yn.length&&gn.every((bn,wn)=>bn===yn[wn])}static validateDimsAndCalcSize(gn){if(gn.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let yn=1;for(const bn of gn){if(!Number.isInteger(bn))throw new TypeError(`Invalid shape: ${bn} is not an integer`);if(bn<0||bn>2147483647)throw new TypeError(`Invalid shape: length ${bn} is not allowed`);yn*=bn}return yn}static flattenShape(gn,yn){yn<0&&(yn+=gn.length);const bn=gn.reduce((_n,Tn)=>_n*Tn,1),wn=gn.slice(yn).reduce((_n,Tn)=>_n*Tn,1);return[bn/wn,wn]}static squeezeShape(gn,yn){const bn=new Array;yn=rn.normalizeAxes(yn,gn.length);for(let wn=0;wn<gn.length;wn++){const _n=yn.indexOf(wn)>=0;if(_n&&gn[wn]!==1)throw new Error("squeeze an axis of size different than 1");(yn.length===0&&gn[wn]>1||yn.length>0&&!_n)&&bn.push(gn[wn])}return bn}static unsqueezeShape(gn,yn){const bn=new Array(gn.length+yn.length);bn.fill(0);for(let _n=0;_n<yn.length;_n++){const Tn=rn.normalizeAxis(yn[_n],bn.length);if(Tn>=bn.length)throw new Error("'axes' has an out of range axis");if(bn[Tn]!==0)throw new Error("'axes' has a duplicate axis");bn[Tn]=1}let wn=0;for(let _n=0;_n<bn.length;_n++)bn[_n]===0&&(bn[_n]=gn[wn++]);if(wn!==gn.length)throw new Error("the unsqueezed dimension could not be established");return bn}}e.ShapeUtil=rn,e.MathUtil=class{static sqr(xn,gn,yn,bn,wn){if(bn<0||bn>=gn.length)throw new Error("sourceIndex out of bounds");if(yn<0||yn>=xn.length)throw new Error("targetIndex out of bounds");if(bn+wn>gn.length)throw new Error("source indices to be copied are outside bounds");if(yn+wn>xn.length)throw new Error("target array is too small to hold result");for(let _n=0;_n<wn;_n++)xn[yn+_n]+=Math.pow(gn[bn+_n],2)}static axpy(xn,gn,yn,bn,wn,_n){if(bn<0||bn>=gn.length)throw new Error("sourceIndex out of bounds");if(yn<0||yn>=xn.length)throw new Error("targetIndex out of bounds");if(bn+wn>gn.length)throw new Error("source indices to be copied are outside bounds");if(yn+wn>xn.length)throw new Error("target array is too small to hold result");for(let Tn=0;Tn<wn;Tn++)xn[yn+Tn]+=_n*gn[bn+Tn]}static powx(xn,gn,yn,bn,wn,_n){if(bn<0||bn>=gn.length)throw new Error("sourceIndex out of bounds");if(yn<0||yn>=xn.length)throw new Error("targetIndex out of bounds");if(bn+wn>gn.length)throw new Error("source indices to be copied are outside bounds");if(yn+wn>xn.length)throw new Error("target array is too small to hold result");for(let Tn=0;Tn<wn;Tn++)xn[yn+Tn]=Math.pow(gn[bn+Tn],_n)}static mul(xn,gn,yn,bn,wn){if(bn<0||bn>=gn.length)throw new Error("sourceIndex out of bounds");if(yn<0||yn>=xn.length)throw new Error("targetIndex out of bounds");if(bn+wn>gn.length)throw new Error("source indices to be copied are outside bounds");if(yn+wn>xn.length)throw new Error("target array is too small to hold result");for(let _n=0;_n<wn;_n++)xn[yn+_n]=gn[bn+_n]*xn[yn+_n]}};class cn{static splitShape(gn,yn,bn,wn){if(bn.length===0){if(!wn)throw new Error("need to know number of outputs when the 'split' attribute is not specified");cn.determineSplit(gn[yn],wn,bn)}const _n=[],Tn=[0];for(let An=0;An<bn.length;++An){An!==0&&Tn.push(Tn[An-1]+bn[An-1]);const Pn=gn.slice();Pn[yn]=bn[An],_n.push(Pn)}return[_n,Tn]}static determineSplit(gn,yn,bn){if(gn%yn!=0)throw new Error("cannot split tensor to equal sized parts");for(let wn=0;wn<yn;++wn)bn.push(gn/yn)}}e.SplitUtil=cn;class pn{static calcReduce(gn,yn,bn,wn,_n){const Tn=gn.dims.slice(0);yn.length===0&&Tn.forEach((Fn,In)=>yn.push(In));const An=pn.calcReduceShape(Tn,yn,!0),Pn=rn.size(An),Sn=new un.Tensor(An,gn.type),Cn=rn.computeStrides(An),Nn=rn.computeStrides(Tn),Mn=new Array(Tn.length);for(let Fn=0;Fn<Pn;Fn++){const In=rn.offsetToIndices(Fn,Cn);fn.fillIndex(In,Tn,Mn),Sn.set(In,pn.calcReduceByAxis(gn.numberData,yn,Tn,0,rn.indicesToOffset(Mn,Nn),wn,_n))}return bn?Sn:new un.Tensor(pn.calcReduceShape(Tn,yn,bn),Sn.type,void 0,void 0,Sn.data,Sn.dataId)}static calcReduceByAxis(gn,yn,bn,wn,_n,Tn,An){let Pn=0;if(wn>=yn.length)return Tn(gn[_n]);const Sn=yn[wn],Cn=Sn>=bn.length?1:rn.size(bn.slice(Sn+1));for(let Nn=0;Nn<bn[Sn];Nn++)Pn=Nn===0?pn.calcReduceByAxis(gn,yn,bn,wn+1,_n,Tn,An):An(Pn,pn.calcReduceByAxis(gn,yn,bn,wn+1,_n,Tn,An)),_n+=Cn;return Pn}static calcReduceShape(gn,yn,bn){const wn=gn.slice();for(let _n=0;_n<yn.length;_n++)wn[yn[_n]]=bn?1:0;return wn.filter(_n=>_n!==0)}}e.ReduceUtil=pn;class mn{static adjustPoolAttributes(gn,yn,bn,wn,_n,Tn){if(!gn&&bn.length!==yn.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(gn)for(let An=0;An<yn.length-2;An++)An>=bn.length?bn.push(yn[An+2]):bn[An]=yn[An+2];for(let An=0;An<bn.length;An++)if(An<wn.length){if(wn[An]<0)throw new Error("strides should be greater than or equal to 1")}else wn.push(1);for(let An=0;An<bn.length;An++)if(An<_n.length){if(_n[An]<0)throw new Error("dilations should be greater than or equal to 1")}else _n.push(1);for(let An=0;An<2*bn.length;An++)if(An<Tn.length){if(Tn[An]<0)throw new Error("pad should be greater than or equal to 1")}else Tn.push(0);for(let An=0;An<bn.length;An++){if(bn[An]<=0)throw new Error("kernel shapes need to be greater than 0");if(Tn[An]>=bn[An]||Tn[An+bn.length]>=bn[An])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(gn,yn,bn,wn,_n,Tn){if(Tn){if(_n.length!==2*(gn.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(yn.length!==gn.length-2)throw new Error("length of strides should be the length of data dimensions");if(wn.length!==gn.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let An=0;An<gn.length-2;An++)mn.adjustPadAndReturnShape(gn[An+2],yn[An],bn[An],wn[An],_n,An,An+gn.length-2,Tn)}}static computePoolOutputShape(gn,yn,bn,wn,_n,Tn,An){if(yn.length<=0)throw new Error("input shape must be of size greater than 0");const Pn=[yn[0],yn[1]];return mn.computeShapeHelper(gn,yn,Pn,bn,wn,_n,Tn,An),Pn}static computeConvOutputShape(gn,yn,bn,wn,_n,Tn,An){if(gn.length<=0||yn.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");const Pn=[gn[0],yn[0]];return mn.computeShapeHelper(!1,gn,Pn,bn,wn,_n,Tn,An),Pn}static computeShapeHelper(gn,yn,bn,wn,_n,Tn,An,Pn){if(gn)for(let Sn=0;Sn<yn.length-2;Sn++)bn.push(1);else for(let Sn=0;Sn<yn.length-2;Sn++)bn.push(mn.adjustPadAndReturnShape(yn[Sn+2],wn[Sn],_n[Sn],Tn[Sn],An,Sn,Sn+yn.length-2,Pn))}static adjustPadAndReturnShape(gn,yn,bn,wn,_n,Tn,An,Pn){const Sn=bn*(wn-1)+1;if(!Pn||Pn==="NOTSET")return Math.floor((gn+_n[Tn]+_n[An]-Sn)/yn+1);switch(Pn){case"VALID":return _n[Tn]=0,_n[An]=0,Math.floor((gn-Sn)/yn+1);case"SAME_LOWER":case"SAME_UPPER":if(bn!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{const Cn=((gn+yn-1)/yn-1)*yn+wn-gn;return _n[Tn]=Math.floor(Pn==="SAME_LOWER"?(Cn+1)/2:Cn/2),_n[An]=Cn-_n[Tn],Math.floor((gn+Cn-wn)/yn+1)}default:throw new Error("Unsupported AutoPad type")}}}e.PoolConvUtil=mn,e.MIN_CLIP=-34028234663852886e22,e.MAX_CLIP=34028234663852886e22,e.decodeUtf8String=function(xn){return new TextDecoder().decode(xn)}},7967:(St,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.iterateExtraOptions=void 0,e.iterateExtraOptions=(en,tn,nn,sn)=>{if(typeof en=="object"&&en!==null){if(nn.has(en))throw new Error("Circular reference in options");nn.add(en)}Object.entries(en).forEach(([on,un])=>{const dn=tn?tn+on:on;if(typeof un=="object")(0,e.iterateExtraOptions)(un,dn+".",nn,sn);else if(typeof un=="string"||typeof un=="number")sn(dn,un.toString());else{if(typeof un!="boolean")throw new Error("Can't handle extra config type: "+typeof un);sn(dn,un?"1":"0")}})}},2157:function(St,e,en){var tn,nn=this&&this.__createBinding||(Object.create?function(Cn,Nn,Mn,Fn){Fn===void 0&&(Fn=Mn);var In=Object.getOwnPropertyDescriptor(Nn,Mn);In&&!("get"in In?!Nn.__esModule:In.writable||In.configurable)||(In={enumerable:!0,get:function(){return Nn[Mn]}}),Object.defineProperty(Cn,Fn,In)}:function(Cn,Nn,Mn,Fn){Fn===void 0&&(Fn=Mn),Cn[Fn]=Nn[Mn]}),sn=this&&this.__setModuleDefault||(Object.create?function(Cn,Nn){Object.defineProperty(Cn,"default",{enumerable:!0,value:Nn})}:function(Cn,Nn){Cn.default=Nn}),on=this&&this.__importStar||function(Cn){if(Cn&&Cn.__esModule)return Cn;var Nn={};if(Cn!=null)for(var Mn in Cn)Mn!=="default"&&Object.prototype.hasOwnProperty.call(Cn,Mn)&&nn(Nn,Cn,Mn);return sn(Nn,Cn),Nn};Object.defineProperty(e,"__esModule",{value:!0}),e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=e.initWasm=void 0;const un=en(1670),dn=on(en(349)),fn=en(6361),hn=()=>!!un.env.wasm.proxy&&typeof document<"u";let an,rn,cn,pn=!1,mn=!1,xn=!1;const gn=[],yn=[],bn=[],wn=[],_n=[],Tn=[],An=()=>{if(pn||!mn||xn||!an)throw new Error("worker not ready")},Pn=Cn=>{switch(Cn.data.type){case"init-wasm":pn=!1,Cn.data.err?(xn=!0,rn[1](Cn.data.err)):(mn=!0,rn[0]());break;case"init-ort":Cn.data.err?cn[1](Cn.data.err):cn[0]();break;case"create_allocate":Cn.data.err?gn.shift()[1](Cn.data.err):gn.shift()[0](Cn.data.out);break;case"create_finalize":Cn.data.err?yn.shift()[1](Cn.data.err):yn.shift()[0](Cn.data.out);break;case"create":Cn.data.err?bn.shift()[1](Cn.data.err):bn.shift()[0](Cn.data.out);break;case"release":Cn.data.err?wn.shift()[1](Cn.data.err):wn.shift()[0]();break;case"run":Cn.data.err?_n.shift()[1](Cn.data.err):_n.shift()[0](Cn.data.out);break;case"end-profiling":Cn.data.err?Tn.shift()[1](Cn.data.err):Tn.shift()[0]()}},Sn=typeof document<"u"?(tn=document==null?void 0:document.currentScript)===null||tn===void 0?void 0:tn.src:void 0;e.initWasm=async()=>{if(hn()){if(mn)return;if(pn)throw new Error("multiple calls to 'initWasm()' detected.");if(xn)throw new Error("previous call to 'initWasm()' failed.");return pn=!0,un.env.wasm.wasmPaths===void 0&&Sn&&Sn.indexOf("blob:")!==0&&(un.env.wasm.wasmPaths=Sn.substr(0,+Sn.lastIndexOf("/")+1)),new Promise((Cn,Nn)=>{an==null||an.terminate(),an=en(9710).Z(),an.onmessage=Pn,rn=[Cn,Nn];const Mn={type:"init-wasm",in:un.env.wasm};an.postMessage(Mn)})}return(0,fn.initializeWebAssembly)(un.env.wasm)},e.initOrt=async(Cn,Nn)=>{if(hn())return An(),new Promise((Mn,Fn)=>{cn=[Mn,Fn];const In={type:"init-ort",in:{numThreads:Cn,loggingLevel:Nn}};an.postMessage(In)});dn.initOrt(Cn,Nn)},e.createSessionAllocate=async Cn=>hn()?(An(),new Promise((Nn,Mn)=>{gn.push([Nn,Mn]);const Fn={type:"create_allocate",in:{model:Cn}};an.postMessage(Fn,[Cn.buffer])})):dn.createSessionAllocate(Cn),e.createSessionFinalize=async(Cn,Nn)=>hn()?(An(),new Promise((Mn,Fn)=>{yn.push([Mn,Fn]);const In={type:"create_finalize",in:{modeldata:Cn,options:Nn}};an.postMessage(In)})):dn.createSessionFinalize(Cn,Nn),e.createSession=async(Cn,Nn)=>hn()?(An(),new Promise((Mn,Fn)=>{bn.push([Mn,Fn]);const In={type:"create",in:{model:Cn,options:Nn}};an.postMessage(In,[Cn.buffer])})):dn.createSession(Cn,Nn),e.releaseSession=async Cn=>{if(hn())return An(),new Promise((Nn,Mn)=>{wn.push([Nn,Mn]);const Fn={type:"release",in:Cn};an.postMessage(Fn)});dn.releaseSession(Cn)},e.run=async(Cn,Nn,Mn,Fn,In)=>hn()?(An(),new Promise((Bn,Ln)=>{_n.push([Bn,Ln]);const qn={type:"run",in:{sessionId:Cn,inputIndices:Nn,inputs:Mn,outputIndices:Fn,options:In}};an.postMessage(qn,dn.extractTransferableBuffers(Mn))})):dn.run(Cn,Nn,Mn,Fn,In),e.endProfiling=async Cn=>{if(hn())return An(),new Promise((Nn,Mn)=>{Tn.push([Nn,Mn]);const Fn={type:"end-profiling",in:Cn};an.postMessage(Fn)});dn.endProfiling(Cn)}},586:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setRunOptions=void 0;const tn=en(7967),nn=en(4983),sn=en(6361);e.setRunOptions=on=>{const un=(0,sn.getInstance)();let dn=0;const fn=[],hn=on||{};try{if((on==null?void 0:on.logSeverityLevel)===void 0)hn.logSeverityLevel=2;else if(typeof on.logSeverityLevel!="number"||!Number.isInteger(on.logSeverityLevel)||on.logSeverityLevel<0||on.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${on.logSeverityLevel}`);if((on==null?void 0:on.logVerbosityLevel)===void 0)hn.logVerbosityLevel=0;else if(typeof on.logVerbosityLevel!="number"||!Number.isInteger(on.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${on.logVerbosityLevel}`);(on==null?void 0:on.terminate)===void 0&&(hn.terminate=!1);let an=0;if((on==null?void 0:on.tag)!==void 0&&(an=(0,nn.allocWasmString)(on.tag,fn)),dn=un._OrtCreateRunOptions(hn.logSeverityLevel,hn.logVerbosityLevel,!!hn.terminate,an),dn===0)throw new Error("Can't create run options");return(on==null?void 0:on.extra)!==void 0&&(0,tn.iterateExtraOptions)(on.extra,"",new WeakSet,(rn,cn)=>{const pn=(0,nn.allocWasmString)(rn,fn),mn=(0,nn.allocWasmString)(cn,fn);if(un._OrtAddRunConfigEntry(dn,pn,mn)!==0)throw new Error(`Can't set a run config entry: ${rn} - ${cn}`)}),[dn,fn]}catch(an){throw dn!==0&&un._OrtReleaseRunOptions(dn),fn.forEach(un._free),an}}},2306:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OnnxruntimeWebAssemblySessionHandler=void 0;const tn=en(2806),nn=en(1670),sn=en(2850),on=en(2157);let un;e.OnnxruntimeWebAssemblySessionHandler=class{async createSessionAllocate(dn){const fn=await fetch(dn),hn=await fn.arrayBuffer();return(0,on.createSessionAllocate)(new Uint8Array(hn))}async loadModel(dn,fn){if(un||(await(0,on.initOrt)(nn.env.wasm.numThreads,(hn=>{switch(hn){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${hn}`)}})(nn.env.logLevel)),un=!0),typeof dn=="string")if(typeof fetch>"u"){const hn=await(0,sn.promisify)(tn.readFile)(dn);[this.sessionId,this.inputNames,this.outputNames]=await(0,on.createSession)(hn,fn)}else{const hn=await this.createSessionAllocate(dn);[this.sessionId,this.inputNames,this.outputNames]=await(0,on.createSessionFinalize)(hn,fn)}else[this.sessionId,this.inputNames,this.outputNames]=await(0,on.createSession)(dn,fn)}async dispose(){return(0,on.releaseSession)(this.sessionId)}async run(dn,fn,hn){const an=[],rn=[];Object.entries(dn).forEach(xn=>{const gn=xn[0],yn=xn[1],bn=this.inputNames.indexOf(gn);if(bn===-1)throw new Error(`invalid input '${gn}'`);an.push(yn),rn.push(bn)});const cn=[];Object.entries(fn).forEach(xn=>{const gn=xn[0],yn=this.outputNames.indexOf(gn);if(yn===-1)throw new Error(`invalid output '${gn}'`);cn.push(yn)});const pn=await(0,on.run)(this.sessionId,rn,an.map(xn=>[xn.type,xn.dims,xn.data]),cn,hn),mn={};for(let xn=0;xn<pn.length;xn++)mn[this.outputNames[cn[xn]]]=new nn.Tensor(pn[xn][0],pn[xn][2],pn[xn][1]);return mn}startProfiling(){}endProfiling(){(0,on.endProfiling)(this.sessionId)}}},4919:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setSessionOptions=void 0;const tn=en(7967),nn=en(4983),sn=en(6361);e.setSessionOptions=on=>{const un=(0,sn.getInstance)();let dn=0;const fn=[],hn=on||{};(an=>{an.extra||(an.extra={}),an.extra.session||(an.extra.session={});const rn=an.extra.session;rn.use_ort_model_bytes_directly||(rn.use_ort_model_bytes_directly="1")})(hn);try{(on==null?void 0:on.graphOptimizationLevel)===void 0&&(hn.graphOptimizationLevel="all");const an=(pn=>{switch(pn){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${pn}`)}})(hn.graphOptimizationLevel);(on==null?void 0:on.enableCpuMemArena)===void 0&&(hn.enableCpuMemArena=!0),(on==null?void 0:on.enableMemPattern)===void 0&&(hn.enableMemPattern=!0),(on==null?void 0:on.executionMode)===void 0&&(hn.executionMode="sequential");const rn=(pn=>{switch(pn){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${pn}`)}})(hn.executionMode);let cn=0;if((on==null?void 0:on.logId)!==void 0&&(cn=(0,nn.allocWasmString)(on.logId,fn)),(on==null?void 0:on.logSeverityLevel)===void 0)hn.logSeverityLevel=2;else if(typeof on.logSeverityLevel!="number"||!Number.isInteger(on.logSeverityLevel)||on.logSeverityLevel<0||on.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${on.logSeverityLevel}`);if((on==null?void 0:on.logVerbosityLevel)===void 0)hn.logVerbosityLevel=0;else if(typeof on.logVerbosityLevel!="number"||!Number.isInteger(on.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${on.logVerbosityLevel}`);if((on==null?void 0:on.enableProfiling)===void 0&&(hn.enableProfiling=!1),dn=un._OrtCreateSessionOptions(an,!!hn.enableCpuMemArena,!!hn.enableMemPattern,rn,!!hn.enableProfiling,0,cn,hn.logSeverityLevel,hn.logVerbosityLevel),dn===0)throw new Error("Can't create session options");return on!=null&&on.executionProviders&&((pn,mn,xn)=>{for(const gn of mn){let yn=typeof gn=="string"?gn:gn.name;switch(yn){case"xnnpack":yn="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${yn}`)}const bn=(0,nn.allocWasmString)(yn,xn);if((0,sn.getInstance)()._OrtAppendExecutionProvider(pn,bn)!==0)throw new Error(`Can't append execution provider: ${yn}`)}})(dn,on.executionProviders,fn),(on==null?void 0:on.extra)!==void 0&&(0,tn.iterateExtraOptions)(on.extra,"",new WeakSet,(pn,mn)=>{const xn=(0,nn.allocWasmString)(pn,fn),gn=(0,nn.allocWasmString)(mn,fn);if(un._OrtAddSessionConfigEntry(dn,xn,gn)!==0)throw new Error(`Can't set a session config entry: ${pn} - ${mn}`)}),[dn,fn]}catch(an){throw dn!==0&&un._OrtReleaseSessionOptions(dn),fn.forEach(un._free),an}}},4983:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.allocWasmString=void 0;const tn=en(6361);e.allocWasmString=(nn,sn)=>{const on=(0,tn.getInstance)(),un=on.lengthBytesUTF8(nn)+1,dn=on._malloc(un);return on.stringToUTF8(nn,dn,un),sn.push(dn),dn}},349:(St,e,en)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.extractTransferableBuffers=e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=void 0;const tn=en(586),nn=en(4919),sn=en(4983),on=en(6361);e.initOrt=(an,rn)=>{const cn=(0,on.getInstance)()._OrtInit(an,rn);if(cn!==0)throw new Error(`Can't initialize onnxruntime. error code = ${cn}`)};const un=new Map;e.createSessionAllocate=an=>{const rn=(0,on.getInstance)(),cn=rn._malloc(an.byteLength);return rn.HEAPU8.set(an,cn),[cn,an.byteLength]},e.createSessionFinalize=(an,rn)=>{const cn=(0,on.getInstance)();let pn=0,mn=0,xn=[];try{if([mn,xn]=(0,nn.setSessionOptions)(rn),pn=cn._OrtCreateSession(an[0],an[1],mn),pn===0)throw new Error("Can't create a session")}finally{cn._free(an[0]),cn._OrtReleaseSessionOptions(mn),xn.forEach(cn._free)}const gn=cn._OrtGetInputCount(pn),yn=cn._OrtGetOutputCount(pn),bn=[],wn=[],_n=[],Tn=[];for(let An=0;An<gn;An++){const Pn=cn._OrtGetInputName(pn,An);if(Pn===0)throw new Error("Can't get an input name");wn.push(Pn),bn.push(cn.UTF8ToString(Pn))}for(let An=0;An<yn;An++){const Pn=cn._OrtGetOutputName(pn,An);if(Pn===0)throw new Error("Can't get an output name");Tn.push(Pn),_n.push(cn.UTF8ToString(Pn))}return un.set(pn,[pn,wn,Tn]),[pn,bn,_n]},e.createSession=(an,rn)=>{const cn=(0,e.createSessionAllocate)(an);return(0,e.createSessionFinalize)(cn,rn)},e.releaseSession=an=>{const rn=(0,on.getInstance)(),cn=un.get(an);if(!cn)throw new Error("invalid session id");const pn=cn[0],mn=cn[1],xn=cn[2];mn.forEach(rn._OrtFree),xn.forEach(rn._OrtFree),rn._OrtReleaseSession(pn),un.delete(an)};const dn=an=>{switch(an){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${an}`)}},fn=an=>{switch(an){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${an}`)}},hn=an=>{switch(an){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${an}`)}};e.run=(an,rn,cn,pn,mn)=>{const xn=(0,on.getInstance)(),gn=un.get(an);if(!gn)throw new Error("invalid session id");const yn=gn[0],bn=gn[1],wn=gn[2],_n=rn.length,Tn=pn.length;let An=0,Pn=[];const Sn=[],Cn=[];try{[An,Pn]=(0,tn.setRunOptions)(mn);for(let Ln=0;Ln<_n;Ln++){const qn=cn[Ln][0],Yn=cn[Ln][1],Qn=cn[Ln][2];let zn,lr;if(Array.isArray(Qn)){lr=4*Qn.length,zn=xn._malloc(lr),Cn.push(zn);let er=zn/4;for(let sr=0;sr<Qn.length;sr++){if(typeof Qn[sr]!="string")throw new TypeError(`tensor data at index ${sr} is not a string`);xn.HEAPU32[er++]=(0,sn.allocWasmString)(Qn[sr],Cn)}}else lr=Qn.byteLength,zn=xn._malloc(lr),Cn.push(zn),xn.HEAPU8.set(new Uint8Array(Qn.buffer,Qn.byteOffset,lr),zn);const $n=xn.stackSave(),On=xn.stackAlloc(4*Yn.length);try{let er=On/4;Yn.forEach(ar=>xn.HEAP32[er++]=ar);const sr=xn._OrtCreateTensor(dn(qn),zn,lr,On,Yn.length);if(sr===0)throw new Error("Can't create a tensor");Sn.push(sr)}finally{xn.stackRestore($n)}}const Nn=xn.stackSave(),Mn=xn.stackAlloc(4*_n),Fn=xn.stackAlloc(4*_n),In=xn.stackAlloc(4*Tn),Bn=xn.stackAlloc(4*Tn);try{let Ln=Mn/4,qn=Fn/4,Yn=In/4,Qn=Bn/4;for(let $n=0;$n<_n;$n++)xn.HEAPU32[Ln++]=Sn[$n],xn.HEAPU32[qn++]=bn[rn[$n]];for(let $n=0;$n<Tn;$n++)xn.HEAPU32[Yn++]=0,xn.HEAPU32[Qn++]=wn[pn[$n]];let zn=xn._OrtRun(yn,Fn,Mn,_n,Bn,Tn,In,An);const lr=[];if(zn===0)for(let $n=0;$n<Tn;$n++){const On=xn.HEAPU32[In/4+$n],er=xn.stackSave(),sr=xn.stackAlloc(16);let ar,cr=0;try{if(zn=xn._OrtGetTensorData(On,sr,sr+4,sr+8,sr+12),zn!==0)throw new Error(`Can't access output tensor data. error code = ${zn}`);let gr=sr/4;const vr=xn.HEAPU32[gr++];cr=xn.HEAPU32[gr++];const Er=xn.HEAPU32[gr++],Rr=xn.HEAPU32[gr++],Kr=[];for(let Gr=0;Gr<Rr;Gr++)Kr.push(xn.HEAPU32[Er/4+Gr]);xn._OrtFree(Er);const Cr=Kr.length===0?1:Kr.reduce((Gr,Zn)=>Gr*Zn);if(ar=fn(vr),ar==="string"){const Gr=[];let Zn=cr/4;for(let Xr=0;Xr<Cr;Xr++){const hs=xn.HEAPU32[Zn++],us=Xr===Cr-1?void 0:xn.HEAPU32[Zn]-hs;Gr.push(xn.UTF8ToString(hs,us))}lr.push([ar,Kr,Gr])}else{const Gr=new(hn(ar))(Cr);new Uint8Array(Gr.buffer,Gr.byteOffset,Gr.byteLength).set(xn.HEAPU8.subarray(cr,cr+Gr.byteLength)),lr.push([ar,Kr,Gr])}}finally{xn.stackRestore(er),ar==="string"&&cr&&xn._free(cr),xn._OrtReleaseTensor(On)}}if(zn===0)return lr;throw new Error(`failed to call OrtRun(). error code = ${zn}.`)}finally{xn.stackRestore(Nn)}}finally{Sn.forEach(xn._OrtReleaseTensor),Cn.forEach(xn._free),xn._OrtReleaseRunOptions(An),Pn.forEach(xn._free)}},e.endProfiling=an=>{const rn=(0,on.getInstance)(),cn=un.get(an);if(!cn)throw new Error("invalid session id");const pn=cn[0],mn=rn._OrtEndProfiling(pn);if(mn===0)throw new Error("Can't get an profile file name");rn._OrtFree(mn)},e.extractTransferableBuffers=an=>{const rn=[];for(const cn of an){const pn=cn[2];!Array.isArray(pn)&&pn.buffer&&rn.push(pn.buffer)}return rn}},6361:function(St,e,en){var tn=this&&this.__createBinding||(Object.create?function(mn,xn,gn,yn){yn===void 0&&(yn=gn);var bn=Object.getOwnPropertyDescriptor(xn,gn);bn&&!("get"in bn?!xn.__esModule:bn.writable||bn.configurable)||(bn={enumerable:!0,get:function(){return xn[gn]}}),Object.defineProperty(mn,yn,bn)}:function(mn,xn,gn,yn){yn===void 0&&(yn=gn),mn[yn]=xn[gn]}),nn=this&&this.__setModuleDefault||(Object.create?function(mn,xn){Object.defineProperty(mn,"default",{enumerable:!0,value:xn})}:function(mn,xn){mn.default=xn}),sn=this&&this.__importStar||function(mn){if(mn&&mn.__esModule)return mn;var xn={};if(mn!=null)for(var gn in mn)gn!=="default"&&Object.prototype.hasOwnProperty.call(mn,gn)&&tn(xn,mn,gn);return nn(xn,mn),xn},on=this&&this.__importDefault||function(mn){return mn&&mn.__esModule?mn:{default:mn}};Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.getInstance=e.initializeWebAssembly=void 0;const un=sn(en(6449)),dn=on(en(932)),fn=en(3474);let hn,an=!1,rn=!1,cn=!1;const pn=(mn,xn)=>xn?mn?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":mn?"ort-wasm-simd.wasm":"ort-wasm.wasm";e.initializeWebAssembly=async mn=>{if(an)return Promise.resolve();if(rn)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(cn)throw new Error("previous call to 'initializeWebAssembly()' failed.");rn=!0;const xn=mn.initTimeout,gn=mn.numThreads,yn=mn.simd,bn=gn>1&&(()=>{try{return typeof SharedArrayBuffer<"u"&&(typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch{return!1}})(),wn=yn&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}})(),_n=typeof mn.wasmPaths=="string"?mn.wasmPaths:void 0,Tn=pn(!1,bn),An=pn(wn,bn),Pn=typeof mn.wasmPaths=="object"?mn.wasmPaths[An]:void 0;let Sn=!1;const Cn=[];if(xn>0&&Cn.push(new Promise(Nn=>{setTimeout(()=>{Sn=!0,Nn()},xn)})),Cn.push(new Promise((Nn,Mn)=>{const Fn=bn?fn:dn.default,In={locateFile:(Bn,Ln)=>bn&&Bn.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([en(4154)],{type:"text/javascript"})):Bn===Tn?Pn??(_n??Ln)+An:Ln+Bn};if(bn)if(typeof Blob>"u")In.mainScriptUrlOrBlob=un.join("/","ort-wasm-threaded.js");else{const Bn=`var ortWasmThreaded=(function(){var _scriptDir;return ${Fn.toString()}})();`;In.mainScriptUrlOrBlob=new Blob([Bn],{type:"text/javascript"})}Fn(In).then(Bn=>{rn=!1,an=!0,hn=Bn,Nn()},Bn=>{rn=!1,cn=!0,Mn(Bn)})})),await Promise.race(Cn),Sn)throw new Error(`WebAssembly backend initializing failed due to timeout: ${xn}ms`)},e.getInstance=()=>{if(an&&hn)return hn;throw new Error("WebAssembly is not initialized yet.")},e.dispose=()=>{var mn;!an||rn||cn||(rn=!0,(mn=hn.PThread)===null||mn===void 0||mn.terminateAllThreads(),hn=void 0,rn=!1,an=!1,cn=!0)}},9710:(St,e,en)=>{en.d(e,{Z:()=>sn});var tn=en(477),nn=en.n(tn);function sn(){return nn()('/*!\n* ONNX Runtime Web v1.14.0\n* Copyright (c) Microsoft Corporation. All rights reserved.\n* Licensed under the MIT License.\n*/\n(()=>{var t={474:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){function e(){return j.buffer!=D&&N(j.buffer),P}function r(){return j.buffer!=D&&N(j.buffer),U}function a(){return j.buffer!=D&&N(j.buffer),F}function i(){return j.buffer!=D&&N(j.buffer),I}function o(){return j.buffer!=D&&N(j.buffer),W}var u,c,s;t=t||{},u||(u=void 0!==t?t:{}),u.ready=new Promise((function(t,e){c=t,s=e}));var l,f,p,h,d,y,b=Object.assign({},u),m="./this.program",g=(t,e)=>{throw e},v="object"==typeof window,w="function"==typeof importScripts,_="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,O=u.ENVIRONMENT_IS_PTHREAD||!1,A="";function S(t){return u.locateFile?u.locateFile(t,A):A+t}if(_){let e;A=w?n(908).dirname(A)+"/":"//",y=()=>{d||(h=n(384),d=n(908))},l=function(t,e){return y(),t=d.normalize(t),h.readFileSync(t,e?void 0:"utf8")},p=t=>((t=l(t,!0)).buffer||(t=new Uint8Array(t)),t),f=(t,e,n)=>{y(),t=d.normalize(t),h.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(m=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof ct))throw t})),process.on("unhandledRejection",(function(t){throw t})),g=(t,e)=>{if(Q())throw process.exitCode=t,e;e instanceof ct||x("exiting due to exception: "+e),process.exit(t)},u.inspect=function(){return"[Emscripten Module object]"};try{e=n(925)}catch(t){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),t}n.g.Worker=e.Worker}else(v||w)&&(w?A=self.location.href:"undefined"!=typeof document&&document.currentScript&&(A=document.currentScript.src),_scriptDir&&(A=_scriptDir),A=0!==A.indexOf("blob:")?A.substr(0,A.replace(/[?#].*/,"").lastIndexOf("/")+1):"",_||(l=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},w&&(p=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),f=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)}));_&&"undefined"==typeof performance&&(n.g.performance=n(953).performance);var T=console.log.bind(console),E=console.warn.bind(console);_&&(y(),T=t=>h.writeSync(1,t+"\\n"),E=t=>h.writeSync(2,t+"\\n"));var M,C=u.print||T,x=u.printErr||E;Object.assign(u,b),b=null,u.thisProgram&&(m=u.thisProgram),u.quit&&(g=u.quit),u.wasmBinary&&(M=u.wasmBinary);var R=u.noExitRuntime||!1;"object"!=typeof WebAssembly&&at("no native wasm support detected");var j,k,D,P,U,F,I,W,H=!1,L="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function z(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&L)return L.decode(t.buffer instanceof SharedArrayBuffer?t.slice(e,n):t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function Y(t,e){return(t>>>=0)?z(r(),t,e):""}function B(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function G(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function N(t){D=t,u.HEAP8=P=new Int8Array(t),u.HEAP16=new Int16Array(t),u.HEAP32=F=new Int32Array(t),u.HEAPU8=U=new Uint8Array(t),u.HEAPU16=new Uint16Array(t),u.HEAPU32=I=new Uint32Array(t),u.HEAPF32=new Float32Array(t),u.HEAPF64=W=new Float64Array(t)}O&&(D=u.buffer);var V=u.INITIAL_MEMORY||16777216;if(O)j=u.wasmMemory,D=u.buffer;else if(u.wasmMemory)j=u.wasmMemory;else if(!((j=new WebAssembly.Memory({initial:V/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw x("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),_&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");j&&(D=j.buffer),V=D.byteLength,N(D);var $,q=[],X=[],J=[],Z=[];function Q(){return R||!1}function K(){var t=u.preRun.shift();q.unshift(t)}var tt,et=0,nt=null,rt=null;function at(t){throw O?postMessage({cmd:"onAbort",arg:t}):u.onAbort&&u.onAbort(t),x(t="Aborted("+t+")"),H=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),s(t),t}function it(){return tt.startsWith("data:application/octet-stream;base64,")}function ot(){var t=tt;try{if(t==tt&&M)return new Uint8Array(M);if(p)return p(t);throw"both async and sync fetching of the wasm failed"}catch(t){at(t)}}tt="ort-wasm-threaded.wasm",it()||(tt=S(tt));var ut={};function ct(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function st(t){(t=ht.Vb[t])||at(),ht.mc(t)}function lt(t){var e=ht.Cc();if(!e)return 6;ht.ac.push(e),ht.Vb[t.Ub]=e,e.Ub=t.Ub;var n={cmd:"run",start_routine:t.Ic,arg:t.zc,pthread_ptr:t.Ub};return e.$b=()=>{n.time=performance.now(),e.postMessage(n,t.Nc)},e.loaded&&(e.$b(),delete e.$b),0}function ft(t){if(O)return $t(1,1,t);Q()||(ht.oc(),u.onExit&&u.onExit(t),H=!0),g(t,new ct(t))}function pt(t,e){if(!e&&O)throw bt(t),"unwind";Q()||O||(me(),dt(J),be(0),re[1].length&&ae(1,10),re[2].length&&ae(2,10),ht.oc()),ft(t)}var ht={Yb:[],ac:[],qc:[],Vb:{},fc:function(){O&&ht.Ec()},Pc:function(){},Ec:function(){ht.receiveObjectTransfer=ht.Gc,ht.threadInitTLS=ht.pc,ht.setExitStatus=ht.nc,R=!1},nc:function(){},oc:function(){for(var t of Object.values(ht.Vb))ht.mc(t);for(t of ht.Yb)t.terminate();ht.Yb=[]},mc:function(t){var e=t.Ub;delete ht.Vb[e],ht.Yb.push(t),ht.ac.splice(ht.ac.indexOf(t),1),t.Ub=0,Oe(e)},Gc:function(){},pc:function(){ht.qc.forEach((t=>t()))},Fc:function(t,e){t.onmessage=n=>{var r=(n=n.data).cmd;if(t.Ub&&(ht.Bc=t.Ub),n.targetThread&&n.targetThread!=he()){var a=ht.Vb[n.Qc];a?a.postMessage(n,n.transferList):x(\'Internal error! Worker sent a message "\'+r+\'" to target pthread \'+n.targetThread+", but that thread no longer exists!")}else"processProxyingQueue"===r?zt(n.queue):"spawnThread"===r?lt(n):"cleanupThread"===r?st(n.thread):"killThread"===r?(n=n.thread,r=ht.Vb[n],delete ht.Vb[n],r.terminate(),Oe(n),ht.ac.splice(ht.ac.indexOf(r),1),r.Ub=0):"cancelThread"===r?ht.Vb[n.thread].postMessage({cmd:"cancel"}):"loaded"===r?(t.loaded=!0,e&&e(t),t.$b&&(t.$b(),delete t.$b)):"print"===r?C("Thread "+n.threadId+": "+n.text):"printErr"===r?x("Thread "+n.threadId+": "+n.text):"alert"===r?alert("Thread "+n.threadId+": "+n.text):"setimmediate"===n.target?t.postMessage(n):"onAbort"===r?u.onAbort&&u.onAbort(n.arg):r&&x("worker sent an unknown command "+r);ht.Bc=void 0},t.onerror=t=>{throw x("worker sent an error! "+t.filename+":"+t.lineno+": "+t.message),t},_&&(t.on("message",(function(e){t.onmessage({data:e})})),t.on("error",(function(e){t.onerror(e)})),t.on("detachedExit",(function(){}))),t.postMessage({cmd:"load",urlOrBlob:u.mainScriptUrlOrBlob||_scriptDir,wasmMemory:j,wasmModule:k})},yc:function(){var t=S("ort-wasm-threaded.worker.js");ht.Yb.push(new Worker(t))},Cc:function(){return 0==ht.Yb.length&&(ht.yc(),ht.Fc(ht.Yb[0])),ht.Yb.pop()}};function dt(t){for(;0<t.length;)t.shift()(u)}function yt(t){var e=Ee();return t=t(),Me(e),t}function bt(t){if(O)return $t(2,0,t);try{pt(t)}catch(t){t instanceof ct||"unwind"==t||g(1,t)}}u.PThread=ht,u.establishStackSpace=function(){var t=he(),e=a()[t+44>>2>>>0];t=a()[t+48>>2>>>0],Te(e,e-t),Me(e)};var mt=[];function gt(t){var e=mt[t];return e||(t>=mt.length&&(mt.length=t+1),mt[t]=e=$.get(t)),e}u.invokeEntryPoint=function(t,e){t=gt(t)(e),Q()?ht.nc(t):Ae(t)};var vt,wt,_t=[],Ot=0,At=0;function St(t){this.Zb=t,this.Sb=t-24,this.xc=function(t){i()[this.Sb+4>>2>>>0]=t},this.bc=function(){return i()[this.Sb+4>>2>>>0]},this.wc=function(t){i()[this.Sb+8>>2>>>0]=t},this.Dc=function(){return i()[this.Sb+8>>2>>>0]},this.rc=function(){a()[this.Sb>>2>>>0]=0},this.hc=function(t){t=t?1:0,e()[this.Sb+12>>0>>>0]=t},this.uc=function(){return 0!=e()[this.Sb+12>>0>>>0]},this.ic=function(t){t=t?1:0,e()[this.Sb+13>>0>>>0]=t},this.kc=function(){return 0!=e()[this.Sb+13>>0>>>0]},this.fc=function(t,e){this.cc(0),this.xc(t),this.wc(e),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(a(),this.Sb>>2,1)},this.Hc=function(){return 1===Atomics.sub(a(),this.Sb>>2,1)},this.cc=function(t){i()[this.Sb+16>>2>>>0]=t},this.tc=function(){return i()[this.Sb+16>>2>>>0]},this.vc=function(){if(Re(this.bc()))return i()[this.Zb>>2>>>0];var t=this.tc();return 0!==t?t:this.Zb}}function Tt(t){return ye(new St(t).Sb)}function Et(t,e,n,r){return O?$t(3,1,t,e,n,r):Mt(t,e,n,r)}function Mt(t,e,n,r){if("undefined"==typeof SharedArrayBuffer)return x("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];return O&&0===a.length?Et(t,e,n,r):(t={Ic:n,Ub:t,zc:r,Nc:a},O?(t.Oc="spawnThread",postMessage(t,a),0):lt(t))}function Ct(t,e,n){return O?$t(4,1,t,e,n):0}function xt(t,e){if(O)return $t(5,1,t,e)}function Rt(t,e){if(O)return $t(6,1,t,e)}function jt(t,e,n){if(O)return $t(7,1,t,e,n)}function kt(t,e,n){return O?$t(8,1,t,e,n):0}function Dt(t,e){if(O)return $t(9,1,t,e)}function Pt(t,e,n){if(O)return $t(10,1,t,e,n)}function Ut(t,e,n,r){if(O)return $t(11,1,t,e,n,r)}function Ft(t,e,n,r){if(O)return $t(12,1,t,e,n,r)}function It(t,e,n,r){if(O)return $t(13,1,t,e,n,r)}function Wt(t){if(O)return $t(14,1,t)}function Ht(t,e){if(O)return $t(15,1,t,e)}function Lt(t,e,n){if(O)return $t(16,1,t,e,n)}function zt(t){Atomics.store(a(),t>>2,1),he()&&_e(t),Atomics.compareExchange(a(),t>>2,1,0)}function Yt(t){return i()[t>>>2]+4294967296*a()[t+4>>>2]}function Bt(t,e,n,r,a,i){return O?$t(17,1,t,e,n,r,a,i):-52}function Gt(t,e,n,r,a,i){if(O)return $t(18,1,t,e,n,r,a,i)}function Nt(t){var n=G(t)+1,r=de(n);return r&&B(t,e(),r,n),r}function Vt(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}if(O)return $t(19,1,t,e,n);var o=(new Date).getFullYear(),u=new Date(o,0,1),c=new Date(o,6,1);o=u.getTimezoneOffset();var s=c.getTimezoneOffset(),l=Math.max(o,s);a()[t>>2>>>0]=60*l,a()[e>>2>>>0]=Number(o!=s),t=r(u),e=r(c),t=Nt(t),e=Nt(e),s<o?(i()[n>>2>>>0]=t,i()[n+4>>2>>>0]=e):(i()[n>>2>>>0]=e,i()[n+4>>2>>>0]=t)}function $t(t,e){var n=arguments.length-2,r=arguments;return yt((()=>{for(var a=Ce(8*n),i=a>>3,u=0;u<n;u++){var c=r[2+u];o()[i+u>>>0]=c}return we(t,n,a,e)}))}u.executeNotifiedProxyingQueue=zt,wt=_?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:O?()=>performance.now()-u.__performance_now_clock_drift:()=>performance.now();var qt,Xt=[],Jt={};function Zt(){if(!qt){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:m||"./this.program"};for(t in Jt)void 0===Jt[t]?delete e[t]:e[t]=Jt[t];var n=[];for(t in e)n.push(t+"="+e[t]);qt=n}return qt}function Qt(t,n){if(O)return $t(20,1,t,n);var r=0;return Zt().forEach((function(a,o){var u=n+r;for(o=i()[t+4*o>>2>>>0]=u,u=0;u<a.length;++u)e()[o++>>0>>>0]=a.charCodeAt(u);e()[o>>0>>>0]=0,r+=a.length+1})),0}function Kt(t,e){if(O)return $t(21,1,t,e);var n=Zt();i()[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),i()[e>>2>>>0]=r,0}function te(t){return O?$t(22,1,t):52}function ee(t,e,n,r){return O?$t(23,1,t,e,n,r):52}function ne(t,e,n,r,a){return O?$t(24,1,t,e,n,r,a):70}var re=[null,[],[]];function ae(t,e){var n=re[t];0===e||10===e?((1===t?C:x)(z(n,0)),n.length=0):n.push(e)}function ie(t,e,n,a){if(O)return $t(25,1,t,e,n,a);for(var o=0,u=0;u<n;u++){var c=i()[e>>2>>>0],s=i()[e+4>>2>>>0];e+=8;for(var l=0;l<s;l++)ae(t,r()[c+l>>>0]);o+=s}return i()[a>>2>>>0]=o,0}var oe=0;function ue(t){return 0==t%4&&(0!=t%100||0==t%400)}var ce=[31,29,31,30,31,30,31,31,30,31,30,31],se=[31,28,31,30,31,30,31,31,30,31,30,31];function le(t,n,r,i){function o(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function u(t,e){return o(t,e,"0")}function c(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function s(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function l(t){var e=t.Wb;for(t=new Date(new Date(t.Xb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(ue(t.getFullYear())?ce:se)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=s(new Date(t.getFullYear(),0,4)),n=s(n),0>=c(e,t)?0>=c(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var f=a()[i+40>>2>>>0];for(var p in i={Lc:a()[i>>2>>>0],Kc:a()[i+4>>2>>>0],dc:a()[i+8>>2>>>0],jc:a()[i+12>>2>>>0],ec:a()[i+16>>2>>>0],Xb:a()[i+20>>2>>>0],Tb:a()[i+24>>2>>>0],Wb:a()[i+28>>2>>>0],Rc:a()[i+32>>2>>>0],Jc:a()[i+36>>2>>>0],Mc:f?Y(f):""},r=Y(r),f={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(p,"g"),f[p]);var h="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),d="January February March April May June July August September October November December".split(" ");for(p in f={"%a":function(t){return h[t.Tb].substring(0,3)},"%A":function(t){return h[t.Tb]},"%b":function(t){return d[t.ec].substring(0,3)},"%B":function(t){return d[t.ec]},"%C":function(t){return u((t.Xb+1900)/100|0,2)},"%d":function(t){return u(t.jc,2)},"%e":function(t){return o(t.jc,2," ")},"%g":function(t){return l(t).toString().substring(2)},"%G":function(t){return l(t)},"%H":function(t){return u(t.dc,2)},"%I":function(t){return 0==(t=t.dc)?t=12:12<t&&(t-=12),u(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.ec-1;e+=(ue(t.Xb+1900)?ce:se)[n++]);return u(t.jc+e,3)},"%m":function(t){return u(t.ec+1,2)},"%M":function(t){return u(t.Kc,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.dc&&12>t.dc?"AM":"PM"},"%S":function(t){return u(t.Lc,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Tb||7},"%U":function(t){return u(Math.floor((t.Wb+7-t.Tb)/7),2)},"%V":function(t){var e=Math.floor((t.Wb+7-(t.Tb+6)%7)/7);if(2>=(t.Tb+371-t.Wb-2)%7&&e++,e)53==e&&(4==(n=(t.Tb+371-t.Wb)%7)||3==n&&ue(t.Xb)||(e=1));else{e=52;var n=(t.Tb+7-t.Wb-1)%7;(4==n||5==n&&ue(t.Xb%400-1))&&e++}return u(e,2)},"%w":function(t){return t.Tb},"%W":function(t){return u(Math.floor((t.Wb+7-(t.Tb+6)%7)/7),2)},"%y":function(t){return(t.Xb+1900).toString().substring(2)},"%Y":function(t){return t.Xb+1900},"%z":function(t){var e=0<=(t=t.Jc);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.Mc},"%%":function(){return"%"}},r=r.replace(/%%/g,"\\0\\0"),f)r.includes(p)&&(r=r.replace(new RegExp(p,"g"),f[p](i)));return p=function(t){var e=Array(G(t)+1);return B(t,e,0,e.length),e}(r=r.replace(/\\0\\0/g,"%")),p.length>n?0:(function(t,n){e().set(t,n>>>0)}(p,t),p.length-1)}ht.fc();var fe=[null,ft,bt,Et,Ct,xt,Rt,jt,kt,Dt,Pt,Ut,Ft,It,Wt,Ht,Lt,Bt,Gt,Vt,Qt,Kt,te,ee,ne,ie],pe={b:function(t){return de(t+24)+24},n:function(t){return(t=new St(t)).uc()||(t.hc(!0),Ot--),t.ic(!1),_t.push(t),t.sc(),t.vc()},ma:function(t){throw x("Unexpected exception thrown, this is not properly supported - aborting"),H=!0,t},x:function(){Se(0);var t=_t.pop();if(t.Hc()&&!t.kc()){var e=t.Dc();e&&gt(e)(t.Zb),Tt(t.Zb)}At=0},e:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},l:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},h:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},t:Tt,M:function(){var t=_t.pop();t||at("no exception to throw");var e=t.Zb;throw t.kc()||(_t.push(t),t.ic(!0),t.hc(!1),Ot++),At=e,e},c:function(t,e,n){throw new St(t).fc(e,n),At=t,Ot++,t},pa:function(){return Ot},Fa:function(t){ge(t,!w,1,!v),ht.pc()},T:function(t){O?postMessage({cmd:"cleanupThread",thread:t}):st(t)},xa:Mt,j:function(t){throw At||(At=t),t},H:Ct,Ma:xt,ua:Rt,wa:jt,oa:kt,Ka:Dt,Ca:Pt,Ja:Ut,V:Ft,va:It,sa:Wt,La:Ht,ta:Lt,Ta:function(){},X:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(t,e,n,r){if(t==e)setTimeout((()=>zt(r)));else if(O)postMessage({targetThread:t,cmd:"processProxyingQueue",queue:r});else{if(!(t=ht.Vb[t]))return;t.postMessage({cmd:"processProxyingQueue",queue:r})}return 1},Ea:function(){return-1},Pa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getUTCSeconds(),a()[e+4>>2>>>0]=t.getUTCMinutes(),a()[e+8>>2>>>0]=t.getUTCHours(),a()[e+12>>2>>>0]=t.getUTCDate(),a()[e+16>>2>>>0]=t.getUTCMonth(),a()[e+20>>2>>>0]=t.getUTCFullYear()-1900,a()[e+24>>2>>>0]=t.getUTCDay(),t=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,a()[e+28>>2>>>0]=t},Qa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getSeconds(),a()[e+4>>2>>>0]=t.getMinutes(),a()[e+8>>2>>>0]=t.getHours(),a()[e+12>>2>>>0]=t.getDate(),a()[e+16>>2>>>0]=t.getMonth(),a()[e+20>>2>>>0]=t.getFullYear()-1900,a()[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1),r=(t.getTime()-n.getTime())/864e5|0;a()[e+28>>2>>>0]=r,a()[e+36>>2>>>0]=-60*t.getTimezoneOffset(),r=new Date(t.getFullYear(),6,1).getTimezoneOffset(),t=0|(r!=(n=n.getTimezoneOffset())&&t.getTimezoneOffset()==Math.min(n,r)),a()[e+32>>2>>>0]=t},Ra:function(t){var e=new Date(a()[t+20>>2>>>0]+1900,a()[t+16>>2>>>0],a()[t+12>>2>>>0],a()[t+8>>2>>>0],a()[t+4>>2>>>0],a()[t>>2>>>0],0),n=a()[t+32>>2>>>0],r=e.getTimezoneOffset(),i=new Date(e.getFullYear(),0,1),o=new Date(e.getFullYear(),6,1).getTimezoneOffset(),u=i.getTimezoneOffset(),c=Math.min(u,o);return 0>n?a()[t+32>>2>>>0]=Number(o!=u&&c==r):0<n!=(c==r)&&(o=Math.max(u,o),e.setTime(e.getTime()+6e4*((0<n?c:o)-r))),a()[t+24>>2>>>0]=e.getDay(),n=(e.getTime()-i.getTime())/864e5|0,a()[t+28>>2>>>0]=n,a()[t>>2>>>0]=e.getSeconds(),a()[t+4>>2>>>0]=e.getMinutes(),a()[t+8>>2>>>0]=e.getHours(),a()[t+12>>2>>>0]=e.getDate(),a()[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},Aa:Bt,Ba:Gt,Sa:function t(e,n,r){t.Ac||(t.Ac=!0,Vt(e,n,r))},y:function(){at("")},U:function(){if(!_&&!w){var t="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";vt||(vt={}),vt[t]||(vt[t]=1,_&&(t="warning: "+t),x(t))}},ra:function(){return 4294901760},B:wt,Ia:function(t,e,n){r().copyWithin(t>>>0,e>>>0,e+n>>>0)},F:function(){return _?n(993).cpus().length:navigator.hardwareConcurrency},Da:function(t,e,n){Xt.length=e,n>>=3;for(var r=0;r<e;r++)Xt[r]=o()[n+r>>>0];return(0>t?ut[-t-1]:fe[t]).apply(null,Xt)},qa:function(t){var e=r().length;if((t>>>=0)<=e||4294901760<t)return!1;for(var n=1;4>=n;n*=2){var a=e*(1+.2/n);a=Math.min(a,t+100663296);var i=Math;a=Math.max(t,a),i=i.min.call(i,4294901760,a+(65536-a%65536)%65536);t:{try{j.grow(i-D.byteLength+65535>>>16),N(j.buffer);var o=1;break t}catch(t){}o=void 0}if(o)return!0}return!1},Na:function(){throw"unwind"},Ga:Qt,Ha:Kt,J:pt,I:te,S:ee,ga:ne,R:ie,d:function(){return oe},na:function t(r,a){t.lc||(t.lc=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(_)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>at("randomDevice")}());for(var i=0;i<a;i++)e()[r+i>>0>>>0]=t.lc();return 0},ia:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ja:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},K:function(t){var e=Ee();try{return gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},f:function(t,e){var n=Ee();try{return gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},P:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},Q:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},k:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},p:function(t,e,n,r){var a=Ee();try{return gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},q:function(t,e,n,r,a){var i=Ee();try{return gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},N:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},s:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},w:function(t,e,n,r,a,i,o){var u=Ee();try{return gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},L:function(t,e,n,r,a,i,o,u){var c=Ee();try{return gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},E:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{return gt(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=Ee();try{return He(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},_:function(t,e,n,r,a,i,o){var u=Ee();try{return ke(t,e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},Z:function(t,e,n,r,a){var i=Ee();try{return Le(t,e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},ca:function(t,e,n,r){var a=Ee();try{return Ie(t,e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},$:function(t){var e=Ee();try{return je(t)}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},ba:function(t,e){var n=Ee();try{return We(t,e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},Y:function(t,e,n){var r=Ee();try{return De(t,e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},g:function(t){var e=Ee();try{gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},r:function(t,e){var n=Ee();try{gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},i:function(t,e,n){var r=Ee();try{gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ha:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},m:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},v:function(t,e,n,r,a){var i=Ee();try{gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},u:function(t,e,n,r,a,i){var o=Ee();try{gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},O:function(t,e,n,r,a,i,o){var u=Ee();try{gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},A:function(t,e,n,r,a,i,o,u){var c=Ee();try{gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},ka:function(t,e,n,r,a,i,o,u,c){var s=Ee();try{gt(t)(e,n,r,a,i,o,u,c)}catch(t){if(Me(s),t!==t+0)throw t;Se(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l){var f=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(Me(f),t!==t+0)throw t;Se(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(Me(b),t!==t+0)throw t;Se(1,0)}},fa:function(t,e,n,r,a,i,o,u){var c=Ee();try{Pe(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},da:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{Fe(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},ea:function(t,e,n,r,a,i){var o=Ee();try{Ue(t,e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},o:function(t){return t},a:j||u.wasmMemory,G:function(t){oe=t},la:le,z:function(t,e,n,r){return le(t,e,n,r)}};!function(){function t(t,e){u.asm=t.exports,ht.qc.push(u.asm.sb),$=u.asm.ub,X.unshift(u.asm.Va),k=e,O||(et--,u.monitorRunDependencies&&u.monitorRunDependencies(et),0==et&&(null!==nt&&(clearInterval(nt),nt=null),rt&&(t=rt,rt=null,t())))}function e(e){t(e.instance,e.module)}function n(t){return function(){if(!M&&(v||w)){if("function"==typeof fetch&&!tt.startsWith("file://"))return fetch(tt,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+tt+"\'";return t.arrayBuffer()})).catch((function(){return ot()}));if(f)return new Promise((function(t,e){f(tt,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return ot()}))}().then((function(t){return WebAssembly.instantiate(t,r)})).then((function(t){return t})).then(t,(function(t){x("failed to asynchronously prepare wasm: "+t),at(t)}))}var r={a:pe};if(O||(et++,u.monitorRunDependencies&&u.monitorRunDependencies(et)),u.instantiateWasm)try{return u.instantiateWasm(r,t)}catch(t){return x("Module.instantiateWasm callback failed with error: "+t),!1}(M||"function"!=typeof WebAssembly.instantiateStreaming||it()||tt.startsWith("file://")||_||"function"!=typeof fetch?n(e):fetch(tt,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,r).then(e,(function(t){return x("wasm streaming compile failed: "+t),x("falling back to ArrayBuffer instantiation"),n(e)}))}))).catch(s)}(),u.___wasm_call_ctors=function(){return(u.___wasm_call_ctors=u.asm.Va).apply(null,arguments)},u._OrtInit=function(){return(u._OrtInit=u.asm.Wa).apply(null,arguments)},u._OrtCreateSessionOptions=function(){return(u._OrtCreateSessionOptions=u.asm.Xa).apply(null,arguments)},u._OrtAppendExecutionProvider=function(){return(u._OrtAppendExecutionProvider=u.asm.Ya).apply(null,arguments)},u._OrtAddSessionConfigEntry=function(){return(u._OrtAddSessionConfigEntry=u.asm.Za).apply(null,arguments)},u._OrtReleaseSessionOptions=function(){return(u._OrtReleaseSessionOptions=u.asm._a).apply(null,arguments)},u._OrtCreateSession=function(){return(u._OrtCreateSession=u.asm.$a).apply(null,arguments)},u._OrtReleaseSession=function(){return(u._OrtReleaseSession=u.asm.ab).apply(null,arguments)},u._OrtGetInputCount=function(){return(u._OrtGetInputCount=u.asm.bb).apply(null,arguments)},u._OrtGetOutputCount=function(){return(u._OrtGetOutputCount=u.asm.cb).apply(null,arguments)},u._OrtGetInputName=function(){return(u._OrtGetInputName=u.asm.db).apply(null,arguments)},u._OrtGetOutputName=function(){return(u._OrtGetOutputName=u.asm.eb).apply(null,arguments)},u._OrtFree=function(){return(u._OrtFree=u.asm.fb).apply(null,arguments)},u._OrtCreateTensor=function(){return(u._OrtCreateTensor=u.asm.gb).apply(null,arguments)},u._OrtGetTensorData=function(){return(u._OrtGetTensorData=u.asm.hb).apply(null,arguments)},u._OrtReleaseTensor=function(){return(u._OrtReleaseTensor=u.asm.ib).apply(null,arguments)},u._OrtCreateRunOptions=function(){return(u._OrtCreateRunOptions=u.asm.jb).apply(null,arguments)},u._OrtAddRunConfigEntry=function(){return(u._OrtAddRunConfigEntry=u.asm.kb).apply(null,arguments)},u._OrtReleaseRunOptions=function(){return(u._OrtReleaseRunOptions=u.asm.lb).apply(null,arguments)},u._OrtRun=function(){return(u._OrtRun=u.asm.mb).apply(null,arguments)},u._OrtEndProfiling=function(){return(u._OrtEndProfiling=u.asm.nb).apply(null,arguments)};var he=u._pthread_self=function(){return(he=u._pthread_self=u.asm.ob).apply(null,arguments)},de=u._malloc=function(){return(de=u._malloc=u.asm.pb).apply(null,arguments)},ye=u._free=function(){return(ye=u._free=u.asm.qb).apply(null,arguments)},be=u._fflush=function(){return(be=u._fflush=u.asm.rb).apply(null,arguments)};u.__emscripten_tls_init=function(){return(u.__emscripten_tls_init=u.asm.sb).apply(null,arguments)};var me=u.___funcs_on_exit=function(){return(me=u.___funcs_on_exit=u.asm.tb).apply(null,arguments)},ge=u.__emscripten_thread_init=function(){return(ge=u.__emscripten_thread_init=u.asm.vb).apply(null,arguments)};u.__emscripten_thread_crashed=function(){return(u.__emscripten_thread_crashed=u.asm.wb).apply(null,arguments)};var ve,we=u._emscripten_run_in_main_runtime_thread_js=function(){return(we=u._emscripten_run_in_main_runtime_thread_js=u.asm.xb).apply(null,arguments)},_e=u.__emscripten_proxy_execute_task_queue=function(){return(_e=u.__emscripten_proxy_execute_task_queue=u.asm.yb).apply(null,arguments)},Oe=u.__emscripten_thread_free_data=function(){return(Oe=u.__emscripten_thread_free_data=u.asm.zb).apply(null,arguments)},Ae=u.__emscripten_thread_exit=function(){return(Ae=u.__emscripten_thread_exit=u.asm.Ab).apply(null,arguments)},Se=u._setThrew=function(){return(Se=u._setThrew=u.asm.Bb).apply(null,arguments)},Te=u._emscripten_stack_set_limits=function(){return(Te=u._emscripten_stack_set_limits=u.asm.Cb).apply(null,arguments)},Ee=u.stackSave=function(){return(Ee=u.stackSave=u.asm.Db).apply(null,arguments)},Me=u.stackRestore=function(){return(Me=u.stackRestore=u.asm.Eb).apply(null,arguments)},Ce=u.stackAlloc=function(){return(Ce=u.stackAlloc=u.asm.Fb).apply(null,arguments)},xe=u.___cxa_can_catch=function(){return(xe=u.___cxa_can_catch=u.asm.Gb).apply(null,arguments)},Re=u.___cxa_is_pointer_type=function(){return(Re=u.___cxa_is_pointer_type=u.asm.Hb).apply(null,arguments)},je=u.dynCall_j=function(){return(je=u.dynCall_j=u.asm.Ib).apply(null,arguments)},ke=u.dynCall_iiiiij=function(){return(ke=u.dynCall_iiiiij=u.asm.Jb).apply(null,arguments)},De=u.dynCall_jii=function(){return(De=u.dynCall_jii=u.asm.Kb).apply(null,arguments)},Pe=u.dynCall_viiiiij=function(){return(Pe=u.dynCall_viiiiij=u.asm.Lb).apply(null,arguments)},Ue=u.dynCall_vjji=function(){return(Ue=u.dynCall_vjji=u.asm.Mb).apply(null,arguments)},Fe=u.dynCall_viiijjjii=function(){return(Fe=u.dynCall_viiijjjii=u.asm.Nb).apply(null,arguments)},Ie=u.dynCall_iij=function(){return(Ie=u.dynCall_iij=u.asm.Ob).apply(null,arguments)},We=u.dynCall_ji=function(){return(We=u.dynCall_ji=u.asm.Pb).apply(null,arguments)},He=u.dynCall_iiiiiij=function(){return(He=u.dynCall_iiiiiij=u.asm.Qb).apply(null,arguments)},Le=u.dynCall_iiij=function(){return(Le=u.dynCall_iiij=u.asm.Rb).apply(null,arguments)};function ze(){function t(){if(!ve&&(ve=!0,u.calledRun=!0,!H)&&(O||dt(X),c(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),!O)){if(u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;){var t=u.postRun.shift();Z.unshift(t)}dt(Z)}}if(!(0<et))if(O)c(u),O||dt(X),postMessage({cmd:"loaded"});else{if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)K();dt(q),0<et||(u.setStatus?(u.setStatus("Running..."),setTimeout((function(){setTimeout((function(){u.setStatus("")}),1),t()}),1)):t())}}if(u.UTF8ToString=Y,u.stringToUTF8=function(t,e,n){return B(t,r(),e,n)},u.lengthBytesUTF8=G,u.keepRuntimeAlive=Q,u.wasmMemory=j,u.stackSave=Ee,u.stackRestore=Me,u.stackAlloc=Ce,u.ExitStatus=ct,u.PThread=ht,rt=function t(){ve||ze(),ve||(rt=t)},u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return ze(),t.ready});t.exports=r},932:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){var e,r,a;t=t||{},e||(e=void 0!==t?t:{}),e.ready=new Promise((function(t,e){r=t,a=e}));var i,o,u,c,s,l,f=Object.assign({},e),p="./this.program",h=(t,e)=>{throw e},d="object"==typeof window,y="function"==typeof importScripts,b="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,m="";b?(m=y?n(908).dirname(m)+"/":"//",l=()=>{s||(c=n(384),s=n(908))},i=function(t,e){return l(),t=s.normalize(t),c.readFileSync(t,e?void 0:"utf8")},u=t=>((t=i(t,!0)).buffer||(t=new Uint8Array(t)),t),o=(t,e,n)=>{l(),t=s.normalize(t),c.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(p=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof J))throw t})),process.on("unhandledRejection",(function(t){throw t})),h=(t,e)=>{if(_||0<L)throw process.exitCode=t,e;e instanceof J||w("exiting due to exception: "+e),process.exit(t)},e.inspect=function(){return"[Emscripten Module object]"}):(d||y)&&(y?m=self.location.href:"undefined"!=typeof document&&document.currentScript&&(m=document.currentScript.src),_scriptDir&&(m=_scriptDir),m=0!==m.indexOf("blob:")?m.substr(0,m.replace(/[?#].*/,"").lastIndexOf("/")+1):"",i=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},y&&(u=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),o=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)});var g,v=e.print||console.log.bind(console),w=e.printErr||console.warn.bind(console);Object.assign(e,f),f=null,e.thisProgram&&(p=e.thisProgram),e.quit&&(h=e.quit),e.wasmBinary&&(g=e.wasmBinary);var _=e.noExitRuntime||!1;"object"!=typeof WebAssembly&&V("no native wasm support detected");var O,A,S,T,E,M,C=!1,x="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function R(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&x)return x.decode(t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function j(t,e){return(t>>>=0)?R(T,t,e):""}function k(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function D(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function P(){var t=O.buffer;A=t,e.HEAP8=S=new Int8Array(t),e.HEAP16=new Int16Array(t),e.HEAP32=E=new Int32Array(t),e.HEAPU8=T=new Uint8Array(t),e.HEAPU16=new Uint16Array(t),e.HEAPU32=M=new Uint32Array(t),e.HEAPF32=new Float32Array(t),e.HEAPF64=new Float64Array(t)}var U,F=[],I=[],W=[],H=[],L=0;function z(){var t=e.preRun.shift();F.unshift(t)}var Y,B=0,G=null,N=null;function V(t){throw e.onAbort&&e.onAbort(t),w(t="Aborted("+t+")"),C=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),a(t),t}function $(){return Y.startsWith("data:application/octet-stream;base64,")}if(Y="ort-wasm.wasm",!$()){var q=Y;Y=e.locateFile?e.locateFile(q,m):m+q}function X(){var t=Y;try{if(t==Y&&g)return new Uint8Array(g);if(u)return u(t);throw"both async and sync fetching of the wasm failed"}catch(t){V(t)}}function J(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function Z(t){for(;0<t.length;)t.shift()(e)}var Q=[],K=0,tt=0;function et(t){this.Db=t,this.zb=t-24,this.Ub=function(t){M[this.zb+4>>2>>>0]=t},this.Eb=function(){return M[this.zb+4>>2>>>0]},this.Sb=function(t){M[this.zb+8>>2>>>0]=t},this.Wb=function(){return M[this.zb+8>>2>>>0]},this.Tb=function(){E[this.zb>>2>>>0]=0},this.Ib=function(t){S[this.zb+12>>0>>>0]=t?1:0},this.Pb=function(){return 0!=S[this.zb+12>>0>>>0]},this.Jb=function(t){S[this.zb+13>>0>>>0]=t?1:0},this.Lb=function(){return 0!=S[this.zb+13>>0>>>0]},this.Rb=function(t,e){this.Fb(0),this.Ub(t),this.Sb(e),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){E[this.zb>>2>>>0]+=1},this.Xb=function(){var t=E[this.zb>>2>>>0];return E[this.zb>>2>>>0]=t-1,1===t},this.Fb=function(t){M[this.zb+16>>2>>>0]=t},this.Ob=function(){return M[this.zb+16>>2>>>0]},this.Qb=function(){if(Mt(this.Eb()))return M[this.Db>>2>>>0];var t=this.Ob();return 0!==t?t:this.Db}}function nt(t){return vt(new et(t).zb)}var rt=[];function at(t){var e=rt[t];return e||(t>=rt.length&&(rt.length=t+1),rt[t]=e=U.get(t)),e}function it(t){var e=D(t)+1,n=gt(e);return n&&k(t,S,n,e),n}var ot={};function ut(){if(!ct){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"};for(t in ot)void 0===ot[t]?delete e[t]:e[t]=ot[t];var n=[];for(t in e)n.push(t+"="+e[t]);ct=n}return ct}var ct,st=[null,[],[]];function lt(t,e){var n=st[t];0===e||10===e?((1===t?v:w)(R(n,0)),n.length=0):n.push(e)}var ft=0;function pt(t){return 0==t%4&&(0!=t%100||0==t%400)}var ht=[31,29,31,30,31,30,31,31,30,31,30,31],dt=[31,28,31,30,31,30,31,31,30,31,30,31];function yt(t,e,n,r){function a(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function i(t,e){return a(t,e,"0")}function o(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function u(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function c(t){var e=t.Bb;for(t=new Date(new Date(t.Cb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(pt(t.getFullYear())?ht:dt)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=u(new Date(t.getFullYear(),0,4)),n=u(n),0>=o(e,t)?0>=o(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var s=E[r+40>>2>>>0];for(var l in r={$b:E[r>>2>>>0],Zb:E[r+4>>2>>>0],Gb:E[r+8>>2>>>0],Kb:E[r+12>>2>>>0],Hb:E[r+16>>2>>>0],Cb:E[r+20>>2>>>0],Ab:E[r+24>>2>>>0],Bb:E[r+28>>2>>>0],bc:E[r+32>>2>>>0],Yb:E[r+36>>2>>>0],ac:s?j(s):""},n=j(n),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(l,"g"),s[l]);var f="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),p="January February March April May June July August September October November December".split(" ");for(l in s={"%a":function(t){return f[t.Ab].substring(0,3)},"%A":function(t){return f[t.Ab]},"%b":function(t){return p[t.Hb].substring(0,3)},"%B":function(t){return p[t.Hb]},"%C":function(t){return i((t.Cb+1900)/100|0,2)},"%d":function(t){return i(t.Kb,2)},"%e":function(t){return a(t.Kb,2," ")},"%g":function(t){return c(t).toString().substring(2)},"%G":function(t){return c(t)},"%H":function(t){return i(t.Gb,2)},"%I":function(t){return 0==(t=t.Gb)?t=12:12<t&&(t-=12),i(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.Hb-1;e+=(pt(t.Cb+1900)?ht:dt)[n++]);return i(t.Kb+e,3)},"%m":function(t){return i(t.Hb+1,2)},"%M":function(t){return i(t.Zb,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.Gb&&12>t.Gb?"AM":"PM"},"%S":function(t){return i(t.$b,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Ab||7},"%U":function(t){return i(Math.floor((t.Bb+7-t.Ab)/7),2)},"%V":function(t){var e=Math.floor((t.Bb+7-(t.Ab+6)%7)/7);if(2>=(t.Ab+371-t.Bb-2)%7&&e++,e)53==e&&(4==(n=(t.Ab+371-t.Bb)%7)||3==n&&pt(t.Cb)||(e=1));else{e=52;var n=(t.Ab+7-t.Bb-1)%7;(4==n||5==n&&pt(t.Cb%400-1))&&e++}return i(e,2)},"%w":function(t){return t.Ab},"%W":function(t){return i(Math.floor((t.Bb+7-(t.Ab+6)%7)/7),2)},"%y":function(t){return(t.Cb+1900).toString().substring(2)},"%Y":function(t){return t.Cb+1900},"%z":function(t){var e=0<=(t=t.Yb);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.ac},"%%":function(){return"%"}},n=n.replace(/%%/g,"\\0\\0"),s)n.includes(l)&&(n=n.replace(new RegExp(l,"g"),s[l](r)));return l=function(t){var e=Array(D(t)+1);return k(t,e,0,e.length),e}(n=n.replace(/\\0\\0/g,"%")),l.length>e?0:(S.set(l,t>>>0),l.length-1)}var bt={a:function(t){return gt(t+24)+24},m:function(t){return(t=new et(t)).Pb()||(t.Ib(!0),K--),t.Jb(!1),Q.push(t),t.Nb(),t.Qb()},ia:function(t){throw w("Unexpected exception thrown, this is not properly supported - aborting"),C=!0,t},w:function(){Ot(0);var t=Q.pop();if(t.Xb()&&!t.Lb()){var e=t.Wb();e&&at(e)(t.Db),nt(t.Db)}tt=0},d:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},k:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},g:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},s:nt,L:function(){var t=Q.pop();t||V("no exception to throw");var e=t.Db;throw t.Lb()||(Q.push(t),t.Jb(!0),t.Ib(!1),K++),tt=e,e},b:function(t,e,n){throw new et(t).Rb(e,n),tt=t,K++,t},la:function(){return K},i:function(t){throw tt||(tt=t),t},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getUTCSeconds(),E[e+4>>2>>>0]=t.getUTCMinutes(),E[e+8>>2>>>0]=t.getUTCHours(),E[e+12>>2>>>0]=t.getUTCDate(),E[e+16>>2>>>0]=t.getUTCMonth(),E[e+20>>2>>>0]=t.getUTCFullYear()-1900,E[e+24>>2>>>0]=t.getUTCDay(),E[e+28>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getSeconds(),E[e+4>>2>>>0]=t.getMinutes(),E[e+8>>2>>>0]=t.getHours(),E[e+12>>2>>>0]=t.getDate(),E[e+16>>2>>>0]=t.getMonth(),E[e+20>>2>>>0]=t.getFullYear()-1900,E[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1);E[e+28>>2>>>0]=(t.getTime()-n.getTime())/864e5|0,E[e+36>>2>>>0]=-60*t.getTimezoneOffset();var r=new Date(t.getFullYear(),6,1).getTimezoneOffset();n=n.getTimezoneOffset(),E[e+32>>2>>>0]=0|(r!=n&&t.getTimezoneOffset()==Math.min(n,r))},Fa:function(t){var e=new Date(E[t+20>>2>>>0]+1900,E[t+16>>2>>>0],E[t+12>>2>>>0],E[t+8>>2>>>0],E[t+4>>2>>>0],E[t>>2>>>0],0),n=E[t+32>>2>>>0],r=e.getTimezoneOffset(),a=new Date(e.getFullYear(),0,1),i=new Date(e.getFullYear(),6,1).getTimezoneOffset(),o=a.getTimezoneOffset(),u=Math.min(o,i);return 0>n?E[t+32>>2>>>0]=Number(i!=o&&u==r):0<n!=(u==r)&&(i=Math.max(o,i),e.setTime(e.getTime()+6e4*((0<n?u:i)-r))),E[t+24>>2>>>0]=e.getDay(),E[t+28>>2>>>0]=(e.getTime()-a.getTime())/864e5|0,E[t>>2>>>0]=e.getSeconds(),E[t+4>>2>>>0]=e.getMinutes(),E[t+8>>2>>>0]=e.getHours(),E[t+12>>2>>>0]=e.getDate(),E[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function t(e,n,r){t.Vb||(t.Vb=!0,function(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}var a=(new Date).getFullYear(),i=new Date(a,0,1),o=new Date(a,6,1);a=i.getTimezoneOffset();var u=o.getTimezoneOffset();E[t>>2>>>0]=60*Math.max(a,u),E[e>>2>>>0]=Number(a!=u),t=r(i),e=r(o),t=it(t),e=it(e),u<a?(M[n>>2>>>0]=t,M[n+4>>2>>>0]=e):(M[n>>2>>>0]=e,M[n+4>>2>>>0]=t)}(e,n,r))},B:function(){V("")},ma:function(){return 4294901760},I:b?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),xa:function(t,e,n){T.copyWithin(t>>>0,e>>>0,e+n>>>0)},G:function(t){var e=T.length;if(4294901760<(t>>>=0))return!1;for(var n=1;4>=n;n*=2){var r=e*(1+.2/n);r=Math.min(r,t+100663296);var a=Math;r=Math.max(t,r),a=a.min.call(a,4294901760,r+(65536-r%65536)%65536);t:{try{O.grow(a-A.byteLength+65535>>>16),P();var i=1;break t}catch(t){}i=void 0}if(i)return!0}return!1},va:function(t,e){var n=0;return ut().forEach((function(r,a){var i=e+n;for(a=M[t+4*a>>2>>>0]=i,i=0;i<r.length;++i)S[a++>>0>>>0]=r.charCodeAt(i);S[a>>0>>>0]=0,n+=r.length+1})),0},wa:function(t,e){var n=ut();M[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),M[e>>2>>>0]=r,0},ba:function(t){_||0<L||(_t(),Z(W),wt(0),st[1].length&&lt(1,10),st[2].length&&lt(2,10)),_||0<L||(e.onExit&&e.onExit(t),C=!0),h(t,new J(t))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(t,e,n,r){for(var a=0,i=0;i<n;i++){var o=M[e>>2>>>0],u=M[e+4>>2>>>0];e+=8;for(var c=0;c<u;c++)lt(t,T[o+c>>>0]);a+=u}return M[r>>2>>>0]=a,0},c:function(){return ft},ja:function t(e,r){t.Mb||(t.Mb=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(b)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>V("randomDevice")}());for(var a=0;a<r;a++)S[e+a>>0>>>0]=t.Mb();return 0},ea:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},fa:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},J:function(t){var e=At();try{return at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},e:function(t,e){var n=At();try{return at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},N:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},O:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},j:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},o:function(t,e,n,r){var a=At();try{return at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},p:function(t,e,n,r,a){var i=At();try{return at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},M:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},r:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},v:function(t,e,n,r,a,i,o){var u=At();try{return at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},K:function(t,e,n,r,a,i,o,u){var c=At();try{return at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{return at(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},X:function(t,e,n,r,a,i,o,u){var c=At();try{return Ft(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},V:function(t,e,n,r,a,i,o){var u=At();try{return xt(t,e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},U:function(t,e,n,r,a){var i=At();try{return It(t,e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},Z:function(t,e,n,r){var a=At();try{return Pt(t,e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},W:function(t){var e=At();try{return Ct(t)}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},Y:function(t,e){var n=At();try{return Ut(t,e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},T:function(t,e,n){var r=At();try{return Rt(t,e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},f:function(t){var e=At();try{at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},q:function(t,e){var n=At();try{at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},h:function(t,e,n){var r=At();try{at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},da:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},l:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},t:function(t,e,n,r,a){var i=At();try{at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},u:function(t,e,n,r,a,i){var o=At();try{at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},x:function(t,e,n,r,a,i,o){var u=At();try{at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},z:function(t,e,n,r,a,i,o,u){var c=At();try{at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},ga:function(t,e,n,r,a,i,o,u,c){var s=At();try{at(t)(e,n,r,a,i,o,u,c)}catch(t){if(St(s),t!==t+0)throw t;Ot(1,0)}},A:function(t,e,n,r,a,i,o,u,c,s,l){var f=At();try{at(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(St(f),t!==t+0)throw t;Ot(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=At();try{at(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(St(b),t!==t+0)throw t;Ot(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=At();try{jt(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},_:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{Dt(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},$:function(t,e,n,r,a,i){var o=At();try{kt(t,e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},n:function(t){return t},F:function(t){ft=t},ha:yt,y:function(t,e,n,r){return yt(t,e,n,r)}};!function(){function t(t){e.asm=t.exports,O=e.asm.Ka,P(),U=e.asm.ib,I.unshift(e.asm.La),B--,e.monitorRunDependencies&&e.monitorRunDependencies(B),0==B&&(null!==G&&(clearInterval(G),G=null),N&&(t=N,N=null,t()))}function n(e){t(e.instance)}function r(t){return function(){if(!g&&(d||y)){if("function"==typeof fetch&&!Y.startsWith("file://"))return fetch(Y,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+Y+"\'";return t.arrayBuffer()})).catch((function(){return X()}));if(o)return new Promise((function(t,e){o(Y,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return X()}))}().then((function(t){return WebAssembly.instantiate(t,i)})).then((function(t){return t})).then(t,(function(t){w("failed to asynchronously prepare wasm: "+t),V(t)}))}var i={a:bt};if(B++,e.monitorRunDependencies&&e.monitorRunDependencies(B),e.instantiateWasm)try{return e.instantiateWasm(i,t)}catch(t){return w("Module.instantiateWasm callback failed with error: "+t),!1}(g||"function"!=typeof WebAssembly.instantiateStreaming||$()||Y.startsWith("file://")||b||"function"!=typeof fetch?r(n):fetch(Y,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,i).then(n,(function(t){return w("wasm streaming compile failed: "+t),w("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(a)}(),e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.La).apply(null,arguments)},e._OrtInit=function(){return(e._OrtInit=e.asm.Ma).apply(null,arguments)},e._OrtCreateSessionOptions=function(){return(e._OrtCreateSessionOptions=e.asm.Na).apply(null,arguments)},e._OrtAppendExecutionProvider=function(){return(e._OrtAppendExecutionProvider=e.asm.Oa).apply(null,arguments)},e._OrtAddSessionConfigEntry=function(){return(e._OrtAddSessionConfigEntry=e.asm.Pa).apply(null,arguments)},e._OrtReleaseSessionOptions=function(){return(e._OrtReleaseSessionOptions=e.asm.Qa).apply(null,arguments)},e._OrtCreateSession=function(){return(e._OrtCreateSession=e.asm.Ra).apply(null,arguments)},e._OrtReleaseSession=function(){return(e._OrtReleaseSession=e.asm.Sa).apply(null,arguments)},e._OrtGetInputCount=function(){return(e._OrtGetInputCount=e.asm.Ta).apply(null,arguments)},e._OrtGetOutputCount=function(){return(e._OrtGetOutputCount=e.asm.Ua).apply(null,arguments)},e._OrtGetInputName=function(){return(e._OrtGetInputName=e.asm.Va).apply(null,arguments)},e._OrtGetOutputName=function(){return(e._OrtGetOutputName=e.asm.Wa).apply(null,arguments)},e._OrtFree=function(){return(e._OrtFree=e.asm.Xa).apply(null,arguments)},e._OrtCreateTensor=function(){return(e._OrtCreateTensor=e.asm.Ya).apply(null,arguments)},e._OrtGetTensorData=function(){return(e._OrtGetTensorData=e.asm.Za).apply(null,arguments)},e._OrtReleaseTensor=function(){return(e._OrtReleaseTensor=e.asm._a).apply(null,arguments)},e._OrtCreateRunOptions=function(){return(e._OrtCreateRunOptions=e.asm.$a).apply(null,arguments)},e._OrtAddRunConfigEntry=function(){return(e._OrtAddRunConfigEntry=e.asm.ab).apply(null,arguments)},e._OrtReleaseRunOptions=function(){return(e._OrtReleaseRunOptions=e.asm.bb).apply(null,arguments)},e._OrtRun=function(){return(e._OrtRun=e.asm.cb).apply(null,arguments)},e._OrtEndProfiling=function(){return(e._OrtEndProfiling=e.asm.db).apply(null,arguments)};var mt,gt=e._malloc=function(){return(gt=e._malloc=e.asm.eb).apply(null,arguments)},vt=e._free=function(){return(vt=e._free=e.asm.fb).apply(null,arguments)},wt=e._fflush=function(){return(wt=e._fflush=e.asm.gb).apply(null,arguments)},_t=e.___funcs_on_exit=function(){return(_t=e.___funcs_on_exit=e.asm.hb).apply(null,arguments)},Ot=e._setThrew=function(){return(Ot=e._setThrew=e.asm.jb).apply(null,arguments)},At=e.stackSave=function(){return(At=e.stackSave=e.asm.kb).apply(null,arguments)},St=e.stackRestore=function(){return(St=e.stackRestore=e.asm.lb).apply(null,arguments)},Tt=e.stackAlloc=function(){return(Tt=e.stackAlloc=e.asm.mb).apply(null,arguments)},Et=e.___cxa_can_catch=function(){return(Et=e.___cxa_can_catch=e.asm.nb).apply(null,arguments)},Mt=e.___cxa_is_pointer_type=function(){return(Mt=e.___cxa_is_pointer_type=e.asm.ob).apply(null,arguments)},Ct=e.dynCall_j=function(){return(Ct=e.dynCall_j=e.asm.pb).apply(null,arguments)},xt=e.dynCall_iiiiij=function(){return(xt=e.dynCall_iiiiij=e.asm.qb).apply(null,arguments)},Rt=e.dynCall_jii=function(){return(Rt=e.dynCall_jii=e.asm.rb).apply(null,arguments)},jt=e.dynCall_viiiiij=function(){return(jt=e.dynCall_viiiiij=e.asm.sb).apply(null,arguments)},kt=e.dynCall_vjji=function(){return(kt=e.dynCall_vjji=e.asm.tb).apply(null,arguments)},Dt=e.dynCall_viiijjjii=function(){return(Dt=e.dynCall_viiijjjii=e.asm.ub).apply(null,arguments)},Pt=e.dynCall_iij=function(){return(Pt=e.dynCall_iij=e.asm.vb).apply(null,arguments)},Ut=e.dynCall_ji=function(){return(Ut=e.dynCall_ji=e.asm.wb).apply(null,arguments)},Ft=e.dynCall_iiiiiij=function(){return(Ft=e.dynCall_iiiiiij=e.asm.xb).apply(null,arguments)},It=e.dynCall_iiij=function(){return(It=e.dynCall_iiij=e.asm.yb).apply(null,arguments)};function Wt(){function t(){if(!mt&&(mt=!0,e.calledRun=!0,!C)){if(Z(I),r(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;){var t=e.postRun.shift();H.unshift(t)}Z(H)}}if(!(0<B)){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)z();Z(F),0<B||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),t()}),1)):t())}}if(e.UTF8ToString=j,e.stringToUTF8=function(t,e,n){return k(t,T,e,n)},e.lengthBytesUTF8=D,e.stackSave=At,e.stackRestore=St,e.stackAlloc=Tt,N=function t(){mt||Wt(),mt||(N=t)},e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();return Wt(),t.ready});t.exports=r},967:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.iterateExtraOptions=void 0,e.iterateExtraOptions=(t,n,r,a)=>{if("object"==typeof t&&null!==t){if(r.has(t))throw new Error("Circular reference in options");r.add(t)}Object.entries(t).forEach((([t,i])=>{const o=n?n+t:t;if("object"==typeof i)(0,e.iterateExtraOptions)(i,o+".",r,a);else if("string"==typeof i||"number"==typeof i)a(o,i.toString());else{if("boolean"!=typeof i)throw new Error("Can\'t handle extra config type: "+typeof i);a(o,i?"1":"0")}}))}},586:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setRunOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setRunOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};try{if(void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);void 0===(null==t?void 0:t.terminate)&&(u.terminate=!1);let i=0;if(void 0!==(null==t?void 0:t.tag)&&(i=(0,a.allocWasmString)(t.tag,o)),n=e._OrtCreateRunOptions(u.logSeverityLevel,u.logVerbosityLevel,!!u.terminate,i),0===n)throw new Error("Can\'t create run options");return void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddRunConfigEntry(n,i,u))throw new Error(`Can\'t set a run config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseRunOptions(n),o.forEach(e._free),t}}},919:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setSessionOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setSessionOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};(t=>{t.extra||(t.extra={}),t.extra.session||(t.extra.session={});const e=t.extra.session;e.use_ort_model_bytes_directly||(e.use_ort_model_bytes_directly="1")})(u);try{void 0===(null==t?void 0:t.graphOptimizationLevel)&&(u.graphOptimizationLevel="all");const c=(t=>{switch(t){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${t}`)}})(u.graphOptimizationLevel);void 0===(null==t?void 0:t.enableCpuMemArena)&&(u.enableCpuMemArena=!0),void 0===(null==t?void 0:t.enableMemPattern)&&(u.enableMemPattern=!0),void 0===(null==t?void 0:t.executionMode)&&(u.executionMode="sequential");const s=(t=>{switch(t){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${t}`)}})(u.executionMode);let l=0;if(void 0!==(null==t?void 0:t.logId)&&(l=(0,a.allocWasmString)(t.logId,o)),void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);if(void 0===(null==t?void 0:t.enableProfiling)&&(u.enableProfiling=!1),n=e._OrtCreateSessionOptions(c,!!u.enableCpuMemArena,!!u.enableMemPattern,s,!!u.enableProfiling,0,l,u.logSeverityLevel,u.logVerbosityLevel),0===n)throw new Error("Can\'t create session options");return(null==t?void 0:t.executionProviders)&&((t,e,n)=>{for(const r of e){let e="string"==typeof r?r:r.name;switch(e){case"xnnpack":e="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${e}`)}const o=(0,a.allocWasmString)(e,n);if(0!==(0,i.getInstance)()._OrtAppendExecutionProvider(t,o))throw new Error(`Can\'t append execution provider: ${e}`)}})(n,t.executionProviders,o),void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddSessionConfigEntry(n,i,u))throw new Error(`Can\'t set a session config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseSessionOptions(n),o.forEach(e._free),t}}},983:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.allocWasmString=void 0;const r=n(361);e.allocWasmString=(t,e)=>{const n=(0,r.getInstance)(),a=n.lengthBytesUTF8(t)+1,i=n._malloc(a);return n.stringToUTF8(t,i,a),e.push(i),i}},349:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extractTransferableBuffers=e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=void 0;const r=n(586),a=n(919),i=n(983),o=n(361);e.initOrt=(t,e)=>{const n=(0,o.getInstance)()._OrtInit(t,e);if(0!==n)throw new Error(`Can\'t initialize onnxruntime. error code = ${n}`)};const u=new Map;e.createSessionAllocate=t=>{const e=(0,o.getInstance)(),n=e._malloc(t.byteLength);return e.HEAPU8.set(t,n),[n,t.byteLength]},e.createSessionFinalize=(t,e)=>{const n=(0,o.getInstance)();let r=0,i=0,c=[];try{if([i,c]=(0,a.setSessionOptions)(e),r=n._OrtCreateSession(t[0],t[1],i),0===r)throw new Error("Can\'t create a session")}finally{n._free(t[0]),n._OrtReleaseSessionOptions(i),c.forEach(n._free)}const s=n._OrtGetInputCount(r),l=n._OrtGetOutputCount(r),f=[],p=[],h=[],d=[];for(let t=0;t<s;t++){const e=n._OrtGetInputName(r,t);if(0===e)throw new Error("Can\'t get an input name");p.push(e),f.push(n.UTF8ToString(e))}for(let t=0;t<l;t++){const e=n._OrtGetOutputName(r,t);if(0===e)throw new Error("Can\'t get an output name");d.push(e),h.push(n.UTF8ToString(e))}return u.set(r,[r,p,d]),[r,f,h]},e.createSession=(t,n)=>{const r=(0,e.createSessionAllocate)(t);return(0,e.createSessionFinalize)(r,n)},e.releaseSession=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=n[1],i=n[2];a.forEach(e._OrtFree),i.forEach(e._OrtFree),e._OrtReleaseSession(r),u.delete(t)};const c=t=>{switch(t){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${t}`)}},s=t=>{switch(t){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${t}`)}},l=t=>{switch(t){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${t}`)}};e.run=(t,e,n,a,f)=>{const p=(0,o.getInstance)(),h=u.get(t);if(!h)throw new Error("invalid session id");const d=h[0],y=h[1],b=h[2],m=e.length,g=a.length;let v=0,w=[];const _=[],O=[];try{[v,w]=(0,r.setRunOptions)(f);for(let t=0;t<m;t++){const e=n[t][0],r=n[t][1],a=n[t][2];let o,u;if(Array.isArray(a)){u=4*a.length,o=p._malloc(u),O.push(o);let t=o/4;for(let e=0;e<a.length;e++){if("string"!=typeof a[e])throw new TypeError(`tensor data at index ${e} is not a string`);p.HEAPU32[t++]=(0,i.allocWasmString)(a[e],O)}}else u=a.byteLength,o=p._malloc(u),O.push(o),p.HEAPU8.set(new Uint8Array(a.buffer,a.byteOffset,u),o);const s=p.stackSave(),l=p.stackAlloc(4*r.length);try{let t=l/4;r.forEach((e=>p.HEAP32[t++]=e));const n=p._OrtCreateTensor(c(e),o,u,l,r.length);if(0===n)throw new Error("Can\'t create a tensor");_.push(n)}finally{p.stackRestore(s)}}const t=p.stackSave(),o=p.stackAlloc(4*m),u=p.stackAlloc(4*m),h=p.stackAlloc(4*g),A=p.stackAlloc(4*g);try{let n=o/4,r=u/4,i=h/4,c=A/4;for(let t=0;t<m;t++)p.HEAPU32[n++]=_[t],p.HEAPU32[r++]=y[e[t]];for(let t=0;t<g;t++)p.HEAPU32[i++]=0,p.HEAPU32[c++]=b[a[t]];let f=p._OrtRun(d,u,o,m,A,g,h,v);const w=[];if(0===f)for(let t=0;t<g;t++){const e=p.HEAPU32[h/4+t],n=p.stackSave(),r=p.stackAlloc(16);let a,i=0;try{if(f=p._OrtGetTensorData(e,r,r+4,r+8,r+12),0!==f)throw new Error(`Can\'t access output tensor data. error code = ${f}`);let t=r/4;const o=p.HEAPU32[t++];i=p.HEAPU32[t++];const u=p.HEAPU32[t++],c=p.HEAPU32[t++],h=[];for(let t=0;t<c;t++)h.push(p.HEAPU32[u/4+t]);p._OrtFree(u);const d=0===h.length?1:h.reduce(((t,e)=>t*e));if(a=s(o),"string"===a){const t=[];let e=i/4;for(let n=0;n<d;n++){const r=p.HEAPU32[e++],a=n===d-1?void 0:p.HEAPU32[e]-r;t.push(p.UTF8ToString(r,a))}w.push([a,h,t])}else{const t=new(l(a))(d);new Uint8Array(t.buffer,t.byteOffset,t.byteLength).set(p.HEAPU8.subarray(i,i+t.byteLength)),w.push([a,h,t])}}finally{p.stackRestore(n),"string"===a&&i&&p._free(i),p._OrtReleaseTensor(e)}}if(0===f)return w;throw new Error(`failed to call OrtRun(). error code = ${f}.`)}finally{p.stackRestore(t)}}finally{_.forEach(p._OrtReleaseTensor),O.forEach(p._free),p._OrtReleaseRunOptions(v),w.forEach(p._free)}},e.endProfiling=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=e._OrtEndProfiling(r);if(0===a)throw new Error("Can\'t get an profile file name");e._OrtFree(a)},e.extractTransferableBuffers=t=>{const e=[];for(const n of t){const t=n[2];!Array.isArray(t)&&t.buffer&&e.push(t.buffer)}return e}},361:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(e,n);a&&!("get"in a?!e.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,a)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return a(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.getInstance=e.initializeWebAssembly=void 0;const u=i(n(449)),c=o(n(932)),s=n(474);let l,f=!1,p=!1,h=!1;const d=(t,e)=>e?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":t?"ort-wasm-simd.wasm":"ort-wasm.wasm";e.initializeWebAssembly=async t=>{if(f)return Promise.resolve();if(p)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(h)throw new Error("previous call to \'initializeWebAssembly()\' failed.");p=!0;const e=t.initTimeout,r=t.numThreads,a=t.simd,i=r>1&&(()=>{try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(t){return!1}})(),o=a&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(t){return!1}})(),y="string"==typeof t.wasmPaths?t.wasmPaths:void 0,b=d(!1,i),m=d(o,i),g="object"==typeof t.wasmPaths?t.wasmPaths[m]:void 0;let v=!1;const w=[];if(e>0&&w.push(new Promise((t=>{setTimeout((()=>{v=!0,t()}),e)}))),w.push(new Promise(((t,e)=>{const r=i?s:c.default,a={locateFile:(t,e)=>i&&t.endsWith(".worker.js")&&"undefined"!=typeof Blob?URL.createObjectURL(new Blob([n(154)],{type:"text/javascript"})):t===b?null!=g?g:(null!=y?y:e)+m:e+t};if(i)if("undefined"==typeof Blob)a.mainScriptUrlOrBlob=u.join("/","ort-wasm-threaded.js");else{const t=`var ortWasmThreaded=(function(){var _scriptDir;return ${r.toString()}})();`;a.mainScriptUrlOrBlob=new Blob([t],{type:"text/javascript"})}r(a).then((e=>{p=!1,f=!0,l=e,t()}),(t=>{p=!1,h=!0,e(t)}))}))),await Promise.race(w),v)throw new Error(`WebAssembly backend initializing failed due to timeout: ${e}ms`)},e.getInstance=()=>{if(f&&l)return l;throw new Error("WebAssembly is not initialized yet.")},e.dispose=()=>{var t;!f||p||h||(p=!0,null===(t=l.PThread)||void 0===t||t.terminateAllThreads(),l=void 0,p=!1,f=!1,h=!0)}},154:t=>{"use strict";t.exports=\'"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};\\n\'},384:()=>{},993:()=>{},908:()=>{},953:()=>{},925:()=>{},449:()=>{}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{"use strict";const t=n(349),e=n(361);self.onmessage=n=>{switch(n.data.type){case"init-wasm":(0,e.initializeWebAssembly)(n.data.in).then((()=>postMessage({type:"init-wasm"})),(t=>postMessage({type:"init-wasm",err:t})));break;case"init-ort":try{const{numThreads:e,loggingLevel:r}=n.data.in;(0,t.initOrt)(e,r),postMessage({type:"init-ort"})}catch(t){postMessage({type:"init-ort",err:t})}break;case"create_allocate":try{const{model:e}=n.data.in,r=(0,t.createSessionAllocate)(e);postMessage({type:"create_allocate",out:r})}catch(t){postMessage({type:"create_allocate",err:t})}break;case"create_finalize":try{const{modeldata:e,options:r}=n.data.in,a=(0,t.createSessionFinalize)(e,r);postMessage({type:"create_finalize",out:a})}catch(t){postMessage({type:"create_finalize",err:t})}break;case"create":try{const{model:e,options:r}=n.data.in,a=(0,t.createSession)(e,r);postMessage({type:"create",out:a})}catch(t){postMessage({type:"create",err:t})}break;case"release":try{const e=n.data.in;(0,t.releaseSession)(e),postMessage({type:"release"})}catch(t){postMessage({type:"release",err:t})}break;case"run":try{const{sessionId:e,inputIndices:r,inputs:a,outputIndices:i,options:o}=n.data.in,u=(0,t.run)(e,r,a,i,o);postMessage({type:"run",out:u},(0,t.extractTransferableBuffers)(u))}catch(t){postMessage({type:"run",err:t})}break;case"end-profiling":try{const e=n.data.in;(0,t.endProfiling)(e),postMessage({type:"end-profiling"})}catch(t){postMessage({type:"end-profiling",err:t})}}}})()})();\n',"Worker",void 0,void 0)}},477:St=>{St.exports=function(e,en,tn,nn){var sn=self||window;try{try{var on;try{on=new sn.Blob([e])}catch{(on=new(sn.BlobBuilder||sn.WebKitBlobBuilder||sn.MozBlobBuilder||sn.MSBlobBuilder)).append(e),on=on.getBlob()}var un=sn.URL||sn.webkitURL,dn=un.createObjectURL(on),fn=new sn[en](dn,tn);return un.revokeObjectURL(dn),fn}catch{return new sn[en]("data:application/javascript,".concat(encodeURIComponent(e)),tn)}}catch{if(!nn)throw Error("Inline worker is not supported");return new sn[en](nn,tn)}}},4154:St=>{St.exports=`"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};
`},1670:St=>{St.exports=__WEBPACK_EXTERNAL_MODULE__1670__},7067:()=>{},1296:()=>{},1384:()=>{},3993:()=>{},908:()=>{},6953:()=>{},9925:()=>{},2806:()=>{},6449:()=>{},2850:()=>{},5381:()=>{},5686:(St,e,en)=>{en.r(e),en.d(e,{flatbuffers:()=>tn});var tn={};tn.Offset,tn.Table,tn.SIZEOF_SHORT=2,tn.SIZEOF_INT=4,tn.FILE_IDENTIFIER_LENGTH=4,tn.SIZE_PREFIX_LENGTH=4,tn.Encoding={UTF8_BYTES:1,UTF16_STRING:2},tn.int32=new Int32Array(2),tn.float32=new Float32Array(tn.int32.buffer),tn.float64=new Float64Array(tn.int32.buffer),tn.isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1,tn.Long=function(nn,sn){this.low=0|nn,this.high=0|sn},tn.Long.create=function(nn,sn){return nn==0&&sn==0?tn.Long.ZERO:new tn.Long(nn,sn)},tn.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},tn.Long.prototype.equals=function(nn){return this.low==nn.low&&this.high==nn.high},tn.Long.ZERO=new tn.Long(0,0),tn.Builder=function(nn){if(nn)sn=nn;else var sn=1024;this.bb=tn.ByteBuffer.allocate(sn),this.space=sn,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},tn.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},tn.Builder.prototype.forceDefaults=function(nn){this.force_defaults=nn},tn.Builder.prototype.dataBuffer=function(){return this.bb},tn.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},tn.Builder.prototype.prep=function(nn,sn){nn>this.minalign&&(this.minalign=nn);for(var on=1+~(this.bb.capacity()-this.space+sn)&nn-1;this.space<on+nn+sn;){var un=this.bb.capacity();this.bb=tn.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-un}this.pad(on)},tn.Builder.prototype.pad=function(nn){for(var sn=0;sn<nn;sn++)this.bb.writeInt8(--this.space,0)},tn.Builder.prototype.writeInt8=function(nn){this.bb.writeInt8(this.space-=1,nn)},tn.Builder.prototype.writeInt16=function(nn){this.bb.writeInt16(this.space-=2,nn)},tn.Builder.prototype.writeInt32=function(nn){this.bb.writeInt32(this.space-=4,nn)},tn.Builder.prototype.writeInt64=function(nn){this.bb.writeInt64(this.space-=8,nn)},tn.Builder.prototype.writeFloat32=function(nn){this.bb.writeFloat32(this.space-=4,nn)},tn.Builder.prototype.writeFloat64=function(nn){this.bb.writeFloat64(this.space-=8,nn)},tn.Builder.prototype.addInt8=function(nn){this.prep(1,0),this.writeInt8(nn)},tn.Builder.prototype.addInt16=function(nn){this.prep(2,0),this.writeInt16(nn)},tn.Builder.prototype.addInt32=function(nn){this.prep(4,0),this.writeInt32(nn)},tn.Builder.prototype.addInt64=function(nn){this.prep(8,0),this.writeInt64(nn)},tn.Builder.prototype.addFloat32=function(nn){this.prep(4,0),this.writeFloat32(nn)},tn.Builder.prototype.addFloat64=function(nn){this.prep(8,0),this.writeFloat64(nn)},tn.Builder.prototype.addFieldInt8=function(nn,sn,on){(this.force_defaults||sn!=on)&&(this.addInt8(sn),this.slot(nn))},tn.Builder.prototype.addFieldInt16=function(nn,sn,on){(this.force_defaults||sn!=on)&&(this.addInt16(sn),this.slot(nn))},tn.Builder.prototype.addFieldInt32=function(nn,sn,on){(this.force_defaults||sn!=on)&&(this.addInt32(sn),this.slot(nn))},tn.Builder.prototype.addFieldInt64=function(nn,sn,on){!this.force_defaults&&sn.equals(on)||(this.addInt64(sn),this.slot(nn))},tn.Builder.prototype.addFieldFloat32=function(nn,sn,on){(this.force_defaults||sn!=on)&&(this.addFloat32(sn),this.slot(nn))},tn.Builder.prototype.addFieldFloat64=function(nn,sn,on){(this.force_defaults||sn!=on)&&(this.addFloat64(sn),this.slot(nn))},tn.Builder.prototype.addFieldOffset=function(nn,sn,on){(this.force_defaults||sn!=on)&&(this.addOffset(sn),this.slot(nn))},tn.Builder.prototype.addFieldStruct=function(nn,sn,on){sn!=on&&(this.nested(sn),this.slot(nn))},tn.Builder.prototype.nested=function(nn){if(nn!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},tn.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},tn.Builder.prototype.slot=function(nn){this.vtable[nn]=this.offset()},tn.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},tn.Builder.growByteBuffer=function(nn){var sn=nn.capacity();if(3221225472&sn)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var on=sn<<1,un=tn.ByteBuffer.allocate(on);return un.setPosition(on-sn),un.bytes().set(nn.bytes(),on-sn),un},tn.Builder.prototype.addOffset=function(nn){this.prep(tn.SIZEOF_INT,0),this.writeInt32(this.offset()-nn+tn.SIZEOF_INT)},tn.Builder.prototype.startObject=function(nn){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=nn;for(var sn=0;sn<nn;sn++)this.vtable[sn]=0;this.isNested=!0,this.object_start=this.offset()},tn.Builder.prototype.endObject=function(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var nn=this.offset(),sn=this.vtable_in_use-1;sn>=0&&this.vtable[sn]==0;sn--);for(var on=sn+1;sn>=0;sn--)this.addInt16(this.vtable[sn]!=0?nn-this.vtable[sn]:0);this.addInt16(nn-this.object_start);var un=(on+2)*tn.SIZEOF_SHORT;this.addInt16(un);var dn=0,fn=this.space;e:for(sn=0;sn<this.vtables.length;sn++){var hn=this.bb.capacity()-this.vtables[sn];if(un==this.bb.readInt16(hn)){for(var an=tn.SIZEOF_SHORT;an<un;an+=tn.SIZEOF_SHORT)if(this.bb.readInt16(fn+an)!=this.bb.readInt16(hn+an))continue e;dn=this.vtables[sn];break}}return dn?(this.space=this.bb.capacity()-nn,this.bb.writeInt32(this.space,dn-nn)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-nn,this.offset()-nn)),this.isNested=!1,nn},tn.Builder.prototype.finish=function(nn,sn,on){var un=on?tn.SIZE_PREFIX_LENGTH:0;if(sn){var dn=sn;if(this.prep(this.minalign,tn.SIZEOF_INT+tn.FILE_IDENTIFIER_LENGTH+un),dn.length!=tn.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+tn.FILE_IDENTIFIER_LENGTH);for(var fn=tn.FILE_IDENTIFIER_LENGTH-1;fn>=0;fn--)this.writeInt8(dn.charCodeAt(fn))}this.prep(this.minalign,tn.SIZEOF_INT+un),this.addOffset(nn),un&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},tn.Builder.prototype.finishSizePrefixed=function(nn,sn){this.finish(nn,sn,!0)},tn.Builder.prototype.requiredField=function(nn,sn){var on=this.bb.capacity()-nn,un=on-this.bb.readInt32(on);if(this.bb.readInt16(un+sn)==0)throw new Error("FlatBuffers: field "+sn+" must be set")},tn.Builder.prototype.startVector=function(nn,sn,on){this.notNested(),this.vector_num_elems=sn,this.prep(tn.SIZEOF_INT,nn*sn),this.prep(on,nn*sn)},tn.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},tn.Builder.prototype.createString=function(nn){if(nn instanceof Uint8Array)var sn=nn;else{sn=[];for(var on=0;on<nn.length;){var un,dn=nn.charCodeAt(on++);(un=dn<55296||dn>=56320?dn:(dn<<10)+nn.charCodeAt(on++)+-56613888)<128?sn.push(un):(un<2048?sn.push(un>>6&31|192):(un<65536?sn.push(un>>12&15|224):sn.push(un>>18&7|240,un>>12&63|128),sn.push(un>>6&63|128)),sn.push(63&un|128))}}this.addInt8(0),this.startVector(1,sn.length,1),this.bb.setPosition(this.space-=sn.length),on=0;for(var fn=this.space,hn=this.bb.bytes();on<sn.length;on++)hn[fn++]=sn[on];return this.endVector()},tn.Builder.prototype.createLong=function(nn,sn){return tn.Long.create(nn,sn)},tn.ByteBuffer=function(nn){this.bytes_=nn,this.position_=0},tn.ByteBuffer.allocate=function(nn){return new tn.ByteBuffer(new Uint8Array(nn))},tn.ByteBuffer.prototype.clear=function(){this.position_=0},tn.ByteBuffer.prototype.bytes=function(){return this.bytes_},tn.ByteBuffer.prototype.position=function(){return this.position_},tn.ByteBuffer.prototype.setPosition=function(nn){this.position_=nn},tn.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},tn.ByteBuffer.prototype.readInt8=function(nn){return this.readUint8(nn)<<24>>24},tn.ByteBuffer.prototype.readUint8=function(nn){return this.bytes_[nn]},tn.ByteBuffer.prototype.readInt16=function(nn){return this.readUint16(nn)<<16>>16},tn.ByteBuffer.prototype.readUint16=function(nn){return this.bytes_[nn]|this.bytes_[nn+1]<<8},tn.ByteBuffer.prototype.readInt32=function(nn){return this.bytes_[nn]|this.bytes_[nn+1]<<8|this.bytes_[nn+2]<<16|this.bytes_[nn+3]<<24},tn.ByteBuffer.prototype.readUint32=function(nn){return this.readInt32(nn)>>>0},tn.ByteBuffer.prototype.readInt64=function(nn){return new tn.Long(this.readInt32(nn),this.readInt32(nn+4))},tn.ByteBuffer.prototype.readUint64=function(nn){return new tn.Long(this.readUint32(nn),this.readUint32(nn+4))},tn.ByteBuffer.prototype.readFloat32=function(nn){return tn.int32[0]=this.readInt32(nn),tn.float32[0]},tn.ByteBuffer.prototype.readFloat64=function(nn){return tn.int32[tn.isLittleEndian?0:1]=this.readInt32(nn),tn.int32[tn.isLittleEndian?1:0]=this.readInt32(nn+4),tn.float64[0]},tn.ByteBuffer.prototype.writeInt8=function(nn,sn){this.bytes_[nn]=sn},tn.ByteBuffer.prototype.writeUint8=function(nn,sn){this.bytes_[nn]=sn},tn.ByteBuffer.prototype.writeInt16=function(nn,sn){this.bytes_[nn]=sn,this.bytes_[nn+1]=sn>>8},tn.ByteBuffer.prototype.writeUint16=function(nn,sn){this.bytes_[nn]=sn,this.bytes_[nn+1]=sn>>8},tn.ByteBuffer.prototype.writeInt32=function(nn,sn){this.bytes_[nn]=sn,this.bytes_[nn+1]=sn>>8,this.bytes_[nn+2]=sn>>16,this.bytes_[nn+3]=sn>>24},tn.ByteBuffer.prototype.writeUint32=function(nn,sn){this.bytes_[nn]=sn,this.bytes_[nn+1]=sn>>8,this.bytes_[nn+2]=sn>>16,this.bytes_[nn+3]=sn>>24},tn.ByteBuffer.prototype.writeInt64=function(nn,sn){this.writeInt32(nn,sn.low),this.writeInt32(nn+4,sn.high)},tn.ByteBuffer.prototype.writeUint64=function(nn,sn){this.writeUint32(nn,sn.low),this.writeUint32(nn+4,sn.high)},tn.ByteBuffer.prototype.writeFloat32=function(nn,sn){tn.float32[0]=sn,this.writeInt32(nn,tn.int32[0])},tn.ByteBuffer.prototype.writeFloat64=function(nn,sn){tn.float64[0]=sn,this.writeInt32(nn,tn.int32[tn.isLittleEndian?0:1]),this.writeInt32(nn+4,tn.int32[tn.isLittleEndian?1:0])},tn.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+tn.SIZEOF_INT+tn.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var nn="",sn=0;sn<tn.FILE_IDENTIFIER_LENGTH;sn++)nn+=String.fromCharCode(this.readInt8(this.position_+tn.SIZEOF_INT+sn));return nn},tn.ByteBuffer.prototype.__offset=function(nn,sn){var on=nn-this.readInt32(nn);return sn<this.readInt16(on)?this.readInt16(on+sn):0},tn.ByteBuffer.prototype.__union=function(nn,sn){return nn.bb_pos=sn+this.readInt32(sn),nn.bb=this,nn},tn.ByteBuffer.prototype.__string=function(nn,sn){nn+=this.readInt32(nn);var on=this.readInt32(nn),un="",dn=0;if(nn+=tn.SIZEOF_INT,sn===tn.Encoding.UTF8_BYTES)return this.bytes_.subarray(nn,nn+on);for(;dn<on;){var fn,hn=this.readUint8(nn+dn++);if(hn<192)fn=hn;else{var an=this.readUint8(nn+dn++);if(hn<224)fn=(31&hn)<<6|63&an;else{var rn=this.readUint8(nn+dn++);fn=hn<240?(15&hn)<<12|(63&an)<<6|63&rn:(7&hn)<<18|(63&an)<<12|(63&rn)<<6|63&this.readUint8(nn+dn++)}}fn<65536?un+=String.fromCharCode(fn):(fn-=65536,un+=String.fromCharCode(55296+(fn>>10),56320+(1023&fn)))}return un},tn.ByteBuffer.prototype.__indirect=function(nn){return nn+this.readInt32(nn)},tn.ByteBuffer.prototype.__vector=function(nn){return nn+this.readInt32(nn)+tn.SIZEOF_INT},tn.ByteBuffer.prototype.__vector_len=function(nn){return this.readInt32(nn+this.readInt32(nn))},tn.ByteBuffer.prototype.__has_identifier=function(nn){if(nn.length!=tn.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+tn.FILE_IDENTIFIER_LENGTH);for(var sn=0;sn<tn.FILE_IDENTIFIER_LENGTH;sn++)if(nn.charCodeAt(sn)!=this.readInt8(this.position_+tn.SIZEOF_INT+sn))return!1;return!0},tn.ByteBuffer.prototype.createLong=function(nn,sn){return tn.Long.create(nn,sn)}}},__webpack_module_cache__={};function __webpack_require__(St){var e=__webpack_module_cache__[St];if(e!==void 0)return e.exports;var en=__webpack_module_cache__[St]={exports:{}};return __webpack_modules__[St].call(en.exports,en,en.exports,__webpack_require__),en.exports}__webpack_require__.n=St=>{var e=St&&St.__esModule?()=>St.default:()=>St;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(St,e)=>{for(var en in e)__webpack_require__.o(e,en)&&!__webpack_require__.o(St,en)&&Object.defineProperty(St,en,{enumerable:!0,get:e[en]})},__webpack_require__.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),__webpack_require__.o=(St,e)=>Object.prototype.hasOwnProperty.call(St,e),__webpack_require__.r=St=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(St,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(St,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(6018);return __webpack_exports__})())})(ortWeb_min);var ortWeb_minExports=ortWeb_min.exports;const ortWeb_min_default=getDefaultExportFromCjs(ortWeb_minExports),ONNX_WEB=_mergeNamespaces({__proto__:null,default:ortWeb_min_default},[ortWeb_minExports]);let ONNX;const executionProviders=["wasm"];var Lm;typeof process<"u"&&((Lm=process==null?void 0:process.release)==null?void 0:Lm.name)==="node"?(ONNX=sharp??ONNX_NODE,executionProviders.unshift("cpu")):(ONNX=ortWeb_min_default??ONNX_WEB,typeof navigator<"u"&&/iP(hone|od|ad).+16_4.+AppleWebKit/.test(navigator.userAgent)&&(ONNX.env.wasm.simd=!1));const{env:onnx_env}=ONNX,VERSION="2.17.2",WEB_CACHE_AVAILABLE=typeof self<"u"&&"caches"in self,FS_AVAILABLE=!isEmpty(sharp),PATH_AVAILABLE=!isEmpty(sharp),RUNNING_LOCALLY=FS_AVAILABLE&&PATH_AVAILABLE,__dirname$1=RUNNING_LOCALLY?sharp.dirname(sharp.dirname(sharp.fileURLToPath(import.meta.url))):"./",DEFAULT_CACHE_DIR=RUNNING_LOCALLY?sharp.join(__dirname$1,"/.cache/"):null,DEFAULT_LOCAL_MODEL_PATH="/models/",localModelPath=RUNNING_LOCALLY?sharp.join(__dirname$1,DEFAULT_LOCAL_MODEL_PATH):DEFAULT_LOCAL_MODEL_PATH;onnx_env!=null&&onnx_env.wasm&&(onnx_env.wasm.wasmPaths=RUNNING_LOCALLY?sharp.join(__dirname$1,"/dist/"):`https://cdn.jsdelivr.net/npm/@xenova/transformers@${VERSION}/dist/`);const env$1={version:VERSION,remoteHost:"https://huggingface.co/",remotePathTemplate:"{model}/resolve/{revision}/",localModelPath,useFS:FS_AVAILABLE,useBrowserCache:WEB_CACHE_AVAILABLE,useFSCache:FS_AVAILABLE,cacheDir:DEFAULT_CACHE_DIR};function isEmpty(St){return Object.keys(St).length===0}var define_process_env_default={};class FileResponse{constructor(e){Mr(this,"_CONTENT_TYPE_MAP",{txt:"text/plain",html:"text/html",css:"text/css",js:"text/javascript",json:"application/json",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif"});if(this.filePath=e,this.headers=new Headers,this.exists=sharp.existsSync(e),this.exists){this.status=200,this.statusText="OK";let en=sharp.statSync(e);this.headers.set("content-length",en.size.toString()),this.updateContentType();let tn=this;this.body=new ReadableStream({start(nn){tn.arrayBuffer().then(sn=>{nn.enqueue(new Uint8Array(sn)),nn.close()})}})}else this.status=404,this.statusText="Not Found",this.body=null}updateContentType(){const e=this.filePath.toString().split(".").pop().toLowerCase();this.headers.set("content-type",this._CONTENT_TYPE_MAP[e]??"application/octet-stream")}clone(){let e=new FileResponse(this.filePath);return e.exists=this.exists,e.status=this.status,e.statusText=this.statusText,e.headers=new Headers(this.headers),e}async arrayBuffer(){return(await sharp.promises.readFile(this.filePath)).buffer}async blob(){const e=await sharp.promises.readFile(this.filePath);return new Blob([e],{type:this.headers.get("content-type")})}async text(){return await sharp.promises.readFile(this.filePath,"utf8")}async json(){return JSON.parse(await this.text())}}function isValidUrl(St,e=null,en=null){let tn;try{tn=new URL(St)}catch{return!1}return!(e&&!e.includes(tn.protocol)||en&&!en.includes(tn.hostname))}async function getFile(St){var e;if(env$1.useFS&&!isValidUrl(St,["http:","https:","blob:"]))return new FileResponse(St);if(typeof process<"u"&&((e=process==null?void 0:process.release)==null?void 0:e.name)==="node"){const en=!!(define_process_env_default!=null&&define_process_env_default.TESTING_REMOTELY),tn=env$1.version,nn=new Headers;if(nn.set("User-Agent",`transformers.js/${tn}; is_ci/${en};`),isValidUrl(St,["http:","https:"],["huggingface.co","hf.co"])){const on=(define_process_env_default==null?void 0:define_process_env_default.HF_TOKEN)??(define_process_env_default==null?void 0:define_process_env_default.HF_ACCESS_TOKEN);on&&nn.set("Authorization",`Bearer ${on}`)}return fetch(St,{headers:nn})}else return fetch(St)}const ERROR_MAPPING={400:"Bad request error occurred while trying to load file",401:"Unauthorized access to file",403:"Forbidden access to file",404:"Could not locate file",408:"Request timeout error occurred while trying to load file",500:"Internal server error error occurred while trying to load file",502:"Bad gateway error occurred while trying to load file",503:"Service unavailable error occurred while trying to load file",504:"Gateway timeout error occurred while trying to load file"};function handleError(St,e,en){if(!en)return null;const tn=ERROR_MAPPING[St]??`Error (${St}) occurred while trying to load file`;throw Error(`${tn}: "${e}".`)}class FileCache{constructor(e){this.path=e}async match(e){let en=sharp.join(this.path,e),tn=new FileResponse(en);if(tn.exists)return tn}async put(e,en){const tn=Buffer.from(await en.arrayBuffer());let nn=sharp.join(this.path,e);try{await sharp.promises.mkdir(sharp.dirname(nn),{recursive:!0}),await sharp.promises.writeFile(nn,tn)}catch(sn){console.warn("An error occurred while writing the file to cache:",sn)}}}async function tryCache(St,...e){for(let en of e)try{let tn=await St.match(en);if(tn)return tn}catch{continue}}async function getModelFile(St,e,en=!0,tn={}){dispatchCallback(tn.progress_callback,{status:"initiate",name:St,file:e});let nn;if(!nn&&env$1.useBrowserCache){if(typeof caches>"u")throw Error("Browser cache is not available in this environment.");try{nn=await caches.open("transformers-cache")}catch(gn){console.warn("An error occurred while opening the browser cache:",gn)}}!nn&&env$1.useFSCache&&(nn=new FileCache(tn.cache_dir??env$1.cacheDir));const sn=tn.revision??"main";let on=pathJoin(St,e),un=pathJoin(env$1.localModelPath,on),dn=pathJoin(env$1.remoteHost,env$1.remotePathTemplate.replaceAll("{model}",St).replaceAll("{revision}",encodeURIComponent(sn)),e),fn=sn==="main"?on:pathJoin(St,sn,e),hn,an=nn instanceof FileCache?fn:dn,rn=!1,cn;nn&&(cn=await tryCache(nn,un,an));const pn=cn!==void 0;if(cn===void 0){if(isValidUrl(on,["http:","https:"])){if(tn.local_files_only)throw new Error(`\`local_files_only=true\`, but attempted to load a remote file from: ${on}.`)}else try{cn=await getFile(un),hn=un}catch(yn){console.warn(`Unable to load from local path "${un}": "${yn}"`)}if(cn===void 0||cn.status===404){if(tn.local_files_only){if(en)throw Error(`\`local_files_only=true\` or \`env.allowRemoteModels=false\` and file was not found locally at "${un}".`);return null}if(cn=await getFile(dn),cn.status!==200)return handleError(cn.status,dn,en);hn=an}rn=nn&&typeof Response<"u"&&cn instanceof Response&&cn.status===200}dispatchCallback(tn.progress_callback,{status:"download",name:St,file:e});const mn={status:"progress",name:St,file:e};let xn;return tn.progress_callback?pn&&typeof navigator<"u"&&/firefox/i.test(navigator.userAgent)?(xn=new Uint8Array(await cn.arrayBuffer()),dispatchCallback(tn.progress_callback,{...mn,progress:100,loaded:xn.length,total:xn.length})):xn=await readResponse(cn,gn=>{dispatchCallback(tn.progress_callback,{...mn,...gn})}):xn=new Uint8Array(await cn.arrayBuffer()),rn&&hn&&await nn.match(hn)===void 0&&await nn.put(hn,new Response(xn,{headers:cn.headers})).catch(gn=>{console.warn(`Unable to add response to browser cache: ${gn}.`)}),dispatchCallback(tn.progress_callback,{status:"done",name:St,file:e}),xn}async function getModelJSON(St,e,en=!0,tn={}){let nn=await getModelFile(St,e,en,tn);if(nn===null)return{};let on=new TextDecoder("utf-8").decode(nn);return JSON.parse(on)}async function readResponse(St,e){const en=St.headers.get("Content-Length");en===null&&console.warn("Unable to determine content-length from response headers. Will expand buffer when needed.");let tn=parseInt(en??"0"),nn=new Uint8Array(tn),sn=0;const on=St.body.getReader();async function un(){const{done:dn,value:fn}=await on.read();if(dn)return;let hn=sn+fn.length;if(hn>tn){tn=hn;let rn=new Uint8Array(tn);rn.set(nn),nn=rn}nn.set(fn,sn),sn=hn;const an=sn/tn*100;return e({progress:an,loaded:sn,total:tn}),un()}return await un(),nn}function pathJoin(...St){return St=St.map((e,en)=>(en&&(e=e.replace(new RegExp("^/"),"")),en!==St.length-1&&(e=e.replace(new RegExp("/$"),"")),e)),St.join("/")}function interpolate_data(St,[e,en,tn],[nn,sn],on="bilinear",un=!1){const dn=sn/tn,fn=nn/en,hn=new St.constructor(nn*sn*e),an=en*tn,rn=nn*sn;for(let cn=0;cn<nn;++cn)for(let pn=0;pn<sn;++pn){const mn=cn*sn+pn,xn=(pn+.5)/dn-.5,gn=(cn+.5)/fn-.5;let yn=Math.floor(xn),bn=Math.floor(gn);const wn=Math.min(yn+1,tn-1),_n=Math.min(bn+1,en-1);yn=Math.max(yn,0),bn=Math.max(bn,0);const Tn=xn-yn,An=gn-bn,Pn=(1-Tn)*(1-An),Sn=Tn*(1-An),Cn=(1-Tn)*An,Nn=Tn*An,Mn=bn*tn,Fn=_n*tn,In=Mn+yn,Bn=Mn+wn,Ln=Fn+yn,qn=Fn+wn;for(let Yn=0;Yn<e;++Yn){const Qn=Yn*an;hn[Yn*rn+mn]=Pn*St[Qn+In]+Sn*St[Qn+Bn]+Cn*St[Qn+Ln]+Nn*St[Qn+qn]}}return hn}function permute_data(St,e,en){const tn=new Array(en.length),nn=new Array(en.length);for(let un=en.length-1,dn=1;un>=0;--un)nn[un]=dn,tn[un]=e[en[un]],dn*=tn[un];const sn=en.map((un,dn)=>nn[en.indexOf(dn)]),on=new St.constructor(St.length);for(let un=0;un<St.length;++un){let dn=0;for(let fn=e.length-1,hn=un;fn>=0;--fn)dn+=hn%e[fn]*sn[fn],hn=Math.floor(hn/e[fn]);on[dn]=St[un]}return[on,tn]}function softmax(St){const e=max(St)[0],en=St.map(sn=>Math.exp(sn-e)),tn=en.reduce((sn,on)=>sn+on,0);return en.map(sn=>sn/tn)}function log_softmax(St){return softmax(St).map(tn=>Math.log(tn))}function getTopItems(St,e=0){return St=Array.from(St).map((en,tn)=>[tn,en]).sort((en,tn)=>tn[1]-en[1]),e!==null&&e>0&&(St=St.slice(0,e)),St}function min(St){if(St.length===0)throw Error("Array must not be empty");let e=St[0],en=0;for(let tn=1;tn<St.length;++tn)St[tn]<e&&(e=St[tn],en=tn);return[e,en]}function max(St){if(St.length===0)throw Error("Array must not be empty");let e=St[0],en=0;for(let tn=1;tn<St.length;++tn)St[tn]>e&&(e=St[tn],en=tn);return[Number(e),en]}function isPowerOfTwo(St){return St>0&&(St&St-1)===0}class P2FFT{constructor(e){if(this.size=e|0,this.size<=1||!isPowerOfTwo(this.size))throw new Error("FFT size must be a power of two larger than 1");this._csize=e<<1,this.table=new Float64Array(this.size*2);for(let tn=0;tn<this.table.length;tn+=2){const nn=Math.PI*tn/this.size;this.table[tn]=Math.cos(nn),this.table[tn+1]=-Math.sin(nn)}let en=0;for(let tn=1;this.size>tn;tn<<=1)++en;this._width=en%2===0?en-1:en,this._bitrev=new Int32Array(1<<this._width);for(let tn=0;tn<this._bitrev.length;++tn){this._bitrev[tn]=0;for(let nn=0;nn<this._width;nn+=2){const sn=this._width-nn-2;this._bitrev[tn]|=(tn>>>nn&3)<<sn}}}createComplexArray(){return new Float64Array(this._csize)}fromComplexArray(e,en){const tn=en||new Array(e.length>>>1);for(let nn=0;nn<e.length;nn+=2)tn[nn>>>1]=e[nn];return tn}toComplexArray(e,en){const tn=en||this.createComplexArray();for(let nn=0;nn<tn.length;nn+=2)tn[nn]=e[nn>>>1],tn[nn+1]=0;return tn}transform(e,en){if(e===en)throw new Error("Input and output buffers must be different");this._transform4(e,en,1)}realTransform(e,en){if(e===en)throw new Error("Input and output buffers must be different");this._realTransform4(e,en,1)}inverseTransform(e,en){if(e===en)throw new Error("Input and output buffers must be different");this._transform4(e,en,-1);for(let tn=0;tn<e.length;++tn)e[tn]/=this.size}_transform4(e,en,tn){const nn=this._csize;let on=1<<this._width,un=nn/on<<1,dn,fn;const hn=this._bitrev;if(un===4)for(dn=0,fn=0;dn<nn;dn+=un,++fn){const rn=hn[fn];this._singleTransform2(en,e,dn,rn,on)}else for(dn=0,fn=0;dn<nn;dn+=un,++fn){const rn=hn[fn];this._singleTransform4(en,e,dn,rn,on,tn)}const an=this.table;for(on>>=2;on>=2;on>>=2){un=nn/on<<1;const rn=un>>>2;for(dn=0;dn<nn;dn+=un){const cn=dn+rn-1;for(let pn=dn,mn=0;pn<cn;pn+=2,mn+=on){const xn=pn,gn=xn+rn,yn=gn+rn,bn=yn+rn,wn=e[xn],_n=e[xn+1],Tn=e[gn],An=e[gn+1],Pn=e[yn],Sn=e[yn+1],Cn=e[bn],Nn=e[bn+1],Mn=an[mn],Fn=tn*an[mn+1],In=Tn*Mn-An*Fn,Bn=Tn*Fn+An*Mn,Ln=an[2*mn],qn=tn*an[2*mn+1],Yn=Pn*Ln-Sn*qn,Qn=Pn*qn+Sn*Ln,zn=an[3*mn],lr=tn*an[3*mn+1],$n=Cn*zn-Nn*lr,On=Cn*lr+Nn*zn,er=wn+Yn,sr=_n+Qn,ar=wn-Yn,cr=_n-Qn,gr=In+$n,vr=Bn+On,Er=tn*(In-$n),Rr=tn*(Bn-On);e[xn]=er+gr,e[xn+1]=sr+vr,e[gn]=ar+Rr,e[gn+1]=cr-Er,e[yn]=er-gr,e[yn+1]=sr-vr,e[bn]=ar-Rr,e[bn+1]=cr+Er}}}}_singleTransform2(e,en,tn,nn,sn){const on=e[nn],un=e[nn+1],dn=e[nn+sn],fn=e[nn+sn+1];en[tn]=on+dn,en[tn+1]=un+fn,en[tn+2]=on-dn,en[tn+3]=un-fn}_singleTransform4(e,en,tn,nn,sn,on){const un=sn*2,dn=sn*3,fn=e[nn],hn=e[nn+1],an=e[nn+sn],rn=e[nn+sn+1],cn=e[nn+un],pn=e[nn+un+1],mn=e[nn+dn],xn=e[nn+dn+1],gn=fn+cn,yn=hn+pn,bn=fn-cn,wn=hn-pn,_n=an+mn,Tn=rn+xn,An=on*(an-mn),Pn=on*(rn-xn);en[tn]=gn+_n,en[tn+1]=yn+Tn,en[tn+2]=bn+Pn,en[tn+3]=wn-An,en[tn+4]=gn-_n,en[tn+5]=yn-Tn,en[tn+6]=bn-Pn,en[tn+7]=wn+An}_realTransform4(e,en,tn){const nn=this._csize;let on=1<<this._width,un=nn/on<<1,dn,fn;const hn=this._bitrev;if(un===4)for(dn=0,fn=0;dn<nn;dn+=un,++fn){const cn=hn[fn];this._singleRealTransform2(en,e,dn,cn>>>1,on>>>1)}else for(dn=0,fn=0;dn<nn;dn+=un,++fn){const cn=hn[fn];this._singleRealTransform4(en,e,dn,cn>>>1,on>>>1,tn)}const an=this.table;for(on>>=2;on>=2;on>>=2){un=nn/on<<1;const cn=un>>>1,pn=cn>>>1,mn=pn>>>1;for(dn=0;dn<nn;dn+=un)for(let xn=0,gn=0;xn<=mn;xn+=2,gn+=on){const yn=dn+xn,bn=yn+pn,wn=bn+pn,_n=wn+pn,Tn=e[yn],An=e[yn+1],Pn=e[bn],Sn=e[bn+1],Cn=e[wn],Nn=e[wn+1],Mn=e[_n],Fn=e[_n+1],In=Tn,Bn=An,Ln=an[gn],qn=tn*an[gn+1],Yn=Pn*Ln-Sn*qn,Qn=Pn*qn+Sn*Ln,zn=an[2*gn],lr=tn*an[2*gn+1],$n=Cn*zn-Nn*lr,On=Cn*lr+Nn*zn,er=an[3*gn],sr=tn*an[3*gn+1],ar=Mn*er-Fn*sr,cr=Mn*sr+Fn*er,gr=In+$n,vr=Bn+On,Er=In-$n,Rr=Bn-On,Kr=Yn+ar,Cr=Qn+cr,Gr=tn*(Yn-ar),Zn=tn*(Qn-cr);if(e[yn]=gr+Kr,e[yn+1]=vr+Cr,e[bn]=Er+Zn,e[bn+1]=Rr-Gr,xn===0){e[wn]=gr-Kr,e[wn+1]=vr-Cr;continue}if(xn===mn)continue;const Xr=dn+pn-xn,hs=dn+cn-xn;e[Xr]=Er-tn*Zn,e[Xr+1]=-Rr-tn*Gr,e[hs]=gr-tn*Kr,e[hs+1]=-vr+tn*Cr}}const rn=nn>>>1;for(let cn=2;cn<rn;cn+=2)e[nn-cn]=e[cn],e[nn-cn+1]=-e[cn+1]}_singleRealTransform2(e,en,tn,nn,sn){const on=e[nn],un=e[nn+sn];en[tn]=on+un,en[tn+1]=0,en[tn+2]=on-un,en[tn+3]=0}_singleRealTransform4(e,en,tn,nn,sn,on){const un=sn*2,dn=sn*3,fn=e[nn],hn=e[nn+sn],an=e[nn+un],rn=e[nn+dn],cn=fn+an,pn=fn-an,mn=hn+rn,xn=on*(hn-rn);en[tn]=cn+mn,en[tn+1]=0,en[tn+2]=pn,en[tn+3]=-xn,en[tn+4]=cn-mn,en[tn+5]=0,en[tn+6]=pn,en[tn+7]=xn}}class NP2FFT{constructor(e){const en=2*(e-1),tn=2*(2*e-1),nn=2**Math.ceil(Math.log2(tn));this.bufferSize=nn,this._a=en;const sn=new Float64Array(tn),on=new Float64Array(nn);this._chirpBuffer=new Float64Array(nn),this._buffer1=new Float64Array(nn),this._buffer2=new Float64Array(nn),this._outBuffer1=new Float64Array(nn),this._outBuffer2=new Float64Array(nn);const un=-2*Math.PI/e,dn=Math.cos(un),fn=Math.sin(un);for(let hn=0;hn<tn>>1;++hn){const an=(hn+1-e)**2/2,rn=Math.sqrt(dn**2+fn**2)**an,cn=an*Math.atan2(fn,dn),pn=2*hn;sn[pn]=rn*Math.cos(cn),sn[pn+1]=rn*Math.sin(cn),on[pn]=sn[pn],on[pn+1]=-sn[pn+1]}this._slicedChirpBuffer=sn.subarray(en,tn),this._f=new P2FFT(nn>>1),this._f.transform(this._chirpBuffer,on)}_transform(e,en,tn){const nn=this._buffer1,sn=this._buffer2,on=this._outBuffer1,un=this._outBuffer2,dn=this._chirpBuffer,fn=this._slicedChirpBuffer,hn=this._a;if(tn)for(let an=0;an<fn.length;an+=2){const rn=an+1,cn=an>>1,pn=en[cn];nn[an]=pn*fn[an],nn[rn]=pn*fn[rn]}else for(let an=0;an<fn.length;an+=2){const rn=an+1;nn[an]=en[an]*fn[an]-en[rn]*fn[rn],nn[rn]=en[an]*fn[rn]+en[rn]*fn[an]}this._f.transform(on,nn);for(let an=0;an<dn.length;an+=2){const rn=an+1;sn[an]=on[an]*dn[an]-on[rn]*dn[rn],sn[rn]=on[an]*dn[rn]+on[rn]*dn[an]}this._f.inverseTransform(un,sn);for(let an=0;an<un.length;an+=2){const rn=un[an+hn],cn=un[an+hn+1],pn=fn[an],mn=fn[an+1];e[an]=rn*pn-cn*mn,e[an+1]=rn*mn+cn*pn}}transform(e,en){this._transform(e,en,!1)}realTransform(e,en){this._transform(e,en,!0)}}class FFT{constructor(e){this.fft_length=e,this.isPowerOfTwo=isPowerOfTwo(e),this.isPowerOfTwo?(this.fft=new P2FFT(e),this.outputBufferSize=2*e):(this.fft=new NP2FFT(e),this.outputBufferSize=this.fft.bufferSize)}realTransform(e,en){this.fft.realTransform(e,en)}transform(e,en){this.fft.transform(e,en)}}function medianFilter(St,e){if(e%2===0||e<=0)throw new Error("Window size must be a positive odd number");const en=new St.constructor(St.length),tn=new St.constructor(e),nn=Math.floor(e/2);for(let sn=0;sn<St.length;++sn){let on=0;for(let un=-nn;un<=nn;++un){let dn=sn+un;dn<0?dn=Math.abs(dn):dn>=St.length&&(dn=2*(St.length-1)-dn),tn[on++]=St[dn]}tn.sort(),en[sn]=tn[nn]}return en}function round(St,e){const en=Math.pow(10,e);return Math.round(St*en)/en}function bankers_round(St){const e=Math.round(St);return Math.abs(St)%1===.5?e%2===0?e:e-1:e}const DataTypeMap=Object.freeze({float32:Float32Array,float64:Float64Array,string:Array,int8:Int8Array,uint8:Uint8Array,int16:Int16Array,uint16:Uint16Array,int32:Int32Array,uint32:Uint32Array,int64:BigInt64Array,uint64:BigUint64Array,bool:Uint8Array}),ONNXTensor$1=ONNX.Tensor;class Tensor{constructor(...e){Mr(this,"dims");Mr(this,"type");Mr(this,"data");Mr(this,"size");return e[0]instanceof ONNXTensor$1?Object.assign(this,e[0]):Object.assign(this,new ONNXTensor$1(e[0],e[1],e[2])),new Proxy(this,{get:(en,tn)=>{if(typeof tn=="string"){let nn=Number(tn);if(Number.isInteger(nn))return en._getitem(nn)}return en[tn]},set:(en,tn,nn)=>en[tn]=nn})}*[Symbol.iterator](){const[e,...en]=this.dims;if(en.length>0){const tn=en.reduce((nn,sn)=>nn*sn);for(let nn=0;nn<e;++nn)yield this._subarray(nn,tn,en)}else yield*this.data}_getitem(e){const[en,...tn]=this.dims;if(e=safeIndex(e,en),tn.length>0){const nn=tn.reduce((sn,on)=>sn*on);return this._subarray(e,nn,tn)}else return new Tensor(this.type,[this.data[e]],tn)}indexOf(e){for(let en=0;en<this.data.length;++en)if(this.data[en]==e)return en;return-1}_subarray(e,en,tn){const nn=e*en,sn=(e+1)*en,on="subarray"in this.data?this.data.subarray(nn,sn):this.data.slice(nn,sn);return new Tensor(this.type,on,tn)}item(){if(this.data.length!==1)throw new Error(`a Tensor with ${this.data.length} elements cannot be converted to Scalar`);return this.data[0]}tolist(){return reshape(this.data,this.dims)}sigmoid(){return this.clone().sigmoid_()}sigmoid_(){for(let e=0;e<this.data.length;++e)this.data[e]=1/(1+Math.exp(-this.data[e]));return this}mul(e){return this.clone().mul_(e)}mul_(e){for(let en=0;en<this.data.length;++en)this.data[en]*=e;return this}add(e){return this.clone().add_(e)}add_(e){for(let en=0;en<this.data.length;++en)this.data[en]+=e;return this}clone(){return new Tensor(this.type,this.data.slice(),this.dims.slice())}slice(...e){let en=[],tn=[];for(let dn=0;dn<this.dims.length;++dn){let fn=e[dn];if(fn==null)tn.push([0,this.dims[dn]]),en.push(this.dims[dn]);else if(typeof fn=="number")fn=safeIndex(fn,this.dims[dn],dn),tn.push([fn,fn+1]);else if(Array.isArray(fn)&&fn.length===2){if(fn[0]>fn[1])throw new Error(`Invalid slice: ${fn}`);let hn=[Math.max(fn[0],0),Math.min(fn[1],this.dims[dn])];tn.push(hn),en.push(hn[1]-hn[0])}else throw new Error(`Invalid slice: ${fn}`)}let nn=tn.map(([dn,fn])=>fn-dn),sn=nn.reduce((dn,fn)=>dn*fn),on=new this.data.constructor(sn);const un=this.stride();for(let dn=0;dn<sn;++dn){let fn=0;for(let hn=nn.length-1,an=dn;hn>=0;--hn){const rn=nn[hn];fn+=(an%rn+tn[hn][0])*un[hn],an=Math.floor(an/rn)}on[dn]=this.data[fn]}return new Tensor(this.type,on,en)}permute(...e){return permute(this,e)}transpose(...e){return this.permute(...e)}sum(e=null,en=!1){return this.norm(1,e,en)}norm(e="fro",en=null,tn=!1){if(e==="fro")e=2;else if(typeof e=="string")throw Error(`Unsupported norm: ${e}`);if(en===null){let on=this.data.reduce((un,dn)=>un+dn**e,0)**(1/e);return new Tensor(this.type,[on],[])}en=safeIndex(en,this.dims.length);const nn=this.dims.slice();nn[en]=1;const sn=new this.data.constructor(this.data.length/this.dims[en]);for(let on=0;on<this.data.length;++on){let un=0;for(let dn=this.dims.length-1,fn=on,hn=1;dn>=0;--dn){const an=this.dims[dn];if(dn!==en){const rn=fn%an;un+=rn*hn,hn*=nn[dn]}fn=Math.floor(fn/an)}sn[un]+=this.data[on]**e}if(e!==1)for(let on=0;on<sn.length;++on)sn[on]=sn[on]**(1/e);return tn||nn.splice(en,1),new Tensor(this.type,sn,nn)}normalize_(e=2,en=1){en=safeIndex(en,this.dims.length);const tn=this.norm(e,en,!0);for(let nn=0;nn<this.data.length;++nn){let sn=0;for(let on=this.dims.length-1,un=nn,dn=1;on>=0;--on){const fn=this.dims[on];if(on!==en){const hn=un%fn;sn+=hn*dn,dn*=this.dims[on]}un=Math.floor(un/fn)}this.data[nn]/=tn.data[sn]}return this}normalize(e=2,en=1){return this.clone().normalize_(e,en)}stride(){return dimsToStride(this.dims)}squeeze(e=null){return new Tensor(this.type,this.data,calc_squeeze_dims(this.dims,e))}squeeze_(e=null){return this.dims=calc_squeeze_dims(this.dims,e),this}unsqueeze(e=null){return new Tensor(this.type,this.data,calc_unsqueeze_dims(this.dims,e))}unsqueeze_(e=null){return this.dims=calc_unsqueeze_dims(this.dims,e),this}flatten_(e=0,en=-1){en=(en+this.dims.length)%this.dims.length;let tn=this.dims.slice(0,e),nn=this.dims.slice(e,en+1),sn=this.dims.slice(en+1);return this.dims=[...tn,nn.reduce((on,un)=>on*un,1),...sn],this}flatten(e=0,en=-1){return this.clone().flatten_(e,en)}view(...e){let en=-1;for(let tn=0;tn<e.length;++tn)if(e[tn]===-1){if(en!==-1)throw new Error("Only one dimension can be inferred");en=tn}if(en!==-1){const tn=e.reduce((nn,sn,on)=>on!==en?nn*sn:nn,1);e[en]=this.data.length/tn}return new Tensor(this.type,this.data,e)}neg_(){for(let e=0;e<this.data.length;++e)this.data[e]=-this.data[e];return this}neg(){return this.clone().neg_()}clamp_(e,en){for(let tn=0;tn<this.data.length;++tn)this.data[tn]=Math.min(Math.max(this.data[tn],e),en);return this}clamp(e,en){return this.clone().clamp_(e,en)}round_(){for(let e=0;e<this.data.length;++e)this.data[e]=Math.round(this.data[e]);return this}round(){return this.clone().round_()}to(e){if(this.type===e)return this;if(!DataTypeMap.hasOwnProperty(e))throw new Error(`Unsupported type: ${e}`);return new Tensor(e,DataTypeMap[e].from(this.data),this.dims)}}function reshape(St,e){const en=St.length,tn=e.reduce((sn,on)=>sn*on);if(en!==tn)throw Error(`cannot reshape array of size ${en} into shape (${e})`);let nn=St;for(let sn=e.length-1;sn>=0;sn--)nn=nn.reduce((on,un)=>{let dn=on[on.length-1];return dn.length<e[sn]?dn.push(un):on.push([un]),on},[[]]);return nn[0]}function permute(St,e){const[en,tn]=permute_data(St.data,St.dims,e);return new Tensor(St.type,en,tn)}function interpolate(St,[e,en],tn="bilinear",nn=!1){const sn=St.dims.at(-3)??1,on=St.dims.at(-2),un=St.dims.at(-1);let dn=interpolate_data(St.data,[sn,on,un],[e,en],tn,nn);return new Tensor(St.type,dn,[sn,e,en])}function mean_pooling(St,e){let en=[St.dims[0],St.dims[2]],tn=new St.data.constructor(en[0]*en[1]),[nn,sn,on]=St.dims,un=0;for(let dn=0;dn<nn;++dn){let fn=dn*on*sn;for(let hn=0;hn<on;++hn){let an=0,rn=0,cn=dn*sn,pn=fn+hn;for(let xn=0;xn<sn;++xn){let gn=Number(e.data[cn+xn]);rn+=gn,an+=St.data[pn+xn*on]*gn}let mn=an/rn;tn[un++]=mn}}return new Tensor(St.type,tn,en)}function calc_squeeze_dims(St,e){return St=St.slice(),e===null?St=St.filter(en=>en!==1):typeof e=="number"?St[e]===1&&St.splice(e,1):Array.isArray(e)&&(St=St.filter((en,tn)=>en!==1||!e.includes(tn))),St}function calc_unsqueeze_dims(St,e){return e=safeIndex(e,St.length+1),St=St.slice(),St.splice(e,0,1),St}function safeIndex(St,e,en=null){if(St<-e||St>=e)throw new Error(`IndexError: index ${St} is out of bounds for dimension${en===null?"":" "+en} with size ${e}`);return St<0&&(St=(St%e+e)%e),St}function cat(St,e=0){e=safeIndex(e,St[0].dims.length);const en=St[0].dims.slice();en[e]=St.reduce((on,un)=>on+un.dims[e],0);const tn=en.reduce((on,un)=>on*un,1),nn=new St[0].data.constructor(tn),sn=St[0].type;if(e===0){let on=0;for(let un of St)nn.set(un.data,on),on+=un.data.length}else{let on=0;for(let un=0;un<St.length;++un){let dn=St[un];for(let fn=0;fn<dn.data.length;++fn){let hn=0;for(let an=dn.dims.length-1,rn=fn,cn=1;an>=0;--an){const pn=dn.dims[an];let mn=rn%pn;an===e&&(mn+=on),hn+=mn*cn,cn*=en[an],rn=Math.floor(rn/pn)}nn[hn]=dn.data[fn]}on+=dn.dims[e]}}return new Tensor(sn,nn,en)}function stack(St,e=0){return cat(St.map(en=>en.unsqueeze(e)),e)}function std_mean(St,e=null,en=1,tn=!1){if(e===null){const fn=St.data.reduce((cn,pn)=>cn+pn,0)/St.data.length,hn=Math.sqrt(St.data.reduce((cn,pn)=>cn+(pn-fn)**2,0)/(St.data.length-en)),an=new Tensor(St.type,[fn],[]);return[new Tensor(St.type,[hn],[]),an]}e=safeIndex(e,St.dims.length);const nn=mean(St,e,tn),sn=St.dims.slice();sn[e]=1;const on=new St.data.constructor(St.data.length/St.dims[e]);for(let dn=0;dn<St.data.length;++dn){let fn=0;for(let hn=St.dims.length-1,an=dn,rn=1;hn>=0;--hn){const cn=St.dims[hn];if(hn!==e){const pn=an%cn;fn+=pn*rn,rn*=sn[hn]}an=Math.floor(an/cn)}on[fn]+=(St.data[dn]-nn.data[fn])**2}for(let dn=0;dn<on.length;++dn)on[dn]=Math.sqrt(on[dn]/(St.dims[e]-en));return tn||sn.splice(e,1),[new Tensor(St.type,on,sn),nn]}function mean(St,e=null,en=!1){if(e===null){let sn=St.data.reduce((on,un)=>on+un,0);return new Tensor(St.type,[sn/St.data.length],[])}e=safeIndex(e,St.dims.length);const tn=St.dims.slice();tn[e]=1;const nn=new St.data.constructor(St.data.length/St.dims[e]);for(let sn=0;sn<St.data.length;++sn){let on=0;for(let un=St.dims.length-1,dn=sn,fn=1;un>=0;--un){const hn=St.dims[un];if(un!==e){const an=dn%hn;on+=an*fn,fn*=tn[un]}dn=Math.floor(dn/hn)}nn[on]+=St.data[sn]}if(St.dims[e]!==1)for(let sn=0;sn<nn.length;++sn)nn[sn]=nn[sn]/St.dims[e];return en||tn.splice(e,1),new Tensor(St.type,nn,tn)}function dynamicTimeWarping(St){const[e,en]=St.dims,tn=[e+1,en+1],nn=new Tensor("float32",new Float32Array(tn[0]*tn[1]).fill(1/0),tn),sn=new Tensor("float32",new Float32Array(tn[0]*tn[1]).fill(-1),tn);nn[0].data[0]=0;for(let hn=1;hn<en+1;++hn)for(let an=1;an<e+1;++an){const rn=nn[an-1][hn-1].item(),cn=nn[an-1][hn].item(),pn=nn[an][hn-1].item();let mn,xn;rn<cn&&rn<pn?(mn=rn,xn=0):cn<rn&&cn<pn?(mn=cn,xn=1):(mn=pn,xn=2),nn[an].data[hn]=St[an-1][hn-1].item()+mn,sn[an].data[hn]=xn}let on=e,un=en;sn.data.fill(2,0,tn[1]);for(let hn=0;hn<tn[0];++hn)sn[hn].data[0]=1;let dn=[],fn=[];for(;on>0||un>0;)switch(dn.push(on-1),fn.push(un-1),sn[on][un].item()){case 0:--on,--un;break;case 1:--on;break;case 2:--un;break;default:throw new Error(`Internal error in dynamic time warping. Unexpected trace[${on}, ${un}]. Please file a bug report.`)}return dn.reverse(),fn.reverse(),[dn,fn]}function dimsToStride(St){const e=new Array(St.length);for(let en=St.length-1,tn=1;en>=0;--en)e[en]=tn,tn*=St[en];return e}function ones(St){const e=St.reduce((en,tn)=>en*tn,1);return new Tensor("int64",new BigInt64Array(e).fill(1n),St)}function ones_like(St){return ones(St.dims)}function quantize_embeddings(St,e){if(St.dims.length!==2)throw new Error("The tensor must have 2 dimensions");if(St.dims.at(-1)%8!==0)throw new Error("The last dimension of the tensor must be a multiple of 8");if(!["binary","ubinary"].includes(e))throw new Error("The precision must be either 'binary' or 'ubinary'");const en=e==="binary",tn=en?"int8":"uint8",nn=en?Int8Array:Uint8Array,sn=St.data,on=new nn(sn.length/8);for(let un=0;un<sn.length;++un){const dn=sn[un]>0?1:0,fn=Math.floor(un/8),hn=un%8;on[fn]|=dn<<7-hn,en&&hn===0&&(on[fn]-=128)}return new Tensor(tn,on,[St.dims[0],St.dims[1]/8])}class PriorityQueue{constructor(e=(en,tn)=>en>tn){this._heap=[],this._comparator=e}get size(){return this._heap.length}isEmpty(){return this.size===0}peek(){return this._heap[0]}push(...e){return this.extend(e)}extend(e){for(const en of e)this._heap.push(en),this._siftUp();return this.size}pop(){const e=this.peek(),en=this.size-1;return en>0&&this._swap(0,en),this._heap.pop(),this._siftDown(),e}replace(e){const en=this.peek();return this._heap[0]=e,this._siftDown(),en}_parent(e){return(e+1>>>1)-1}_left(e){return(e<<1)+1}_right(e){return e+1<<1}_greater(e,en){return this._comparator(this._heap[e],this._heap[en])}_swap(e,en){const tn=this._heap[e];this._heap[e]=this._heap[en],this._heap[en]=tn}_siftUp(){let e=this.size-1;for(;e>0&&this._greater(e,this._parent(e));)this._swap(e,this._parent(e)),e=this._parent(e)}_siftDown(){let e=0;for(;this._left(e)<this.size&&this._greater(this._left(e),e)||this._right(e)<this.size&&this._greater(this._right(e),e);){const en=this._right(e)<this.size&&this._greater(this._right(e),this._left(e))?this._right(e):this._left(e);this._swap(e,en),e=en}}}class CharTrie{constructor(){this.root=CharTrieNode.default()}extend(e){for(let en of e)this.push(en)}push(e){let en=this.root;for(let tn of e){let nn=en.children.get(tn);nn===void 0&&(nn=CharTrieNode.default(),en.children.set(tn,nn)),en=nn}en.isLeaf=!0}*commonPrefixSearch(e){let en=this.root,tn="";for(let nn=0;nn<e.length&&en!==void 0;++nn){const sn=e[nn];tn+=sn,en=en.children.get(sn),en!==void 0&&en.isLeaf&&(yield tn)}}}class CharTrieNode{constructor(e,en){this.isLeaf=e,this.children=en}static default(){return new CharTrieNode(!1,new Map)}}class TokenLattice{constructor(e,en,tn){this.sentence=e,this.len=e.length,this.bosTokenId=en,this.eosTokenId=tn,this.nodes=[],this.beginNodes=Array.from({length:this.len+1},()=>[]),this.endNodes=Array.from({length:this.len+1},()=>[]);const nn=new TokenLatticeNode(this.bosTokenId,0,0,0,0),sn=new TokenLatticeNode(this.eosTokenId,1,this.len,0,0);this.nodes.push(nn.clone()),this.nodes.push(sn.clone()),this.beginNodes[this.len].push(sn),this.endNodes[0].push(nn)}insert(e,en,tn,nn){const sn=this.nodes.length,on=new TokenLatticeNode(nn,sn,e,en,tn);this.beginNodes[e].push(on),this.endNodes[e+en].push(on),this.nodes.push(on)}viterbi(){const e=this.len;let en=0;for(;en<=e;){if(this.beginNodes[en].length==0)return[];for(let un of this.beginNodes[en]){un.prev=null;let dn=0,fn=null;for(let hn of this.endNodes[en]){const an=hn.backtraceScore+un.score;(fn===null||an>dn)&&(fn=hn.clone(),dn=an)}if(fn!==null)un.prev=fn,un.backtraceScore=dn;else return[]}++en}const tn=[],sn=this.beginNodes[e][0].prev;if(sn===null)return[];let on=sn.clone();for(;on.prev!==null;)tn.push(on.clone()),on=on.clone().prev.clone();return tn.reverse(),tn}piece(e){return this.sentence.slice(e.pos,e.pos+e.length)}tokens(){return this.viterbi().map(en=>this.piece(en))}tokenIds(){return this.viterbi().map(en=>en.tokenId)}}class TokenLatticeNode{constructor(e,en,tn,nn,sn){this.tokenId=e,this.nodeId=en,this.pos=tn,this.length=nn,this.score=sn,this.prev=null,this.backtraceScore=0}clone(){const e=new TokenLatticeNode(this.tokenId,this.nodeId,this.pos,this.length,this.score);return e.prev=this.prev,e.backtraceScore=this.backtraceScore,e}}var TOKEN_TYPES=Object.freeze({Text:"Text",NumericLiteral:"NumericLiteral",BooleanLiteral:"BooleanLiteral",StringLiteral:"StringLiteral",Identifier:"Identifier",Equals:"Equals",OpenParen:"OpenParen",CloseParen:"CloseParen",OpenStatement:"OpenStatement",CloseStatement:"CloseStatement",OpenExpression:"OpenExpression",CloseExpression:"CloseExpression",OpenSquareBracket:"OpenSquareBracket",CloseSquareBracket:"CloseSquareBracket",OpenCurlyBracket:"OpenCurlyBracket",CloseCurlyBracket:"CloseCurlyBracket",Comma:"Comma",Dot:"Dot",Colon:"Colon",Pipe:"Pipe",CallOperator:"CallOperator",AdditiveBinaryOperator:"AdditiveBinaryOperator",MultiplicativeBinaryOperator:"MultiplicativeBinaryOperator",ComparisonBinaryOperator:"ComparisonBinaryOperator",UnaryOperator:"UnaryOperator",Set:"Set",If:"If",For:"For",In:"In",Is:"Is",NotIn:"NotIn",Else:"Else",EndIf:"EndIf",ElseIf:"ElseIf",EndFor:"EndFor",And:"And",Or:"Or",Not:"UnaryOperator"}),KEYWORDS=Object.freeze({set:TOKEN_TYPES.Set,for:TOKEN_TYPES.For,in:TOKEN_TYPES.In,is:TOKEN_TYPES.Is,if:TOKEN_TYPES.If,else:TOKEN_TYPES.Else,endif:TOKEN_TYPES.EndIf,elif:TOKEN_TYPES.ElseIf,endfor:TOKEN_TYPES.EndFor,and:TOKEN_TYPES.And,or:TOKEN_TYPES.Or,not:TOKEN_TYPES.Not,"not in":TOKEN_TYPES.NotIn,true:TOKEN_TYPES.BooleanLiteral,false:TOKEN_TYPES.BooleanLiteral}),Token=class{constructor(St,e){this.value=St,this.type=e}};function isWord(St){return/\w/.test(St)}function isInteger(St){return/[0-9]/.test(St)}var ORDERED_MAPPING_TABLE=[["{%",TOKEN_TYPES.OpenStatement],["%}",TOKEN_TYPES.CloseStatement],["{{",TOKEN_TYPES.OpenExpression],["}}",TOKEN_TYPES.CloseExpression],["(",TOKEN_TYPES.OpenParen],[")",TOKEN_TYPES.CloseParen],["{",TOKEN_TYPES.OpenCurlyBracket],["}",TOKEN_TYPES.CloseCurlyBracket],["[",TOKEN_TYPES.OpenSquareBracket],["]",TOKEN_TYPES.CloseSquareBracket],[",",TOKEN_TYPES.Comma],[".",TOKEN_TYPES.Dot],[":",TOKEN_TYPES.Colon],["|",TOKEN_TYPES.Pipe],["<=",TOKEN_TYPES.ComparisonBinaryOperator],[">=",TOKEN_TYPES.ComparisonBinaryOperator],["==",TOKEN_TYPES.ComparisonBinaryOperator],["!=",TOKEN_TYPES.ComparisonBinaryOperator],["<",TOKEN_TYPES.ComparisonBinaryOperator],[">",TOKEN_TYPES.ComparisonBinaryOperator],["+",TOKEN_TYPES.AdditiveBinaryOperator],["-",TOKEN_TYPES.AdditiveBinaryOperator],["*",TOKEN_TYPES.MultiplicativeBinaryOperator],["/",TOKEN_TYPES.MultiplicativeBinaryOperator],["%",TOKEN_TYPES.MultiplicativeBinaryOperator],["=",TOKEN_TYPES.Equals]],ESCAPE_CHARACTERS=new Map([["n",`
`],["t","	"],["r","\r"],["b","\b"],["f","\f"],["v","\v"],["'","'"],['"','"'],["\\","\\"]]);function preprocess(St,e={}){return St.endsWith(`
`)&&(St=St.slice(0,-1)),St=St.replace(/{#.*?#}/gs,"{##}"),e.lstrip_blocks&&(St=St.replace(/^[ \t]*({[#%])/gm,"$1")),e.trim_blocks&&(St=St.replace(/([#%]})\n/g,"$1")),St.replace(/{##}/g,"").replace(/-%}\s*/g,"%}").replace(/\s*{%-/g,"{%").replace(/-}}\s*/g,"}}").replace(/\s*{{-/g,"{{")}function tokenize(St,e={}){var on,un,dn;const en=[],tn=preprocess(St,e);let nn=0;const sn=fn=>{let hn="";for(;fn(tn[nn]);){if(tn[nn]==="\\"){if(++nn,nn>=tn.length)throw new SyntaxError("Unexpected end of input");const an=tn[nn++],rn=ESCAPE_CHARACTERS.get(an);if(rn===void 0)throw new SyntaxError(`Unexpected escaped character: ${an}`);hn+=rn;continue}if(hn+=tn[nn++],nn>=tn.length)throw new SyntaxError("Unexpected end of input")}return hn};e:for(;nn<tn.length;){const fn=(on=en.at(-1))==null?void 0:on.type;if(fn===void 0||fn===TOKEN_TYPES.CloseStatement||fn===TOKEN_TYPES.CloseExpression){let an="";for(;nn<tn.length&&!(tn[nn]==="{"&&(tn[nn+1]==="%"||tn[nn+1]==="{"));)an+=tn[nn++];if(an.length>0){en.push(new Token(an,TOKEN_TYPES.Text));continue}}sn(an=>/\s/.test(an));const hn=tn[nn];if(hn==="-"||hn==="+"){const an=(un=en.at(-1))==null?void 0:un.type;if(an===TOKEN_TYPES.Text||an===void 0)throw new SyntaxError(`Unexpected character: ${hn}`);switch(an){case TOKEN_TYPES.Identifier:case TOKEN_TYPES.NumericLiteral:case TOKEN_TYPES.BooleanLiteral:case TOKEN_TYPES.StringLiteral:case TOKEN_TYPES.CloseParen:case TOKEN_TYPES.CloseSquareBracket:break;default:{++nn;const rn=sn(isInteger);en.push(new Token(`${hn}${rn}`,rn.length>0?TOKEN_TYPES.NumericLiteral:TOKEN_TYPES.UnaryOperator));continue}}}for(const[an,rn]of ORDERED_MAPPING_TABLE)if(tn.slice(nn,nn+an.length)===an){en.push(new Token(an,rn)),nn+=an.length;continue e}if(hn==="'"||hn==='"'){++nn;const an=sn(rn=>rn!==hn);en.push(new Token(an,TOKEN_TYPES.StringLiteral)),++nn;continue}if(isInteger(hn)){const an=sn(isInteger);en.push(new Token(an,TOKEN_TYPES.NumericLiteral));continue}if(isWord(hn)){const an=sn(isWord),rn=Object.hasOwn(KEYWORDS,an)?KEYWORDS[an]:TOKEN_TYPES.Identifier;rn===TOKEN_TYPES.In&&((dn=en.at(-1))==null?void 0:dn.type)===TOKEN_TYPES.Not?(en.pop(),en.push(new Token("not in",TOKEN_TYPES.NotIn))):en.push(new Token(an,rn));continue}throw new SyntaxError(`Unexpected character: ${hn}`)}return en}var Statement=class{constructor(){Mr(this,"type","Statement")}},Program=class extends Statement{constructor(e){super();Mr(this,"type","Program");this.body=e}},If=class extends Statement{constructor(e,en,tn){super();Mr(this,"type","If");this.test=e,this.body=en,this.alternate=tn}},For=class extends Statement{constructor(e,en,tn){super();Mr(this,"type","For");this.loopvar=e,this.iterable=en,this.body=tn}},SetStatement=class extends Statement{constructor(e,en){super();Mr(this,"type","Set");this.assignee=e,this.value=en}},Expression=class extends Statement{constructor(){super(...arguments);Mr(this,"type","Expression")}},MemberExpression=class extends Expression{constructor(e,en,tn){super();Mr(this,"type","MemberExpression");this.object=e,this.property=en,this.computed=tn}},CallExpression=class extends Expression{constructor(e,en){super();Mr(this,"type","CallExpression");this.callee=e,this.args=en}},Identifier=class extends Expression{constructor(e){super();Mr(this,"type","Identifier");this.value=e}},Literal=class extends Expression{constructor(e){super();Mr(this,"type","Literal");this.value=e}},NumericLiteral=class extends Literal{constructor(){super(...arguments);Mr(this,"type","NumericLiteral")}},StringLiteral=class extends Literal{constructor(){super(...arguments);Mr(this,"type","StringLiteral")}},BooleanLiteral=class extends Literal{constructor(){super(...arguments);Mr(this,"type","BooleanLiteral")}},ArrayLiteral=class extends Literal{constructor(){super(...arguments);Mr(this,"type","ArrayLiteral")}},TupleLiteral=class extends Literal{constructor(){super(...arguments);Mr(this,"type","TupleLiteral")}},ObjectLiteral=class extends Literal{constructor(){super(...arguments);Mr(this,"type","ObjectLiteral")}},BinaryExpression=class extends Expression{constructor(e,en,tn){super();Mr(this,"type","BinaryExpression");this.operator=e,this.left=en,this.right=tn}},FilterExpression=class extends Expression{constructor(e,en){super();Mr(this,"type","FilterExpression");this.operand=e,this.filter=en}},TestExpression=class extends Expression{constructor(e,en,tn){super();Mr(this,"type","TestExpression");this.operand=e,this.negate=en,this.test=tn}},UnaryExpression=class extends Expression{constructor(e,en){super();Mr(this,"type","UnaryExpression");this.operator=e,this.argument=en}},SliceExpression=class extends Expression{constructor(e=void 0,en=void 0,tn=void 0){super();Mr(this,"type","SliceExpression");this.start=e,this.stop=en,this.step=tn}},KeywordArgumentExpression=class extends Expression{constructor(e,en){super();Mr(this,"type","KeywordArgumentExpression");this.key=e,this.value=en}};function parse(St){const e=new Program([]);let en=0;function tn(Bn,Ln){const qn=St[en++];if(!qn||qn.type!==Bn)throw new Error(`Parser Error: ${Ln}. ${qn.type} !== ${Bn}.`);return qn}function nn(){switch(St[en].type){case TOKEN_TYPES.Text:return un();case TOKEN_TYPES.OpenStatement:return dn();case TOKEN_TYPES.OpenExpression:return fn();default:throw new SyntaxError(`Unexpected token type: ${St[en].type}`)}}function sn(...Bn){return en+Bn.length<=St.length&&Bn.some((Ln,qn)=>Ln!==St[en+qn].type)}function on(...Bn){return en+Bn.length<=St.length&&Bn.every((Ln,qn)=>Ln===St[en+qn].type)}function un(){return new StringLiteral(tn(TOKEN_TYPES.Text,"Expected text token").value)}function dn(){tn(TOKEN_TYPES.OpenStatement,"Expected opening statement token");let Bn;switch(St[en].type){case TOKEN_TYPES.Set:++en,Bn=hn(),tn(TOKEN_TYPES.CloseStatement,"Expected closing statement token");break;case TOKEN_TYPES.If:++en,Bn=an(),tn(TOKEN_TYPES.OpenStatement,"Expected {% token"),tn(TOKEN_TYPES.EndIf,"Expected endif token"),tn(TOKEN_TYPES.CloseStatement,"Expected %} token");break;case TOKEN_TYPES.For:++en,Bn=cn(),tn(TOKEN_TYPES.OpenStatement,"Expected {% token"),tn(TOKEN_TYPES.EndFor,"Expected endfor token"),tn(TOKEN_TYPES.CloseStatement,"Expected %} token");break;default:throw new SyntaxError(`Unknown statement type: ${St[en].type}`)}return Bn}function fn(){tn(TOKEN_TYPES.OpenExpression,"Expected opening expression token");const Bn=pn();return tn(TOKEN_TYPES.CloseExpression,"Expected closing expression token"),Bn}function hn(){const Bn=pn();if(on(TOKEN_TYPES.Equals)){++en;const Ln=hn();return new SetStatement(Bn,Ln)}return Bn}function an(){var Yn,Qn,zn,lr,$n,On,er,sr;const Bn=pn();tn(TOKEN_TYPES.CloseStatement,"Expected closing statement token");const Ln=[],qn=[];for(;!(((Yn=St[en])==null?void 0:Yn.type)===TOKEN_TYPES.OpenStatement&&(((Qn=St[en+1])==null?void 0:Qn.type)===TOKEN_TYPES.ElseIf||((zn=St[en+1])==null?void 0:zn.type)===TOKEN_TYPES.Else||((lr=St[en+1])==null?void 0:lr.type)===TOKEN_TYPES.EndIf));)Ln.push(nn());if((($n=St[en])==null?void 0:$n.type)===TOKEN_TYPES.OpenStatement&&((On=St[en+1])==null?void 0:On.type)!==TOKEN_TYPES.EndIf)if(++en,on(TOKEN_TYPES.ElseIf))tn(TOKEN_TYPES.ElseIf,"Expected elseif token"),qn.push(an());else for(tn(TOKEN_TYPES.Else,"Expected else token"),tn(TOKEN_TYPES.CloseStatement,"Expected closing statement token");!(((er=St[en])==null?void 0:er.type)===TOKEN_TYPES.OpenStatement&&((sr=St[en+1])==null?void 0:sr.type)===TOKEN_TYPES.EndIf);)qn.push(nn());return new If(Bn,Ln,qn)}function rn(Bn=!1){const Ln=Bn?In:pn,qn=[Ln()],Yn=on(TOKEN_TYPES.Comma);for(;Yn&&(++en,qn.push(Ln()),!!on(TOKEN_TYPES.Comma)););return Yn?new TupleLiteral(qn):qn[0]}function cn(){const Bn=rn(!0);if(!(Bn instanceof Identifier||Bn instanceof TupleLiteral))throw new SyntaxError(`Expected identifier/tuple for the loop variable, got ${Bn.type} instead`);tn(TOKEN_TYPES.In,"Expected `in` keyword following loop variable");const Ln=pn();tn(TOKEN_TYPES.CloseStatement,"Expected closing statement token");const qn=[];for(;sn(TOKEN_TYPES.OpenStatement,TOKEN_TYPES.EndFor);)qn.push(nn());return new For(Bn,Ln,qn)}function pn(){return mn()}function mn(){const Bn=xn();if(on(TOKEN_TYPES.If)){++en;const Ln=xn();tn(TOKEN_TYPES.Else,"Expected else token");const qn=xn();return new If(Ln,[Bn],[qn])}return Bn}function xn(){let Bn=gn();for(;on(TOKEN_TYPES.Or);){const Ln=St[en];++en;const qn=gn();Bn=new BinaryExpression(Ln,Bn,qn)}return Bn}function gn(){let Bn=yn();for(;on(TOKEN_TYPES.And);){const Ln=St[en];++en;const qn=yn();Bn=new BinaryExpression(Ln,Bn,qn)}return Bn}function yn(){let Bn;for(;on(TOKEN_TYPES.Not);){const Ln=St[en];++en;const qn=yn();Bn=new UnaryExpression(Ln,qn)}return Bn??bn()}function bn(){let Bn=wn();for(;on(TOKEN_TYPES.ComparisonBinaryOperator)||on(TOKEN_TYPES.In)||on(TOKEN_TYPES.NotIn);){const Ln=St[en];++en;const qn=wn();Bn=new BinaryExpression(Ln,Bn,qn)}return Bn}function wn(){let Bn=Nn();for(;on(TOKEN_TYPES.AdditiveBinaryOperator);){const Ln=St[en];++en;const qn=Nn();Bn=new BinaryExpression(Ln,Bn,qn)}return Bn}function _n(){const Bn=Cn();return on(TOKEN_TYPES.OpenParen)?Tn(Bn):Bn}function Tn(Bn){let Ln=new CallExpression(Bn,An());return on(TOKEN_TYPES.OpenParen)&&(Ln=Tn(Ln)),Ln}function An(){tn(TOKEN_TYPES.OpenParen,"Expected opening parenthesis for arguments list");const Bn=Pn();return tn(TOKEN_TYPES.CloseParen,"Expected closing parenthesis for arguments list"),Bn}function Pn(){const Bn=[];for(;!on(TOKEN_TYPES.CloseParen);){let Ln=pn();if(on(TOKEN_TYPES.Equals)){if(++en,!(Ln instanceof Identifier))throw new SyntaxError("Expected identifier for keyword argument");const qn=pn();Ln=new KeywordArgumentExpression(Ln,qn)}Bn.push(Ln),on(TOKEN_TYPES.Comma)&&++en}return Bn}function Sn(){const Bn=[];let Ln=!1;for(;!on(TOKEN_TYPES.CloseSquareBracket);)on(TOKEN_TYPES.Colon)?(Bn.push(void 0),++en,Ln=!0):(Bn.push(pn()),on(TOKEN_TYPES.Colon)&&(++en,Ln=!0));if(Bn.length===0)throw new SyntaxError("Expected at least one argument for member/slice expression");if(Ln){if(Bn.length>3)throw new SyntaxError("Expected 0-3 arguments for slice expression");return new SliceExpression(...Bn)}return Bn[0]}function Cn(){let Bn=In();for(;on(TOKEN_TYPES.Dot)||on(TOKEN_TYPES.OpenSquareBracket);){const Ln=St[en];++en;let qn;const Yn=Ln.type!==TOKEN_TYPES.Dot;if(Yn)qn=Sn(),tn(TOKEN_TYPES.CloseSquareBracket,"Expected closing square bracket");else if(qn=In(),qn.type!=="Identifier")throw new SyntaxError("Expected identifier following dot operator");Bn=new MemberExpression(Bn,qn,Yn)}return Bn}function Nn(){let Bn=Mn();for(;on(TOKEN_TYPES.MultiplicativeBinaryOperator);){const Ln=St[en];++en;const qn=Mn();Bn=new BinaryExpression(Ln,Bn,qn)}return Bn}function Mn(){let Bn=Fn();for(;on(TOKEN_TYPES.Is);){++en;const Ln=on(TOKEN_TYPES.Not);Ln&&++en;let qn=In();if(qn instanceof BooleanLiteral&&(qn=new Identifier(qn.value.toString())),!(qn instanceof Identifier))throw new SyntaxError("Expected identifier for the test");Bn=new TestExpression(Bn,Ln,qn)}return Bn}function Fn(){let Bn=_n();for(;on(TOKEN_TYPES.Pipe);){++en;let Ln=In();if(!(Ln instanceof Identifier))throw new SyntaxError("Expected identifier for the filter");on(TOKEN_TYPES.OpenParen)&&(Ln=Tn(Ln)),Bn=new FilterExpression(Bn,Ln)}return Bn}function In(){const Bn=St[en];switch(Bn.type){case TOKEN_TYPES.NumericLiteral:return++en,new NumericLiteral(Number(Bn.value));case TOKEN_TYPES.StringLiteral:return++en,new StringLiteral(Bn.value);case TOKEN_TYPES.BooleanLiteral:return++en,new BooleanLiteral(Bn.value==="true");case TOKEN_TYPES.Identifier:return++en,new Identifier(Bn.value);case TOKEN_TYPES.OpenParen:{++en;const Ln=rn();if(St[en].type!==TOKEN_TYPES.CloseParen)throw new SyntaxError(`Expected closing parenthesis, got ${St[en].type} instead`);return++en,Ln}case TOKEN_TYPES.OpenSquareBracket:{++en;const Ln=[];for(;!on(TOKEN_TYPES.CloseSquareBracket);)Ln.push(pn()),on(TOKEN_TYPES.Comma)&&++en;return++en,new ArrayLiteral(Ln)}case TOKEN_TYPES.OpenCurlyBracket:{++en;const Ln=new Map;for(;!on(TOKEN_TYPES.CloseCurlyBracket);){const qn=pn();tn(TOKEN_TYPES.Colon,"Expected colon between key and value in object literal");const Yn=pn();Ln.set(qn,Yn),on(TOKEN_TYPES.Comma)&&++en}return++en,new ObjectLiteral(Ln)}default:throw new SyntaxError(`Unexpected token: ${Bn.type}`)}}for(;en<St.length;)e.body.push(nn());return e}function range(St,e,en=1){e===void 0&&(e=St,St=0);const tn=[];for(let nn=St;nn<e;nn+=en)tn.push(nn);return tn}function slice(St,e,en,tn=1){const nn=Math.sign(tn);nn>=0?(e=(e??(e=0))<0?Math.max(St.length+e,0):Math.min(e,St.length),en=(en??(en=St.length))<0?Math.max(St.length+en,0):Math.min(en,St.length)):(e=(e??(e=St.length-1))<0?Math.max(St.length+e,-1):Math.min(e,St.length-1),en=(en??(en=-1))<-1?Math.max(St.length+en,-1):Math.min(en,St.length-1));const sn=[];for(let on=e;nn*on<nn*en;on+=tn)sn.push(St[on]);return sn}function titleCase(St){return St.replace(/\b\w/g,e=>e.toUpperCase())}var RuntimeValue=class{constructor(St=void 0){Mr(this,"type","RuntimeValue");Mr(this,"value");Mr(this,"builtins",new Map);this.value=St}__bool__(){return new BooleanValue(!!this.value)}},NumericValue=class extends RuntimeValue{constructor(){super(...arguments);Mr(this,"type","NumericValue")}},StringValue=class extends RuntimeValue{constructor(){super(...arguments);Mr(this,"type","StringValue");Mr(this,"builtins",new Map([["upper",new FunctionValue(()=>new StringValue(this.value.toUpperCase()))],["lower",new FunctionValue(()=>new StringValue(this.value.toLowerCase()))],["strip",new FunctionValue(()=>new StringValue(this.value.trim()))],["title",new FunctionValue(()=>new StringValue(titleCase(this.value)))],["length",new NumericValue(this.value.length)]]))}},BooleanValue=class extends RuntimeValue{constructor(){super(...arguments);Mr(this,"type","BooleanValue")}},ObjectValue=class extends RuntimeValue{constructor(){super(...arguments);Mr(this,"type","ObjectValue");Mr(this,"builtins",new Map([["get",new FunctionValue(([e,en])=>{if(!(e instanceof StringValue))throw new Error(`Object key must be a string: got ${e.type}`);return this.value.get(e.value)??en??new NullValue})],["items",new FunctionValue(()=>new ArrayValue(Array.from(this.value.entries()).map(([e,en])=>new ArrayValue([new StringValue(e),en]))))]]))}__bool__(){return new BooleanValue(this.value.size>0)}},ArrayValue=class extends RuntimeValue{constructor(){super(...arguments);Mr(this,"type","ArrayValue");Mr(this,"builtins",new Map([["length",new NumericValue(this.value.length)]]))}__bool__(){return new BooleanValue(this.value.length>0)}},TupleValue=class extends ArrayValue{constructor(){super(...arguments);Mr(this,"type","TupleValue")}},FunctionValue=class extends RuntimeValue{constructor(){super(...arguments);Mr(this,"type","FunctionValue")}},NullValue=class extends RuntimeValue{constructor(){super(...arguments);Mr(this,"type","NullValue")}},UndefinedValue=class extends RuntimeValue{constructor(){super(...arguments);Mr(this,"type","UndefinedValue")}},Environment=class{constructor(St){Mr(this,"variables",new Map([["namespace",new FunctionValue(St=>{if(St.length===0)return new ObjectValue(new Map);if(St.length!==1||!(St[0]instanceof ObjectValue))throw new Error("`namespace` expects either zero arguments or a single object argument");return St[0]})]]));Mr(this,"tests",new Map([["boolean",St=>St.type==="BooleanValue"],["callable",St=>St instanceof FunctionValue],["odd",St=>{if(St.type!=="NumericValue")throw new Error(`Cannot apply test "odd" to type: ${St.type}`);return St.value%2!==0}],["even",St=>{if(St.type!=="NumericValue")throw new Error(`Cannot apply test "even" to type: ${St.type}`);return St.value%2===0}],["false",St=>St.type==="BooleanValue"&&!St.value],["true",St=>St.type==="BooleanValue"&&St.value],["number",St=>St.type==="NumericValue"],["integer",St=>St.type==="NumericValue"&&Number.isInteger(St.value)],["iterable",St=>St instanceof ArrayValue||St instanceof StringValue],["lower",St=>{const e=St.value;return St.type==="StringValue"&&e===e.toLowerCase()}],["upper",St=>{const e=St.value;return St.type==="StringValue"&&e===e.toUpperCase()}],["none",St=>St.type==="NullValue"],["defined",St=>St.type!=="UndefinedValue"],["undefined",St=>St.type==="UndefinedValue"],["equalto",(St,e)=>St.value===e.value]]));this.parent=St}set(St,e){return this.declareVariable(St,convertToRuntimeValues(e))}declareVariable(St,e){if(this.variables.has(St))throw new SyntaxError(`Variable already declared: ${St}`);return this.variables.set(St,e),e}setVariable(St,e){return this.variables.set(St,e),e}resolve(St){if(this.variables.has(St))return this;if(this.parent)return this.parent.resolve(St);throw new Error(`Unknown variable: ${St}`)}lookupVariable(St){try{return this.resolve(St).variables.get(St)??new UndefinedValue}catch{return new UndefinedValue}}},Interpreter=class{constructor(St){Mr(this,"global");this.global=St??new Environment}run(St){return this.evaluate(St,this.global)}evaluateBinaryExpression(St,e){const en=this.evaluate(St.left,e);switch(St.operator.value){case"and":return en.__bool__().value?this.evaluate(St.right,e):en;case"or":return en.__bool__().value?en:this.evaluate(St.right,e)}const tn=this.evaluate(St.right,e);switch(St.operator.value){case"==":return new BooleanValue(en.value==tn.value);case"!=":return new BooleanValue(en.value!=tn.value)}if(en instanceof UndefinedValue||tn instanceof UndefinedValue)throw new Error("Cannot perform operation on undefined values");if(en instanceof NullValue||tn instanceof NullValue)throw new Error("Cannot perform operation on null values");if(en instanceof NumericValue&&tn instanceof NumericValue)switch(St.operator.value){case"+":return new NumericValue(en.value+tn.value);case"-":return new NumericValue(en.value-tn.value);case"*":return new NumericValue(en.value*tn.value);case"/":return new NumericValue(en.value/tn.value);case"%":return new NumericValue(en.value%tn.value);case"<":return new BooleanValue(en.value<tn.value);case">":return new BooleanValue(en.value>tn.value);case">=":return new BooleanValue(en.value>=tn.value);case"<=":return new BooleanValue(en.value<=tn.value)}else if(en instanceof ArrayValue&&tn instanceof ArrayValue)switch(St.operator.value){case"+":return new ArrayValue(en.value.concat(tn.value))}else if(tn instanceof ArrayValue){const nn=tn.value.find(sn=>sn.value===en.value)!==void 0;switch(St.operator.value){case"in":return new BooleanValue(nn);case"not in":return new BooleanValue(!nn)}}if(en instanceof StringValue||tn instanceof StringValue)switch(St.operator.value){case"+":return new StringValue(en.value.toString()+tn.value.toString())}if(en instanceof StringValue&&tn instanceof StringValue)switch(St.operator.value){case"in":return new BooleanValue(tn.value.includes(en.value));case"not in":return new BooleanValue(!tn.value.includes(en.value))}if(en instanceof StringValue&&tn instanceof ObjectValue)switch(St.operator.value){case"in":return new BooleanValue(tn.value.has(en.value));case"not in":return new BooleanValue(!tn.value.has(en.value))}throw new SyntaxError(`Unknown operator "${St.operator.value}" between ${en.type} and ${tn.type}`)}evaluateFilterExpression(St,e){const en=this.evaluate(St.operand,e);if(St.filter.type==="Identifier"){const tn=St.filter;if(en instanceof ArrayValue)switch(tn.value){case"list":return en;case"first":return en.value[0];case"last":return en.value[en.value.length-1];case"length":return new NumericValue(en.value.length);case"reverse":return new ArrayValue(en.value.reverse());case"sort":return new ArrayValue(en.value.sort((nn,sn)=>{if(nn.type!==sn.type)throw new Error(`Cannot compare different types: ${nn.type} and ${sn.type}`);switch(nn.type){case"NumericValue":return nn.value-sn.value;case"StringValue":return nn.value.localeCompare(sn.value);default:throw new Error(`Cannot compare type: ${nn.type}`)}}));default:throw new Error(`Unknown ArrayValue filter: ${tn.value}`)}else if(en instanceof StringValue)switch(tn.value){case"length":return new NumericValue(en.value.length);case"upper":return new StringValue(en.value.toUpperCase());case"lower":return new StringValue(en.value.toLowerCase());case"title":return new StringValue(titleCase(en.value));case"capitalize":return new StringValue(en.value.charAt(0).toUpperCase()+en.value.slice(1));case"trim":return new StringValue(en.value.trim());default:throw new Error(`Unknown StringValue filter: ${tn.value}`)}else if(en instanceof NumericValue)switch(tn.value){case"abs":return new NumericValue(Math.abs(en.value));default:throw new Error(`Unknown NumericValue filter: ${tn.value}`)}else if(en instanceof ObjectValue)switch(tn.value){case"items":return new ArrayValue(Array.from(en.value.entries()).map(([nn,sn])=>new ArrayValue([new StringValue(nn),sn])));case"length":return new NumericValue(en.value.size);default:throw new Error(`Unknown ObjectValue filter: ${tn.value}`)}throw new Error(`Cannot apply filter "${tn.value}" to type: ${en.type}`)}else if(St.filter.type==="CallExpression"){const tn=St.filter;if(tn.callee.type!=="Identifier")throw new Error(`Unknown filter: ${tn.callee.type}`);const nn=tn.callee.value;if(en instanceof ArrayValue){switch(nn){case"selectattr":{if(en.value.some(hn=>!(hn instanceof ObjectValue)))throw new Error("`selectattr` can only be applied to array of objects");if(tn.args.some(hn=>hn.type!=="StringLiteral"))throw new Error("arguments of `selectattr` must be strings");const[sn,on,un]=tn.args.map(hn=>this.evaluate(hn,e));let dn;if(on){const hn=e.tests.get(on.value);if(!hn)throw new Error(`Unknown test: ${on.value}`);dn=hn}else dn=(...hn)=>hn[0].__bool__().value;const fn=en.value.filter(hn=>{const an=hn.value.get(sn.value);return an?dn(an,un):!1});return new ArrayValue(fn)}}throw new Error(`Unknown ArrayValue filter: ${nn}`)}else throw new Error(`Cannot apply filter "${nn}" to type: ${en.type}`)}throw new Error(`Unknown filter: ${St.filter.type}`)}evaluateTestExpression(St,e){const en=this.evaluate(St.operand,e),tn=e.tests.get(St.test.value);if(!tn)throw new Error(`Unknown test: ${St.test.value}`);const nn=tn(en);return new BooleanValue(St.negate?!nn:nn)}evaluateUnaryExpression(St,e){const en=this.evaluate(St.argument,e);switch(St.operator.value){case"not":return new BooleanValue(!en.value);default:throw new SyntaxError(`Unknown operator: ${St.operator.value}`)}}evalProgram(St,e){return this.evaluateBlock(St.body,e)}evaluateBlock(St,e){let en="";for(const tn of St){const nn=this.evaluate(tn,e);nn.type!=="NullValue"&&nn.type!=="UndefinedValue"&&(en+=nn.value)}return new StringValue(en)}evaluateIdentifier(St,e){return e.lookupVariable(St.value)}evaluateCallExpression(St,e){const en=[],tn=new Map;for(const sn of St.args)if(sn.type==="KeywordArgumentExpression"){const on=sn;tn.set(on.key.value,this.evaluate(on.value,e))}else en.push(this.evaluate(sn,e));tn.size>0&&en.push(new ObjectValue(tn));const nn=this.evaluate(St.callee,e);if(nn.type!=="FunctionValue")throw new Error(`Cannot call something that is not a function: got ${nn.type}`);return nn.value(en,e)}evaluateSliceExpression(St,e,en){if(!(St instanceof ArrayValue||St instanceof StringValue))throw new Error("Slice object must be an array or string");const tn=this.evaluate(e.start,en),nn=this.evaluate(e.stop,en),sn=this.evaluate(e.step,en);if(!(tn instanceof NumericValue||tn instanceof UndefinedValue))throw new Error("Slice start must be numeric or undefined");if(!(nn instanceof NumericValue||nn instanceof UndefinedValue))throw new Error("Slice stop must be numeric or undefined");if(!(sn instanceof NumericValue||sn instanceof UndefinedValue))throw new Error("Slice step must be numeric or undefined");return St instanceof ArrayValue?new ArrayValue(slice(St.value,tn.value,nn.value,sn.value)):new StringValue(slice(Array.from(St.value),tn.value,nn.value,sn.value).join(""))}evaluateMemberExpression(St,e){const en=this.evaluate(St.object,e);let tn;if(St.computed){if(St.property.type==="SliceExpression")return this.evaluateSliceExpression(en,St.property,e);tn=this.evaluate(St.property,e)}else tn=new StringValue(St.property.value);let nn;if(en instanceof ObjectValue){if(!(tn instanceof StringValue))throw new Error(`Cannot access property with non-string: got ${tn.type}`);nn=en.value.get(tn.value)??en.builtins.get(tn.value)}else if(en instanceof ArrayValue||en instanceof StringValue)if(tn instanceof NumericValue)nn=en.value.at(tn.value),en instanceof StringValue&&(nn=new StringValue(en.value.at(tn.value)));else if(tn instanceof StringValue)nn=en.builtins.get(tn.value);else throw new Error(`Cannot access property with non-string/non-number: got ${tn.type}`);else{if(!(tn instanceof StringValue))throw new Error(`Cannot access property with non-string: got ${tn.type}`);nn=en.builtins.get(tn.value)}return nn instanceof RuntimeValue?nn:new UndefinedValue}evaluateSet(St,e){const en=this.evaluate(St.value,e);if(St.assignee.type==="Identifier"){const tn=St.assignee.value;e.setVariable(tn,en)}else if(St.assignee.type==="MemberExpression"){const tn=St.assignee,nn=this.evaluate(tn.object,e);if(!(nn instanceof ObjectValue))throw new Error("Cannot assign to member of non-object");if(tn.property.type!=="Identifier")throw new Error("Cannot assign to member with non-identifier property");nn.value.set(tn.property.value,en)}else throw new Error(`Invalid LHS inside assignment expression: ${JSON.stringify(St.assignee)}`);return new NullValue}evaluateIf(St,e){const en=this.evaluate(St.test,e);return this.evaluateBlock(en.__bool__().value?St.body:St.alternate,e)}evaluateFor(St,e){const en=new Environment(e),tn=this.evaluate(St.iterable,en);if(!(tn instanceof ArrayValue))throw new Error(`Expected iterable type in for loop: got ${tn.type}`);let nn="";for(let sn=0;sn<tn.value.length;++sn){const on=new Map([["index",new NumericValue(sn+1)],["index0",new NumericValue(sn)],["revindex",new NumericValue(tn.value.length-sn)],["revindex0",new NumericValue(tn.value.length-sn-1)],["first",new BooleanValue(sn===0)],["last",new BooleanValue(sn===tn.value.length-1)],["length",new NumericValue(tn.value.length)],["previtem",sn>0?tn.value[sn-1]:new UndefinedValue],["nextitem",sn<tn.value.length-1?tn.value[sn+1]:new UndefinedValue]]);en.setVariable("loop",new ObjectValue(on));const un=tn.value[sn];if(St.loopvar.type==="Identifier")en.setVariable(St.loopvar.value,un);else if(St.loopvar.type==="TupleLiteral"){const fn=St.loopvar;if(un.type!=="ArrayValue")throw new Error(`Cannot unpack non-iterable type: ${un.type}`);const hn=un;if(fn.value.length!==hn.value.length)throw new Error(`Too ${fn.value.length>hn.value.length?"few":"many"} items to unpack`);for(let an=0;an<fn.value.length;++an){if(fn.value[an].type!=="Identifier")throw new Error(`Cannot unpack non-identifier type: ${fn.value[an].type}`);en.setVariable(fn.value[an].value,hn.value[an])}}const dn=this.evaluateBlock(St.body,en);nn+=dn.value}return new StringValue(nn)}evaluate(St,e){if(St===void 0)return new UndefinedValue;switch(St.type){case"Program":return this.evalProgram(St,e);case"Set":return this.evaluateSet(St,e);case"If":return this.evaluateIf(St,e);case"For":return this.evaluateFor(St,e);case"NumericLiteral":return new NumericValue(Number(St.value));case"StringLiteral":return new StringValue(St.value);case"BooleanLiteral":return new BooleanValue(St.value);case"ArrayLiteral":return new ArrayValue(St.value.map(en=>this.evaluate(en,e)));case"TupleLiteral":return new TupleValue(St.value.map(en=>this.evaluate(en,e)));case"ObjectLiteral":{const en=new Map;for(const[tn,nn]of St.value){const sn=this.evaluate(tn,e);if(!(sn instanceof StringValue))throw new Error(`Object keys must be strings: got ${sn.type}`);en.set(sn.value,this.evaluate(nn,e))}return new ObjectValue(en)}case"Identifier":return this.evaluateIdentifier(St,e);case"CallExpression":return this.evaluateCallExpression(St,e);case"MemberExpression":return this.evaluateMemberExpression(St,e);case"UnaryExpression":return this.evaluateUnaryExpression(St,e);case"BinaryExpression":return this.evaluateBinaryExpression(St,e);case"FilterExpression":return this.evaluateFilterExpression(St,e);case"TestExpression":return this.evaluateTestExpression(St,e);default:throw new SyntaxError(`Unknown node type: ${St.type}`)}}};function convertToRuntimeValues(St){switch(typeof St){case"number":return new NumericValue(St);case"string":return new StringValue(St);case"boolean":return new BooleanValue(St);case"object":return St===null?new NullValue:Array.isArray(St)?new ArrayValue(St.map(convertToRuntimeValues)):new ObjectValue(new Map(Object.entries(St).map(([e,en])=>[e,convertToRuntimeValues(en)])));case"function":return new FunctionValue((e,en)=>{const tn=St(...e.map(nn=>nn.value))??null;return convertToRuntimeValues(tn)});default:throw new Error(`Cannot convert to runtime value: ${St}`)}}var Template=class{constructor(St){Mr(this,"parsed");const e=tokenize(St,{lstrip_blocks:!0,trim_blocks:!0});this.parsed=parse(e)}render(St){const e=new Environment;e.set("false",!1),e.set("true",!0),e.set("raise_exception",nn=>{throw new Error(nn)}),e.set("range",range);for(const[nn,sn]of Object.entries(St))e.set(nn,sn);return new Interpreter(e).run(this.parsed).value}};async function loadTokenizer(St,e){const en=await Promise.all([getModelJSON(St,"tokenizer.json",!0,e),getModelJSON(St,"tokenizer_config.json",!0,e)]);return e.legacy!==null&&(en[1].legacy=e.legacy),en}function regexSplit(St,e){const en=[];let tn=0;for(const nn of St.matchAll(e)){const sn=nn[0];tn<nn.index&&en.push(St.slice(tn,nn.index)),sn.length>0&&en.push(sn),tn=nn.index+sn.length}return tn<St.length&&en.push(St.slice(tn)),en}function createPattern(St,e=!0){if(St.Regex!==void 0){let en=St.Regex.replace(/\\([#&~])/g,"$1");for(const[tn,nn]of PROBLEMATIC_REGEX_MAP)en=en.replaceAll(tn,nn);return new RegExp(en,"gu")}else if(St.String!==void 0){const en=escapeRegExp(St.String);return new RegExp(e?en:`(${en})`,"gu")}else return console.warn("Unknown pattern type:",St),null}function objectToMap(St){return new Map(Object.entries(St))}function prepareTensorForDecode(St){const e=St.dims;switch(e.length){case 1:return St.tolist();case 2:if(e[0]!==1)throw new Error("Unable to decode tensor with `batch size !== 1`. Use `tokenizer.batch_decode(...)` for batched inputs.");return St.tolist()[0];default:throw new Error(`Expected tensor to have 1-2 dimensions, got ${e.length}.`)}}function clean_up_tokenization(St){return St.replace(/ \./g,".").replace(/ \?/g,"?").replace(/ \!/g,"!").replace(/ ,/g,",").replace(/ \' /g,"'").replace(/ n\'t/g,"n't").replace(/ \'m/g,"'m").replace(/ \'s/g,"'s").replace(/ \'ve/g,"'ve").replace(/ \'re/g,"'re")}function remove_accents(St){return St.replace(/[\u0300-\u036f]/g,"")}function lowercase_and_remove_accent(St){return remove_accents(St.toLowerCase())}function fuse(St,e,en){const tn=[];let nn=0;for(;nn<St.length;){if(tn.push(St[nn]),(en.get(St[nn])??e)!==e){++nn;continue}for(;nn<St.length&&(en.get(St[nn])??e)===e;)++nn}return tn}function whitespace_split(St){return St.match(/\S+/g)||[]}const PUNCTUATION_REGEX="\\p{P}\\u0021-\\u002F\\u003A-\\u0040\\u005B-\\u0060\\u007B-\\u007E",PROBLEMATIC_REGEX_MAP=new Map([["(?i:'s|'t|'re|'ve|'m|'ll|'d)","(?:'([sS]|[tT]|[rR][eE]|[vV][eE]|[mM]|[lL][lL]|[dD]))"]]);class AddedToken{constructor(e){this.content=e.content,this.id=e.id,this.single_word=e.single_word??!1,this.lstrip=e.lstrip??!1,this.rstrip=e.rstrip??!1,this.special=e.special??!1,this.normalized=e.normalized??null}}class TokenizerModel extends Callable{constructor(e){super(),this.config=e,this.vocab=[],this.tokens_to_ids=new Map,this.unk_token_id=void 0,this.unk_token=void 0,this.end_of_word_suffix=void 0,this.fuse_unk=this.config.fuse_unk??!1}static fromConfig(e,...en){switch(e.type){case"WordPiece":return new WordPieceTokenizer(e);case"Unigram":return new Unigram(e,...en);case"BPE":return new BPE(e);default:if(e.vocab)return new LegacyTokenizerModel(e,...en);throw new Error(`Unknown TokenizerModel type: ${e.type}`)}}_call(e){let en=this.encode(e);return this.fuse_unk&&(en=fuse(en,this.unk_token_id,this.tokens_to_ids)),en}encode(e){throw Error("encode should be implemented in subclass.")}convert_tokens_to_ids(e){return e.map(en=>this.tokens_to_ids.get(en)??this.unk_token_id)}convert_ids_to_tokens(e){return e.map(en=>this.vocab[en]??this.unk_token)}}class WordPieceTokenizer extends TokenizerModel{constructor(e){super(e),this.tokens_to_ids=objectToMap(e.vocab),this.unk_token_id=this.tokens_to_ids.get(e.unk_token),this.unk_token=e.unk_token,this.max_input_chars_per_word=e.max_input_chars_per_word??100,this.vocab=new Array(this.tokens_to_ids.size);for(const[en,tn]of this.tokens_to_ids)this.vocab[tn]=en}encode(e){const en=[];for(const tn of e){const nn=[...tn];if(nn.length>this.max_input_chars_per_word){en.push(this.unk_token);continue}let sn=!1,on=0;const un=[];for(;on<nn.length;){let dn=nn.length,fn=null;for(;on<dn;){let hn=nn.slice(on,dn).join("");if(on>0&&(hn=this.config.continuing_subword_prefix+hn),this.tokens_to_ids.has(hn)){fn=hn;break}--dn}if(fn===null){sn=!0;break}un.push(fn),on=dn}sn?en.push(this.unk_token):en.push(...un)}return en}}class Unigram extends TokenizerModel{constructor(e,en){super(e);const tn=e.vocab.length;this.vocab=new Array(tn),this.scores=new Array(tn);for(let nn=0;nn<tn;++nn){const sn=e.vocab[nn];this.vocab[nn]=sn[0],this.scores[nn]=sn[1]}this.unk_token_id=e.unk_id,this.unk_token=this.vocab[e.unk_id],this.tokens_to_ids=new Map(this.vocab.map((nn,sn)=>[nn,sn])),this.bosToken=" ",this.bosTokenId=this.tokens_to_ids.get(this.bosToken),this.eosToken=en.eos_token,this.eosTokenId=this.tokens_to_ids.get(this.eosToken),this.unkToken=this.vocab[this.unk_token_id],this.minScore=min(this.scores)[0],this.unkScore=this.minScore-10,this.scores[this.unk_token_id]=this.unkScore,this.trie=new CharTrie,this.trie.extend(this.vocab),this.fuse_unk=!0}populateNodes(e){const en=e.sentence,tn=en.length;let nn=0;for(;nn<tn;){let on=!1;for(let un of this.trie.commonPrefixSearch(en.slice(nn))){const dn=this.tokens_to_ids.get(un),fn=this.scores[dn],hn=un.length;e.insert(nn,hn,fn,dn),!on&&hn===1&&(on=!0)}on||e.insert(nn,1,this.unkScore,this.unk_token_id),nn+=1}}tokenize(e){const en=new TokenLattice(e,this.bosTokenId,this.eosTokenId);return this.populateNodes(en),en.tokens()}encode(e){const en=[];for(const tn of e){const nn=this.tokenize(tn);en.push(...nn)}return en}}const BYTES_TO_UNICODE=(()=>{const St=[...Array.from({length:94},(nn,sn)=>sn+33),...Array.from({length:12},(nn,sn)=>sn+161),...Array.from({length:82},(nn,sn)=>sn+174)],e=St.slice();let en=0;for(let nn=0;nn<256;++nn)St.includes(nn)||(St.push(nn),e.push(256+en),en+=1);const tn=e.map(nn=>String.fromCharCode(nn));return Object.fromEntries(St.map((nn,sn)=>[nn,tn[sn]]))})(),UNICODE_TO_BYTES=reverseDictionary(BYTES_TO_UNICODE);class BPE extends TokenizerModel{constructor(e){super(e),this.BPE_SPLIT_TOKEN=" ",this.tokens_to_ids=objectToMap(e.vocab),this.unk_token_id=this.tokens_to_ids.get(e.unk_token),this.unk_token=e.unk_token,this.vocab=new Array(this.tokens_to_ids.size);for(const[en,tn]of this.tokens_to_ids)this.vocab[tn]=en;this.bpe_ranks=new Map(e.merges.map((en,tn)=>[en,tn])),this.merges=e.merges.map(en=>en.split(this.BPE_SPLIT_TOKEN)),this.end_of_word_suffix=e.end_of_word_suffix,this.continuing_subword_suffix=e.continuing_subword_suffix??null,this.byte_fallback=this.config.byte_fallback??!1,this.byte_fallback&&(this.text_encoder=new TextEncoder),this.ignore_merges=this.config.ignore_merges??!1,this.cache=new Map}bpe(e){if(e.length===0)return[];const en=this.cache.get(e);if(en!==void 0)return en;const tn=Array.from(e);this.end_of_word_suffix&&(tn[tn.length-1]+=this.end_of_word_suffix);let nn=[];if(tn.length>1){const sn=new PriorityQueue((dn,fn)=>dn.score<fn.score);let on={token:tn[0],bias:0,prev:null,next:null},un=on;for(let dn=1;dn<tn.length;++dn){const fn={bias:dn/tn.length,token:tn[dn],prev:un,next:null};un.next=fn,this._add_node(sn,un),un=fn}for(;!sn.isEmpty();){const dn=sn.pop();if(dn.deleted||!dn.next||dn.next.deleted)continue;if(dn.deleted=!0,dn.next.deleted=!0,dn.prev){const hn={...dn.prev};dn.prev.deleted=!0,dn.prev=hn,hn.prev?hn.prev.next=hn:on=hn}const fn={token:dn.token+dn.next.token,bias:dn.bias,prev:dn.prev,next:dn.next.next};fn.prev?(fn.prev.next=fn,this._add_node(sn,fn.prev)):on=fn,fn.next&&(fn.next.prev=fn,this._add_node(sn,fn))}for(let dn=on;dn!==null;dn=dn.next)nn.push(dn.token)}else nn=tn;if(this.continuing_subword_suffix)for(let sn=0;sn<nn.length-1;++sn)nn[sn]+=this.continuing_subword_suffix;return this.cache.set(e,nn),nn}_add_node(e,en){const tn=this.bpe_ranks.get(en.token+this.BPE_SPLIT_TOKEN+en.next.token);tn!==void 0&&(en.score=tn+en.bias,e.push(en))}encode(e){const en=[];for(const tn of e){if(this.ignore_merges&&this.tokens_to_ids.has(tn)){en.push(tn);continue}const nn=this.bpe(tn);for(const sn of nn)this.tokens_to_ids.has(sn)?en.push(sn):this.byte_fallback?en.push(...Array.from(this.text_encoder.encode(sn)).map(on=>`<0x${on.toString(16).toUpperCase().padStart(2,"0")}>`)):en.push(this.unk_token)}return en}}class LegacyTokenizerModel extends TokenizerModel{constructor(e,en){super(e),this.tokens_to_ids=objectToMap(en.target_lang?e.vocab[en.target_lang]:e.vocab),this.bos_token=en.bos_token,this.bos_token_id=this.tokens_to_ids.get(this.bos_token),this.eos_token=en.eos_token,this.eos_token_id=this.tokens_to_ids.get(this.eos_token),this.pad_token=en.pad_token,this.pad_token_id=this.tokens_to_ids.get(this.pad_token),this.unk_token=en.unk_token,this.unk_token_id=this.tokens_to_ids.get(this.unk_token),this.vocab=new Array(this.tokens_to_ids.size);for(const[tn,nn]of this.tokens_to_ids)this.vocab[nn]=tn}encode(e){return e}}class Normalizer extends Callable{constructor(e){super(),this.config=e}static fromConfig(e){if(e===null)return null;switch(e.type){case"BertNormalizer":return new BertNormalizer(e);case"Precompiled":return new Precompiled(e);case"Sequence":return new NormalizerSequence(e);case"Replace":return new Replace(e);case"NFC":return new NFC(e);case"NFKC":return new NFKC(e);case"NFKD":return new NFKD(e);case"Strip":return new StripNormalizer(e);case"StripAccents":return new StripAccents(e);case"Lowercase":return new Lowercase(e);case"Prepend":return new Prepend(e);default:throw new Error(`Unknown Normalizer type: ${e.type}`)}}normalize(e){throw Error("normalize should be implemented in subclass.")}_call(e){return this.normalize(e)}}class Replace extends Normalizer{normalize(e){const en=createPattern(this.config.pattern);return en===null?e:e.replaceAll(en,this.config.content)}}class NFC extends Normalizer{normalize(e){return e=e.normalize("NFC"),e}}class NFKC extends Normalizer{normalize(e){return e=e.normalize("NFKC"),e}}class NFKD extends Normalizer{normalize(e){return e=e.normalize("NFKD"),e}}class StripNormalizer extends Normalizer{normalize(e){return this.config.strip_left&&this.config.strip_right?e=e.trim():(this.config.strip_left&&(e=e.trimStart()),this.config.strip_right&&(e=e.trimEnd())),e}}class StripAccents extends Normalizer{normalize(e){return e=remove_accents(e),e}}class Lowercase extends Normalizer{normalize(e){return e=e.toLowerCase(),e}}class Prepend extends Normalizer{normalize(e){return e=this.config.prepend+e,e}}class NormalizerSequence extends Normalizer{constructor(e){super(e),this.normalizers=e.normalizers.map(en=>Normalizer.fromConfig(en))}normalize(e){return this.normalizers.reduce((en,tn)=>tn.normalize(en),e)}}class BertNormalizer extends Normalizer{_tokenize_chinese_chars(e){const en=[];for(let tn=0;tn<e.length;++tn){const nn=e[tn],sn=nn.charCodeAt(0);this._is_chinese_char(sn)?(en.push(" "),en.push(nn),en.push(" ")):en.push(nn)}return en.join("")}_is_chinese_char(e){return e>=19968&&e<=40959||e>=13312&&e<=19903||e>=131072&&e<=173791||e>=173824&&e<=177983||e>=177984&&e<=178207||e>=178208&&e<=183983||e>=63744&&e<=64255||e>=194560&&e<=195103}stripAccents(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}_is_control(e){switch(e){case"	":case`
`:case"\r":return!1;default:return new RegExp("^\\p{Cc}|\\p{Cf}|\\p{Co}|\\p{Cs}$","u").test(e)}}_clean_text(e){const en=[];for(const tn of e){const nn=tn.charCodeAt(0);nn===0||nn===65533||this._is_control(tn)||(/^\s$/.test(tn)?en.push(" "):en.push(tn))}return en.join("")}normalize(e){return this.config.clean_text&&(e=this._clean_text(e)),this.config.handle_chinese_chars&&(e=this._tokenize_chinese_chars(e)),this.config.lowercase?(e=e.toLowerCase(),this.config.strip_accents!==!1&&(e=this.stripAccents(e))):this.config.strip_accents&&(e=this.stripAccents(e)),e}}class PreTokenizer extends Callable{static fromConfig(e){if(e===null)return null;switch(e.type){case"BertPreTokenizer":return new BertPreTokenizer(e);case"Sequence":return new PreTokenizerSequence(e);case"Whitespace":return new WhitespacePreTokenizer(e);case"WhitespaceSplit":return new WhitespaceSplit(e);case"Metaspace":return new MetaspacePreTokenizer(e);case"ByteLevel":return new ByteLevelPreTokenizer(e);case"Split":return new SplitPreTokenizer(e);case"Punctuation":return new PunctuationPreTokenizer(e);case"Digits":return new DigitsPreTokenizer(e);case"Replace":return new ReplacePreTokenizer(e);default:throw new Error(`Unknown PreTokenizer type: ${e.type}`)}}pre_tokenize_text(e,en){throw Error("pre_tokenize_text should be implemented in subclass.")}pre_tokenize(e,en){return(Array.isArray(e)?e.map(tn=>this.pre_tokenize_text(tn,en)):this.pre_tokenize_text(e,en)).flat()}_call(e,en){return this.pre_tokenize(e,en)}}class BertPreTokenizer extends PreTokenizer{constructor(e){super(),this.pattern=new RegExp(`[^\\s${PUNCTUATION_REGEX}]+|[${PUNCTUATION_REGEX}]`,"gu")}pre_tokenize_text(e,en){return e.trim().match(this.pattern)||[]}}class ByteLevelPreTokenizer extends PreTokenizer{constructor(e){super(),this.config=e,this.add_prefix_space=this.config.add_prefix_space,this.trim_offsets=this.config.trim_offsets,this.use_regex=this.config.use_regex??!0,this.pattern=new RegExp("'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+","gu"),this.byte_encoder=BYTES_TO_UNICODE,this.text_encoder=new TextEncoder}pre_tokenize_text(e,en){return this.add_prefix_space&&!e.startsWith(" ")&&(e=" "+e),(this.use_regex?e.match(this.pattern)||[]:[e]).map(nn=>Array.from(this.text_encoder.encode(nn),sn=>this.byte_encoder[sn]).join(""))}}class SplitPreTokenizer extends PreTokenizer{constructor(e){super(),this.config=e,this.pattern=createPattern(this.config.pattern,this.config.invert)}pre_tokenize_text(e,en){return this.pattern===null?[]:this.config.invert?e.match(this.pattern)||[]:regexSplit(e,this.pattern)}}class PunctuationPreTokenizer extends PreTokenizer{constructor(e){super(),this.config=e,this.pattern=new RegExp(`[^${PUNCTUATION_REGEX}]+|[${PUNCTUATION_REGEX}]+`,"gu")}pre_tokenize_text(e,en){return e.match(this.pattern)||[]}}class DigitsPreTokenizer extends PreTokenizer{constructor(e){super(),this.config=e;const en=`[^\\d]+|\\d${this.config.individual_digits?"":"+"}`;this.pattern=new RegExp(en,"gu")}pre_tokenize_text(e,en){return e.match(this.pattern)||[]}}class PostProcessor extends Callable{constructor(e){super(),this.config=e}static fromConfig(e){if(e===null)return null;switch(e.type){case"TemplateProcessing":return new TemplateProcessing(e);case"ByteLevel":return new ByteLevelPostProcessor(e);case"RobertaProcessing":return new RobertaProcessing(e);case"BertProcessing":return new BertProcessing(e);case"Sequence":return new PostProcessorSequence(e);default:throw new Error(`Unknown PostProcessor type: ${e.type}`)}}post_process(e,...en){throw Error("post_process should be implemented in subclass.")}_call(e,...en){return this.post_process(e,...en)}}class BertProcessing extends PostProcessor{constructor(e){super(e),this.cls=e.cls[0],this.sep=e.sep[0]}post_process(e,en=null,{add_special_tokens:tn=!0}={}){tn&&(e=mergeArrays([this.cls],e,[this.sep]));let nn=new Array(e.length).fill(0);if(en!==null){const sn=tn&&this instanceof RobertaProcessing?[this.sep]:[],on=tn?[this.sep]:[];e=mergeArrays(e,sn,en,on),nn=mergeArrays(nn,new Array(en.length+sn.length+on.length).fill(1))}return{tokens:e,token_type_ids:nn}}}class RobertaProcessing extends BertProcessing{}class TemplateProcessing extends PostProcessor{constructor(e){super(e),this.single=e.single,this.pair=e.pair}post_process(e,en=null,{add_special_tokens:tn=!0}={}){const nn=en===null?this.single:this.pair;let sn=[],on=[];for(const un of nn)"SpecialToken"in un?tn&&(sn.push(un.SpecialToken.id),on.push(un.SpecialToken.type_id)):"Sequence"in un&&(un.Sequence.id==="A"?(sn=mergeArrays(sn,e),on=mergeArrays(on,new Array(e.length).fill(un.Sequence.type_id))):un.Sequence.id==="B"&&(sn=mergeArrays(sn,en),on=mergeArrays(on,new Array(en.length).fill(un.Sequence.type_id))));return{tokens:sn,token_type_ids:on}}}class ByteLevelPostProcessor extends PostProcessor{post_process(e,en=null){return en&&(e=mergeArrays(e,en)),{tokens:e}}}class PostProcessorSequence extends PostProcessor{constructor(e){super(e),this.processors=e.processors.map(en=>PostProcessor.fromConfig(en))}post_process(e,en=null,tn={}){let nn;for(const sn of this.processors)if(sn instanceof ByteLevelPostProcessor)e=sn.post_process(e).tokens,en&&(en=sn.post_process(en).tokens);else{const on=sn.post_process(e,en,tn);e=on.tokens,nn=on.token_type_ids}return{tokens:e,token_type_ids:nn}}}class Decoder extends Callable{constructor(e){super(),this.config=e,this.added_tokens=[],this.end_of_word_suffix=null,this.trim_offsets=e.trim_offsets}static fromConfig(e){if(e===null)return null;switch(e.type){case"WordPiece":return new WordPieceDecoder(e);case"Metaspace":return new MetaspaceDecoder(e);case"ByteLevel":return new ByteLevelDecoder(e);case"Replace":return new ReplaceDecoder(e);case"ByteFallback":return new ByteFallback(e);case"Fuse":return new FuseDecoder(e);case"Strip":return new StripDecoder(e);case"Sequence":return new DecoderSequence(e);case"CTC":return new CTCDecoder(e);case"BPEDecoder":return new BPEDecoder(e);default:throw new Error(`Unknown Decoder type: ${e.type}`)}}_call(e){return this.decode(e)}decode(e){return this.decode_chain(e).join("")}decode_chain(e){throw Error("`decode_chain` should be implemented in subclass.")}}class ReplaceDecoder extends Decoder{decode_chain(e){const en=createPattern(this.config.pattern);return en===null?e:e.map(tn=>tn.replaceAll(en,this.config.content))}}class ByteFallback extends Decoder{constructor(e){super(e),this.text_decoder=new TextDecoder}decode_chain(e){const en=[];let tn=[];for(const nn of e){let sn=null;if(nn.length===6&&nn.startsWith("<0x")&&nn.endsWith(">")){const on=parseInt(nn.slice(3,5),16);isNaN(on)||(sn=on)}if(sn!==null)tn.push(sn);else{if(tn.length>0){const on=this.text_decoder.decode(Uint8Array.from(tn));en.push(on),tn=[]}en.push(nn)}}if(tn.length>0){const nn=this.text_decoder.decode(Uint8Array.from(tn));en.push(nn),tn=[]}return en}}class FuseDecoder extends Decoder{decode_chain(e){return[e.join("")]}}class StripDecoder extends Decoder{constructor(e){super(e),this.content=this.config.content,this.start=this.config.start,this.stop=this.config.stop}decode_chain(e){return e.map(en=>{let tn=0;for(let sn=0;sn<this.start&&en[sn]===this.content;++sn){tn=sn+1;continue}let nn=en.length;for(let sn=0;sn<this.stop;++sn){const on=en.length-sn-1;if(en[on]===this.content){nn=on;continue}else break}return en.slice(tn,nn)})}}class WordPieceDecoder extends Decoder{constructor(e){super(e),this.cleanup=e.cleanup}decode_chain(e){return e.map((en,tn)=>(tn!==0&&(en.startsWith(this.config.prefix)?en=en.replace(this.config.prefix,""):en=" "+en),this.cleanup&&(en=clean_up_tokenization(en)),en))}}class ByteLevelDecoder extends Decoder{constructor(e){super(e),this.byte_decoder=UNICODE_TO_BYTES,this.text_decoder=new TextDecoder("utf-8",{fatal:!1,ignoreBOM:!0}),this.end_of_word_suffix=null}convert_tokens_to_string(e){const en=e.join(""),tn=new Uint8Array([...en].map(sn=>this.byte_decoder[sn]));return this.text_decoder.decode(tn)}decode_chain(e){const en=[];let tn=[];for(const nn of e)this.added_tokens.find(sn=>sn.content===nn)!==void 0?(tn.length>0&&(en.push(this.convert_tokens_to_string(tn)),tn=[]),en.push(nn)):tn.push(nn);return tn.length>0&&en.push(this.convert_tokens_to_string(tn)),en}}class CTCDecoder extends Decoder{constructor(e){super(e),this.pad_token=this.config.pad_token,this.word_delimiter_token=this.config.word_delimiter_token,this.cleanup=this.config.cleanup}convert_tokens_to_string(e){if(e.length===0)return"";const en=[e[0]];for(let sn=1;sn<e.length;++sn)e[sn]!==en.at(-1)&&en.push(e[sn]);let nn=en.filter(sn=>sn!==this.pad_token).join("");return this.cleanup&&(nn=clean_up_tokenization(nn).replaceAll(this.word_delimiter_token," ").trim()),nn}decode_chain(e){return[this.convert_tokens_to_string(e)]}}class DecoderSequence extends Decoder{constructor(e){super(e),this.decoders=e.decoders.map(en=>Decoder.fromConfig(en))}decode_chain(e){return this.decoders.reduce((en,tn)=>tn.decode_chain(en),e)}}class BPEDecoder extends Decoder{constructor(e){super(e),this.suffix=this.config.suffix}decode_chain(e){return e.map((en,tn)=>en.replaceAll(this.suffix,tn===e.length-1?"":" "))}}class VitsDecoder extends Decoder{decode_chain(e){let en="";for(let tn=1;tn<e.length;tn+=2)en+=e[tn];return[en]}}class MetaspacePreTokenizer extends PreTokenizer{constructor(e){super(),this.addPrefixSpace=e.add_prefix_space,this.replacement=e.replacement,this.strRep=e.str_rep||this.replacement,this.prepend_scheme=e.prepend_scheme??"always"}pre_tokenize_text(e,{section_index:en=void 0}={}){let tn=e.replaceAll(" ",this.strRep);return this.addPrefixSpace&&!tn.startsWith(this.replacement)&&(this.prepend_scheme==="always"||this.prepend_scheme==="first"&&en===0)&&(tn=this.strRep+tn),[tn]}}class MetaspaceDecoder extends Decoder{constructor(e){super(e),this.addPrefixSpace=e.add_prefix_space,this.replacement=e.replacement}decode_chain(e){const en=[];for(let tn=0;tn<e.length;++tn){let nn=e[tn].replaceAll(this.replacement," ");this.addPrefixSpace&&tn==0&&nn.startsWith(" ")&&(nn=nn.substring(1)),en.push(nn)}return en}}class Precompiled extends Normalizer{constructor(e){super(e),this.charsmap=e.precompiled_charsmap}normalize(e){return e=e.replace(/[\u0001-\u0008\u000B\u000E-\u001F\u007F\u008F\u009F]/gm,""),e=e.replace(/[\u0009\u000A\u000C\u000D\u1680\u200B\u200C\u200E\u200F\u2028\u2029\u2581\uFEFF\uFFFD]/gm," "),e.includes("")?e=e.split("").map(tn=>tn.normalize("NFKC")).join(""):e=e.normalize("NFKC"),e}}class PreTokenizerSequence extends PreTokenizer{constructor(e){super(),this.tokenizers=e.pretokenizers.map(en=>PreTokenizer.fromConfig(en))}pre_tokenize_text(e,en){return this.tokenizers.reduce((tn,nn)=>nn.pre_tokenize(tn,en),[e])}}class WhitespacePreTokenizer extends PreTokenizer{constructor(e){super()}pre_tokenize_text(e,en){return e.match(/\w+|[^\w\s]+/g)||[]}}class WhitespaceSplit extends PreTokenizer{constructor(e){super()}pre_tokenize_text(e,en){return whitespace_split(e)}}class ReplacePreTokenizer extends PreTokenizer{constructor(e){super(),this.config=e,this.pattern=createPattern(this.config.pattern),this.content=this.config.content}pre_tokenize_text(e,en){return this.pattern===null?[e]:[e.replaceAll(this.pattern,this.config.content)]}}const SPECIAL_TOKEN_ATTRIBUTES=["bos_token","eos_token","unk_token","sep_token","pad_token","cls_token","mask_token"];function padHelper(St,e,en,tn){for(const nn of Object.keys(St)){const sn=e-St[nn].length,on=en(nn),un=new Array(sn).fill(on);St[nn]=tn==="right"?mergeArrays(St[nn],un):mergeArrays(un,St[nn])}}function truncateHelper(St,e){for(const en of Object.keys(St))St[en].length=e}class PreTrainedTokenizer extends Callable{constructor(en,tn){super();Mr(this,"return_token_type_ids",!1);Mr(this,"_default_chat_template",`{% for message in messages %}{{'<|im_start|>' + message['role'] + '
' + message['content'] + '<|im_end|>' + '
'}}{% endfor %}{% if add_generation_prompt %}{{ '<|im_start|>assistant
' }}{% endif %}`);this._tokenizer_config=tn,this.normalizer=Normalizer.fromConfig(en.normalizer),this.pre_tokenizer=PreTokenizer.fromConfig(en.pre_tokenizer),this.model=TokenizerModel.fromConfig(en.model,tn),this.post_processor=PostProcessor.fromConfig(en.post_processor),this.decoder=Decoder.fromConfig(en.decoder),this.special_tokens=[],this.all_special_ids=[],this.added_tokens=[];for(const nn of en.added_tokens){const sn=new AddedToken(nn);this.added_tokens.push(sn),this.model.tokens_to_ids.set(sn.content,sn.id),this.model.vocab[sn.id]=sn.content,sn.special&&(this.special_tokens.push(sn.content),this.all_special_ids.push(sn.id))}if(this.additional_special_tokens=tn.additional_special_tokens??[],this.special_tokens.push(...this.additional_special_tokens),this.special_tokens=[...new Set(this.special_tokens)],this.decoder&&(this.decoder.added_tokens=this.added_tokens,this.decoder.end_of_word_suffix=this.model.end_of_word_suffix),this.added_tokens_regex=this.added_tokens.length>0?new RegExp(this.added_tokens.map(nn=>`${nn.lstrip?"\\s*":""}(${escapeRegExp(nn.content)})${nn.rstrip?"\\s*":""}`).join("|")):null,this.mask_token=this.getToken("mask_token"),this.mask_token_id=this.model.tokens_to_ids.get(this.mask_token),this.pad_token=this.getToken("pad_token","eos_token"),this.pad_token_id=this.model.tokens_to_ids.get(this.pad_token),this.sep_token=this.getToken("sep_token"),this.sep_token_id=this.model.tokens_to_ids.get(this.sep_token),this.unk_token=this.getToken("unk_token"),this.unk_token_id=this.model.tokens_to_ids.get(this.unk_token),this.model_max_length=tn.model_max_length,this.remove_space=tn.remove_space,this.clean_up_tokenization_spaces=tn.clean_up_tokenization_spaces??!0,this.do_lowercase_and_remove_accent=tn.do_lowercase_and_remove_accent??!1,this.padding_side="right",this.legacy=!1,this.chat_template=tn.chat_template??null,Array.isArray(this.chat_template)){const nn=Object.create(null);for(const{name:sn,template:on}of this.chat_template){if(typeof sn!="string"||typeof on!="string")throw new Error('Chat template must be a list of objects with "name" and "template" properties');nn[sn]=on}this.chat_template=nn}this._compiled_template_cache=new Map}getToken(...en){for(const tn of en){const nn=this._tokenizer_config[tn];if(nn)if(typeof nn=="object"){if(nn.__type==="AddedToken")return nn.content;throw Error(`Unknown token: ${nn}`)}else return nn}return null}static async from_pretrained(en,{progress_callback:tn=null,config:nn=null,cache_dir:sn=null,local_files_only:on=!1,revision:un="main",legacy:dn=null}={}){const fn=await loadTokenizer(en,{progress_callback:tn,cache_dir:sn,local_files_only:on,revision:un,legacy:dn});return new this(...fn)}_call(en,{text_pair:tn=null,add_special_tokens:nn=!0,padding:sn=!1,truncation:on=null,max_length:un=null,return_tensor:dn=!0,return_token_type_ids:fn=null}={}){const hn=Array.isArray(en);let an;if(hn){if(en.length===0)throw Error("text array must be non-empty");if(tn!==null){if(Array.isArray(tn)){if(en.length!==tn.length)throw Error("text and text_pair must have the same length")}else throw Error("text_pair must also be an array");an=en.map((cn,pn)=>this._encode_plus(cn,tn[pn],{add_special_tokens:nn,return_token_type_ids:fn}))}else an=en.map(cn=>this._encode_plus(cn,null,{add_special_tokens:nn,return_token_type_ids:fn}))}else{if(en==null)throw Error("text may not be null or undefined");if(Array.isArray(tn))throw Error("When specifying `text_pair`, since `text` is a string, `text_pair` must also be a string (i.e., not an array).");an=[this._encode_plus(en,tn,{add_special_tokens:nn,return_token_type_ids:fn})]}if(un===null?sn==="max_length"?un=this.model_max_length:un=max(an.map(cn=>cn.input_ids.length))[0]:on||console.warn("Truncation was not explicitly activated but `max_length` is provided a specific value, please use `truncation=true` to explicitly truncate examples to max length."),un=Math.min(un,this.model_max_length),sn||on)for(let cn=0;cn<an.length;++cn)an[cn].input_ids.length!==un&&(an[cn].input_ids.length>un?on&&truncateHelper(an[cn],un):sn&&padHelper(an[cn],un,pn=>pn==="input_ids"?this.pad_token_id:0,this.padding_side));const rn={};if(dn){if(!(sn&&on)&&an.some(pn=>{var mn;for(const xn of Object.keys(pn))if(pn[xn].length!==((mn=an[0][xn])==null?void 0:mn.length))return!0;return!1}))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=true' and 'truncation=true' to have batched tensors with the same length.");const cn=[an.length,an[0].input_ids.length];for(const pn of Object.keys(an[0]))rn[pn]=new Tensor("int64",BigInt64Array.from(an.flatMap(mn=>mn[pn]).map(BigInt)),cn)}else{for(const cn of Object.keys(an[0]))rn[cn]=an.map(pn=>pn[cn]);if(!hn)for(const cn of Object.keys(rn))rn[cn]=rn[cn][0]}return rn}_encode_text(en){return en===null?null:(this.added_tokens_regex?en.split(this.added_tokens_regex).filter(sn=>sn):[en]).map((sn,on)=>{if(this.added_tokens.find(dn=>dn.content===sn)!==void 0)return sn;{if(this.remove_space===!0&&(sn=sn.trim().split(/\s+/).join(" ")),this.do_lowercase_and_remove_accent&&(sn=lowercase_and_remove_accent(sn)),this.normalizer!==null&&(sn=this.normalizer(sn)),sn.length===0)return[];const dn=this.pre_tokenizer!==null?this.pre_tokenizer(sn,{section_index:on}):[sn];return this.model(dn)}}).flat()}_encode_plus(en,tn=null,{add_special_tokens:nn=!0,return_token_type_ids:sn=null}={}){const on=this._encode_text(en),un=this._encode_text(tn),dn=this.post_processor?this.post_processor(on,un,{add_special_tokens:nn}):{tokens:mergeArrays(on??[],un??[])},fn=this.model.convert_tokens_to_ids(dn.tokens),hn={input_ids:fn,attention_mask:new Array(fn.length).fill(1)};return(sn??this.return_token_type_ids)&&dn.token_type_ids&&(hn.token_type_ids=dn.token_type_ids),hn}encode(en,tn=null,{add_special_tokens:nn=!0,return_token_type_ids:sn=null}={}){const{input_ids:on}=this._encode_plus(en,tn,{add_special_tokens:nn,return_token_type_ids:sn});return on}batch_decode(en,tn={}){return en instanceof Tensor&&(en=en.tolist()),en.map(nn=>this.decode(nn,tn))}decode(en,tn={}){if(en instanceof Tensor&&(en=prepareTensorForDecode(en)),!Array.isArray(en)||en.length===0||!isIntegralNumber(en[0]))throw Error("token_ids must be a non-empty array of integers.");return this.decode_single(en,tn)}decode_single(en,{skip_special_tokens:tn=!1,clean_up_tokenization_spaces:nn=null}){let sn=this.model.convert_ids_to_tokens(en);tn&&(sn=sn.filter(un=>!this.special_tokens.includes(un)));let on=this.decoder?this.decoder(sn):sn.join(" ");return this.decoder&&this.decoder.end_of_word_suffix&&(on=on.replaceAll(this.decoder.end_of_word_suffix," "),tn&&(on=on.trim())),(nn??this.clean_up_tokenization_spaces)&&(on=clean_up_tokenization(on)),on}get default_chat_template(){return this._warned_about_chat_template||(console.warn("No chat template is defined for this tokenizer - using a default chat template that implements the ChatML format. If the default is not appropriate for your model, please set `tokenizer.chat_template` to an appropriate template. See https://huggingface.co/docs/transformers/main/chat_templating for more information."),this._warned_about_chat_template=!0),this._default_chat_template}apply_chat_template(en,{chat_template:tn=null,add_generation_prompt:nn=!1,tokenize:sn=!0,padding:on=!1,truncation:un=!1,max_length:dn=null,return_tensor:fn=!0,tokenizer_kwargs:hn={},...an}={}){if(this.chat_template&&typeof this.chat_template=="object"||this.chat_template===null&&this.default_chat_template&&typeof this.default_chat_template=="object"){const mn=this.chat_template??this.default_chat_template;if(tn!==null&&Object.hasOwn(mn,tn))tn=mn[tn];else if(tn===null&&"default"in mn)tn=mn.default;else if(tn===null)throw Error(`This model has multiple chat templates with no default specified! Please either pass a chat template or the name of the template you wish to use to the 'chat_template' argument. Available template names are ${Object.keys(mn).sort()}.`)}else tn??(tn=this.chat_template??this.default_chat_template);if(typeof tn!="string")throw Error(`chat_template must be a string, but got ${typeof tn}`);let rn=this._compiled_template_cache.get(tn);rn===void 0&&(rn=new Template(tn),this._compiled_template_cache.set(tn,rn));const cn=Object.create(null);for(const mn of SPECIAL_TOKEN_ATTRIBUTES){const xn=this.getToken(mn);xn&&(cn[mn]=xn)}const pn=rn.render({messages:en,add_generation_prompt:nn,...cn,...an});return sn?this._call(pn,{add_special_tokens:!1,padding:on,truncation:un,max_length:dn,return_tensor:fn,...hn}).input_ids:pn}}class BertTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Mr(this,"return_token_type_ids",!0)}}class AlbertTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Mr(this,"return_token_type_ids",!0)}}class MobileBertTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Mr(this,"return_token_type_ids",!0)}}class SqueezeBertTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Mr(this,"return_token_type_ids",!0)}}class DebertaTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Mr(this,"return_token_type_ids",!0)}}class DebertaV2Tokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Mr(this,"return_token_type_ids",!0)}}class HerbertTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Mr(this,"return_token_type_ids",!0)}}class ConvBertTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Mr(this,"return_token_type_ids",!0)}}class RoFormerTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Mr(this,"return_token_type_ids",!0)}}class DistilBertTokenizer extends PreTrainedTokenizer{}class CamembertTokenizer extends PreTrainedTokenizer{}class XLMTokenizer extends PreTrainedTokenizer{constructor(en,tn){super(en,tn);Mr(this,"return_token_type_ids",!0);console.warn('WARNING: `XLMTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}}class ElectraTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Mr(this,"return_token_type_ids",!0)}}class T5Tokenizer extends PreTrainedTokenizer{}class GPT2Tokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Mr(this,"_default_chat_template",'{% for message in messages %}" "{{ message.content }}{{ eos_token }}" "{% endfor %}')}}class BartTokenizer extends PreTrainedTokenizer{}class MBartTokenizer extends PreTrainedTokenizer{constructor(e,en){super(e,en),this.languageRegex=/^[a-z]{2}_[A-Z]{2}$/,this.language_codes=this.special_tokens.filter(tn=>this.languageRegex.test(tn)),this.lang_to_token=tn=>tn}_build_translation_inputs(e,en,tn){return _build_translation_inputs(this,e,en,tn)}}class MBart50Tokenizer extends MBartTokenizer{}class RobertaTokenizer extends PreTrainedTokenizer{}class BloomTokenizer extends GPT2Tokenizer{constructor(e,en){var sn,on;const tn=".,!?",nn=(on=(sn=e.pre_tokenizer)==null?void 0:sn.pretokenizers[0])==null?void 0:on.pattern;nn&&nn.Regex===` ?[^(\\s|[${tn}])]+`&&(nn.Regex=` ?[^\\s${tn}]+`),super(e,en)}}const SPIECE_UNDERLINE="";class LlamaTokenizer extends PreTrainedTokenizer{constructor(en,tn){super(en,tn);Mr(this,"_default_chat_template",`{% if messages[0]['role'] == 'system' %}{% set loop_messages = messages[1:] %}{% set system_message = messages[0]['content'] %}{% elif USE_DEFAULT_PROMPT == true and not '<<SYS>>' in messages[0]['content'] %}{% set loop_messages = messages %}{% set system_message = 'DEFAULT_SYSTEM_MESSAGE' %}{% else %}{% set loop_messages = messages %}{% set system_message = false %}{% endif %}{% for message in loop_messages %}{% if (message['role'] == 'user') != (loop.index0 % 2 == 0) %}{{ raise_exception('Conversation roles must alternate user/assistant/user/assistant/...') }}{% endif %}{% if loop.index0 == 0 and system_message != false %}{% set content = '<<SYS>>
' + system_message + '
<</SYS>>

' + message['content'] %}{% else %}{% set content = message['content'] %}{% endif %}{% if message['role'] == 'user' %}{{ bos_token + '[INST] ' + content.strip() + ' [/INST]' }}{% elif message['role'] == 'system' %}{{ '<<SYS>>
' + content.strip() + '
<</SYS>>

' }}{% elif message['role'] == 'assistant' %}{{ ' '  + content.strip() + ' ' + eos_token }}{% endif %}{% endfor %}`);Mr(this,"DEFAULT_SYSTEM_PROMPT",`You are a helpful, respectful and honest assistant. Always answer as helpfully as possible, while being safe. Your answers should not include any harmful, unethical, racist, sexist, toxic, dangerous, or illegal content. Please ensure that your responses are socially unbiased and positive in nature.

If a question does not make any sense, or is not factually coherent, explain why instead of answering something not correct. If you don't know the answer to a question, please don't share false information.`);this.use_default_system_prompt=tn.use_default_system_prompt??!1,this.legacy=tn.legacy??!0,this.legacy||(this.normalizer=null,this.pre_tokenizer=new MetaspacePreTokenizer({replacement:SPIECE_UNDERLINE,add_prefix_space:!0,prepend_scheme:"first"}))}_encode_text(en){if(en===null)return null;if(this.legacy||en.length===0)return super._encode_text(en);let tn=super._encode_text(SPIECE_UNDERLINE+en.replaceAll(SPIECE_UNDERLINE," "));return tn.length>1&&tn[0]===SPIECE_UNDERLINE&&this.special_tokens.includes(tn[1])&&(tn=tn.slice(1)),tn}get default_chat_template(){return super.default_chat_template.replaceAll("USE_DEFAULT_PROMPT",this.use_default_system_prompt?"true":"false").replaceAll("DEFAULT_SYSTEM_MESSAGE",this.DEFAULT_SYSTEM_PROMPT.replaceAll(`
`,"\\n").replaceAll("'","\\'"))}}class CodeLlamaTokenizer extends LlamaTokenizer{}class XLMRobertaTokenizer extends PreTrainedTokenizer{}class MPNetTokenizer extends PreTrainedTokenizer{}class FalconTokenizer extends PreTrainedTokenizer{}class GPTNeoXTokenizer extends PreTrainedTokenizer{}class EsmTokenizer extends PreTrainedTokenizer{}class Qwen2Tokenizer extends PreTrainedTokenizer{}class GemmaTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Mr(this,"_default_chat_template",`{% if messages[0]['role'] == 'system' %}{{ raise_exception('System role not supported') }}{% endif %}{% for message in messages %}{% if (message['role'] == 'user') != (loop.index0 % 2 == 0) %}{{ raise_exception('Conversation roles must alternate user/assistant/user/assistant/...') }}{% endif %}{% if (message['role'] == 'assistant') %}{% set role = 'model' %}{% else %}{% set role = message['role'] %}{% endif %}{{ '<start_of_turn>' + role + '
' + message['content'] | trim + '<end_of_turn>
' }}{% endfor %}{% if add_generation_prompt %}{{'<start_of_turn>model
'}}{% endif %}`)}}class Grok1Tokenizer extends PreTrainedTokenizer{}function _build_translation_inputs(St,e,en,tn){if(!("language_codes"in St)||!Array.isArray(St.language_codes))throw new Error("Tokenizer must have `language_codes` attribute set and it should be an array of language ids.");if(!("languageRegex"in St)||!(St.languageRegex instanceof RegExp))throw new Error("Tokenizer must have `languageRegex` attribute set and it should be a regular expression.");if(!("lang_to_token"in St)||typeof St.lang_to_token!="function")throw new Error("Tokenizer must have `lang_to_token` attribute set and it should be a function.");const nn=tn.src_lang,sn=tn.tgt_lang;if(!St.language_codes.includes(sn))throw new Error(`Target language code "${sn}" is not valid. Must be one of: {${St.language_codes.join(", ")}}`);if(nn!==void 0){if(!St.language_codes.includes(nn))throw new Error(`Source language code "${nn}" is not valid. Must be one of: {${St.language_codes.join(", ")}}`);for(const on of St.post_processor.config.single)if("SpecialToken"in on&&St.languageRegex.test(on.SpecialToken.id)){on.SpecialToken.id=St.lang_to_token(nn);break}}return tn.forced_bos_token_id=St.model.convert_tokens_to_ids([St.lang_to_token(sn)])[0],St._call(e,en)}class NllbTokenizer extends PreTrainedTokenizer{constructor(e,en){super(e,en),this.languageRegex=/^[a-z]{3}_[A-Z][a-z]{3}$/,this.language_codes=this.special_tokens.filter(tn=>this.languageRegex.test(tn)),this.lang_to_token=tn=>tn}_build_translation_inputs(e,en,tn){return _build_translation_inputs(this,e,en,tn)}}class M2M100Tokenizer extends PreTrainedTokenizer{constructor(e,en){super(e,en),this.languageRegex=/^__[a-z]{2,3}__$/,this.language_codes=this.special_tokens.filter(tn=>this.languageRegex.test(tn)).map(tn=>tn.slice(2,-2)),this.lang_to_token=tn=>`__${tn}__`}_build_translation_inputs(e,en,tn){return _build_translation_inputs(this,e,en,tn)}}const WHISPER_LANGUAGES=[["en","english"],["zh","chinese"],["de","german"],["es","spanish"],["ru","russian"],["ko","korean"],["fr","french"],["ja","japanese"],["pt","portuguese"],["tr","turkish"],["pl","polish"],["ca","catalan"],["nl","dutch"],["ar","arabic"],["sv","swedish"],["it","italian"],["id","indonesian"],["hi","hindi"],["fi","finnish"],["vi","vietnamese"],["he","hebrew"],["uk","ukrainian"],["el","greek"],["ms","malay"],["cs","czech"],["ro","romanian"],["da","danish"],["hu","hungarian"],["ta","tamil"],["no","norwegian"],["th","thai"],["ur","urdu"],["hr","croatian"],["bg","bulgarian"],["lt","lithuanian"],["la","latin"],["mi","maori"],["ml","malayalam"],["cy","welsh"],["sk","slovak"],["te","telugu"],["fa","persian"],["lv","latvian"],["bn","bengali"],["sr","serbian"],["az","azerbaijani"],["sl","slovenian"],["kn","kannada"],["et","estonian"],["mk","macedonian"],["br","breton"],["eu","basque"],["is","icelandic"],["hy","armenian"],["ne","nepali"],["mn","mongolian"],["bs","bosnian"],["kk","kazakh"],["sq","albanian"],["sw","swahili"],["gl","galician"],["mr","marathi"],["pa","punjabi"],["si","sinhala"],["km","khmer"],["sn","shona"],["yo","yoruba"],["so","somali"],["af","afrikaans"],["oc","occitan"],["ka","georgian"],["be","belarusian"],["tg","tajik"],["sd","sindhi"],["gu","gujarati"],["am","amharic"],["yi","yiddish"],["lo","lao"],["uz","uzbek"],["fo","faroese"],["ht","haitian creole"],["ps","pashto"],["tk","turkmen"],["nn","nynorsk"],["mt","maltese"],["sa","sanskrit"],["lb","luxembourgish"],["my","myanmar"],["bo","tibetan"],["tl","tagalog"],["mg","malagasy"],["as","assamese"],["tt","tatar"],["haw","hawaiian"],["ln","lingala"],["ha","hausa"],["ba","bashkir"],["jw","javanese"],["su","sundanese"]],WHISPER_LANGUAGE_MAPPING=new Map(WHISPER_LANGUAGES),WHISPER_TO_LANGUAGE_CODE_MAPPING=new Map([...WHISPER_LANGUAGES.map(([St,e])=>[e,St]),["burmese","my"],["valencian","ca"],["flemish","nl"],["haitian","ht"],["letzeburgesch","lb"],["pushto","ps"],["panjabi","pa"],["moldavian","ro"],["moldovan","ro"],["sinhalese","si"],["castilian","es"]]);class WhisperTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Mr(this,"_default_chat_template",'{% for message in messages %}" "{{ message.content }}{{ eos_token }}" "{% endfor %}')}_decode_asr(en,{return_timestamps:tn=!1,return_language:nn=!1,time_precision:sn=null,force_full_sequences:on=!0}={}){if(sn===null)throw Error("Must specify time_precision");let un=null;const dn=tn==="word";function fn(){return{language:un,timestamp:[null,null],text:""}}const hn=[];let an=fn(),rn=0;const cn=this.model.convert_tokens_to_ids(["<|notimestamps|>"])[0]+1;let pn=[],mn=[],xn=!1,gn=null;const yn=new Set(this.all_special_ids);for(const _n of en){const Tn=_n.tokens,An=dn?_n.token_timestamps:null;let Pn=null,Sn=cn;if("stride"in _n){const[Mn,Fn,In]=_n.stride;if(rn-=Fn,gn=Mn-In,Fn&&(Sn=Fn/sn+cn),In)for(let Bn=Tn.length-1;Bn>=0;--Bn){const Ln=Tn[Bn];if(Ln>=cn){if(Pn!==null&&(Ln-cn)*sn<gn)break;Pn=Ln}}}let Cn=[],Nn=[];for(let Mn=0;Mn<Tn.length;++Mn){const Fn=Tn[Mn];if(yn.has(Fn)){const In=this.decode([Fn]),Bn=WHISPER_LANGUAGE_MAPPING.get(In.slice(2,-2));if(Bn!==void 0){if(un!==null&&Bn!==un&&!tn){pn.push(Cn);const Ln=this.findLongestCommonSequence(pn)[0],qn=this.decode(Ln);an.text=qn,hn.push(an),pn=[],Cn=[],an=fn()}un=an.language=Bn}}else if(Fn>=cn){const In=(Fn-cn)*sn+rn,Bn=round(In,2);if(Pn!==null&&Fn>=Pn)xn=!0;else if(xn||pn.length>0&&Fn<Sn)xn=!1;else if(an.timestamp[0]===null)an.timestamp[0]=Bn;else if(Bn!==an.timestamp[0]){an.timestamp[1]=Bn,pn.push(Cn),dn&&mn.push(Nn);const[Ln,qn]=this.findLongestCommonSequence(pn,mn),Yn=this.decode(Ln);an.text=Yn,dn&&(an.words=this.collateWordTimestamps(Ln,qn,un)),hn.push(an),pn=[],Cn=[],mn=[],Nn=[],an=fn()}}else if(Cn.push(Fn),dn){let In=round(An[Mn]+rn,2),Bn;Mn+1<An.length?Bn=round(An[Mn+1]+rn,2):Bn=null,Nn.push([In,Bn])}}if("stride"in _n){const[Mn,Fn,In]=_n.stride;rn+=Mn-In}Cn.length>0?(pn.push(Cn),dn&&mn.push(Nn)):pn.every(Mn=>Mn.length===0)&&(an=fn(),pn=[],Cn=[],mn=[],Nn=[])}if(pn.length>0){if(on&&tn)throw new Error("Whisper did not predict an ending timestamp, which can happen if audio is cut off in the middle of a word. Also make sure WhisperTimeStampLogitsProcessor was used during generation.");const[_n,Tn]=this.findLongestCommonSequence(pn,mn),An=this.decode(_n);an.text=An,dn&&(an.words=this.collateWordTimestamps(_n,Tn,un)),hn.push(an)}let bn=Object.create(null);const wn=hn.map(_n=>_n.text).join("");if(tn||nn){for(let _n=0;_n<hn.length;++_n){const Tn=hn[_n];tn||delete Tn.timestamp,nn||delete Tn.language}if(dn){const _n=[];for(const Tn of hn)for(const An of Tn.words)_n.push(An);bn={chunks:_n}}else bn={chunks:hn}}return[wn,bn]}findLongestCommonSequence(en,tn=null){let nn=en[0],sn=nn.length,on=[];const un=Array.isArray(tn)&&tn.length>0;let dn=un?[]:null,fn=un?tn[0]:null;for(let hn=1;hn<en.length;++hn){const an=en[hn];let rn=0,cn=[sn,sn,0,0];const pn=an.length;for(let _n=1;_n<sn+pn;++_n){const Tn=_n/1e4,An=Math.max(0,sn-_n),Pn=Math.min(sn,sn+pn-_n),Sn=nn.slice(An,Pn),Cn=Math.max(0,_n-sn),Nn=Math.min(pn,_n),Mn=an.slice(Cn,Nn);if(Sn.length!==Mn.length)throw new Error("There is a bug within whisper `decode_asr` function, please report it. Dropping to prevent bad inference.");const Fn=Sn.filter((Bn,Ln)=>Bn===Mn[Ln]).length,In=Fn/_n+Tn;Fn>1&&In>rn&&(rn=In,cn=[An,Pn,Cn,Nn])}const[mn,xn,gn,yn]=cn,bn=Math.floor((xn+mn)/2),wn=Math.floor((yn+gn)/2);on.push(...nn.slice(0,bn)),nn=an.slice(wn),sn=nn.length,un&&(dn.push(...fn.slice(0,bn)),fn=tn[hn].slice(wn))}return on.push(...nn),un?(dn.push(...fn),[on,dn]):[on,[]]}collateWordTimestamps(en,tn,nn){const[sn,on,un]=this.combineTokensIntoWords(en,nn),dn=[];for(let fn=0;fn<sn.length;++fn){const hn=un[fn];dn.push({text:sn[fn],timestamp:[tn[hn.at(0)][0],tn[hn.at(-1)][1]]})}return dn}combineTokensIntoWords(en,tn,nn=`"'([{-`,sn=`"'.,!?:)]}`){tn=tn??"english";let on,un,dn;return["chinese","japanese","thai","lao","myanmar"].includes(tn)?[on,un,dn]=this.splitTokensOnUnicode(en):[on,un,dn]=this.splitTokensOnSpaces(en),this.mergePunctuations(on,un,dn,nn,sn)}decode(en,tn){let nn;return tn&&tn.decode_with_timestamps?(en instanceof Tensor&&(en=prepareTensorForDecode(en)),nn=this.decodeWithTimestamps(en,tn)):nn=super.decode(en,tn),nn}decodeWithTimestamps(en,tn){const nn=(tn==null?void 0:tn.time_precision)??.02,sn=Array.from(this.all_special_ids).at(-1)+1;let on=[[]];for(const un of en)if(un>=sn){const dn=round((un-sn)*nn,2);on.push(`<|${dn}|>`),on.push([])}else on[on.length-1].push(un);return on=on.map(un=>typeof un=="string"?un:super.decode(un,tn)),on.join("")}splitTokensOnUnicode(en){const tn=this.decode(en,{decode_with_timestamps:!0}),nn="",sn=[],on=[],un=[];let dn=[],fn=[],hn=0;for(let an=0;an<en.length;++an){const rn=en[an];dn.push(rn),fn.push(an);const cn=this.decode(dn,{decode_with_timestamps:!0});(!cn.includes(nn)||tn[hn+cn.indexOf(nn)]===nn)&&(sn.push(cn),on.push(dn),un.push(fn),dn=[],fn=[],hn+=cn.length)}return[sn,on,un]}splitTokensOnSpaces(en){const[tn,nn,sn]=this.splitTokensOnUnicode(en),on=[],un=[],dn=[],fn=new RegExp(`^[${PUNCTUATION_REGEX}]$`,"gu");for(let hn=0;hn<tn.length;++hn){const an=tn[hn],rn=nn[hn],cn=sn[hn],pn=rn[0]>=this.model.tokens_to_ids.get("<|endoftext|>"),mn=an.startsWith(" "),xn=an.trim(),gn=fn.test(xn);if(pn||mn||gn||on.length===0)on.push(an),un.push(rn),dn.push(cn);else{const yn=on.length-1;on[yn]+=an,un[yn].push(...rn),dn[yn].push(...cn)}}return[on,un,dn]}mergePunctuations(en,tn,nn,sn,on){const un=structuredClone(en),dn=structuredClone(tn),fn=structuredClone(nn);let hn=un.length-2,an=un.length-1;for(;hn>=0;)un[hn].startsWith(" ")&&sn.includes(un[hn].trim())?(un[an]=un[hn]+un[an],dn[an]=mergeArrays(dn[hn],dn[an]),fn[an]=mergeArrays(fn[hn],fn[an]),un[hn]="",dn[hn]=[],fn[hn]=[]):an=hn,--hn;for(hn=0,an=1;an<un.length;)!un[hn].endsWith(" ")&&on.includes(un[an])?(un[hn]+=un[an],dn[hn]=mergeArrays(dn[hn],dn[an]),fn[hn]=mergeArrays(fn[hn],fn[an]),un[an]="",dn[an]=[],fn[an]=[]):hn=an,++an;return[un.filter(rn=>rn),dn.filter(rn=>rn.length>0),fn.filter(rn=>rn.length>0)]}get_decoder_prompt_ids({language:en=null,task:tn=null,no_timestamps:nn=!0}={}){const sn=[];if(en){en=en.toLowerCase();let on=WHISPER_TO_LANGUAGE_CODE_MAPPING.get(en);if(on===void 0)if(WHISPER_LANGUAGE_MAPPING.has(en))on=en;else{const fn=en.length===2?WHISPER_LANGUAGE_MAPPING.keys():WHISPER_LANGUAGE_MAPPING.values();throw new Error(`Language "${en}" is not supported. Must be one of: ${JSON.stringify(fn)}`)}const un=this.model.tokens_to_ids.get(`<|${on}|>`);if(un===void 0)throw new Error(`Unable to find language "${on}" in model vocabulary. Please report this issue at https://github.com/xenova/transformers.js/issues/new/choose.`);sn.push(un)}else sn.push(null);if(tn){if(tn=tn.toLowerCase(),tn!=="transcribe"&&tn!=="translate")throw new Error(`Task "${tn}" is not supported. Must be one of: ["transcribe", "translate"]`);const on=this.model.tokens_to_ids.get(`<|${tn}|>`);if(on===void 0)throw new Error(`Unable to find task "${tn}" in model vocabulary. Please report this issue at https://github.com/xenova/transformers.js/issues/new/choose.`);sn.push(on)}else sn.push(null);if(nn){const on=this.model.tokens_to_ids.get("<|notimestamps|>");if(on===void 0)throw new Error('Unable to find "<|notimestamps|>" in model vocabulary. Please report this issue at https://github.com/xenova/transformers.js/issues/new/choose.');sn.push(on)}return sn.map((on,un)=>[un+1,on]).filter(on=>on[1]!==null)}}class CodeGenTokenizer extends PreTrainedTokenizer{}class CLIPTokenizer extends PreTrainedTokenizer{}class SiglipTokenizer extends PreTrainedTokenizer{}class MarianTokenizer extends PreTrainedTokenizer{constructor(e,en){super(e,en),this.languageRegex=/^(>>\w+<<)\s*/g,this.supported_language_codes=this.model.vocab.filter(tn=>this.languageRegex.test(tn)),console.warn('WARNING: `MarianTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}_encode_text(e){if(e===null)return null;const[en,...tn]=e.trim().split(this.languageRegex);if(tn.length===0)return super._encode_text(en);if(tn.length===2){const[nn,sn]=tn;return this.supported_language_codes.includes(nn)||console.warn(`Unsupported language code "${nn}" detected, which may lead to unexpected behavior. Should be one of: ${JSON.stringify(this.supported_language_codes)}`),mergeArrays([nn],super._encode_text(sn))}}}class Wav2Vec2CTCTokenizer extends PreTrainedTokenizer{}class BlenderbotTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Mr(this,"_default_chat_template","{% for message in messages %}{% if message['role'] == 'user' %}{{ ' ' }}{% endif %}{{ message['content'] }}{% if not loop.last %}{{ '  ' }}{% endif %}{% endfor %}{{ eos_token }}")}}class BlenderbotSmallTokenizer extends BlenderbotTokenizer{}class SpeechT5Tokenizer extends PreTrainedTokenizer{}class NougatTokenizer extends PreTrainedTokenizer{}class VitsTokenizer extends PreTrainedTokenizer{constructor(e,en){super(e,en),this.decoder=new VitsDecoder({})}}class CohereTokenizer extends PreTrainedTokenizer{}class AutoTokenizer{static async from_pretrained(e,{quantized:en=!0,progress_callback:tn=null,config:nn=null,cache_dir:sn=null,local_files_only:on=!1,revision:un="main",legacy:dn=null}={}){var cn;const[fn,hn]=await loadTokenizer(e,{progress_callback:tn,cache_dir:sn,local_files_only:on,revision:un,legacy:dn}),an=((cn=hn.tokenizer_class)==null?void 0:cn.replace(/Fast$/,""))??"PreTrainedTokenizer";let rn=this.TOKENIZER_CLASS_MAPPING[an];return rn||(console.warn(`Unknown tokenizer class "${an}", attempting to construct from base class.`),rn=PreTrainedTokenizer),new rn(fn,hn)}}Mr(AutoTokenizer,"TOKENIZER_CLASS_MAPPING",{T5Tokenizer,DistilBertTokenizer,CamembertTokenizer,DebertaTokenizer,DebertaV2Tokenizer,BertTokenizer,HerbertTokenizer,ConvBertTokenizer,RoFormerTokenizer,XLMTokenizer,ElectraTokenizer,MobileBertTokenizer,SqueezeBertTokenizer,AlbertTokenizer,GPT2Tokenizer,BartTokenizer,MBartTokenizer,MBart50Tokenizer,RobertaTokenizer,WhisperTokenizer,CodeGenTokenizer,CLIPTokenizer,SiglipTokenizer,MarianTokenizer,BloomTokenizer,NllbTokenizer,M2M100Tokenizer,LlamaTokenizer,CodeLlamaTokenizer,XLMRobertaTokenizer,MPNetTokenizer,FalconTokenizer,GPTNeoXTokenizer,EsmTokenizer,Wav2Vec2CTCTokenizer,BlenderbotTokenizer,BlenderbotSmallTokenizer,SpeechT5Tokenizer,NougatTokenizer,VitsTokenizer,Qwen2Tokenizer,GemmaTokenizer,Grok1Tokenizer,CohereTokenizer,PreTrainedTokenizer});async function loadConfig(St,e){return await getModelJSON(St,"config.json",!0,e)}class PretrainedConfig{constructor(e){this.model_type=null,this.is_encoder_decoder=!1,Object.assign(this,e)}static async from_pretrained(e,{progress_callback:en=null,config:tn=null,cache_dir:nn=null,local_files_only:sn=!1,revision:on="main"}={}){let un=tn??await loadConfig(e,{progress_callback:en,cache_dir:nn,local_files_only:sn,revision:on});return new this(un)}}class AutoConfig{static async from_pretrained(...e){return PretrainedConfig.from_pretrained(...e)}}class LogitsProcessorList extends Callable{constructor(){super(),this.processors=[]}push(e){this.processors.push(e)}extend(e){this.processors.push(...e)}_call(e,en){for(let tn of en)this.processors.forEach(nn=>nn(e,tn))}[Symbol.iterator](){return this.processors.values()}}class LogitsProcessor extends Callable{_call(e,en){throw Error("`_call` should be implemented in a subclass")}}class ForceTokensLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.force_token_map=Object.fromEntries(e??[])}_call(e,en){let tn=this.force_token_map[e.length];return exists(tn)&&(en.data.fill(-1/0),en.data[tn]=0),en}}class ForcedBOSTokenLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.bos_token_id=e}_call(e,en){return e.length===1&&(en.data.fill(-1/0),en.data[this.bos_token_id]=0),en}}class ForcedEOSTokenLogitsProcessor extends LogitsProcessor{constructor(e,en){super(),this.max_length=e,this.forced_eos_token_id=en}_call(e,en){}}class SuppressTokensAtBeginLogitsProcessor extends LogitsProcessor{constructor(e,en){super(),this.begin_suppress_tokens=e,this.begin_index=en}_call(e,en){if(e.length===this.begin_index)for(let tn of this.begin_suppress_tokens)en.data[tn]=-1/0;return en}}class WhisperTimeStampLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.eos_token_id=e.eos_token_id,this.no_timestamps_token_id=e.no_timestamps_token_id,this.timestamp_begin=this.no_timestamps_token_id+1,this.begin_index=(e.forced_decoder_ids||[]).length+2,e.forced_decoder_ids.slice(-1)[0][1]===this.no_timestamps_token_id&&(this.begin_index-=1),this.max_initial_timestamp_index=e.max_initial_timestamp_index}_call(e,en){const tn=en.data;if(tn[this.no_timestamps_token_id]=-1/0,e.length===this.begin_index-1)return tn.fill(-1/0),tn[this.timestamp_begin]=0,en;const nn=e.slice(this.begin_index),sn=nn.length>=1&&nn[nn.length-1]>=this.timestamp_begin,on=nn.length<2||nn[nn.length-2]>=this.timestamp_begin;if(sn&&(on?tn.subarray(this.timestamp_begin).fill(-1/0):tn.subarray(0,this.eos_token_id).fill(-1/0)),e.length===this.begin_index&&this.max_initial_timestamp_index!==null){const hn=this.timestamp_begin+this.max_initial_timestamp_index;tn.subarray(hn+1).fill(-1/0)}const un=log_softmax(tn),dn=Math.log(un.subarray(this.timestamp_begin).map(Math.exp).reduce((hn,an)=>hn+an)),fn=max(un.subarray(0,this.timestamp_begin))[0];return dn>fn&&tn.subarray(0,this.timestamp_begin).fill(-1/0),en}}class NoRepeatNGramLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.no_repeat_ngram_size=e}getNgrams(e){const en=e.length,tn=[];for(let sn=0;sn<en+1-this.no_repeat_ngram_size;++sn){const on=[];for(let un=0;un<this.no_repeat_ngram_size;++un)on.push(e[sn+un]);tn.push(on)}const nn=new Map;for(const sn of tn){const on=sn.slice(0,sn.length-1),un=JSON.stringify(on),dn=nn.get(un)??[];dn.push(sn[sn.length-1]),nn.set(un,dn)}return nn}getGeneratedNgrams(e,en){const tn=en.slice(en.length+1-this.no_repeat_ngram_size,en.length);return e.get(JSON.stringify(tn))??[]}calcBannedNgramTokens(e){const en=[];if(e.length+1<this.no_repeat_ngram_size)return en;{const tn=this.getNgrams(e);return this.getGeneratedNgrams(tn,e)}}_call(e,en){const tn=this.calcBannedNgramTokens(e);for(const nn of tn)en.data[nn]=-1/0;return en}}class RepetitionPenaltyLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.penalty=e}_call(e,en){for(const tn of e)en.data[tn]<0?en.data[tn]*=this.penalty:en.data[tn]/=this.penalty;return en}}class MinLengthLogitsProcessor extends LogitsProcessor{constructor(e,en){super(),this.min_length=e,this.eos_token_id=Array.isArray(en)?en:[en]}_call(e,en){if(e.length<this.min_length)for(const tn of this.eos_token_id)en.data[tn]=-1/0;return en}}class MinNewTokensLengthLogitsProcessor extends LogitsProcessor{constructor(e,en,tn){super(),this.prompt_length_to_skip=e,this.min_new_tokens=en,this.eos_token_id=Array.isArray(tn)?tn:[tn]}_call(e,en){if(e.length-this.prompt_length_to_skip<this.min_new_tokens)for(const nn of this.eos_token_id)en.data[nn]=-1/0;return en}}class NoBadWordsLogitsProcessor extends LogitsProcessor{constructor(e,en){super(),this.bad_words_ids=e,this.eos_token_id=Array.isArray(en)?en:[en]}_call(e,en){for(const tn of this.bad_words_ids){let nn=!0;for(let sn=1;sn<=tn.length-1&&tn.length<e.length;++sn)if(tn.at(-sn-1)!==e.at(-sn)){nn=!1;break}nn&&(en.data[tn.at(-1)]=-1/0)}return en}}const GenerationConfig=class{constructor(St={}){this.max_length=St.max_length??20,this.max_new_tokens=St.max_new_tokens??null,this.min_length=St.min_length??0,this.min_new_tokens=St.min_new_tokens??null,this.early_stopping=St.early_stopping??!1,this.max_time=St.max_time??null,this.do_sample=St.do_sample??!1,this.num_beams=St.num_beams??1,this.num_beam_groups=St.num_beam_groups??1,this.penalty_alpha=St.penalty_alpha??null,this.use_cache=St.use_cache??!0,this.temperature=St.temperature??1,this.top_k=St.top_k??50,this.top_p=St.top_p??1,this.typical_p=St.typical_p??1,this.epsilon_cutoff=St.epsilon_cutoff??0,this.eta_cutoff=St.eta_cutoff??0,this.diversity_penalty=St.diversity_penalty??0,this.repetition_penalty=St.repetition_penalty??1,this.encoder_repetition_penalty=St.encoder_repetition_penalty??1,this.length_penalty=St.length_penalty??1,this.no_repeat_ngram_size=St.no_repeat_ngram_size??0,this.bad_words_ids=St.bad_words_ids??null,this.force_words_ids=St.force_words_ids??null,this.renormalize_logits=St.renormalize_logits??!1,this.constraints=St.constraints??null,this.forced_bos_token_id=St.forced_bos_token_id??null,this.forced_eos_token_id=St.forced_eos_token_id??null,this.remove_invalid_values=St.remove_invalid_values??!1,this.exponential_decay_length_penalty=St.exponential_decay_length_penalty??null,this.suppress_tokens=St.suppress_tokens??null,this.begin_suppress_tokens=St.begin_suppress_tokens??null,this.forced_decoder_ids=St.forced_decoder_ids??null,this.num_return_sequences=St.num_return_sequences??1,this.output_attentions=St.output_attentions??!1,this.output_hidden_states=St.output_hidden_states??!1,this.output_scores=St.output_scores??!1,this.return_dict_in_generate=St.return_dict_in_generate??!1,this.pad_token_id=St.pad_token_id??null,this.bos_token_id=St.bos_token_id??null,this.eos_token_id=St.eos_token_id??null,this.encoder_no_repeat_ngram_size=St.encoder_no_repeat_ngram_size??0,this.decoder_start_token_id=St.decoder_start_token_id??null,this.generation_kwargs=St.generation_kwargs??{}}};class Sampler extends Callable{constructor(e){super(),this.generation_config=e}_call(e,en=-1){return this.sample(e,en)}sample(e,en){throw Error("sample should be implemented in subclasses.")}getLogits(e,en){let tn=e.dims.at(-1),nn=e.data;if(en===-1)nn=nn.slice(-tn);else{let sn=en*tn;nn=nn.slice(sn,sn+tn)}return this.generation_config.temperature>0&&(nn=nn.map(sn=>sn/this.generation_config.temperature)),nn}randomSelect(e){let en=e.reduce((nn,sn)=>nn+sn,0),tn=Math.random()*en;for(let nn=0;nn<e.length;++nn)if(tn-=e[nn],tn<=0)return nn;return 0}static getSampler(e){if(e.do_sample)return new MultinomialSampler(e);if(e.num_beams>1)return new BeamSearchSampler(e);if(e.num_return_sequences>1)throw Error(`num_return_sequences has to be 1 when doing greedy search, but is ${e.num_return_sequences}.`);return new GreedySampler(e)}}class GreedySampler extends Sampler{sample(e,en=-1){let tn=this.getLogits(e,en);return[[max(tn)[1],0]]}}class MultinomialSampler extends Sampler{sample(e,en=-1){let tn=e.dims.at(-1);this.generation_config.top_k>0&&(tn=Math.min(this.generation_config.top_k,tn));const nn=this.getLogits(e,en),sn=getTopItems(nn,tn),on=softmax(sn.map(un=>un[1]));return Array.from({length:this.generation_config.num_beams},()=>{const un=this.randomSelect(on);return[sn[un][0],Math.log(on[un])]})}}class BeamSearchSampler extends Sampler{sample(e,en=-1){let tn=e.dims.at(-1);this.generation_config.top_k>0&&(tn=Math.min(this.generation_config.top_k,tn));const nn=this.getLogits(e,en),sn=getTopItems(nn,tn),on=softmax(sn.map(un=>un[1]));return Array.from({length:this.generation_config.num_beams},(un,dn)=>[sn[dn][0],Math.log(on[dn])])}}const{InferenceSession,Tensor:ONNXTensor,env}=ONNX,MODEL_TYPES={EncoderOnly:0,EncoderDecoder:1,Seq2Seq:2,Vision2Seq:3,DecoderOnly:4,MaskGeneration:5},MODEL_TYPE_MAPPING=new Map,MODEL_NAME_TO_CLASS_MAPPING=new Map,MODEL_CLASS_TO_NAME_MAPPING=new Map;async function constructSession(St,e,en){let tn=`onnx/${e}${en.quantized?"_quantized":""}.onnx`,nn=await getModelFile(St,tn,!0,en);try{return await InferenceSession.create(nn,{executionProviders})}catch(sn){if(executionProviders.length===1&&executionProviders[0]==="wasm")throw sn;return console.warn(sn),console.warn("Something went wrong during model construction (most likely a missing operation). Using `wasm` as a fallback. "),await InferenceSession.create(nn,{executionProviders:["wasm"]})}}function validateInputs(St,e){const en=Object.create(null),tn=[];for(const on of St.inputNames){const un=e[on];if(!(un instanceof Tensor)){tn.push(on);continue}en[on]=env.wasm.proxy?un.clone():un}if(tn.length>0)throw new Error(`An error occurred during model execution: "Missing the following inputs: ${tn.join(", ")}.`);const nn=Object.keys(e).length,sn=St.inputNames.length;if(nn>sn){let on=Object.keys(e).filter(un=>!St.inputNames.includes(un));console.warn(`WARNING: Too many inputs were provided (${nn} > ${sn}). The following inputs will be ignored: "${on.join(", ")}".`)}return en}async function sessionRun(St,e){const en=validateInputs(St,e);try{let tn=await St.run(en);return tn=replaceTensors(tn),tn}catch(tn){throw console.error(`An error occurred during model execution: "${tn}".`),console.error("Inputs given to model:",en),tn}}function replaceTensors(St){for(let e in St)St[e]instanceof ONNXTensor?St[e]=new Tensor(St[e]):typeof St[e]=="object"&&replaceTensors(St[e]);return St}function toI64Tensor(St){if(St instanceof Tensor)return St;if(St.length===0)throw Error("items must be non-empty");if(Array.isArray(St[0])){if(St.some(e=>e.length!==St[0].length))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=True' and/or 'truncation=True' to have batched tensors with the same length.");return new Tensor("int64",BigInt64Array.from(St.flat().map(e=>BigInt(e))),[St.length,St[0].length])}else return new Tensor("int64",BigInt64Array.from(St.map(e=>BigInt(e))),[1,St.length])}function prepareAttentionMask(St,e){let en=St.config.pad_token_id??null,tn=St.config.eos_token_id??null;isIntegralNumber(tn)&&(tn=[tn]);let nn=e.indexOf(en)!==-1,sn=tn===null||!tn.includes(en);if(nn&&sn){let on=BigInt64Array.from(e.data.map(un=>un!=en));return new Tensor("int64",on,e.dims)}else return ones_like(e)}function preparePositionIds(St,e,en){if(!St.inputNames.includes("position_ids"))return;const tn=new BigInt64Array(e.attention_mask.data.length);for(let nn=0;nn<e.attention_mask.dims[0];++nn){let sn=nn*e.attention_mask.dims[1],on=BigInt(0);for(let un=0;un<e.attention_mask.dims[1];++un){const dn=sn+un;e.attention_mask.data[dn]===0n?tn[dn]=BigInt(1):(tn[dn]=on,on+=e.attention_mask.data[dn])}}e.position_ids=new Tensor("int64",tn,e.attention_mask.dims),en&&(e.position_ids=e.position_ids.slice(null,-1).unsqueeze_(-1))}function boolTensor(St){return new Tensor("bool",[St],[1])}async function seq2seqForward(St,e){let{encoder_outputs:en,past_key_values:tn}=e;en||(en=(await encoderForward(St,e)).last_hidden_state);let nn={input_ids:e.decoder_input_ids,encoder_hidden_states:en};const sn=!!tn;St.decoder_merged_session.inputNames.includes("use_cache_branch")&&(nn.use_cache_branch=boolTensor(sn)),St.decoder_merged_session.inputNames.includes("encoder_attention_mask")&&(nn.encoder_attention_mask=e.attention_mask),preparePositionIds(St.decoder_merged_session,nn,sn),St.addPastKeyValues(nn,tn);const on=await sessionRun(St.decoder_merged_session,nn);let un=on.logits;tn=St.getPastKeyValues(on,tn);const dn=St.getAttentions(on);return new Seq2SeqLMOutput({logits:un,past_key_values:tn,encoder_outputs:en,...dn})}function seq2seqStartBeams(St,e,en,tn){let nn=[],sn=0;const on=St.requires_attention_mask??!0;let un=en.decoder_input_ids??en.decoder_start_token_id??en.bos_token_id??en.eos_token_id;un instanceof Tensor?un=un.tolist().flat():Array.isArray(un)||(un=[un]);for(let dn of e){dn.dims=[1,...dn.dims];let fn={inputs:dn,encoder_outputs:null,prev_model_outputs:null,output_token_ids:un,done:!1,score:0,id:sn++};on&&(fn.attention_mask=prepareAttentionMask(St,dn)),nn.push(fn)}return nn}async function seq2seqRunBeam(St,e){var on;const en=St.main_input_name;let tn=e.output_token_ids;e.prev_model_outputs&&(tn=tn.slice(-1));let nn={[en]:e.inputs,decoder_input_ids:toI64Tensor(tn),encoder_outputs:e.encoder_outputs,past_key_values:(on=e.prev_model_outputs)==null?void 0:on.past_key_values};e.attention_mask&&(nn.attention_mask=e.attention_mask);let sn=await St.forward(nn);return e.prev_model_outputs=sn,e.encoder_outputs=sn.encoder_outputs,sn}function seq2seqUpdatebeam(St,e){St.output_token_ids=[...St.output_token_ids,e]}async function encoderForward(St,e){const en=Object.create(null);for(const tn of St.session.inputNames)en[tn]=e[tn];return St.session.inputNames.includes("token_type_ids")&&!en.token_type_ids&&(en.token_type_ids=new Tensor("int64",new BigInt64Array(en.input_ids.data.length),en.input_ids.dims)),await sessionRun(St.session,en)}async function decoderForward(St,e){let{input_ids:en,past_key_values:tn,attention_mask:nn}=e,sn={input_ids:en,attention_mask:nn??prepareAttentionMask(St,en)};const on=!!tn;St.session.inputNames.includes("use_cache_branch")&&(sn.use_cache_branch=boolTensor(on)),preparePositionIds(St.session,sn,on),St.addPastKeyValues(sn,tn);let un=await sessionRun(St.session,sn),dn=un.logits;return tn=St.getPastKeyValues(un,tn),{logits:dn,past_key_values:tn}}function decoderStartBeams(St,e,en,tn,nn){let sn=[],on=0;for(let un of e){let dn=un.tolist().map(Number);un.dims=[1,...un.dims];let fn;nn?(fn=nn[on],fn.dims=[1,...fn.dims]):fn=prepareAttentionMask(St,un);let hn={input:un,model_input_ids:un,attention_mask:fn,prev_model_outputs:null,output_token_ids:dn,num_output_tokens:tn,done:!1,score:0,id:on++};sn.push(hn)}return sn}async function decoderRunBeam(St,e){var sn;let en=new BigInt64Array(e.output_token_ids.length).fill(1n),tn={input_ids:e.model_input_ids,attention_mask:new Tensor("int64",en,[1,en.length]),past_key_values:(sn=e.prev_model_outputs)==null?void 0:sn.past_key_values},nn=await St.forward(tn);return e.prev_model_outputs=nn,nn}function decoderUpdatebeam(St,e){St.output_token_ids=[...St.output_token_ids,e],St.model_input_ids=new Tensor("int64",[BigInt(e)],[1,1])}class PreTrainedModel extends Callable{constructor(en,tn){super();Mr(this,"main_input_name","input_ids");this.config=en,this.session=tn;const nn=MODEL_CLASS_TO_NAME_MAPPING.get(this.constructor),sn=MODEL_TYPE_MAPPING.get(nn);this.can_generate=!1,this._runBeam=null,this._getStartBeams=null,this._updateBeam=null,this._forward=null,sn===MODEL_TYPES.DecoderOnly?(this.can_generate=!0,this._runBeam=decoderRunBeam,this._getStartBeams=decoderStartBeams,this._updateBeam=decoderUpdatebeam,this._forward=decoderForward):sn===MODEL_TYPES.Seq2Seq||sn===MODEL_TYPES.Vision2Seq?(this.can_generate=!0,this._runBeam=seq2seqRunBeam,this._getStartBeams=seq2seqStartBeams,this._updateBeam=seq2seqUpdatebeam,this._forward=seq2seqForward):sn===MODEL_TYPES.EncoderDecoder?this._forward=encoderForward:this._forward=encoderForward}async dispose(){const en=[];for(let tn of Object.keys(this)){const nn=this[tn];nn instanceof InferenceSession&&en.push(nn.handler.dispose())}return await Promise.all(en)}static async from_pretrained(en,{quantized:tn=!0,progress_callback:nn=null,config:sn=null,cache_dir:on=null,local_files_only:un=!1,revision:dn="main",model_file_name:fn=null}={}){let hn={quantized:tn,progress_callback:nn,config:sn,cache_dir:on,local_files_only:un,revision:dn,model_file_name:fn};const an=MODEL_CLASS_TO_NAME_MAPPING.get(this),rn=MODEL_TYPE_MAPPING.get(an);let cn;return rn===MODEL_TYPES.DecoderOnly?cn=await Promise.all([AutoConfig.from_pretrained(en,hn),constructSession(en,hn.model_file_name??"decoder_model_merged",hn),getModelJSON(en,"generation_config.json",!1,hn)]):rn===MODEL_TYPES.Seq2Seq||rn===MODEL_TYPES.Vision2Seq?cn=await Promise.all([AutoConfig.from_pretrained(en,hn),constructSession(en,"encoder_model",hn),constructSession(en,"decoder_model_merged",hn),getModelJSON(en,"generation_config.json",!1,hn)]):rn===MODEL_TYPES.MaskGeneration?cn=await Promise.all([AutoConfig.from_pretrained(en,hn),constructSession(en,"vision_encoder",hn),constructSession(en,"prompt_encoder_mask_decoder",hn)]):rn===MODEL_TYPES.EncoderDecoder?cn=await Promise.all([AutoConfig.from_pretrained(en,hn),constructSession(en,"encoder_model",hn),constructSession(en,"decoder_model_merged",hn)]):(rn!==MODEL_TYPES.EncoderOnly&&console.warn(`Model type for '${an??(sn==null?void 0:sn.model_type)}' not found, assuming encoder-only architecture. Please report this at https://github.com/xenova/transformers.js/issues/new/choose.`),cn=await Promise.all([AutoConfig.from_pretrained(en,hn),constructSession(en,hn.model_file_name??"model",hn)])),new this(...cn)}async _call(en){return await this.forward(en)}async forward(en){return await this._forward(this,en)}_get_logits_processor(en,tn,nn=null){const sn=new LogitsProcessorList;if(en.repetition_penalty!==null&&en.repetition_penalty!==1&&sn.push(new RepetitionPenaltyLogitsProcessor(en.repetition_penalty)),en.no_repeat_ngram_size!==null&&en.no_repeat_ngram_size>0&&sn.push(new NoRepeatNGramLogitsProcessor(en.no_repeat_ngram_size)),en.bad_words_ids!==null&&sn.push(new NoBadWordsLogitsProcessor(en.bad_words_ids,en.eos_token_id)),en.min_length!==null&&en.eos_token_id!==null&&en.min_length>0&&sn.push(new MinLengthLogitsProcessor(en.min_length,en.eos_token_id)),en.min_new_tokens!==null&&en.eos_token_id!==null&&en.min_new_tokens>0&&sn.push(new MinNewTokensLengthLogitsProcessor(tn,en.min_new_tokens,en.eos_token_id)),en.forced_bos_token_id!==null&&sn.push(new ForcedBOSTokenLogitsProcessor(en.forced_bos_token_id)),en.forced_eos_token_id!==null&&sn.push(new ForcedEOSTokenLogitsProcessor(en.max_length,en.forced_eos_token_id)),en.begin_suppress_tokens!==null){let on=tn>1||en.forced_bos_token_id===null?tn:tn+1;en.forced_decoder_ids!==null&&(on+=en.forced_decoder_ids[en.forced_decoder_ids.length-1][0]),sn.push(new SuppressTokensAtBeginLogitsProcessor(en.begin_suppress_tokens,on))}return en.forced_decoder_ids!==null&&sn.push(new ForceTokensLogitsProcessor(en.forced_decoder_ids)),nn!==null&&sn.extend(nn),sn}_get_generation_config(en){let tn=new GenerationConfig(this.config);return"generation_config"in this&&Object.assign(tn,this.generation_config),en!==null&&Object.assign(tn,en),tn}async generate(en,tn=null,nn=null,{inputs_attention_mask:sn=null}={}){if(!this.can_generate){let gn=`The current model class (${MODEL_CLASS_TO_NAME_MAPPING.get(this.constructor)}) is not compatible with \`.generate()\`, as it doesn't have a language model head.`;const yn=this.config.model_type,bn=MODEL_WITH_LM_HEAD_MAPPING_NAMES.get(yn)??MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES.get(yn)??MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES.get(yn)??MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES.get(yn);throw bn&&(gn+=` Please use the following class instead: '${bn[0]}'`),Error(gn)}if(!(en instanceof Tensor)&&!isTypedArray(en)&&!Array.isArray(en))throw Error(`\`inputs\` must be a Tensor, TypedArray, or Array, but is "${en.constructor.name}".`);let on;if(this.config.is_encoder_decoder)on=0;else if(on=en instanceof Tensor?en.dims.at(-1):en.length,on===0)throw Error("Must supply a non-empty array of input token ids.");tn=this._get_generation_config(tn),nn=nn??new LogitsProcessorList,nn=this._get_logits_processor(tn,on,nn);let un=tn.eos_token_id;un!==null&&!Array.isArray(un)&&(un=[un]);let dn=1;const fn=dn+(tn.max_new_tokens??1/0),hn=Number.isInteger(tn.max_length)&&(tn.max_new_tokens??null)===null;let an=Sampler.getSampler(tn),rn=this.getStartBeams(en,tn,dn,sn);for(;rn.some(xn=>!xn.done)&&dn<fn;){let xn=[];for(let gn of rn){if(gn.done){xn.push(gn);continue}if(hn&&gn.output_token_ids.length>=tn.max_length){gn.done=!0,xn.push(gn);continue}let yn=await this.runBeam(gn);tn.output_attentions&&this.addAttentionsToBeam(gn,yn),tn.output_scores;let bn=yn.logits.slice(null,-1,null);nn(gn.output_token_ids,bn);let wn=an(bn);for(let[_n,Tn]of wn){let An={...gn};this.updateBeam(An,_n),An.score+=Tn,un&&un.includes(_n)&&(An.done=!0),xn.push(An)}}++dn,xn=this.groupBeams(xn).map(gn=>gn.sort((yn,bn)=>bn.score-yn.score).slice(0,tn.num_beams)),rn=xn.flat(),tn.callback_function&&tn.callback_function(rn)}const cn=this.groupBeams(rn),pn=xn=>cn.map(gn=>tn.num_return_sequences>1?gn.slice(0,tn.num_return_sequences).map(yn=>yn[xn]):[gn[0][xn]]).flat(),mn=pn("output_token_ids");if(tn.return_dict_in_generate){const xn=pn("decoder_attentions"),gn=pn("cross_attentions");return{sequences:mn,decoder_attentions:xn,cross_attentions:gn}}else return mn}addAttentionsToBeam(en,tn){if(this.config.is_encoder_decoder){if(!tn.cross_attentions||tn.cross_attentions.length===0)throw Error("`output_attentions` is true, but the model did not produce cross-attentions. This is most likely because the model was not exported with `output_attentions=True`.");en.cross_attentions||(en.cross_attentions=[]),en.cross_attentions.push(tn.cross_attentions)}if(!tn.decoder_attentions||tn.decoder_attentions.length===0)throw Error("`output_attentions` is true, but the model did not produce decoder-attentions. This is most likely because the model was not exported with `output_attentions=True`.");en.decoder_attentions||(en.decoder_attentions=[]),en.decoder_attentions.push(tn.decoder_attentions)}groupBeams(en){const tn=Object.create(null);for(const nn of en)tn[nn.id]===void 0?tn[nn.id]=[nn]:tn[nn.id].push(nn);return Object.values(tn)}getPastKeyValues(en,tn){const nn=Object.create(null);for(const sn in en)if(sn.startsWith("present")){let on=sn.replace("present","past_key_values");tn&&sn.includes("encoder")?nn[on]=tn[on]:nn[on]=en[sn]}return nn}getAttentions(en){const tn=Object.create(null);for(const nn of["cross_attentions","decoder_attentions"]){const sn=[];for(const on in en)if(on.startsWith(nn)){const un=on.split(".").pop();sn[un]=en[on]}tn[nn]=sn}return tn}addPastKeyValues(en,tn){if(tn)Object.assign(en,tn);else if(this.config.is_encoder_decoder&&(this.add_encoder_pkv??!0)){let sn=[1,this.num_encoder_heads,0,this.encoder_dim_kv],on=[1,this.num_decoder_heads,0,this.decoder_dim_kv];for(let un=0;un<this.num_decoder_layers;++un)en[`past_key_values.${un}.encoder.key`]=new Tensor("float32",[],sn),en[`past_key_values.${un}.encoder.value`]=new Tensor("float32",[],sn),en[`past_key_values.${un}.decoder.key`]=new Tensor("float32",[],on),en[`past_key_values.${un}.decoder.value`]=new Tensor("float32",[],on)}else if(this.config.model_type==="falcon"){let sn=[1*this.num_heads,0,this.dim_kv];for(let on=0;on<this.num_layers;++on)en[`past_key_values.${on}.key`]=new Tensor("float32",[],sn),en[`past_key_values.${on}.value`]=new Tensor("float32",[],sn)}else if(this.config.multi_query){let sn=[1*this.num_heads,0,2*this.dim_kv];for(let on=0;on<this.num_layers;++on)en[`past_key_values.${on}.key_value`]=new Tensor("float32",[],sn)}else if(this.config.model_type==="bloom"){let sn=[1*this.num_heads,this.dim_kv,0],on=[1*this.num_heads,0,this.dim_kv];for(let un=0;un<this.num_layers;++un)en[`past_key_values.${un}.key`]=new Tensor("float32",[],sn),en[`past_key_values.${un}.value`]=new Tensor("float32",[],on)}else{let sn=[1,this.num_heads,0,this.dim_kv];for(let on=0;on<this.num_layers;++on)en[`past_key_values.${on}.key`]=new Tensor("float32",[],sn),en[`past_key_values.${on}.value`]=new Tensor("float32",[],sn)}}getStartBeams(en,tn,nn,sn){return this._getStartBeams(this,en,tn,nn,sn)}async runBeam(en){return await this._runBeam(this,en)}updateBeam(en,tn){return this._updateBeam(en,tn)}}class ModelOutput{}class BertPreTrainedModel extends PreTrainedModel{}class BertModel extends BertPreTrainedModel{}class BertForMaskedLM extends BertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class BertForSequenceClassification extends BertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class BertForTokenClassification extends BertPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class BertForQuestionAnswering extends BertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class NomicBertPreTrainedModel extends PreTrainedModel{}class NomicBertModel extends NomicBertPreTrainedModel{}class RoFormerPreTrainedModel extends PreTrainedModel{}class RoFormerModel extends RoFormerPreTrainedModel{}class RoFormerForMaskedLM extends RoFormerPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class RoFormerForSequenceClassification extends RoFormerPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class RoFormerForTokenClassification extends RoFormerPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class RoFormerForQuestionAnswering extends RoFormerPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class ConvBertPreTrainedModel extends PreTrainedModel{}class ConvBertModel extends ConvBertPreTrainedModel{}class ConvBertForMaskedLM extends ConvBertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class ConvBertForSequenceClassification extends ConvBertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class ConvBertForTokenClassification extends ConvBertPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class ConvBertForQuestionAnswering extends ConvBertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class ElectraPreTrainedModel extends PreTrainedModel{}class ElectraModel extends ElectraPreTrainedModel{}class ElectraForMaskedLM extends ElectraPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class ElectraForSequenceClassification extends ElectraPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class ElectraForTokenClassification extends ElectraPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class ElectraForQuestionAnswering extends ElectraPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class CamembertPreTrainedModel extends PreTrainedModel{}class CamembertModel extends CamembertPreTrainedModel{}class CamembertForMaskedLM extends CamembertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class CamembertForSequenceClassification extends CamembertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class CamembertForTokenClassification extends CamembertPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class CamembertForQuestionAnswering extends CamembertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class DebertaPreTrainedModel extends PreTrainedModel{}class DebertaModel extends DebertaPreTrainedModel{}class DebertaForMaskedLM extends DebertaPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class DebertaForSequenceClassification extends DebertaPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class DebertaForTokenClassification extends DebertaPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class DebertaForQuestionAnswering extends DebertaPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class DebertaV2PreTrainedModel extends PreTrainedModel{}class DebertaV2Model extends DebertaV2PreTrainedModel{}class DebertaV2ForMaskedLM extends DebertaV2PreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class DebertaV2ForSequenceClassification extends DebertaV2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class DebertaV2ForTokenClassification extends DebertaV2PreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class DebertaV2ForQuestionAnswering extends DebertaV2PreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class DistilBertPreTrainedModel extends PreTrainedModel{}class DistilBertModel extends DistilBertPreTrainedModel{}class DistilBertForSequenceClassification extends DistilBertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class DistilBertForTokenClassification extends DistilBertPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class DistilBertForQuestionAnswering extends DistilBertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class DistilBertForMaskedLM extends DistilBertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class EsmPreTrainedModel extends PreTrainedModel{}class EsmModel extends EsmPreTrainedModel{}class EsmForMaskedLM extends EsmPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class EsmForSequenceClassification extends EsmPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class EsmForTokenClassification extends EsmPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class MobileBertPreTrainedModel extends PreTrainedModel{}class MobileBertModel extends MobileBertPreTrainedModel{}class MobileBertForMaskedLM extends MobileBertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class MobileBertForSequenceClassification extends MobileBertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MobileBertForQuestionAnswering extends MobileBertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class MPNetPreTrainedModel extends PreTrainedModel{}class MPNetModel extends MPNetPreTrainedModel{}class MPNetForMaskedLM extends MPNetPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class MPNetForSequenceClassification extends MPNetPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MPNetForTokenClassification extends MPNetPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class MPNetForQuestionAnswering extends MPNetPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class SqueezeBertPreTrainedModel extends PreTrainedModel{}class SqueezeBertModel extends SqueezeBertPreTrainedModel{}class SqueezeBertForMaskedLM extends SqueezeBertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class SqueezeBertForSequenceClassification extends SqueezeBertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class SqueezeBertForQuestionAnswering extends SqueezeBertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class AlbertPreTrainedModel extends PreTrainedModel{}class AlbertModel extends AlbertPreTrainedModel{}class AlbertForSequenceClassification extends AlbertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class AlbertForQuestionAnswering extends AlbertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class AlbertForMaskedLM extends AlbertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class T5PreTrainedModel extends PreTrainedModel{}class T5Model extends T5PreTrainedModel{}class T5ForConditionalGeneration extends T5PreTrainedModel{constructor(e,en,tn,nn){super(e,en),this.decoder_merged_session=tn,this.generation_config=nn,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}class LongT5PreTrainedModel extends PreTrainedModel{}class LongT5Model extends LongT5PreTrainedModel{}class LongT5ForConditionalGeneration extends LongT5PreTrainedModel{constructor(e,en,tn,nn){super(e,en),this.decoder_merged_session=tn,this.generation_config=nn,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}class MT5PreTrainedModel extends PreTrainedModel{}class MT5Model extends MT5PreTrainedModel{}class MT5ForConditionalGeneration extends MT5PreTrainedModel{constructor(e,en,tn,nn){super(e,en),this.decoder_merged_session=tn,this.generation_config=nn,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}class BartPretrainedModel extends PreTrainedModel{}class BartModel extends BartPretrainedModel{}class BartForConditionalGeneration extends BartPretrainedModel{constructor(e,en,tn,nn){super(e,en),this.decoder_merged_session=tn,this.generation_config=nn,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class BartForSequenceClassification extends BartPretrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MBartPreTrainedModel extends PreTrainedModel{}class MBartModel extends MBartPreTrainedModel{}class MBartForConditionalGeneration extends MBartPreTrainedModel{constructor(e,en,tn,nn){super(e,en),this.decoder_merged_session=tn,this.generation_config=nn,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class MBartForSequenceClassification extends MBartPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MBartForCausalLM extends MBartPreTrainedModel{constructor(e,en,tn){super(e,en),this.generation_config=tn,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class BlenderbotPreTrainedModel extends PreTrainedModel{}class BlenderbotModel extends BlenderbotPreTrainedModel{}class BlenderbotForConditionalGeneration extends BlenderbotPreTrainedModel{constructor(e,en,tn,nn){super(e,en),this.decoder_merged_session=tn,this.generation_config=nn,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class BlenderbotSmallPreTrainedModel extends PreTrainedModel{}class BlenderbotSmallModel extends BlenderbotSmallPreTrainedModel{}class BlenderbotSmallForConditionalGeneration extends BlenderbotSmallPreTrainedModel{constructor(e,en,tn,nn){super(e,en),this.decoder_merged_session=tn,this.generation_config=nn,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class RobertaPreTrainedModel extends PreTrainedModel{}class RobertaModel extends RobertaPreTrainedModel{}class RobertaForMaskedLM extends RobertaPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class RobertaForSequenceClassification extends RobertaPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class RobertaForTokenClassification extends RobertaPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class RobertaForQuestionAnswering extends RobertaPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class XLMPreTrainedModel extends PreTrainedModel{}class XLMModel extends XLMPreTrainedModel{}class XLMWithLMHeadModel extends XLMPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class XLMForSequenceClassification extends XLMPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class XLMForTokenClassification extends XLMPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class XLMForQuestionAnswering extends XLMPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class XLMRobertaPreTrainedModel extends PreTrainedModel{}class XLMRobertaModel extends XLMRobertaPreTrainedModel{}class XLMRobertaForMaskedLM extends XLMRobertaPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class XLMRobertaForSequenceClassification extends XLMRobertaPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class XLMRobertaForTokenClassification extends XLMRobertaPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class XLMRobertaForQuestionAnswering extends XLMRobertaPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class ASTPreTrainedModel extends PreTrainedModel{}class ASTModel extends ASTPreTrainedModel{}class ASTForAudioClassification extends ASTPreTrainedModel{}class WhisperPreTrainedModel extends PreTrainedModel{}class WhisperModel extends WhisperPreTrainedModel{}class WhisperForConditionalGeneration extends WhisperPreTrainedModel{constructor(en,tn,nn,sn){super(en,tn);Mr(this,"requires_attention_mask",!1);Mr(this,"main_input_name","input_features");this.decoder_merged_session=nn,this.generation_config=sn,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}async generate(en,tn=null,nn=null){if(tn=this._get_generation_config(tn),tn.return_timestamps??(tn.return_timestamps=!1),tn.return_timestamps&&(nn=[new WhisperTimeStampLogitsProcessor(tn)]),tn.return_token_timestamps&&(tn.output_attentions=!0,tn.return_dict_in_generate=!0,tn.task==="translate"&&console.warn("Token-level timestamps may not be reliable for task 'translate'."),!tn.alignment_heads))throw new Error("Model generation config has no `alignment_heads`, token-level timestamps not available. See https://gist.github.com/hollance/42e32852f24243b748ae6bc1f985b13a on how to add this property to the generation config.");const sn=await super.generate(en,tn,nn);return tn.return_token_timestamps&&tn.alignment_heads&&(sn.token_timestamps=this._extract_token_timestamps(sn,tn.alignment_heads,tn.num_frames)),sn}_extract_token_timestamps(en,tn,nn=null,sn=.02){if(!en.cross_attentions)throw new Error("Model outputs must contain cross attentions to extract timestamps. This is most likely because the model was not exported with `output_attentions=True`.");let on=this.config.median_filter_width;on===void 0&&(console.warn("Model config has no `median_filter_width`, using default value of 7."),on=7);const un=en.cross_attentions.map(hn=>{let an=Array.from({length:this.config.decoder_layers},(gn,yn)=>cat(hn.map(bn=>bn[yn]),2)),rn=stack(tn.map(([gn,yn])=>nn?an[gn].slice(null,yn,null,[0,nn]):an[gn].slice(null,yn)));rn=rn.transpose(1,0,2,3);let[cn,pn]=std_mean(rn,-2,0,!0),mn=rn.clone();for(let gn=0;gn<mn.dims[0];++gn){let yn=mn[gn];for(let bn=0;bn<yn.dims[0];++bn){let wn=yn[bn];const _n=cn[gn][bn][0],Tn=pn[gn][bn][0];for(let An=0;An<wn.dims[0];++An){let Pn=wn[An];for(let Sn=0;Sn<Pn.data.length;++Sn)Pn.data[Sn]=(Pn.data[Sn]-Tn.data[Sn])/_n.data[Sn];Pn.data.set(medianFilter(Pn.data,on))}}}return mean(mn,1)}),dn=[en.sequences.length,en.sequences[0].length],fn=new Tensor("float32",new Float32Array(dn[0]*dn[1]),dn);for(let hn=0;hn<dn[0];++hn){const an=un[hn].neg().squeeze_(0);let[rn,cn]=dynamicTimeWarping(an),pn=Array.from({length:rn.length-1},(gn,yn)=>rn[yn+1]-rn[yn]),mn=mergeArrays([1],pn).map(gn=>!!gn),xn=[];for(let gn=0;gn<mn.length;++gn)mn[gn]&&xn.push(cn[gn]*sn);fn[hn].data.set(xn,1)}return fn}}class VisionEncoderDecoderModel extends PreTrainedModel{constructor(en,tn,nn,sn){super(en,tn);Mr(this,"main_input_name","pixel_values");this.decoder_merged_session=nn,this.generation_config=sn;const on=this.config.encoder,un=this.config.decoder,dn=on.model_type;(MODEL_MAPPING_NAMES_ENCODER_ONLY.get(dn)??MODEL_MAPPING_NAMES_ENCODER_DECODER.get(dn))||console.warn(`Model type for encoder '${dn}' not found, assuming encoder-only architecture. Please report this at https://github.com/xenova/transformers.js/issues/new/choose.`);const hn=MODEL_WITH_LM_HEAD_MAPPING_NAMES.get(un.model_type);if(!hn)throw new Error(`Unable to construct \`VisionEncoderDecoder\` due to unsupported decoder: "${this.config.decoder.model_type}"`);const an=hn[1],rn=new an(un,nn,sn);this.add_encoder_pkv="num_decoder_layers"in rn,this.add_encoder_pkv?(this.num_decoder_layers=rn.num_decoder_layers,this.num_decoder_heads=rn.num_decoder_heads,this.decoder_dim_kv=rn.decoder_dim_kv,this.num_encoder_layers=rn.num_encoder_layers,this.num_encoder_heads=rn.num_encoder_heads,this.encoder_dim_kv=rn.encoder_dim_kv):(this.num_layers=rn.num_layers,this.num_heads=rn.num_heads,this.dim_kv=rn.dim_kv)}}class CLIPPreTrainedModel extends PreTrainedModel{}class CLIPModel extends CLIPPreTrainedModel{}class CLIPTextModelWithProjection extends CLIPPreTrainedModel{static async from_pretrained(e,en={}){return en.model_file_name??(en.model_file_name="text_model"),super.from_pretrained(e,en)}}class CLIPVisionModelWithProjection extends CLIPPreTrainedModel{static async from_pretrained(e,en={}){return en.model_file_name??(en.model_file_name="vision_model"),super.from_pretrained(e,en)}}class SiglipPreTrainedModel extends PreTrainedModel{}class SiglipModel extends SiglipPreTrainedModel{}class SiglipTextModel extends SiglipPreTrainedModel{static async from_pretrained(e,en={}){return en.model_file_name??(en.model_file_name="text_model"),super.from_pretrained(e,en)}}class SiglipVisionModel extends CLIPPreTrainedModel{static async from_pretrained(e,en={}){return en.model_file_name??(en.model_file_name="vision_model"),super.from_pretrained(e,en)}}class ChineseCLIPPreTrainedModel extends PreTrainedModel{}class ChineseCLIPModel extends ChineseCLIPPreTrainedModel{}class CLIPSegPreTrainedModel extends PreTrainedModel{}class CLIPSegModel extends CLIPSegPreTrainedModel{}class CLIPSegForImageSegmentation extends CLIPSegPreTrainedModel{}class GPT2PreTrainedModel extends PreTrainedModel{constructor(e,en,tn){super(e,en),this.generation_config=tn,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class GPT2Model extends GPT2PreTrainedModel{}class GPT2LMHeadModel extends GPT2PreTrainedModel{}class GPTNeoPreTrainedModel extends PreTrainedModel{constructor(e,en,tn){super(e,en),this.generation_config=tn,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_heads,this.num_layers=this.config.num_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class GPTNeoModel extends GPTNeoPreTrainedModel{}class GPTNeoForCausalLM extends GPTNeoPreTrainedModel{}class GPTNeoXPreTrainedModel extends PreTrainedModel{constructor(e,en,tn){super(e,en),this.generation_config=tn,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class GPTNeoXModel extends GPTNeoXPreTrainedModel{}class GPTNeoXForCausalLM extends GPTNeoXPreTrainedModel{}class GPTJPreTrainedModel extends PreTrainedModel{constructor(e,en,tn){super(e,en),this.generation_config=tn,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class GPTJModel extends GPTJPreTrainedModel{}class GPTJForCausalLM extends GPTJPreTrainedModel{}class GPTBigCodePreTrainedModel extends PreTrainedModel{constructor(e,en,tn){super(e,en),this.generation_config=tn,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class GPTBigCodeModel extends GPTBigCodePreTrainedModel{}class GPTBigCodeForCausalLM extends GPTBigCodePreTrainedModel{}class CodeGenPreTrainedModel extends PreTrainedModel{constructor(e,en,tn){super(e,en),this.generation_config=tn,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class CodeGenModel extends CodeGenPreTrainedModel{}class CodeGenForCausalLM extends CodeGenPreTrainedModel{}class LlamaPreTrainedModel extends PreTrainedModel{constructor(e,en,tn){super(e,en),this.generation_config=tn,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads??this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class LlamaModel extends LlamaPreTrainedModel{}class LlamaForCausalLM extends LlamaPreTrainedModel{}class Qwen2PreTrainedModel extends PreTrainedModel{constructor(e,en,tn){super(e,en),this.generation_config=tn,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads??this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class Qwen2Model extends Qwen2PreTrainedModel{}class Qwen2ForCausalLM extends Qwen2PreTrainedModel{}class PhiPreTrainedModel extends PreTrainedModel{constructor(e,en,tn){super(e,en),this.generation_config=tn,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class PhiModel extends PhiPreTrainedModel{}class PhiForCausalLM extends PhiPreTrainedModel{}class BloomPreTrainedModel extends PreTrainedModel{constructor(e,en,tn){super(e,en),this.generation_config=tn,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.hidden_size/this.num_heads}}class BloomModel extends BloomPreTrainedModel{}class BloomForCausalLM extends BloomPreTrainedModel{}class MptPreTrainedModel extends PreTrainedModel{constructor(e,en,tn){super(e,en),this.generation_config=tn,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_heads,this.num_layers=this.config.n_layers,this.dim_kv=this.config.d_model/this.num_heads}}class MptModel extends MptPreTrainedModel{}class MptForCausalLM extends MptPreTrainedModel{}class OPTPreTrainedModel extends PreTrainedModel{constructor(e,en,tn){super(e,en),this.generation_config=tn,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class OPTModel extends OPTPreTrainedModel{}class OPTForCausalLM extends OPTPreTrainedModel{}class ViTPreTrainedModel extends PreTrainedModel{}class ViTModel extends ViTPreTrainedModel{}class ViTForImageClassification extends ViTPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class FastViTPreTrainedModel extends PreTrainedModel{}class FastViTModel extends FastViTPreTrainedModel{}class FastViTForImageClassification extends FastViTPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class VitMattePreTrainedModel extends PreTrainedModel{}class VitMatteForImageMatting extends VitMattePreTrainedModel{async _call(e){return new ImageMattingOutput(await super._call(e))}}class MobileViTPreTrainedModel extends PreTrainedModel{}class MobileViTModel extends MobileViTPreTrainedModel{}class MobileViTForImageClassification extends MobileViTPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MobileViTV2PreTrainedModel extends PreTrainedModel{}class MobileViTV2Model extends MobileViTV2PreTrainedModel{}class MobileViTV2ForImageClassification extends MobileViTV2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class OwlViTPreTrainedModel extends PreTrainedModel{}class OwlViTModel extends OwlViTPreTrainedModel{}class OwlViTForObjectDetection extends OwlViTPreTrainedModel{}class Owlv2PreTrainedModel extends PreTrainedModel{}class Owlv2Model extends Owlv2PreTrainedModel{}class Owlv2ForObjectDetection extends Owlv2PreTrainedModel{}class BeitPreTrainedModel extends PreTrainedModel{}class BeitModel extends BeitPreTrainedModel{}class BeitForImageClassification extends BeitPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class DetrPreTrainedModel extends PreTrainedModel{}class DetrModel extends DetrPreTrainedModel{}class DetrForObjectDetection extends DetrPreTrainedModel{async _call(e){return new DetrObjectDetectionOutput(await super._call(e))}}class DetrForSegmentation extends DetrPreTrainedModel{async _call(e){return new DetrSegmentationOutput(await super._call(e))}}class DetrObjectDetectionOutput extends ModelOutput{constructor({logits:e,pred_boxes:en}){super(),this.logits=e,this.pred_boxes=en}}class DetrSegmentationOutput extends ModelOutput{constructor({logits:e,pred_boxes:en,pred_masks:tn}){super(),this.logits=e,this.pred_boxes=en,this.pred_masks=tn}}class TableTransformerPreTrainedModel extends PreTrainedModel{}class TableTransformerModel extends TableTransformerPreTrainedModel{}class TableTransformerForObjectDetection extends TableTransformerPreTrainedModel{async _call(e){return new TableTransformerObjectDetectionOutput(await super._call(e))}}class TableTransformerObjectDetectionOutput extends DetrObjectDetectionOutput{}class DeiTPreTrainedModel extends PreTrainedModel{}class DeiTModel extends DeiTPreTrainedModel{}class DeiTForImageClassification extends DeiTPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class ResNetPreTrainedModel extends PreTrainedModel{}class ResNetModel extends ResNetPreTrainedModel{}class ResNetForImageClassification extends ResNetPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class SwinPreTrainedModel extends PreTrainedModel{}class SwinModel extends SwinPreTrainedModel{}class SwinForImageClassification extends SwinPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class Swin2SRPreTrainedModel extends PreTrainedModel{}class Swin2SRModel extends Swin2SRPreTrainedModel{}class Swin2SRForImageSuperResolution extends Swin2SRPreTrainedModel{}class DPTPreTrainedModel extends PreTrainedModel{}class DPTModel extends DPTPreTrainedModel{}class DPTForDepthEstimation extends DPTPreTrainedModel{}class DepthAnythingPreTrainedModel extends PreTrainedModel{}class DepthAnythingForDepthEstimation extends DepthAnythingPreTrainedModel{}class GLPNPreTrainedModel extends PreTrainedModel{}class GLPNModel extends GLPNPreTrainedModel{}class GLPNForDepthEstimation extends GLPNPreTrainedModel{}class DonutSwinPreTrainedModel extends PreTrainedModel{}class DonutSwinModel extends DonutSwinPreTrainedModel{}class ConvNextPreTrainedModel extends PreTrainedModel{}class ConvNextModel extends ConvNextPreTrainedModel{}class ConvNextForImageClassification extends ConvNextPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class ConvNextV2PreTrainedModel extends PreTrainedModel{}class ConvNextV2Model extends ConvNextV2PreTrainedModel{}class ConvNextV2ForImageClassification extends ConvNextV2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class Dinov2PreTrainedModel extends PreTrainedModel{}class Dinov2Model extends Dinov2PreTrainedModel{}class Dinov2ForImageClassification extends Dinov2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class YolosPreTrainedModel extends PreTrainedModel{}class YolosModel extends YolosPreTrainedModel{}class YolosForObjectDetection extends YolosPreTrainedModel{async _call(e){return new YolosObjectDetectionOutput(await super._call(e))}}class YolosObjectDetectionOutput extends ModelOutput{constructor({logits:e,pred_boxes:en}){super(),this.logits=e,this.pred_boxes=en}}class SamPreTrainedModel extends PreTrainedModel{}class SamModel extends SamPreTrainedModel{constructor(e,en,tn){super(e,en),this.prompt_encoder_mask_decoder=tn}async get_image_embeddings({pixel_values:e}){return await encoderForward(this,{pixel_values:e})}async forward(e){if((!e.image_embeddings||!e.image_positional_embeddings)&&(e={...e,...await this.get_image_embeddings(e)}),!e.input_labels){const en=e.input_points.dims.slice(0,-1),tn=en.reduce((nn,sn)=>nn*sn,1);e.input_labels=new Tensor("int64",new BigInt64Array(tn).fill(1n),en)}return await sessionRun(this.prompt_encoder_mask_decoder,{input_points:e.input_points,input_labels:e.input_labels,image_embeddings:e.image_embeddings,image_positional_embeddings:e.image_positional_embeddings})}async _call(e){return new SamImageSegmentationOutput(await super._call(e))}}class SamImageSegmentationOutput extends ModelOutput{constructor({iou_scores:e,pred_masks:en}){super(),this.iou_scores=e,this.pred_masks=en}}class MarianPreTrainedModel extends PreTrainedModel{}class MarianModel extends MarianPreTrainedModel{}class MarianMTModel extends MarianPreTrainedModel{constructor(e,en,tn,nn){super(e,en),this.decoder_merged_session=tn,this.generation_config=nn,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class M2M100PreTrainedModel extends PreTrainedModel{}class M2M100Model extends M2M100PreTrainedModel{}class M2M100ForConditionalGeneration extends M2M100PreTrainedModel{constructor(e,en,tn,nn){super(e,en),this.decoder_merged_session=tn,this.generation_config=nn,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class Wav2Vec2PreTrainedModel extends PreTrainedModel{}class Wav2Vec2Model extends Wav2Vec2PreTrainedModel{}class Wav2Vec2ForCTC extends Wav2Vec2PreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class Wav2Vec2ForSequenceClassification extends Wav2Vec2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class Wav2Vec2ForAudioFrameClassification extends Wav2Vec2PreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class UniSpeechPreTrainedModel extends PreTrainedModel{}class UniSpeechModel extends UniSpeechPreTrainedModel{}class UniSpeechForCTC extends UniSpeechPreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class UniSpeechForSequenceClassification extends UniSpeechPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class UniSpeechSatPreTrainedModel extends PreTrainedModel{}class UniSpeechSatModel extends UniSpeechSatPreTrainedModel{}class UniSpeechSatForCTC extends UniSpeechSatPreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class UniSpeechSatForSequenceClassification extends UniSpeechSatPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class UniSpeechSatForAudioFrameClassification extends UniSpeechSatPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class Wav2Vec2BertPreTrainedModel extends PreTrainedModel{}class Wav2Vec2BertModel extends Wav2Vec2BertPreTrainedModel{}class Wav2Vec2BertForCTC extends Wav2Vec2BertPreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class Wav2Vec2BertForSequenceClassification extends Wav2Vec2BertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class HubertModel extends Wav2Vec2PreTrainedModel{}class HubertForCTC extends Wav2Vec2PreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class HubertForSequenceClassification extends Wav2Vec2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class WavLMPreTrainedModel extends PreTrainedModel{}class WavLMModel extends WavLMPreTrainedModel{}class WavLMForCTC extends WavLMPreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class WavLMForSequenceClassification extends WavLMPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class WavLMForXVector extends WavLMPreTrainedModel{async _call(e){return new XVectorOutput(await super._call(e))}}class WavLMForAudioFrameClassification extends WavLMPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class SpeechT5PreTrainedModel extends PreTrainedModel{}class SpeechT5ForSpeechToText extends SpeechT5PreTrainedModel{}class SpeechT5ForTextToSpeech extends SpeechT5PreTrainedModel{constructor(e,en,tn,nn){super(e,en),this.decoder_merged_session=tn,this.generation_config=nn,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.hidden_size/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.hidden_size/this.num_encoder_heads}async generate_speech(e,en,{threshold:tn=.5,minlenratio:nn=0,maxlenratio:sn=20,vocoder:on=null}={}){const un={input_ids:e},{encoder_outputs:dn,encoder_attention_mask:fn}=await encoderForward(this,un),hn=dn.dims[1]/this.config.reduction_factor,an=Math.floor(hn*sn),rn=Math.floor(hn*nn),cn=this.config.num_mel_bins;let pn=[],mn=null,xn=null,gn=0;for(;;){++gn;const wn=boolTensor(!!xn);let _n;xn?_n=xn.output_sequence_out:_n=new Tensor("float32",new Float32Array(cn),[1,1,cn]);let Tn={use_cache_branch:wn,output_sequence:_n,encoder_attention_mask:fn,speaker_embeddings:en,encoder_hidden_states:dn};this.addPastKeyValues(Tn,mn),xn=await sessionRun(this.decoder_merged_session,Tn),mn=this.getPastKeyValues(xn,mn);const{prob:An,spectrum:Pn}=xn;if(pn.push(Pn),gn>=rn&&(Array.from(An.data).filter(Sn=>Sn>=tn).length>0||gn>=an))break}const yn=cat(pn),{waveform:bn}=await sessionRun(on.session,{spectrogram:yn});return{spectrogram:yn,waveform:bn}}}class SpeechT5HifiGan extends PreTrainedModel{constructor(){super(...arguments);Mr(this,"main_input_name","spectrogram")}}class TrOCRPreTrainedModel extends PreTrainedModel{constructor(e,en,tn){super(e,en),this.generation_config=tn,this.config.pad_token_id=this.config.eos_token_id,this.num_encoder_layers=this.num_decoder_layers=this.config.decoder_layers,this.num_encoder_heads=this.num_decoder_heads=this.config.decoder_attention_heads,this.encoder_dim_kv=this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads}}class TrOCRForCausalLM extends TrOCRPreTrainedModel{}class MistralPreTrainedModel extends PreTrainedModel{constructor(e,en,tn){super(e,en),this.generation_config=tn,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class MistralModel extends MistralPreTrainedModel{}class MistralForCausalLM extends MistralPreTrainedModel{}class Starcoder2PreTrainedModel extends PreTrainedModel{constructor(e,en,tn){super(e,en),this.generation_config=tn,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class Starcoder2Model extends Starcoder2PreTrainedModel{}class Starcoder2ForCausalLM extends Starcoder2PreTrainedModel{}class FalconPreTrainedModel extends PreTrainedModel{constructor(e,en,tn){super(e,en),this.generation_config=tn,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class FalconModel extends FalconPreTrainedModel{}class FalconForCausalLM extends FalconPreTrainedModel{}class ClapPreTrainedModel extends PreTrainedModel{}class ClapModel extends ClapPreTrainedModel{}class ClapTextModelWithProjection extends ClapPreTrainedModel{static async from_pretrained(e,en={}){return en.model_file_name??(en.model_file_name="text_model"),super.from_pretrained(e,en)}}class ClapAudioModelWithProjection extends ClapPreTrainedModel{static async from_pretrained(e,en={}){return en.model_file_name??(en.model_file_name="audio_model"),super.from_pretrained(e,en)}}class VitsPreTrainedModel extends PreTrainedModel{}class VitsModel extends VitsPreTrainedModel{async _call(e){return new VitsModelOutput(await super._call(e))}}class SegformerPreTrainedModel extends PreTrainedModel{}class SegformerForImageClassification extends SegformerPreTrainedModel{}class SegformerForSemanticSegmentation extends SegformerPreTrainedModel{}class StableLmPreTrainedModel extends PreTrainedModel{constructor(e,en,tn){super(e,en),this.generation_config=tn,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class StableLmForCausalLM extends StableLmPreTrainedModel{}class EfficientNetPreTrainedModel extends PreTrainedModel{}class EfficientNetModel extends EfficientNetPreTrainedModel{}class EfficientNetForImageClassification extends EfficientNetPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class PretrainedMixin{static async from_pretrained(e,{quantized:en=!0,progress_callback:tn=null,config:nn=null,cache_dir:sn=null,local_files_only:on=!1,revision:un="main",model_file_name:dn=null}={}){let fn={quantized:en,progress_callback:tn,config:nn,cache_dir:sn,local_files_only:on,revision:un,model_file_name:dn};if(nn=await AutoConfig.from_pretrained(e,fn),fn.config||(fn.config=nn),!this.MODEL_CLASS_MAPPINGS)throw new Error("`MODEL_CLASS_MAPPINGS` not implemented for this type of `AutoClass`: "+this.name);for(let hn of this.MODEL_CLASS_MAPPINGS){const an=hn.get(nn.model_type);if(an)return await an[1].from_pretrained(e,fn)}if(this.BASE_IF_FAIL)return console.warn(`Unknown model class "${nn.model_type}", attempting to construct from base class.`),await PreTrainedModel.from_pretrained(e,fn);throw Error(`Unsupported model type: ${nn.model_type}`)}}Mr(PretrainedMixin,"MODEL_CLASS_MAPPINGS",null),Mr(PretrainedMixin,"BASE_IF_FAIL",!1);const MODEL_MAPPING_NAMES_ENCODER_ONLY=new Map([["bert",["BertModel",BertModel]],["nomic_bert",["NomicBertModel",NomicBertModel]],["roformer",["RoFormerModel",RoFormerModel]],["electra",["ElectraModel",ElectraModel]],["esm",["EsmModel",EsmModel]],["convbert",["ConvBertModel",ConvBertModel]],["camembert",["CamembertModel",CamembertModel]],["deberta",["DebertaModel",DebertaModel]],["deberta-v2",["DebertaV2Model",DebertaV2Model]],["mpnet",["MPNetModel",MPNetModel]],["albert",["AlbertModel",AlbertModel]],["distilbert",["DistilBertModel",DistilBertModel]],["roberta",["RobertaModel",RobertaModel]],["xlm",["XLMModel",XLMModel]],["xlm-roberta",["XLMRobertaModel",XLMRobertaModel]],["clap",["ClapModel",ClapModel]],["clip",["CLIPModel",CLIPModel]],["clipseg",["CLIPSegModel",CLIPSegModel]],["chinese_clip",["ChineseCLIPModel",ChineseCLIPModel]],["siglip",["SiglipModel",SiglipModel]],["mobilebert",["MobileBertModel",MobileBertModel]],["squeezebert",["SqueezeBertModel",SqueezeBertModel]],["wav2vec2",["Wav2Vec2Model",Wav2Vec2Model]],["wav2vec2-bert",["Wav2Vec2BertModel",Wav2Vec2BertModel]],["unispeech",["UniSpeechModel",UniSpeechModel]],["unispeech-sat",["UniSpeechSatModel",UniSpeechSatModel]],["hubert",["HubertModel",HubertModel]],["wavlm",["WavLMModel",WavLMModel]],["audio-spectrogram-transformer",["ASTModel",ASTModel]],["vits",["VitsModel",VitsModel]],["detr",["DetrModel",DetrModel]],["table-transformer",["TableTransformerModel",TableTransformerModel]],["vit",["ViTModel",ViTModel]],["fastvit",["FastViTModel",FastViTModel]],["mobilevit",["MobileViTModel",MobileViTModel]],["mobilevitv2",["MobileViTV2Model",MobileViTV2Model]],["owlvit",["OwlViTModel",OwlViTModel]],["owlv2",["Owlv2Model",Owlv2Model]],["beit",["BeitModel",BeitModel]],["deit",["DeiTModel",DeiTModel]],["convnext",["ConvNextModel",ConvNextModel]],["convnextv2",["ConvNextV2Model",ConvNextV2Model]],["dinov2",["Dinov2Model",Dinov2Model]],["resnet",["ResNetModel",ResNetModel]],["swin",["SwinModel",SwinModel]],["swin2sr",["Swin2SRModel",Swin2SRModel]],["donut-swin",["DonutSwinModel",DonutSwinModel]],["yolos",["YolosModel",YolosModel]],["dpt",["DPTModel",DPTModel]],["glpn",["GLPNModel",GLPNModel]],["hifigan",["SpeechT5HifiGan",SpeechT5HifiGan]],["efficientnet",["EfficientNetModel",EfficientNetModel]]]),MODEL_MAPPING_NAMES_ENCODER_DECODER=new Map([["t5",["T5Model",T5Model]],["longt5",["LongT5Model",LongT5Model]],["mt5",["MT5Model",MT5Model]],["bart",["BartModel",BartModel]],["mbart",["MBartModel",MBartModel]],["marian",["MarianModel",MarianModel]],["whisper",["WhisperModel",WhisperModel]],["m2m_100",["M2M100Model",M2M100Model]],["blenderbot",["BlenderbotModel",BlenderbotModel]],["blenderbot-small",["BlenderbotSmallModel",BlenderbotSmallModel]]]),MODEL_MAPPING_NAMES_DECODER_ONLY=new Map([["bloom",["BloomModel",BloomModel]],["gpt2",["GPT2Model",GPT2Model]],["gptj",["GPTJModel",GPTJModel]],["gpt_bigcode",["GPTBigCodeModel",GPTBigCodeModel]],["gpt_neo",["GPTNeoModel",GPTNeoModel]],["gpt_neox",["GPTNeoXModel",GPTNeoXModel]],["codegen",["CodeGenModel",CodeGenModel]],["llama",["LlamaModel",LlamaModel]],["qwen2",["Qwen2Model",Qwen2Model]],["phi",["PhiModel",PhiModel]],["mpt",["MptModel",MptModel]],["opt",["OPTModel",OPTModel]],["mistral",["MistralModel",MistralModel]],["starcoder2",["Starcoder2Model",Starcoder2Model]],["falcon",["FalconModel",FalconModel]]]),MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES=new Map([["speecht5",["SpeechT5ForSpeechToText",SpeechT5ForSpeechToText]],["whisper",["WhisperForConditionalGeneration",WhisperForConditionalGeneration]]]),MODEL_FOR_TEXT_TO_SPECTROGRAM_MAPPING_NAMES=new Map([["speecht5",["SpeechT5ForTextToSpeech",SpeechT5ForTextToSpeech]]]),MODEL_FOR_TEXT_TO_WAVEFORM_MAPPING_NAMES=new Map([["vits",["VitsModel",VitsModel]]]),MODEL_FOR_SEQUENCE_CLASSIFICATION_MAPPING_NAMES=new Map([["bert",["BertForSequenceClassification",BertForSequenceClassification]],["roformer",["RoFormerForSequenceClassification",RoFormerForSequenceClassification]],["electra",["ElectraForSequenceClassification",ElectraForSequenceClassification]],["esm",["EsmForSequenceClassification",EsmForSequenceClassification]],["convbert",["ConvBertForSequenceClassification",ConvBertForSequenceClassification]],["camembert",["CamembertForSequenceClassification",CamembertForSequenceClassification]],["deberta",["DebertaForSequenceClassification",DebertaForSequenceClassification]],["deberta-v2",["DebertaV2ForSequenceClassification",DebertaV2ForSequenceClassification]],["mpnet",["MPNetForSequenceClassification",MPNetForSequenceClassification]],["albert",["AlbertForSequenceClassification",AlbertForSequenceClassification]],["distilbert",["DistilBertForSequenceClassification",DistilBertForSequenceClassification]],["roberta",["RobertaForSequenceClassification",RobertaForSequenceClassification]],["xlm",["XLMForSequenceClassification",XLMForSequenceClassification]],["xlm-roberta",["XLMRobertaForSequenceClassification",XLMRobertaForSequenceClassification]],["bart",["BartForSequenceClassification",BartForSequenceClassification]],["mbart",["MBartForSequenceClassification",MBartForSequenceClassification]],["mobilebert",["MobileBertForSequenceClassification",MobileBertForSequenceClassification]],["squeezebert",["SqueezeBertForSequenceClassification",SqueezeBertForSequenceClassification]]]),MODEL_FOR_TOKEN_CLASSIFICATION_MAPPING_NAMES=new Map([["bert",["BertForTokenClassification",BertForTokenClassification]],["roformer",["RoFormerForTokenClassification",RoFormerForTokenClassification]],["electra",["ElectraForTokenClassification",ElectraForTokenClassification]],["esm",["EsmForTokenClassification",EsmForTokenClassification]],["convbert",["ConvBertForTokenClassification",ConvBertForTokenClassification]],["camembert",["CamembertForTokenClassification",CamembertForTokenClassification]],["deberta",["DebertaForTokenClassification",DebertaForTokenClassification]],["deberta-v2",["DebertaV2ForTokenClassification",DebertaV2ForTokenClassification]],["mpnet",["MPNetForTokenClassification",MPNetForTokenClassification]],["distilbert",["DistilBertForTokenClassification",DistilBertForTokenClassification]],["roberta",["RobertaForTokenClassification",RobertaForTokenClassification]],["xlm",["XLMForTokenClassification",XLMForTokenClassification]],["xlm-roberta",["XLMRobertaForTokenClassification",XLMRobertaForTokenClassification]]]),MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES=new Map([["t5",["T5ForConditionalGeneration",T5ForConditionalGeneration]],["longt5",["LongT5ForConditionalGeneration",LongT5ForConditionalGeneration]],["mt5",["MT5ForConditionalGeneration",MT5ForConditionalGeneration]],["bart",["BartForConditionalGeneration",BartForConditionalGeneration]],["mbart",["MBartForConditionalGeneration",MBartForConditionalGeneration]],["marian",["MarianMTModel",MarianMTModel]],["m2m_100",["M2M100ForConditionalGeneration",M2M100ForConditionalGeneration]],["blenderbot",["BlenderbotForConditionalGeneration",BlenderbotForConditionalGeneration]],["blenderbot-small",["BlenderbotSmallForConditionalGeneration",BlenderbotSmallForConditionalGeneration]]]),MODEL_WITH_LM_HEAD_MAPPING_NAMES=new Map([["bloom",["BloomForCausalLM",BloomForCausalLM]],["gpt2",["GPT2LMHeadModel",GPT2LMHeadModel]],["gptj",["GPTJForCausalLM",GPTJForCausalLM]],["gpt_bigcode",["GPTBigCodeForCausalLM",GPTBigCodeForCausalLM]],["gpt_neo",["GPTNeoForCausalLM",GPTNeoForCausalLM]],["gpt_neox",["GPTNeoXForCausalLM",GPTNeoXForCausalLM]],["codegen",["CodeGenForCausalLM",CodeGenForCausalLM]],["llama",["LlamaForCausalLM",LlamaForCausalLM]],["qwen2",["Qwen2ForCausalLM",Qwen2ForCausalLM]],["phi",["PhiForCausalLM",PhiForCausalLM]],["mpt",["MptForCausalLM",MptForCausalLM]],["opt",["OPTForCausalLM",OPTForCausalLM]],["mbart",["MBartForCausalLM",MBartForCausalLM]],["mistral",["MistralForCausalLM",MistralForCausalLM]],["starcoder2",["Starcoder2ForCausalLM",Starcoder2ForCausalLM]],["falcon",["FalconForCausalLM",FalconForCausalLM]],["trocr",["TrOCRForCausalLM",TrOCRForCausalLM]],["stablelm",["StableLmForCausalLM",StableLmForCausalLM]]]),MODEL_FOR_MASKED_LM_MAPPING_NAMES=new Map([["bert",["BertForMaskedLM",BertForMaskedLM]],["roformer",["RoFormerForMaskedLM",RoFormerForMaskedLM]],["electra",["ElectraForMaskedLM",ElectraForMaskedLM]],["esm",["EsmForMaskedLM",EsmForMaskedLM]],["convbert",["ConvBertForMaskedLM",ConvBertForMaskedLM]],["camembert",["CamembertForMaskedLM",CamembertForMaskedLM]],["deberta",["DebertaForMaskedLM",DebertaForMaskedLM]],["deberta-v2",["DebertaV2ForMaskedLM",DebertaV2ForMaskedLM]],["mpnet",["MPNetForMaskedLM",MPNetForMaskedLM]],["albert",["AlbertForMaskedLM",AlbertForMaskedLM]],["distilbert",["DistilBertForMaskedLM",DistilBertForMaskedLM]],["roberta",["RobertaForMaskedLM",RobertaForMaskedLM]],["xlm",["XLMWithLMHeadModel",XLMWithLMHeadModel]],["xlm-roberta",["XLMRobertaForMaskedLM",XLMRobertaForMaskedLM]],["mobilebert",["MobileBertForMaskedLM",MobileBertForMaskedLM]],["squeezebert",["SqueezeBertForMaskedLM",SqueezeBertForMaskedLM]]]),MODEL_FOR_QUESTION_ANSWERING_MAPPING_NAMES=new Map([["bert",["BertForQuestionAnswering",BertForQuestionAnswering]],["roformer",["RoFormerForQuestionAnswering",RoFormerForQuestionAnswering]],["electra",["ElectraForQuestionAnswering",ElectraForQuestionAnswering]],["convbert",["ConvBertForQuestionAnswering",ConvBertForQuestionAnswering]],["camembert",["CamembertForQuestionAnswering",CamembertForQuestionAnswering]],["deberta",["DebertaForQuestionAnswering",DebertaForQuestionAnswering]],["deberta-v2",["DebertaV2ForQuestionAnswering",DebertaV2ForQuestionAnswering]],["mpnet",["MPNetForQuestionAnswering",MPNetForQuestionAnswering]],["albert",["AlbertForQuestionAnswering",AlbertForQuestionAnswering]],["distilbert",["DistilBertForQuestionAnswering",DistilBertForQuestionAnswering]],["roberta",["RobertaForQuestionAnswering",RobertaForQuestionAnswering]],["xlm",["XLMForQuestionAnswering",XLMForQuestionAnswering]],["xlm-roberta",["XLMRobertaForQuestionAnswering",XLMRobertaForQuestionAnswering]],["mobilebert",["MobileBertForQuestionAnswering",MobileBertForQuestionAnswering]],["squeezebert",["SqueezeBertForQuestionAnswering",SqueezeBertForQuestionAnswering]]]),MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",VisionEncoderDecoderModel]]]),MODEL_FOR_DOCUMENT_QUESTION_ANSWERING_MAPPING_NAMES=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",VisionEncoderDecoderModel]]]),MODEL_FOR_IMAGE_CLASSIFICATION_MAPPING_NAMES=new Map([["vit",["ViTForImageClassification",ViTForImageClassification]],["fastvit",["FastViTForImageClassification",FastViTForImageClassification]],["mobilevit",["MobileViTForImageClassification",MobileViTForImageClassification]],["mobilevitv2",["MobileViTV2ForImageClassification",MobileViTV2ForImageClassification]],["beit",["BeitForImageClassification",BeitForImageClassification]],["deit",["DeiTForImageClassification",DeiTForImageClassification]],["convnext",["ConvNextForImageClassification",ConvNextForImageClassification]],["convnextv2",["ConvNextV2ForImageClassification",ConvNextV2ForImageClassification]],["dinov2",["Dinov2ForImageClassification",Dinov2ForImageClassification]],["resnet",["ResNetForImageClassification",ResNetForImageClassification]],["swin",["SwinForImageClassification",SwinForImageClassification]],["segformer",["SegformerForImageClassification",SegformerForImageClassification]],["efficientnet",["EfficientNetForImageClassification",EfficientNetForImageClassification]]]),MODEL_FOR_OBJECT_DETECTION_MAPPING_NAMES=new Map([["detr",["DetrForObjectDetection",DetrForObjectDetection]],["table-transformer",["TableTransformerForObjectDetection",TableTransformerForObjectDetection]],["yolos",["YolosForObjectDetection",YolosForObjectDetection]]]),MODEL_FOR_ZERO_SHOT_OBJECT_DETECTION_MAPPING_NAMES=new Map([["owlvit",["OwlViTForObjectDetection",OwlViTForObjectDetection]],["owlv2",["Owlv2ForObjectDetection",Owlv2ForObjectDetection]]]),MODEL_FOR_IMAGE_SEGMENTATION_MAPPING_NAMES=new Map([["detr",["DetrForSegmentation",DetrForSegmentation]],["clipseg",["CLIPSegForImageSegmentation",CLIPSegForImageSegmentation]]]),MODEL_FOR_SEMANTIC_SEGMENTATION_MAPPING_NAMES=new Map([["segformer",["SegformerForSemanticSegmentation",SegformerForSemanticSegmentation]]]),MODEL_FOR_MASK_GENERATION_MAPPING_NAMES=new Map([["sam",["SamModel",SamModel]]]),MODEL_FOR_CTC_MAPPING_NAMES=new Map([["wav2vec2",["Wav2Vec2ForCTC",Wav2Vec2ForCTC]],["wav2vec2-bert",["Wav2Vec2BertForCTC",Wav2Vec2BertForCTC]],["unispeech",["UniSpeechForCTC",UniSpeechForCTC]],["unispeech-sat",["UniSpeechSatForCTC",UniSpeechSatForCTC]],["wavlm",["WavLMForCTC",WavLMForCTC]],["hubert",["HubertForCTC",HubertForCTC]]]),MODEL_FOR_AUDIO_CLASSIFICATION_MAPPING_NAMES=new Map([["wav2vec2",["Wav2Vec2ForSequenceClassification",Wav2Vec2ForSequenceClassification]],["wav2vec2-bert",["Wav2Vec2BertForSequenceClassification",Wav2Vec2BertForSequenceClassification]],["unispeech",["UniSpeechForSequenceClassification",UniSpeechForSequenceClassification]],["unispeech-sat",["UniSpeechSatForSequenceClassification",UniSpeechSatForSequenceClassification]],["wavlm",["WavLMForSequenceClassification",WavLMForSequenceClassification]],["hubert",["HubertForSequenceClassification",HubertForSequenceClassification]],["audio-spectrogram-transformer",["ASTForAudioClassification",ASTForAudioClassification]]]),MODEL_FOR_AUDIO_XVECTOR_MAPPING_NAMES=new Map([["wavlm",["WavLMForXVector",WavLMForXVector]]]),MODEL_FOR_AUDIO_FRAME_CLASSIFICATION_MAPPING_NAMES=new Map([["unispeech-sat",["UniSpeechSatForAudioFrameClassification",UniSpeechSatForAudioFrameClassification]],["wavlm",["WavLMForAudioFrameClassification",WavLMForAudioFrameClassification]],["wav2vec2",["Wav2Vec2ForAudioFrameClassification",Wav2Vec2ForAudioFrameClassification]]]),MODEL_FOR_IMAGE_MATTING_MAPPING_NAMES=new Map([["vitmatte",["VitMatteForImageMatting",VitMatteForImageMatting]]]),MODEL_FOR_IMAGE_TO_IMAGE_MAPPING_NAMES=new Map([["swin2sr",["Swin2SRForImageSuperResolution",Swin2SRForImageSuperResolution]]]),MODEL_FOR_DEPTH_ESTIMATION_MAPPING_NAMES=new Map([["dpt",["DPTForDepthEstimation",DPTForDepthEstimation]],["depth_anything",["DepthAnythingForDepthEstimation",DepthAnythingForDepthEstimation]],["glpn",["GLPNForDepthEstimation",GLPNForDepthEstimation]]]),MODEL_FOR_IMAGE_FEATURE_EXTRACTION_MAPPING_NAMES=new Map([["clip",["CLIPVisionModelWithProjection",CLIPVisionModelWithProjection]],["siglip",["SiglipVisionModel",SiglipVisionModel]]]),MODEL_CLASS_TYPE_MAPPING=[[MODEL_MAPPING_NAMES_ENCODER_ONLY,MODEL_TYPES.EncoderOnly],[MODEL_MAPPING_NAMES_ENCODER_DECODER,MODEL_TYPES.EncoderDecoder],[MODEL_MAPPING_NAMES_DECODER_ONLY,MODEL_TYPES.DecoderOnly],[MODEL_FOR_SEQUENCE_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_TOKEN_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES,MODEL_TYPES.Seq2Seq],[MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES,MODEL_TYPES.Seq2Seq],[MODEL_WITH_LM_HEAD_MAPPING_NAMES,MODEL_TYPES.DecoderOnly],[MODEL_FOR_MASKED_LM_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_QUESTION_ANSWERING_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES,MODEL_TYPES.Vision2Seq],[MODEL_FOR_IMAGE_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_SEGMENTATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_SEMANTIC_SEGMENTATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_MATTING_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_TO_IMAGE_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_DEPTH_ESTIMATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_OBJECT_DETECTION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_ZERO_SHOT_OBJECT_DETECTION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_MASK_GENERATION_MAPPING_NAMES,MODEL_TYPES.MaskGeneration],[MODEL_FOR_CTC_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_AUDIO_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_TEXT_TO_SPECTROGRAM_MAPPING_NAMES,MODEL_TYPES.Seq2Seq],[MODEL_FOR_TEXT_TO_WAVEFORM_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_AUDIO_XVECTOR_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_AUDIO_FRAME_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_FEATURE_EXTRACTION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly]];for(const[St,e]of MODEL_CLASS_TYPE_MAPPING)for(const[en,tn]of St.values())MODEL_TYPE_MAPPING.set(en,e),MODEL_CLASS_TO_NAME_MAPPING.set(tn,en),MODEL_NAME_TO_CLASS_MAPPING.set(en,tn);const CUSTOM_MAPPING=[["CLIPTextModelWithProjection",CLIPTextModelWithProjection,MODEL_TYPES.EncoderOnly],["SiglipTextModel",SiglipTextModel,MODEL_TYPES.EncoderOnly],["ClapTextModelWithProjection",ClapTextModelWithProjection,MODEL_TYPES.EncoderOnly],["ClapAudioModelWithProjection",ClapAudioModelWithProjection,MODEL_TYPES.EncoderOnly]];for(const[St,e,en]of CUSTOM_MAPPING)MODEL_TYPE_MAPPING.set(St,en),MODEL_CLASS_TO_NAME_MAPPING.set(e,St),MODEL_NAME_TO_CLASS_MAPPING.set(St,e);class AutoModel extends PretrainedMixin{}Mr(AutoModel,"MODEL_CLASS_MAPPINGS",MODEL_CLASS_TYPE_MAPPING.map(e=>e[0])),Mr(AutoModel,"BASE_IF_FAIL",!0);class AutoModelForSequenceClassification extends PretrainedMixin{}Mr(AutoModelForSequenceClassification,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_SEQUENCE_CLASSIFICATION_MAPPING_NAMES]);class AutoModelForTokenClassification extends PretrainedMixin{}Mr(AutoModelForTokenClassification,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_TOKEN_CLASSIFICATION_MAPPING_NAMES]);class AutoModelForSeq2SeqLM extends PretrainedMixin{}Mr(AutoModelForSeq2SeqLM,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES]);class AutoModelForSpeechSeq2Seq extends PretrainedMixin{}Mr(AutoModelForSpeechSeq2Seq,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES]);class AutoModelForTextToSpectrogram extends PretrainedMixin{}Mr(AutoModelForTextToSpectrogram,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_TEXT_TO_SPECTROGRAM_MAPPING_NAMES]);class AutoModelForTextToWaveform extends PretrainedMixin{}Mr(AutoModelForTextToWaveform,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_TEXT_TO_WAVEFORM_MAPPING_NAMES]);class AutoModelForCausalLM extends PretrainedMixin{}Mr(AutoModelForCausalLM,"MODEL_CLASS_MAPPINGS",[MODEL_WITH_LM_HEAD_MAPPING_NAMES]);class AutoModelForMaskedLM extends PretrainedMixin{}Mr(AutoModelForMaskedLM,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_MASKED_LM_MAPPING_NAMES]);class AutoModelForQuestionAnswering extends PretrainedMixin{}Mr(AutoModelForQuestionAnswering,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_QUESTION_ANSWERING_MAPPING_NAMES]);class AutoModelForVision2Seq extends PretrainedMixin{}Mr(AutoModelForVision2Seq,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES]);class AutoModelForImageClassification extends PretrainedMixin{}Mr(AutoModelForImageClassification,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_IMAGE_CLASSIFICATION_MAPPING_NAMES]);class AutoModelForImageSegmentation extends PretrainedMixin{}Mr(AutoModelForImageSegmentation,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_IMAGE_SEGMENTATION_MAPPING_NAMES]);class AutoModelForSemanticSegmentation extends PretrainedMixin{}Mr(AutoModelForSemanticSegmentation,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_SEMANTIC_SEGMENTATION_MAPPING_NAMES]);class AutoModelForObjectDetection extends PretrainedMixin{}Mr(AutoModelForObjectDetection,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_OBJECT_DETECTION_MAPPING_NAMES]);class AutoModelForZeroShotObjectDetection extends PretrainedMixin{}Mr(AutoModelForZeroShotObjectDetection,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_ZERO_SHOT_OBJECT_DETECTION_MAPPING_NAMES]);class AutoModelForCTC extends PretrainedMixin{}Mr(AutoModelForCTC,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_CTC_MAPPING_NAMES]);class AutoModelForAudioClassification extends PretrainedMixin{}Mr(AutoModelForAudioClassification,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_AUDIO_CLASSIFICATION_MAPPING_NAMES]);class AutoModelForDocumentQuestionAnswering extends PretrainedMixin{}Mr(AutoModelForDocumentQuestionAnswering,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_DOCUMENT_QUESTION_ANSWERING_MAPPING_NAMES]);class AutoModelForImageToImage extends PretrainedMixin{}Mr(AutoModelForImageToImage,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_IMAGE_TO_IMAGE_MAPPING_NAMES]);class AutoModelForDepthEstimation extends PretrainedMixin{}Mr(AutoModelForDepthEstimation,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_DEPTH_ESTIMATION_MAPPING_NAMES]);class AutoModelForImageFeatureExtraction extends PretrainedMixin{}Mr(AutoModelForImageFeatureExtraction,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_IMAGE_FEATURE_EXTRACTION_MAPPING_NAMES]);class Seq2SeqLMOutput extends ModelOutput{constructor({logits:e,past_key_values:en,encoder_outputs:tn,decoder_attentions:nn=null,cross_attentions:sn=null}){super(),this.logits=e,this.past_key_values=en,this.encoder_outputs=tn,this.decoder_attentions=nn,this.cross_attentions=sn}}class SequenceClassifierOutput extends ModelOutput{constructor({logits:e}){super(),this.logits=e}}class XVectorOutput extends ModelOutput{constructor({logits:e,embeddings:en}){super(),this.logits=e,this.embeddings=en}}class TokenClassifierOutput extends ModelOutput{constructor({logits:e}){super(),this.logits=e}}class MaskedLMOutput extends ModelOutput{constructor({logits:e}){super(),this.logits=e}}class QuestionAnsweringModelOutput extends ModelOutput{constructor({start_logits:e,end_logits:en}){super(),this.start_logits=e,this.end_logits=en}}class CausalLMOutput extends ModelOutput{constructor({logits:e}){super(),this.logits=e}}class ImageMattingOutput extends ModelOutput{constructor({alphas:e}){super(),this.alphas=e}}class VitsModelOutput extends ModelOutput{constructor({waveform:e,spectrogram:en}){super(),this.waveform=e,this.spectrogram=en}}const BROWSER_ENV=typeof self<"u",WEBWORKER_ENV=BROWSER_ENV&&self.constructor.name==="DedicatedWorkerGlobalScope";let createCanvasFunction,ImageDataClass,loadImageFunction;if(BROWSER_ENV)createCanvasFunction=(St,e)=>{if(!self.OffscreenCanvas)throw new Error("OffscreenCanvas not supported by this browser.");return new self.OffscreenCanvas(St,e)},loadImageFunction=self.createImageBitmap,ImageDataClass=self.ImageData;else if(sharp)loadImageFunction=async St=>{const en=(await St.metadata()).channels;let{data:tn,info:nn}=await St.rotate().raw().toBuffer({resolveWithObject:!0});const sn=new RawImage(new Uint8ClampedArray(tn),nn.width,nn.height,nn.channels);return en!==void 0&&en!==nn.channels&&sn.convert(en),sn};else throw new Error("Unable to load image processing library.");const RESAMPLING_MAPPING={0:"nearest",1:"lanczos",2:"bilinear",3:"bicubic",4:"box",5:"hamming"},CONTENT_TYPE_MAP=new Map([["png","image/png"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["gif","image/gif"]]);class RawImage{constructor(e,en,tn,nn){this.data=e,this.width=en,this.height=tn,this.channels=nn}get size(){return[this.width,this.height]}static async read(e){if(e instanceof RawImage)return e;if(typeof e=="string"||e instanceof URL)return await this.fromURL(e);throw new Error(`Unsupported input type: ${typeof e}`)}static async fromURL(e){let en=await getFile(e);if(en.status!==200)throw new Error(`Unable to read image from "${e}" (${en.status} ${en.statusText})`);let tn=await en.blob();return this.fromBlob(tn)}static async fromBlob(e){if(BROWSER_ENV){let en=await loadImageFunction(e);const tn=createCanvasFunction(en.width,en.height).getContext("2d");return tn.drawImage(en,0,0),new this(tn.getImageData(0,0,en.width,en.height).data,en.width,en.height,4)}else{let en=sharp(await e.arrayBuffer());return await loadImageFunction(en)}}static fromTensor(e,en="CHW"){if(e.dims.length!==3)throw new Error(`Tensor should have 3 dimensions, but has ${e.dims.length} dimensions.`);if(en==="CHW")e=e.transpose(1,2,0);else if(en!=="HWC")throw new Error(`Unsupported channel format: ${en}`);if(!(e.data instanceof Uint8ClampedArray||e.data instanceof Uint8Array))throw new Error(`Unsupported tensor type: ${e.type}`);switch(e.dims[2]){case 1:case 2:case 3:case 4:return new RawImage(e.data,e.dims[1],e.dims[0],e.dims[2]);default:throw new Error(`Unsupported number of channels: ${e.dims[2]}`)}}grayscale(){if(this.channels===1)return this;let e=new Uint8ClampedArray(this.width*this.height*1);switch(this.channels){case 3:case 4:for(let en=0,tn=0;en<this.data.length;en+=this.channels){const nn=this.data[en],sn=this.data[en+1],on=this.data[en+2];e[tn++]=Math.round(.2989*nn+.587*sn+.114*on)}break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(e,this.width,this.height,1)}rgb(){if(this.channels===3)return this;let e=new Uint8ClampedArray(this.width*this.height*3);switch(this.channels){case 1:for(let en=0,tn=0;en<this.data.length;++en)e[tn++]=this.data[en],e[tn++]=this.data[en],e[tn++]=this.data[en];break;case 4:for(let en=0,tn=0;en<this.data.length;en+=4)e[tn++]=this.data[en],e[tn++]=this.data[en+1],e[tn++]=this.data[en+2];break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(e,this.width,this.height,3)}rgba(){if(this.channels===4)return this;let e=new Uint8ClampedArray(this.width*this.height*4);switch(this.channels){case 1:for(let en=0,tn=0;en<this.data.length;++en)e[tn++]=this.data[en],e[tn++]=this.data[en],e[tn++]=this.data[en],e[tn++]=255;break;case 3:for(let en=0,tn=0;en<this.data.length;en+=3)e[tn++]=this.data[en],e[tn++]=this.data[en+1],e[tn++]=this.data[en+2],e[tn++]=255;break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(e,this.width,this.height,4)}async resize(e,en,{resample:tn=2}={}){let nn=RESAMPLING_MAPPING[tn]??tn;if(BROWSER_ENV){let sn=this.channels,on=this.toCanvas();const un=createCanvasFunction(e,en).getContext("2d");return un.drawImage(on,0,0,e,en),new RawImage(un.getImageData(0,0,e,en).data,e,en,4).convert(sn)}else{let sn=this.toSharp();switch(nn){case"box":case"hamming":(nn==="box"||nn==="hamming")&&(console.warn(`Resampling method ${nn} is not yet supported. Using bilinear instead.`),nn="bilinear");case"nearest":case"bilinear":case"bicubic":sn=sn.affine([e/this.width,0,0,en/this.height],{interpolator:nn});break;case"lanczos":sn=sn.resize({width:e,height:en,fit:"fill",kernel:"lanczos3"});break;default:throw new Error(`Resampling method ${nn} is not supported.`)}return await loadImageFunction(sn)}}async pad([e,en,tn,nn]){if(e=Math.max(e,0),en=Math.max(en,0),tn=Math.max(tn,0),nn=Math.max(nn,0),e===0&&en===0&&tn===0&&nn===0)return this;if(BROWSER_ENV){let sn=this.channels,on=this.toCanvas(),un=this.width+e+en,dn=this.height+tn+nn;const fn=createCanvasFunction(un,dn).getContext("2d");return fn.drawImage(on,0,0,this.width,this.height,e,tn,un,dn),new RawImage(fn.getImageData(0,0,un,dn).data,un,dn,4).convert(sn)}else{let sn=this.toSharp().extend({left:e,right:en,top:tn,bottom:nn});return await loadImageFunction(sn)}}async crop([e,en,tn,nn]){if(e=Math.max(e,0),en=Math.max(en,0),tn=Math.min(tn,this.width-1),nn=Math.min(nn,this.height-1),e===0&&en===0&&tn===this.width-1&&nn===this.height-1)return this;const sn=tn-e+1,on=nn-en+1;if(BROWSER_ENV){const un=this.channels,dn=this.toCanvas(),fn=createCanvasFunction(sn,on).getContext("2d");return fn.drawImage(dn,e,en,sn,on,0,0,sn,on),new RawImage(fn.getImageData(0,0,sn,on).data,sn,on,4).convert(un)}else{const un=this.toSharp().extract({left:e,top:en,width:sn,height:on});return await loadImageFunction(un)}}async center_crop(e,en){if(this.width===e&&this.height===en)return this;let tn=(this.width-e)/2,nn=(this.height-en)/2;if(BROWSER_ENV){let sn=this.channels,on=this.toCanvas();const un=createCanvasFunction(e,en).getContext("2d");let dn=0,fn=0,hn=0,an=0;return tn>=0?dn=tn:hn=-tn,nn>=0?fn=nn:an=-nn,un.drawImage(on,dn,fn,e,en,hn,an,e,en),new RawImage(un.getImageData(0,0,e,en).data,e,en,4).convert(sn)}else{let sn=this.toSharp();if(tn>=0&&nn>=0)sn=sn.extract({left:Math.floor(tn),top:Math.floor(nn),width:e,height:en});else if(tn<=0&&nn<=0){let on=Math.floor(-nn),un=Math.floor(-tn);sn=sn.extend({top:on,left:un,right:e-this.width-un,bottom:en-this.height-on})}else{let on=[0,0],un=0;nn<0?(on[0]=Math.floor(-nn),on[1]=en-this.height-on[0]):un=Math.floor(nn);let dn=[0,0],fn=0;tn<0?(dn[0]=Math.floor(-tn),dn[1]=e-this.width-dn[0]):fn=Math.floor(tn),sn=sn.extend({top:on[0],bottom:on[1],left:dn[0],right:dn[1]}).extract({left:fn,top:un,width:e,height:en})}return await loadImageFunction(sn)}}async toBlob(e="image/png",en=1){if(!BROWSER_ENV)throw new Error("toBlob() is only supported in browser environments.");return await this.toCanvas().convertToBlob({type:e,quality:en})}toTensor(e="CHW"){let en=new Tensor("uint8",new Uint8Array(this.data),[this.height,this.width,this.channels]);if(e!=="HWC")if(e==="CHW")en=en.permute(2,0,1);else throw new Error(`Unsupported channel format: ${e}`);return en}toCanvas(){if(!BROWSER_ENV)throw new Error("toCanvas() is only supported in browser environments.");let e=this.clone().rgba(),en=createCanvasFunction(e.width,e.height),tn=new ImageDataClass(e.data,e.width,e.height);return en.getContext("2d").putImageData(tn,0,0),en}_update(e,en,tn,nn=null){return this.data=e,this.width=en,this.height=tn,nn!==null&&(this.channels=nn),this}clone(){return new RawImage(this.data.slice(),this.width,this.height,this.channels)}convert(e){if(this.channels===e)return this;switch(e){case 1:this.grayscale();break;case 3:this.rgb();break;case 4:this.rgba();break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this}async save(e){if(BROWSER_ENV){if(WEBWORKER_ENV)throw new Error("Unable to save an image from a Web Worker.");const en=e.split(".").pop().toLowerCase(),tn=CONTENT_TYPE_MAP.get(en)??"image/png",nn=await this.toBlob(tn),sn=URL.createObjectURL(nn),on=document.createElement("a");on.href=sn,on.download=e,on.click(),on.remove()}else{if(env$1.useFS)return await this.toSharp().toFile(e);throw new Error("Unable to save the image because filesystem is disabled in this environment.")}}toSharp(){if(BROWSER_ENV)throw new Error("toSharp() is only supported in server-side environments.");return sharp(this.data,{raw:{width:this.width,height:this.height,channels:this.channels}})}}async function read_audio(St,e){if(typeof AudioContext>"u")throw Error("Unable to load audio from path/URL since `AudioContext` is not available in your environment. Instead, audio data should be passed directly to the pipeline/processor. For more information and some example code, see https://huggingface.co/docs/transformers.js/guides/node-audio-processing.");const en=await(await getFile(St)).arrayBuffer(),tn=new AudioContext({sampleRate:e});typeof e>"u"&&console.warn(`No sampling rate provided, using default of ${tn.sampleRate}Hz.`);const nn=await tn.decodeAudioData(en);let sn;if(nn.numberOfChannels===2){const on=Math.sqrt(2),un=nn.getChannelData(0),dn=nn.getChannelData(1);sn=new Float32Array(un.length);for(let fn=0;fn<nn.length;++fn)sn[fn]=on*(un[fn]+dn[fn])/2}else sn=nn.getChannelData(0);return sn}function hanning(St){if(St<1)return new Float64Array;if(St===1)return new Float64Array([1]);const e=St-1,en=Math.PI/e,tn=new Float64Array(St);for(let nn=0;nn<St;++nn){const sn=2*nn-e;tn[nn]=.5+.5*Math.cos(en*sn)}return tn}const HERTZ_TO_MEL_MAPPING={htk:St=>2595*Math.log10(1+St/700),kaldi:St=>1127*Math.log(1+St/700),slaney:(St,e=1e3,en=15,tn=27/Math.log(6.4))=>St>=e?en+Math.log(St/e)*tn:3*St/200};function hertz_to_mel(St,e="htk"){const en=HERTZ_TO_MEL_MAPPING[e];if(!en)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return typeof St=="number"?en(St):St.map(tn=>en(tn))}const MEL_TO_HERTZ_MAPPING={htk:St=>700*(10**(St/2595)-1),kaldi:St=>700*(Math.exp(St/1127)-1),slaney:(St,e=1e3,en=15,tn=Math.log(6.4)/27)=>St>=en?e*Math.exp(tn*(St-en)):200*St/3};function mel_to_hertz(St,e="htk"){const en=MEL_TO_HERTZ_MAPPING[e];if(!en)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return typeof St=="number"?en(St):St.map(tn=>en(tn))}function _create_triangular_filter_bank(St,e){const en=Float64Array.from({length:e.length-1},(on,un)=>e[un+1]-e[un]),tn=Array.from({length:St.length},()=>new Array(e.length));for(let on=0;on<St.length;++on){const un=tn[on];for(let dn=0;dn<e.length;++dn)un[dn]=e[dn]-St[on]}const nn=e.length-2,sn=Array.from({length:nn},()=>new Array(St.length));for(let on=0;on<St.length;++on){const un=tn[on];for(let dn=0;dn<nn;++dn){const fn=-un[dn]/en[dn],hn=un[dn+2]/en[dn+1];sn[dn][on]=Math.max(0,Math.min(fn,hn))}}return sn}function linspace(St,e,en){const tn=(e-St)/(en-1);return Float64Array.from({length:en},(nn,sn)=>St+tn*sn)}function mel_filter_bank(St,e,en,tn,nn,sn=null,on="htk",un=!1){if(sn!==null&&sn!=="slaney")throw new Error('norm must be one of null or "slaney"');const dn=hertz_to_mel(en,on),fn=hertz_to_mel(tn,on),hn=linspace(dn,fn,e+2);let an=mel_to_hertz(hn,on),rn;if(un){const pn=nn/(St*2);rn=hertz_to_mel(Float64Array.from({length:St},(mn,xn)=>xn*pn),on),an=hn}else rn=linspace(0,Math.floor(nn/2),St);const cn=_create_triangular_filter_bank(rn,an);if(sn!==null&&sn==="slaney")for(let pn=0;pn<e;++pn){const mn=cn[pn],xn=2/(an[pn+2]-an[pn]);for(let gn=0;gn<St;++gn)mn[gn]*=xn}return cn}function padReflect(St,e,en){const tn=new St.constructor(St.length+e+en),nn=St.length-1;for(let sn=0;sn<St.length;++sn)tn[e+sn]=St[sn];for(let sn=1;sn<=e;++sn)tn[e-sn]=St[calculateReflectOffset(sn,nn)];for(let sn=1;sn<=en;++sn)tn[nn+e+sn]=St[calculateReflectOffset(nn-sn,nn)];return tn}function _db_conversion_helper(St,e,en,tn,nn){if(en<=0)throw new Error("reference must be greater than zero");if(tn<=0)throw new Error("min_value must be greater than zero");en=Math.max(tn,en);const sn=Math.log10(en);for(let on=0;on<St.length;++on)St[on]=e*Math.log10(Math.max(tn,St[on])-sn);if(nn!==null){if(nn<=0)throw new Error("db_range must be greater than zero");const on=max(St)[0]-nn;for(let un=0;un<St.length;++un)St[un]=Math.max(St[un],on)}return St}function amplitude_to_db(St,e=1,en=1e-5,tn=null){return _db_conversion_helper(St,20,e,en,tn)}function power_to_db(St,e=1,en=1e-10,tn=null){return _db_conversion_helper(St,10,e,en,tn)}function spectrogram(St,e,en,tn,{fft_length:nn=null,power:sn=1,center:on=!0,pad_mode:un="reflect",onesided:dn=!0,preemphasis:fn=null,mel_filters:hn=null,mel_floor:an=1e-10,log_mel:rn=null,reference:cn=1,min_value:pn=1e-10,db_range:mn=null,remove_dc_offset:xn=null,max_num_frames:gn=null,do_pad:yn=!0,transpose:bn=!1}={}){const wn=e.length;if(nn===null&&(nn=en),en>nn)throw Error(`frame_length (${en}) may not be larger than fft_length (${nn})`);if(wn!==en)throw new Error(`Length of the window (${wn}) must equal frame_length (${en})`);if(tn<=0)throw new Error("hop_length must be greater than zero");if(sn===null&&hn!==null)throw new Error("You have provided `mel_filters` but `power` is `None`. Mel spectrogram computation is not yet supported for complex-valued spectrogram. Specify `power` to fix this issue.");if(on){if(un!=="reflect")throw new Error(`pad_mode="${un}" not implemented yet.`);const Ln=Math.floor((nn-1)/2)+1;St=padReflect(St,Ln,Ln)}const _n=Math.floor(1+Math.floor((St.length-en)/tn)),Tn=dn?Math.floor(nn/2)+1:nn;let An=_n,Pn=_n;gn!==null&&(gn>_n?yn&&(Pn=gn):Pn=An=gn);const Sn=new FFT(nn),Cn=new Float64Array(nn),Nn=new Float64Array(Sn.outputBufferSize),Mn=new Array(An);for(let Ln=0;Ln<An;++Ln){const qn=Ln*tn;for(let Qn=0;Qn<en;++Qn)Cn[Qn]=St[qn+Qn];if(xn){let Qn=0;for(let lr=0;lr<en;++lr)Qn+=Cn[lr];const zn=Qn/en;for(let lr=0;lr<en;++lr)Cn[lr]-=zn}if(fn!==null){for(let Qn=en-1;Qn>=1;--Qn)Cn[Qn]-=fn*Cn[Qn-1];Cn[0]*=1-fn}for(let Qn=0;Qn<e.length;++Qn)Cn[Qn]*=e[Qn];Sn.realTransform(Nn,Cn);const Yn=new Array(Tn);for(let Qn=0;Qn<Yn.length;++Qn){const zn=Qn<<1;Yn[Qn]=Nn[zn]**2+Nn[zn+1]**2}Mn[Ln]=Yn}if(sn!==null&&sn!==2){const Ln=2/sn;for(let qn=0;qn<Mn.length;++qn){const Yn=Mn[qn];for(let Qn=0;Qn<Yn.length;++Qn)Yn[Qn]**=Ln}}const Fn=hn.length,In=new Float32Array(Fn*Pn),Bn=bn?[Pn,Fn]:[Fn,Pn];for(let Ln=0;Ln<Fn;++Ln){const qn=hn[Ln];for(let Yn=0;Yn<An;++Yn){const Qn=Mn[Yn];let zn=0;for(let lr=0;lr<Tn;++lr)zn+=qn[lr]*Qn[lr];In[bn?Yn*Fn+Ln:Ln*An+Yn]=Math.max(an,zn)}}if(sn!==null&&rn!==null){const Ln=Math.min(In.length,An*Fn);switch(rn){case"log":for(let qn=0;qn<Ln;++qn)In[qn]=Math.log(In[qn]);break;case"log10":for(let qn=0;qn<Ln;++qn)In[qn]=Math.log10(In[qn]);break;case"dB":if(sn===1)amplitude_to_db(In,cn,pn,mn);else if(sn===2)power_to_db(In,cn,pn,mn);else throw new Error(`Cannot use log_mel option '${rn}' with power ${sn}`);break;default:throw new Error(`log_mel must be one of null, 'log', 'log10' or 'dB'. Got '${rn}'`)}}return{data:In,dims:Bn}}function window_function(St,e,{periodic:en=!0,frame_length:tn=null,center:nn=!0}={}){const sn=en?St+1:St;let on;switch(e){case"boxcar":on=new Float64Array(sn).fill(1);break;case"hann":case"hann_window":on=hanning(sn);break;case"povey":on=hanning(sn).map(un=>Math.pow(un,.85));break;default:throw new Error(`Unknown window type ${e}.`)}if(en&&(on=on.subarray(0,St)),tn===null)return on;if(St>tn)throw new Error(`Length of the window (${St}) may not be larger than frame_length (${tn})`);return on}function center_to_corners_format([St,e,en,tn]){return[St-en/2,e-tn/2,St+en/2,e+tn/2]}function post_process_object_detection(St,e=.5,en=null,tn=!1){const nn=St.logits,sn=St.pred_boxes,[on,un,dn]=nn.dims;if(en!==null&&en.length!==on)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let fn=[];for(let hn=0;hn<on;++hn){let an=en!==null?en[hn]:null,rn={boxes:[],classes:[],scores:[]},cn=nn[hn],pn=sn[hn];for(let mn=0;mn<un;++mn){let xn=cn[mn],gn=[],yn;if(tn){yn=xn.sigmoid().data;for(let bn=0;bn<yn.length;++bn)yn[bn]>e&&gn.push(bn)}else{let bn=max(xn.data)[1];if(bn===dn-1)continue;gn.push(bn),yn=softmax(xn.data)}for(const bn of gn){let wn=pn[mn].data;wn=center_to_corners_format(wn),an!==null&&(wn=wn.map((_n,Tn)=>_n*an[(Tn+1)%2])),rn.boxes.push(wn),rn.classes.push(bn),rn.scores.push(yn[bn])}}fn.push(rn)}return fn}function validate_audio_inputs(St,e){var en;if(!(St instanceof Float32Array||St instanceof Float64Array))throw new Error(`${e} expects input to be a Float32Array or a Float64Array, but got ${((en=St==null?void 0:St.constructor)==null?void 0:en.name)??typeof St} instead. If using the feature extractor directly, remember to use \`read_audio(url, sampling_rate)\` to obtain the raw audio data of the file/url.`)}function constraint_to_multiple_of(St,e,en=0,tn=null){const nn=St/e;let sn=bankers_round(nn)*e;return tn!==null&&sn>tn&&(sn=Math.floor(nn)*e),sn<en&&(sn=Math.ceil(nn)*e),sn}function enforce_size_divisibility([St,e],en){return[Math.max(Math.floor(St/en),1)*en,Math.max(Math.floor(e/en),1)*en]}class FeatureExtractor extends Callable{constructor(e){super(),this.config=e}}class ImageFeatureExtractor extends FeatureExtractor{constructor(e){super(e),this.image_mean=this.config.image_mean??this.config.mean,this.image_std=this.config.image_std??this.config.std,this.resample=this.config.resample??2,this.do_rescale=this.config.do_rescale??!0,this.rescale_factor=this.config.rescale_factor??1/255,this.do_normalize=this.config.do_normalize,this.do_resize=this.config.do_resize,this.do_thumbnail=this.config.do_thumbnail,this.size=this.config.size,this.size_divisibility=this.config.size_divisibility??this.config.size_divisor,this.do_center_crop=this.config.do_center_crop,this.crop_size=this.config.crop_size,this.do_convert_rgb=this.config.do_convert_rgb??!0,this.do_crop_margin=this.config.do_crop_margin,this.pad_size=this.config.pad_size,this.do_pad=this.config.do_pad,this.do_pad&&!this.pad_size&&this.size&&this.size.width!==void 0&&this.size.height!==void 0&&(this.pad_size=this.size),this.do_flip_channel_order=this.config.do_flip_channel_order??!1}async thumbnail(e,en,tn=2){const nn=e.height,sn=e.width,on=en.height,un=en.width;let dn=Math.min(nn,on),fn=Math.min(sn,un);return dn===nn&&fn===sn?e:(nn>sn?fn=Math.floor(sn*dn/nn):sn>nn&&(dn=Math.floor(nn*fn/sn)),await e.resize(fn,dn,{resample:tn}))}async crop_margin(e,en=200){const tn=e.clone().grayscale(),nn=min(tn.data)[0],on=max(tn.data)[0]-nn;if(on===0)return e;const un=en/255;let dn=tn.width,fn=tn.height,hn=0,an=0;for(let rn=0;rn<tn.height;++rn){const cn=rn*tn.width;for(let pn=0;pn<tn.width;++pn)(tn.data[cn+pn]-nn)/on<un&&(dn=Math.min(dn,pn),fn=Math.min(fn,rn),hn=Math.max(hn,pn),an=Math.max(an,rn))}return e=await e.crop([dn,fn,hn,an]),e}pad_image(e,en,tn,{mode:nn="constant",center:sn=!1,constant_values:on=0}={}){const[un,dn,fn]=en;let hn,an;if(typeof tn=="number"?(hn=tn,an=tn):(hn=tn.width,an=tn.height),hn!==dn||an!==un){const rn=new Float32Array(hn*an*fn);if(Array.isArray(on))for(let mn=0;mn<rn.length;++mn)rn[mn]=on[mn%fn];else on!==0&&rn.fill(on);const[cn,pn]=sn?[Math.floor((hn-dn)/2),Math.floor((an-un)/2)]:[0,0];for(let mn=0;mn<un;++mn){const xn=(mn+pn)*hn,gn=mn*dn;for(let yn=0;yn<dn;++yn){const bn=(xn+yn+cn)*fn,wn=(gn+yn)*fn;for(let _n=0;_n<fn;++_n)rn[bn+_n]=e[wn+_n]}}if(nn==="symmetric"){if(sn)throw new Error("`center` padding is not supported when `mode` is set to `symmetric`.");const mn=un-1,xn=dn-1;for(let gn=0;gn<an;++gn){const yn=gn*hn,bn=calculateReflectOffset(gn,mn)*dn;for(let wn=0;wn<hn;++wn){if(gn<un&&wn<dn)continue;const _n=(yn+wn)*fn,Tn=(bn+calculateReflectOffset(wn,xn))*fn;for(let An=0;An<fn;++An)rn[_n+An]=e[Tn+An]}}}e=rn,en=[an,hn,fn]}return[e,en]}rescale(e){for(let en=0;en<e.length;++en)e[en]=this.rescale_factor*e[en]}get_resize_output_image_size(e,en){const[tn,nn]=e.size;let sn,on;if(this.do_thumbnail){const{height:un,width:dn}=en;sn=Math.min(un,dn)}else Number.isInteger(en)?(sn=en,on=this.config.max_size??sn):en!==void 0&&(sn=en.shortest_edge,on=en.longest_edge);if(sn!==void 0||on!==void 0){const un=sn===void 0?1:Math.max(sn/tn,sn/nn),dn=tn*un,fn=nn*un,hn=on===void 0?1:Math.min(on/dn,on/fn);let an=Math.floor(Number((dn*hn).toFixed(2))),rn=Math.floor(Number((fn*hn).toFixed(2)));return this.size_divisibility!==void 0&&([an,rn]=enforce_size_divisibility([an,rn],this.size_divisibility)),[an,rn]}else if(en!==void 0&&en.width!==void 0&&en.height!==void 0){let un=en.width,dn=en.height;if(this.config.keep_aspect_ratio&&this.config.ensure_multiple_of){let fn=dn/nn,hn=un/tn;Math.abs(1-hn)<Math.abs(1-fn)?fn=hn:hn=fn,dn=constraint_to_multiple_of(fn*nn,this.config.ensure_multiple_of),un=constraint_to_multiple_of(hn*tn,this.config.ensure_multiple_of)}return[un,dn]}else{if(this.size_divisibility!==void 0)return enforce_size_divisibility([tn,nn],this.size_divisibility);throw new Error(`Could not resize image due to unsupported \`this.size\` option in config: ${JSON.stringify(en)}`)}}async resize(e){const[en,tn]=this.get_resize_output_image_size(e,this.size);return await e.resize(en,tn,{resample:this.resample})}async preprocess(e,{do_normalize:en=null,do_pad:tn=null,do_convert_rgb:nn=null,do_convert_grayscale:sn=null,do_flip_channel_order:on=null}={}){this.do_crop_margin&&(e=await this.crop_margin(e));const[un,dn]=e.size;if(nn??this.do_convert_rgb?e=e.rgb():sn&&(e=e.grayscale()),this.do_resize&&(e=await this.resize(e)),this.do_thumbnail&&(e=await this.thumbnail(e,this.size,this.resample)),this.do_center_crop){let cn,pn;Number.isInteger(this.crop_size)?(cn=this.crop_size,pn=this.crop_size):(cn=this.crop_size.width,pn=this.crop_size.height),e=await e.center_crop(cn,pn)}const fn=[e.height,e.width];let hn=Float32Array.from(e.data),an=[e.height,e.width,e.channels];if(this.do_rescale&&this.rescale(hn),en??this.do_normalize){let cn=this.image_mean;Array.isArray(this.image_mean)||(cn=new Array(e.channels).fill(cn));let pn=this.image_std;if(Array.isArray(this.image_std)||(pn=new Array(e.channels).fill(cn)),cn.length!==e.channels||pn.length!==e.channels)throw new Error(`When set to arrays, the length of \`image_mean\` (${cn.length}) and \`image_std\` (${pn.length}) must match the number of channels in the image (${e.channels}).`);for(let mn=0;mn<hn.length;mn+=e.channels)for(let xn=0;xn<e.channels;++xn)hn[mn+xn]=(hn[mn+xn]-cn[xn])/pn[xn]}if(tn??this.do_pad){if(this.pad_size)[hn,an]=this.pad_image(hn,[e.height,e.width,e.channels],this.pad_size);else if(this.size_divisibility){const[cn,pn]=enforce_size_divisibility([an[1],an[0]],this.size_divisibility);[hn,an]=this.pad_image(hn,an,{width:cn,height:pn})}}if(on??this.do_flip_channel_order){if(an[2]!==3)throw new Error("Flipping channel order is only supported for RGB images.");for(let cn=0;cn<hn.length;cn+=3){const pn=hn[cn];hn[cn]=hn[cn+2],hn[cn+2]=pn}}const rn=new Tensor("float32",hn,an).permute(2,0,1);return{original_size:[dn,un],reshaped_input_size:fn,pixel_values:rn}}async _call(e,...en){Array.isArray(e)||(e=[e]);const tn=await Promise.all(e.map(sn=>this.preprocess(sn)));return{pixel_values:stack(tn.map(sn=>sn.pixel_values),0),original_sizes:tn.map(sn=>sn.original_size),reshaped_input_sizes:tn.map(sn=>sn.reshaped_input_size)}}}class SegformerFeatureExtractor extends ImageFeatureExtractor{post_process_semantic_segmentation(e,en=null){const tn=e.logits,nn=tn.dims[0];if(en!==null&&en.length!==nn)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");const sn=[];for(let on=0;on<nn;++on){const un=en!==null?en[on]:null;let dn=tn[on];un!==null&&(dn=interpolate(dn,un,"bilinear",!1));const[fn,hn]=un??dn.dims.slice(-2),an=new Tensor("int32",new Int32Array(fn*hn),[fn,hn]),rn=dn[0].data;for(let xn=1;xn<dn.dims[0];++xn){const gn=dn[xn].data;for(let yn=0;yn<gn.length;++yn)gn[yn]>rn[yn]&&(rn[yn]=gn[yn],an.data[yn]=xn)}const cn=new Array(dn.dims[0]),pn=an.data;for(let xn=0;xn<pn.length;++xn){const gn=pn[xn];cn[gn]=gn}const mn=cn.filter(xn=>xn!==void 0);sn.push({segmentation:an,labels:mn})}return sn}}class DPTFeatureExtractor extends ImageFeatureExtractor{}class DPTImageProcessor extends DPTFeatureExtractor{}class BitImageProcessor extends ImageFeatureExtractor{}class GLPNFeatureExtractor extends ImageFeatureExtractor{}class CLIPFeatureExtractor extends ImageFeatureExtractor{}class ChineseCLIPFeatureExtractor extends ImageFeatureExtractor{}class SiglipImageProcessor extends ImageFeatureExtractor{}class ConvNextFeatureExtractor extends ImageFeatureExtractor{constructor(e){super(e),this.crop_pct=this.config.crop_pct??224/256}async resize(e){var tn;const en=(tn=this.size)==null?void 0:tn.shortest_edge;if(en===void 0)throw new Error("Size dictionary must contain 'shortest_edge' key.");if(en<384){const nn=Math.floor(en/this.crop_pct),[sn,on]=this.get_resize_output_image_size(e,{shortest_edge:nn});e=await e.resize(sn,on,{resample:this.resample}),e=await e.center_crop(en,en)}else e=await e.resize(en,en,{resample:this.resample});return e}}class ConvNextImageProcessor extends ConvNextFeatureExtractor{}class ViTFeatureExtractor extends ImageFeatureExtractor{}class ViTImageProcessor extends ImageFeatureExtractor{}class EfficientNetImageProcessor extends ImageFeatureExtractor{constructor(e){super(e),this.include_top=this.config.include_top??!0,this.include_top&&(this.image_std=this.image_std.map(en=>en*en))}}class MobileViTFeatureExtractor extends ImageFeatureExtractor{}class MobileViTImageProcessor extends MobileViTFeatureExtractor{}class OwlViTFeatureExtractor extends ImageFeatureExtractor{post_process_object_detection(...e){return post_process_object_detection(...e)}}class Owlv2ImageProcessor extends OwlViTFeatureExtractor{}class DeiTFeatureExtractor extends ImageFeatureExtractor{}class BeitFeatureExtractor extends ImageFeatureExtractor{}class DonutFeatureExtractor extends ImageFeatureExtractor{pad_image(e,en,tn,nn={}){const[sn,on,un]=en;let dn=this.image_mean;Array.isArray(this.image_mean)||(dn=new Array(un).fill(dn));let fn=this.image_std;Array.isArray(fn)||(fn=new Array(un).fill(dn));const hn=dn.map((an,rn)=>-an/fn[rn]);return super.pad_image(e,en,tn,{center:!0,constant_values:hn,...nn})}}class NougatImageProcessor extends DonutFeatureExtractor{}class DetrFeatureExtractor extends ImageFeatureExtractor{async _call(e){const en=await super._call(e),tn=[en.pixel_values.dims[0],64,64],nn=new Tensor("int64",new BigInt64Array(tn.reduce((sn,on)=>sn*on)).fill(1n),tn);return{...en,pixel_mask:nn}}post_process_object_detection(...e){return post_process_object_detection(...e)}remove_low_and_no_objects(e,en,tn,nn){let sn=[],on=[],un=[];for(let dn=0;dn<e.dims[0];++dn){let fn=e[dn],hn=en[dn],an=max(fn.data)[1];if(an===nn)continue;let cn=softmax(fn.data)[an];cn>tn&&(sn.push(hn),on.push(cn),un.push(an))}return[sn,on,un]}check_segment_validity(e,en,tn,nn=.5,sn=.8){let on=[],un=0,dn=0;for(let hn=0;hn<e.length;++hn)e[hn]===tn&&(on.push(hn),++un),en[tn].data[hn]>=nn&&++dn;let fn=un>0&&dn>0;return fn&&(fn=un/dn>sn),[fn,on]}compute_segments(e,en,tn,nn,sn,on=null,un=null){let[dn,fn]=un??e[0].dims,hn=new Tensor("int32",new Int32Array(dn*fn),[dn,fn]),an=[];if(un!==null)for(let mn=0;mn<e.length;++mn)e[mn]=interpolate(e[mn],un,"bilinear",!1);let rn=new Int32Array(e[0].data.length),cn=new Float32Array(e[0].data.length);for(let mn=0;mn<e.length;++mn){let xn=en[mn];for(let gn=0;gn<e[mn].data.length;++gn)e[mn].data[gn]*=xn,e[mn].data[gn]>cn[gn]&&(rn[gn]=mn,cn[gn]=e[mn].data[gn])}let pn=0;for(let mn=0;mn<tn.length;++mn){let xn=tn[mn],[gn,yn]=this.check_segment_validity(rn,e,mn,nn,sn);if(gn){++pn;for(let bn of yn)hn.data[bn]=pn;an.push({id:pn,label_id:xn,score:en[mn]})}}return[hn,an]}post_process_panoptic_segmentation(e,en=.5,tn=.5,nn=.8,sn=null,on=null){sn===null&&(console.warn("`label_ids_to_fuse` unset. No instance will be fused."),sn=new Set);const un=e.logits,fn=e.pred_masks.sigmoid();let[hn,an,rn]=un.dims;if(rn-=1,on!==null&&on.length!==hn)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let cn=[];for(let pn=0;pn<hn;++pn){let mn=on!==null?on[pn]:null,xn=un[pn],gn=fn[pn],[yn,bn,wn]=this.remove_low_and_no_objects(xn,gn,en,rn);if(wn.length===0){let[An,Pn]=mn??gn.dims.slice(-2),Sn=new Tensor("int32",new Int32Array(An*Pn).fill(-1),[An,Pn]);cn.push({segmentation:Sn,segments_info:[]});continue}let[_n,Tn]=this.compute_segments(yn,bn,wn,tn,nn,sn,mn);cn.push({segmentation:_n,segments_info:Tn})}return cn}post_process_instance_segmentation(){throw Error("Not implemented yet")}}class YolosFeatureExtractor extends ImageFeatureExtractor{post_process_object_detection(...e){return post_process_object_detection(...e)}}class SamImageProcessor extends ImageFeatureExtractor{reshape_input_points(e,en,tn){e=structuredClone(e);let nn=calculateDimensions(e);if(nn.length===3)nn=[1,...nn],e=[e];else if(nn.length!==4)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");for(let sn=0;sn<e.length;++sn){let on=en[sn],un=tn[sn],dn=[un[0]/on[0],un[1]/on[1]];for(let fn=0;fn<e[sn].length;++fn)for(let hn=0;hn<e[sn][fn].length;++hn)for(let an=0;an<e[sn][fn][hn].length;++an)e[sn][fn][hn][an]*=dn[an]}return new Tensor("float32",Float32Array.from(e.flat(1/0)),nn)}add_input_labels(e,en){let tn=calculateDimensions(e);if(tn.length===2)tn=[1,...tn],e=[e];else if(tn.length!==3)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");if(tn.some((nn,sn)=>nn!==en.dims[sn]))throw Error(`The first ${tn.length} dimensions of 'input_points' and 'input_labels' must be the same.`);return new Tensor("int64",e.flat(1/0).map(BigInt),tn)}async _call(e,en=null,tn=null){const nn=await super._call(e);if(en&&(nn.input_points=this.reshape_input_points(en,nn.original_sizes,nn.reshaped_input_sizes)),tn){if(!nn.input_points)throw Error("`input_points` must be provided if `input_labels` are provided.");nn.input_labels=this.add_input_labels(tn,nn.input_points)}return nn}post_process_masks(e,en,tn,{mask_threshold:nn=0,binarize:sn=!0,pad_size:on=null}={}){const un=[];on=on??this.pad_size;const dn=[on.height,on.width];for(let fn=0;fn<en.length;++fn){const hn=en[fn],an=tn[fn],rn=e[fn],cn=[];for(let pn=0;pn<rn.dims[0];++pn){const mn=rn[pn];let xn=interpolate(mn,dn,"bilinear",!1);if(xn=xn.slice(null,[0,an[0]],[0,an[1]]),xn=interpolate(xn,hn,"bilinear",!1),sn){const gn=new Uint8Array(xn.data.length);for(let yn=0;yn<xn.data.length;++yn)xn.data[yn]>nn&&(gn[yn]=1);xn=new Tensor("bool",gn,xn.dims)}cn.push(xn)}un.push(stack(cn))}return un}}class Swin2SRImageProcessor extends ImageFeatureExtractor{pad_image(e,en,tn,nn={}){const[sn,on,un]=en;return super.pad_image(e,en,{width:on+(tn-on%tn)%tn,height:sn+(tn-sn%tn)%tn},{mode:"symmetric",center:!1,constant_values:-1,...nn})}}class VitMatteImageProcessor extends ImageFeatureExtractor{async _call(e,en){Array.isArray(e)||(e=[e]),Array.isArray(en)||(en=[en]);const tn=await Promise.all(e.map(on=>this.preprocess(on))),nn=await Promise.all(en.map(on=>this.preprocess(on,{do_normalize:!1,do_convert_rgb:!1,do_convert_grayscale:!0})));return{pixel_values:stack(tn.map((on,un)=>cat([on.pixel_values,nn[un].pixel_values],0)),0),original_sizes:tn.map(on=>on.original_size),reshaped_input_sizes:tn.map(on=>on.reshaped_input_size)}}}class WhisperFeatureExtractor extends FeatureExtractor{constructor(e){var en;super(e),(en=this.config).mel_filters??(en.mel_filters=mel_filter_bank(Math.floor(1+this.config.n_fft/2),this.config.feature_size,0,8e3,this.config.sampling_rate,"slaney","slaney")),this.window=window_function(this.config.n_fft,"hann")}_extract_fbank_features(e){const{data:en,dims:tn}=spectrogram(e,this.window,this.config.n_fft,this.config.hop_length,{power:2,mel_filters:this.config.mel_filters,log_mel:"log10",max_num_frames:this.config.nb_max_frames}),nn=max(en)[0];for(let sn=0;sn<en.length;++sn)en[sn]=(Math.max(en[sn],nn-8)+4)/4;return{data:en,dims:tn}}async _call(e){validate_audio_inputs(e,"WhisperFeatureExtractor");let en;e.length>this.config.n_samples?(console.warn("Attempting to extract features for audio longer than 30 seconds. If using a pipeline to extract transcript from a long audio clip, remember to specify `chunk_length_s` and/or `stride_length_s`."),en=e.slice(0,this.config.n_samples)):(en=new Float32Array(this.config.n_samples),en.set(e));const{data:tn,dims:nn}=this._extract_fbank_features(en);return{input_features:new Tensor("float32",tn,[1,...nn])}}}class Wav2Vec2FeatureExtractor extends FeatureExtractor{_zero_mean_unit_var_norm(e){const tn=e.reduce((sn,on)=>sn+on,0)/e.length,nn=e.reduce((sn,on)=>sn+(on-tn)**2,0)/e.length;return e.map(sn=>(sn-tn)/Math.sqrt(nn+1e-7))}async _call(e){validate_audio_inputs(e,"Wav2Vec2FeatureExtractor"),e instanceof Float64Array&&(e=new Float32Array(e));let en=e;this.config.do_normalize&&(en=this._zero_mean_unit_var_norm(en));const tn=[1,en.length];return{input_values:new Tensor("float32",en,tn),attention_mask:new Tensor("int64",new BigInt64Array(en.length).fill(1n),tn)}}}class SeamlessM4TFeatureExtractor extends FeatureExtractor{constructor(e){super(e);const en=this.config.sampling_rate,tn=mel_filter_bank(256,this.config.num_mel_bins,20,Math.floor(en/2),en,null,"kaldi",!0);for(let nn=0;nn<tn.length;++nn)tn[nn].push(0);this.mel_filters=tn,this.window=window_function(400,"povey",{periodic:!1})}_extract_fbank_features(e,en){return e=e.map(tn=>tn*32768),spectrogram(e,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,max_num_frames:en,transpose:!0})}async _call(e,{padding:en=!0,pad_to_multiple_of:tn=2,do_normalize_per_mel_bins:nn=!0,return_attention_mask:sn=!0}={}){validate_audio_inputs(e,"SeamlessM4TFeatureExtractor");let on=this._extract_fbank_features(e,this.config.max_length);if(nn){const[pn,mn]=on.dims;for(let xn=0;xn<mn;++xn){let gn=0;for(let _n=0;_n<pn;++_n)gn+=on.data[_n*mn+xn];const yn=gn/pn;let bn=0;for(let _n=0;_n<pn;++_n)bn+=(on.data[_n*mn+xn]-yn)**2;bn/=pn-1;const wn=Math.sqrt(bn+1e-7);for(let _n=0;_n<pn;++_n){const Tn=_n*mn+xn;on.data[Tn]=(on.data[Tn]-yn)/wn}}}let un;if(en){const[pn,mn]=on.dims,xn=pn%tn;if(xn>0){const gn=new Float32Array(mn*(pn+xn));gn.set(on.data),gn.fill(this.config.padding_value,on.data.length);const yn=pn+xn;on={data:gn,dims:[yn,mn]},sn&&(un=new Tensor("int64",new BigInt64Array(yn),[1,yn]),un.data.fill(1n,0,pn))}}const[dn,fn]=on.dims,hn=this.config.stride;if(dn%hn!==0)throw new Error(`The number of frames (${dn}) must be a multiple of the stride (${hn}).`);const rn=new Tensor("float32",on.data,on.dims).view(1,Math.floor(dn/hn),fn*hn),cn={input_features:rn};if(sn){const pn=rn.dims[1],mn=new Tensor("int64",new BigInt64Array(pn),[1,pn]);if(un)for(let xn=1,gn=0;xn<dn;xn+=hn,++gn)mn.data[gn]=un.data[xn];else mn.data.fill(1n);cn.attention_mask=mn}return cn}}class ASTFeatureExtractor extends FeatureExtractor{constructor(e){super(e);const en=this.config.sampling_rate,tn=mel_filter_bank(256,this.config.num_mel_bins,20,Math.floor(en/2),en,null,"kaldi",!0);for(let nn=0;nn<tn.length;++nn)tn[nn].push(0);this.mel_filters=tn,this.window=window_function(400,"hann",{periodic:!1}),this.mean=this.config.mean,this.std=this.config.std}_extract_fbank_features(e,en){return spectrogram(e,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,max_num_frames:en,transpose:!0})}async _call(e){validate_audio_inputs(e,"ASTFeatureExtractor");const en=this._extract_fbank_features(e,this.config.max_length);if(this.config.do_normalize){const tn=this.std*2;for(let nn=0;nn<en.data.length;++nn)en.data[nn]=(en.data[nn]-this.mean)/tn}return{input_values:new Tensor("float32",en.data,[1,...en.dims])}}}class ClapFeatureExtractor extends FeatureExtractor{constructor(e){super(e),this.mel_filters=mel_filter_bank(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,null,"htk"),this.mel_filters_slaney=mel_filter_bank(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,"slaney","slaney"),this.window=window_function(this.config.fft_window_size,"hann")}_get_input_mel(e,en,tn,nn){let sn,on=!1;const un=e.length-en;if(un>0)if(tn==="rand_trunc"){on=!0;const dn=Math.floor(Math.random()*(un+1));e=e.subarray(dn,dn+en),sn=this._extract_fbank_features(e,this.mel_filters_slaney,this.config.nb_max_samples),sn.dims=[1,...sn.dims]}else throw new Error(`Truncation strategy "${tn}" not implemented`);else{if(un<0){let dn=new Float64Array(en);if(dn.set(e),nn==="repeat")for(let fn=e.length;fn<en;fn+=e.length)dn.set(e.subarray(0,Math.min(e.length,en-fn)),fn);else if(nn==="repeatpad")for(let fn=e.length;fn<-un;fn+=e.length)dn.set(e,fn);e=dn}if(tn==="fusion")throw new Error(`Truncation strategy "${tn}" not implemented`);sn=this._extract_fbank_features(e,this.mel_filters_slaney,this.config.nb_max_samples),sn.dims=[1,...sn.dims]}return{...sn,longer:on}}_extract_fbank_features(e,en,tn=null){return spectrogram(e,this.window,this.config.fft_window_size,this.config.hop_length,{power:2,mel_filters:en,log_mel:"dB",max_num_frames:tn,do_pad:!1,transpose:!0})}async _call(e,{max_length:en=null}={}){validate_audio_inputs(e,"ClapFeatureExtractor");const tn=this._get_input_mel(e,en??this.config.nb_max_samples,this.config.truncation,this.config.padding);return{input_features:new Tensor("float32",tn.data,[1,...tn.dims])}}}class SpeechT5FeatureExtractor extends FeatureExtractor{}class Processor extends Callable{constructor(e){super(),this.feature_extractor=e}async _call(e,...en){return await this.feature_extractor(e,...en)}}class SamProcessor extends Processor{async _call(...e){return await this.feature_extractor(...e)}post_process_masks(...e){return this.feature_extractor.post_process_masks(...e)}reshape_input_points(...e){return this.feature_extractor.reshape_input_points(...e)}}class WhisperProcessor extends Processor{async _call(e){return await this.feature_extractor(e)}}class Wav2Vec2ProcessorWithLM extends Processor{async _call(e){return await this.feature_extractor(e)}}class SpeechT5Processor extends Processor{async _call(e){return await this.feature_extractor(e)}}class OwlViTProcessor extends Processor{}class AutoProcessor{static async from_pretrained(e,{progress_callback:en=null,config:tn=null,cache_dir:nn=null,local_files_only:sn=!1,revision:on="main"}={}){let un=tn??await getModelJSON(e,"preprocessor_config.json",!0,{progress_callback:en,cache_dir:nn,local_files_only:sn,revision:on}),dn=un.feature_extractor_type??un.image_processor_type,fn=this.FEATURE_EXTRACTOR_CLASS_MAPPING[dn];if(!fn)if(un.size!==void 0)console.warn(`Feature extractor type "${dn}" not found, assuming ImageFeatureExtractor due to size parameter in config.`),fn=ImageFeatureExtractor;else throw new Error(`Unknown Feature Extractor type: ${dn}`);let hn=this.PROCESSOR_CLASS_MAPPING[un.processor_class]??Processor,an=new fn(un);return new hn(an)}}Mr(AutoProcessor,"FEATURE_EXTRACTOR_CLASS_MAPPING",{ImageFeatureExtractor,WhisperFeatureExtractor,ViTFeatureExtractor,MobileViTFeatureExtractor,MobileViTImageProcessor,OwlViTFeatureExtractor,Owlv2ImageProcessor,CLIPFeatureExtractor,ChineseCLIPFeatureExtractor,SiglipImageProcessor,ConvNextFeatureExtractor,ConvNextImageProcessor,SegformerFeatureExtractor,BitImageProcessor,DPTImageProcessor,DPTFeatureExtractor,GLPNFeatureExtractor,BeitFeatureExtractor,DeiTFeatureExtractor,DetrFeatureExtractor,YolosFeatureExtractor,DonutFeatureExtractor,NougatImageProcessor,EfficientNetImageProcessor,ViTImageProcessor,VitMatteImageProcessor,SamImageProcessor,Swin2SRImageProcessor,Wav2Vec2FeatureExtractor,SeamlessM4TFeatureExtractor,SpeechT5FeatureExtractor,ASTFeatureExtractor,ClapFeatureExtractor}),Mr(AutoProcessor,"PROCESSOR_CLASS_MAPPING",{WhisperProcessor,Wav2Vec2ProcessorWithLM,SamProcessor,SpeechT5Processor,OwlViTProcessor});async function prepareImages(St){return Array.isArray(St)||(St=[St]),await Promise.all(St.map(e=>RawImage.read(e)))}async function prepareAudios(St,e){return Array.isArray(St)||(St=[St]),await Promise.all(St.map(en=>typeof en=="string"||en instanceof URL?read_audio(en,e):en instanceof Float64Array?new Float32Array(en):en))}function get_bounding_box(St,e){e&&(St=St.map(on=>on|0));const[en,tn,nn,sn]=St;return{xmin:en,ymin:tn,xmax:nn,ymax:sn}}class Pipeline extends Callable{constructor({task:e,model:en,tokenizer:tn=null,processor:nn=null}){super(),this.task=e,this.model=en,this.tokenizer=tn,this.processor=nn}async dispose(){await this.model.dispose()}}class TextClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{topk:en=1}={}){const tn=this.tokenizer(e,{padding:!0,truncation:!0}),nn=await this.model(tn),sn=this.model.config.problem_type==="multi_label_classification"?dn=>dn.sigmoid().data:dn=>softmax(dn.data),on=this.model.config.id2label,un=[];for(const dn of nn.logits){const fn=sn(dn),an=getTopItems(fn,en).map(rn=>({label:on[rn[0]],score:rn[1]}));en===1?un.push(...an):un.push(an)}return Array.isArray(e)||en===1?un:un[0]}}class TokenClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{ignore_labels:en=["O"]}={}){const tn=Array.isArray(e),nn=this.tokenizer(tn?e:[e],{padding:!0,truncation:!0}),on=(await this.model(nn)).logits,un=this.model.config.id2label,dn=[];for(let fn=0;fn<on.dims[0];++fn){const hn=nn.input_ids[fn],an=on[fn],rn=[];for(let cn=0;cn<an.dims[0];++cn){const pn=an[cn],mn=max(pn.data)[1],xn=un?un[mn]:`LABEL_${mn}`;if(en.includes(xn))continue;const gn=this.tokenizer.decode([hn[cn].item()],{skip_special_tokens:!0});if(gn==="")continue;const yn=softmax(pn.data);rn.push({entity:xn,score:yn[mn],index:cn,word:gn,start:null,end:null})}dn.push(rn)}return tn?dn:dn[0]}}class QuestionAnsweringPipeline extends Pipeline{constructor(e){super(e)}async _call(e,en,{topk:tn=1}={}){const nn=this.tokenizer(e,{text_pair:en,padding:!0,truncation:!0}),sn=await this.model(nn),on=[];for(let un=0;un<sn.start_logits.dims[0];++un){const dn=nn.input_ids[un],fn=dn.indexOf(this.tokenizer.sep_token_id),hn=Array.from(softmax(sn.start_logits[un].data)).map((cn,pn)=>[cn,pn]).filter(cn=>cn[1]>fn),an=Array.from(softmax(sn.end_logits[un].data)).map((cn,pn)=>[cn,pn]).filter(cn=>cn[1]>fn),rn=product(hn,an).filter(cn=>cn[0][1]<=cn[1][1]).map(cn=>[cn[0][1],cn[1][1],cn[0][0]*cn[1][0]]).sort((cn,pn)=>pn[2]-cn[2]);for(let cn=0;cn<Math.min(rn.length,tn);++cn){const[pn,mn,xn]=rn[cn],gn=[...dn].slice(pn,mn+1),yn=this.tokenizer.decode(gn,{skip_special_tokens:!0});on.push({answer:yn,score:xn})}}return tn===1?on[0]:on}}class FillMaskPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{topk:en=5}={}){const tn=this.tokenizer(e,{padding:!0,truncation:!0}),nn=await this.model(tn),sn=[];for(let on=0;on<tn.input_ids.dims[0];++on){const un=tn.input_ids[on],dn=un.indexOf(this.tokenizer.mask_token_id);if(dn===-1)throw Error(`Mask token (${this.tokenizer.mask_token}) not found in text.`);const hn=nn.logits[on][dn],an=getTopItems(softmax(hn.data),en);sn.push(an.map(rn=>{const cn=[...un];return cn[dn]=rn[0],{score:rn[1],token:rn[0],token_str:this.tokenizer.model.vocab[rn[0]],sequence:this.tokenizer.decode(cn,{skip_special_tokens:!0})}}))}return Array.isArray(e)?sn:sn[0]}}class Text2TextGenerationPipeline extends Pipeline{constructor(en){super(en);Mr(this,"_key","generated_text")}async _call(en,tn={}){Array.isArray(en)||(en=[en]),this.model.config.prefix&&(en=en.map(fn=>this.model.config.prefix+fn));const nn=this.model.config.task_specific_params;nn&&nn[this.task]&&nn[this.task].prefix&&(en=en.map(fn=>nn[this.task].prefix+fn));const sn=this.tokenizer,on={padding:!0,truncation:!0};let un;this instanceof TranslationPipeline&&"_build_translation_inputs"in sn?un=sn._build_translation_inputs(en,on,tn).input_ids:un=sn(en,on).input_ids;const dn=await this.model.generate(un,tn);return sn.batch_decode(dn,{skip_special_tokens:!0}).map(fn=>({[this._key]:fn}))}}class SummarizationPipeline extends Text2TextGenerationPipeline{constructor(en){super(en);Mr(this,"_key","summary_text")}}class TranslationPipeline extends Text2TextGenerationPipeline{constructor(en){super(en);Mr(this,"_key","translation_text")}}function isChat(St){return Array.isArray(St)&&St.every(e=>"role"in e&&"content"in e)}class TextGenerationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,en={}){let tn=!1,nn=!1,sn;if(typeof e=="string")sn=e=[e];else if(Array.isArray(e)&&e.every(pn=>typeof pn=="string"))tn=!0,sn=e;else{if(isChat(e))e=[e];else if(Array.isArray(e)&&e.every(isChat))tn=!0;else throw new Error("Input must be a string, an array of strings, a Chat, or an array of Chats");nn=!0,sn=e.map(pn=>this.tokenizer.apply_chat_template(pn,{tokenize:!1,add_generation_prompt:!0}))}const on=en.add_special_tokens??!1,un=nn?!1:en.return_full_text??!0;this.tokenizer.padding_side="left";const{input_ids:dn,attention_mask:fn}=this.tokenizer(sn,{add_special_tokens:on,padding:!0,truncation:!0}),hn=await this.model.generate(dn,en,null,{inputs_attention_mask:fn});let an=this.tokenizer.batch_decode(hn,{skip_special_tokens:!0}),rn;!un&&dn.dims.at(-1)>0&&(rn=this.tokenizer.batch_decode(dn,{skip_special_tokens:!0}).map(pn=>pn.length));const cn=Array.from({length:e.length},pn=>[]);for(let pn=0;pn<an.length;++pn){const mn=Math.floor(pn/hn.length*e.length);rn&&(an[pn]=an[pn].slice(rn[mn])),cn[mn].push({generated_text:nn?[...e[mn],{role:"assistant",content:an[pn]}]:an[pn]})}return!tn&&cn.length===1?cn[0]:cn}}class ZeroShotClassificationPipeline extends Pipeline{constructor(e){super(e),this.label2id=Object.fromEntries(Object.entries(this.model.config.label2id).map(([en,tn])=>[en.toLowerCase(),tn])),this.entailment_id=this.label2id.entailment,this.entailment_id===void 0&&(console.warn("Could not find 'entailment' in label2id mapping. Using 2 as entailment_id."),this.entailment_id=2),this.contradiction_id=this.label2id.contradiction??this.label2id.not_entailment,this.contradiction_id===void 0&&(console.warn("Could not find 'contradiction' in label2id mapping. Using 0 as contradiction_id."),this.contradiction_id=0)}async _call(e,en,{hypothesis_template:tn="This example is {}.",multi_label:nn=!1}={}){const sn=Array.isArray(e);sn||(e=[e]),Array.isArray(en)||(en=[en]);const on=en.map(fn=>tn.replace("{}",fn)),un=nn||en.length===1,dn=[];for(const fn of e){const hn=[];for(const cn of on){const pn=this.tokenizer(fn,{text_pair:cn,padding:!0,truncation:!0}),mn=await this.model(pn);un?hn.push([mn.logits.data[this.contradiction_id],mn.logits.data[this.entailment_id]]):hn.push(mn.logits.data[this.entailment_id])}const rn=(un?hn.map(cn=>softmax(cn)[1]):softmax(hn)).map((cn,pn)=>[cn,pn]).sort((cn,pn)=>pn[0]-cn[0]);dn.push({sequence:fn,labels:rn.map(cn=>en[cn[1]]),scores:rn.map(cn=>cn[0])})}return sn?dn:dn[0]}}class FeatureExtractionPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{pooling:en="none",normalize:tn=!1,quantize:nn=!1,precision:sn="binary"}={}){const on=this.tokenizer(e,{padding:!0,truncation:!0}),un=await this.model(on);let dn=un.last_hidden_state??un.logits??un.token_embeddings;if(en!=="none")if(en==="mean")dn=mean_pooling(dn,on.attention_mask);else if(en==="cls")dn=dn.slice(null,0);else throw Error(`Pooling method '${en}' not supported.`);return tn&&(dn=dn.normalize(2,-1)),nn&&(dn=quantize_embeddings(dn,sn)),dn}}class ImageFeatureExtractionPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{pool:en=null}={}){const tn=await prepareImages(e),{pixel_values:nn}=await this.processor(tn),sn=await this.model({pixel_values:nn});let on;if(en){if(!("pooler_output"in sn))throw Error("No pooled output was returned. Make sure the model has a 'pooler' layer when using the 'pool' option.");on=sn.pooler_output}else on=sn.last_hidden_state??sn.logits??sn.image_embeds;return on}}class AudioClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{topk:en=null}={}){const tn=!Array.isArray(e),nn=this.processor.feature_extractor.config.sampling_rate,sn=await prepareAudios(e,nn),on=this.model.config.id2label,un=[];for(const dn of sn){const fn=await this.processor(dn),an=(await this.model(fn)).logits[0],cn=getTopItems(softmax(an.data),en).map(pn=>({label:on[pn[0]],score:pn[1]}));en===1?un.push(...cn):un.push(cn)}return!tn||en===1?un:un[0]}}class ZeroShotAudioClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,en,{hypothesis_template:tn="This is a sound of {}."}={}){const nn=!Array.isArray(e);nn&&(e=[e]);const sn=en.map(hn=>tn.replace("{}",hn)),on=this.tokenizer(sn,{padding:!0,truncation:!0}),un=this.processor.feature_extractor.config.sampling_rate,dn=await prepareAudios(e,un),fn=[];for(const hn of dn){const an=await this.processor(hn),rn=await this.model({...on,...an}),cn=softmax(rn.logits_per_audio.data);fn.push([...cn].map((pn,mn)=>({score:pn,label:en[mn]})))}return nn?fn[0]:fn}}class AutomaticSpeechRecognitionPipeline extends Pipeline{constructor(e){super(e)}async _call(e,en={}){switch(this.model.config.model_type){case"whisper":return this._call_whisper(e,en);case"wav2vec2":case"wav2vec2-bert":case"unispeech":case"unispeech-sat":case"hubert":return this._call_wav2vec2(e,en);default:throw new Error(`AutomaticSpeechRecognitionPipeline does not support model type '${this.model.config.model_type}'.`)}}async _call_wav2vec2(e,en={}){en.language&&console.warn('`language` parameter is not yet supported for `wav2vec2` models, defaulting to "English".'),en.task&&console.warn('`task` parameter is not yet supported for `wav2vec2` models, defaulting to "transcribe".');const tn=!Array.isArray(e);tn&&(e=[e]);const nn=this.processor.feature_extractor.config.sampling_rate,sn=await prepareAudios(e,nn),on=[];for(const un of sn){const dn=await this.processor(un),hn=(await this.model(dn)).logits[0],an=[];for(const cn of hn)an.push(max(cn.data)[1]);const rn=this.tokenizer.decode(an);on.push({text:rn})}return tn?on[0]:on}async _call_whisper(e,en={}){const tn=en.return_timestamps??!1,nn=en.chunk_length_s??0,sn=en.chunk_callback??null,on=en.force_full_sequences??!1;let un=en.stride_length_s??null;tn==="word"&&(en.return_token_timestamps=!0);const dn=pop(en,"language",null),fn=pop(en,"task",null);if(dn||fn||tn){if(en.forced_decoder_ids)throw new Error("Cannot specify `language`/`task`/`return_timestamps` and `forced_decoder_ids` at the same time.");const xn=this.tokenizer.get_decoder_prompt_ids({language:dn,task:fn,no_timestamps:!tn});xn.length>0&&(en.forced_decoder_ids=xn)}const hn=!Array.isArray(e);hn&&(e=[e]);const an=this.processor.feature_extractor.config.chunk_length/this.model.config.max_source_positions,rn=this.processor.feature_extractor.config.hop_length,cn=this.processor.feature_extractor.config.sampling_rate,pn=await prepareAudios(e,cn),mn=[];for(const xn of pn){let gn=[];if(nn>0){if(un===null)un=nn/6;else if(nn<=un)throw Error("`chunk_length_s` must be larger than `stride_length_s`.");const wn=cn*nn,_n=cn*un,Tn=wn-2*_n;let An=0;for(;An<xn.length;){const Pn=xn.subarray(An,An+wn),Sn=await this.processor(Pn),Cn=An===0,Nn=An+Tn>=xn.length;gn.push({stride:[Pn.length,Cn?0:_n,Nn?0:_n],input_features:Sn.input_features,is_last:Nn}),An+=Tn}}else gn=[{stride:[xn.length,0,0],input_features:(await this.processor(xn)).input_features,is_last:!0}];for(const wn of gn){en.num_frames=Math.floor(wn.stride[0]/rn);const _n=await this.model.generate(wn.input_features,en);tn==="word"?(wn.tokens=_n.sequences[0],wn.token_timestamps=_n.token_timestamps.tolist()[0].map(Tn=>round(Tn,2))):wn.tokens=_n[0],wn.stride=wn.stride.map(Tn=>Tn/cn),sn!==null&&sn(wn)}const[yn,bn]=this.tokenizer._decode_asr(gn,{time_precision:an,return_timestamps:tn,force_full_sequences:on});mn.push({text:yn,...bn})}return hn?mn[0]:mn}}class ImageToTextPipeline extends Pipeline{constructor(e){super(e)}async _call(e,en={}){const tn=Array.isArray(e),nn=await prepareImages(e),{pixel_values:sn}=await this.processor(nn),on=[];for(const un of sn){un.dims=[1,...un.dims];const dn=await this.model.generate(un,en),fn=this.tokenizer.batch_decode(dn,{skip_special_tokens:!0}).map(hn=>({generated_text:hn.trim()}));on.push(fn)}return tn?on:on[0]}}class ImageClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{topk:en=1}={}){const tn=Array.isArray(e),nn=await prepareImages(e),{pixel_values:sn}=await this.processor(nn),on=await this.model({pixel_values:sn}),un=this.model.config.id2label,dn=[];for(const fn of on.logits){const an=getTopItems(softmax(fn.data),en).map(rn=>({label:un[rn[0]],score:rn[1]}));en===1?dn.push(...an):dn.push(an)}return tn||en===1?dn:dn[0]}}class ImageSegmentationPipeline extends Pipeline{constructor(e){super(e),this.subtasks_mapping={panoptic:"post_process_panoptic_segmentation",instance:"post_process_instance_segmentation",semantic:"post_process_semantic_segmentation"}}async _call(e,{threshold:en=.5,mask_threshold:tn=.5,overlap_mask_area_threshold:nn=.8,label_ids_to_fuse:sn=null,target_sizes:on=null,subtask:un=null}={}){if(Array.isArray(e)&&e.length!==1)throw Error("Image segmentation pipeline currently only supports a batch size of 1.");const fn=await prepareImages(e),hn=fn.map(gn=>[gn.height,gn.width]),{pixel_values:an,pixel_mask:rn}=await this.processor(fn),cn=await this.model({pixel_values:an,pixel_mask:rn});let pn=null;if(un!==null)pn=this.subtasks_mapping[un];else for(let[gn,yn]of Object.entries(this.subtasks_mapping))if(yn in this.processor.feature_extractor){pn=this.processor.feature_extractor[yn].bind(this.processor.feature_extractor),un=gn;break}const mn=this.model.config.id2label,xn=[];if(un==="panoptic"||un==="instance"){const gn=pn(cn,en,tn,nn,sn,on??hn)[0],yn=gn.segmentation;for(const bn of gn.segments_info){const wn=new Uint8ClampedArray(yn.data.length);for(let Tn=0;Tn<yn.data.length;++Tn)yn.data[Tn]===bn.id&&(wn[Tn]=255);const _n=new RawImage(wn,yn.dims[1],yn.dims[0],1);xn.push({score:bn.score,label:mn[bn.label_id],mask:_n})}}else if(un==="semantic"){const{segmentation:gn,labels:yn}=pn(cn,on??hn)[0];for(const bn of yn){const wn=new Uint8ClampedArray(gn.data.length);for(let Tn=0;Tn<gn.data.length;++Tn)gn.data[Tn]===bn&&(wn[Tn]=255);const _n=new RawImage(wn,gn.dims[1],gn.dims[0],1);xn.push({score:null,label:mn[bn],mask:_n})}}else throw Error(`Subtask ${un} not supported.`);return xn}}class ZeroShotImageClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,en,{hypothesis_template:tn="This is a photo of {}"}={}){const nn=Array.isArray(e),sn=await prepareImages(e),on=en.map(rn=>tn.replace("{}",rn)),un=this.tokenizer(on,{padding:this.model.config.model_type==="siglip"?"max_length":!0,truncation:!0}),{pixel_values:dn}=await this.processor(sn),fn=await this.model({...un,pixel_values:dn}),hn=this.model.config.model_type==="siglip"?rn=>rn.sigmoid().data:rn=>softmax(rn.data),an=[];for(const rn of fn.logits_per_image){const pn=[...hn(rn)].map((mn,xn)=>({score:mn,label:en[xn]}));pn.sort((mn,xn)=>xn.score-mn.score),an.push(pn)}return nn?an:an[0]}}class ObjectDetectionPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{threshold:en=.9,percentage:tn=!1}={}){const nn=Array.isArray(e);if(nn&&e.length!==1)throw Error("Object detection pipeline currently only supports a batch size of 1.");const sn=await prepareImages(e),on=tn?null:sn.map(cn=>[cn.height,cn.width]),{pixel_values:un,pixel_mask:dn}=await this.processor(sn),fn=await this.model({pixel_values:un,pixel_mask:dn}),hn=this.processor.feature_extractor.post_process_object_detection(fn,en,on),an=this.model.config.id2label,rn=hn.map(cn=>cn.boxes.map((pn,mn)=>({score:cn.scores[mn],label:an[cn.classes[mn]],box:get_bounding_box(pn,!tn)})));return nn?rn:rn[0]}}class ZeroShotObjectDetectionPipeline extends Pipeline{constructor(e){super(e)}async _call(e,en,{threshold:tn=.1,topk:nn=null,percentage:sn=!1}={}){const on=Array.isArray(e),un=await prepareImages(e),dn=this.tokenizer(en,{padding:!0,truncation:!0}),fn=await this.processor(un),hn=[];for(let an=0;an<un.length;++an){const rn=un[an],cn=sn?null:[[rn.height,rn.width]],pn=fn.pixel_values[an].unsqueeze_(0),mn=await this.model({...dn,pixel_values:pn}),xn=this.processor.feature_extractor.post_process_object_detection(mn,tn,cn,!0)[0];let gn=xn.boxes.map((yn,bn)=>({score:xn.scores[bn],label:en[xn.classes[bn]],box:get_bounding_box(yn,!sn)})).sort((yn,bn)=>bn.score-yn.score);nn!==null&&(gn=gn.slice(0,nn)),hn.push(gn)}return on?hn:hn[0]}}class DocumentQuestionAnsweringPipeline extends Pipeline{constructor(e){super(e)}async _call(e,en,tn={}){const nn=(await prepareImages(e))[0],{pixel_values:sn}=await this.processor(nn),on=`<s_docvqa><s_question>${en}</s_question><s_answer>`,un=this.tokenizer(on,{add_special_tokens:!1,padding:!0,truncation:!0}).input_ids,dn=await this.model.generate(sn,{...tn,decoder_input_ids:un,max_length:this.model.config.decoder.max_position_embeddings}),hn=this.tokenizer.batch_decode(dn)[0].match(/<s_answer>(.*?)<\/s_answer>/);let an=null;return hn&&hn.length>=2&&(an=hn[1].trim()),[{answer:an}]}}class TextToAudioPipeline extends Pipeline{constructor(en){super(en);Mr(this,"DEFAULT_VOCODER_ID","Xenova/speecht5_hifigan");this.vocoder=en.vocoder??null}async _call(en,{speaker_embeddings:tn=null}={}){return this.processor?this._call_text_to_spectrogram(en,{speaker_embeddings:tn}):this._call_text_to_waveform(en)}async _call_text_to_waveform(en){const tn=this.tokenizer(en,{padding:!0,truncation:!0}),{waveform:nn}=await this.model(tn),sn=this.model.config.sampling_rate;return{audio:nn.data,sampling_rate:sn}}async _call_text_to_spectrogram(en,{speaker_embeddings:tn}){if(this.vocoder||(console.log("No vocoder specified, using default HifiGan vocoder."),this.vocoder=await AutoModel.from_pretrained(this.DEFAULT_VOCODER_ID,{quantized:!1})),(typeof tn=="string"||tn instanceof URL)&&(tn=new Float32Array(await(await fetch(tn)).arrayBuffer())),tn instanceof Float32Array)tn=new Tensor("float32",tn,[1,tn.length]);else if(!(tn instanceof Tensor))throw new Error("Speaker embeddings must be a `Tensor`, `Float32Array`, `string`, or `URL`.");const{input_ids:nn}=this.tokenizer(en,{padding:!0,truncation:!0}),{waveform:sn}=await this.model.generate_speech(nn,tn,{vocoder:this.vocoder}),on=this.processor.feature_extractor.config.sampling_rate;return{audio:sn.data,sampling_rate:on}}}class ImageToImagePipeline extends Pipeline{constructor(e){super(e)}async _call(e){const en=await prepareImages(e),tn=await this.processor(en),nn=await this.model(tn),sn=[];for(const on of nn.reconstruction){const un=on.squeeze().clamp_(0,1).mul_(255).round_().to("uint8");sn.push(RawImage.fromTensor(un))}return sn.length>1?sn:sn[0]}}class DepthEstimationPipeline extends Pipeline{constructor(e){super(e)}async _call(e){const en=await prepareImages(e),tn=await this.processor(en),{predicted_depth:nn}=await this.model(tn),sn=[];for(let on=0;on<en.length;++on){const un=interpolate(nn[on],en[on].size.reverse(),"bilinear",!1),dn=un.mul_(255/max(un.data)[0]).to("uint8");sn.push({predicted_depth:nn[on],depth:RawImage.fromTensor(dn)})}return sn.length>1?sn:sn[0]}}const SUPPORTED_TASKS=Object.freeze({"text-classification":{tokenizer:AutoTokenizer,pipeline:TextClassificationPipeline,model:AutoModelForSequenceClassification,default:{model:"Xenova/distilbert-base-uncased-finetuned-sst-2-english"},type:"text"},"token-classification":{tokenizer:AutoTokenizer,pipeline:TokenClassificationPipeline,model:AutoModelForTokenClassification,default:{model:"Xenova/bert-base-multilingual-cased-ner-hrl"},type:"text"},"question-answering":{tokenizer:AutoTokenizer,pipeline:QuestionAnsweringPipeline,model:AutoModelForQuestionAnswering,default:{model:"Xenova/distilbert-base-cased-distilled-squad"},type:"text"},"fill-mask":{tokenizer:AutoTokenizer,pipeline:FillMaskPipeline,model:AutoModelForMaskedLM,default:{model:"Xenova/bert-base-uncased"},type:"text"},summarization:{tokenizer:AutoTokenizer,pipeline:SummarizationPipeline,model:AutoModelForSeq2SeqLM,default:{model:"Xenova/distilbart-cnn-6-6"},type:"text"},translation:{tokenizer:AutoTokenizer,pipeline:TranslationPipeline,model:AutoModelForSeq2SeqLM,default:{model:"Xenova/t5-small"},type:"text"},"text2text-generation":{tokenizer:AutoTokenizer,pipeline:Text2TextGenerationPipeline,model:AutoModelForSeq2SeqLM,default:{model:"Xenova/flan-t5-small"},type:"text"},"text-generation":{tokenizer:AutoTokenizer,pipeline:TextGenerationPipeline,model:AutoModelForCausalLM,default:{model:"Xenova/gpt2"},type:"text"},"zero-shot-classification":{tokenizer:AutoTokenizer,pipeline:ZeroShotClassificationPipeline,model:AutoModelForSequenceClassification,default:{model:"Xenova/distilbert-base-uncased-mnli"},type:"text"},"audio-classification":{pipeline:AudioClassificationPipeline,model:AutoModelForAudioClassification,processor:AutoProcessor,default:{model:"Xenova/wav2vec2-base-superb-ks"},type:"audio"},"zero-shot-audio-classification":{tokenizer:AutoTokenizer,pipeline:ZeroShotAudioClassificationPipeline,model:AutoModel,processor:AutoProcessor,default:{model:"Xenova/clap-htsat-unfused"},type:"multimodal"},"automatic-speech-recognition":{tokenizer:AutoTokenizer,pipeline:AutomaticSpeechRecognitionPipeline,model:[AutoModelForSpeechSeq2Seq,AutoModelForCTC],processor:AutoProcessor,default:{model:"Xenova/whisper-tiny.en"},type:"multimodal"},"text-to-audio":{tokenizer:AutoTokenizer,pipeline:TextToAudioPipeline,model:[AutoModelForTextToWaveform,AutoModelForTextToSpectrogram],processor:[AutoProcessor,null],default:{model:"Xenova/speecht5_tts"},type:"text"},"image-to-text":{tokenizer:AutoTokenizer,pipeline:ImageToTextPipeline,model:AutoModelForVision2Seq,processor:AutoProcessor,default:{model:"Xenova/vit-gpt2-image-captioning"},type:"multimodal"},"image-classification":{pipeline:ImageClassificationPipeline,model:AutoModelForImageClassification,processor:AutoProcessor,default:{model:"Xenova/vit-base-patch16-224"},type:"multimodal"},"image-segmentation":{pipeline:ImageSegmentationPipeline,model:[AutoModelForImageSegmentation,AutoModelForSemanticSegmentation],processor:AutoProcessor,default:{model:"Xenova/detr-resnet-50-panoptic"},type:"multimodal"},"zero-shot-image-classification":{tokenizer:AutoTokenizer,pipeline:ZeroShotImageClassificationPipeline,model:AutoModel,processor:AutoProcessor,default:{model:"Xenova/clip-vit-base-patch32"},type:"multimodal"},"object-detection":{pipeline:ObjectDetectionPipeline,model:AutoModelForObjectDetection,processor:AutoProcessor,default:{model:"Xenova/detr-resnet-50"},type:"multimodal"},"zero-shot-object-detection":{tokenizer:AutoTokenizer,pipeline:ZeroShotObjectDetectionPipeline,model:AutoModelForZeroShotObjectDetection,processor:AutoProcessor,default:{model:"Xenova/owlvit-base-patch32"},type:"multimodal"},"document-question-answering":{tokenizer:AutoTokenizer,pipeline:DocumentQuestionAnsweringPipeline,model:AutoModelForDocumentQuestionAnswering,processor:AutoProcessor,default:{model:"Xenova/donut-base-finetuned-docvqa"},type:"multimodal"},"image-to-image":{pipeline:ImageToImagePipeline,model:AutoModelForImageToImage,processor:AutoProcessor,default:{model:"Xenova/swin2SR-classical-sr-x2-64"},type:"image"},"depth-estimation":{pipeline:DepthEstimationPipeline,model:AutoModelForDepthEstimation,processor:AutoProcessor,default:{model:"Xenova/dpt-large"},type:"image"},"feature-extraction":{tokenizer:AutoTokenizer,pipeline:FeatureExtractionPipeline,model:AutoModel,default:{model:"Xenova/all-MiniLM-L6-v2"},type:"text"},"image-feature-extraction":{processor:AutoProcessor,pipeline:ImageFeatureExtractionPipeline,model:[AutoModelForImageFeatureExtraction,AutoModel],default:{model:"Xenova/vit-base-patch16-224-in21k"},type:"image"}}),TASK_ALIASES=Object.freeze({"sentiment-analysis":"text-classification",ner:"token-classification",asr:"automatic-speech-recognition","text-to-speech":"text-to-audio",embeddings:"feature-extraction"});async function pipeline(St,e=null,{quantized:en=!0,progress_callback:tn=null,config:nn=null,cache_dir:sn=null,local_files_only:on=!1,revision:un="main",model_file_name:dn=null}={}){St=TASK_ALIASES[St]??St;const fn=SUPPORTED_TASKS[St.split("_",1)[0]];if(!fn)throw Error(`Unsupported pipeline: ${St}. Must be one of [${Object.keys(SUPPORTED_TASKS)}]`);e||(e=fn.default.model,console.log(`No model specified. Using default model: "${e}".`));const hn={quantized:en,progress_callback:tn,config:nn,cache_dir:sn,local_files_only:on,revision:un,model_file_name:dn},an=new Map([["tokenizer",fn.tokenizer],["model",fn.model],["processor",fn.processor]]),rn=await loadItems(an,e,hn);rn.task=St,dispatchCallback(tn,{status:"ready",task:St,model:e});const cn=fn.pipeline;return new cn(rn)}async function loadItems(St,e,en){const tn=Object.create(null),nn=[];for(let[sn,on]of St.entries()){if(!on)continue;let un;Array.isArray(on)?un=new Promise(async(dn,fn)=>{let hn;for(let an of on){if(an===null){dn(null);return}try{dn(await an.from_pretrained(e,en));return}catch(rn){hn=rn}}fn(hn)}):un=on.from_pretrained(e,en),tn[sn]=un,nn.push(un)}await Promise.all(nn);for(let[sn,on]of Object.entries(tn))tn[sn]=await on;return tn}class TranscriptionEngine{constructor(){this.pipe=null,this.modelName="Xenova/whisper-tiny",this.isLoading=!1}async initialize(){if(!this.pipe){this.isLoading=!0;try{console.log("Loading Whisper model..."),this.pipe=await pipeline("automatic-speech-recognition",this.modelName),console.log("Whisper model loaded successfully")}catch(e){throw console.error("Failed to load Whisper model:",e),e}finally{this.isLoading=!1}}}async transcribe(e){this.pipe||await this.initialize();try{const en=URL.createObjectURL(e),tn=await this.pipe(en,{return_timestamps:!0,chunk_length_s:30,stride_length_s:5});return URL.revokeObjectURL(en),this.processOutput(tn)}catch(en){throw console.error("Transcription failed:",en),en}}processOutput(e){const en=[];if(e.chunks)e.chunks.forEach(tn=>{const nn=tn.text.trim(),[sn,on]=tn.timestamp,un=nn.split(/\s+/),fn=(on-sn)/un.length;un.forEach((hn,an)=>{en.push({word:hn,start:sn+an*fn,end:sn+(an+1)*fn})})});else{const tn=e.text.trim();en.push({word:tn,start:0,end:0})}return{text:e.text,words:en}}}const transcriptionEngine=new TranscriptionEngine,DB_NAME="VocalGEM_DB",STORE_NAME="analysis_sessions",DB_VERSION=1;class HistoryService{constructor(){this.db=null}async open(){return this.db?this.db:new Promise((e,en)=>{const tn=indexedDB.open(DB_NAME,DB_VERSION);tn.onerror=nn=>{console.error("IndexedDB error:",nn.target.error),en("Could not open database")},tn.onsuccess=nn=>{this.db=nn.target.result,e(this.db)},tn.onupgradeneeded=nn=>{const sn=nn.target.result;sn.objectStoreNames.contains(STORE_NAME)||sn.createObjectStore(STORE_NAME,{keyPath:"id"})}})}async saveSession(e){return await this.open(),new Promise((en,tn)=>{const sn=this.db.transaction([STORE_NAME],"readwrite").objectStore(STORE_NAME),on={id:Date.now(),date:new Date().toISOString(),...e},un=sn.add(on);un.onsuccess=()=>{en(on.id)},un.onerror=dn=>{console.error("Error saving session:",dn.target.error),tn("Could not save session")}})}async getAllSessions(){return await this.open(),new Promise((e,en)=>{const sn=this.db.transaction([STORE_NAME],"readonly").objectStore(STORE_NAME).getAll();sn.onsuccess=()=>{const on=sn.result.sort((un,dn)=>dn.id-un.id);e(on)},sn.onerror=on=>{console.error("Error fetching sessions:",on.target.error),en("Could not fetch sessions")}})}async getSession(e){return await this.open(),new Promise((en,tn)=>{const on=this.db.transaction([STORE_NAME],"readonly").objectStore(STORE_NAME).get(e);on.onsuccess=()=>{en(on.result)},on.onerror=un=>{tn("Could not fetch session")}})}async deleteSession(e){return await this.open(),new Promise((en,tn)=>{const on=this.db.transaction([STORE_NAME],"readwrite").objectStore(STORE_NAME).delete(e);on.onsuccess=()=>{en()},on.onerror=un=>{tn("Could not delete session")}})}}const historyService=new HistoryService,EXERCISE_MAP={"Pitch Pipe":{route:"/tools",component:"PitchPipe",difficulty:"beginner",duration:5},"Pitch Staircase":{route:"/games",component:"StaircaseGame",difficulty:"intermediate",duration:3},"Vowel Practice":{route:"/articulation",component:"ArticulationView",difficulty:"beginner",duration:10},"Breath Support":{route:"/tools",component:"BreathPacer",difficulty:"beginner",duration:5},"Reading Practice":{route:"/practice",component:"PracticeView",difficulty:"intermediate",duration:15},"Resonance River":{route:"/games",component:"ResonanceRiverGame",difficulty:"intermediate",duration:5},"Intonation Exercise":{route:"/tools",component:"IntonationExercise",difficulty:"advanced",duration:10}},CoachEngine={generateFeedback:(St,e)=>{var cn;const{overall:en}=St,tn=(e==null?void 0:e.targetPitch)||{min:170,max:220},nn=(e==null?void 0:e.gender)||"feminine",sn=evaluatePitch((cn=en.pitch)==null?void 0:cn.mean,tn),on=evaluateResonance(en.formants,nn),un=evaluateStability(en.jitter,en.shimmer),dn=evaluateVoiceQuality(en.hnr,en.shimmer),fn=determineFocusArea([sn,on,un,dn]),hn=generateContextualSummary(sn,on,dn),an=identifyStrengths([sn,on,un,dn]),rn=generateContextualTips(sn,on,dn,nn);return{summary:hn,strengths:an,focusArea:fn,tips:rn,details:{pitch:sn,resonance:on,stability:un,voiceQuality:dn}}},getExerciseDetails:St=>EXERCISE_MAP[St]||null},evaluatePitch=(St,e)=>{if(!St)return{status:"unknown",score:0,title:"Pitch",message:"Could not detect pitch."};const{min:en,max:tn}=e,nn=(en+tn)/2,sn=tn-en;if(St>=en&&St<=tn){const on=Math.abs(St-nn)/(sn/2);return{status:"good",score:on<.3?10:on<.6?9:8,title:"Pitch",message:`Your average pitch (${St.toFixed(0)}Hz) is right in your target range.`,value:St}}else if(St<en){const on=en-St,un=on>30?"significant":on>15?"moderate":"slight";return{status:"low",score:un==="significant"?3:un==="moderate"?5:7,title:"Pitch",message:`Your pitch (${St.toFixed(0)}Hz) is ${un==="significant"?"significantly":un==="moderate"?"moderately":"slightly"} lower than your target (${en}Hz).`,value:St,target:en,diff:-on}}else{const on=St-tn,un=on>30?"significant":on>15?"moderate":"slight";return{status:"high",score:un==="significant"?3:un==="moderate"?5:7,title:"Pitch",message:`Your pitch (${St.toFixed(0)}Hz) is ${un==="significant"?"significantly":un==="moderate"?"moderately":"slightly"} higher than your target (${tn}Hz).`,value:St,target:tn,diff:on}}},evaluateResonance=(St,e)=>{if(!St||!St.f1)return{status:"unknown",score:0,title:"Resonance",message:"Could not detect resonance."};const{f1:en,f2:tn}=St;let nn="neutral",sn=5,on="",un="";return e==="feminine"?en>450&&tn>1800?(nn="bright",sn=10,on="Your resonance is bright and forward, which is excellent for a feminine voice."):en>400&&tn>1600?(nn="moderately-bright",sn=8,on="Your resonance is fairly bright. You're on the right track!",un="Try raising your larynx slightly and smiling with your throat to brighten it further."):en<350||tn<1400?(nn="dark",sn=3,on="Your resonance is quite dark (low R1). This can make your voice sound more masculine.",un="Focus on 'small dog' exercises - imagine a small dog barking in your throat. This raises the larynx and brightens resonance."):(nn="neutral",sn=6,on="Your resonance is in a neutral range.",un="Try to brighten it by raising your soft palate and creating more space in the front of your mouth."):e==="masculine"?en<350&&tn<1500?(nn="dark",sn=10,on="Your resonance is rich and dark, perfect for a masculine voice."):en<400&&tn<1700?(nn="moderately-dark",sn=8,on="Your resonance is fairly dark. Good progress!",un="Try relaxing your throat and lowering your larynx slightly to darken it more."):en>450||tn>1800?(nn="bright",sn=3,on="Your resonance is quite bright. This can make your voice sound more feminine.",un="Focus on creating more space in the back of your throat. Think 'big dog' - a deep, resonant bark."):(nn="neutral",sn=6,on="Your resonance is neutral.",un="Try to darken it by relaxing your throat and creating more space in the pharynx."):en>=350&&en<=450&&tn>=1500&&tn<=1800?(nn="neutral",sn=10,on="Your resonance is perfectly balanced in the androgynous range."):(nn=en>450?"bright":"dark",sn=7,on=`Your resonance is slightly ${nn}. For an androgynous voice, aim for the middle ground.`),{status:nn,score:sn,title:"Resonance",message:on,advice:un,f1:en,f2:tn}},evaluateStability=(St,e)=>{if(St===void 0)return{status:"unknown",score:0,title:"Stability"};const en=St<1?10:St<2?7:St<3.5?4:2,tn=e!==void 0?e<3?10:e<6?6:3:10,nn=Math.round((en+tn)/2);return nn>=9?{status:"stable",score:nn,title:"Stability",message:"Your voice is very stable and clear.",jitter:St,shimmer:e}:nn>=6?{status:"moderate",score:nn,title:"Stability",message:"There is some slight wavering in your voice.",advice:"Focus on breath support and avoid pushing too hard. Gentle, supported airflow creates stability.",jitter:St,shimmer:e}:{status:"unstable",score:nn,title:"Stability",message:"Your voice shows instability. This might be vocal fry, breathiness, or tension.",advice:"Practice breath support exercises and ensure you're not straining. Vocal fry often happens when pitch is too low for your anatomy.",jitter:St,shimmer:e}},evaluateVoiceQuality=(St,e)=>{if(St===void 0)return{status:"unknown",score:0,title:"Voice Quality"};let en,tn,nn,sn;return St>15?(en="clear",tn=10,nn="Your voice quality is excellent - clear and resonant."):St>12?(en="good",tn=8,nn="Your voice quality is good with minimal breathiness."):St>10?(en="moderate",tn=6,nn="Your voice has some breathiness.",sn="Try to engage your vocal folds more fully. Avoid whispery or overly breathy phonation."):(en="breathy",tn=3,nn="Your voice is quite breathy or harsh.",sn="This could be from incomplete vocal fold closure or excessive tension. Practice gentle 'vocal fry to clear voice' exercises."),{status:en,score:tn,title:"Voice Quality",message:nn,advice:sn,hnr:St,shimmer:e}},determineFocusArea=St=>{const en=[...St].filter(tn=>tn.score>0).sort((tn,nn)=>tn.score-nn.score)[0];if(!en||en.score>=8)return{title:"Maintenance & Refinement",description:"Everything looks great! Keep practicing to build muscle memory and consistency.",exercise:"Reading Practice",exerciseDetails:EXERCISE_MAP["Reading Practice"],priority:"low"};if(en.title==="Pitch"){const tn=en.status==="low";return{title:"Pitch Control",description:en.message+(en.advice?` ${en.advice}`:""),exercise:tn?"Pitch Staircase":"Pitch Pipe",exerciseDetails:EXERCISE_MAP[tn?"Pitch Staircase":"Pitch Pipe"],advice:tn?"Practice raising your pitch gradually. Start with humming at your current pitch, then slide up slowly.":"Practice lowering your pitch gently. Avoid vocal fry - aim for a clear, supported tone.",priority:en.score<5?"high":"medium"}}else{if(en.title==="Resonance")return{title:"Resonance Shaping",description:en.message,exercise:"Vowel Practice",exerciseDetails:EXERCISE_MAP["Vowel Practice"],advice:en.advice||"Focus on oral space and larynx position. Vowel exercises help train resonance control.",priority:en.score<5?"high":"medium"};if(en.title==="Stability")return{title:"Vocal Stability",description:en.message,exercise:"Breath Support",exerciseDetails:EXERCISE_MAP["Breath Support"],advice:en.advice||"Stability comes from good breath support. Practice diaphragmatic breathing.",priority:en.score<4?"high":"medium"};if(en.title==="Voice Quality")return{title:"Voice Quality",description:en.message,exercise:"Breath Support",exerciseDetails:EXERCISE_MAP["Breath Support"],advice:en.advice||"Clear voice quality requires balanced vocal fold closure and airflow.",priority:en.score<5?"high":"medium"}}return{title:"General Practice",description:"Continue exploring your voice.",exercise:"Reading Practice",exerciseDetails:EXERCISE_MAP["Reading Practice"],priority:"low"}},generateContextualSummary=(St,e,en,tn)=>{const nn=St.score>=8&&e.score>=8&&en.score>=8,sn=St.score>=8,on=e.score>=8,un=en.score>=8;return nn?"Outstanding session! Your pitch, resonance, and voice quality are all aligned with your goals. Keep up the excellent work!":sn&&!on&&un?"Your pitch and voice quality are excellent! Now let's refine your resonance to complete the picture.":!sn&&on&&un?"Great resonance and voice quality! Your pitch needs some adjustment to hit your target range.":sn&&on&&!un?"Your pitch and resonance are spot-on! Let's work on voice quality to make your voice clearer and more resonant.":!sn&&!on?"We have clear areas to work on. Let's start with your primary focus area and build from there.":"Good effort! We've identified some areas for improvement. Focus on one thing at a time for best results."},identifyStrengths=St=>St.filter(e=>e.score>=8).map(e=>e.message),generateContextualTips=(St,e,en,tn)=>{const nn=[];return St.score<7&&e.score<7&&nn.push(" Pitch and resonance work together. As you adjust pitch, your resonance may naturally shift too."),en.score<7&&nn.push(" Voice quality improves with proper breath support. Never strain or push your voice."),e.status==="dark"&&tn==="feminine"&&nn.push(" Try the 'small dog' exercise: imagine a small, yappy dog barking in your throat. This raises the larynx and brightens resonance."),e.status==="bright"&&tn==="masculine"&&nn.push(" Try the 'big dog' exercise: imagine a large dog's deep bark. This lowers the larynx and darkens resonance."),St.score>=8&&e.score<6&&nn.push(" You've mastered pitch! Resonance is the next frontier. It's often more important than pitch for gender perception."),nn},PitchTrace=({data:St,targetRange:e,currentTime:en,duration:tn})=>{const nn=reactExports.useRef(null);return reactExports.useEffect(()=>{const sn=nn.current;if(!sn||!St||St.length===0)return;const on=sn.getContext("2d"),un=sn.width,dn=sn.height;on.clearRect(0,0,un,dn);const fn=50,hn=400,an=un/tn,rn=dn/(hn-fn),cn=pn=>dn-(pn-fn)*rn;if(e){const pn=cn(e.min),mn=cn(e.max);on.fillStyle="rgba(74, 222, 128, 0.1)",on.fillRect(0,mn,un,pn-mn),on.strokeStyle="rgba(74, 222, 128, 0.3)",on.lineWidth=1,on.setLineDash([5,5]),on.beginPath(),on.moveTo(0,pn),on.lineTo(un,pn),on.stroke(),on.beginPath(),on.moveTo(0,mn),on.lineTo(un,mn),on.stroke(),on.setLineDash([])}on.lineWidth=2,on.lineCap="round",on.lineJoin="round";for(let pn=1;pn<St.length;pn++){const mn=St[pn-1],xn=St[pn];if(!mn.frequency||!xn.frequency)continue;const gn=mn.time*an,yn=cn(mn.frequency),bn=xn.time*an,wn=cn(xn.frequency);let _n="#ef4444";if(e){const Tn=(mn.frequency+xn.frequency)/2;Tn>=e.min&&Tn<=e.max?_n="#4ade80":(Tn>=e.min*.9&&Tn<e.min||Tn>e.max&&Tn<=e.max*1.1)&&(_n="#facc15")}on.strokeStyle=_n,on.beginPath(),on.moveTo(gn,yn),on.lineTo(bn,wn),on.stroke()}if(en!==void 0){const pn=en*an;on.strokeStyle="#fff",on.lineWidth=2,on.beginPath(),on.moveTo(pn,0),on.lineTo(pn,dn),on.stroke()}},[St,e,en,tn]),jsxRuntimeExports.jsxs("div",{className:"w-full h-48 bg-slate-900 rounded-xl border border-slate-800 overflow-hidden relative",children:[jsxRuntimeExports.jsx("canvas",{ref:nn,width:800,height:200,className:"w-full h-full"}),jsxRuntimeExports.jsx("div",{className:"absolute top-2 left-2 text-xs text-slate-500",children:"Pitch (Hz)"})]})},Toast=({message:St,type:e="success",onClose:en,duration:tn=3e3})=>{reactExports.useEffect(()=>{const un=setTimeout(()=>{en()},tn);return()=>clearTimeout(un)},[tn,en]);const nn=e==="success"?"bg-green-500/10 border-green-500/50":"bg-red-500/10 border-red-500/50",sn=e==="success"?"text-green-400":"text-red-400",on=e==="success"?CheckCircle:XCircle;return jsxRuntimeExports.jsxs("div",{className:`fixed bottom-24 left-1/2 transform -translate-x-1/2 z-50 flex items-center gap-3 px-6 py-4 rounded-xl border backdrop-blur-md shadow-xl animate-in fade-in slide-in-from-bottom-4 ${nn}`,children:[jsxRuntimeExports.jsx(on,{className:`w-5 h-5 ${sn}`}),jsxRuntimeExports.jsx("span",{className:`font-medium ${sn}`,children:St}),jsxRuntimeExports.jsx("button",{onClick:en,className:`ml-2 hover:opacity-70 ${sn}`,children:jsxRuntimeExports.jsx(X$1,{className:"w-4 h-4"})})]})},AssessmentView=({feedback:St,onClose:e,onPractice:en})=>{if(!St)return null;const{summary:tn,strengths:nn,focusArea:sn,details:on,tips:un}=St;return jsxRuntimeExports.jsxs("div",{className:"bg-slate-900 rounded-2xl p-6 border border-slate-800 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center shadow-lg shadow-indigo-500/20",children:jsxRuntimeExports.jsx(Sparkles,{className:"w-6 h-6 text-white"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-white",children:"Coach's Assessment"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400 text-sm",children:"Based on your latest recording"})]})]}),jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-slate-800 to-slate-900 rounded-xl p-6 mb-6 border border-slate-700/50",children:jsxRuntimeExports.jsxs("p",{className:"text-lg font-medium text-slate-200 leading-relaxed",children:['"',tn,'"']})}),jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("h3",{className:"font-bold text-green-400 flex items-center gap-2",children:[jsxRuntimeExports.jsx(CheckCircle,{className:"w-5 h-5"}),"What Went Well"]}),nn.length>0?jsxRuntimeExports.jsx("ul",{className:"space-y-3",children:nn.map((dn,fn)=>jsxRuntimeExports.jsxs("li",{className:"flex items-start gap-3 bg-green-500/5 rounded-lg p-3 border border-green-500/10",children:[jsxRuntimeExports.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 shrink-0"}),jsxRuntimeExports.jsx("span",{className:"text-slate-300 text-sm",children:dn})]},fn))}):jsxRuntimeExports.jsx("p",{className:"text-slate-500 text-sm italic",children:"Keep practicing to build your strengths!"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("h3",{className:"font-bold text-amber-400 flex items-center gap-2",children:[jsxRuntimeExports.jsx(AlertCircle,{className:"w-5 h-5"}),"Primary Focus",sn.priority==="high"&&jsxRuntimeExports.jsx("span",{className:"text-xs bg-red-500/20 text-red-400 px-2 py-0.5 rounded-full",children:"High Priority"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-amber-500/5 rounded-xl p-4 border border-amber-500/10",children:[jsxRuntimeExports.jsx("div",{className:"font-bold text-amber-200 mb-1",children:sn.title}),jsxRuntimeExports.jsx("p",{className:"text-slate-300 text-sm mb-4",children:sn.description}),sn.exerciseDetails&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400 mb-3",children:[jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(TrendingUp,{className:"w-3 h-3"}),sn.exerciseDetails.difficulty]}),jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Clock,{className:"w-3 h-3"}),sn.exerciseDetails.duration," min"]})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>en(sn.exercise),className:"w-full py-2 bg-amber-500/10 hover:bg-amber-500/20 text-amber-400 rounded-lg text-sm font-bold transition-colors flex items-center justify-center gap-2",children:["Practice ",sn.exercise,jsxRuntimeExports.jsx(ArrowRight,{className:"w-4 h-4"})]})]})]})]}),un&&un.length>0&&jsxRuntimeExports.jsxs("div",{className:"mt-6 p-4 bg-blue-500/5 rounded-xl border border-blue-500/10",children:[jsxRuntimeExports.jsxs("h3",{className:"font-bold text-blue-400 flex items-center gap-2 mb-3",children:[jsxRuntimeExports.jsx(Zap,{className:"w-4 h-4"}),"Pro Tips"]}),jsxRuntimeExports.jsx("ul",{className:"space-y-2",children:un.map((dn,fn)=>jsxRuntimeExports.jsx("li",{className:"text-slate-300 text-sm",children:dn},fn))})]}),jsxRuntimeExports.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-800",children:[jsxRuntimeExports.jsx("h3",{className:"font-bold text-slate-400 mb-4 text-sm uppercase tracking-wider",children:"Detailed Breakdown"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[jsxRuntimeExports.jsx(MetricCard,{title:"Pitch",status:on.pitch.status,score:on.pitch.score,icon:Activity}),jsxRuntimeExports.jsx(MetricCard,{title:"Resonance",status:on.resonance.status,score:on.resonance.score,icon:Mic}),jsxRuntimeExports.jsx(MetricCard,{title:"Stability",status:on.stability.status,score:on.stability.score,icon:Activity}),jsxRuntimeExports.jsx(MetricCard,{title:"Voice Quality",status:on.voiceQuality.status,score:on.voiceQuality.score,icon:Sparkles})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-8 flex justify-end",children:jsxRuntimeExports.jsx("button",{onClick:e,className:"px-6 py-2 bg-slate-800 hover:bg-slate-700 text-white rounded-lg font-medium transition-colors",children:"Close Assessment"})})]})},MetricCard=({title:St,status:e,score:en,icon:tn})=>{const sn=(on=>on>=8?"text-green-400 bg-green-500/10 border-green-500/20":on>=5?"text-amber-400 bg-amber-500/10 border-amber-500/20":"text-red-400 bg-red-500/10 border-red-500/20")(en);return jsxRuntimeExports.jsxs("div",{className:`p-4 rounded-xl border ${sn} flex flex-col items-center justify-center text-center`,children:[jsxRuntimeExports.jsx("div",{className:"p-2 rounded-lg bg-black/20 mb-2",children:jsxRuntimeExports.jsx(tn,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx("div",{className:"font-bold text-sm",children:St}),jsxRuntimeExports.jsx("div",{className:"text-xs opacity-80 capitalize mb-1",children:e}),jsxRuntimeExports.jsxs("div",{className:"font-bold text-lg",children:[en,"/10"]})]})},AnalysisView=()=>{var Rr,Kr,Cr,Gr,Zn,Xr,hs,us,zr,ls;const{audioEngineRef:St,targetRange:e,userSettings:en}=useGem(),[tn,nn]=reactExports.useState("record"),[sn,on]=reactExports.useState(!1),[un,dn]=reactExports.useState(0),[fn,hn]=reactExports.useState(null),[an,rn]=reactExports.useState(null),[cn,pn]=reactExports.useState("transcript"),[mn,xn]=reactExports.useState(0),[gn,yn]=reactExports.useState(!1),[bn,wn]=reactExports.useState(""),[_n,Tn]=reactExports.useState([]),[An,Pn]=reactExports.useState(!1),[Sn,Cn]=reactExports.useState(null),[Nn,Mn]=reactExports.useState(null),Fn=reactExports.useRef(null),In=reactExports.useRef(null),Bn=reactExports.useRef(null);reactExports.useEffect(()=>{var wr;(wr=St.current)!=null&&wr.audioContext&&(Bn.current=new VoiceAnalyzer(St.current.audioContext)),transcriptionEngine.initialize().catch(console.error)},[St]),reactExports.useEffect(()=>()=>{Fn.current&&clearInterval(Fn.current)},[]);const Ln=(wr,Fr="success")=>{Cn({message:wr,type:Fr})},qn=async()=>{if(!St.current)return;St.current.isActive||await St.current.start(),await St.current.startAnalysisRecording()&&(on(!0),dn(0),Fn.current=setInterval(()=>{dn(Fr=>Fr+1)},1e3))},Yn=async()=>{if(!St.current)return;on(!1),clearInterval(Fn.current);const wr=await St.current.stopAnalysisRecording();wr&&(hn(wr),nn("analyzing"),wn("Initializing analysis..."),await Qn(wr))},Qn=async wr=>{try{wn("Processing audio...");const Fr=await St.current.blobToAudioBuffer(wr.blob);wn("Transcribing speech (this may take a moment)...");const Qr=await transcriptionEngine.transcribe(wr.blob);if(!Qr||!Qr.text)throw new Error("Transcription failed to produce text");wn("Calculating voice metrics...");const fs=Bn.current.analyzeBuffer(Fr),os=Qr.words.map(Or=>{const Ir=Bn.current.analyzeBuffer(Fr,Or.start,Or.end),$r=sr(Ir,e);return{...Or,metrics:Ir,deviations:$r}}),xr={transcript:Qr.text,words:os,overall:fs,duration:Fr.duration,audioUrl:wr.url,blob:wr.blob,pitchSeries:fs.pitchSeries};rn(xr),Mn(null),nn("results")}catch(Fr){console.error("Analysis error:",Fr),Ln("Analysis failed: "+Fr.message,"error"),nn("record")}},zn=()=>{if(!an)return;const wr=CoachEngine.generateFeedback(an,{targetPitch:e,gender:(en==null?void 0:en.gender)||"feminine"});Mn(wr),pn("coach")},lr=async()=>{if(!(!an||An)){Pn(!0);try{await historyService.saveSession({duration:an.duration,overall:an.overall,transcript:an.transcript,words:an.words,audioBlob:an.blob,pitchSeries:an.pitchSeries}),Ln("Session saved to history!","success")}catch(wr){console.error("Failed to save session:",wr),Ln("Failed to save session","error")}finally{Pn(!1)}}},$n=async()=>{try{const wr=await historyService.getAllSessions();Tn(wr),nn("history")}catch(wr){console.error("Failed to load history:",wr),Ln("Failed to load history","error")}},On=wr=>{const Fr=URL.createObjectURL(wr.audioBlob);rn({...wr,audioUrl:Fr,blob:wr.audioBlob}),Mn(null),nn("results")},er=async(wr,Fr)=>{if(wr.stopPropagation(),window.confirm("Are you sure you want to delete this session?"))try{await historyService.deleteSession(Fr),$n(),Ln("Session deleted","success")}catch(Qr){console.error("Failed to delete session:",Qr),Ln("Failed to delete session","error")}},sr=(wr,Fr)=>{const Qr={};if(wr.pitch&&Fr){const fs=wr.pitch.mean;fs<Fr.min?(Qr.pitch=(Fr.min-fs)/Fr.min*100,Qr.pitchDirection="low"):fs>Fr.max?(Qr.pitch=(fs-Fr.max)/Fr.max*100,Qr.pitchDirection="high"):(Qr.pitch=0,Qr.pitchDirection="good")}return Qr},ar=wr=>{if(!wr||!wr.pitch)return"text-green-400";const Fr=Math.abs(wr.pitch);return Fr<5?"text-green-400":Fr<15?"text-yellow-400":Fr<25?"text-orange-400":"text-red-400"},cr=()=>{In.current&&(gn?In.current.pause():In.current.play(),yn(!gn))},gr=wr=>{In.current&&(In.current.currentTime=wr.start,In.current.play(),yn(!0))},vr=wr=>{const Fr=Math.floor(wr/60),Qr=Math.floor(wr%60);return`${Fr}:${Qr.toString().padStart(2,"0")}`},Er=wr=>new Date(wr).toLocaleDateString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-slate-950 text-white p-4 pb-24",children:[jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent mb-2",children:"Voice Analysis"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400 text-sm",children:"Record your voice and get detailed feedback on pitch, resonance, and voice quality"})]}),tn!=="history"&&jsxRuntimeExports.jsx("button",{onClick:$n,className:"p-3 bg-slate-900 rounded-xl hover:bg-slate-800 transition-colors border border-slate-800",title:"View History",children:jsxRuntimeExports.jsx(History,{className:"w-5 h-5 text-slate-400"})})]}),tn==="record"&&jsxRuntimeExports.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[jsxRuntimeExports.jsx("div",{className:"bg-slate-900 rounded-2xl p-8 border border-slate-800",children:jsxRuntimeExports.jsx("div",{className:"text-center space-y-6",children:sn?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"w-32 h-32 mx-auto bg-red-500/20 border-4 border-red-500 rounded-full flex items-center justify-center animate-pulse",children:jsxRuntimeExports.jsx("div",{className:"w-6 h-6 bg-red-500 rounded-full animate-ping"})}),jsxRuntimeExports.jsx("div",{className:"text-4xl font-mono font-bold text-red-400",children:vr(un)}),jsxRuntimeExports.jsxs("button",{onClick:Yn,className:"px-8 py-4 bg-red-500/20 border border-red-500 rounded-xl font-bold text-lg text-red-400 hover:bg-red-500/30 transition-all transform active:scale-95",children:[jsxRuntimeExports.jsx(Square,{className:"w-5 h-5 inline mr-2"}),"Stop & Analyze"]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"w-32 h-32 mx-auto bg-gradient-to-br from-blue-600 to-purple-600 rounded-full flex items-center justify-center shadow-lg shadow-blue-500/20",children:jsxRuntimeExports.jsx(Mic,{className:"w-16 h-16"})}),jsxRuntimeExports.jsx("button",{onClick:qn,className:"px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl font-bold text-lg hover:from-blue-500 hover:to-purple-500 transition-all transform active:scale-95 shadow-lg",children:"Start Recording"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400 text-sm",children:"Speak naturally for 10-30 seconds"})]})})}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-900/50 rounded-xl p-6 border border-slate-800",children:[jsxRuntimeExports.jsxs("h3",{className:"font-bold mb-3 flex items-center gap-2",children:[jsxRuntimeExports.jsx(FileText,{className:"w-5 h-5 text-blue-400"}),"Tips for Best Results"]}),jsxRuntimeExports.jsxs("ul",{className:"space-y-2 text-sm text-slate-300",children:[jsxRuntimeExports.jsx("li",{children:" Speak naturally - read a paragraph or describe your day"}),jsxRuntimeExports.jsx("li",{children:" Aim for 15-30 seconds of continuous speech"}),jsxRuntimeExports.jsx("li",{children:" Use a quiet environment with minimal background noise"}),jsxRuntimeExports.jsx("li",{children:" Speak at a comfortable volume and pace"})]})]})]}),tn==="analyzing"&&jsxRuntimeExports.jsxs("div",{className:"bg-slate-900 rounded-2xl p-12 border border-slate-800 text-center animate-in fade-in zoom-in-95 duration-300",children:[jsxRuntimeExports.jsx("div",{className:"w-24 h-24 mx-auto mb-6 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Analyzing Your Voice..."}),jsxRuntimeExports.jsx("p",{className:"text-slate-400",children:bn||"Extracting pitch, formants, and voice quality metrics"})]}),tn==="history"&&jsxRuntimeExports.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>nn("record"),className:"flex items-center gap-2 text-slate-400 hover:text-white transition-colors",children:[jsxRuntimeExports.jsx(ChevronLeft,{className:"w-5 h-5"}),"Back to Recording"]}),jsxRuntimeExports.jsx("div",{className:"grid gap-4",children:_n.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-12 text-slate-500 bg-slate-900/50 rounded-xl border border-slate-800 border-dashed",children:[jsxRuntimeExports.jsx("p",{className:"mb-4",children:"No history yet."}),jsxRuntimeExports.jsx("button",{onClick:()=>nn("record"),className:"px-4 py-2 bg-blue-600 rounded-lg text-sm font-bold hover:bg-blue-500 transition-colors",children:"Record your first session"})]}):_n.map(wr=>{var Fr,Qr,fs,os,xr;return jsxRuntimeExports.jsxs("div",{onClick:()=>On(wr),className:"bg-slate-900 p-6 rounded-xl border border-slate-800 hover:border-blue-500/50 transition-all cursor-pointer group relative",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-full flex items-center justify-center text-blue-400",children:jsxRuntimeExports.jsx(Calendar,{className:"w-5 h-5"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-bold",children:Er(wr.date)}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-slate-400",children:[vr(wr.duration)," duration"]})]})]}),jsxRuntimeExports.jsx("button",{onClick:Or=>er(Or,wr.id),className:"p-2 hover:bg-red-500/20 rounded-lg text-slate-500 hover:text-red-400 transition-colors opacity-0 group-hover:opacity-100",children:jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4"})})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-slate-500",children:"Avg Pitch"}),jsxRuntimeExports.jsxs("div",{className:"font-bold text-blue-400",children:[((Qr=(Fr=wr.overall.pitch)==null?void 0:Fr.mean)==null?void 0:Qr.toFixed(0))||"N/A"," Hz"]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-slate-500",children:"Resonance"}),jsxRuntimeExports.jsxs("div",{className:"font-bold text-purple-400",children:[((os=(fs=wr.overall.formants)==null?void 0:fs.f1)==null?void 0:os.toFixed(0))||"N/A"," Hz"]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-slate-500",children:"Jitter"}),jsxRuntimeExports.jsxs("div",{className:"font-bold text-green-400",children:[((xr=wr.overall.jitter)==null?void 0:xr.toFixed(2))||"N/A","%"]})]})]})]},wr.id)})})]}),tn==="results"&&an&&jsxRuntimeExports.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[jsxRuntimeExports.jsxs("div",{className:"bg-slate-900 rounded-2xl p-6 border border-slate-800",children:[jsxRuntimeExports.jsx("audio",{ref:In,src:an.audioUrl,onTimeUpdate:wr=>xn(wr.target.currentTime),onEnded:()=>yn(!1),className:"hidden"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("button",{onClick:cr,className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center hover:bg-blue-500 transition-colors",children:gn?jsxRuntimeExports.jsx(Pause,{className:"w-6 h-6"}):jsxRuntimeExports.jsx(Play,{className:"w-6 h-6 ml-1"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"text-sm text-slate-400 mb-1",children:[vr(mn)," / ",vr(an.duration)]}),jsxRuntimeExports.jsx("div",{className:"h-2 bg-slate-800 rounded-full overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-500 transition-all",style:{width:`${mn/an.duration*100}%`}})})]}),jsxRuntimeExports.jsx("button",{onClick:lr,disabled:An,className:"p-3 bg-slate-800 rounded-lg hover:bg-slate-700 transition-colors text-slate-300 hover:text-white",title:"Save to History",children:jsxRuntimeExports.jsx(Save,{className:"w-5 h-5"})}),jsxRuntimeExports.jsx("button",{onClick:()=>nn("record"),className:"px-4 py-2 bg-slate-800 rounded-lg hover:bg-slate-700 transition-colors text-sm",children:"New Recording"})]})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-2 border-b border-slate-800 overflow-x-auto",children:[{id:"transcript",label:"Transcript",icon:FileText},{id:"metrics",label:"Metrics",icon:BarChart3},{id:"viz",label:"Visualizations",icon:Waveform},{id:"coach",label:"AI Coach",icon:Sparkles}].map(wr=>jsxRuntimeExports.jsxs("button",{onClick:()=>{pn(wr.id),wr.id==="coach"&&!Nn&&zn()},className:`px-4 py-3 font-medium transition-colors flex items-center gap-2 whitespace-nowrap ${cn===wr.id?"text-blue-400 border-b-2 border-blue-400":"text-slate-400 hover:text-slate-300"}`,children:[jsxRuntimeExports.jsx(wr.icon,{className:"w-4 h-4"}),wr.label]},wr.id))}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-900 rounded-2xl p-6 border border-slate-800 min-h-[300px]",children:[cn==="transcript"&&jsxRuntimeExports.jsxs("div",{className:"space-y-4 animate-in fade-in duration-300",children:[jsxRuntimeExports.jsx("h3",{className:"font-bold text-lg mb-4",children:"Color-Coded Transcript"}),jsxRuntimeExports.jsx("div",{className:"text-lg leading-relaxed",children:an.words.map((wr,Fr)=>{var Qr,fs;return jsxRuntimeExports.jsx("span",{onClick:()=>gr(wr),className:`${ar(wr.deviations)} cursor-pointer hover:underline transition-colors mr-2 ${mn>=wr.start&&mn<=wr.end?"font-bold underline":""}`,title:`Pitch: ${((fs=(Qr=wr.metrics.pitch)==null?void 0:Qr.mean)==null?void 0:fs.toFixed(1))||"N/A"} Hz`,children:wr.text},Fr)})}),jsxRuntimeExports.jsxs("div",{className:"mt-6 pt-4 border-t border-slate-800",children:[jsxRuntimeExports.jsx("div",{className:"text-sm text-slate-400 mb-2",children:"Color Legend:"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 bg-green-400 rounded"}),jsxRuntimeExports.jsx("span",{children:"Within target (5%)"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 bg-yellow-400 rounded"}),jsxRuntimeExports.jsx("span",{children:"Minor deviation (5-15%)"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 bg-orange-400 rounded"}),jsxRuntimeExports.jsx("span",{children:"Moderate deviation (15-25%)"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 bg-red-400 rounded"}),jsxRuntimeExports.jsxs("span",{children:["Significant deviation (",">","25%)"]})]})]})]})]}),cn==="metrics"&&jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 animate-in fade-in duration-300",children:[jsxRuntimeExports.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4",children:[jsxRuntimeExports.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Average Pitch"}),jsxRuntimeExports.jsxs("div",{className:"text-3xl font-bold text-blue-400",children:[((Kr=(Rr=an.overall.pitch)==null?void 0:Rr.mean)==null?void 0:Kr.toFixed(1))||"N/A"," Hz"]}),e&&jsxRuntimeExports.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Target: ",e.min,"-",e.max," Hz"]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4",children:[jsxRuntimeExports.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Resonance (F1/F2)"}),jsxRuntimeExports.jsxs("div",{className:"text-2xl font-bold text-purple-400",children:[((Gr=(Cr=an.overall.formants)==null?void 0:Cr.f1)==null?void 0:Gr.toFixed(0))||"N/A"," / ",((Xr=(Zn=an.overall.formants)==null?void 0:Zn.f2)==null?void 0:Xr.toFixed(0))||"N/A"," Hz"]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4",children:[jsxRuntimeExports.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Jitter"}),jsxRuntimeExports.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[((hs=an.overall.jitter)==null?void 0:hs.toFixed(2))||"N/A","%"]}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Normal: ","<","1%"]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4",children:[jsxRuntimeExports.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Voice Quality (HNR)"}),jsxRuntimeExports.jsxs("div",{className:"text-2xl font-bold text-yellow-400",children:[((us=an.overall.hnr)==null?void 0:us.toFixed(1))||"N/A"," dB"]}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Normal: ",">","15 dB"]})]})]}),cn==="viz"&&jsxRuntimeExports.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-bold text-lg mb-4",children:"Pitch Contour"}),jsxRuntimeExports.jsx(PitchTrace,{data:an.pitchSeries||[],targetRange:e,currentTime:mn,duration:an.duration})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-bold text-lg mb-4",children:"Vowel Space (Resonance)"}),jsxRuntimeExports.jsx(VowelSpacePlot,{f1:(zr=an.overall.formants)==null?void 0:zr.f1,f2:(ls=an.overall.formants)==null?void 0:ls.f2}),jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Shows your average resonance position relative to standard vowel targets."})]})]}),cn==="coach"&&jsxRuntimeExports.jsx("div",{className:"animate-in fade-in duration-300",children:Nn?jsxRuntimeExports.jsx(AssessmentView,{feedback:Nn,onClose:()=>pn("transcript"),onPractice:wr=>{const Fr=CoachEngine.getExerciseDetails(wr);Ln(Fr?`Navigate to ${Fr.route} to practice ${wr}`:`Starting ${wr}...`,"success")}}):jsxRuntimeExports.jsxs("div",{className:"text-center py-12",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400",children:"Consulting the coach..."})]})})]})]})]}),Sn&&jsxRuntimeExports.jsx(Toast,{message:Sn.message,type:Sn.type,onClose:()=>Cn(null)})]})},IPA_DICT={the:"",quick:"kwk",brown:"bran",fox:"fks",jumps:"dmps",over:"v",lazy:"lezi",dog:"dg",hello:"hl",world:"wld",voice:"vs",training:"tren",pitch:"pt",resonance:"reznns",see:"si",she:"i",s:"s",sh:"",seat:"sit",sheet:"it",sip:"sp",ship:"p",save:"sev",shave:"ev",sue:"su",shoe:"u",sock:"sk",shock:"k",fizz:"fz",fish:"f",lease:"lis",leash:"li",mess:"mes",mesh:"me",class:"kls",clash:"kl"},RULES=[{regex:/sh/g,replacement:""},{regex:/ch/g,replacement:"t"},{regex:/th/g,replacement:""},{regex:/ng/g,replacement:""},{regex:/ee/g,replacement:"i"},{regex:/oo/g,replacement:"u"},{regex:/a/g,replacement:""},{regex:/e/g,replacement:"e"},{regex:/i/g,replacement:""},{regex:/o/g,replacement:""},{regex:/u/g,replacement:""},{regex:/y$/g,replacement:"i"}],convertToIPA=St=>St?St.toLowerCase().split(/\s+/).map(tn=>{const nn=tn.replace(/[.,!?;:"()]/g,"");if(IPA_DICT[nn])return IPA_DICT[nn];let sn=nn;return RULES.forEach(on=>{sn=sn.replace(on.regex,on.replacement)}),`[${sn}]`}).join(" "):"",isSibilantWord=St=>{if(!St)return!1;const e=St.toLowerCase();return e.includes("s")||e.includes("sh")||e.includes("z")||e.includes("ch")||e.includes("j")},SagittalDiagram=({target:St="neutral"})=>{const e={headOutline:"M 50 250 Q 50 50 200 50 Q 350 50 350 250",palate:"M 150 150 Q 200 100 250 150",tongueNeutral:"M 180 220 Q 220 200 260 220",tongueHighFront:"M 180 220 Q 200 120 260 220",tongueHighBack:"M 180 220 Q 240 120 260 220",tongueLow:"M 180 220 Q 220 240 260 220",tongueSibilant:"M 180 220 Q 210 140 260 220",lipsNeutral:"M 280 180 Q 290 180 280 200",lipsRounded:"M 290 180 Q 310 190 290 200"},en=()=>{switch(St){case"i":return e.tongueHighFront;case"u":return e.tongueHighBack;case"a":return e.tongueLow;case"s":case"sh":return e.tongueSibilant;default:return e.tongueNeutral}},tn=()=>{switch(St){case"u":case"sh":return e.lipsRounded;default:return e.lipsNeutral}};return jsxRuntimeExports.jsx("div",{className:"w-full h-64 bg-slate-900 rounded-xl border border-slate-800 flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 400 300",className:"w-full h-full",children:[jsxRuntimeExports.jsx("path",{d:e.headOutline,fill:"none",stroke:"#475569",strokeWidth:"2"}),jsxRuntimeExports.jsx("path",{d:e.palate,fill:"none",stroke:"#94a3b8",strokeWidth:"4",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:en(),fill:"none",stroke:"#f472b6",strokeWidth:"8",strokeLinecap:"round",className:"transition-all duration-300 ease-in-out"}),jsxRuntimeExports.jsx("path",{d:tn(),fill:"none",stroke:"#f472b6",strokeWidth:"4",strokeLinecap:"round",className:"transition-all duration-300 ease-in-out"}),jsxRuntimeExports.jsxs("text",{x:"50",y:"280",fill:"#94a3b8",className:"text-sm font-mono",children:["Target: ",St!=="neutral"?`/${St}/`:"Neutral"]})]})})},SibilantGauge=({centroid:St=0,isSibilant:e=!1})=>{const on=(un=>(Math.max(3e3,Math.min(un,9e3))-3e3)/6e3*100)(St);return jsxRuntimeExports.jsxs("div",{className:"bg-slate-900 rounded-xl border border-slate-800 p-6",children:[jsxRuntimeExports.jsxs("h3",{className:"text-slate-400 text-sm font-bold mb-4 flex justify-between",children:[jsxRuntimeExports.jsx("span",{children:"SIBILANT SHARPNESS"}),jsxRuntimeExports.jsx("span",{className:e?"text-green-400":"text-slate-600",children:e?"DETECTED":"WAITING"})]}),jsxRuntimeExports.jsxs("div",{className:"relative h-12 bg-slate-800 rounded-full overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 flex opacity-30",children:[jsxRuntimeExports.jsx("div",{className:"w-[30%] bg-red-500",title:"Dull /sh/"}),jsxRuntimeExports.jsx("div",{className:"w-[20%] bg-yellow-500",title:"Androgynous"}),jsxRuntimeExports.jsx("div",{className:"w-[50%] bg-green-500",title:"Sharp /s/"})]}),jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 flex justify-between px-4 items-center text-xs font-bold text-white/50 pointer-events-none",children:[jsxRuntimeExports.jsx("span",{children:"/sh/ (Dull)"}),jsxRuntimeExports.jsx("span",{children:"/s/ (Sharp)"})]}),jsxRuntimeExports.jsx("div",{className:`absolute top-0 bottom-0 w-2 bg-white shadow-[0_0_10px_rgba(255,255,255,0.8)] transition-all duration-100 ease-out ${e?"opacity-100":"opacity-30"}`,style:{left:`${on}%`}})]}),jsxRuntimeExports.jsxs("div",{className:"mt-2 flex justify-between text-xs text-slate-500 font-mono",children:[jsxRuntimeExports.jsx("span",{children:"3kHz"}),jsxRuntimeExports.jsxs("span",{children:[St.toFixed(0)," Hz"]}),jsxRuntimeExports.jsx("span",{children:"9kHz"})]}),jsxRuntimeExports.jsxs("p",{className:"mt-4 text-xs text-slate-400",children:["Aim for the ",jsxRuntimeExports.jsx("span",{className:"text-green-400",children:"Green Zone"}),' for a brighter, more feminine "S" sound. The ',jsxRuntimeExports.jsx("span",{className:"text-red-400",children:"Red Zone"}),' is typical for "SH" sounds.']})]})},ArticulationView=()=>{var mn,xn;const{audioEngineRef:St}=useGem(),[e,en]=reactExports.useState(!1),[tn,nn]=reactExports.useState({sibilance:{centroid:0,score:0,isSibilant:!1},formants:{f1:0,f2:0}}),[sn,on]=reactExports.useState([]),[un,dn]=reactExports.useState("neutral"),fn=reactExports.useRef(null),hn=reactExports.useRef(null);reactExports.useRef(0),reactExports.useEffect(()=>{var gn;return(gn=St.current)!=null&&gn.audioContext&&(fn.current=new VoiceAnalyzer(St.current.audioContext)),transcriptionEngine.initialize().catch(console.error),()=>{rn()}},[St]);const an=async()=>{if(!St.current)return;St.current.isActive||await St.current.start(),en(!0);const gn=()=>{if(e){if(St.current.getAudioBuffer(),St.current.analyser){const yn=St.current.analyser,bn=yn.frequencyBinCount,wn=new Float32Array(bn);if(yn.getFloatTimeDomainData(wn),fn.current){const _n=fn.current.analyzeBuffer({getChannelData:()=>wn,sampleRate:St.current.audioContext.sampleRate,length:wn.length});nn({sibilance:_n.sibilance,formants:_n.formants}),cn(_n)}}hn.current=requestAnimationFrame(gn)}};gn()},rn=()=>{en(!1),hn.current&&cancelAnimationFrame(hn.current)},cn=gn=>{const{f1:yn,f2:bn}=gn.formants,{isSibilant:wn}=gn.sibilance;wn?dn(gn.sibilance.centroid>6e3?"s":"sh"):yn&&bn?yn<400&&bn>2e3?dn("i"):yn<400&&bn<1e3?dn("u"):yn>700?dn("a"):dn("neutral"):dn("neutral")},pn=gn=>{const yn=convertToIPA(gn),bn=isSibilantWord(gn);on(wn=>[...wn.slice(-4),{text:gn,ipa:yn,isSibilant:bn}])};return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-slate-950 text-white p-4 pb-24",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-pink-400 to-purple-400 bg-clip-text text-transparent mb-2",children:"Articulation Practice"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400",children:"Refine your consonant precision and vowel resonance."})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("h2",{className:"font-bold text-lg flex items-center gap-2",children:[jsxRuntimeExports.jsx(Info$1,{className:"w-5 h-5 text-blue-400"}),"Tongue Position"]}),jsxRuntimeExports.jsxs("span",{className:"text-xs font-mono text-slate-500",children:["F1: ",(mn=tn.formants.f1)==null?void 0:mn.toFixed(0)," | F2: ",(xn=tn.formants.f2)==null?void 0:xn.toFixed(0)]})]}),jsxRuntimeExports.jsx(SagittalDiagram,{target:un})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("h2",{className:"font-bold text-lg flex items-center gap-2",children:[jsxRuntimeExports.jsx(Volume2,{className:"w-5 h-5 text-green-400"}),"Sibilant Quality"]}),jsxRuntimeExports.jsx(SibilantGauge,{centroid:tn.sibilance.centroid,isSibilant:tn.sibilance.isSibilant}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-xl border border-slate-800 text-sm text-slate-400",children:[jsxRuntimeExports.jsxs("p",{className:"mb-2",children:[jsxRuntimeExports.jsx("strong",{className:"text-white",children:"Tip:"}),' For a sharper "S":']}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[jsxRuntimeExports.jsx("li",{children:"Raise tongue tip to alveolar ridge"}),jsxRuntimeExports.jsx("li",{children:"Groove the tongue center"}),jsxRuntimeExports.jsx("li",{children:"Smile slightly to shorten vocal tract"})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-900 rounded-xl border border-slate-800 p-6 min-h-[120px]",children:[jsxRuntimeExports.jsx("h3",{className:"text-slate-500 text-xs font-bold mb-4 uppercase tracking-wider",children:"Live Transcription (IPA)"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[sn.length===0&&!e&&jsxRuntimeExports.jsx("span",{className:"text-slate-600 italic",children:"Start recording to see transcription..."}),sn.map((gn,yn)=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center animate-in fade-in slide-in-from-bottom-2",children:[jsxRuntimeExports.jsx("span",{className:`text-lg font-mono font-bold ${gn.isSibilant?"text-pink-400":"text-slate-300"}`,children:gn.ipa}),jsxRuntimeExports.jsx("span",{className:"text-xs text-slate-500",children:gn.text})]},yn)),e&&jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-pink-500 rounded-full animate-pulse mb-2"})]})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center gap-4",children:e?jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[jsxRuntimeExports.jsxs("button",{onClick:rn,className:"px-8 py-4 bg-slate-800 border border-red-500/50 text-red-400 rounded-full font-bold text-lg hover:bg-red-500/10 transition-all flex items-center gap-3",children:[jsxRuntimeExports.jsx(Square,{className:"w-5 h-5"}),"Stop"]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center px-4 border-l border-slate-800",children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-slate-600 font-bold uppercase",children:"Ref:"}),jsxRuntimeExports.jsx("button",{onClick:()=>pn("see"),className:"px-3 py-1 bg-slate-800 rounded text-xs hover:bg-slate-700 border border-slate-700 transition-colors",title:"Target /s/",children:"See"}),jsxRuntimeExports.jsx("button",{onClick:()=>pn("she"),className:"px-3 py-1 bg-slate-800 rounded text-xs hover:bg-slate-700 border border-slate-700 transition-colors",title:"Target /sh/",children:"She"}),jsxRuntimeExports.jsx("button",{onClick:()=>pn("hello"),className:"px-3 py-1 bg-slate-800 rounded text-xs hover:bg-slate-700 border border-slate-700 transition-colors",children:"Hello"})]})]}):jsxRuntimeExports.jsxs("button",{onClick:an,className:"px-8 py-4 bg-gradient-to-r from-pink-600 to-purple-600 rounded-full font-bold text-lg hover:from-pink-500 hover:to-purple-500 transition-all shadow-lg shadow-pink-500/20 flex items-center gap-3",children:[jsxRuntimeExports.jsx(Mic,{className:"w-6 h-6"}),"Start Practice"]})})]})})},ResonanceRiverGame=({dataRef:St,calibration:e,onScore:en,onClose:tn})=>{const nn=reactExports.useRef(null),sn=reactExports.useRef(),on=reactExports.useRef({playerLane:1,playerX:50,targetX:50,obstacles:[],score:0,speed:2.5,frameCount:0,gameOver:!1,lastCollision:0,width:300,height:400,particles:[],waterOffset:0});return reactExports.useEffect(()=>{const un=nn.current,dn=un.getContext("2d"),fn=window.devicePixelRatio||1,hn=()=>{const cn=un.getBoundingClientRect();un.width=cn.width*fn,un.height=cn.height*fn,dn.scale(fn,fn),on.current.width=cn.width,on.current.height=cn.height};hn(),window.addEventListener("resize",hn);const an=()=>{const cn=on.current,pn=cn.width,mn=cn.height,xn=pn/3;if(!cn.gameOver){const{resonance:wn,pitch:_n}=St.current,Tn=e?e.dark:500,An=e?e.bright:2500;let Pn=1;if(_n>0&&wn>0){const Cn=Math.max(0,Math.min(1,(wn-Tn)/(An-Tn)));Cn<.35?Pn=0:Cn>.65?Pn=2:Pn=1}if(Pn!==cn.playerLane)for(let Cn=0;Cn<3;Cn++)cn.particles.push({x:cn.playerX,y:mn-60,vx:(Math.random()-.5)*2,vy:(Math.random()-.5)*2,life:20,color:"rgba(255, 255, 255, 0.5)",size:Math.random()*3});if(cn.playerLane=Pn,cn.targetX=cn.playerLane*xn+xn/2,cn.playerX+=(cn.targetX-cn.playerX)*.1,cn.frameCount++,cn.waterOffset+=.5,cn.frameCount%60===0){const Cn=Math.floor(Math.random()*3),Nn=Math.random()>.7;cn.obstacles.push({lane:Cn,x:Cn*xn+xn/2,y:-50,type:Nn?"star":"rock",collected:!1,angle:0})}cn.obstacles.forEach(Cn=>{Cn.y+=cn.speed,Cn.angle+=.05}),cn.obstacles=cn.obstacles.filter(Cn=>Cn.y<mn+50);const Sn=mn-60;cn.obstacles.forEach(Cn=>{const Nn=Math.abs(Cn.y-Sn),Mn=Math.abs(Cn.x-cn.playerX);if(Nn<40&&Mn<30&&!Cn.collected){if(Cn.type==="rock")Date.now()-cn.lastCollision>1e3&&(cn.gameOver=!0,cn.lastCollision=Date.now());else if(Cn.type==="star"){Cn.collected=!0,cn.score+=10,en(cn.score),cn.score%50===0&&(cn.speed+=.2);for(let Fn=0;Fn<8;Fn++)cn.particles.push({x:Cn.x,y:Cn.y,vx:(Math.random()-.5)*5,vy:(Math.random()-.5)*5,life:30,color:"#fbbf24",size:Math.random()*4})}}}),cn.particles.forEach(Cn=>{Cn.x+=Cn.vx,Cn.y+=Cn.vy,Cn.life--}),cn.particles=cn.particles.filter(Cn=>Cn.life>0)}dn.clearRect(0,0,pn,mn);const gn=dn.createLinearGradient(0,0,0,mn);gn.addColorStop(0,"#1e3a8a"),gn.addColorStop(1,"#3b82f6"),dn.fillStyle=gn,dn.fillRect(0,0,pn,mn),dn.strokeStyle="rgba(255,255,255,0.05)",dn.lineWidth=2;for(let wn=0;wn<mn;wn+=40){const _n=(wn+cn.waterOffset)%mn;dn.beginPath(),dn.moveTo(0,_n),dn.quadraticCurveTo(pn/2,_n+20,pn,_n),dn.stroke()}dn.strokeStyle="rgba(255,255,255,0.1)",dn.setLineDash([10,10]),dn.beginPath(),dn.moveTo(xn,0),dn.lineTo(xn,mn),dn.moveTo(xn*2,0),dn.lineTo(xn*2,mn),dn.stroke(),dn.setLineDash([]),cn.obstacles.forEach(wn=>{if(!wn.collected){if(dn.save(),dn.translate(wn.x,wn.y),wn.type==="star"){dn.rotate(wn.angle),dn.fillStyle="#fbbf24",dn.shadowColor="#fbbf24",dn.shadowBlur=10,dn.beginPath();for(let _n=0;_n<5;_n++)dn.lineTo(Math.cos((18+_n*72)*Math.PI/180)*15,-Math.sin((18+_n*72)*Math.PI/180)*15),dn.lineTo(Math.cos((54+_n*72)*Math.PI/180)*6,-Math.sin((54+_n*72)*Math.PI/180)*6);dn.closePath(),dn.fill()}else dn.fillStyle="#64748b",dn.shadowColor="black",dn.shadowBlur=5,dn.beginPath(),dn.arc(0,0,15,0,Math.PI*2),dn.fill(),dn.fillStyle="#475569",dn.beginPath(),dn.arc(-5,-5,5,0,Math.PI*2),dn.fill();dn.restore()}}),cn.particles.forEach(wn=>{dn.fillStyle=wn.color,dn.globalAlpha=wn.life/30,dn.beginPath(),dn.arc(wn.x,wn.y,wn.size,0,Math.PI*2),dn.fill(),dn.globalAlpha=1});const yn=cn.playerX,bn=mn-60;dn.save(),dn.translate(yn,bn),dn.fillStyle="#e2e8f0",dn.beginPath(),dn.moveTo(0,-20),dn.quadraticCurveTo(15,0,10,20),dn.quadraticCurveTo(0,25,-10,20),dn.quadraticCurveTo(-15,0,0,-20),dn.fill(),dn.fillStyle="#ef4444",dn.fillRect(-8,0,16,5),dn.restore(),dn.fillStyle="rgba(255,255,255,0.4)",dn.font="bold 12px Inter",dn.textAlign="center",dn.fillText("DARK",xn/2,mn-20),dn.fillText("NEUTRAL",pn/2,mn-20),dn.fillText("BRIGHT",pn-xn/2,mn-20),dn.fillStyle="white",dn.font="bold 24px Inter",dn.textAlign="right",dn.fillText(cn.score,pn-20,40),cn.gameOver&&(dn.fillStyle="rgba(0,0,0,0.7)",dn.fillRect(0,0,pn,mn),dn.fillStyle="white",dn.font="bold 30px Inter",dn.textAlign="center",dn.fillText("Crash!",pn/2,mn/2),dn.font="16px Inter",dn.fillStyle="#cbd5e1",dn.fillText("Tap to restart",pn/2,mn/2+30)),sn.current=requestAnimationFrame(an)};sn.current=requestAnimationFrame(an);const rn=()=>{on.current.gameOver&&(on.current.gameOver=!1,on.current.obstacles=[],on.current.score=0,on.current.speed=2.5,on.current.playerLane=1)};return un.addEventListener("mousedown",rn),un.addEventListener("touchstart",rn),()=>{window.removeEventListener("resize",hn),cancelAnimationFrame(sn.current),un.removeEventListener("mousedown",rn),un.removeEventListener("touchstart",rn)}},[e,en]),jsxRuntimeExports.jsxs("div",{className:"relative w-full mb-4 rounded-2xl overflow-hidden shadow-2xl border-4 border-slate-800 bg-slate-800",children:[jsxRuntimeExports.jsx("canvas",{ref:nn,className:"w-full h-80 block cursor-pointer"}),jsxRuntimeExports.jsx("div",{className:"absolute top-2 left-2 bg-black/40 backdrop-blur-md px-3 py-1 rounded-full text-[10px] font-bold text-white border border-white/10",children:" Use RESONANCE to steer"}),jsxRuntimeExports.jsx("button",{onClick:tn,className:"absolute top-2 right-2 p-2 bg-red-500/80 hover:bg-red-500 text-white rounded-full shadow-lg transition-colors z-10",children:jsxRuntimeExports.jsx(X$1,{className:"w-4 h-4"})})]})},CloudHopperGame=({dataRef:St,onScore:e,onClose:en})=>{const tn=reactExports.useRef(null),nn=reactExports.useRef(),sn=reactExports.useRef({player:{x:150,y:300,vy:0,radius:15,grounded:!0},platforms:[],cameraY:0,score:0,width:300,height:400,gameOver:!1});return reactExports.useEffect(()=>{const on=tn.current,un=on.getContext("2d"),dn=window.devicePixelRatio||1,fn=()=>{const rn=on.getBoundingClientRect();if(on.width=rn.width*dn,on.height=rn.height*dn,un.scale(dn,dn),sn.current.width=rn.width,sn.current.height=rn.height,sn.current.platforms.length===0){for(let cn=0;cn<6;cn++)sn.current.platforms.push({x:Math.random()*(rn.width-60),y:rn.height-cn*100-50,width:60,height:15});sn.current.platforms[0].x=rn.width/2-30,sn.current.platforms[0].y=rn.height-50,sn.current.player.x=rn.width/2,sn.current.player.y=rn.height-70}};fn(),window.addEventListener("resize",fn);const hn=()=>{const rn=sn.current,cn=rn.width,pn=rn.height;if(!rn.gameOver){const yn=St.current.weight;if(rn.player.grounded&&yn>10){const bn=Math.min(100,yn)/100;rn.player.vy=-10-bn*15,rn.player.grounded=!1}if(rn.player.vy+=.5,rn.player.y+=rn.player.vy,rn.player.vy>0&&rn.platforms.forEach(bn=>{rn.player.x>bn.x&&rn.player.x<bn.x+bn.width&&rn.player.y+rn.player.radius>bn.y&&rn.player.y+rn.player.radius<bn.y+bn.height+10&&(rn.player.y=bn.y-rn.player.radius,rn.player.vy=0,rn.player.grounded=!0)}),rn.player.y<pn/2){const bn=pn/2-rn.player.y;rn.player.y=pn/2,rn.platforms.forEach(wn=>{wn.y+=bn,wn.y>pn&&(wn.y=-20,wn.x=Math.random()*(cn-60),rn.score+=1,e(rn.score))})}rn.player.y>pn+50&&(rn.gameOver=!0),rn.player.x<0&&(rn.player.x=cn),rn.player.x>cn&&(rn.player.x=0)}un.clearRect(0,0,cn,pn);const mn=un.createLinearGradient(0,0,0,pn);mn.addColorStop(0,"#38bdf8"),mn.addColorStop(1,"#bae6fd"),un.fillStyle=mn,un.fillRect(0,0,cn,pn),rn.platforms.forEach(yn=>{un.font="30px Arial",un.fillText("",yn.x,yn.y+20)}),un.font="30px Arial",un.textAlign="center",un.textBaseline="middle",un.fillText("",rn.player.x,rn.player.y);const xn=St.current.weight,gn=Math.min(100,xn)*2;un.fillStyle="rgba(0,0,0,0.3)",un.fillRect(10,pn-210,20,200),un.fillStyle=xn>10?"#4ade80":"#f87171",un.fillRect(10,pn-10-gn,20,gn),un.fillStyle="white",un.font="bold 30px sans-serif",un.textAlign="right",un.fillText(rn.score,cn-20,50),rn.gameOver&&(un.fillStyle="rgba(0,0,0,0.7)",un.fillRect(0,0,cn,pn),un.fillStyle="white",un.font="bold 30px sans-serif",un.textAlign="center",un.fillText("Fell!",cn/2,pn/2),un.font="16px sans-serif",un.fillStyle="#cbd5e1",un.fillText("Tap to restart",cn/2,pn/2+30)),nn.current=requestAnimationFrame(hn)};nn.current=requestAnimationFrame(hn);const an=()=>{if(sn.current.gameOver){sn.current.gameOver=!1,sn.current.score=0,sn.current.platforms=[],sn.current.player={x:150,y:300,vy:0,radius:15,grounded:!0};const rn=on.getBoundingClientRect();for(let cn=0;cn<6;cn++)sn.current.platforms.push({x:Math.random()*(rn.width-60),y:rn.height-cn*100-50,width:60,height:15});sn.current.platforms[0].x=rn.width/2-30,sn.current.platforms[0].y=rn.height-50,sn.current.player.x=rn.width/2,sn.current.player.y=rn.height-70}};return on.addEventListener("mousedown",an),on.addEventListener("touchstart",an),()=>{window.removeEventListener("resize",fn),cancelAnimationFrame(nn.current),on.removeEventListener("mousedown",an),on.removeEventListener("touchstart",an)}},[e]),jsxRuntimeExports.jsxs("div",{className:"relative w-full mb-4 rounded-2xl overflow-hidden shadow-2xl border-4 border-slate-800 bg-slate-800",children:[" ",jsxRuntimeExports.jsx("canvas",{ref:tn,className:"w-full h-96 block cursor-pointer"})," ",jsxRuntimeExports.jsx("div",{className:"absolute top-2 left-2 bg-black/40 backdrop-blur-md px-3 py-1 rounded-full text-[10px] font-bold text-white border border-white/10",children:"  Jump with VOLUME "})," ",jsxRuntimeExports.jsxs("button",{onClick:en,className:"absolute top-2 right-2 p-2 bg-red-500/80 hover:bg-red-500 text-white rounded-full shadow-lg transition-colors z-10",children:[" ",jsxRuntimeExports.jsx(X$1,{className:"w-4 h-4"})," "]})," "]})},StaircaseGame=({dataRef:St,targetRange:e,onScore:en,onClose:tn})=>{const nn=reactExports.useRef(null),sn=reactExports.useRef(),on=reactExports.useRef({step:0,progress:0,targetPitch:0,currentStepPitch:0,score:0,width:300,height:400,unstableFrames:0}),un=()=>{const fn=e.min,hn=(e.max-e.min)/5;return[fn,fn+hn,fn+hn*2,fn+hn*3,fn+hn*4]},dn=reactExports.useRef(un());return reactExports.useEffect(()=>{const fn=nn.current,hn=fn.getContext("2d"),an=window.devicePixelRatio||1,rn=()=>{const pn=fn.getBoundingClientRect();fn.width=pn.width*an,fn.height=pn.height*an,hn.scale(an,an),on.current.width=pn.width,on.current.height=pn.height};rn(),window.addEventListener("resize",rn);const cn=()=>{const pn=on.current,mn=pn.width,xn=pn.height,gn=dn.current[pn.step%dn.current.length];pn.targetPitch=gn;const yn=St.current.pitch;let bn=!1;yn>0&&(Math.abs(yn-gn)<15?(bn=!0,pn.progress+=.5,pn.unstableFrames=0):(pn.unstableFrames++,pn.unstableFrames>30&&(pn.progress=Math.max(0,pn.progress-1)))),pn.progress>=100&&(pn.step++,pn.progress=0,pn.score+=10,en(pn.score)),hn.clearRect(0,0,mn,xn);const wn=hn.createLinearGradient(0,0,0,xn);wn.addColorStop(0,"#1e293b"),wn.addColorStop(1,"#0f172a"),hn.fillStyle=wn,hn.fillRect(0,0,mn,xn);const _n=xn-50;for(let Pn=-1;Pn<3;Pn++){const Sn=pn.step+Pn;if(Sn<0)continue;const Cn=50+Pn*60,Nn=_n-Pn*50;hn.fillStyle=Pn===0?"#3b82f6":"#475569",hn.fillRect(Cn,Nn,100,10),hn.fillStyle="rgba(255,255,255,0.5)",hn.font="10px monospace";const Mn=dn.current[Sn%dn.current.length];hn.fillText(Math.round(Mn)+"Hz",Cn+20,Nn+25)}if(pn.progress>0){const Pn=pn.progress/100*60,Sn=150,Cn=_n;hn.fillStyle=bn?"#4ade80":"#facc15",hn.fillRect(Sn,Cn,Pn,5),hn.fillStyle="white",hn.font="bold 12px sans-serif",hn.fillText(Math.round(pn.progress)+"%",Sn+10,Cn-10)}const Tn=100,An=_n-30;if(hn.font="30px Arial",hn.fillText("",Tn,An),hn.textAlign="center",hn.fillStyle="white",bn)hn.font="bold 16px sans-serif",hn.fillText("HOLD STEADY!",mn/2,50);else if(hn.font="14px sans-serif",hn.fillStyle="#94a3b8",hn.fillText(`Target: ${Math.round(gn)} Hz`,mn/2,50),yn>0){const Pn=yn-gn;hn.fillStyle=Pn>0?"#f87171":"#60a5fa",hn.fillText(Pn>0?"Too High":"Too Low",mn/2,70)}hn.textAlign="left",hn.fillStyle="white",hn.font="bold 20px sans-serif",hn.textAlign="right",hn.fillText(`Score: ${pn.score}`,mn-20,30),sn.current=requestAnimationFrame(cn)};return sn.current=requestAnimationFrame(cn),()=>{window.removeEventListener("resize",rn),cancelAnimationFrame(sn.current)}},[e,en]),jsxRuntimeExports.jsxs("div",{className:"relative w-full mb-4 rounded-2xl overflow-hidden shadow-2xl border-4 border-slate-800 bg-slate-800",children:[" ",jsxRuntimeExports.jsx("canvas",{ref:nn,className:"w-full h-80 block cursor-pointer"})," ",jsxRuntimeExports.jsx("div",{className:"absolute top-2 left-2 bg-black/40 backdrop-blur-md px-3 py-1 rounded-full text-[10px] font-bold text-white border border-white/10",children:"  Hold Pitch to Build "})," ",jsxRuntimeExports.jsxs("button",{onClick:tn,className:"absolute top-2 right-2 p-2 bg-red-500/80 hover:bg-red-500 text-white rounded-full shadow-lg transition-colors z-10",children:[" ",jsxRuntimeExports.jsx(X$1,{className:"w-4 h-4"})," "]})," "]})},FlappyVoiceGame=({dataRef:St,targetRange:e,onScore:en,onClose:tn})=>{const nn=reactExports.useRef(null),sn=reactExports.useRef(),on=reactExports.useRef({status:"ready",score:0,bestScore:0,birdY:200,pipes:[],frame:0,width:300,height:400,clouds:[],flash:0,particles:[],smoothedPitch:0,silenceTimer:0,lastValidPitch:0}),un=180,dn=3;return reactExports.useEffect(()=>{const fn=nn.current,hn=fn.getContext("2d"),an=window.devicePixelRatio||1;for(let mn=0;mn<5;mn++)on.current.clouds.push({x:Math.random()*400,y:Math.random()*200,size:20+Math.random()*20,speed:.2+Math.random()*.3});const rn=()=>{const mn=fn.getBoundingClientRect();fn.width=mn.width*an,fn.height=mn.height*an,hn.scale(an,an),on.current.width=mn.width,on.current.height=mn.height};rn(),window.addEventListener("resize",rn);const cn=()=>{const mn=on.current,xn=mn.width,gn=mn.height;if(mn.status==="playing"){const{pitch:Tn}=St.current;if(Tn>50?(mn.silenceTimer=0,mn.smoothedPitch+=(Tn-mn.smoothedPitch)*.08,mn.lastValidPitch=mn.smoothedPitch):(mn.silenceTimer++,mn.silenceTimer<15?mn.smoothedPitch=mn.lastValidPitch:mn.smoothedPitch*=.9),mn.smoothedPitch>50){const Sn=(e.min||150)-10,Cn=(e.max||300)+10,Nn=Math.max(0,Math.min(1,(mn.smoothedPitch-Sn)/(Cn-Sn))),Mn=gn-50-Nn*(gn-100);mn.birdY+=(Mn-mn.birdY)*.05}else mn.birdY+=4;if(mn.birdY>gn-20&&(mn.birdY=gn-20),mn.birdY<20&&(mn.birdY=20),mn.frame%150===0){const Sn=Math.random()*(gn-un-100)+50;mn.pipes.push({x:xn,topHeight:Sn,passed:!1})}mn.pipes.forEach(Sn=>Sn.x-=dn),mn.clouds.forEach(Sn=>{Sn.x-=Sn.speed,Sn.x<-50&&(Sn.x=xn+50)}),mn.pipes.length>0&&mn.pipes[0].x<-60&&mn.pipes.shift();const An=60,Pn=18;mn.pipes.forEach(Sn=>{const Cn=Sn.x,Nn=Sn.x+50;if(An+Pn>Cn&&An-Pn<Nn&&(mn.birdY-Pn<Sn.topHeight||mn.birdY+Pn>Sn.topHeight+un)&&(mn.status="gameover",mn.score>mn.bestScore&&(mn.bestScore=mn.score)),!Sn.passed&&An>Nn){Sn.passed=!0,mn.score+=1,mn.flash=15,en(mn.score);for(let Mn=0;Mn<5;Mn++)mn.particles.push({x:An,y:mn.birdY,vx:(Math.random()-.5)*5,vy:(Math.random()-.5)*5,life:30,color:"#fbbf24"})}}),mn.particles.forEach(Sn=>{Sn.x+=Sn.vx,Sn.y+=Sn.vy,Sn.life--}),mn.particles=mn.particles.filter(Sn=>Sn.life>0),mn.flash>0&&mn.flash--,mn.frame++}hn.clearRect(0,0,xn,gn);const yn=hn.createLinearGradient(0,0,0,gn);yn.addColorStop(0,"#38bdf8"),yn.addColorStop(1,"#bae6fd"),hn.fillStyle=yn,hn.fillRect(0,0,xn,gn),hn.fillStyle="rgba(255, 255, 255, 0.8)",mn.clouds.forEach(Tn=>{hn.beginPath(),hn.arc(Tn.x,Tn.y,Tn.size,0,Math.PI*2),hn.arc(Tn.x+Tn.size*.8,Tn.y-Tn.size*.2,Tn.size*.9,0,Math.PI*2),hn.arc(Tn.x-Tn.size*.8,Tn.y+Tn.size*.1,Tn.size*.7,0,Math.PI*2),hn.fill()}),mn.pipes.forEach(Tn=>{const An=hn.createLinearGradient(Tn.x,0,Tn.x+50,0);An.addColorStop(0,"#475569"),An.addColorStop(.5,"#64748b"),An.addColorStop(1,"#475569"),hn.fillStyle=An,hn.fillRect(Tn.x,0,50,Tn.topHeight),hn.fillRect(Tn.x,Tn.topHeight+un,50,gn-(Tn.topHeight+un)),hn.fillStyle="#334155",hn.fillRect(Tn.x-2,Tn.topHeight-24,54,24),hn.fillRect(Tn.x-2,Tn.topHeight+un,54,24),hn.fillStyle="rgba(255,255,255,0.1)",hn.fillRect(Tn.x+5,0,10,Tn.topHeight-24),hn.fillRect(Tn.x+5,Tn.topHeight+un+24,10,gn)}),mn.particles.forEach(Tn=>{hn.fillStyle=Tn.color,hn.globalAlpha=Tn.life/30,hn.beginPath(),hn.arc(Tn.x,Tn.y,3,0,Math.PI*2),hn.fill(),hn.globalAlpha=1});const bn=60,wn=mn.birdY;hn.beginPath(),hn.moveTo(bn,wn+24),hn.quadraticCurveTo(bn-5+Math.sin(mn.frame*.2)*5,wn+40,bn,wn+55),hn.strokeStyle="#f1f5f9",hn.lineWidth=2,hn.stroke();const _n=hn.createRadialGradient(bn-8,wn-8,2,bn,wn,22);_n.addColorStop(0,"#f87171"),_n.addColorStop(1,"#dc2626"),hn.fillStyle=_n,hn.beginPath(),hn.ellipse(bn,wn,20,24,0,0,Math.PI*2),hn.fill(),hn.beginPath(),hn.moveTo(bn,wn+23),hn.lineTo(bn-4,wn+28),hn.lineTo(bn+4,wn+28),hn.fill(),hn.beginPath(),hn.ellipse(bn-8,wn-8,6,10,-.5,0,Math.PI*2),hn.fillStyle="rgba(255,255,255,0.4)",hn.fill(),mn.flash>0&&(hn.fillStyle=`rgba(255, 255, 255, ${mn.flash/20})`,hn.fillRect(0,0,xn,gn)),hn.fillStyle="#0f172a",hn.font="bold 32px Inter",hn.textAlign="right",hn.fillText(mn.score,xn-20,50),hn.font="bold 14px Inter",hn.fillStyle="#475569",hn.fillText(`BEST: ${mn.bestScore}`,xn-20,70),hn.textAlign="center",mn.status==="ready"?(hn.fillStyle="rgba(0,0,0,0.4)",hn.fillRect(0,0,xn,gn),hn.fillStyle="white",hn.font="bold 32px Inter",hn.fillText("Tap to Start",xn/2,gn/2),hn.font="16px Inter",hn.fillText("Control height with PITCH",xn/2,gn/2+30)):mn.status==="gameover"&&(hn.fillStyle="rgba(0,0,0,0.7)",hn.fillRect(0,0,xn,gn),hn.fillStyle="white",hn.font="bold 32px Inter",hn.fillText("Game Over",xn/2,gn/2-20),hn.font="24px Inter",hn.fillText(`Score: ${mn.score}`,xn/2,gn/2+20),hn.font="14px Inter",hn.fillStyle="#94a3b8",hn.fillText("Tap to restart",xn/2,gn/2+60)),sn.current=requestAnimationFrame(cn)};sn.current=requestAnimationFrame(cn);const pn=()=>{on.current.status==="ready"?on.current.status="playing":on.current.status==="gameover"&&(on.current.status="ready",on.current.score=0,on.current.birdY=on.current.height/2,on.current.pipes=[],on.current.frame=0)};return fn.addEventListener("mousedown",pn),fn.addEventListener("touchstart",pn),()=>{window.removeEventListener("resize",rn),cancelAnimationFrame(sn.current),fn.removeEventListener("mousedown",pn),fn.removeEventListener("touchstart",pn)}},[e,en]),jsxRuntimeExports.jsxs("div",{className:"relative w-full mb-4 rounded-2xl overflow-hidden shadow-2xl border-4 border-slate-800 bg-slate-800",children:[jsxRuntimeExports.jsx("canvas",{ref:nn,className:"w-full h-96 block cursor-pointer"}),jsxRuntimeExports.jsx("div",{className:"absolute top-2 left-2 bg-black/40 backdrop-blur-md px-3 py-1 rounded-full text-[10px] font-bold text-white border border-white/10",children:" Pitch Control"}),jsxRuntimeExports.jsx("button",{onClick:tn,className:"absolute top-2 right-2 p-2 bg-red-500/80 hover:bg-red-500 text-white rounded-full shadow-lg transition-colors z-10",children:jsxRuntimeExports.jsx(X$1,{className:"w-4 h-4"})})]})},PitchMatchGame=({dataRef:St,targetRange:e,onScore:en,onClose:tn})=>{const nn=reactExports.useRef(null),sn=reactExports.useRef(),on=reactExports.useRef({notes:[],score:0,speed:2,spawnTimer:0,isPlaying:!0,combo:0,floatingTexts:[]});return reactExports.useEffect(()=>{const un=nn.current,dn=un.getContext("2d"),fn=()=>{const rn=un.parentElement;rn&&(un.width=rn.clientWidth,un.height=rn.clientHeight||400)};window.addEventListener("resize",fn),fn();const hn=()=>{const rn=e.min-20,cn=e.max+20,pn=Math.random()*(cn-rn)+rn,mn=un.height-(pn-(rn-20))/(cn-rn+40)*un.height;on.current.notes.push({x:un.width,y:mn,pitch:pn,width:80,hit:!1,missed:!1})},an=()=>{if(!on.current.isPlaying)return;const{pitch:rn}=St.current,cn=on.current;cn.spawnTimer++,cn.spawnTimer>100&&(hn(),cn.spawnTimer=0),cn.notes.forEach(wn=>{wn.x-=cn.speed}),cn.notes=cn.notes.filter(wn=>wn.x+wn.width>-50);const pn=50,mn=30;let xn=-100;if(rn>0){const wn=e.min-20,_n=e.max+20;xn=un.height-(rn-(wn-20))/(_n-wn+40)*un.height}cn.notes.forEach(wn=>{if(!wn.hit&&!wn.missed)if(wn.x<pn+mn&&wn.x+wn.width>pn-mn){if(Math.abs(xn-wn.y)<30){wn.hit=!0;const _n=10+cn.combo;cn.score+=_n,cn.combo++,en(10),cn.floatingTexts.push({x:pn,y:wn.y,text:`+${_n}`,life:40,color:"#4ade80"}),cn.combo>5&&cn.floatingTexts.push({x:pn+20,y:wn.y-20,text:"Perfect!",life:50,color:"#fbbf24"})}}else wn.x+wn.width<pn-mn&&(wn.missed=!0,cn.combo=0,cn.floatingTexts.push({x:pn,y:wn.y,text:"Miss",life:30,color:"#ef4444"}))}),cn.floatingTexts.forEach(wn=>{wn.y-=1,wn.life--}),cn.floatingTexts=cn.floatingTexts.filter(wn=>wn.life>0),dn.clearRect(0,0,un.width,un.height);const gn=e.min,yn=e.max;un.height-(gn-(e.min-40))/(e.max-e.min+80)*un.height,un.height-(yn-(e.min-40))/(e.max-e.min+80)*un.height;const bn=dn.createLinearGradient(0,0,0,un.height);bn.addColorStop(0,"#0f172a"),bn.addColorStop(1,"#1e293b"),dn.fillStyle=bn,dn.fillRect(0,0,un.width,un.height),dn.strokeStyle="rgba(255,255,255,0.05)",dn.lineWidth=1;for(let wn=0;wn<un.height;wn+=50)dn.beginPath(),dn.moveTo(0,wn),dn.lineTo(un.width,wn),dn.stroke();if(dn.strokeStyle="rgba(255, 255, 255, 0.2)",dn.lineWidth=2,dn.beginPath(),dn.moveTo(pn,0),dn.lineTo(pn,un.height),dn.stroke(),rn>0){const wn=dn.createRadialGradient(pn,xn,5,pn,xn,100);wn.addColorStop(0,"rgba(251, 191, 36, 0.2)"),wn.addColorStop(1,"rgba(251, 191, 36, 0)"),dn.fillStyle=wn,dn.fillRect(0,0,un.width,un.height)}cn.notes.forEach(wn=>{wn.hit?(dn.fillStyle="#4ade80",dn.shadowColor="#4ade80",dn.shadowBlur=15,dn.globalAlpha=1-(pn-wn.x)/100):wn.missed?(dn.fillStyle="#ef4444",dn.globalAlpha=.3,dn.shadowBlur=0):(dn.fillStyle="#60a5fa",dn.shadowColor="#60a5fa",dn.shadowBlur=10,dn.globalAlpha=1),dn.globalAlpha>0&&(dn.beginPath(),dn.roundRect(wn.x,wn.y-10,wn.width,20,10),dn.fill()),dn.globalAlpha=1,dn.shadowBlur=0}),rn>0&&(dn.fillStyle="#fbbf24",dn.shadowColor="#fbbf24",dn.shadowBlur=20,dn.beginPath(),dn.arc(pn,xn,8,0,Math.PI*2),dn.fill(),dn.strokeStyle="white",dn.lineWidth=2,dn.beginPath(),dn.arc(pn,xn,12,0,Math.PI*2),dn.stroke(),dn.shadowBlur=0),cn.floatingTexts.forEach(wn=>{dn.fillStyle=wn.color,dn.font="bold 16px Inter",dn.globalAlpha=wn.life/40,dn.fillText(wn.text,wn.x,wn.y),dn.globalAlpha=1}),dn.fillStyle="white",dn.font="bold 20px Inter",dn.fillText(`Score: ${cn.score}`,20,30),cn.combo>1&&(dn.fillStyle="#fbbf24",dn.font="bold 16px Inter",dn.fillText(`${cn.combo}x Combo!`,20,55)),sn.current=requestAnimationFrame(an)};return sn.current=requestAnimationFrame(an),()=>{cancelAnimationFrame(sn.current),window.removeEventListener("resize",fn)}},[e]),jsxRuntimeExports.jsxs("div",{className:"relative w-full mb-4 rounded-2xl overflow-hidden shadow-2xl border-4 border-slate-800 bg-slate-900",children:[jsxRuntimeExports.jsx("canvas",{ref:nn,className:"w-full h-80 block cursor-pointer"}),jsxRuntimeExports.jsx("div",{className:"absolute top-2 right-2 flex gap-2",children:jsxRuntimeExports.jsx("button",{onClick:tn,className:"p-2 bg-red-500/80 hover:bg-red-500 text-white rounded-full shadow-lg transition-colors z-10",children:jsxRuntimeExports.jsx(X$1,{className:"w-4 h-4"})})}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-2 left-2 right-2 text-center pointer-events-none",children:jsxRuntimeExports.jsx("div",{className:"inline-block bg-black/40 backdrop-blur-md px-4 py-2 rounded-full text-xs font-bold text-white border border-white/10",children:" Match the pitch as notes hit the line!"})})]})},App=()=>{const{isAudioActive:St,toggleAudio:e,dataRef:en,calibration:tn,updateCalibration:nn,targetRange:sn,updateTargetRange:on,userMode:un,setUserMode:dn,updateUserMode:fn,goals:hn,settings:an,updateSettings:rn,journals:cn,addJournalEntry:pn,stats:mn,audioEngineRef:xn,showVocalHealthTips:gn,setShowVocalHealthTips:yn,showAssessment:bn,setShowAssessment:wn,showWarmUp:_n,setShowWarmUp:Tn,showForwardFocus:An,setShowForwardFocus:Pn,submitGameResult:Sn,isDataLoaded:Cn}=useGem(),[Nn,Mn]=reactExports.useState("practice"),[Fn,In]=reactExports.useState(!1),[Bn,Ln]=reactExports.useState(!1),[qn,Yn]=reactExports.useState(!1),[Qn,zn]=reactExports.useState(!1),[lr,$n]=reactExports.useState(!1),[On,er]=reactExports.useState(!1),[sr,ar]=reactExports.useState(!1),[cr,gr]=reactExports.useState(!1),[vr,Er]=reactExports.useState(!1),[Rr,Kr]=reactExports.useState(!0),[Cr,Gr]=reactExports.useState("all"),[Zn,Xr]=reactExports.useState("graph");reactExports.useEffect(()=>{if(!Cn)return;const Ir=localStorage.getItem("gem_tutorial_seen"),$r=localStorage.getItem("gem_compass_seen"),ss=localStorage.getItem("gem_calibration_done");Ir?$r?ss||zn(!0):Yn(!0):Ln(!0)},[Cn]);const hs=()=>{Ln(!1),localStorage.setItem("gem_tutorial_seen","true"),Yn(!0)},us=()=>{Yn(!1),localStorage.setItem("gem_compass_seen","true"),zn(!0)},zr=()=>{zn(!1),localStorage.setItem("gem_calibration_done","true")};reactExports.useEffect(()=>{const Ir=()=>yn(!0),$r=()=>wn(!0),ss=()=>Tn(!0),as=()=>Pn(!0);return window.addEventListener("openVocalHealth",Ir),window.addEventListener("openAssessment",$r),window.addEventListener("openWarmUp",ss),window.addEventListener("openForwardFocus",as),()=>{window.removeEventListener("openVocalHealth",Ir),window.removeEventListener("openAssessment",$r),window.removeEventListener("openWarmUp",ss),window.removeEventListener("openForwardFocus",as)}},[]),reactExports.useEffect(()=>{const Ir=()=>window.location.reload();return window.addEventListener("switchProfile",Ir),()=>window.removeEventListener("switchProfile",Ir)},[]);const[ls,wr]=reactExports.useState(null),[Fr,Qr]=reactExports.useState(0),[fs,os]=reactExports.useState(null),xr=()=>{const Ir=Fr+1;if(Qr(Ir),fs&&clearTimeout(fs),Ir===3)gr(!0),Qr(0);else{const $r=setTimeout(()=>Qr(0),1e3);os($r)}},Or=Ir=>{wr(Ir),Mn("practice")};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-slate-950 text-white font-sans selection:bg-blue-500/30 pb-20",children:[jsxRuntimeExports.jsxs("header",{className:"p-4 pt-safe flex justify-between items-center bg-slate-900/50 backdrop-blur-md sticky top-0 z-30 border-b border-white/5",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",onClick:xr,style:{cursor:"pointer"},children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-lg shadow-blue-500/20",children:jsxRuntimeExports.jsx(Mic,{className:"w-5 h-5 text-white"})}),jsxRuntimeExports.jsx("h1",{className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-slate-400",children:"Vocal GEM"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(OfflineIndicator,{}),jsxRuntimeExports.jsx("button",{onClick:()=>In(!0),className:"px-3 py-2 bg-slate-800 hover:bg-slate-700 rounded-lg transition-colors border border-slate-700",children:jsxRuntimeExports.jsx("span",{className:"text-sm font-bold text-white",children:" Settings"})}),jsxRuntimeExports.jsx("button",{onClick:()=>er(!0),className:"w-10 h-10 rounded-full bg-slate-800 border border-white/10 flex items-center justify-center hover:bg-slate-700 transition-colors",children:jsxRuntimeExports.jsx("span",{className:"text-lg",children:""})}),jsxRuntimeExports.jsx("button",{onClick:()=>Er(!vr),className:`w-10 h-10 rounded-full border border-white/10 flex items-center justify-center transition-colors ${vr?"bg-blue-600 text-white":"bg-slate-800 text-slate-400 hover:bg-slate-700"}`,children:jsxRuntimeExports.jsx(Camera,{className:"w-5 h-5"})})]})]}),jsxRuntimeExports.jsxs("main",{className:"p-4 max-w-md mx-auto",children:[Nn==="practice"&&jsxRuntimeExports.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[jsxRuntimeExports.jsx(DailyGoalsWidget,{goals:hn}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-sm font-bold text-slate-400 uppercase tracking-wider",children:"Real-time Analysis"}),jsxRuntimeExports.jsx("button",{onClick:e,className:`px-4 py-1.5 rounded-full text-xs font-bold flex items-center gap-2 transition-all ${St?"bg-red-500/20 text-red-400 animate-pulse":"bg-blue-600 text-white"}`,children:St?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"})," LIVE"]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Mic,{className:"w-3 h-3"})," START"]})})]}),jsxRuntimeExports.jsx("div",{className:"glass-panel-dark rounded-xl p-2 mb-4 flex gap-2 overflow-x-auto",children:[{id:"all",label:"Show All"},{id:"pitch",label:"Pitch"},{id:"resonance",label:"Resonance"},{id:"weight",label:"Weight"},{id:"vowel",label:"Vowel"}].map(Ir=>jsxRuntimeExports.jsx("button",{onClick:()=>Gr(Ir.id),className:`px-4 py-2 rounded-lg text-xs font-bold transition-all whitespace-nowrap ${Cr===Ir.id?"bg-blue-500 text-white":"bg-slate-800/50 text-slate-400 hover:bg-slate-700 hover:text-white"}`,children:Ir.label},Ir.id))}),(Cr==="all"||Cr==="resonance")&&jsxRuntimeExports.jsx(ResonanceOrb,{dataRef:en,calibration:tn}),Cr==="all"&&jsxRuntimeExports.jsx(LiveMetricsBar,{dataRef:en}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[(Cr==="all"||Cr==="pitch")&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"flex justify-end mb-2",children:jsxRuntimeExports.jsxs("div",{className:"glass-panel-dark rounded-lg p-1 flex gap-1",children:[jsxRuntimeExports.jsx("button",{onClick:()=>Xr("graph"),className:`px-3 py-1.5 rounded-md text-xs font-bold transition-all ${Zn==="graph"?"bg-blue-500 text-white":"text-slate-400 hover:text-white"}`,children:"Graph"}),jsxRuntimeExports.jsx("button",{onClick:()=>Xr("orb"),className:`px-3 py-1.5 rounded-md text-xs font-bold transition-all ${Zn==="orb"?"bg-blue-500 text-white":"text-slate-400 hover:text-white"}`,children:"Orb"})]})}),Zn==="graph"?jsxRuntimeExports.jsx(PitchVisualizer,{dataRef:en,targetRange:sn,userMode:un,exercise:ls,onScore:Ir=>Sn(ls,Ir),settings:an}):jsxRuntimeExports.jsx(PitchOrb,{dataRef:en,settings:an})]}),ls&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 bg-black/90 flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-md",children:[ls==="flappy"&&jsxRuntimeExports.jsx(FlappyVoiceGame,{dataRef:en,targetRange:sn,onScore:Ir=>Sn("flappy",Ir),onClose:()=>wr(null)}),ls==="river"&&jsxRuntimeExports.jsx(ResonanceRiverGame,{dataRef:en,targetRange:sn,onScore:Ir=>Sn("river",Ir),onClose:()=>wr(null)}),ls==="hopper"&&jsxRuntimeExports.jsx(CloudHopperGame,{dataRef:en,targetRange:sn,onScore:Ir=>Sn("hopper",Ir),onClose:()=>wr(null)}),ls==="stairs"&&jsxRuntimeExports.jsx(StaircaseGame,{dataRef:en,targetRange:sn,onScore:Ir=>Sn("stairs",Ir),onClose:()=>wr(null)}),ls==="pitchmatch"&&jsxRuntimeExports.jsx(PitchMatchGame,{dataRef:en,targetRange:sn,onScore:Ir=>Sn("pitchmatch",Ir),onClose:()=>wr(null)})]})}),un==="slp"&&jsxRuntimeExports.jsx(Spectrogram,{dataRef:en}),(Cr==="all"||Cr==="weight"||Cr==="vowel")&&jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[(Cr==="all"||Cr==="weight")&&jsxRuntimeExports.jsx(VoiceQualityMeter,{dataRef:en,userMode:un}),(Cr==="all"||Cr==="vowel")&&jsxRuntimeExports.jsx(VowelSpacePlot,{dataRef:en,userMode:un})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-3",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>Mn("tools"),className:"p-4 bg-slate-800 rounded-2xl flex flex-col items-center gap-2 hover:bg-slate-700 transition-colors",children:[jsxRuntimeExports.jsx(Wrench,{className:"text-purple-400"}),jsxRuntimeExports.jsx("span",{className:"text-xs font-bold",children:"Tools"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>Mn("articulation"),className:"p-4 bg-slate-800 rounded-2xl flex flex-col items-center gap-2 hover:bg-slate-700 transition-colors",children:[jsxRuntimeExports.jsx(Mic,{className:"text-pink-400"}),jsxRuntimeExports.jsx("span",{className:"text-xs font-bold",children:"Articulation"})]})]})]}),Nn==="games"&&jsxRuntimeExports.jsx(GameHub,{onSelectGame:Or}),Nn==="coach"&&jsxRuntimeExports.jsx(CoachView,{}),Nn==="history"&&jsxRuntimeExports.jsx(HistoryView,{stats:mn,journals:cn,userMode:un,onLogClick:()=>$n(!0)}),Nn==="tools"&&jsxRuntimeExports.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx("button",{onClick:()=>Mn("practice"),className:"text-slate-400 hover:text-white",children:jsxRuntimeExports.jsx(ArrowLeft,{})}),jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold",children:"Tools"})]}),jsxRuntimeExports.jsx(AudioLibrary,{audioEngine:xn}),jsxRuntimeExports.jsx(IntonationExercise,{}),jsxRuntimeExports.jsx(ComparisonTool,{}),jsxRuntimeExports.jsx(PitchPipe,{audioEngine:xn}),jsxRuntimeExports.jsx(BreathPacer,{}),jsxRuntimeExports.jsx(MirrorComponent,{})]}),Nn==="mixing"&&jsxRuntimeExports.jsx(MixingBoardView,{dataRef:en,audioEngine:xn.current}),Nn==="mixing"&&jsxRuntimeExports.jsx(MixingBoardView,{dataRef:en,audioEngine:xn.current}),Nn==="analysis"&&jsxRuntimeExports.jsx(AnalysisView,{}),Nn==="articulation"&&jsxRuntimeExports.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4 px-4 pt-4",children:[jsxRuntimeExports.jsx("button",{onClick:()=>Mn("practice"),className:"text-slate-400 hover:text-white",children:jsxRuntimeExports.jsx(ArrowLeft,{})}),jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold",children:"Articulation Practice"})]}),jsxRuntimeExports.jsx(ArticulationView,{})]})]}),jsxRuntimeExports.jsx("nav",{className:"fixed bottom-0 inset-x-0 bg-slate-950/90 backdrop-blur-lg border-t border-white/5 pb-safe z-40",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-around items-center p-2 max-w-md mx-auto",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>{Mn("practice"),wr(null)},className:`p-3 rounded-2xl flex flex-col items-center gap-1 transition-all ${Nn==="practice"?"text-blue-400 bg-blue-500/10":"text-slate-500 hover:text-slate-300"}`,children:[jsxRuntimeExports.jsx(Mic2,{className:"w-6 h-6"}),jsxRuntimeExports.jsx("span",{className:"text-[10px] font-bold",children:"Practice"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{Mn("games"),wr(null)},className:`p-3 rounded-2xl flex flex-col items-center gap-1 transition-all ${Nn==="games"?"text-purple-400 bg-purple-500/10":"text-slate-500 hover:text-slate-300"}`,children:[jsxRuntimeExports.jsx(Gamepad2,{className:"w-6 h-6"}),jsxRuntimeExports.jsx("span",{className:"text-[10px] font-bold",children:"Arcade"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{Mn("mixing"),wr(null)},className:`p-3 rounded-2xl flex flex-col items-center gap-1 transition-all ${Nn==="mixing"?"text-pink-400 bg-pink-500/10":"text-slate-500 hover:text-slate-300"}`,children:[jsxRuntimeExports.jsx(Wrench,{className:"w-6 h-6"}),jsxRuntimeExports.jsx("span",{className:"text-[10px] font-bold",children:"Mixer"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{Mn("coach"),wr(null)},className:`p-3 rounded-2xl flex flex-col items-center gap-1 transition-all ${Nn==="coach"?"text-emerald-400 bg-emerald-500/10":"text-slate-500 hover:text-slate-300"}`,children:[jsxRuntimeExports.jsx(Bot,{className:"w-6 h-6"}),jsxRuntimeExports.jsx("span",{className:"text-[10px] font-bold",children:"Coach"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{Mn("history"),wr(null)},className:`p-3 rounded-2xl flex flex-col items-center gap-1 transition-all ${Nn==="history"?"text-orange-400 bg-orange-500/10":"text-slate-500 hover:text-slate-300"}`,children:[jsxRuntimeExports.jsx(BarChart2,{className:"w-6 h-6"}),jsxRuntimeExports.jsx("span",{className:"text-[10px] font-bold",children:"Progress"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{Mn("analysis"),wr(null)},className:`p-3 rounded-2xl flex flex-col items-center gap-1 transition-all ${Nn==="analysis"?"text-cyan-400 bg-cyan-500/10":"text-slate-500 hover:text-slate-300"}`,children:[jsxRuntimeExports.jsx(Activity,{className:"w-6 h-6"}),jsxRuntimeExports.jsx("span",{className:"text-[10px] font-bold",children:"Analysis"})]})]})}),jsxRuntimeExports.jsx(FeedbackSettings,{isOpen:Fn,onClose:()=>In(!1),settings:an,setSettings:rn,targetRange:sn,userMode:un,setUserMode:fn,onSetGoal:Ir=>{let $r={min:170,max:220};Ir==="fem"&&($r={min:165,max:255}),Ir==="masc"&&($r={min:85,max:145}),Ir==="androg"&&($r={min:145,max:175}),on($r)},onUpdateRange:(Ir,$r)=>on({min:Ir,max:$r}),calibration:tn,onUpdateCalibration:nn,onOpenTutorial:()=>{In(!1),Ln(!0)},onExportData:()=>{const Ir={journals:cn,stats:mn,goals:hn,settings:an,targetRange:sn,calibration:tn},$r=new Blob([JSON.stringify(Ir,null,2)],{type:"application/json"}),ss=URL.createObjectURL($r),as=document.createElement("a");as.href=ss,as.download="vocal-gem-data.json",as.click()}}),Rr&&jsxRuntimeExports.jsx(MigrationModal,{onComplete:()=>Kr(!1)}),Bn&&jsxRuntimeExports.jsx(TutorialWizard,{onComplete:hs,onSkip:()=>{Ln(!1),Yn(!0)}}),!Bn&&qn&&jsxRuntimeExports.jsx(CompassWizard,{onComplete:us}),Qn&&jsxRuntimeExports.jsx(CalibrationWizard,{onComplete:zr,audioEngine:xn}),lr&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:jsxRuntimeExports.jsx("div",{className:"w-full max-w-md",children:jsxRuntimeExports.jsx(JournalForm,{onSubmit:pn,onCancel:()=>$n(!1)})})}),On&&jsxRuntimeExports.jsx(Login,{onSwitchToSignup:()=>{er(!1),ar(!0)},onClose:()=>er(!1)}),sr&&jsxRuntimeExports.jsx(Signup,{onSwitchToLogin:()=>{ar(!1),er(!0)},onClose:()=>ar(!1)}),gn&&jsxRuntimeExports.jsx(VocalHealthTips,{onClose:()=>yn(!1)}),bn&&jsxRuntimeExports.jsx(AssessmentModule,{onClose:()=>wn(!1)}),_n&&jsxRuntimeExports.jsx(WarmUpModule,{onComplete:()=>Tn(!1),onSkip:()=>Tn(!1)}),An&&jsxRuntimeExports.jsx(ForwardFocusDrill,{onClose:()=>Pn(!1)}),cr&&jsxRuntimeExports.jsx(IncognitoScreen,{onClose:()=>gr(!1)}),vr&&jsxRuntimeExports.jsx(FloatingCamera,{onClose:()=>Er(!1)})]})};class GlobalErrorBoundary extends React.Component{constructor(en){super(en);Mr(this,"handleReload",()=>{window.location.reload()});Mr(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(en){return{hasError:!0}}componentDidCatch(en,tn){console.error("Global Error Boundary caught an error:",en,tn),this.setState({error:en,errorInfo:tn})}render(){return this.state.hasError?jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs("div",{className:"max-w-md w-full bg-slate-800/50 backdrop-blur-xl rounded-2xl border border-red-500/20 p-8 shadow-2xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-red-500/20 rounded-full",children:jsxRuntimeExports.jsx(AlertTriangle,{className:"w-8 h-8 text-red-400"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-white",children:"Oops! Something went wrong"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400 text-sm",children:"The app encountered an unexpected error"})]})]}),this.state.error&&jsxRuntimeExports.jsxs("div",{className:"mb-6 p-4 bg-slate-900/50 rounded-lg border border-slate-700",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-mono text-red-300 mb-2",children:this.state.error.toString()}),!1]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:this.handleReset,className:"flex-1 px-4 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors font-medium",children:"Try Again"}),jsxRuntimeExports.jsxs("button",{onClick:this.handleReload,className:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors font-medium flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(RefreshCw,{className:"w-4 h-4"}),"Reload App"]})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-500 text-center mt-6",children:"If this problem persists, please contact support"})]})}):this.props.children}}client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(GlobalErrorBoundary,{children:jsxRuntimeExports.jsx(GemProvider,{children:jsxRuntimeExports.jsx(HashRouter,{children:jsxRuntimeExports.jsx(App,{})})})})}));export{_typeof as _,commonjsGlobal as c,getDefaultExportFromCjs as g};
